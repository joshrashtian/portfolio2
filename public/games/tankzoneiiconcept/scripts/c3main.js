// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let k=function(t){bh=t},P=function(t){return t*kh},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},B=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},z=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},V=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*(s=s[3])-h*e;return n?(t[0]=s*(n=1/n),t[1]=-e*n,t[2]=-h*n,t[3]=i*n,t):null},Y=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*r+n*o,t[1]=h*r+s*o,t[2]=e*a+n*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*r,t[1]=h*i+s*r,t[2]=e*-r+n*i,t[3]=h*-r+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],i=i[1];return t[0]=e*r,t[1]=h*r,t[2]=n*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=Th*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},nt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},rt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,n){var r=new bh(6);return r[0]=t,r[1]=s,r[2]=i,r[3]=e,r[4]=h,r[5]=n,r},ft=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],s=s[5],o=i*n-e*h;return o?(t[0]=n*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-n*r)*o,t[5]=(e*r-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+n*l,t[1]=h*a+r*l,t[2]=e*u+n*c,t[3]=h*u+r*c,t[4]=e*f+n*i+o,t[5]=h*f+r*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*a,t[1]=h*i+r*a,t[2]=e*-a+n*i,t[3]=h*-a+r*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=n*i,t[3]=r*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*a+n*i+o,t[5]=h*a+r*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Gt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Ct=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=Th*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(n-u)<=Th*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=Th*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Dt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},At=function(t,s,i,e,h,n,r,o,a){var l=new bh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=n,l[6]=r,l[7]=o,l[8]=a,l},Nt=function(t,s,i,e,h,n,r,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*r-o*l,c=-s*n+o*a,f=l*n-r*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*r)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*n)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(r*i-e*n)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=r*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*r,t[3]=o*a-n*s,t[4]=i*s-h*a,t[5]=h*n-i*o,t[6]=n*l-r*a,t[7]=e*a-i*l,t[8]=i*r-e*n,t},Pt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],n=t[6],r=t[7],o=t[8];return s*(o*e-h*r)+t[1]*(-o*i+h*n)+t[2]*(r*i-e*n)},n=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*r+d*l,t[1]=c*h+f*o+d*u,t[2]=c*n+f*a+d*s,t[3]=p*e+m*r+g*l,t[4]=p*h+m*o+g*u,t[5]=p*n+m*a+g*s,t[6]=y*e+M*r+i*l,t[7]=y*h+M*o+i*u,t[8]=y*n+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=c*e+i*r+l,t[7]=c*h+i*o+u,t[8]=c*n+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*r,t[1]=i*h+c*o,t[2]=i*n+c*a,t[3]=i*r-c*e,t[4]=i*o-c*h,t[5]=i*a-c*n,t[6]=l,t[7]=u,t[8]=s,t},Bt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},zt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Vt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[3]=n-s,t[6]=o+u,t[1]=n+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-r,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*l-n*r,S=e*a-h*o,T=e*l-n*o,b=h*l-n*a,x=u*m-c*p,v=u*g-f*p,G=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*G+S*(u=u*s-d*p)-T*v+b*x)?(t[0]=(o*f-a*c+l*G)*(d=1/d),t[1]=(a*u-r*f-l*v)*d,t[2]=(r*c-o*u+l*x)*d,t[3]=(h*c-e*f-n*G)*d,t[4]=(i*f-h*u+n*v)*d,t[5]=(e*u-i*c-n*x)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Yt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},r=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=Th*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Th*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=n,g[6]=r,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},ns=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s){var i,e,h,n,r,o;return t===s?(i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*l-n*r,S=e*a-h*o,T=e*l-n*o,b=h*l-n*a,x=u*m-c*p,v=u*g-f*p,G=u*(s=s[15])-d*p,C=c*g-f*m,I=c*s-d*m,_=f*s-d*g,E=y*_-M*I+w*C+S*G-T*v+b*x;return E?(t[0]=(o*_-a*I+l*C)*(E=1/E),t[1]=(h*I-e*_-n*C)*E,t[2]=(m*b-g*T+s*S)*E,t[3]=(f*T-c*b-d*S)*E,t[4]=(a*G-r*_-l*v)*E,t[5]=(i*_-h*G+n*v)*E,t[6]=(g*w-p*b-s*M)*E,t[7]=(u*b-f*w+d*M)*E,t[8]=(r*I-o*G+l*x)*E,t[9]=(e*G-i*I-n*x)*E,t[10]=(p*T-m*w+s*y)*E,t[11]=(c*w-u*T-d*y)*E,t[12]=(o*v-r*C-a*x)*E,t[13]=(i*C-e*v+h*x)*E,t[14]=(m*M-p*S-g*y)*E,t[15]=(u*S-c*M+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*r,M=i*a-h*r,w=i*l-n*r,S=e*a-h*o,T=e*l-n*o,b=h*l-n*a,x=u*m-c*p,v=u*g-f*p,G=u*(s=s[15])-d*p,C=c*g-f*m,I=c*s-d*m,_=f*s-d*g;return t[0]=o*_-a*I+l*C,t[1]=h*I-e*_-n*C,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*G-r*_-l*v,t[5]=i*_-h*G+n*v,t[6]=g*w-p*b-s*M,t[7]=u*b-f*w+d*M,t[8]=r*I-o*G+l*x,t[9]=e*G-i*I-n*x,t[10]=p*T-m*w+s*y,t[11]=c*w-u*T-d*y,t[12]=o*v-r*C-a*x,t[13]=i*C-e*v+h*x,t[14]=m*M-p*S-g*y,t[15]=u*S-c*M+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],n=t[5],r=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*n-i*h,p=s*r-e*h,m=i*r-e*n,g=o*c-a*u,y=o*f-l*u,M=a*f-l*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-n*y+r*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*n+w*l+S*d+T*y,t[3]=M*r+w*u+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*n+w*l+S*d+T*y,t[7]=M*r+w*u+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*n+w*l+S*d+T*y,t[11]=M*r+w*u+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*n+w*l+S*d+T*y,t[15]=M*r+w*u+S*p+T*s,t},us=function(t,s,i){var e,h,n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=n*m+l*g+d*i+s[14],t[15]=r*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,n,r,o,a,l,u,c,f,d,p,m,g,y,M,w,S,T,b,x,v=e[0],G=e[1],e=e[2],C=Math.hypot(v,G,e);return C<Th?null:(v*=C=1/C,G*=C,e*=C,C=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=v*G*(h=1-i)-e*C,w=G*G*h+i,S=e*G*h+v*C,T=v*e*h+G*C,b=G*e*h-v*C,x=e*e*h+i,t[0]=n*(i=v*v*h+i)+(l=s[4])*(y=G*v*h+e*C)+(d=s[8])*(e=e*v*h-G*C),t[1]=r*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=n*M+l*w+d*S,t[5]=r*M+u*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=n*T+l*b+d*x,t[9]=r*T+u*b+p*x,t[10]=o*T+c*b+m*x,t[11]=a*T+f*b+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],n=s[5],r=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=n*i+l*e,t[6]=r*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-n*e,t[10]=u*i-r*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=n*i-l*e,t[2]=r*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=n*e+l*i,t[10]=r*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],n=s[1],r=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=n*i+l*e,t[2]=r*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-n*e,t[6]=u*i-r*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],n=i[1],i=i[2],r=Math.hypot(h,n,i);return r<Th?null:(h*=r=1/r,n*=r,i*=r,r=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=n*h*e+i*r,t[2]=i*h*e-n*r,t[3]=0,t[4]=h*n*e-i*r,t[5]=n*n*e+s,t[6]=i*n*e+h*r,t[7]=0,t[8]=h*i*e+n*r,t[9]=n*i*e-h*r,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],n=h+h,r=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*n,a=l*c,l=l*n,u=(s=s[3])*u,c=s*c,s=s*n;return t[0]=1-(a+(h=h*n)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(r+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(r+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+n*n+r*r;return 0<c?(i[0]=2*(o*r+u*e+a*n-l*h)/c,i[1]=2*(a*r+u*h+l*e-o*n)/c,i[2]=2*(l*r+u*n+o*h-a*e)/c):(i[0]=2*(o*r+u*e+a*n-l*h),i[1]=2*(a*r+u*h+l*e-o*n),i[2]=2*(l*r+u*n+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],n=s[6],r=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,n),t[2]=Math.hypot(r,o,a),t},l=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,n=s[1]*(u=1/i[1]),r=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-r)/c,t[2]=(n-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(n+o)/c,t[2]=(e+r)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-r)/c,t[0]=(n+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(n-o)/c,t[0]=(e+r)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],n=e[2],r=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,n),i[1]=Math.hypot(r,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,n=n*(i=1/i[2]),r=r*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-n)/e,t[2]=(h-r)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+r)/e,t[2]=(l+n)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-n)/e,t[0]=(h+r)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-r)/e,t[0]=(l+n)/e,t[1]=(a+c)/e,t[2]=.25*e),t},vs=function(t,s,i,e){var h=(r=s[0])*(u=r+r),n=r*(c=(a=s[1])+a),r=r*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(n+s)*f,t[2]=(r-c)*f,t[3]=0,t[4]=(n-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(r+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gs=function(t,s,i,e,h){var n=(o=s[0])*(c=o+o),r=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,M=(r+s)*d,d=(o-f)*d,r=(r-s)*p,s=(1-(n+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(n+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=r,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+r*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},Cs=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),n=(r=s[1])*l,r=r*(u=r+r),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-r-(e=e*h),t[1]=n+s,t[2]=o-u,t[3]=0,t[4]=n-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),l=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},_s=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=2/(r+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+n);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(r-s)*o*.5,t[9]=(h-n)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*l,t[15]=1,t},Ds=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),r=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*r,t[15]=1,t},As=function(t,s,i,e){var h,n,r,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(l-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,n=i*h-f*u,r=f*e-d*h,(o=Math.hypot(c,n,r))?(c*=o=1/o,n*=o,r*=o):r=n=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=n,t[6]=d,t[7]=0,t[8]=u,t[9]=r,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+n*l+r*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Ns=function(t,s,i,e){var h=s[0],n=s[1],s=s[2],r=e[0],o=e[1],e=e[2],a=h-i[0],l=n-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-r*i)*e+(r=r*l-o*a)*r)&&(c*=u=1/Math.sqrt(u),e*=u,r*=u),t[0]=c,t[1]=e,t[2]=r,t[3]=0,t[4]=l*r-i*e,t[5]=i*c-a*r,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=n,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ps=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Bs=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],x=s[6],v=s[7],G=s[8],C=s[9],I=s[10],_=s[11],E=s[12],D=s[13],A=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(n-S)<=Th*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-T)<=Th*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=Th*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-v)<=Th*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-G)<=Th*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-C)<=Th*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(f-I)<=Th*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-_)<=Th*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-E)<=Th*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-D)<=Th*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-A)<=Th*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},zs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Vs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ys=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ni=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ri=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[0],r=i[1],i=i[2];return t[0]=h*i-s*r,t[1]=s*n-e*i,t[2]=e*r-h*n,t},oi=function(t,s,i,e){var h=s[0],n=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,e=Math.sin(e*h)/n;return t[0]=r*s[0]+e*i[0],t[1]=r*s[1]+e*i[1],t[2]=r*s[2]+e*i[2],t},li=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,l=r*(n-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(r=r*(3-2*n)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*r,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*r,t},ui=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,l=o*r;return t[0]=s[0]*l+i[0]*(o=3*n*o)+e[0]*(r=3*a*r)+h[0]*(a=a*n),t[1]=s[1]*l+i[1]*o+e[1]*r+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*r+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],n=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(n=n||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/n,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/n,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],n=s[0],r=s[1],o=h*(s=s[2])-(c=i[2])*r,a=c*n-e*s,l=e*r-h*n,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=n+(o*=h)+(u*=2),t[1]=r+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},gi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},yi=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],n=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},vi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Gi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ci=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},_i=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Di=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ai=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ni=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Pi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Bi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},zi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return 0<n&&(n=1/Math.sqrt(n)),t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*n,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*r-s*n,t[2]=e*a-l*r+s*h,t[3]=-e*o+l*n-u*h,t},Qi=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=s+e*(i[3]-s),t},Vi=function(t,s){var i,e,h,n,r,o;for(s=s||1;1<=(r=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(n=2*Oh()-1)*n););var a=Math.sqrt((1-r)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*n*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*s,t},Yi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*n-a*h,u=i*h+a*e-r*n,c=i*n+r*h-o*e;return t[0]=l*i+(e=-r*e-o*h-a*n)*-r+u*-a-c*-o,t[1]=u*i+e*-o+c*-r-l*-a,t[2]=c*i+e*-a+l*-o-u*-r,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],n=s[0],r=s[1],o=s[2],s=s[3];return Math.abs(i-n)<=Th*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},G=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Vh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*r+h*a-n*o,t[1]=h*i+s*o+n*r-e*a,t[2]=n*i+s*a+e*o-h*r,t[3]=s*i-e*r-h*o-n*a,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*r,t[1]=h*i+n*r,t[2]=n*i-h*r,t[3]=s*i-e*r,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i-n*r,t[1]=h*i+s*r,t[2]=n*i+e*r,t[3]=s*i-h*r,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],s=s[3],r=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*r,t[1]=h*i-e*r,t[2]=n*i+s*r,t[3]=s*i-n*r,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),r=0<n?s*Math.sin(n)/n:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*Math.cos(n),t},D=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],n=0<(n=Math.sqrt(i*i+e*e+h*h))?Math.atan2(n,s)/n:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return D(t,s),Qh(t,t,i),E(t,t),t},A=function(t,s,i,e){var h,n,r=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=r*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),n=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(n=1-e,e),t[0]=n*r+f*l,t[1]=n*o+f*u,t[2]=n*a+f*c,t[3]=n*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},ne=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(n=n?1/n:0),t[1]=-e*n,t[2]=-h*n,t[3]=s*n,t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},N=function(t,s){var i,e,h,n=s[0]+s[4]+s[8];return 0<n?(h=Math.sqrt(n+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(n=s[3*(n=s[4]>s[0]?1:0)+n]<s[8]?2:n))%3,e=(2+n)%3,h=Math.sqrt(s[3*n+n]-s[3*i+i]-s[3*e+e]+1),t[n]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+n]+s[3*n+i])*h,t[e]=(s[3*e+n]+s[3*n+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,n=Math.PI/360,r=(e*=n,i*=n,Math.sin(s*=n)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"xzy":t[0]=r*l*c-o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c+r*a*u;break;case"yxz":t[0]=r*l*c+o*a*u,t[1]=o*a*c-r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;case"yzx":t[0]=r*l*c+o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c-r*a*u;break;case"zxy":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u+r*a*c,t[3]=o*l*c-r*a*u;break;case"zyx":t[0]=r*l*c-o*a*u,t[1]=o*a*c+r*l*u,t[2]=o*l*u-r*a*c,t[3]=o*l*c+r*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Th},ue=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,n,r,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=n,a[6]=r,a[7]=o,a},de=function(t,s,i,e,h,n,r){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),n=.5*n,r=.5*r;return o[4]=h*e+n*i-r*s,o[5]=n*e+r*t-h*i,o[6]=r*e+h*s-n*t,o[7]=-h*t-n*s-r*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],n=s[0],r=s[1],o=s[2],s=s[3];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*r,t[5]=h*s+i*n-e*o,t[6]=i*s+e*r-h*n,t[7]=-e*n-h*r-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=v(),e=(l(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+n*r+e*a-h*o),t[1]=2*(e*s+n*o+h*r-i*a),t[2]=2*(h*s+n*a+i*o-e*r),t},be=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*i-n*a+l,t[5]=r*a+n*o-e*i+u,t[6]=r*i+e*a-h*o+c,t[7]=-e*o-h*a-n*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return C(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},ve=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return I(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=o*r+(d=s[7])*e+a*n-l*h,c=a*r+d*h+l*e-o*n,f=l*r+d*n+o*h-a*e,d=d*r-o*e-a*h-l*n;return _(t,s,i),e=t[0],t[4]=u*(r=t[3])+d*e+c*(n=t[2])-f*(h=t[1]),t[5]=c*r+d*h+f*e-u*n,t[6]=f*r+d*n+u*h-c*e,t[7]=d*r-u*e-c*h-f*n,t},Ce=function(t,s,i){var e=i[0],h=i[1],n=i[2],i=i[3],r=s[0],o=s[1],a=s[2],l=s[3];return t[0]=r*i+l*e+o*n-a*h,t[1]=o*i+l*h+a*e-r*n,t[2]=a*i+l*n+r*h-o*e,t[3]=l*i-r*e-o*h-a*n,t[4]=(r=s[4])*i+(l=s[7])*e+(o=s[5])*n-(a=s[6])*h,t[5]=o*i+l*h+a*e-r*n,t[6]=a*i+l*n+r*h-o*e,t[7]=l*i-r*e-o*h-a*n,t},Ie=function(t,s,i){var e=s[0],h=s[1],n=s[2],s=s[3],r=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*r+h*a-n*o,t[1]=h*l+s*o+n*r-e*a,t[2]=n*l+s*a+e*o-h*r,t[3]=s*l-e*r-h*o-n*a,t[4]=e*(l=i[7])+s*(r=i[4])+h*(a=i[6])-n*(o=i[5]),t[5]=h*l+s*o+n*r-e*a,t[6]=n*l+s*a+e*o-h*r,t[7]=s*l-e*r-h*o-n*a,t},_e=function(t,s,i,e){var h,n,r,o,a,l;return Math.abs(e)<Th?O(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(r=Math.sin(e))*i[0]/l,n=r*i[1]/l,r=r*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*r-(a=s[2])*n,t[1]=o*i+e*n+a*h-l*r,t[2]=a*i+e*r+l*n-o*h,t[3]=e*i-l*h-o*n-a*r,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*h-e*r,t[6]=a*i+l*r+e*n-o*h,t[7]=l*i-e*h-o*n-a*r,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},De=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+r*p+h*g-n*m,t[1]=h*i+r*m+n*p-e*g,t[2]=n*i+r*g+e*m-h*p,t[3]=r*i-e*p-h*m-n*g,t[4]=e*u+r*o+h*l-n*a+c*i+s*p+f*g-d*m,t[5]=h*u+r*a+n*o-e*l+f*i+s*m+d*p-c*g,t[6]=n*u+r*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=r*u-e*o-h*a-n*l+s*i-c*p-f*m-d*g,t},Ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ne=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,n,r,o,a,l,u=Xh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(r=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(n=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=n,t[4]=(r-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-n*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Pe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],n=t[3],r=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Th*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(n-f)<=Th*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},Be=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},ze=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Ve=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ye=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},nh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},rh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],n=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*n+i[0],t[1]=h*n+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,M,w,S,x,v,G,C,I,_,E,D,A,N,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",kh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Ph={__proto__:null,EPSILON:Th,get M(){return bh},S:Oh,T:Rh,G:k,C:P,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:B,I:z,identity:U,_:W,set:Q,D:V,A:J,N:Y,L:H,multiply:t,rotate:q,scale:Z,O:X,R:K,P:$,F:tt,j:st,add:it,B:s,U:et,equals:ht,W:nt,V:rt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,_:ct,set:ft,A:dt,L:pt,multiply:i,rotate:mt,scale:gt,translate:yt,O:Mt,R:wt,J:St,P:Tt,F:bt,add:xt,B:e,W:vt,V:Gt,U:Ct,equals:It,mul:i,sub:e}),Bh=Object.freeze({__proto__:null,create:h,Y:_t,clone:Et,I:Dt,_:At,set:Nt,identity:Lt,D:Ot,A:Rt,N:kt,L:Pt,multiply:n,translate:Ft,rotate:jt,scale:Bt,J:zt,O:Ut,R:Wt,H:Qt,Z:Vt,X:Jt,K:Yt,P:Ht,F:qt,add:Zt,B:r,W:Xt,V:Kt,U:$t,equals:ts,mul:n,sub:r}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,_:hs,set:ns,identity:p,D:rs,A:os,N:as,L:ls,multiply:o,translate:us,scale:cs,rotate:fs,$:ds,tt:ps,it:ms,J:gs,R:ys,O:Ms,et:ws,ht:Ss,nt:Ts,ot:f,lt:bs,ut:a,ct:d,dt:l,gt:xs,yt:vs,Mt:Gs,Z:Cs,St:Is,Tt:u,perspective:u,bt:_s,xt:Es,vt:c,ortho:c,Gt:Ds,Ct:As,It:Ns,P:Ls,F:Os,add:Rs,B:ks,W:Ps,V:Fs,U:js,equals:Bs,mul:o,sub:ks}),qh=Js,Kh=Ys,Wh=Hs,$h=ii,tn=ei,zh=Us,sn=hi,Lh=m(),vh=Object.freeze({__proto__:null,create:m,clone:zs,length:Us,_:g,I:Ws,set:Qs,add:Vs,B:Js,multiply:Ys,_t:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,Et:si,Dt:ii,At:ei,Nt:hi,Lt:ni,inverse:ri,normalize:y,Ot:M,Rt:w,kt:oi,Pt:ai,Ft:li,jt:ui,random:ci,Bt:fi,zt:di,Ut:pi,$:mi,tt:gi,it:yi,angle:Mi,Wt:wi,P:Si,U:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Qt:$h,Vt:tn,Jt:zh,Yt:sn,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Lh[0]=t[r],Lh[1]=t[r+1],Lh[2]=t[r+2],h(Lh,Lh,n),t[r]=Lh[0],t[r+1]=Lh[1],t[r+2]=Lh[2];return t}}),qh=_i,Kh=Ei,Wh=Di,$h=Fi,tn=ji,sn=T,en=b,Nh=S(),Uh=Object.freeze({__proto__:null,create:S,clone:xi,_:vi,I:Gi,set:Ci,add:Ii,B:_i,multiply:Ei,_t:Di,ceil:Ai,floor:Ni,min:Li,max:Oi,round:Ri,scale:ki,Et:Pi,Dt:Fi,At:ji,length:T,Nt:b,Lt:Bi,inverse:zi,normalize:Ui,Ot:x,Rt:Wi,kt:Qi,random:Vi,Bt:Ji,Ut:Yi,Wt:Hi,P:qi,U:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Qt:$h,Vt:tn,Jt:sn,Yt:en,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Nh[0]=t[r],Nh[1]=t[r+1],Nh[2]=t[r+2],Nh[3]=t[r+3],h(Nh,Nh,n),t[r]=Nh[0],t[r+1]=Nh[1],t[r+2]=Nh[2],t[r+3]=Nh[3];return t}}),qh=xi,Kh=vi,Wh=Gi,$h=Ci,tn=Ii,sn=se,Qh=ki,Vh=x,en=Qi,hn=Jh=T,nn=Yh=b,Hh=Ui,rn=Zi,Eh=m(),Dh=g(1,0,0),Ah=g(0,1,0),on=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Eh,Dh,s),zh(Eh)<1e-6&&w(Eh,Ah,s),y(Eh,Eh),G(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,Hh(t,t))},Ih=v(),_h=v(),an=function(t,s,i,e,h,n){return A(Ih,s,h,n),A(_h,i,e,n),A(t,Ih,_h,2*n*(1-n)),t},Ch=h(),qh=Object.freeze({__proto__:null,create:v,identity:Ki,Ht:G,qt:$i,Zt:te,multiply:se,$:C,tt:I,it:_,Xt:ie,exp:E,Kt:D,pow:ee,Pt:A,random:he,A:ne,$t:re,ts:N,ss:oe,P:ae,clone:qh,_:Kh,I:Wh,set:$h,add:tn,mul:sn,scale:Qh,Ot:Vh,kt:en,length:Jh,Jt:hn,Nt:Yh,Yt:nn,normalize:Hh,U:rn,equals:le,es:on,hs:an,ns:function(t,s,i,e){return Ch[0]=i[0],Ch[3]=i[1],Ch[6]=i[2],Ch[1]=e[0],Ch[4]=e[1],Ch[7]=e[2],Ch[2]=-s[0],Ch[5]=-s[1],Ch[8]=-s[2],Hh(t,N(t,Ch))}}),Zh=Vh,Kh=Xh=Yh,$h=Object.freeze({__proto__:null,create:ue,clone:ce,_:fe,rs:de,ot:L,J:pe,O:me,Y:ge,I:O,identity:ye,set:Me,os:Wh,ls:we,us:Wh,cs:Se,ut:Te,translate:be,$:xe,tt:ve,it:Ge,ds:Ce,gs:Ie,ys:_e,add:Ee,multiply:De,mul:De,scale:Ae,Ot:Zh,kt:Ne,A:Le,$t:Oe,length:Jh,Jt:Jh,Nt:Xh,Yt:Kh,normalize:Re,P:ke,U:Pe,equals:Fe}),tn=ih,sn=Qe,en=Ve,hn=Je,nn=th,rn=sh,on=eh,Gh=R(),an=Object.freeze({__proto__:null,create:R,clone:je,_:Be,I:ze,set:Ue,add:We,B:Qe,multiply:Ve,_t:Je,ceil:Ye,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,Et:$e,Dt:th,At:sh,length:ih,Nt:eh,Lt:hh,inverse:nh,normalize:rh,Ot:oh,Rt:ah,kt:lh,random:uh,Ms:ch,ws:fh,zt:dh,Bt:ph,rotate:mh,angle:gh,Wt:yh,P:Mh,U:wh,equals:Sh,Jt:tn,sub:sn,mul:en,div:hn,Qt:nn,Vt:rn,Yt:on,forEach:function(t,s,i,e,h,n){var r,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,r=i;r<o;r+=s)Gh[0]=t[r],Gh[1]=t[r+1],h(Gh,Gh,n),t[r]=Gh[0],t[r+1]=Gh[1];return t}}),globalThis.Ss=Ph,globalThis.Ss.Ts=Fh,globalThis.Ss.bs=jh,globalThis.Ss.xs=Bh,globalThis.Ss.vs=xh,globalThis.Ss.Gs=qh,globalThis.Ss.Cs=$h,globalThis.Ss.Is=an,globalThis.Ss._s=vh,globalThis.Ss.Es=Uh}var Gh,Ch,Ih,_h,Eh,Dh,Ah,Nh,Lh,Th,bh,Oh,Rh,kh,Ph,Fh,jh,Bh,xh,zh,vh,Uh,Wh,Qh,Vh,Jh,Yh,Hh,qh,Zh,Xh,Kh,$h,tn,sn,en,hn,nn,rn,on,an,O,R,k,P;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],n=t[0][0]-t[1][0],t=h*t[0][0]+n*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=r*s[0][0]+o*s[0][1],a=h*o-r*n;return m(a,0,i=i||0)||(e[0]=(o*t-n*s)/a,e[1]=(h*s-r*t)/a),e},h=function(t,s,i,e){var h,n=s[0]-t[0],s=s[1]-t[1],r=e[0]-i[0];return r*s-(e=e[1]-i[1])*n!=0&&(h=(r*(t[1]-i[1])+e*(i[0]-t[0]))/(e*n-r*s),0<=(t=(n*(i[1]-t[1])+s*(t[0]-i[0]))/(r*s-e*n)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},v=function(t,s,i){return 0<=o(t,s,i)},G=function(t,s,i){return o(t,s,i)<0},C=function(t,s,i){return o(t,s,i)<=0},n=function(t,s,i,e){var h,n,r;return e?(r=R,(n=O)[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1],h=n[0]*r[0]+n[1]*r[1],n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),Math.acos(h/(n*r))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},_=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},r=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(_(t,s-1),_(t,s),_(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},D=function(t,s){return G(_(t,s-1),_(t,s),_(t,s+1))},u=function(t,s,i){var e,h=k,n=P;if(v(_(t,s+1),_(t,s),_(t,i))&&C(_(t,s-1),_(t,s),_(t,i)))return!1;for(var r=I(_(t,s),_(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&v(_(t,s),_(t,i),_(t,o+1))&&C(_(t,s),_(t,i),_(t,o))&&(h[0]=_(t,s),h[1]=_(t,i),n[0]=_(t,o),n[1]=_(t,o+1),e=a(h,n),I(_(t,s),e)<r))return!1;return!0},A=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(_(t,s),_(t,i),_(t,e),_(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(r(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,n=0;n<t.length;++n)if(D(t,n))for(var r=0;r<t.length;++r)if(u(t,n,r)){for(var i=f(c(t,n,r,e)),o=f(c(t,r,n,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([_(t,n),_(t,r)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=d(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return e=t.indexOf((h=s)[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[c(t,e,n),c(t,n,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},N=function(t,s,i,e,h){var n=s[1]-t[1],s=t[0]-s[0],t=n*t[0]+s*t[1],r=e[1]-i[1],e=i[0]-e[0],i=r*i[0]+e*i[1],o=n*e-r*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(n*i-r*t)/o]},L=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(n<++r)console.warn("quickDecomp: max level ("+n+") reached.");else{for(var T=0;T<t.length;++T)if(D(w,T)){i.push(w[T]);for(var u=c=Number.MAX_VALUE,b=0;b<t.length;++b)x(_(w,T-1),_(w,T),_(w,b))&&C(_(w,T-1),_(w,T),_(w,b-1))&&(l=N(_(w,T-1),_(w,T),_(w,b),_(w,b-1)),G(_(w,T+1),_(w,T),l))&&(f=I(w[T],l))<c&&(c=f,a=l,m=b),x(_(w,T+1),_(w,T),_(w,b+1))&&C(_(w,T+1),_(w,T),_(w,b))&&(l=N(_(w,T+1),_(w,T),_(w,b),_(w,b+1)),x(_(w,T-1),_(w,T),l))&&(f=I(w[T],l))<u&&(u=f,o=l,p=b);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),T<p?(E(y,w,T,p+1),y.push(l),M.push(l),0!==m&&E(M,w,m,w.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,w.length),E(y,w,0,p+1),y.push(l),M.push(l),E(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)v(_(w,T-1),_(w,T),_(w,b))&&C(_(w,T+1),_(w,T),_(w,b))&&(f=I(_(w,T),_(w,b)))<d&&A(w,T,b)&&(d=f,g=b%t.length);T<g?(E(y,w,T,g+1),0!==g&&E(M,w,g,S.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,S.length),E(y,w,0,g+1),E(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,n,r),L(M,s,i,e,h,n,r)):(L(M,s,i,e,h,n,r),L(y,s,i,e,h,n,r)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)n(_(t,e-1),_(t,e),_(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,v,G,C,n,I,_,r,E,l,D,u,A,c,f,d,N,L,m,g,O=[],R=[],k=[],P=[],self.Ds={As:s,Ns:L,Ls:i,Os:e,Rs:p,ks:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,n=self.Ps=class{constructor(){throw TypeError("static class can't be instantiated")}static Fs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static js(){t=!0}static Bs(){return t}static zs(){s=!0}static Us(){return s}static Ws(t){i=t}static Qs(){return i}static Vs(){return"final"===i}};n.isDebug=!1,n.Js=!1,n.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ys={}}{const s=self.Ps;s.Hs=class{constructor(t){this.qs=t,this.Zs=new Map,this.Xs()}Xs(){let t=this.qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Ks(i)}Ks(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Zs.set(i,e)}else this.Zs.set(t,null)}$s(){for(const t of this.Zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}si(t){return this.Zs.has(t)}ei(t){const s=this.Zs.get(t);return void 0===s?null:s}hi(){history.replaceState("",document.title,location.pathname+location.search)}ni(t){this.qs=t,this.Zs.clear(),this.Xs()}},s.ri=new s.Hs(location.search),s.oi=new s.Hs(location.hash),s.ri.si("perf")&&(s.ai=!0),"dev"!==s.ri.ei("mode")&&s.Ws("final")}{let e=function(t){const s=parseFloat(t),i=z.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ps,B="(unknown)",z=(a.li={ci:B,fi:B,di:B,mi:B,gi:NaN,yi:B,Mi:"browser",wi:!0,Si:!1,Ti:!1,bi:!1,xi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,W=navigator.userAgentData;if(W&&0<W.brands.length){let s=function(t){let s="",i="",e="",h="";for(const n of t){const r=Q.get(n.brand),o=(!s&&r&&(s=r,i=n.version),V.get(n.brand));!e&&o&&(e=o,h=n.version)}s||"Chromium"!==e||(a.li.di="Chromium",a.li.mi=h),a.li.di=s||B,a.li.mi=i||B,a.li.yi=e||B};s,a.li.ci=W.platform,a.li.Si=W.mobile,a.li.wi=!a.li.Si;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),V=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(W.brands);let i=!1;a.li.xi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.li.ci?a.li.fi=e(t.platformVersion):a.li.fi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.li.ci="Windows";const s=t[1];a.li.fi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.li.ci="macOS",a.li.fi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.li.ci="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.li.ci="Linux"}),t(/android/i,()=>{a.li.ci="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.li.ci="Android",a.li.fi=t[1]}),a.li.ci===B&&(t(/(iphone|ipod|ipad)/i,t=>{a.li.ci="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.li.ci="iOS",a.li.fi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(U),Y=/chromium\//i.test(U),H=/edg\//i.test(U),q=/OPR\//.test(U),Z=/nwjs/i.test(U),X=/safari\//i.test(U),K=/webkit/i.test(U),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.li.di="Chrome",a.li.mi=t[1],a.li.yi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.li.di="Edge",a.li.mi=t[1],a.li.yi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.li.di="Opera",a.li.mi=t[1],a.li.yi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.li.di="Chromium",a.li.mi=t[1],a.li.yi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.li.di="NW.js",a.li.mi=t[1],a.li.yi="Chromium",a.li.Mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.li.di="Firefox",a.li.mi=t[1],a.li.yi="Gecko"}),!X||J||Y||H||q||Z||(a.li.di="Safari",a.li.yi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.li.mi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.li.di="Chrome for iOS",a.li.mi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.li.di="Firefox for iOS",a.li.mi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.li.di="Edge for iOS",a.li.mi=t[1]})),a.li.yi===B&&K&&(a.li.yi="WebKit"),"Android"===a.li.ci&&"Safari"===a.li.di&&(a.li.di="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.li.ci)||"nwjs"===a.li.Mi;a.li.wi=tt,a.li.Si=!tt}"Chrome"===a.li.di&&"browser"===a.li.Mi&&/wv\)/.test(U)&&(a.li.Mi="webview"),"nwjs"!==a.li.Mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.li.Mi="webapp"),a.li.gi=parseFloat(a.li.mi);const i="macOS"===a.li.ci&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.li.ci="iOS",a.li.fi=a.li.mi,a.li.wi=!1,a.li.Si=!0,a.li.bi=!0),a.li.Ti="macOS"===a.li.ci||"iOS"===a.li.ci}{let r=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return F(t,s)},s=function(t,s){return F(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),r(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},n=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};r,o,t,s,a,e,n;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,nt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function F(s,i,e=!1,h=!0){const t=await a(s);try{const n=t.transaction([it],e?"readwrite":"readonly");return i(n)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),F(s,i,e,!1);throw t}}class rt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,n){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(n,h),i=r(s),e=o(t);await Promise.all([e,i])})}get(n){return e(n),t(this.name,async t=>{const s=t.objectStore(it).get(n),i=r(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=r(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=r(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(nt){const h=t.objectStore(it).getAllKeys();s=r(h)}else s=n(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=r(h)}else s=n(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=n(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.vi=rt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.vi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Gi=t,this.Ci=!this.Gi,this.Ci||"undefined"!=typeof indexedDB||(this.Ci=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ii=new Map}_i(t){if(!this.Ci)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ci=!0;break}}async Ei(t){const s=this.Ii.get(t),i=await h(s);return void 0===i?null:i}async Di(t,s){s=await h(s),this.Ii.set(t,s)}Ai(t){this.Ii.delete(t)}Ni(){this.Ii.clear()}Li(){return Array.from(this.Ii.keys())}Oi(){return this.Ci}Ri(){return this.Ii}ki(t){this.Ii=t}async getItem(s,t){if(e(t),this.Ci)return this.Ei(s);let i;try{i=await this.Gi.get(s)}catch(t){return this._i(t),this.Ci?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ci)await this.Di(s,i);else try{await this.Gi.set(s,i)}catch(t){if(this._i(t),!this.Ci)throw t;await this.Di(s,i)}}async removeItem(s,t){if(e(t),this.Ci)this.Ai(s);else try{await this.Gi.delete(s)}catch(t){this._i(t),this.Ci?this.Ai(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ci)this.Ni();else try{await this.Gi.clear()}catch(t){this._i(t),this.Ci?this.Ni():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ci)return this.Li();let s=[];try{s=await this.Gi.keys()}catch(t){if(this._i(t),this.Ci)return this.Li();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ci?Promise.resolve(!0):this.Gi.ready()}Pi(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Fi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}ji(t){i("localforage.defineDriver()")}Bi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ps;if(e.Ui={},e.Ui.Wi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ui.Qi="undefined"!=typeof HTMLDialogElement,e.Ui.Vi=!!self.requestIdleCallback,e.Ui.ImageBitmap=!!self.createImageBitmap,e.Ui.ImageBitmapOptions=!1,e.Ui.Ji=!1,e.Ui.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ui.ImageBitmapOptions=!0}).catch(()=>{e.Ui.ImageBitmapOptions=!1})}catch(t){e.Ui.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ui.Ji=10===t.width&&10===t.height}).catch(()=>{e.Ui.Ji=!1})}catch(t){e.Ui.Ji=!1}}if(e.Ui.Yi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ui.Hi=!(!navigator.permissions||!navigator.permissions.query),e.Ui.Zi=!1,e.Ui.Hi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ui.Zi=!0}).catch(()=>{e.Ui.Zi=!1})}e.Ui.Xi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ui.Ki="undefined"!=typeof Proxy,e.Ui.$i=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ui.te="function"==typeof fetch,e.Ui.ie=!!(self.isSecureContext&&"Opera"!==e.li.di&&navigator.storage&&navigator.storage.persist),e.Ui.he=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ui.ne=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.li.ci)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ui.ImageDecoder=void 0!==self.ImageDecoder,e.Ui.re=!!self.VideoEncoder,e.Ui.oe=!!self.showOpenFilePicker,e.Ui.ae=!!self.queryLocalFonts,e.Ui.UserActivation=!!navigator.userActivation,e.Ui.le=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ui.le=i&&"image/webp"===i.type}catch(t){e.Ui.le=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ps;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ue(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.fe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ps;self.assert=function(t,s){t||i(s)}}{const h=self.Ps,mt=self.Ys,gt=(h.de=function(t){return"number"==typeof t},h.pe=function(t){return h.de(t)&&isFinite(t)},h.me=function(t){if(!h.de(t))throw new TypeError("expected number")},h.ge=function(t){h.ye(t)},h.Me=function(t,s,i){if(!h.de(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.we=function(...s){for(let t of s);},h.Se=function(t){if(!h.pe(t))throw new TypeError("expected finite number")},h.Te=function(t){h.ye(t)},h.xe=function(...s){for(let t of s);},h.ve=function(t){return"string"==typeof t},h.Ge=function(t){if(!h.ve(t))throw new TypeError("expected string")},h.Ce=function(t){h.ye(t)},h.Ie=function(...s){for(let t of s);},h._e=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ee=function(t){if(!h._e(t))throw new TypeError("expected simple object")},h.De=function(t){if(!h.ye(t)&&!h._e(t))throw new TypeError("expected simple object")},h.Ae=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ne=function(t){if(!h.Ae(t))throw new TypeError("expected object")},h.Le=function(t){h.ye(t)},h.Oe=function(...s){for(let t of s);},h.Re=function(t){return h.ke(t,Blob)&&"string"==typeof t.name},h.Pe=function(t){if(!h.Re(t))throw new TypeError("expected file")},h.Fe=function(t){h.ye(t)},h.je=function(t){return Array.isArray(t)},h.Be=function(t){if(!h.je(t))throw new TypeError("expected array")},h.Ue=function(t){h.ye(t)},h.We=function(...s){for(let t of s);},h.Qe=function(t){return!(!h.je(t)||t.length&&!h.je(t[0]))},h.Ve=function(s){if(!h.Qe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.je(t))throw new TypeError("expected 2d array")},h.Je=function(t){h.ye(t)},h.Ye=function(t){return"function"==typeof t},h.He=function(t,s){if(!h.Ye(t))throw new TypeError("expected function");if(!h.ye(s)&&t!==s)throw new TypeError("expected same function reference")},h.qe=function(t){h.ye(t)},h.Ze=function(...s){for(let t of s);},h.Xe=function(s,...i){if(!h.Ye(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.ye(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Ke=function(...s){if(!h.ye(s))for(let t of s);},h.$e=function(t,s){return t instanceof s},h.th=function(s,...i){for(let t of i)if(h.$e(s,t))return!0;return!1},h.ih=function(t,s){if(!h.$e(t,s))throw new TypeError("unexpected type")},h.eh=function(t,s){h.ye(t)},h.hh=function(t,...s){for(let t of s);},h.nh=function(t,...s){if(!h.th(t,...s))throw new TypeError("unexpected type")},h.rh=function(t,...s){if(!h.ye(t)&&!h.th(t,...s))throw new TypeError("unexpected type")},h.oh=function(s,i){for(let t of s)if(!h.$e(t,i))return!1;return!0},h.ah=function(s){for(let t of s)if(!h.pe(t))return!1;return!0},h.lh=function(s,t){for(let t of s);},h.uh=function(s,t){if(!h.ye(s))for(let t of s);},h.fh=function(s,t){if(!h.ye(s))for(let t of s);},h.dh=function(s){for(let t of s);},h.ph=function(s){if(!h.ye(s))for(let t of s);},h.mh=function(t,s){return!(h.ye(t)||!h.ve(t.nodeName))&&(!s||h.gh(t.nodeName,s))},h.yh=function(t,s){if(h.ye(t)||!h.ve(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Mh=function(t,s){h.ye(t)},h.wh=function(t,s){return!(h.ye(t)||!h.ve(t.tagName))&&(!s||h.gh(t.tagName,s))},h.Sh=function(t,s){if(h.ye(t)||!h.ve(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Th=function(t,s){h.ye(t)},h.bh=function(t){return h.wh(t,"img")||h.wh(t,"canvas")||h.wh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.xh=function(t){if(!h.bh(t))throw new TypeError("expected drawable")},h.Gh=function(t){h.ye(t)},h.Ch=function(t){return t instanceof ImageData||h.bh(t)},h.Ih=function(t){if(!h.Ch(t))throw new TypeError("expected drawable or image data")},h._h=function(t){if(!h.ye(t)&&!h.Ch(t))throw new TypeError("expected drawable or image data")},h.Eh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Dh},h.Ah=function(t){if(!h.Eh(t))throw new TypeError("expected string-like")},h.Nh=function(t){h.ye(t)},h.Lh=function(...s){for(let t of s);},h.Oh=function(){throw new Error("must be overridden")},h.Rh=function(){throw new Error("not yet implemented")},h.kh=function(t){return t.constructor===function*(){}.constructor},h.Ph=function(t){if(!h.kh(t))throw new Error("expected generator function")},h.Fh=function(t){return"function"===t[Symbol.iterator]},h.jh=function(t){if(!h.Fh(t))throw new Error("expected iterable")},h.Bh=function(t){return!h.ye(t)},h.ye=function(t){return null==t},h.zh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Uh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Wh=function(t){return h.$e(t,gt)},h.Qh=function(t){},h.Vh=function(t){h.Jh(t,gt)},h.Yh=function(t,...s){if(!h.Hh(t,...s))throw new TypeError("unexpected type")},h.Hh=function(t,...s){for(const i of s)if(h.ke(t,i))return!0;return!1},h.Jh=function(t,s){if(!h.ke(t,s))throw new TypeError("unexpected type")},h.ke=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.me=h.me,mt.ge=h.ge,mt.Se=h.Se,mt.Te=h.Te,mt.Ge=h.Ge,mt.Ce=h.Ce,mt.Ne=h.Ne,mt.Le=h.Le,mt.Be=h.Be,mt.Ue=h.Ue,mt.He=h.He,mt.qe=h.qe,mt.ih=h.ih,mt.eh=h.eh,mt.ye=h.ye}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.fe())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.qh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},n=function(s){let i=new Set;for(let t in s)i.add(t);return i},r=function(t,s){let i=n(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Zh(s,[...i]),s.length&&console.warn(`[Defence] '${p.qh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,n,r;const p=self.Ps,yt=new Map;p.Xh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Kh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.$h=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,tn:0,sn:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.tn.toPrecision(3)} :: calls => `+this.sn}})},p.hn=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.tn=i.total/i.sn,console.log(i.toString()),i.sn++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.fe=function(){return(new Error).stack},p.nn=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.qh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.de(t)?"<number>":p.ve(t)?"<string>":p.je(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ye(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.rn={};const Mt=new Set(["then","splice"]);p.rn.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.qh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.rn.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.qh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.qh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.qh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.rn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.qh(t)}'`)},p.rn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.qh(t)}'`)},p.rn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.qh(t)}'`)};let f=-1,d=(p.an=class{constructor(){if(p.Js&&p.Ui.Ki){let t=Object.create(new.target.prototype),s=new Proxy(t,p.rn);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.ln=function(s){if(p.Js&&p.Ui.Ki&&s instanceof p.an){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.un=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Js&&r(t,i),p.ln(i)},p.cn=function(t){let s=u.get(t);s&&c.set(s,p.fe())},p.dn=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.pn=class{constructor(t){this.mn="",t&&this.start(t)}start(t){p.ai&&(this.mn=t,performance.mark(this.mn+"-Start"))}end(){p.ai&&(performance.mark(this.mn+"-End"),performance.measure(this.mn,this.mn+"-Start",this.mn+"-End"))}next(t){p.ai&&(this.end(),this.mn=t,performance.mark(this.mn+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ps,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.gn=function(t,s,i,e,h){const n=i-s;if(0==n&&0===e)return t;const r=h-e;return(t-s)*r/n+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.yn=function(t,s,i){return t<s?s:i<t?i:t},y.Mn=function(t){return(t%=wt)<0&&(t+=wt),t},y.wn=function(t){return t*St},y.Sn=function(t){return t*Tt},y.Tn=function(t,s){return Math.sqrt(t*t+s*s)},y.bn=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.xn=function(t,s,i,e){return y.Tn(i-t,e-s)},y.vn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},y.Gn=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Cn=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s),r=i*h+e*n;return 1<=r?0:r<=-1?Math.PI:Math.acos(r)},y.In=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?0<h*n-e*r?y.Mn(t+i):y.Mn(t-i):y.Mn(s)},y._n=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),n=Math.cos(s);return e*h-i*n<=0},y.En=function(t,s,i,e=0){let h=y.Cn(t,s),n=wt*e;return y._n(s,t)?y.Mn(t+(h+n)*i):y.Mn(t-(h+n)*i)},y.Dn=function(t,s,i,e=0){const h=y.Cn(t,s),n=wt*e;return y._n(s,t)?y.Mn(t+(h+n)*i):y.Mn(t+(wt-h+n)*i)},y.An=function(t,s,i,e=0){const h=y.Cn(t,s),n=wt*e;return y._n(s,t)?y.Mn(t-(-wt+h-n)*i):y.Mn(t-(h+n)*i)},y.Nn=function(t,s){const i=y.Cn(t,s);return y._n(t,s)?y.Mn(s-i):y.Mn(s+i)},y.kt=function(t,s,i){return t+i*(s-t)},y.Ln=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.On=function(t,s,i,e,h){return y.kt(e,h,y.Ln(t,s,i))},y.Rn=function(t,s,i,e){return y.kt(y.kt(t,s,e),y.kt(s,i,e),e)},y.kn=function(t,s,i,e,h){return y.kt(y.Rn(t,s,i,h),y.Rn(s,i,e,h),h)},y.Pn=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Fn=function(t){return 0<t&&0==(t-1&t)},y.jn=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Bn=function(t,s){return Math.round(t*s)/s},y.zn=function(t,s){return Math.floor(t*s)/s},y.Un=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Wn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Qn=function(t,s,i){return y.yn(t,0,255)|y.yn(s,0,255)<<8|y.yn(i,0,255)<<16},1024),xt=16384,vt=8191,Gt=(y.Vn=function(t,s,i,e){return t=y.yn(Math.floor(1024*t),-8192,vt),s=y.yn(Math.floor(1024*s),-8192,vt),i=y.yn(Math.floor(1024*i),-8192,vt),e=y.yn(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*bt+s*xt*bt+i*bt+e)},y.Jn=function(t,s,i){return y.Vn(t,s,i,1)},y.Yn=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*bt));return t>vt&&(t-=xt),t/1024}},y.Hn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*bt)/(xt*bt));return t>vt&&(t-=xt),t/1024}},y.qn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*bt)/bt);return t>vt&&(t-=xt),t/1024}},y.Zn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.Xn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Kn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Gt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Xn(i,e);return[i/t,e/t]},y.$n=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,r),c=Math.max(h,r);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||m<f)return!1;const g=h-t+r-i,y=n-s+o-e,M=i-t,w=e-s,S=r-h,T=o-n,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.tr=function(t,s,i,e,h,n,r,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<r)return!1;const g=a-t+u-i,y=l-s+c-e,M=i-t,w=e-s,S=u-a,T=c-l,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.ir=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.er(),u=h.hr(),c=h.nr(),f=h.rr(),d=h.lr(),p=h.ur(),m=h.cr(),g=h.dr();return y.tr(t,s,i,e,n,r,o,a,l,u,c,f)||y.tr(t,s,i,e,n,r,o,a,c,f,d,p)||y.tr(t,s,i,e,n,r,o,a,d,p,m,g)||y.tr(t,s,i,e,n,r,o,a,m,g,l,u)},y.pr=function(s,i,e,h,n){let r=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=n.length-4;u<=t;u+=2)if(y.tr(s,i,e,h,r,o,a,l,n[u],n[u+1],n[u+2],n[u+3]))return!0;return y.tr(s,i,e,h,r,o,a,l,n[u],n[u+1],n[0],n[1])};y.mr=function(t,s,i,e,h,n,r,o){const a=i-t,l=e-s,u=r-h,c=o-n,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(r-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(r-t)+(h-r)*(o-s))/f:2},y.Mr=function(t,s,i,e,h,n,r,o,a){const l=(r-h)*a,u=(o-n)*a;return y.mr(t,s,i,e,h-l,n-u,r+l,o+u)},y.Sr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,M=u*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.Tr=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,M=f*u+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.br=function(t,s,i,e,h,n,r,o,a,l,u,c){return[t*e+s*r+i*l,t*h+s*o+i*u,t*n+s*a+i*c]}}{let l=self.Ps,s=null,i="";if("undefined"!=typeof document){const Ct=(s=document).querySelector("base");(i=Ct&&Ct.hasAttribute("href")?Ct.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.vr=function(){return i},l.Gr=function(){if(!s)return"";const t=s.location;return l.Cr(t.origin+t.pathname)+i},l.Cr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Ir=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l._r=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.Er=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Dr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Ar=function(t){return t.replace(/\\/g,"/")},l.Nr=function(t,s){const i=t?l._r(t).slice(1):"";return s===i},l.Lr=function(t,s){let i,e;return l.Re(t)&&(i=l.Dr(t.name)),l.ve(t)&&(i=l.Dr(t)),l.Re(s)&&(e=l.Dr(s.name)),l.ve(s)&&(e=l.Dr(s)),i===e},l.Or=function(t){t=l.Ar(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,n,r="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(n=h).lastIndexOf("."),a=(0<o&&(r=h.slice(o),n=h.slice(0,-r.length)),s+e+h);return{dir:e,Rr:h,name:n,root:s,ext:r,kr:a}},l.Pr=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Fr=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.jr=function(){},l.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Br=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.zr=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Ur=function(t,s){t.length=s},l.Wr=function(t){t&&0!==t.length&&l.Ur(t,0)},l.Qr=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Ur(t,0)}l.Ur(i,0)}},l.Vr=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Jr=function(t,s,i){const e=t.length;(s|=0)<e?l.Ur(t,s):e<s&&l.Vr(t,s,i)},l.Yr=function(t,s){l.Wr(t),l.Zh(t,s)},l.Zh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Hr=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Ur(i,s)}},l.qr=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Zr=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Xr=function(i,e){let h=[],n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[n]=t,++n)}return l.Ur(i,n),h},l.Kr=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Ur(i,h),t-h},l.$r=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.eo=function(t,s){if(!l.$r(t,s))throw new RangeError("array index out of bounds")},l.ho=function(t){return t.slice()},l.no=function(t,i){let e=[];for(let s of t)if(l.Ae(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.je(s)?e.push(l.no(s,i)):e.push(s);return e},l.ro=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.ao=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.lo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.uo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.co=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.fo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.do=function(o,a){return o.length?new Promise((i,e)=>{let h=[],n=0,r=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{r||(h[s]=t,++n===o.length?i(h):a(n,o.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.po=function(t){e.push(t)},l.mo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),n=new Map,r=new MessageChannel,o=(r.port2.onmessage=function(t){const s=t.data,i=n.get(s);n.delete(s),i&&i(performance.now())},l.yo=function(t){const s=h++;return n.set(s,t),r.port1.postMessage(s),s},l.Mo=function(t){n.delete(t)},l.wo=l.yo,l.So=function(){return new Promise(t=>l.wo(t))},new Set);l.To=function(s){const i=self.requestAnimationFrame(async t=>{await l.So(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.bo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const n=self.Ps;n.xo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},n.vo=function(t){return!n.xo(t)},n.Go=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},n.Co=function(t,s){return fetch(t,s).then(t=>(n.Go(t),t))},n.Io=function(t){return n.Co(t).then(t=>t.text())},n._o=function(t){return n.Co(t).then(t=>t.json())},n.Eo=function(t){return n.Co(t).then(t=>t.blob())},n.Do=function(t){return n.Co(t).then(t=>t.arrayBuffer())},n.Ao=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},n.No=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},n.Lo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},n.Oo=function(t){return n.Lo(t).then(t=>JSON.parse(t))},n.Ro=async function(t,s){let i=URL.createObjectURL(t);try{const e=await n.Ao(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},n.ko=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},n.Po=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=n.yn(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},n.Fo=function(t,s,i){const e=n.ko(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),n.Po(e,s,i)},n.jo=function(t,s,i){if(n.Ui.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>n.Fo(t,s,i));if(n.Ui.ImageBitmap)return createImageBitmap(t).then(t=>n.Fo(t,s,i));{const e=n.ko(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),n.Po(e,s,i)}},n.Bo=function(t,s){t.clear();for(const i of s)t.add(i)},n.zo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},n.Uo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},n.Wo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},n.Qo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},n.Vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},n.Jo=function(t){return"object"==typeof t&&"function"==typeof t.next},n.Yo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ps,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,_t=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Ho=class{constructor(t,s,i,e){this.qo=NaN,this.Zo=NaN,this.Xo=NaN,this.Ko=NaN,this.qo=0,this.Zo=0,this.Xo=0,this.Ko=0,t instanceof u.Ho?this.set(t):this.$o(t||0,s||0,i||0,e||0)}ta(t,s,i){return this.qo=+t,this.Zo=+s,this.Xo=+i,this.yn(),this}$o(t,s,i,e){return this.qo=+t,this.Zo=+s,this.Xo=+i,this.Ko=+e,this.yn(),this}set(t){return this.qo=t.qo,this.Zo=t.Zo,this.Xo=t.Xo,this.Ko=t.Ko,this}I(t){return this.set(t)}add(t){this.qo+=t.qo,this.Zo+=t.Zo,this.Xo+=t.Xo,this.Ko+=t.Ko,this.yn()}ia(t,s,i,e=0){this.qo+=+t,this.Zo+=+s,this.Xo+=+i,this.Ko+=+e,this.yn()}ea(t){this.na(Math.max(this.qo,t.qo)-Math.min(this.qo,t.qo)),this.ra(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.oa(Math.max(this.Xo,t.Xo)-Math.min(this.Xo,t.Xo)),this.aa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.yn()}la(t){this.qo=t.qo,this.Zo=t.Zo,this.Xo=t.Xo}na(t){this.qo=u.yn(+t,0,1)}ua(){return this.qo}ra(t){this.Zo=u.yn(+t,0,1)}ca(){return this.Zo}oa(t){this.Xo=u.yn(+t,0,1)}fa(){return this.Xo}aa(t){this.Ko=u.yn(+t,0,1)}da(){return this.Ko}clone(){return u.un(u.Ho,this.qo,this.Zo,this.Xo,this.Ko)}toArray(){return[this.qo,this.Zo,this.Xo,this.Ko]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.qo,t[s++]=this.Zo,t[s++]=this.Xo,t[s]=this.Ko}ga(t,s){t[s++]=this.qo,t[s++]=this.Zo,t[s]=this.Xo}equals(t){return this.qo===t.qo&&this.Zo===t.Zo&&this.Xo===t.Xo&&this.Ko===t.Ko}ya(t){return this.qo===t.qo&&this.Zo===t.Zo&&this.Xo===t.Xo}Ma(t,s,i){return this.qo===t&&this.Zo===s&&this.Xo===i}wa(t,s,i,e){return this.qo===t&&this.Zo===s&&this.Xo===i&&this.Ko===e}Sa(t,s){return t[s]===Math.fround(this.qo)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Xo)&&t[s+3]===Math.fround(this.Ko)}Ta(t,s){return t[s]===Math.fround(this.qo)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Xo)}multiply(t){this.qo*=t.qo,this.Zo*=t.Zo,this.Xo*=t.Xo,this.Ko*=t.Ko}ba(t){this.qo*=t,this.Zo*=t,this.Xo*=t,this.Ko*=t}xa(){return this.qo*=this.Ko,this.Zo*=this.Ko,this.Xo*=this.Ko,this}Ga(){return this.qo/=this.Ko,this.Zo/=this.Ko,this.Xo/=this.Ko,this}yn(){return this.qo=u.yn(this.qo,0,1),this.Zo=u.yn(this.Zo,0,1),this.Xo=u.yn(this.Xo,0,1),this.Ko=u.yn(this.Ko,0,1),this}Ca(t){this.qo=u.Yn(t),this.Zo=u.Hn(t),this.Xo=u.qn(t),this.Ko=u.Zn(t)}Ia(t,s,i){const e=u.pe(t)?t:this.ua(),h=u.pe(s)?s:this.ca(),n=u.pe(i)?i:this.fa();return`rgb(${100*e}%, ${100*h}%, ${100*n}%)`}_a(t,s,i,e){const h=u.pe(t)?t:this.ua(),n=u.pe(s)?s:this.ca(),r=u.pe(i)?i:this.fa(),o=u.pe(e)?e:this.da();return`rgba(${100*h}%, ${100*n}%, ${100*r}%, ${o})`}Ea(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Da(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.na(s),isFinite(i)&&this.ra(i),isFinite(e)&&this.oa(e),this.aa(1),!0}Aa(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return t+`, ${s}, `+i}Na(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),i=Math.round(255*this.fa());return[t,s,i]}La(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.na(i),isFinite(e)&&this.ra(e),isFinite(h)&&this.oa(h),this.aa(1),!0}Oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.na(i),isFinite(e)&&this.ra(e),isFinite(h)&&this.oa(h),this.aa(1),!0}Ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.na(i),isFinite(e)&&this.ra(e),isFinite(h)&&this.oa(h),isFinite(n)&&this.aa(n),!0}ka(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.na(i),isFinite(e)&&this.ra(e),isFinite(h)&&this.oa(h),isFinite(n)&&this.aa(n),!0}Pa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Oa(t):this.La(t);if(t.startsWith("rgba("))return t.includes("%")?this.ka(t):this.Ra(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Fa(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Oa(t):4===s.length&&this.ka(t):3===s.length?this.La(t):4===s.length&&this.Ra(t)}}return this.Da(t)}toJSON(){return[this.qo,this.Zo,this.Xo,this.Ko]}ja(t,s,i,e){let h,n,r;if(t%=360,s=u.yn(s,0,100),i=u.yn(i,0,100),e=u.yn(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),n=l(a,o,t),r=l(a,o,t-1/3)}return this.na(h),this.ra(n),this.oa(r),this.aa(e),this}Fa(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=_t.exec(s);return i&&4===i.length?(this.ja(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.ja(+i[1],+i[2],+i[3],+i[4]),0))}Ba(){const t=this.qo,s=this.Zo,i=this.Xo,e=this.Ko,h=u.Ho.za(t,s,i),n=u.Ho.Ua(t,s,i),r=u.Ho.Wa(t,s,i);return`hsla(${h}, ${n}%, ${r}%, ${e})`}Qa(){const t=this.qo,s=this.Zo,i=this.Xo;return[u.Ho.za(t,s,i),u.Ho.Ua(t,s,i),u.Ho.Wa(t,s,i),this.Ko]}Va(t){!Array.isArray(t)||t.length<3||(this.qo=t[0],this.Zo=t[1],this.Xo=t[2],this.Ko=4<=t.length?t[3]:1)}set r(t){this.na(t)}get r(){return this.ua()}set g(t){this.ra(t)}get g(){return this.ca()}set b(t){this.oa(t)}get b(){return this.fa()}set a(t){this.aa(t)}get a(){return this.da()}Ja(t,s){switch(t){case 0:this.na(s);break;case 1:this.ra(s);break;case 2:this.oa(s);break;case 3:this.aa(s);break;default:throw new RangeError("invalid color index")}}Ya(t){switch(t){case 0:return this.ua();case 1:return this.ca();case 2:return this.fa();case 3:return this.da();default:throw new RangeError("invalid color index")}}static Ha(t,s){let i,e;if(Array.isArray(t))(i=new u.Ho).Va(t);else{if(!(t instanceof u.Ho))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Ho).Va(s);else{if(!(s instanceof u.Ho))throw new Error("unexpected type");e=s}return i.equals(e)}static qa(t,s){return u.yn(Math.max(t,s)-Math.min(t,s),0,1)}static Za(t,s){const i=new u.Ho;return i.na(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i.ra(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i}static Xa(t,s){const i=new u.Ho(0,0,0,1);return i.na(Math.max(t.qo,s.qo)-Math.min(t.qo,s.qo)),i.ra(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i}static za(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static Ua(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=(e+h)/2,r=e-h,o=.5<n?r/(2-e-h):r/(e+h);return Math.round(100*o)}static Wa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),n=(e+h)/2;return e?Math.round(100*n):0}},u.Ho.Ka=Object.freeze(u.un(u.Ho,1,1,1,1)),u.Ho.$a=Object.freeze(u.un(u.Ho,0,0,0,1)),u.Ho.tl=Object.freeze(u.un(u.Ho,0,0,0,0))}{const Et=self.Ps;Et.sl=class{constructor(t,s){this.il=0,this.el=0,t instanceof Et.sl?this.I(t):this.set(t||0,s||0)}set(t,s){this.il=+t,this.el=+s}I(t){this.il=t.il,this.el=t.el}equals(t){return this.il===t.il&&this.el===t.el}hl(t,s){return this.il===t&&this.el===s}Sa(t,s){return t[s]===Math.fround(this.il)&&t[s+1]===Math.fround(this.el)}nl(t){this.il=+t}rl(){return this.il}ol(t){this.el=+t}al(){return this.el}toArray(){return[this.il,this.el]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.il,t[s]=this.el}offset(t,s){this.il+=+t,this.el+=+s}scale(t,s){this.il*=t,this.el*=s}_t(t,s){this.il/=t,this.el/=s}round(){this.il=Math.round(this.il),this.el=Math.round(this.el)}floor(){this.il=Math.floor(this.il),this.el=Math.floor(this.el)}ceil(){this.il=Math.ceil(this.il),this.el=Math.ceil(this.el)}angle(){return Et.Gn(0,0,this.il,this.el)}ll(){return this.il*this.il+this.el*this.el}length(){return Et.Tn(this.il,this.el)}ul(t,s){const i=this.il*s-this.el*t;this.el=this.el*s+this.il*t,this.il=i}rotate(t){0!==t&&this.ul(Math.sin(t),Math.cos(t))}cl(t,s,i){0===t||s===this.il&&i===this.el||(this.il-=s,this.el-=i,this.ul(Math.sin(t),Math.cos(t)),this.il+=+s,this.el+=+i)}move(t,s){0!==s&&(this.il+=Math.cos(t)*s,this.el+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.il/=t,this.el/=t)}yn(t,s){this.il=Et.yn(this.il,t,s),this.el=Et.yn(this.el,t,s)}Ot(t){return this.il*t.il+this.el*t.el}reverse(){this.il=-this.il,this.el=-this.el}fl(){let t=this.il;return this.il=this.el,this.el=-t,this}}}{const Dt=self.Ps;Dt.Rect=class{constructor(t,s,i,e){this.dl=NaN,this.pl=NaN,this.gl=NaN,this.yl=NaN,this.dl=0,this.pl=0,this.gl=0,this.yl=0,t instanceof Dt.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.dl=+t,this.pl=+s,this.gl=+i,this.yl=+e}Ml(t,s,i,e){s=+s,this.dl=t=+t,this.pl=s,this.gl=t+ +i,this.yl=s+ +e}I(t){this.dl=+t.dl,this.pl=+t.pl,this.gl=+t.gl,this.yl=+t.yl}clone(){return new Dt.Rect(this.dl,this.pl,this.gl,this.yl)}static wl(t,s){const i=new Dt.Rect;return i.Sl(Math.min(t.dl,s.dl)),i.Tl(Math.min(t.pl,s.pl)),i.bl(Math.max(t.gl,s.gl)),i.xl(Math.max(t.yl,s.yl)),i}static vl(t){return new Dt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.dl===t.dl&&this.pl===t.pl&&this.gl===t.gl&&this.yl===t.yl}Gl(t,s,i,e){return this.dl===t&&this.pl===s&&this.width()===i&&this.height()===e}Sa(t,s){return t[s]===Math.fround(this.dl)&&t[s+1]===Math.fround(this.pl)&&t[s+2]===Math.fround(this.gl)&&t[s+3]===Math.fround(this.yl)}Sl(t){this.dl=+t}Cl(){return this.dl}Tl(t){this.pl=+t}Il(){return this.pl}bl(t){this.gl=+t}_l(){return this.gl}xl(t){this.yl=+t}El(){return this.yl}toArray(){return[this.dl,this.pl,this.gl,this.yl]}pa(){return new Float64Array(this.toArray())}Dl(){return new DOMRect(this.dl,this.pl,this.width(),this.height())}static Al(t){return Dt.un(Dt.Rect,t.left,t.top,t.right,t.bottom)}ma(t,s){t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.gl,t[s]=this.yl}Nl(t,s){t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.gl,t[s++]=this.pl,t[s++]=this.gl,t[s++]=this.yl,t[s++]=this.dl,t[s]=this.yl}Ll(t,s,i){t[s++]=this.dl,t[s++]=this.pl,t[s++]=i,t[s++]=this.gl,t[s++]=this.pl,t[s++]=i,t[s++]=this.gl,t[s++]=this.yl,t[s++]=i,t[s++]=this.dl,t[s++]=this.yl,t[s]=i}width(){return this.gl-this.dl}height(){return this.yl-this.pl}Ol(){return(this.dl+this.gl)/2}Rl(){return(this.pl+this.yl)/2}offset(t,s){s=+s,this.dl+=t=+t,this.pl+=s,this.gl+=t,this.yl+=s}offsetLeft(t){this.dl+=+t}offsetTop(t){this.pl+=+t}kl(t){this.gl+=+t}Pl(t){this.yl+=+t}Fl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.pl<this.yl?this.dl<this.gl?this.yl=this.pl+this.width():this.yl=this.pl-this.width():this.dl<this.gl?this.yl=this.pl-this.width():this.yl=this.pl+this.width()}jl(t,s){s=+s,this.dl-=t=+t,this.pl-=s,this.gl+=t,this.yl+=s}Bl(t,s){s=+s,this.dl+=t=+t,this.pl+=s,this.gl-=t,this.yl-=s}multiply(t,s){this.dl*=t,this.pl*=s,this.gl*=t,this.yl*=s}_t(t,s){this.dl/=t,this.pl/=s,this.gl/=t,this.yl/=s}zl(t){this.dl=+t-this.dl,this.gl=+t-this.gl}Ul(t){this.pl=+t-this.pl,this.yl=+t-this.yl}Wl(t,s){const i=this.width(),e=this.height(),h=this.Cl()+i*t,n=this.Il()+e*s;this.Ml(h-e*s,n-i*t,e,i)}Ql(){const t=this.dl;this.dl=this.gl,this.gl=t}Vl(){const t=this.pl;this.pl=this.yl,this.yl=t}Jl(t){const s=this.pl;this.pl=+t-this.yl,this.yl=+t-s}round(){this.dl=Math.round(this.dl),this.pl=Math.round(this.pl),this.gl=Math.round(this.gl),this.yl=Math.round(this.yl)}Yl(){this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl),this.gl=Math.floor(this.gl),this.yl=Math.floor(this.yl)}Hl(){this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl),this.gl=Math.ceil(this.gl),this.yl=Math.ceil(this.yl)}floor(){this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl),this.gl=Math.floor(this.gl),this.yl=Math.floor(this.yl)}ceil(){this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl),this.gl=Math.ceil(this.gl),this.yl=Math.ceil(this.yl)}yn(t,s,i,e){this.dl=Math.max(this.dl,+t),this.pl=Math.max(this.pl,+s),this.gl=Math.min(this.gl,+i),this.yl=Math.min(this.yl,+e)}ql(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.dl=Dt.yn(this.dl,t,i),this.pl=Dt.yn(this.pl,s,e),this.gl=Dt.yn(this.gl,t,i),this.yl=Dt.yn(this.yl,s,e)}normalize(){this.dl>this.gl&&this.Ql(),this.pl>this.yl&&this.Vl()}Zl(t){return!(t.gl<this.dl||t.yl<this.pl||t.dl>this.gl||t.pl>this.yl)}Xl(t,s,i){return!(t.gl+s<this.dl||t.yl+i<this.pl||t.dl+s>this.gl||t.pl+i>this.yl)}Kl(t,s){return t>=this.dl&&t<=this.gl&&s>=this.pl&&s<=this.yl}$l(t){return t.dl>=this.dl&&t.pl>=this.pl&&t.gl<=this.gl&&t.yl<=this.yl}tu(t){t.dl<this.dl&&(this.dl=+t.dl),t.pl<this.pl&&(this.pl=+t.pl),t.gl>this.gl&&(this.gl=+t.gl),t.yl>this.yl&&(this.yl=+t.yl)}su(t){this.dl=Dt.kt(t.dl,t.gl,this.dl),this.pl=Dt.kt(t.pl,t.yl,this.pl),this.gl=Dt.kt(t.dl,t.gl,this.gl),this.yl=Dt.kt(t.pl,t.yl,this.yl)}}}{const At=self.Ps;At.iu=class{constructor(t,s,i,e,h,n,r,o){this.eu=NaN,this.hu=NaN,this.nu=NaN,this.ru=NaN,this.ou=NaN,this.au=NaN,this.lu=NaN,this.uu=NaN,this.eu=0,this.hu=0,this.nu=0,this.ru=0,this.ou=0,this.au=0,this.lu=0,this.uu=0,t instanceof At.iu?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.eu=+t,this.hu=+s,this.nu=+i,this.ru=+e,this.ou=+h,this.au=+n,this.lu=+r,this.uu=+o}cu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.eu=t.eu,this.hu=t.hu,this.nu=t.nu,this.ru=t.ru,this.ou=t.ou,this.au=t.au,this.lu=t.lu,this.uu=t.uu}equals(t){return this.eu===t.eu&&this.hu===t.hu&&this.nu===t.nu&&this.ru===t.ru&&this.ou===t.ou&&this.au===t.au&&this.lu===t.lu&&this.uu===t.uu}fu(t){this.eu=+t}er(){return this.eu}du(t){this.hu=+t}hr(){return this.hu}pu(t){this.nu=+t}nr(){return this.nu}mu(t){this.ru=+t}rr(){return this.ru}gu(t){this.ou=+t}lr(){return this.ou}yu(t){this.au=+t}ur(){return this.au}Mu(t){this.lu=+t}cr(){return this.lu}wu(t){this.uu=+t}dr(){return this.uu}Su(){return new DOMQuad(new DOMPoint(this.eu,this.hu),new DOMPoint(this.nu,this.ru),new DOMPoint(this.ou,this.au),new DOMPoint(this.lu,this.uu))}static Tu(t){return At.un(At.iu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.eu,this.hu,this.nu,this.ru,this.ou,this.au,this.lu,this.uu]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.eu,t[s++]=this.hu,t[s++]=this.nu,t[s++]=this.ru,t[s++]=this.ou,t[s++]=this.au,t[s++]=this.lu,t[s]=this.uu}bu(t,s,i){t[s++]=this.eu,t[s++]=this.hu,t[s++]=i,t[s++]=this.nu,t[s++]=this.ru,t[s++]=i,t[s++]=this.ou,t[s++]=this.au,t[s++]=i,t[s++]=this.lu,t[s++]=this.uu,t[s]=i}offset(t,s){s=+s,this.eu+=t=+t,this.hu+=s,this.nu+=t,this.ru+=s,this.ou+=t,this.au+=s,this.lu+=t,this.uu+=s}round(){this.eu=Math.round(this.eu),this.hu=Math.round(this.hu),this.nu=Math.round(this.nu),this.ru=Math.round(this.ru),this.ou=Math.round(this.ou),this.au=Math.round(this.au),this.lu=Math.round(this.lu),this.uu=Math.round(this.uu)}floor(){this.eu=Math.floor(this.eu),this.hu=Math.floor(this.hu),this.nu=Math.floor(this.nu),this.ru=Math.floor(this.ru),this.ou=Math.floor(this.ou),this.au=Math.floor(this.au),this.lu=Math.floor(this.lu),this.uu=Math.floor(this.uu)}ceil(){this.eu=Math.ceil(this.eu),this.hu=Math.ceil(this.hu),this.nu=Math.ceil(this.nu),this.ru=Math.ceil(this.ru),this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au),this.lu=Math.ceil(this.lu),this.uu=Math.ceil(this.uu)}xu(t){this.eu=t.dl,this.hu=t.pl,this.nu=t.gl,this.ru=t.pl,this.ou=t.gl,this.au=t.yl,this.lu=t.dl,this.uu=t.yl}vu(t,s){0===s?this.xu(t):this.Gu(t,Math.sin(s),Math.cos(s))}Gu(t,s,i){const e=t.dl*s,h=t.pl*s,n=t.gl*s,r=t.yl*s,o=t.dl*i,a=t.pl*i,l=t.gl*i,u=t.yl*i;this.eu=o-h,this.hu=a+e,this.nu=l-h,this.ru=a+n,this.ou=l-r,this.au=u+n,this.lu=o-r,this.uu=u+e}Cu(t){t.set(Math.min(this.eu,this.nu,this.ou,this.lu),Math.min(this.hu,this.ru,this.au,this.uu),Math.max(this.eu,this.nu,this.ou,this.lu),Math.max(this.hu,this.ru,this.au,this.uu))}Kl(t,s){let i=this.nu-this.eu,e=this.ru-this.hu,h=this.ou-this.eu,n=this.au-this.hu,r=t-this.eu,o=s-this.hu,a=i*i+e*e,l=i*h+e*n,u=i*r+e*o,c=h*h+n*n,f=h*r+n*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.lu-this.eu)*i+(e=this.uu-this.hu)*e)*f-(l=i*h+e*n)*(u=i*r+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Ol(){return(this.eu+this.nu+this.ou+this.lu)/4}Rl(){return(this.hu+this.ru+this.au+this.uu)/4}Iu(t,s,i,e){return!(!this.Kl(t,s)&&!this.Kl(i,e))||At.ir(t,s,i,e,this)}_u(t){let s=t.Ol(),i=t.Rl();if(this.Kl(s,i))return!0;if(s=this.Ol(),i=this.Rl(),t.Kl(s,i))return!0;const e=this.eu,h=this.hu,n=this.nu,r=this.ru,o=this.ou,a=this.au,l=this.lu,u=this.uu;return At.ir(e,h,n,r,t)||At.ir(n,r,o,a,t)||At.ir(o,a,l,u,t)||At.ir(l,u,e,h,t)}Eu(){const t=this.eu,s=this.hu;this.eu=this.nu,this.hu=this.ru,this.nu=this.ou,this.ru=this.au,this.ou=this.lu,this.au=this.uu,this.lu=t,this.uu=s}Du(){this.Au(0,2),this.Au(1,3),this.Au(6,4),this.Au(7,5)}Nu(){this.Au(0,6),this.Au(1,7),this.Au(2,4),this.Au(3,5)}Lu(){this.Au(2,6),this.Au(3,7)}Au(t,s){const i=this.Ou(t);this.Ru(t,this.Ou(s)),this.Ru(s,i)}Ou(t){switch(t){case 0:return this.eu;case 1:return this.hu;case 2:return this.nu;case 3:return this.ru;case 4:return this.ou;case 5:return this.au;case 6:return this.lu;case 7:return this.uu;default:throw new RangeError("invalid quad point index")}}Ru(t,s){switch(s=+s,t){case 0:this.eu=s;break;case 1:this.hu=s;break;case 2:this.nu=s;break;case 3:this.ru=s;break;case 4:this.ou=s;break;case 5:this.au=s;break;case 6:this.lu=s;break;case 7:this.uu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Nt=self.Ps,Lt=[0,0,1,0,1,1,0,1],Ot=Nt.un(Nt.iu);Nt.ku=class extends Nt.an{constructor(t,s=!0){super(),t=t||Lt,this.Pu=Float64Array.from(t),this.Fu=new Nt.Rect,this.ju=!0,this.Bu=s}cn(){}zu(){return this.Pu}Uu(){return this.Pu.length/2}Wu(t){this.Pu.length===t.length?this.Pu.set(t):this.Pu=Float64Array.from(t),this.ju=!0}Qu(){this.Wu(Lt)}I(t){this.Wu(t.Pu)}Vu(){this.ju=!0}Ju(){if(this.ju){let i=this.Pu,e=i[0],h=i[1],n=e,r=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>n&&(n=o),a<h&&(h=a),a>r&&(r=a)}this.Fu.set(e,h,n,r),this.ju=!1}}xu(t,s,i){let e=this.Pu;8!==e.length&&(e=new Float64Array(8),this.Pu=e),e[0]=t.Cl()-s,e[1]=t.Il()-i,e[2]=t._l()-s,e[3]=t.Il()-i,e[4]=t._l()-s,e[5]=t.El()-i,e[6]=t.Cl()-s,e[7]=t.El()-i,this.Fu.I(t),0===s&&0===i||this.Fu.offset(-s,-i),this.ju=!1}Yu(t,s,i){Ot.I(t),Ot.offset(s,i),this.Wu(Ot.toArray()),this.ju=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Hu(t,s,e,h)}Hu(i,e,h,n){const r=this.Pu;for(let t=0,s=r.length;t<s;t+=2){const o=t+1,a=r[t]*i,l=r[o]*e;r[t]=a*n-l*h,r[o]=l*n+a*h}this.ju=!0}offset(i,e){const h=this.Pu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Kl(i,e){const h=this.Pu;if(i===h[0]&&e===h[1])return!0;this.Ju();let t=this.Fu,n=t.Cl()-110,r=t.Il()-101,o=t._l()+131,a=t.El()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=n<i?(l=n,i):(l=i,n),f=r<e?(u=r,e):(u=e,r),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],x=h[1+w];Nt.tr(n,r,i,e,l,c,u,f,S,T,b,x)&&++y,Nt.tr(o,a,i,e,d,m,p,g,S,T,b,x)&&++M}return y%2==1||M%2==1}qu(t,c,f){const d=t.Pu,p=this.Pu;if(this.Kl(d[0]+c,d[1]+f))return!0;if(t.Kl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],n=p[1+t],r=0,o=0,a,l;a=i<h?(r=i,h):(r=h,i),l=e<n?(o=e,n):(o=n,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(Nt.tr(i,e,h,n,r,a,o,l,g,y,M,w))return!0}}return!1}Iu(i,e,h,n,r,o){if(this.Kl(h-i,n-e))return!0;if(this.Kl(r-i,o-e))return!0;let a=0,l=0,u,c;u=h<r?(a=h,r):(a=r,h),c=n<o?(l=n,o):(l=o,n);const f=this.Pu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Nt.tr(h,n,r,o,a,u,l,c,p,m,g,y))return!0}return!1}Du(i){const e=this.Pu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.ju=!0}Nu(i){const e=this.Pu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.ju=!0}Lu(){const i=this.Pu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.ju=!0}Zu(){let i=this.Pu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Uu()}Xu(){let i=this.Pu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Uu()}Ku(){return this.Pu}$u(){return this.Uu()}tc(){return this.Bu}}}{const Rt=self.Ps;Rt.ic=class extends Rt.an{constructor(t){if(super(),this.ec=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}cn(){this.hc(),this.ec=null}nc(){return 0===this.ec.size}hc(){const t=this.ec;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.ec,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ei(t,s){const i=this.ec.get(t);return i&&i.get(s)}si(t,s){const i=this.ec.get(t);return!!i&&i.has(s)}rc(t,s){const i=this.ec,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}oc(t){const s=this.ec,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}ac(){let t=0;for(const s of this.ec.values())t+=s.size;return t}*values(){for(const t of this.ec.values())yield*t.values()}*lc(){for(const[t,s]of this.ec.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.ec.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Ps;kt.uc=class extends kt.an{constructor(){super(),this.cc=new Set,this.fc=[],this.mc=!1}cn(){this.hc()}hc(){this.cc.clear(),kt.Wr(this.fc),this.mc=!1}yc(t){this.cc.has(t)||(this.cc.add(t),this.mc)||this.fc.push(t)}si(t){return this.cc.has(t)}rc(t){this.cc.delete(t)&&(this.mc=!0)}ac(){return this.cc.size}nc(){return 0===this.cc.size}Mc(){return this.mc&&(this.wc(),this.mc=!1),this.fc}wc(){const t=this.fc;kt.Wr(t);for(const s of this.cc)t.push(s)}}}{const Pt=self.Ps,Ft=new Map,jt=new Map,Bt=new Map,zt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Vt=new Map,Jt=new Map,Yt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.Sc=class hs{constructor(){}static Tc(){return"default"}static xc(){return"noease"}static vc(t){return qt.get(t)}static Gc(s,...i){this.Cc();let t,e=(s?(Bt.has(s)||Bt.set(s,new Map),[...(t=Bt.get(s)).keys()].filter(t=>!hs.Ic(t,s)||hs.Ic(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static _c(){this.Cc();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static Ec(){this.Cc();const t=[...Ut.keys()];return t.sort(),t}static Dc(t){for(const s of Yt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Ac(t){return this.Cc(),[...jt.keys()].includes(t)}static Nc(t){const s=Jt.get(t);return s?Ft.get(s):hs.Ac(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static Lc(t){return this.Cc(),Vt.get(t)}static Oc(t,s){this.Cc();const i=hs.Nc(t);if(i)return i;if(s)return Bt.get(s).get(t);throw new Error("missing ease function")}static Ic(t,s){this.Cc();const i=zt.get(s);if(i)return i.get(t)}static Rc(t,s){this.Cc();const i=hs.Nc(t);return!!i||!!Bt.get(s).get(t)}static kc(t){this.Cc();const s=hs.Nc(t);return s||Ut.get(t)}static Pc(t){return this.Cc(),Wt.get(t)}static Fc(t){this.Cc();const s=this._c();return s[t]}static jc(t,s){this.Cc();const i=this.Gc(s);return i.indexOf(t)}static Bc(t){return this.jc(t)}static Cc(){0===Ft.size&&(this.zc("default",()=>{}),this.zc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.zc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.zc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.zc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.zc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.zc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.zc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.zc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.zc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.zc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.zc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.zc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.zc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.zc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.zc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.zc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.zc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.zc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.zc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.zc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.zc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.zc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.zc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.zc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.zc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.zc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.zc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.zc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.zc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.zc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.zc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Uc("cubicbezier",this.Wc),this.Uc("spline",this.Qc))}static zc(t,s,i=!1){if("function"==typeof s)hs.Vc(t,s,"predefined");else{if(!Pt.je(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Pt.un(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Vc(t,(t,s,i,e)=>h.Jc(t,s,i,e),"predefined"),Vt.set(t,h)}else{const n=Pt.un(Pt.Yc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.Hc(i),hs.Vc(t,(t,s,i,e)=>n.Jc(t,s,i,e),"predefined")}}}static Uc(t,s){hs.Vc(t,s,"private")}static qc(t,s,i,e){this.Cc(),hs.Vc(t,s,"custom",i,e)}static Zc(t,s){if(!this.Ac(t)&&![...Qt.keys()].includes(t)){const i=Bt.get(s),e=(i&&i.delete(t),zt.get(s));e&&e.delete(t)}}static Vc(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){Bt.has(e)||Bt.set(e,new Map),zt.has(e)||zt.set(e,new Map);const n=Bt.get(e),r=(n.set(t,s),zt.get(e));r.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Xc(t,s,i,e){return 0===e?s:i*t/e+s}static Wc(t,s,i,e,h){const n=s,r=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return n+r+o+a}static Qc(t,s,i,e,h,n,r,o,a,l){if(e===h&&n===r)return t;const u=es(t,s,e,n,o,l),c=Kt(i,h,r,a),f=$t(i,h,r,a),d=ts(i,h,r,a);return ss(u,c,f,d)}static Kc(t,s,i,e){const h=[],n=Kt(t,s,i,e),r=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,n,r,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(r,t,s,i,e,h)=>{if(1==r)return 1;let o=0,n=1,a=h[n],l=Zt-1;for(Zt;n!=l&&a<=r;)n++,a=h[n],o+=Xt;n--;let u=(r-(a=h[n]))/(h[n+1]-a),c=o+u*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-r,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,n;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-r;0<t?i=c:s=c,h=1e-7<Math.abs(t),n=++e<10}while(h&&n);return c}}}{let o=function(t){ns.ve(t)};o;const ns=self.Ps;ns.$c=class{constructor(t){this.tf=[],this.mn=t||"",this.if=0}cn(){this.hc(),this.tf=null}ef(){return this.mn}hc(){ns.Qr(this.tf),this.if=0}hf(){return this.if}nf(t=Math.random()*this.hf()){let s=0;for(const[i,e]of this.tf)if(t<(s+=i))return e;return 0}rf(t,s){o(s),this.if+=t,this.tf.push([t,s])}lf(s,i){o(i);const e=0===s;for(let t=0;t<this.tf.length;t++){const h=this.tf[t],n=e||h[0]===s,r=h[1]===i;if(n&&r){this.tf.splice(t,1),this.if-=h[0];break}}}uf(){return JSON.stringify(this.tf)}static cf(t,s){const i=new ns.$c(s),e=JSON.parse(t);for(const h of e){const n=h[0],r=h[1];i.rf(n,r)}return i}}}{let t=self.Ps,i=0;t.ff=class{constructor(t,s){this.df=t,this.pf=s,this.mf=i++,this.df.gf("runtime","screen-reader-text",{type:"create",id:this.mf,text:this.pf})}cn(){this.df.gf("runtime","screen-reader-text",{type:"release",id:this.mf}),this.df=null,this.pf="",this.mf=-1}yf(t){this.pf!==t&&(this.pf=t,this.df.gf("runtime","screen-reader-text",{type:"update",id:this.mf,text:this.pf}))}}}{const rs=self.Ps;rs.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Mf=!1,this.wf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.wf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Mf=!0}}}{const os=self.Ps;os.Event.Sf=class extends os.an{constructor(t){super(),this.Tf=t,this.bf=[],this.xf=new Set,this.vf=[],this.Gf=new Set,this.Cf=0,this.If=[]}cn(){0<this.Cf||(os.Wr(this.bf),this.xf.clear(),os.Wr(this.vf),this.Gf.clear(),os.Wr(this.If),os.cn(this))}_f(t,s){this.Ef()?this.If.push({Df:"add",Af:t,capture:s}):s?this.xf.has(t)||(this.bf.push(t),this.xf.add(t)):this.Gf.has(t)||(this.vf.push(t),this.Gf.add(t))}Nf(t,s){this.Ef()?this.If.push({Df:"remove",Af:t,capture:s}):s?this.xf.has(t)&&(this.xf.delete(t),os.qr(this.bf,t)):this.Gf.has(t)&&(this.Gf.delete(t),os.qr(this.vf,t))}Lf(){return!this.bf.length&&!this.vf.length}Ef(){return 0<this.Cf}Of(){const t=new Set,s=new Set;for(const i of this.If)if("add"===i.Df)this._f(i.Af,i.capture),(i.capture?s:t).delete(i.Af);else{if("remove"!==i.Df)throw new Error("invalid op");(i.capture?(this.xf.delete(i.Af),s):(this.Gf.delete(i.Af),t)).add(i.Af)}os.Kr(this.vf,t),os.Kr(this.bf,s),os.Wr(this.If)}Rf(i){this.kf();let e=!1;for(let t=0,s=this.bf.length;t<s;++t)if(this.bf[t](i),i.Mf){e=!0;break}if(!e)for(let t=0,s=this.vf.length;t<s&&(this.vf[t](i),!i.Mf);++t);return this.Pf(),!i.defaultPrevented}Ff(i){this.kf();for(let t=0,s=this.bf.length;t<s;++t)this.bf[t](i);for(let t=0,s=this.vf.length;t<s;++t)this.vf[t](i);return this.Pf(),!0}kf(){this.Cf++}Pf(){this.Cf--,0===this.Cf&&0<this.If.length&&this.Of()}jf(t){t?this.kf():this.Pf()}Bf(i){let e=[];for(let s=0,t=this.bf.length;s<t;++s){let t=this.bf[s];e.push(os.zf(()=>t(i)))}for(let s=0,t=this.vf.length;s<t;++s){let t=this.vf[s];e.push(os.zf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Uf(i){const e=[];this.kf();for(let t=0,s=this.bf.length;t<s;++t){const h=this.bf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](i);n instanceof Promise&&e.push(n)}return this.Pf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Wf(t){return this.Uf(t)}async Qf(i){this.kf();for(let t=0,s=this.bf.length;t<s;++t){const e=this.bf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.vf.length;t<s;++t){const h=this.vf[t](i);h instanceof Promise&&await h}return this.Pf(),!i.defaultPrevented}*Vf(i){this.kf();for(let t=0,s=this.bf.length;t<s;++t){const e=this.bf[t](i);os.Jo(e)&&(yield*e)}for(let t=0,s=this.vf.length;t<s;++t){const h=this.vf[t](i);os.Jo(h)&&(yield*h)}this.Pf()}}}{const as=self.Ps;as.Event.Jf=class extends as.an{constructor(){super(),this.Yf=new Map,this.Hf=!1}cn(){if(this.Hf)throw new Error("already released");this.qf(),this.Hf=!0,as.cn(this)}dn(){return this.Hf}qf(){if(this.Yf){for(let t of this.Yf.values())t.cn();this.Yf.clear()}}Zf(t,s){let i=this.Yf.get(t);return i||(s?(i=as.un(as.Event.Sf,t),this.Yf.set(t,i),i):null)}Xf(t){return this.Yf.has(t)}addEventListener(t,s,i){let e=this.Zf(t,!0);e._f(s,!!i)}removeEventListener(t,s,i){let e=this.Zf(t,!1);e&&(e.Nf(s,!!i),e.Lf())&&this.Yf.delete(t)}dispatchEvent(t){const s=this.Zf(t.type,!1);return!s||(t.cancelable?s.Rf(t):s.Ff(t))}Kf(t){const s=this.Zf(t.type,!1);return s?(t.wf=!0,s.Bf(t)):Promise.resolve(!0)}async $f(t){const s=this.Zf(t.type,!1);if(!s)return!0;this.Yf.delete(t.type),t.wf=!0;const i=await s.Bf(t);return s.cn(),i}async t0(t){const s=this.Zf(t.type,!1);return!s||s.Wf(t)}s0(t){const s=this.Zf(t.type,!1);return!s||s.Uf(t)}async i0(t){const s=this.Zf(t.type,!1);return!s||s.Qf(t)}e0(t){const s=this.Zf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Vf(t)}jf(t){for(const s of this.Yf.values())s.jf(t)}}}{let n=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;r(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);n(s)}}},r=function(s){let t;try{t=s.Af()}catch(t){return void s.reject(t)}s.resolve(t)},t=(n,s,r,self.Ps),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.ri.si("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.zf=function(i){let e=null;return t.isDebug&&(e=t.fe()),new Promise((t,s)=>{u.push({Af:i,resolve:t,reject:s,stack:e}),h?r(u.pop()):-1===c&&n(a)})},t.zf.h0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){n=-1},s=function(){r=-1,o=-1;let i=Date.now();for(let s of a)if(s.n0(i)){let t=s.r0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);r=self.setTimeout(s,t)}},i=(t,s,self.Ps),e=1e3,h=100,n=-1,r=(i.o0=function(){return-1===n&&(n=Date.now(),self.setTimeout(t,16)),n},-1),o=-1,a=new Set;i.a0=class{constructor(t,s){this.l0=t,this.u0=1e3*s,this.c0=0,this.f0=!1}d0(){let t=i.o0();this.c0=t+this.u0,this.f0||(a.add(this),this.f0=!0),-1===r?(o=this.c0,r=self.setTimeout(s,this.u0+h)):this.c0<o&&o>t+e&&(self.clearTimeout(r),o=this.c0,r=self.setTimeout(s,this.u0+h))}n0(t){return!(t>=this.c0)||(this.l0()?(this.c0=t+this.u0,!0):this.f0=!1)}r0(){return this.c0}p0(){this.f0&&(a.delete(this),this.f0=!1,0===a.size)&&-1!==r&&(self.clearTimeout(r),r=-1,o=-1)}cn(){this.p0(),this.l0=null}}}{const ls=self.Ps;ls.m0=class us{constructor(t){this.g0=!1,this.y0=t}M0(){this.g0||(this.g0=!0,this.y0&&(this.y0(),this.y0=null))}w0(){return this.g0}cn(){this.M0()}static cn(t){return new us(()=>t.cn())}static S0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const n=new ls.T0;for(let t of i)s.addEventListener(t,e,h),n.yc(ls.un(ls.m0,()=>s.removeEventListener(t,e,h)));return n}return s.addEventListener(i,e,h),ls.un(ls.m0,()=>s.removeEventListener(i,e,h))}},ls.b0=class extends ls.m0{x0(t){this.y0=t}},ls.T0=class extends ls.m0{constructor(...s){super(),this.v0=new Set;for(let t of s)this.yc(t)}yc(...s){if(this.g0)throw new Error("already disposed");for(let t of s)this.v0.add(t)}G0(t){if(this.g0)throw new Error("already disposed");this.v0.delete(t)}C0(){if(this.g0)throw new Error("already disposed");if(this.v0){for(let t of this.v0)t.M0();this.v0.clear()}}w0(){return this.g0}M0(){if(this.g0)throw new Error("already disposed");this.g0=!0;for(let t of this.v0)t.M0();this.v0.clear(),this.v0=null}cn(){this.M0()}}}{const cs=self.Ps;cs.I0=class extends cs.an{constructor(){super(),this._0=0,this.el=0,this.E0=0,this.D0=0}yc(t){this.el=(t=+t)-this._0,this.E0=this.D0+this.el,this._0=this.E0-this.D0-this.el,this.D0=this.E0}A0(t){this.D0-=+t}ei(){return this.D0}d0(){this._0=0,this.el=0,this.E0=0,this.D0=0}Set(t){this._0=0,this.el=0,this.E0=0,this.D0=+t}N0(t){this._0=t._0,this.el=t.el,this.E0=t.E0,this.D0=t.D0}cn(){}}}{const fs=self.Ps,r={};r.L0=function(t){this.O0=t,this.right=this.O0.R0,this.left=this.O0.R0,this.parent=null,this.color=!1,this.key=null},r.k0=function(t){this.size=0,this.R0=new r.L0(this),this.R0.color=!1,this.root=this.R0,this.root.parent=this.R0,this.compare=t||this.P0},r.k0.prototype.P0=function(t,s){return t<s?-1:s<t?1:0},r.k0.prototype.clone=function(){var t=new r.k0(this.compare);return t.F0(this),t},r.k0.prototype.clear=function(){this.size=0,this.R0=new r.L0(this),this.R0.color=!1,this.root=this.R0,this.root.parent=this.R0},r.k0.prototype.j0=function(t){var s=t.right;t.right=s.left,s.left!=this.R0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.R0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},r.k0.prototype.B0=function(t){var s=t.left;t.left=s.right,s.right!=this.R0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.R0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},r.k0.prototype.z0=function(t){if(this.contains(t))this.U0(t).key=t;else{for(var s=new r.L0(this),i=(s.key=t,this.R0),e=this.root;e!=this.R0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.R0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.R0,s.right=this.R0,s.color=!0,this.W0(s),this.size++}},r.k0.prototype.W0=function(t){for(;t!=this.R0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.j0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.R0&&this.B0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.B0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.R0&&this.j0(t.parent.parent))}this.root.color=!1},r.k0.prototype.Q0=function(t){var s=t.left==this.R0||t.right==this.R0?t:this.V0(t),i=s.left!=this.R0?s.left:s.right;i.parent=s.parent,s.parent==this.R0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.J0(i),this.size--},r.k0.prototype.J0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.j0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.B0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.j0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.B0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.j0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.B0(t.parent),this.root))}t.color=!1},r.k0.prototype.remove=function(t){var s;return(t=this.U0(t))!=this.R0?(s=t.key,this.Q0(t),s):null},r.k0.prototype.Y0=function(t,s){this.remove(s)},r.k0.prototype.min=function(t){for(;t.left!=this.R0;)t=t.left;return t},r.k0.prototype.max=function(t){for(;t.right!=this.R0;)t=t.right;return t},r.k0.prototype.V0=function(t){if(t.right!=this.R0)return this.min(t.right);for(var s=t.parent;s!=this.R0&&t==s.right;)s=(t=s).parent;return s},r.k0.prototype.H0=function(t){if(t.left!=this.R0)return this.max(t.left);for(var s=t.parent;s!=this.R0&&t==s.left;)s=(t=s).parent;return s},r.k0.prototype.q0=function(t){if(0<this.size){var s=this.U0(t);if(s==this.R0)return null;if(s.right!=this.R0)return this.min(s.right).key;for(var i=s.parent;i!=this.R0&&s==i.right;)i=(s=i).parent;return i!=this.R0?i.key:null}return null},r.k0.prototype.Z0=function(t){if(0<this.size){var s=this.U0(t);if(s==this.R0)return null;if(s.left!=this.R0)return this.max(s.left).key;for(var i=s.parent;i!=this.R0&&s==i.left;)i=(s=i).parent;return i!=this.R0?i.key:null}return null},r.k0.prototype.X0=function(){return this.min(this.root).key},r.k0.prototype.K0=function(){return this.max(this.root).key},r.k0.prototype.U0=function(t){for(var s=this.root;s!=this.R0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},r.k0.prototype.contains=function(t){return null!=this.U0(t).key},r.k0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},r.k0.prototype.F0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.z0(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.z0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.z0(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.z0(t[e])},r.k0.prototype.$0=function(t){if("array"==r.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==r.typeOf(t.forEach))t.forEach(this.Y0,this);else if("function"==r.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==r.typeOf(t))for(var e in t)this.remove(t[e])},r.k0.prototype.td=function(t){if("array"==r.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==r.typeOf(t.forEach))return t.every(this.contains,this);if("function"==r.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==r.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},r.k0.prototype.range=function(t,s){var i=[];return this.sd(function(t){i.push(t)},t,s),i},r.k0.prototype.ed=function(t,s){if(!this.hd())for(var i=this.min(this.root);i!=this.R0;){if(t.call(s,i.key,this))return;i=this.V0(i)}},r.k0.prototype.nd=function(t,s,i){if(!this.hd())for(var e=this.U0(s);e!=this.R0;){if(t.call(i,e.key,this))return;e=this.V0(e)}},r.k0.prototype.rd=function(t,s,i){if(!this.hd())for(var e=this.min(this.root),h=this.U0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.V0(e)}},r.k0.prototype.sd=function(t,s,i,e){if(!this.hd())for(var h=this.U0(s),n=this.U0(i);h!=n;){if(t.call(e,h.key,this))return;h=this.V0(h)}},r.k0.prototype.od=function(t,s){if(!this.hd())for(var i=this.max(this.root);i!=this.R0;){if(t.call(s,i.key,this))return;i=this.H0(i)}},r.k0.prototype.forEach=function(t,s){if(!this.hd())for(var i=this.min(this.root);i!=this.R0;i=this.V0(i))t.call(s,i.key,i.key,this)},r.k0.prototype.some=function(t,s){if(!this.hd())for(var i=this.min(this.root);i!=this.R0;i=this.V0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},r.k0.prototype.every=function(t,s){if(this.hd())return!1;for(var i=this.min(this.root);i!=this.R0;i=this.V0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},r.k0.prototype.map=function(t,s){var i=[];if(!this.hd())for(var e=this.min(this.root);e!=this.R0;e=this.V0(e))i.push(t.call(s,e.key,e.key,this));return i},r.k0.prototype.filter=function(t,s){var i=[];if(!this.hd())for(var e=this.min(this.root);e!=this.R0;e=this.V0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},r.k0.prototype.getCount=function(){return this.size},r.k0.prototype.hd=function(){return 0==this.size},r.k0.prototype.isSubsetOf=function(t){var s=r.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.hd())return!0;for(var e=this.min(this.root);e!=this.R0;e=this.V0(e))r.contains.call(t,t,e.key)&&i++;return i==this.getCount()},r.k0.prototype.intersection=function(t){var s=new r.k0(this.compare);if(!this.hd())for(var i=this.min(this.root);i!=this.R0;i=this.V0(i))t.contains.call(t,i.key,i.key,this)&&s.z0(i.key);return s},fs.k0=class extends fs.an{constructor(t){super(),this.ad=new r.k0(t),this.ld=!1,this.ud=new Set,this.fd=new Set}yc(t){this.ld?this.ad.contains(t)?this.fd.delete(t):this.ud.add(t):this.ad.z0(t)}G0(t){this.ld?this.ad.contains(t)?this.fd.add(t):this.ud.delete(t):this.ad.remove(t)}si(t){return this.ld?!!this.ud.has(t)||!this.fd.has(t)&&this.ad.contains(t):this.ad.contains(t)}hc(){this.ad.clear(),this.ud.clear(),this.fd.clear()}toArray(){if(this.ld)throw new Error("cannot be used in queueing mode");return this.ad.getValues()}ac(){return this.ad.getCount()+this.ud.size-this.fd.size}nc(){return 0===this.ac()}dd(){if(this.nc())throw new Error("empty set");if(this.ld)throw new Error("cannot be used in queueing mode");const t=this.ad,s=t.min(t.root);return s.key}pd(){if(this.nc())throw new Error("empty set");if(this.ld)throw new Error("cannot be used in queueing mode");const t=this.dd();return this.G0(t),t}md(t){if(this.ld!==(t=!!t)&&!(this.ld=t)){for(const s of this.fd)this.ad.remove(s);this.fd.clear();for(const i of this.ud)this.ad.z0(i);this.ud.clear()}}gd(t){this.ad.forEach(t)}*values(){if(!this.nc()){const s=this.ad;for(let t=s.min(s.root);t!=s.R0;t=s.V0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ps;ds.yd=class{constructor(t=ds.hardwareConcurrency){this.Md=t,this.wd=[],this.Sd=0}yc(i){return new Promise((t,s)=>{this.wd.push({Af:i,resolve:t,reject:s}),this.Td()})}bd(i){for(let t=0,s=this.wd.length;t<s;++t)if(this.wd[t].Af===i)return t;return-1}xd(t,s){const i=this.bd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.wd[i].resolve(s),this.wd.splice(i,1)}vd(t,s){const i=this.bd(t);if(-1===i)throw new Error("cannot find promise to reject");this.wd[i].reject(s),this.wd.splice(i,1)}async Td(){if(this.wd.length&&!(this.Sd>=this.Md)){this.Sd++;const s=this.wd.shift();try{const t=await s.Af();s.resolve(t)}catch(t){s.reject(t)}this.Sd--,this.Td()}}static async Gd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ps;ps.Cd=class{constructor(t,s,i){this.l0=t,this.Id=s,this._d=i||2*s,this.Ed=-1,this.Dd=-1/0,this.Ad=()=>this.Nd(),this.Ld=!1,this.Od=!1,this.Rd=null}kd(t){this.Od=!!t}Pd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this._d:this.Id}Fd(...e){if(-1===this.Ed){this.Rd=e;let t=ps.o0(),s=t-this.Dd,i=this.Pd();i<=s&&this.Od?(this.Dd=t,this.jd()):this.Ed=self.setTimeout(this.Ad,Math.max(i-s,4))}}jd(){this.Ld=!0;const t=this.Rd;this.Rd=null,t?this.l0(...t):this.l0(),this.Ld=!1}d0(){this.Ld||(this.Bd(),this.Rd=null,this.Dd=ps.o0())}Nd(){this.Ed=-1,this.Dd=ps.o0(),this.jd()}Bd(){-1!==this.Ed&&(self.clearTimeout(this.Ed),this.Ed=-1)}cn(){this.Bd(),this.l0=null,this.Rd=null,this.Ad=null}}}{const ms=self.Ps;ms.zd=class{constructor(){this.Ud=new Map,this.Wd=!1,this.Qd=null,this.Vd=null,this.Jd=null,this.Yd=null}Hd(t){this.Wd=!!t}qd(){return this.Wd}Zd(t){this.Qd=t}Xd(t){if(this.Qd)return this.Qd(t);throw new Error("no get base size callback set")}Kd(t){this.Vd=t}$d(t,s,i,e,h,n){if(this.Vd)return this.Vd(t,s,i,e,h,n);throw new Error("no raster at size callback set")}t1(t){this.Jd=t}s1(t){if(!this.Jd)throw new Error("no release result callback set");this.Jd(t)}i1(t){this.Yd=t}e1(){if(!this.Yd)throw new Error("no redraw callback set");this.Yd()}h1(t){let s=this.Ud.get(t);return s||(s=ms.un(ms.n1,this,t),this.Ud.set(t,s)),s.o1(),s}a1(t){this.Ud.delete(t.l1())}u1(){for(const t of this.Ud.values())t.c1(),t.f1()}}}{const gs=self.Ps;gs.n1=class{constructor(t,s){this.d1=t,this.m1=s,this.g1=0,this.M1=0,this.w1=0,this.S1=this.d1.Xd(s).then(t=>{this.d1&&(this.M1=t[0],this.w1=t[1],this.d1.e1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.T1=!0,this.d1&&this.d1.e1()}),this.b1=0,this.v1=0,this.G1=0,this.C1=0,this.I1=!1,this._1=null,this.E1=!1,this.T1=!1}cn(){if(this.g1<=0)throw new Error("already released");this.g1--,0===this.g1&&this.D1()}c1(){this._1&&(this.d1.s1(this._1),this._1=null)}D1(){this.c1(),this.d1.a1(this),this.d1=null}l1(){return this.m1}o1(){this.g1++}A1(){return 0<this.g1}N1(){return this._1}f1(){this.E1=!0}async L1(e,h,n){if(0!==h&&0!==n&&!this.T1&&!this.I1){let t=gs.jn(Math.ceil(h)),s=gs.jn(Math.ceil(n)),i=Math.max(t,s);if(4096<i){const r=4096/i;h*=r,n*=r,t=Math.min(Math.ceil(t*r),4096),s=Math.min(Math.ceil(s*r),4096)}if(h<t&&n<s){const o=h/n,a=t/s;n=o<a?(h=s*o,s):(h=t)/o}if(this.d1.qd()&&(t=Math.ceil(h),s=Math.ceil(n)),!(t<=this.b1&&s<=this.v1)||this.E1){this.I1=!0,this.b1=t,this.v1=s;const l=await this.d1.$d(this.m1,e,this.b1,this.v1,h,n);this.d1&&(this.c1(),this._1=l,this.G1=h,this.C1=n,this.I1=!1,this.E1=!1,this.d1.e1())}}}O1(){return this.S1}R1(){return this.M1}P1(){return this.w1}F1(){return this.G1}j1(){return this.C1}B1(){return this.T1}}}{let s=function(t){return Ss.get(t)};s;const c=self.Ps,ys=(c.z1="\ufeff",new Set("0123456789")),Ms=(c.U1=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.W1=function(t){return Ms.has(t)},c.Q1=function(t){return[...t].filter(t=>!c.W1(t)).join("")},c.V1=function(t){for(const s of t)if(!c.W1(s))return!1;return!0},c.J1=function(t){for(const s of t)if(!c.W1(s))return!1;return!0},c.Y1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.H1=function(t){return[...t].filter(t=>!c.Y1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.q1=function(t){return!c.W1(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.Z1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.X1=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.U1(t))break;--i}return s.substr(0,i)},c.K1=function(t){let s=c.X1(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.tp=function(t){return t.replace(Ts,s)},c.ip=function(t){let s=c.ep(t,"\\","\\\\");return s=c.ep(s,'"','\\"'),s=c.ep(s,"\t","\\t"),s=c.ep(s,"\r",""),c.ep(s,"\n","\\n")},c.hp=function(t){let s=c.ep(t,"&","&amp;");return s=c.ep(s,"<","&lt;"),s=c.ep(s,">","&gt;"),c.ep(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ue=function(t){return t.replace(bs,"\\$&")},c.np=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.rp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,n,r=[];for(;-1<(n=t.indexOf(s,h));)r.push(n),h=n+e;return r},c.ep=function(t,s,i){return t.replaceAll(s,()=>i)},c.op=function(t,s,i){return t.replace(new RegExp(c.ue(s),"gi"),()=>i)},c.lp=function(t,s){"string"==typeof s?t.textContent=s:s.up()?t.textContent=s.toString():(t.innerHTML=s.cp(),s instanceof c.Dh&&s.fp(t))},c.pp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Dh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Dh?s.equals(t):t===s},c.mp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const n=`{${t}}`;if(!i.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);h=h.replace(n,e[t].toString())}return h},c.gp=function(i,...e){let h=i,n=-1,r=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(r=t,h=h.replace(o,e[t].toString())):-1===n&&(n=t)}if(0<=n&&0<=r&&n<r)throw new Error(`missing placeholder '${n}' in string substitution`);return h},c.yp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Mp=function(t,s){return s<t?1:t<s?-1:0},c.wp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),vs=(c.Sp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Tp=function*(t){for(const s of xs.segment(t))yield s.segment},c.bp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Gs=1024*vs,Cs={xp:!(c.vp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<vs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Gs){let t=s/vs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Gp:!0,Cp:!0,Ip:!0,_p:!0};c.Ep=function(t,s){s=Object.assign({},Cs,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Gp){const r=Math.floor(t/86400);0<r&&(t-=24*r*3600,i.push(h(".days",null,r)))}if(s.Cp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Ip){const a=Math.floor(t/60);(0<a||i.length||!s._p)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s._p){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const n=(s.xp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),n},c.Dp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Ap=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Np=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Jr(i,4,"0"),c.Jr(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Lp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Op=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Rp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const n=parseInt(e.substring(3),10)-1;if(n<0||n>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[n],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.ep(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const r=a[s];if("string"==typeof r)return`<a href="${a[s]}">`;if("function"==typeof r)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ps),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Dh=class{constructor(t,s){if(this.kp=s&&s.Pp?t:f.tp(t),this.Fp="",this.jp=!1,this.Bp=[],this.zp=[],s){if(this.jp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Bp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.zp=s.tips}}this.Up=this.kp.includes("["),this.Wp=this.jp&&this.kp.includes("\n"),this.Qp=!this.Up&&!this.Wp&&!this.kp.includes("&"),this.Vp=!1,this.Jp=[]}toString(){return this.kp}valueOf(){return this.kp}up(){return this.Qp}Yp(){return this.Up?this.kp.replace(i,""):this.kp}cp(){if(this.Qp)return this.kp;if(!this.Fp&&this.kp){let t=this.kp;this.Up&&(u=0,a=this.Bp,l=this.zp,t=t.replace(i,s),a=null,l=null),this.Wp&&(t=t.replace(e,"<br>")),this.Fp=t}return this.Fp}fp(i){if(this.Bp.length)for(let t=0,s=this.Bp.length;t<s;++t){const e=this.Bp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.cp()===t.cp():t instanceof f.Dh?this.kp===t.kp:this.kp===t}Hp(){if(!this.Vp){let e=[],t=this.kp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const n=i.index;if(!(0<n&&"\\"===t.charAt(n-1))){const r=i[0],o=i[1],a=i[2],l=t.substring(s,n);if(s=n+r.length,l&&e.push({text:l,qp:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,qp:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),qp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Zp(c.text));this.Jp=e.map(t=>t.icon?f.un(f.Xp,{icon:t.icon,qp:t.qp}):f.un(f.Kp,{$p:f.Sp(t.text),qp:t.qp})),this.Vp=!0}return this.Jp}Zp(t){return t=f.ep(t,"\\[","["),f.ep(t,"\\\\","\\")}static tm(t){return f.un(f.Dh,t,{Pp:!0}).Yp()}static im(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&M.W1(t)},a=function(t){return Is.has(t)},u=function(t){return M.q1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const M=self.Ps,Is=new Set("〈《「『【〔〖〘〚〝");M.hm=class{constructor(){this.nm=[],this.rm=null}om(){return this.nm}lm(){return this.nm.length}um(t){this.rm=t}fm(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.pm()){const a=s(o);o.gm(a.height),o.ym(a.fontBoundingBoxAscent||0),o.Mm(a.fontBoundingBoxDescent||0),o.wm(a.Sm||0),o.Tm()?o.xm(a.width):o.vm()&&o.Gm(this.rm)}i+=o.pm(),e=Math.max(e,o.Cm()),h=Math.max(h,o.Im()),n=Math.max(n,o._m()),r=Math.max(r,o.Em())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,Sm:r}}Dm(t,s,i,e,h,n){this.nm.push(M.un(M.hm.Am,{Nm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Sm:n}))}hm(s,n,r,i,o){if("string"==typeof s&&(s=[M.un(M.Kp,{$p:M.Sp(s)})]),M.Wr(this.nm),!(!s.length||1===s.length&&s[0].Tm()&&s[0].nc()||r<2)){if(1===s.length){const a=s[0];if(a.Tm()&&a.Lm()<=100&&!a.Om()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Sm:h}=n(a);if(t+=o,a.xm(t),a.gm(s),a.ym(i||0),a.Mm(e||0),a.wm(h||0),t<=r)return void this.Dm([a],t,s,i,e,h)}}let t;t="word"===i?this.Rm(s):"cjk"===i?this.km(s):this.Pm(s),this.Fm(t,n,r,o)}}Rm(t){let s=[],i=[],e=!1;for(const h of t){const n=h.jm();if(h.vm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Bm())if(y(r))0<i.length&&s.push(i),s.push([M.un(M.Kp,{$p:["\n"],qp:n})]),i=[];else if(0===i.length)i.push(M.un(M.Kp,{$p:[r],qp:n})),e=l(r);else{const o=l(r);if(o===e){const a=i.at(-1);a.jm()===n?a.zm(r):i.push(M.un(M.Kp,{$p:[r],qp:n}))}else s.push(i),i=[M.un(M.Kp,{$p:[r],qp:n})],e=o}}return 0<i.length&&s.push(i),s}km(t){let s=[],i=[],e=!1;for(const h of t){const n=h.jm();if(h.vm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const r of h.Bm())if(y(r))0<i.length&&s.push(i),s.push([M.un(M.Kp,{$p:["\n"],qp:n})]),i=[];else{if(0===i.length)i.push(M.un(M.Kp,{$p:[r],qp:n}));else if(e||u(r)){const o=i.at(-1);o.jm()===n?o.zm(r):i.push(M.un(M.Kp,{$p:[r],qp:n}))}else s.push(i),i=[M.un(M.Kp,{$p:[r],qp:n})];e=a(r)}}return 0<i.length&&s.push(i),s}Pm(t){const s=[];for(const i of t)if(i.Tm()){const e=i.Bm();M.Zh(s,e.map(t=>[M.un(M.Kp,{$p:[t],qp:i.jm()})]))}else s.push([i]);return s}Um(t){return t.map(t=>t.Wm())}Qm(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Tm()&&i[0].Tm()&&i[0].jm()===t.jm()&&(t.Vm(i[0].Bm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Wm())}}Fm(t,s,i,e){let h=[],n=0,r=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Tm()&&1===u[0].Lm()&&y(u[0].Bm()[0])){if(0===r){const c=M.un(M.Kp,{$p:[" "],qp:u[0].jm()}),f=s(c);r=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Sm||0}this.Dm(h,n,r,o,a,l),h=[],n=0,r=0,o=0,a=0,l=0}else{const d=this.Um(h),p=(this.Qm(d,u),this.fm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Dm(h,n,r,o,a,l),h=[],u[0].Tm()&&M.J1(u[0].Bm()))n=0,r=0,o=0,a=0,l=0;else{this.Qm(h,u);const g=this.fm(h,s);n=g.width,r=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Sm}else h=d,n=m,r=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Sm}0<h.length&&this.Dm(h,n,r,o,a,l),this.Jm(s,e)}Jm(s,i){for(const e of this.nm){const h=e.Ym();if(h.length){let t=h.at(-1);if(t.Tm()){const n=t.Bm(),r=n.slice(0);if(c(r),0===r.length)e.Hm(-t.pm()),h.pop();else if(r.length<n.length){t.qm(r);const o=s(t).width,a=t.pm()-o;t.xm(o),e.Hm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Hm(i),e.Hm(i))}}}}hc(){M.Wr(this.nm)}Zm(){return this.nm.reduce((t,s)=>Math.max(t,s.pm()),0)}Xm(){return this.nm.reduce((t,s)=>t+s.Cm(),0)}}}{const _s=self.Ps;_s.hm.Am=class{constructor(t){this.Jp=t.Nm||[],this.Km=t.width||-1,this.$m=t.height||-1,this.tg=t.fontBoundingBoxAscent||-1,this.sg=t.fontBoundingBoxDescent||-1,this.ig=t.Sm||-1,this.eg=0,this.hg=0}Nm(){return this.Jp.values()}*ng(){const s=this.Jp;for(let t=s.length-1;0<=t;--t)yield s[t]}Ym(){return this.Jp}Hm(t){this.Km+=t}pm(){return this.Km}Cm(){return this.$m}rg(){return this.tg}_m(){return this.sg}Em(){return this.ig}og(t){this.eg=t}ag(){return this.eg}lg(t){this.hg=t}ug(){return this.hg}}}{const Es=self.Ps;Es.fg=class{constructor(t){this.dg=t.qp||[],this.Km=t.width||-1,this.$m=t.height||-1,this.tg=t.fontBoundingBoxAscent||-1,this.sg=t.fontBoundingBoxDescent||-1,this.ig=t.Sm||-1,this.eg=0,this.hg=0}Tm(){return!1}vm(){return!1}jm(){return this.dg}pg(s){const i=this.dg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}mg(t){return!!this.pg(t)}gg(){const t=new Map;for(const s of this.dg)t.set(s.tag,s.param);return t}Hm(t){this.Km+=t}xm(t){this.Km=t}pm(){return this.Km}gm(t){this.$m=t}Cm(){return this.$m}ym(t){this.tg=t}Im(){return this.tg}Mm(t){this.sg=t}_m(){return this.sg}wm(t){this.ig=t}Em(){return this.ig}og(t){this.eg=t}ag(){return this.eg}lg(t){this.hg=t}ug(){return this.hg}}}{const Ds=self.Ps;Ds.Kp=class extends Ds.fg{constructor(t){super(t),this.yg=t.$p}Tm(){return!0}Vm(t){Ds.Zh(this.yg,t),this.Km=-1,this.$m=-1,this.tg=-1,this.sg=-1,this.ig=-1}zm(t){this.yg.push(t)}Wm(){return Ds.un(Ds.Kp,{$p:this.yg.slice(0),qp:this.dg,width:this.Km,height:this.$m,fontBoundingBoxAscent:this.tg,fontBoundingBoxDescent:this.sg,Sm:this.ig})}Bm(){return this.yg}qm(t){this.yg=t}Lm(){return this.yg.length}nc(){return 0===this.yg.length}Om(){return this.yg.includes("\n")}}}{const As=self.Ps;As.Xp=class extends As.fg{constructor(t){super(t),this.Mg=t.icon}vm(){return!0}wg(){return this.Mg}Wm(){return As.un(As.Xp,{icon:this.Mg,qp:this.dg,width:this.Km,height:this.$m,fontBoundingBoxAscent:this.tg,fontBoundingBoxDescent:this.sg,Sm:this.ig})}Sg(t){if(!t)return null;let s=Number(this.Mg);return String(s)===this.Mg?(s=Math.floor(s),t.Tg(s)):t.bg(this.Mg)}Gm(t){const s=this.Sg(t);this.Km=s?this.$m*s.pm()/s.Cm():0}xg(t){const s=this.Sg(t);return s?s.xg():null}Lm(){return 1}}}{const Ns=self.Ps;Ns.vg=class{constructor(t){this.Gg=new Map,this.Cg=t.Ig,this._g=t.Eg}cn(){for(const t of this.Gg.values())t.cn();this.Gg.clear()}Dg(t){let s=this.Gg.get(t);if(!s){const i=this.Cg(t);s=Ns.un(Ns.Ag,this,{source:t,Ng:i}),this.Gg.set(t,s)}return s}Lg(t){return this.Gg.has(t)}Og(t){const s=this.Gg.get(t);s&&s.cn(),this.Gg.delete(t)}async Rg(t){return this._g(t)}}}{const Ls=self.Ps;Ls.Ag=class{constructor(t,s){this.kg=t,this.Pg=s.source,this.Fg=[],this.jg=new Map,this.Bg=!1,this.zg=!1,this.Ug=null;const i=s.Ng.Wg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.un(Ls.Qg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Fg.push(h),e.tag&&this.jg.set(e.tag.toLowerCase(),h)}}cn(){for(const t of this.Fg)t.cn();Ls.Wr(this.Fg),this.jg.clear(),this.kg=null,this.Pg=null}Vg(){return this.Bg}Jg(){return this.zg}Yg(){return this.Ug||(this.Ug=this.Hg()),this.Ug}async Hg(){if(!this.Bg){this.Bg=!0,this.zg=!0;const t=await this.kg.Rg(this.Pg);if(this.kg){const i=t.Wg;for(let t=0,s=Math.min(i.length,this.Fg.length);t<s;++t){const e=i[t].qg;this.Fg[t].Zg(e)}this.zg=!1}}}Tg(t){return(t=Math.floor(t))<0||t>=this.Fg.length?null:this.Fg[t]}bg(t){return this.jg.get(t.toLowerCase())||null}}}{const Os=self.Ps;Os.Qg=class{constructor(t,s){this.Xg=t,this.Pg=s.source||null,this.Kg=s.index,this.$g=s.tag,this.Km=s.width,this.$m=s.height,this.ty=null}cn(){this.Km=0,this.$m=0,this.Xg=null}iy(){return this.Pg}pm(){return this.Km}Cm(){return this.$m}Zg(t){this.ty=t}xg(){return this.ty}}}{let e=function(t,s,i,e){const h=js;vh.B(Ps,i,s),vh.B(Fs,t,s),vh.Rt(h,Ps,Fs),vh.normalize(h,h),e.set(h[0],h[1],h[2],vh.Ot(t,h))},r=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,l=r.z,u=r.w,c=r.ey,f=r.hy,d=r.ny,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*n*g;if(u<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+l*n*d+l*i*g;return u<M},h=function(t,s,i,e){const h=e.x,n=e.y,r=e.z,o=e.w,a=h*t+n*s+r*i;return o<=a};e,r,h;const Rs=self.Ps,ks=self.Ss,vh=ks._s,Uh=ks.Es,xh=ks.vs,Ps=vh.create(),Fs=vh.create(),js=vh.create(),Bs=Uh.create(),zs=xh.create(),Us=vh.create(),Ws=vh.create(),Qs=vh.create(),Vs=vh.create(),Js=vh.create(),Ys=vh.create(),Hs=vh.create(),qs=vh.create(),Zs=Uh._(0,0,1,1);Rs.oy={uy(t,s,i,e,h,n,r){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,r[0]=(.5*(c*=p)+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},my(t,s,i,e,h,n,r){const o=zs,a=Bs;return xh.multiply(o,h,e),null!==xh.A(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.Bt(a,a,o),0!==a[3])&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0)},gy(t,s,i,e,h,n,r){const o=Ps,a=Fs;if(!Rs.oy.my(t,s,0,e,h,n,o))return!1;if(!Rs.oy.my(t,s,1,e,h,n,a))return!1;let l=Fs,u=(vh.B(l,a,o),js),c=(vh.set(u,0,0,1),-i),f=vh.Ot(u,l),d=0;if(0===f){const p=vh.Ot(u,o)+c;if(0!==p)return!1}else if((d=-(vh.Ot(o,u)+c)/f)<0)return!1;return vh.Et(r,o,l,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.ey=NaN,this.hy=NaN,this.ny=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.ey=0<t?1:0,this.hy=0<s?1:0,this.ny=0<i?1:0}}Rs.oy.yy=class{constructor(){this.My=new Xs,this.wy=new Xs,this.Sy=new Xs,this.Ty=new Xs,this.by=new Xs,this.xy=new Xs}vy(t,s){const i=Zs;Rs.oy.my(0,1,0,t,s,i,Us),Rs.oy.my(1,1,0,t,s,i,Ws),Rs.oy.my(0,0,0,t,s,i,Qs),Rs.oy.my(1,0,0,t,s,i,Vs),Rs.oy.my(0,1,1,t,s,i,Js),Rs.oy.my(1,1,1,t,s,i,Ys),Rs.oy.my(0,0,1,t,s,i,Hs),Rs.oy.my(1,0,1,t,s,i,qs),e(Qs,Us,Js,this.My),e(Us,Ws,Ys,this.wy),e(Ws,Vs,qs,this.Sy),e(Vs,Qs,Hs,this.Ty),e(Hs,Js,Ys,this.xy),e(Vs,Ws,Us,this.by)}Gy(t,s,i,e,h,n){return r(t,s,i,e,h,n,this.My)&&r(t,s,i,e,h,n,this.wy)&&r(t,s,i,e,h,n,this.Sy)&&r(t,s,i,e,h,n,this.Ty)&&r(t,s,i,e,h,n,this.by)&&r(t,s,i,e,h,n,this.xy)}Cy(t,s,i){return!h(t,s,i,this.by)}}}{const Ks=self.Ps,$s=self.Ss,vh=$s._s,Uh=$s.Es,xh=$s.vs,ti=xh.create(),si=vh._(0,0,0),ii=vh._(0,0,0),ei=vh._(0,0,0),hi=vh._(0,1,0),ni=(Uh._(0,0,0,0),new Ks.iu),ri=new Ks.Rect,oi=new Ks.iu(0,0,1,0,1,1,0,1),ai={Iy:1,_y:1e4},li=xh._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.oy.Ey=class{constructor(t){t=Object.assign({},ai,t),this.Km=0,this.$m=0,this.Dy=Ks.wn(45),this.Ay=Math.tan(this.Dy/2),this.Ny=xh.create(),this.Ly=xh.create(),this.Oy=!1,this.Ry=t.Iy,this.ky=t._y,this.Py=[],this.Fy=new Map,this.jy=null,this.By=null,this.zy=null,this.Uy=null,this.Wy=null,this.Qy=null,this.Vy=null,this.Jy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.Xy=new Map,this.Ky=null,this.$y=[],this.tM=new Map,this.sM=0,this.iM=0,this.eM=1,this.hM=[this.eM],this.nM=1,this.rM=[this.nM],this.oM=.5,this.aM=[this.oM],this.lM=0,this.uM=!0,this.cM=!1}fM(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}dM(){this.sM=0,this.iM=0,this.jy=null,this.By=null,this.zy=null,this.Uy=null,this.Wy=null,this.Qy=null,this.Vy=null,this.Jy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.pM()}mM(){this.dM(),this.Ky=null}gM(){for(const t of this.Py)t.cn();this.dM()}pm(){return this.Km}Cm(){return this.$m}yM(t){return this.MM()?100:t/(2*this.wM())}SM(t){if(this.MM()){const s=t/(2*this.wM());return s/this.yM(t)}return 1}TM(t){this.Ry=t}bM(){return this.Ry}xM(t){this.ky=t}vM(){return this.ky}GM(t){this.Dy=t,this.Ay=Math.tan(this.Dy/2)}CM(){return this.Dy}wM(){return this.Ay}IM(){this.Oy=!1}_M(){this.Oy=!0}MM(){return!this.Oy}EM(){return this.Oy}DM(t,s,i=.5,e=.5){const h=this.bM(),n=this.vM(),r=this.CM();if(.5===i&&.5===e)this.AM()?xh.bt(t,r,s,h,n):xh.perspective(t,r,s,h,n);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.wM()*h,f=c*s;xh.St(t,o*f,a*f,l*c,u*c,h,n),this.AM()&&xh.mul(t,li,t)}}NM(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.yM(i)*h*this.wM()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,l=r,u=-o,c=o;this.AM()?xh.Gt(t,a,l,u,c,this.bM(),this.vM()):xh.ortho(t,a,l,u,c,this.bM(),this.vM())}LM(t,s,i,e,h,n=1){let r=1;this.MM()&&(r=200*this.wM()/h);const o=ei,a=(vh.set(o,r,-r,1),si),l=ii;vh.multiply(a,s,o),vh.multiply(l,i,o),xh.Ct(t,a,l,e||hi),o[2]=n,xh.scale(t,t,o)}OM(t,s,i,e,h,n,r,o){return vh.set(si,t,s,i),vh.set(ii,e,h,n),this.LM(ti,si,ii,hi,r,o),ti}RM(t){this.Py.push(t),this.Fy.set(t.ef(),t)}kM(t){const s=this.Py.indexOf(t);-1!==s&&this.Py.splice(s,1),this.Fy.delete(t.ef())}pM(){Ks.Wr(this.Py),this.Fy.clear()}PM(t){return this.Fy.get(t)||null}FM(){return this.jy}jM(){this.BM(this.jy)}zM(){return this.By}UM(){this.BM(this.By)}WM(){this.BM(this.zy)}QM(){this.BM(this.Uy)}VM(){this.BM(this.Wy)}JM(){this.BM(this.Qy)}YM(){this.BM(this.Vy)}HM(){this.BM(this.Jy)}qM(){this.BM(this.Yy)}ZM(){this.BM(this.Hy)}XM(){this.BM(this.qy)}KM(){this.BM(this.Zy)}$M(t){this.Ky=t}iw(){return this.Ky}ew(t,s,i,e){let h=Ks.oy.rw.hw(t,s,i,e),n=this.Xy.get(h);return n||(n=Ks.un(Ks.oy.rw,this,t,s,i,e),this.Xy.set(h,n)),n.ow(),n}aw(t){t.lw(),0===t.uw()&&(this.Ky===t&&(this.Ky=null),this.Xy.delete(t.cw()),t.cn())}fw(t){Ks.Wr(this.$y),this.tM.clear();let s=0;for(const i of t){const e=i[0],h=i[1],n=i[2];this.$y.push([h,n]),this.tM.set(e,{number:s,dw:h,pw:n}),s++}}mw(t){return this.$y[t]}gw(t){return this.mw(t)[0]}yw(t){return this.mw(t)[1]}Mw(t){const s=this.tM.get(t);if(void 0===s)throw new Error("invalid blend name");return s}ww(t){const s=this.tM.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Sw(t){this.sM=t}Tw(){return this.sM}bw(t){this.iM=t,this.Ky=null}xw(){return this.iM}Am(t,s,i,e){const h=Ks.Gn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.eM,a=n*o,l=r*o,u=this.nM;2===u?this.Gw(t,s,0,i,e,0,a,l):1===u?this.Cw(t,s,0,i,e,0,a,l):this.Iw(t,s,0,i,e,0,a,l)}_w(t,s,i,e,h,n){const r=Ks.Gn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),l=.5*this.eM,u=o*l,c=a*l,f=this.nM;2===f?this.Gw(t,s,i,e,h,n,u,c):1===f?this.Cw(t,s,i,e,h,n,u,c):this.Iw(t,s,i,e,h,n,u,c)}Gw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=l+r,g=u-o,y=l-r+d,M=u+o+p,w=c+r,S=f-o,T=c-r-d,b=f+o-p;this.Ew(m,g,i,w,S,n,T,b,n,y,M,i,oi)}Cw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,M=f-o,w=c-r,S=f+o;this.Ew(d,p,i,y,M,n,w,S,n,m,g,i,oi)}Iw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a,u=s+a,c=e+a,f=h+a,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,M=f-o,w=c-r,S=f+o;this.Ew(d,p,i,y,M,n,w,S,n,m,g,i,oi)}Dw(t,s,i,e,h,n){const r=Ks.Gn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),l=.5*this.eM,u=o*l,c=a*l,f=this.nM;2===f?this.Aw(t,s,i,e,u,c,h,n):1===f?this.Nw(t,s,i,e,u,c,h,n):this.Lw(t,s,i,e,u,c,h,n)}Aw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=l+h,g=u-n,y=l-h+d,M=u+n+p,w=c+h,S=f-n,T=c-h-d,b=f+n-p;ni.set(m,g,w,S,T,b,y,M),ri.set(r,0,o,0),this.Ow(ni,ri)}Nw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,M=f-n,w=c-h,S=f+n;ni.set(d,p,y,M,w,S,m,g),ri.set(r,0,o,0),this.Ow(ni,ri)}Lw(t,s,i,e,h,n,r,o){const a=this.oM,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,M=f-n,w=c-h,S=f+n;ni.set(d,p,y,M,w,S,m,g),ri.set(r,0,o,0),this.Ow(ni,ri)}Rw(t,s,i,e){const h=.5*this.eM,n=this.nM;2===n?this.kw(t,s,i,e,h):1===n?this.Pw(t,s,i,e,h):this.Fw(t,s,i,e,h)}kw(t,s,i,e,h){this.Gw(t,s,0,i,s,0,0,h),this.Gw(i,s,0,i,e,0,h,0),this.Gw(i,e,0,t,e,0,0,-h),this.Gw(t,e,0,t,s,0,-h,0)}Pw(t,s,i,e,h){this.Cw(t,s,0,i,s,0,0,h),this.Cw(i,s,0,i,e,0,h,0),this.Cw(i,e,0,t,e,0,0,-h),this.Cw(t,e,0,t,s,0,-h,0)}Fw(t,s,i,e,h){this.Iw(t,s,0,i,s,0,0,h),this.Iw(i,s,0,i,e,0,h,0),this.Iw(i,e,0,t,e,0,0,-h),this.Iw(t,e,0,t,s,0,-h,0)}jw(t){this.Rw(t.Cl(),t.Il(),t._l(),t.El())}Bw(t){const s=Ks.Gn(t.er(),t.hr(),t.nr(),t.rr()),i=Math.sin(s),e=Math.cos(s),h=.5*this.eM,n=i*h,r=e*h,o=this.nM;2===o?this.zw(t,n,r):1===o?this.Uw(t,n,r):this.Ww(t,n,r)}zw(t,s,i){this.Gw(t.er(),t.hr(),0,t.nr(),t.rr(),0,s,i),this.Gw(t.nr(),t.rr(),0,t.lr(),t.ur(),0,i,-s),this.Gw(t.lr(),t.ur(),0,t.cr(),t.dr(),0,-s,-i),this.Gw(t.cr(),t.dr(),0,t.er(),t.hr(),0,-i,s)}Uw(t,s,i){this.Cw(t.er(),t.hr(),0,t.nr(),t.rr(),0,s,i),this.Cw(t.nr(),t.rr(),0,t.lr(),t.ur(),0,i,-s),this.Cw(t.lr(),t.ur(),0,t.cr(),t.dr(),0,-s,-i),this.Cw(t.cr(),t.dr(),0,t.er(),t.hr(),0,-i,s)}Ww(t,s,i){this.Iw(t.er(),t.hr(),0,t.nr(),t.rr(),0,s,i),this.Iw(t.nr(),t.rr(),0,t.lr(),t.ur(),0,i,-s),this.Iw(t.lr(),t.ur(),0,t.cr(),t.dr(),0,-s,-i),this.Iw(t.cr(),t.dr(),0,t.er(),t.hr(),0,-i,s)}Qw(t){this.eM=t,this.hM[this.hM.length-1]=t}Vw(){return this.eM}Jw(t){if(100<=this.hM.length)throw new Error("pushed too many line widths - check push/pop pairs");this.hM.push(t),this.eM=t}Yw(){if(this.hM.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.hM.pop(),this.eM=this.hM.at(-1)}Hw(){this.nM=0,this.rM[this.rM.length-1]=0}qw(){this.nM=1,this.rM[this.rM.length-1]=0}Zw(){this.nM=2,this.rM[this.rM.length-1]=0}Xw(t){if("butt"===t)this.Kw();else if("square"===t)this.$w();else{if("zag"!==t)throw new Error("invalid line cap");this.tS()}}Kw(){if(100<=this.rM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rM.push(0),this.nM=0}$w(){if(100<=this.rM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rM.push(1),this.nM=1}tS(){if(100<=this.rM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.rM.push(2),this.nM=2}sS(){if(this.rM.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.rM.pop(),this.nM=this.rM.at(-1)}iS(t){this.oM=t,this.aM[this.aM.length-1]=t}eS(){return this.oM}hS(t){if(100<=this.aM.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.aM.push(t),this.oM=t}nS(){if(this.aM.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.aM.pop(),this.oM=this.aM.at(-1)}rS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],n=s[1];for(let t=0;t<i;t+=2){const r=2*t,o=s[2+r],a=s[3+r],l=s[4+r],u=s[5+r];if(t===e)this.oS(h,n,o,a,l,u,l,u);else{const c=s[6+r],f=s[7+r];this.oS(h,n,o,a,l,u,c,f)}}}aS(){return 3}lS(){this.uS(!0),this.lM++}cS(){return this.lM}fS(){this.lM++}dS(t){this.uM=!!t}pS(){return this.uM}mS(t){this.cM=!!t}gS(){return this.cM}yS(){return!1}AM(){return!1}MS(){}wS(){}SS(){}TS(){return this.MS()+this.wS()+this.SS()}bS(){return Ks.un(Ks.oy.xS,this)}}}{const ui=self.Ps;ui.oy.vS=class{constructor(t,s){this.mn=s.name,this.GS=t,this.CS=s.extendBoxHorizontal||0,this.IS=s.extendBoxVertical||0,this._S=!!s.crossSampling,this.ES=!!s.mustPreDraw,this.DS=!!s.preservesOpaqueness,this.AS=!!s.supports3dDirectRendering,this.NS=!!s.animated,this.LS=!!s.blendsBackground,this.OS=!!s.usesDepth,this.RS=!1,this.kS=this._S||this.LS||0!==this.CS||0!==this.IS}cn(){this.GS=null}PS(){return this.GS}ef(){return this.mn}FS(){return 0!==this.CS||0!==this.IS}jS(){return this.CS}BS(){return this.IS}zS(){return this._S}US(){return this.ES}WS(){return this.DS}QS(){return this.AS}VS(){return this.NS}JS(){return this.LS}YS(){return this.OS}HS(){return this.RS}qS(){return this.kS}ZS(){return!1}}}{const ci=self.Ps;ci.oy.rw=class{constructor(t,s,i,e,h){this.GS=t,this.g1=0,this.XS=null,this.KS="",this.$S=i,this.tT=ci.un(ci.Ho),this.tT.set(e),this.sT=h,"string"==typeof s?this.KS=s:(this.XS=s,this.KS=this.XS.ef())}cn(){if(0<this.g1)throw new Error("releasing state group still in use");this.GS=null,this.XS=null,this.KS=""}iT(){const t=this.GS;t.BM(this.XS),t.eT(this.$S),t.hT(this.tT),t.bw(this.sT),t.$M(this)}cw(){return ci.oy.rw.hw(this.KS,this.$S,this.tT,this.sT)}ow(){++this.g1}lw(){--this.g1}uw(){return this.g1}nT(){this.XS=null}rT(t){if(this.XS=t.PM(this.KS),!this.XS)throw new Error("failed to restore shader program")}static hw(t,s,i,e){const h="string"==typeof t?t:t.ef();return h+","+s+","+i.ua()+","+i.ca()+","+i.fa()+","+i.da()+","+e}}}{let e=function(t,s,i){const e=i.er(),h=i.hr(),n=i.nr()-e,r=i.rr()-h,o=i.cr()-e,a=i.dr()-h,l=n*t,u=r*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const C=self.Ps,fi=C.un(C.iu);C.oy.oT=class{constructor(t,s,i){this.aT=t,this.lT=s,this.uT=i,this.il=NaN,this.el=NaN,this.sT=NaN,this.cT=NaN,this.fT=NaN,this.il=0,this.el=0,this.sT=0,this.cT=0,this.fT=0}dT(t,s,i,e){this.il=t,this.el=s,this.cT=i,this.fT=e}pT(){return this.il}mT(t){this.il!==t&&(this.il=t,this.aT.gT())}yT(){return this.el}MT(t){this.el!==t&&(this.el=t,this.aT.gT())}wT(){return this.sT}ST(t){this.sT!==t&&(this.sT=Math.max(t,0),this.aT.gT())}TT(){return this.cT}bT(t){this.cT=t}xT(){return this.fT}vT(t){this.fT=t}GT(t,s,i){[this.il,this.el]=e(t.il,t.el,s),this.sT=t.sT,this.cT=C.kt(i.Cl(),i._l(),t.cT),this.fT=C.kt(i.Il(),i.El(),t.fT)}CT(t,s,i){[this.il,this.el]=e(t.il,t.el,s),this.sT=t.sT,[this.cT,this.fT]=e(t.cT,t.fT,i)}IT(){return{x:this.pT(),y:this.yT(),z:this.wT(),u:this.TT(),v:this.xT()}}_T(t){this.mT(t.x),this.MT(t.y),t.hasOwnProperty("z")&&this.ST(t.z),this.bT(t.u),this.vT(t.v)}ET(){return this.aT}DT(){return this.lT}AT(){return this.uT}},C.oy.NT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.LT=i,this.OT=t,this.RT=s||null,this.kT=[],this.PT=0,this.FT=0,this.jT=1,this.BT=1,this.zT=0,this.UT=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const n=[];for(let t=0;t<i;++t){const r=C.un(C.oy.oT,this,t,s),o=t/e,a=s/h;r.dT(o,a,o,a),n.push(r)}this.kT.push(n)}}cn(){C.Wr(this.kT)}WT(){return this.LT}QT(){return this.OT}VT(){return this.RT}JT(){return this.kT}gT(){this.UT=!0}YT(){if(this.UT){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.kT)for(const r of n){const o=r.pT(),a=r.yT();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,r.wT())}this.PT=t,this.FT=s,this.jT=i,this.BT=e,this.zT=h,this.UT=!1}}HT(){return this.YT(),this.PT}qT(){return this.YT(),this.FT}ZT(){return this.YT(),this.jT}XT(){return this.YT(),this.BT}KT(){return this.YT(),this.zT}$T(){return 0<this.KT()}tb(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.LT||s<0||s>=this.OT?null:this.kT[s][t]}sb(t,i,e){const h=e instanceof C.Rect;if(t.WT()!==this.WT()||t.QT()!==this.QT())throw new Error("source mesh wrong size");const n=t.kT,r=this.kT;for(let t=0,s=r.length;t<s;++t){const o=n[t],a=r[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.GT(l,i,e):u.CT(l,i,e)}}}ib(n){let r=this.kT,o=r[0];for(let t=1,s=r.length;t<s;++t){let i=r[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.TT(),e.xT(),a.TT(),a.xT(),l.TT(),l.xT(),h.TT(),h.xT()),n.Ew(e.pT(),e.yT(),e.wT(),a.pT(),a.yT(),a.wT(),l.pT(),l.yT(),l.wT(),h.pT(),h.yT(),h.wT(),fi),e=a,h=l}o=i}}eb(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.kT,l=t[0];for(let n=1,r=t.length;n<r;++n){let i=t[n],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.pT(),e.yT(),e.wT()),[m,g,y]=a(u.pT(),u.yT(),u.wT()),[M,w,S]=a(c.pT(),c.yT(),c.wT()),[T,b,x]=a(h.pT(),h.yT(),h.wT());o._w(f,d,p,m,g,y),o._w(f,d,p,M,w,S),o._w(f,d,p,T,b,x),t===s-1&&o._w(m,g,y,M,w,S),n===r-1&&o._w(T,b,x,M,w,S),e=u,h=c}l=i}}hb(t){let i=.99999999,e=t.zu(),h=[],n=this.WT()-1,r=this.QT()-1,o=1/n,a=1/r,l=n-1,u=r-1,c=e[0],f=e[1],d=C.yn(Math.floor(c*n),0,l),p=C.yn(Math.floor(f*r),0,u),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=C.yn(C.kt(c,g,M),0,1),f=C.yn(C.kt(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=C.yn(Math.floor(c*n),0,l),p=C.yn(Math.floor(f*r),0,u);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,x=p*a,v=(d+1)*o,G=(p+1)*a;if(m=C.Sr(c,f,b,x,v,x,v,G),0!==w&&0<=(M=C.Mr(c,f,g,y,b,x,v,G,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=C.Mr(c,f,g,y,b,x,v,x,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<l&&3!==w&&0<=(M=C.Mr(c,f,g,y,v,x,v,G,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=C.Mr(c,f,g,y,b,x,b,G,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&0<=(M=C.Mr(c,f,g,y,b,G,v,G,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return C.un(C.ku,h)}nb(t,s){const i=this.rb(t);this.ob(i),s.Wu(i)}rb(t){const i=[],e=t.zu();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],n=e[t+1],[r,o]=this.ab(h,n);i.push(r,o)}return i}ab(t,s){const i=this.WT()-1,e=this.QT()-1,h=1/i,n=1/e,r=C.yn(Math.floor(t*i),0,i-1),o=C.yn(Math.floor(s*e),0,e-1),a=r*h,l=o*n,u=(r+1)*h,c=(o+1)*n,f=this.tb(r,o),d=this.tb(r+1,o+1),p=C.Sr(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+n,y=this.tb(r+(p?1:0),o+(p?0:1)),[M,w,S]=C.Tr(t,s,a,l,m,g,u,c);return C.br(M,w,S,f.pT(),f.yT(),f.wT(),y.pT(),y.yT(),y.wT(),d.pT(),d.yT(),d.wT())}ob(i){let e=[],h=i[0],n=i[1],r=h-i.at(-2),o=n-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-n,d=Math.abs(c)<1e-7&&Math.abs(r)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(r);(!d&&!p&&.001<Math.abs(c/r-f/o)||0==c&&0==f)&&e.push(h,n),h=l,n=u,r=c,o=f}6<=e.length&&e.length<i.length&&C.Yr(i,e)}IT(){return{cols:this.WT(),rows:this.QT(),points:this.kT.map(t=>t.map(t=>t.IT()))}}_T(t){const i=this.WT(),e=this.QT();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const n=h[s];for(let t=0;t<i;++t){const r=this.tb(t,s);r._T(n[t])}}}}}{let d=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{lb:i,ub:e,format:h,type:n}};d;const di=self.Ps,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={cb:"clamp-to-edge",fb:"clamp-to-edge",pb:"trilinear",mb:0,gb:"rgba8",yb:!0,Mb:"default",premultiplyAlpha:!0,wb:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.oy.Sb=class{constructor(t){this.GS=t,this.Tb=null,this.Km=0,this.$m=0,this.bb=!0,this.xb="clamp-to-edge",this.vb="clamp-to-edge",this.Gb="trilinear",this.Cb=0,this.Ib="rgba8",this._b=!1,this.Eb="default",this.g1=0}Db(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.Tb)throw new Error("already created texture");if(this.xb=t.cb,this.vb=t.fb,this.Gb=t.pb,this.Cb=t.mb,this.Ib=t.gb,this._b=!!t.yb&&this.GS.pS(),this.Eb=t.Mb,!yi.has(this.xb)||!yi.has(this.vb))throw new Error("invalid wrap mode");if(!mi.has(this.Gb))throw new Error("invalid sampling");if(!pi.has(this.Ib))throw new Error("invalid pixel format");if(!gi.has(this.Eb))throw new Error("invalid mipmap quality");if(this.bb=!0,s instanceof ArrayBuffer||null===s||t.wb){if(this.Km=t.width,this.$m=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Km*this.$m*4)throw new Error("ArrayBuffer wrong size")}else this.Km=s.width,this.$m=s.height;if(this.Km<=0||this.$m<=0)throw new Error("invalid texture data size");if(t.wb){const o=di.ko(this.Km,this.$m),a=o.getContext("2d");a.drawImage(s,0,0,this.Km,this.$m),s=o}const i=di.Fn(this.Km)&&di.Fn(this.$m),e=this.GS.Ab();if(this.Km>e||this.$m>e)throw new Error("texture data exceeds maximum texture size");const h=this.GS.Nb(),n=this.GS.Lb(),r=(this.Tb=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.Tb),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.Ib,h));if(this.GS.Ob()||i||!this.Rb())if(2<=n){let t;t=this._b?Math.floor(Math.log2(Math.max(this.Km,this.$m))+1):1,h.texStorage2D(h.TEXTURE_2D,t,r.lb,this.Km,this.$m),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Km,this.$m,r.format,r.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r.ub,this.Km,this.$m,0,r.format,r.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,r.ub,this.Km,this.$m,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r.ub,r.format,r.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Km,this.$m):s)instanceof ImageData){const c=di.ko(this.Km,this.$m),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.ko(di.jn(this.Km),di.jn(this.$m)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.Gb,u.drawImage(s,0,0,this.Km,this.$m,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,r.ub,r.format,r.type,l)}null!==s&&this.kb(h),h.bindTexture(h.TEXTURE_2D,null),this.GS.Pb(),this.g1=1,Si.add(this)}Fb(t,s,i){if(i=Object.assign({},Mi,i),this.Tb)throw new Error("already created texture");if(this.xb=i.cb,this.vb=i.fb,this.Gb=i.pb,this.Ib=i.gb,this._b=!!i.yb&&this.GS.pS(),this.Eb=i.Mb,!yi.has(this.xb)||!yi.has(this.vb))throw new Error("invalid wrap mode");if(!mi.has(this.Gb))throw new Error("invalid sampling");if(!pi.has(this.Ib))throw new Error("invalid pixel format");if(!gi.has(this.Eb))throw new Error("invalid mipmap quality");this.bb=!1,this.Km=Math.floor(t),this.$m=Math.floor(s);const e=di.Fn(this.Km)&&di.Fn(this.$m),h=this.GS.Ab();if(this.Km<=0||this.$m<=0)throw new Error("invalid texture size");if(this.Km>h||this.$m>h)throw new Error("texture exceeds maximum texture size");if(!this.GS.Ob()&&this.Rb()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.GS.Nb(),r=this.GS.Lb(),o=(this.Tb=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.Tb),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.Ib,n)),a=2<=r?o.lb:o.ub;n.texImage2D(n.TEXTURE_2D,0,a,this.Km,this.$m,0,o.format,o.type,null),this.kb(n),n.bindTexture(n.TEXTURE_2D,null),this.GS.Pb(),this.g1=1,Si.add(this)}jb(t){if("default"===this.Eb)return this.bb?t.NICEST:t.FASTEST;if("low"===this.Eb)return t.FASTEST;if("high"===this.Eb)return t.NICEST;throw new Error("invalid mipmap quality")}Rb(){return"clamp-to-edge"!==this.xb||"clamp-to-edge"!==this.vb}Bb(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}kb(t){const s=di.Fn(this.Km)&&di.Fn(this.$m);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.Bb(t,this.xb)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.Bb(t,this.vb)),"nearest"===this.Gb)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this._b=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.GS.Ob())&&this._b){t.hint(t.GENERATE_MIPMAP_HINT,this.jb(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.Gb&&!this.GS.gS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this._b=!1;const i=this.GS.zb();i&&0<this.Cb&&"nearest"!==this.Gb&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Cb,this.GS.Ub()))}Wb(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Tb||this.g1<=0)throw new Error("texture not created");if(this.bb)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.GS.Lb(),n=this.GS.Nb(),r=(n.bindTexture(n.TEXTURE_2D,this.Tb),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.Ib,n)),o=2<=h?r.lb:r.ub;try{if(this.Km===i&&this.$m===e){const a=di.Fn(this.Km)&&di.Fn(this.$m);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(a||this.GS.Ob())&&this._b&&(n.hint(n.GENERATE_MIPMAP_HINT,this.jb(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.Km=i,this.$m=e;const l=di.Fn(this.Km)&&di.Fn(this.$m);if(!this.GS.Ob()&&this.Rb()&&!l)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(l||this.GS.Ob())&&this._b&&(n.hint(n.GENERATE_MIPMAP_HINT,this.jb(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.GS.Pb()}Qb(){if(0<this.g1)throw new Error("texture still has references");if(!this.Tb)throw new Error("already deleted texture");Si.delete(this);const t=this.GS.Nb();t.deleteTexture(this.Tb),this.Tb=null}Vb(){return!!this.Tb}Jb(){return this.Tb}PS(){return this.GS}Yb(){this.g1++}Hb(){if(this.g1<=0)throw new Error("no more references");this.g1--}qb(){return this.g1}pm(){return this.Km}Cm(){return this.$m}Zb(){return this.bb}Xb(){let t=this.Km*this.$m;switch(this.Ib){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this._b&&(t+=Math.floor(t/3)),t}static nT(){Si.clear()}static Kb(){return Si.values()}}}{const Ti=self.Ps,bi=self.Ss,vh=bi._s,xh=bi.vs,xi=new Set(["nearest","bilinear","trilinear"]),vi={pb:"trilinear",alpha:!0,depth:!1,$b:!0,tx:!0,ix:0},Gi=new Set;Ti.oy.hx=class{constructor(t){this.GS=t,this.nx=null,this.ox=null,this.Tb=null,this.ux=null,this.Km=0,this.$m=0,this.mx=!0,this.Gb="trilinear",this.gx=!0,this.yx=!1,this.Mx=!0,this.wx=0,this.Sx=xh.create(),this.Tx=0,this.bx=0,this.xx=0}vx(t,s,i){i=Object.assign({},vi,i);const e=this.GS.Lb();if(this.Tb||this.ux)throw new Error("already created render target");if(this.Gb=i.pb,this.gx=!!i.alpha,this.yx=!!i.depth,this.Mx=!!i.$b,this.mx=!!i.tx,this.wx=i.ix,!xi.has(this.Gb))throw new Error("invalid sampling");if(0<this.wx&&(e<2||this.Mx))throw new Error("invalid use of multisampling");if(e<2&&(this.Mx=!0),this.Km=t,this.$m=s,this.Km<=0||this.$m<=0)throw new Error("invalid render target size");this.Gx();const h=this.GS.Nb();if(this.nx=h.createFramebuffer(),this.yx&&(this.ox=h.createFramebuffer()),this.Mx){this.Tb=this.GS.Cx(this.Km,this.$m,{pb:this.Gb,gb:this.gx?"rgba8":"rgb8",yb:!1});const r=this.Tb.Jb();h.bindFramebuffer(h.FRAMEBUFFER,this.nx),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.yx&&(h.bindFramebuffer(h.FRAMEBUFFER,this.ox),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0))}else{this.ux=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.ux);const o=this.gx?h.RGBA8:h.RGB8;if(0<this.wx){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.wx>l&&(this.wx=l)}else this.wx=0}0===this.wx?h.renderbufferStorage(h.RENDERBUFFER,o,this.Km,this.$m):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.wx,o,this.Km,this.$m),h.bindFramebuffer(h.FRAMEBUFFER,this.nx),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.ux),this.yx&&(h.bindFramebuffer(h.FRAMEBUFFER,this.ox),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.ux)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.GS.Ix();this.yx&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.nx),this.GS._x()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),Gi.add(this)}Ex(t,s){if(this.Km!==t||this.$m!==s){this.Km=t,this.$m=s,this.Gx();const i=this.GS.Nb(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.nx),this.Tb?this.Tb.Wb(new ImageData(this.Km,this.$m)):(i.bindRenderbuffer(i.RENDERBUFFER,this.ux),i.renderbufferStorage(i.RENDERBUFFER,this.gx?i.RGBA8:i.RGB8,this.Km,this.$m),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.GS.Ix());this.yx&&e&&(this.GS._x()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}Qb(){if(!this.Tb&&!this.ux)throw new Error("already deleted render target");Gi.delete(this);const t=this.GS.Nb(),s=(this.Tb?(t.bindFramebuffer(t.FRAMEBUFFER,this.nx),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.yx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.ox),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.GS.Dx(this.Tb),this.Tb=null):this.ux&&(t.bindFramebuffer(t.FRAMEBUFFER,this.nx),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.yx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.ox),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.ux),this.ux=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.GS.Lb()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.nx),this.yx&&t.deleteFramebuffer(this.ox),this.GS.Ax());s.Nx=null,this.nx=s.Lx=null}Gx(){this.GS.DM(this.Sx,this.Km/this.$m),this.Tx=this.GS.CM(),this.bx=this.GS.bM(),this.xx=this.GS.vM()}Ox(){return this.nx}Rx(){return this.ox}PS(){return this.GS}kx(){return this.Tb}Px(){return this.GS.CM()===this.Tx&&this.GS.bM()===this.bx&&this.GS.vM()===this.xx||this.Gx(),this.Sx}Fx(){return"nearest"!==this.Gb}jx(){return this.gx}Bx(){return this.Mx}zx(){return this.yx}pm(){return this.Km}Cm(){return this.$m}Ux(){return this.mx}Wx(){return this.wx}Qx(){const t={pb:this.Gb,alpha:this.gx,$b:this.Mx};return this.mx||(t.width=this.Km,t.height=this.$m),t}Vx(t){return"nearest"!==(t=Object.assign({},vi,t)).pb===this.Fx()&&!!t.alpha===this.jx()&&!!t.depth===this.zx()&&!(2<=this.GS.Lb()&&!!t.$b!==this.Bx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Ux()&&this.pm()===Math.floor(t.width)&&this.Cm()===Math.floor(t.height):this.Ux())}Jx(){return this.Tb?this.Tb.Jb():null}Xb(){return this.Tb?this.Tb.Xb():this.Km*this.$m*(this.gx?4:3)}static async Yx(t,s){const i=await t.Hx(s,!0);return Ti.jo(i)}static nT(){Gi.clear()}static qx(){return Gi.values()}static Zx(t,s){for(const i of Gi)i.Ux()&&i.Ex(t,s)}}}{const m=self.Ps,Ci=self.Ss,vh=Ci._s,xh=Ci.vs,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.oy.Xx=class extends m.oy.vS{static async Kx(t,s){const i=t.Nb(),e=s.src,h=s.$x,n=s.name,r=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(r,e),i.compileShader(r),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.t2());if(l?await t.s2(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Pr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.H1(i.getProgramInfoLog(a)||"").trim();return u&&!m.V1(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(r),i.deleteShader(o),a}static async i2(t,s){const i=await m.oy.Xx.Kx(t,s);return new m.oy.Xx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Nb(),h=t.Ax(),n=(t.uS(),e.useProgram(s),this.e2=e,this.XS=s,this.h2="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),r=e.getAttribLocation(s,"aTex"),o=(this.n2=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.o2),e.vertexAttribPointer(n,t.aS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.a2),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==this.n2&&(e.bindBuffer(e.ARRAY_BUFFER,t.l2),e.vertexAttribPointer(this.n2,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.n2)),e.bindBuffer(e.ARRAY_BUFFER,null),this.u2=new m.oy.c2(this,"matP","mat4"),this.f2=new m.oy.c2(this,"matMV","mat4"),this.d2=new m.oy.c2(this,"color","vec4"),this.m2=new m.oy.c2(this,"samplerFront","sampler"),this.g2=new m.oy.c2(this,"pointTexStart","vec2"),this.M2=new m.oy.c2(this,"pointTexEnd","vec2"),this.w2=new m.oy.c2(this,"zElevation","float"),this.S2=new m.oy.c2(this,"tileSize","vec2"),this.T2=new m.oy.c2(this,"tileSpacing","vec2"),this.b2=new m.oy.c2(this,"color2_","vec4"),this.v2=new m.oy.c2(this,"outlineThickness","float"),this.G2=new m.oy.c2(this,"samplerBack","sampler"),this.C2=new m.oy.c2(this,"samplerDepth","sampler"),this.I2=new m.oy.c2(this,"destStart","vec2"),this._2=new m.oy.c2(this,"destEnd","vec2"),this.E2=new m.oy.c2(this,"srcStart","vec2"),this.D2=new m.oy.c2(this,"srcEnd","vec2"),this.A2=new m.oy.c2(this,"srcOriginStart","vec2"),this.N2=new m.oy.c2(this,"srcOriginEnd","vec2"),this.L2=new m.oy.c2(this,"pixelSize","vec2"),this.O2=new m.oy.c2(this,"seconds","float"),this.R2=new m.oy.c2(this,"devicePixelRatio","float"),this.P2=new m.oy.c2(this,"layerScale","float"),this.F2=new m.oy.c2(this,"layerAngle","float"),this.j2=new m.oy.c2(this,"layoutStart","vec2"),this.B2=new m.oy.c2(this,"layoutEnd","vec2"),this.z2=new m.oy.c2(this,"zNear","float"),this.U2=new m.oy.c2(this,"zFar","float"),this.W2=!!(this.L2.Q2()||this.O2.Q2()||this.G2.Q2()||this.I2.Q2()||this._2.Q2()||this.E2.Q2()||this.D2.Q2()||this.A2.Q2()||this.N2.Q2()||this.R2.Q2()||this.P2.Q2()||this.F2.Q2()||this.j2.Q2()||this.B2.Q2()),i.parameters||[]);this.V2=[],this.RS=this.L2.Q2()||this.E2.Q2()||this.D2.Q2()||this.A2.Q2()||this.N2.Q2(),this.J2=!1,this.Y2=!1,this.d2.H2(1,1,1,1),this.b2.H2(1,1,1,1),this.m2.q2(0),this.G2.q2(1),this.C2.q2(2),this.g2.Z2(0,0),this.M2.Z2(1,1),this.w2.X2(0),this.S2.Z2(0,0),this.T2.Z2(0,0),this.I2.Z2(0,0),this._2.Z2(1,1),this.E2.Z2(0,0),this.D2.Z2(0,0),this.A2.Z2(0,0),this.N2.Z2(0,0),this.L2.Z2(0,0),this.R2.X2(1),this.z2.X2(t.bM()),this.U2.X2(t.vM()),this.P2.X2(1),this.F2.X2(0),this.O2.X2(0),this.j2.Z2(0,0),this.B2.Z2(0,0),this.v2.X2(1);for(const l of o){const u=l[0],c=l[2],f=new m.oy.c2(this,u,c);"color"===c?f.K2(0,0,0):f.X2(0),this.V2.push(f)}this.h2?this.tv(h.sv):(this.hv(h.sv,!0),this.nv(h.rv,!0));const a=h.ov;e.useProgram(a?a.XS:null)}cn(){this.e2.deleteProgram(this.XS),this.XS=null,this.GS.kM(this),this.e2=null,super.cn()}av(){return this.e2}lv(){return this.XS}uv(){return this.V2.length}cv(t){return t<0||t>=this.V2.length?null:this.V2[t].dv()}pv(i){for(let t=0,s=i.length;t<s;++t)if(!this.V2[t].mv(i[t]))return!1;return!0}gv(i){for(let t=0,s=i.length;t<s;++t)this.V2[t].yv(i[t])}Mv(t,s,i,e,h,n,r,o,a,l){return!this.G2.Q2()&&!(this.L2.Q2()&&!this.L2.wv(h,n)||this.I2.Q2()&&!this.I2.wv(t.Cl(),t.Il())||this._2.Q2()&&!this._2.wv(t._l(),t.El())||this.R2.Q2()&&!this.R2.Sv(r)||this.P2.Q2()&&!this.P2.Sv(o)||this.F2.Q2()&&!this.F2.Sv(a)||this.E2.Q2()&&!this.E2.wv(s.Cl(),s.Il())||this.D2.Q2()&&!this.D2.wv(s._l(),s.El())||this.A2.Q2()&&!this.A2.wv(i.Cl(),i.Il())||this.N2.Q2()&&!this.N2.wv(i._l(),i.El())||this.j2.Q2()&&!this.j2.wv(e.Cl(),e.Il())||this.B2.Q2()&&!this.B2.wv(e.Il(),e.El())||this.O2.Q2()&&!this.O2.Sv(l))}Tv(t,s,i,e,h,n,r,o,a,l){this.G2.Q2()||(this.L2.Q2()&&this.L2.bv(h,n),this.I2.Q2()&&this.I2.bv(t.Cl(),t.Il()),this._2.Q2()&&this._2.bv(t._l(),t.El()),this.R2.Q2()&&this.R2.xv(r),this.P2.Q2()&&this.P2.xv(o),this.F2.Q2()&&this.F2.xv(a),this.E2.Q2()&&this.E2.bv(s.Cl(),s.Il()),this.D2.Q2()&&this.D2.bv(s._l(),s.El()),this.A2.Q2()&&this.A2.bv(i.Cl(),i.Il()),this.N2.Q2()&&this.N2.bv(i._l(),i.El()),this.j2.Q2()&&this.j2.bv(e.Cl(),e.Il()),this.B2.Q2()&&this.B2.bv(e.Il(),e.El()),this.O2.Q2()&&this.O2.xv(l))}hv(t,s){this.J2&&!s||this.h2||(this.u2.Q2()&&this.u2.vv(t),this.J2=!0)}Gv(){this.J2=!1}nv(t,s){this.Y2&&!s||this.h2||(this.f2.Q2()&&this.f2.vv(t),this.Y2=!0)}Cv(){this.Y2=!1}tv(t){if(!this.h2)throw new Error("not device transform shader");this.u2.vv(t);const s=this.GS,i=s.pm()/2,e=s.Cm()/2,h=s.OM(i,e,s.yM(s.Cm()),i,e,0,s.Cm());this.f2.vv(h)}Iv(t){this.d2.Q2()&&this.d2._v(t[0],t[1],t[2],t[3])}static Ev(){return Ii}static Dv(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Av(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Nv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static Lv(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Ov(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Rv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static kv(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Pv(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Fv(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static jv(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Bv(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static zv(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Uv(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Wv(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Qv(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static Vv(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Jv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Yv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static Hv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static qv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static Zv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static Xv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const _i=self.Ps,Ei=self.Ss,xh=Ei.vs,Di=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);_i.oy.c2=class{constructor(t,s,i){if(!Di.has(i))throw new Error("invalid uniform type");this.RT=t,this.e2=this.RT.av(),this.mn=s,this.Tf=i,this.Kv="color"===this.Tf,this.$v=this.e2.getUniformLocation(this.RT.lv(),s),this.tG=!!this.$v;const e=Di.get(i);this.sG=new Float32Array(e),this.iG=new Float32Array(e)}cn(){this.RT=null,this.e2=null,this.$v=null}Q2(){return this.tG}dv(){return this.Tf}eG(){return this.Kv}X2(t){this.Q2()&&(this.sG[0]=t,this.iG.set(this.sG),this.e2.uniform1f(this.$v,t))}q2(t){this.Q2()&&(this.sG[0]=t,this.iG.set(this.sG),this.e2.uniform1i(this.$v,t))}Z2(t,s){this.Q2()&&(this.sG[0]=t,this.sG[1]=s,this.iG.set(this.sG),this.e2.uniform2f(this.$v,t,s))}K2(t,s,i){this.Q2()&&(this.sG[0]=t,this.sG[1]=s,this.sG[2]=i,this.iG.set(this.sG),this.e2.uniform3f(this.$v,t,s,i))}H2(t,s,i,e){this.Q2()&&(this.sG[0]=t,this.sG[1]=s,this.sG[2]=i,this.sG[3]=e,this.iG.set(this.sG),this.e2.uniform4f(this.$v,t,s,i,e))}hG(t){t=Math.fround(t);const s=this.sG;s[0]!==t&&(s[0]=t,this.e2.uniform1f(this.$v,t))}nG(t){const s=this.sG;s[0]!==t&&this.e2.uniform1i(this.$v,s[0]=t)}rG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.sG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.e2.uniform2f(this.$v,t,s))}oG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.sG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.e2.uniform3f(this.$v,t,s,i))}_v(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.sG;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.e2.uniform4f(this.$v,t,s,i,e))}vv(t){const s=this.sG;xh.U(s,t)||(_i.zr(s,t,0),this.e2.uniformMatrix4fv(this.$v,!1,t))}mv(t){const s=this.iG;return this.eG()?s[0]===Math.fround(t.ua())&&s[1]===Math.fround(t.ca())&&s[2]===Math.fround(t.fa()):s[0]===Math.fround(t)}yv(t){const s=this.iG;this.eG()?(s[0]=t.ua(),s[1]=t.ca(),s[2]=t.fa()):s[0]=t}Sv(t){return this.iG[0]===Math.fround(t)}wv(t,s){const i=this.iG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}xv(t){this.iG[0]=t}bv(t,s){const i=this.iG;i[0]=t,i[1]=s}}}{const Ai=self.Ps,Ni=self.Ss,Uh=Ni.Es,xh=Ni.vs;Ai.oy.aG=class{constructor(t){this.renderer=t,this.rv=xh.create(),this.sv=xh.create(),this.Nx=null,this.Lx=null,this.lG=!1,this.uG=Uh._(1,1,1,1),this.ov=null,this.cG=new Ai.Rect,this.clearColor=Ai.un(Ai.Ho,0,0,0,0)}},Ai.oy.fG=class{constructor(t){const s=new ArrayBuffer(96);this.Tf=0,this.dG=t,this.e2=t.renderer.Nb(),this.pG=0,this.mG=0,this.gG=null,this.yG=new Float32Array(s,0,16),this.MG=new Float32Array(s,64,4),this.wG=new Float32Array(s,80,4),this.SG=[]}TG(t,s){this.Tf=1,this.pG=t,this.mG=s}bG(){const t=this.e2;t.drawElements(t.TRIANGLES,this.mG,t.UNSIGNED_SHORT,this.pG)}xG(t){this.Tf=2,this.gG=t}vG(){const t=this.e2,s=this.gG;t.bindTexture(t.TEXTURE_2D,s?s.Jb():null)}GG(t){this.Tf=3,t.ma(this.MG,0)}CG(){const t=this.MG,s=this.dG;Uh.I(s.uG,t),s.ov.Iv(t)}IG(t){this.Tf=21,t.ma(this.MG,0)}_G(){const t=this.MG,s=this.dG.ov;s.b2.Q2()&&s.b2._v(t[0],t[1],t[2],t[3])}EG(t,s){this.Tf=4,this.pG=t,this.mG=s}DG(){this.e2.blendFunc(this.pG,this.mG)}AG(t,s,i,e){this.Tf=5;const h=this.MG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}NG(){const t=this.MG;this.e2.viewport(t[0],t[1],t[2],t[3])}LG(t){this.Tf=6,xh.I(this.yG,t)}OG(){const t=this.dG,i=t.renderer.Py,e=t.ov,h=this.yG;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.hv(h,!0):n.Gv()}xh.I(t.sv,h)}kG(t){this.Tf=7,xh.I(this.yG,t)}PG(){const t=this.dG,i=t.renderer.Py,e=t.ov,h=this.yG;for(let t=0,s=i.length;t<s;++t){const n=i[t];n===e?n.nv(h,!0):n.Cv()}xh.I(t.rv,h)}FG(t){this.Tf=8,this.gG=t}jG(){const t=this.e2,s=this.gG,i=this.dG;s?(i.Nx=s.Ox(),i.Lx=s.Rx(),i.lG&&i.Lx?t.bindFramebuffer(t.FRAMEBUFFER,i.Lx):t.bindFramebuffer(t.FRAMEBUFFER,i.Nx)):(i.Nx=null,i.Lx=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}BG(t){this.Tf=9,t.ma(this.yG,0)}zG(t,s,i,e){this.Tf=9;const h=this.yG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}UG(){const t=this.e2,s=this.yG,i=this.dG,e=i.clearColor,h=s[0],n=s[1],r=s[2],o=s[3];e.wa(h,n,r,o)||(t.clearColor(h,n,r,o),e.$o(h,n,r,o)),t.clear(t.COLOR_BUFFER_BIT)}WG(t){this.Tf=15,t.ma(this.yG,0)}QG(){const t=this.yG;this.dG.cG.set(t[0],t[1],t[2],t[3])}VG(t,s){this.Tf=10,this.pG=t,this.mG=1,this.yG[0]=s}JG(){const t=this.e2,s=this.dG,i=s.renderer,e=i.By,h=(t.useProgram(e.XS),e.hv(s.sv,!1),e.nv(s.rv,!1),s.cG),n=(e.g2.Q2()&&e.g2.rG(h.Cl(),h.Il()),e.M2.Q2()&&e.M2.rG(h._l(),h.El()),this.yG[0]);if(e.w2.Q2()&&e.w2.hG(n),e.d2.Q2()){const r=s.uG;e.d2._v(r[0],r[1],r[2],r[3])}t.drawArrays(t.POINTS,this.pG/4,this.mG),t.useProgram(s.ov.XS)}YG(t){this.Tf=11,this.gG=t}HG(){const t=this.e2,s=this.dG,i=this.gG;if(s.ov=i,t.useProgram(i.XS),i.hv(s.sv,!1),i.nv(s.rv,!1),i.d2.Q2()){const e=s.uG;i.d2._v(e[0],e[1],e[2],e[3])}}qG(){this.Tf=12}ZG(){const t=this.dG.ov,s=this.e2,i=this.yG,e=this.MG,h=this.wG;if(t.G2.Q2()){const n=this.dG.renderer,r=this.gG;n.XG!==r&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,r?r.Jb():null),n.XG=r,s.activeTexture(s.TEXTURE0))}t.L2.Q2()&&t.L2.rG(i[0],i[1]),t.I2.Q2()&&t.I2.rG(i[2],i[3]),t._2.Q2()&&t._2.rG(i[4],i[5]),t.R2.Q2()&&t.R2.hG(this.mG),t.P2.Q2()&&t.P2.hG(i[6]),t.F2.Q2()&&t.F2.hG(i[7]),t.E2.Q2()&&t.E2.rG(i[12],i[13]),t.D2.Q2()&&t.D2.rG(i[14],i[15]),t.A2.Q2()&&t.A2.rG(h[0],h[1]),t.N2.Q2()&&t.N2.rG(h[2],h[3]),t.j2.Q2()&&t.j2.rG(e[0],e[1]),t.B2.Q2()&&t.B2.rG(e[2],e[3]),t.O2.Q2()&&t.O2.hG(this.pG)}KG(){this.Tf=13}$G(){const t=this.dG.ov,i=t.V2,e=this.SG;for(let t=0,s=i.length;t<s;++t){const h=i[t],n=e[t];h.eG()?h.oG(n.ua(),n.ca(),n.fa()):h.hG(n)}}tC(t){this.Tf=14,this.gG=t}sC(){const t=this.e2,s=this.gG,i=this.dG.Nx;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}iC(t,s,i){this.Tf=17;const e=this.yG,h=this.dG.renderer,n=(e[0]=t.pm(),e[1]=t.Cm(),e[2]=(s||h).pm(),e[3]=(s||h).Cm(),e[4]=t.Fx()?1:0,e[5]="stretch"===i,this.SG);Ai.Wr(n),n.push(t.Ox()),n.push(s?s.Ox():null)}eC(){const t=this.yG,s=this.SG,i=this.e2,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,n),f=Math.min(h,r),d=Math.max(h-r,0),p=Math.max(r-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}hC(t){this.Tf=18,this.gG=t}nC(){this.gG.rC(),this.gG=null}oC(t){this.Tf=19,this.gG=t}aC(){this.gG.lC(),this.gG=null}uC(t,s,i){this.Tf=20;const e=this.yG;e[0]=t,e[1]=s,e[2]=i}cC(){const t=this.dG.ov,s=this.yG;t.L2.Q2()&&t.L2.rG(s[0],s[1]),t.v2.Q2()&&t.v2.hG(s[2])}fC(t,s,i,e,h,n,r){this.Tf=16;const o=this.yG;t.ma(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}dC(){const t=this.dG.ov,s=this.yG;t.E2.Q2()&&t.E2.rG(s[0],s[1]),t.L2.Q2()&&t.L2.rG(s[4],s[5]),t.S2.Q2()&&t.S2.rG(s[6],s[7]),t.T2.Q2()&&t.T2.rG(s[8],s[9])}pC(t,s,i,e,h,n,r){this.Tf=29;const o=this.yG;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}mC(){const t=this.dG.ov,s=this.yG;t.L2.Q2()&&t.L2.rG(s[0],s[1]),t.S2.Q2()&&t.S2.rG(s[2],s[3]),t.v2.Q2()&&t.v2.hG(s[4]),t.T2.Q2()&&t.T2.rG(s[5],s[6])}gC(t){this.Tf=22,this.pG=t?1:0}yC(){const t=this.e2,s=0!==this.pG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}MC(t){this.Tf=23,this.pG=t?1:0}wC(){const t=this.e2;0===this.pG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}SC(t){this.Tf=24,this.pG=t?1:0}TC(){const t=this.e2,s=this.dG,i=s.renderer,e=0!==this.pG;s.lG=e,t.activeTexture(t.TEXTURE2),e?(s.Lx&&t.bindFramebuffer(t.FRAMEBUFFER,s.Lx),t.bindTexture(t.TEXTURE_2D,i.Ix())):(t.bindTexture(t.TEXTURE_2D,null),s.Lx&&t.bindFramebuffer(t.FRAMEBUFFER,s.Nx)),t.activeTexture(t.TEXTURE0)}bC(){this.Tf=25}xC(){const t=this.e2;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}vC(){this.Tf=26}GC(){const t=this.e2;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}CC(){this.Tf=27}IC(){const t=this.e2;t.disable(t.STENCIL_TEST)}_C(t,s,i,e,h){this.Tf=28,this.pG=t?1:0;const n=this.yG;n[0]=s,n[1]=i,n[2]=e,n[3]=h}EC(){const t=this.e2,s=this.yG;1===this.pG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}DC(){switch(this.Tf){case 1:return void this.bG();case 2:return void this.vG();case 3:return void this.CG();case 4:return void this.DG();case 5:return void this.NG();case 6:return void this.OG();case 7:return void this.PG();case 8:return void this.jG();case 9:return void this.UG();case 10:return void this.JG();case 11:return void this.HG();case 12:return void this.ZG();case 13:return void this.$G();case 14:return void this.sC();case 15:return void this.QG();case 16:return void this.dC();case 17:return void this.eC();case 18:return void this.nC();case 19:return void this.aC();case 20:return void this.cC();case 21:return void this._G();case 22:return void this.yC();case 23:return void this.wC();case 24:return void this.TC();case 25:return void this.xC();case 26:return void this.GC();case 27:return void this.IC();case 28:return void this.EC();case 29:return void this.mC()}}}}{let I=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Li=self.Ps,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},ki=new Li.Ho(0,0,0,1),Pi=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),Bi=new Set(["ltr","rtl"]),zi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.ef();for(const i of zi)(i.AC()||Li.gh(i.NC(),s))&&i.LC()});let s=!1,i=!1;Li.oy.xS=class{constructor(t,s){s=Object.assign({},Ri,s),this.GS=t,this.OC="Arial",this.RC=16,this.kC=1,this.PC=0,this.FC=!1,this.jC=!1,this.BC="black",this.zC=!1,this.rm=null,this.UC=!0,this.WC=null,this.QC=new Set,this.VC="left",this.JC="top",this.pf="",this.YC=null,this.HC=Li.un(Li.hm),this.qC="word",this.ZC="ltr",this.XC=!1,this.KC=!1,this.$C=!1,this.tI=-1,this.sI=0,this.iI=0,this.eI=0,this.Km=0,this.$m=0,this.hI=1,this.nI=null,this.rI=null,this.oI=null,this.aI=null,this.lI=-1,this.uI=-1,this.cI="",this.fI="",this.dI="",this.pI=1,this.mI=1,this.gI=t=>this.yI(t),this.Tb=null,this.MI=new Li.Rect,this.wI=1,this.SI=new Li.a0(()=>{this.TI(),this.bI(8,8)},s.timeout),this.xI=null,this.vI=!1,zi.add(this)}cn(){this.WC=null,this.QC.clear(),this.rm=null,this.YC=null,this.nI=null,this.rI=null,this.oI=null,this.aI=null,this.gI=null,this.SI.cn(),this.xI=null,this.TI(),this.HC.hc(),this.HC=null,this.GS=null,this.vI=!0,zi.delete(this)}GI(){this.$C=!0}CI(){this.GI(),this.KC=!0}LC(){this.CI(),this.XC=!0}II(t){if(this.zC!==(t=!!t)){this.zC=t;const s=this.zC?"alphabetic":"top";this.rI&&(this.rI.textBaseline=s),this.oI&&(this.oI.textBaseline=s),this.LC()}}AC(){return this.zC}um(t){this.rm!==t&&(this.rm=t,this.HC.um(t),this.rm&&this.rm.Jg()&&this.rm.Yg().then(()=>this.GI()),this.LC())}_I(t){this.UC!==(t=!!t)&&(this.UC=t,this.GI())}EI(t){this.OC!==(t=t||"serif")&&(this.OC=t,this.LC())}NC(){return this.OC}DI(t){this.RC!==(t=t<.1?.1:t)&&(this.RC=t,this.LC())}AI(){return this.RC}NI(t){this.kC!==t&&(this.kC=t,this.LC())}LI(t){this.PC!==t&&(this.PC=t,this.CI())}OI(){return this.PC}RI(t){this.FC!==(t=!!t)&&(this.FC=t,this.LC())}kI(){return this.FC}FI(t){this.jC!==(t=!!t)&&(this.jC=t,this.LC())}jI(){return this.jC}BI(t){t=Math.floor(t),this.tI!==t&&(this.tI=t,this.GI())}zI(){return this.tI}UI(t,s){let i=[];(this.FC||s.mg("b"))&&i.push("bold"),(this.jC||s.mg("i"))&&i.push("italic");const e=s.pg("size"),h=(e?parseFloat(e.param):this.RC)*this.kC;i.push(t?h+"pt":h*this.WI()+"pt");let n=this.OC,r=s.pg("font");return r&&r.param&&(n=r.param,this.WC)&&!this.QC.has(n)&&(this.WC(n),this.QC.add(n)),n&&(Oi.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}hT(t){t instanceof Li.Ho&&(t=t.Ia()),this.BC!==t&&(this.BC=t,this.GI())}QI(t,s,i){ki.ta(t,s,i),this.hT(ki)}VI(t){if(!Pi.has(t))throw new Error("invalid horizontal alignment");this.VC!==t&&(this.VC=t,this.CI())}JI(){return this.VC}YI(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this.JC!==t&&(this.JC=t,this.CI())}HI(){return this.JC}qI(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.qC!==t&&(this.qC=t,this.LC())}ZI(){return this.qC}XI(t){if(!Bi.has(t))throw new Error("invalid text direction");this.ZC!==t&&(this.ZC=t,this.rI&&(this.rI.direction=this.ZC),this.oI&&(this.oI.direction=this.ZC),this.LC())}KI(){return this.ZC}yf(t){this.pf!==t&&(this.pf=t,this.LC())}$I(){return this.pf}WI(){return this.wI*this.hI*self.devicePixelRatio}t_(n,r,o){if(void 0===o&&(o=1),!(n<=0||this.iI===n&&this.eI===r&&this.hI===o)){let t=this.iI,s=(this.iI=n,this.eI=r,this.hI=o,self.devicePixelRatio),i=(this.Km=this.iI*this.hI*s,this.$m=this.eI*this.hI*s,Math.max(this.Km,this.$m)),e=Math.min(this.GS.Ab(),4096),h=1;e<i&&(h=e/i,this.Km=Math.min(this.Km*h,e),this.$m=Math.min(this.$m*h,e)),this.wI=h,this.iI!==t?this.LC():this.CI()}}pm(){return this.Km}Cm(){return this.$m}s_(){return this.hI}i_(){return this.e_(),this.HC.Zm()}h_(){return this.e_(),this.HC.Xm()+this.HC.lm()*(this.PC+4)-this.PC}n_(){this.e_();let t=0;for(const s of this.HC.om())for(const i of s.Nm())t+=i.Lm();return t}kx(){return this.SI.d0(),this.r_(),this.Tb}o_(t,s){this.e_();const i=this.WI(),e=this.HC.om();for(const h of e){const n=h._m()*i;if(s>=h.ug()-h.Cm()*i+n&&s<h.ug()+n)for(const r of h.Nm())if(t>=r.ag()&&t<r.ag()+r.pm()*i)return r}return null}*a_(t){this.e_();const s=this.HC.om();for(const i of s)for(const e of i.Nm()){const h=e.pg("tag");h&&Li.gh(h.param,t)&&(yield e)}}l_(t,s){for(const i of this.a_(t)){if(0===s)return i;--s}return null}u_(t){let s=0;for(const i of this.a_(t))++s;return s}r_(){this.Tb&&!this.$C&&!this.KC&&!this.XC||this.vI||this.Km<=0||this.$m<=0||(this.$C=!1,this.c_())}c_(){this.vI||(this.e_(),this.bI(Math.max(Li.jn(Math.ceil(this.Km)),128),Math.max(Li.jn(Math.ceil(this.$m)),64)),this.f_(),this.d_(),this.SI.d0())}bI(t,s){this.nI||(this.nI=Li.ko(16,16));let i=!1;this.lI===t&&this.uI===s||(this.lI=t,this.uI=s,this.nI.width=t,this.nI.height=s,i=!0),this.rI||(this.rI=this.nI.getContext("2d"),i=!0),i?(this.rI.textBaseline=this.zC?"alphabetic":"top",this.rI.direction=this.ZC,this.rI.font=this.cI,this.rI.fillStyle=this.dI,this.rI.strokeStyle=this.dI,this.rI.globalAlpha=this.pI,this.rI.lineWidth=this.mI):this.rI.clearRect(0,0,t,s)}p_(){this.oI||(this.oI=Li.ko(16,16).getContext("2d"),this.aI=Li.ko(16,16).getContext("2d"),this.oI.textBaseline=this.zC?"alphabetic":"top",this.aI.textBaseline="top",this.oI.direction=this.ZC,this.aI.direction=this.ZC)}m_(t){this.fI!==t&&(this.fI=t,this.oI.font=t,this.aI.font=t)}g_(){if(!s){s=!0,this.p_();const t=this.oI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}e_(){this.y_(),this.M_()}y_(){this.XC&&(this.p_(),!this.zC||this.YC&&this.YC.toString()===this.pf||(this.YC=new Li.Dh(this.pf,{Pp:!0})),this.HC.hm(this.zC?this.YC.Hp():this.pf,this.gI,this.iI,this.qC,0),this.XC=!1)}M_(){this.KC&&(this.w_(),this.KC=!1)}yI(t){let s=t.Tm()?t.Bm().join(""):" ",i=(this.m_(this.UI(!0,t)),t.pg("size")),e=(i?parseFloat(i.param):this.RC)*this.kC,h=this.oI.measureText(s),n=0;if(this.zC&&this.g_()){const r=this.aI.measureText(s);n=h.fontBoundingBoxAscent-r.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Sm:n}}S_(t){this.cI!==t&&(this.cI=t,this.rI.font=t)}T_(t){this.dI!==t&&(this.dI=t,this.rI.fillStyle=t,this.rI.strokeStyle=t)}b_(t){this.pI!==t&&(this.pI=t,this.rI.globalAlpha=t)}x_(t){this.mI!==t&&(this.mI=t,this.rI.lineWidth=t)}w_(){let e=this.WI(),h=(4+this.PC)*e,n=0,r=this.HC.om();if(0!==r.length){for(const s of r){s.og(NaN),s.lg(NaN);for(const o of s.Nm())o.og(NaN),o.lg(NaN)}let t=this.zC&&this.g_(),i=r[0].Cm()*e;if("center"===this.JC){const a=r.reduce((t,s)=>t+s.Cm()*e+h,0)-h;n=Math.max(this.$m/2-a/2,0),t&&(i=r[0].Em()*e)}else if("bottom"===this.JC){const l=r.reduce((t,s)=>t+s.Cm()*e+h,0)-this.PC*e,u=t?r.at(-1)._m()*e:0;n=this.$m-l-u-2}for(let t=0,s=r.length;t<s;++t){const c=r[t],f=c.Cm()*e,d=n;if(this.zC){if(n+=0===t?i:f,0<t&&n>this.$m-4*e)break}else if(0<t&&n>=this.$m-f)break;0<=d&&this.v_(c,n,e),this.zC||(n+=f),n+=h}}}v_(t,s,i){let e=0;"center"===this.VC?e=Math.floor((this.Km-t.pm()*i)/2):"right"===this.VC&&(e=this.Km-t.pm()*i),t.og(e),t.lg(s);for(const h of"ltr"===this.ZC?t.Nm():t.ng())this.G_(h,e,s,i),e+=h.pm()*i}G_(t,s,i,e){const h=t.pg("offsetx"),n=(s+=h?o(h.param,t.Cm())*e:0,t.pg("offsety"));if(i+=n?o(n.param,t.Cm())*e:0,t.vm()){const r=t.pg("iconoffsety");i+=r?o(r.param,t.Cm())*e:.2*t.Cm()*e}t.og(s),t.lg(i)}f_(){this.rI.imageSmoothingEnabled=this.UC,this.rI.imageSmoothingQuality="high",this.sI=0;const t=this.WI(),s=this.HC.om();for(const i of s)this.C_(i,t)}C_(t,s){const i=t.ag(),e=t.ug();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.ZC?t.Nm():t.ng())this.I_(h,s,t.Cm())}I_(r,o,a){const l=this.rI,u=r.ag(),c=r.ug();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=r.pm()*o,i=r.Cm()*o,e=r.Cm()/16,h=(4+this.PC)*o,n=r.Tm()?r.Bm():null;if(-1!==this.tI){if(this.sI>=this.tI)return;r.Tm()&&this.sI+n.length>this.tI&&(n=n.slice(0,this.tI-this.sI),s=this.yI(r).width*o),this.sI+=r.Lm()}const f=r.pg("background"),d=r.mg("u"),p=r.mg("s");if((!r.Tm()||!Li.J1(n)||f||d||p)&&!r.mg("hide")){const m=r.pg("color"),g=r.pg("opacity"),y=(this.b_(g?parseFloat(g.param)/100:1),f&&(this.T_(f.param),l.fillRect(u,c-i,s,i+h)),r.pg("linethickness")),M=y?parseFloat(y.param):1,w=r.mg("stroke");if(w&&this.x_(.5*e*M*this.WI()),r.Tm()){const S=n.join("");if(this.S_(this.UI(!1,r)),!w){this.x_(.5*e*M*this.WI());const T=r.pg("outlineback");T&&(this.T_(T.param),this.__(!0,S,u,c,s))}if(this.T_(m?m.param:this.BC),this.__(w,S,u,c,s),!w){this.x_(.5*e*M*this.WI());const b=r.pg("outline");b&&(this.T_(b.param),this.__(!0,S,u,c,s))}}else if(r.vm()&&0<r.pm()){const x=r.xg(this.rm);x&&l.drawImage(x,u,c-i,s,i)}if(this.T_(m?m.param:this.BC),d&&I(l,w,u,c+o*t,s,o*t*M),p){const v=c-i/4,G=o*e,C=v+G/2;l.fillRect(u,C-G*M/2,s,G*M)}}}}__(t,s,i,e,h){"rtl"===this.ZC&&(i+=h),t?"Gecko"===Li.li.yi?this.rI.strokeText(s,i,e,h):this.rI.strokeText(s,i,e):"Gecko"===Li.li.yi?this.rI.fillText(s,i,e,h):this.rI.fillText(s,i,e)}d_(){this.GS.E_()||(this.Tb||(this.Tb=this.GS.Cx(this.nI.width,this.nI.height,{yb:!0,Mb:"high"})),this.GS.D_(this.nI,this.Tb),this.MI.set(0,0,this.Km/this.Tb.pm(),this.$m/this.Tb.Cm()),this.xI&&this.xI())}A_(){return this.MI}TI(){this.Tb&&(this.GS.E_()||this.GS.Dx(this.Tb),this.Tb=null)}static nT(){for(const t of zi)t.TI()}static N_(){return zi.values()}}}{const Ui=self.Ps;class Wi{constructor(t){this.e2=t.Nb(),this.L_=t.Lb(),this.O_=t.R_(),this.k_=null,this.f0=!1,this.P_=!1,this.F_=0,1===this.L_?this.k_=this.O_.createQueryEXT():this.k_=this.e2.createQuery()}cn(){this.j_(),this.e2=null,this.O_=null,this.P_=!1}j_(){this.k_&&(1===this.L_?this.O_.deleteQueryEXT(this.k_):this.e2.deleteQuery(this.k_),this.k_=null)}rC(){if(this.f0)throw new Error("query already active");1===this.L_?this.O_.beginQueryEXT(this.O_.TIME_ELAPSED_EXT,this.k_):this.e2.beginQuery(this.O_.TIME_ELAPSED_EXT,this.k_),this.f0=!0}lC(){if(!this.f0)throw new Error("query not active");1===this.L_?this.O_.endQueryEXT(this.O_.TIME_ELAPSED_EXT):this.e2.endQuery(this.O_.TIME_ELAPSED_EXT),this.f0=!1}B_(){if(this.k_&&!this.P_&&!this.f0){let t;t=1===this.L_?this.O_.getQueryObjectEXT(this.k_,this.O_.QUERY_RESULT_AVAILABLE_EXT):this.e2.getQueryParameter(this.k_,this.e2.QUERY_RESULT_AVAILABLE);const s=this.e2.getParameter(this.O_.GPU_DISJOINT_EXT);t&&!s&&(1===this.L_?this.F_=this.O_.getQueryObjectEXT(this.k_,this.O_.QUERY_RESULT_EXT):this.F_=this.e2.getQueryParameter(this.k_,this.e2.QUERY_RESULT),this.F_/=1e9,this.P_=!0),(t||s)&&this.j_()}}z_(){return this.P_}U_(){if(this.P_)return this.F_;throw new Error("no result available")}}Ui.oy.W_=class{constructor(t){this.GS=t,this.lM=t.cS(),this.f0=!1,this.Q_=null,this.V_=!1,this.J_=null,this.Y_=[]}cn(){for(const t of this.Y_)t instanceof Wi&&t.cn();Ui.Wr(this.Y_),this.Q_=null,this.J_=null,this.GS=null}rC(){if(this.f0)throw new Error("query already active");const t=this.GS.H_();0<t.length?(this.V_=!0,this.Q_=t.at(-1),this.Q_.q_(),this.Q_.Y_.push(this)):(this.V_=!1,this.Q_=null),this.f0=!0,t.push(this),this.Z_()}lC(){if(!this.f0)throw new Error("query not active");const t=this.GS.H_().pop();if(t!==this)throw new Error("can only end most nested query");this.f0=!1,this.q_(),this.Q_&&(this.Q_.Z_(),this.Q_=null)}Z_(){this.J_=Ui.un(Wi,this.GS),this.Y_.push(this.J_),this.J_.rC()}q_(){this.J_.lC(),this.J_=null}B_(){for(const t of this.Y_)t.B_()}X_(){return this.V_}z_(){return this.Y_.every(t=>t.z_())}U_(){return this.Y_.reduce((t,s)=>t+s.U_(),0)}cS(){return this.lM}}}{const Qi=self.Ps;Qi.oy.K_=class{constructor(t,s=1e3){this.GS=t,this.tE=s,this.sE=[],this.GS.iE(this)}cn(){this.hc(),this.GS.eE(this),this.GS=null}hc(){for(const t of this.sE)t.cn();Qi.Wr(this.sE)}hE(){const t=new Qi.oy.W_(this.GS);if(this.sE.push(t),this.sE.length>this.tE){const s=this.sE.shift();s.cn()}return t}nE(t){for(const s of this.sE){if(s.cS()>=t)return;if(s.X_())return;s.B_()}}rE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.sE){if(e.cS()>=s)break;if(!(e.cS()<t)){if(!e.z_())return NaN;i+=e.U_()}}return i}oE(i){for(let t=0,s=this.sE.length;t<s;++t){const e=this.sE[t];if(!(e.cS()<i))return void(0<t&&this.sE.splice(0,t));e.cn()}}}}{let i=function(){h=-1;for(const t of e)t.aE()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.Ps),t=self.Ss,T=(t._s,t.Es),y=t.vs,n={powerPreference:"default",lE:!0,alpha:!1,depth:!1,uE:!1,cE:2,failIfMajorPerformanceCaveat:!1},r=new Set(["default","low-power","high-performance"]),c=new S.iu(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.iu,x=new S.Rect,v=null,e=(S.isDebug&&(self.fE=function(){v?v.loseContext():console.warn("WEBGL_lose_context not supported")},self.dE=function(){v?v.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.oy.pE=class extends S.oy.Ey{constructor(t,s){if(super(s),s=Object.assign({},n,s),!r.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.cE&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.e2=e,this.mE=e.getContextAttributes(),this.gE=e.getParameter(e.VERSION),this.L_=h,this.yE=T.create(),this.ME=!1,this.wE=y.create(),this.SE=!!s.depth,this.TE=!(!s.depth||!s.uE),this.bE=this.SE,this.xE=!1,this.vE=null,this.GE=!0,this.CE=0,this.IE=0,this.o2=null,this.a2=null,this._E=null,this.l2=null,this.EE=new Float32Array(8e3*this.aS()),this.DE=new Uint16Array(12e3),this.AE=new Float32Array(16e3),this.NE=new Float32Array(32e3),this.LE=0,this.OE=0,this.RE=0,this.kE=0,this.PE=null,this.FE=null,this.jE=[],this.BE=0,this.zE=0,this.UE=null,this.WE=0,this.dG=S.un(S.oy.aG,this),this.QE=S.un(S.Ho,1,1,1,1),this.VE=null,this.XG=null,this.JE=0,this.YE=0,this.HE=new S.Rect,this.qE=S.un(S.Rect,0,0,-1,-1),this.ZE=0,this.XE=-1,this.KE=0,this.$E=0,this.tD=0,this.sD="(unavailable)",this.iD="(unavailable)",this.eD=[],this.hD=!1,this.nD=null,this.rD=null,this.oD=null,this.aD=null,this.lD=null,this.uD=null,this.cD=0,this.fD=!!s.lE,this.O_=null,this.dD=new Set,this.pD=[],this.fM(this.DE)}yS(){return!0}async mM(){super.mM();const t=this.e2,s=this.aS(),i=(this.QE.$o(1,1,1,1),this.VE=null,this.XG=null,this.LE=0,this.RE=0,this.kE=8e3*s-4*s,S.Wr(this.jE),this.BE=0,this.zE=0,this.PE=null,this.UE=null,this.HE.set(0,0,1,1),this.WE=0,this.dG),e=(i.ov=null,i.Nx=null,i.Lx=null,T.set(i.uG,1,1,1,1),i.clearColor.$o(0,0,0,0),i.cG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.JE=t.ONE,this.YE=t.ONE_MINUS_SRC_ALPHA,this.mD(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.SE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.bE=this.SE,this.xE=!1,this.l2=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.l2),t.bufferData(t.ARRAY_BUFFER,this.NE.byteLength,t.DYNAMIC_DRAW),this.o2=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.o2),t.bufferData(t.ARRAY_BUFFER,this.EE.byteLength,t.DYNAMIC_DRAW),this.a2=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.a2),t.bufferData(t.ARRAY_BUFFER,this.AE.byteLength,t.DYNAMIC_DRAW),this._E=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._E),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.DE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.XE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.KE=e[0],this.$E=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),n=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),r=(this.tD=h&&n?Math.min(h.precision,n.precision):0,2048<this.$E&&(this.$E=2048),this.eD=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(r&&(this.sD=t.getParameter(r.UNMASKED_VENDOR_WEBGL),this.iD=t.getParameter(r.UNMASKED_RENDERER_WEBGL)),this.nD=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(v=t.getExtension("WEBGL_lose_context")),this.fD&&(1===this.Lb()?this.O_=t.getExtension("EXT_disjoint_timer_query"):this.O_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.rD=t.getExtension("EXT_texture_filter_anisotropic"),this.rD?this.cD=t.getParameter(this.rD.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.cD=0,this.Lb()<2&&this.SE&&this.TE&&(this.oD=t.getExtension("WEBGL_depth_texture"),!this.oD))throw new Error("no depth texture support");this.Lb()<2&&(this.aD=t.getExtension("EXT_frag_depth"),this.lD=t.getExtension("OES_standard_derivatives"),this.uD=t.getExtension("EXT_shader_texture_lod"));let o=S.oy.Xx,a=o.Dv(!1),l=o.Nv(),u=a,c=o.zv(),f=o.jv(),d=o.Rv(),p=o.Dv(!0),m=!1;this.SE&&(this.Lb()<2?this.aD&&(l=o.Lv(),c=o.Uv(),d=o.kv(),m=!0):(u=o.Av(),l=o.Ov(),c=o.Wv(),f=o.Bv(),d=o.Pv(),p=o.Av(!0)));const g=o.Fv(this.Lb(),m,this.lD&&this.uD),y=2<=this.Lb()?o.Av():a,M=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.Qv(),a,"<fill>"],[o.Vv(),a,"<lineargradient>"],[o.Jv(),a,"<penumbra>"],[o.Hv(),a,"<hardellipse>"],[o.qv(),a,"<hardellipseoutline>"],[o.Zv(),a,"<smoothellipse>"],[o.Xv(),a,"<smoothellipseoutline>"],[o.Yv(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.gD({src:t[0],$x:t[1],name:t[2]})));this.jy=w[0],this.FE=w[1],this.By=w[2],this.Wy=w[3],this.Qy=w[4],this.Vy=w[5],this.Jy=w[6],this.Yy=w[7],this.Hy=w[8],this.qy=w[9],this.Zy=w[10],this.zy=w[11],this.Uy=w[12],this.jM()}async gD(t){const s=await S.oy.Xx.i2(this,t);return this.RM(s),s}yD(){this.PE=null}t_(t,s,i){if(this.Km!==t||this.$m!==s||i){this.uS();const e=this.e2,h=this.dG;this.Km=t,this.$m=s,this.MD(0,0,t,s),this.DM(this.wE,t/s),this.wD(this.wE),this.FE&&(e.useProgram(this.FE.lv()),this.FE.tv(this.Ny),this.PE=this.FE,this.dG.ov=this.FE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.VE=null,this.XG=null,this.SE&&this.GE&&this.SD(this.Km,this.$m),this.UE&&this.UE.Ex(this.Km,this.$m),e.bindFramebuffer(e.FRAMEBUFFER,null),this.UE=null,h.Nx=null,h.Lx=null}}SD(t,s){const i=this.e2;this.vE&&this.CE===t&&this.IE===s||(this.TE?(this.vE&&i.deleteTexture(this.vE),this.vE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.vE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.Lb()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.oD&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.oD.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.vE&&i.deleteRenderbuffer(this.vE),this.vE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.vE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.L_?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.CE=t,this.IE=s)}TD(t,s){this.SE&&(this.GE=!1,this.SD(t,s))}bD(){this.SE&&(this.GE=!0,this.SD(this.Km,this.$m))}MD(t,s,i,e){const h=this.yE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const n=this.xD();n.AG(t,s,i,e),T.set(h,t,s,i,e),this.zE=0}}GM(t){super.GM(t),this.DM(this.wE,this.Km/this.$m)}TM(t){super.TM(t),this.DM(this.wE,this.Km/this.$m)}xM(t){super.xM(t),this.DM(this.wE,this.Km/this.$m)}wD(t){if(!y.U(this.Ny,t)){const s=this.xD();s.LG(t),y.I(this.Ny,t),this.zE=0,this.ME=!0}}vD(){let t,s,i,e=this.UE;i=(null===e?(t=this.wE,s=this.pm(),this):(t=e.Px(),s=e.pm(),e)).Cm(),this.wD(t),this.MD(0,0,s,i)}GD(t){if(!y.U(this.Ly,t)){const s=this.xD();s.kG(t),y.I(this.Ly,t),this.zE=0,this.ME=!0}}CD(){this.ME=!1}ID(){return this.ME}Ax(){return this.dG}xD(){const t=this.jE;return this.BE===t.length&&t.push(new S.oy.fG(this.dG)),t[this.BE++]}uS(){0===this.BE||this.E_()||(this._D(),this.ED(),this.BE=0,this.LE=0,this.OE=0,this.RE=0,this.zE=0)}_D(){const t=this.e2;0<this.RE&&(t.bindBuffer(t.ARRAY_BUFFER,this.l2),t.bufferSubData(t.ARRAY_BUFFER,0,this.NE.subarray(0,this.RE))),0<this.LE&&(t.bindBuffer(t.ARRAY_BUFFER,this.o2),t.bufferSubData(t.ARRAY_BUFFER,0,this.EE.subarray(0,this.LE)),t.bindBuffer(t.ARRAY_BUFFER,this.a2),t.bufferSubData(t.ARRAY_BUFFER,0,this.AE.subarray(0,this.OE)))}ED(){const i=this.jE;for(let t=0,s=this.BE;t<s;++t)i[t].DC()}DD(){return this.QE.da()}AD(t,s,i,e){const h=this.QE;if(!h.wa(t,s,i,e)){h.$o(t,s,i,e);const n=this.xD();n.GG(h),this.zE=0,this.Ky=null}}ND(t){const s=this.QE;if(s.da()!==t){s.aa(t);const i=this.xD();i.GG(s),this.zE=0,this.Ky=null}}hT(t){const s=this.QE;if(!s.equals(t)){s.set(t);const i=this.xD();i.GG(s),this.zE=0,this.Ky=null}}LD(){this.AD(1,1,1,1)}OD(){return this.QE}RD(t){if(t!==this.VE){const s=this.xD();s.xG(t),this.VE=t,this.zE=0}}Pb(){this.VE=null}eT(t){const s=this.mw(t);this.kD(s[0],s[1])}PD(t){const s=this.Mw(t);this.kD(s.dw,s.pw)}kD(t,s){if(t!==this.JE||s!==this.YE){const i=this.xD();i.EG(t,s),this.JE=t,this.YE=s,this.zE=0,this.Ky=null}}FD(){return this.JE===this.e2.ONE&&this.YE===this.e2.ONE_MINUS_SRC_ALPHA}jD(){this.kD(this.e2.ONE,this.e2.ONE_MINUS_SRC_ALPHA)}BD(){this.kD(this.e2.SRC_ALPHA,this.e2.ONE_MINUS_SRC_ALPHA)}zD(){this.kD(this.e2.ONE,this.e2.ZERO)}Rect(t){this.UD(t.Cl(),t.Il(),t._l(),t.El())}UD(t,s,i,e){this.oS(t,s,i,s,i,e,t,e)}WD(){let t=this.LE;if(t>=this.kE&&(this.uS(),t=0),1===this.zE)this.jE[this.BE-1].mG+=6;else{const s=this.xD();s.TG(t,6),this.zE=1}}QD(t){t.bu(this.EE,this.LE,this.sM+this.iM),this.LE+=12}iu(t){this.WD(),this.QD(t),c.ma(this.AE,this.OE),this.OE+=8}oS(t,s,i,e,h,n,r,o){this.WD();let a=this.EE,l=this.LE,u=this.sM+this.iM;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=n,a[l++]=u,a[l++]=r,a[l++]=o,a[l++]=u,this.LE=l,c.ma(this.AE,this.OE),this.OE+=8}Ow(t,s){this.WD(),this.QD(t),s.Nl(this.AE,this.OE),this.OE+=8}VD(t,s){this.WD(),this.QD(t),s.ma(this.AE,this.OE),this.OE+=8}JD(t,s,i,e,h,n,r,o,a,l,u,c,f){this.WD();let d=this.EE,p=this.LE,m=this.sM+this.iM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.LE=p,f.Nl(this.AE,this.OE),this.OE+=8}Ew(t,s,i,e,h,n,r,o,a,l,u,c,f){this.WD();let d=this.EE,p=this.LE,m=this.sM+this.iM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+n,d[p++]=r,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.LE=p,f.ma(this.AE,this.OE),this.OE+=8}YD(e,h,n){const r=this.EE,o=this.AE;if(n.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=n.length;i<t;){const a=n[i++],l=n[i++],u=n[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.WD();let t=this.LE,s=this.OE;r[t++]=e[0+c],r[t++]=e[1+c],r[t++]=e[2+c],r[t++]=e[0+f],r[t++]=e[1+f],r[t++]=e[2+f],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],r[t++]=e[0+d],r[t++]=e[1+d],r[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.LE=t,this.OE=s}}HD(t,s){this.bw(0),y.I(M,this.Ny),y.I(w,this.Ly),this.vD();const[i,e]=this.qD(this.UE),h=this.OM(0,0,this.yM(e),0,0,0,e);if(this.GD(h),"crop"===t&&this.UE&&s){const n=this.Km/2,r=this.$m/2,o=s.pm(),a=s.Cm(),l=this.UE.pm(),u=this.UE.Cm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-n,r-p,-n+c,r-f-p),b.xu(x),x.set(0,d,c,f+d),x._t(o,a),this.Ow(b,x)}else{const m=i/2,g=e/2;this.UD(-m,g,m,-g)}this.wD(M),this.GD(w)}ZD(t){if(!this.HE.equals(t)){this.HE.I(t);const s=this.xD();s.WG(t),this.zE=0}}XD(){}KD(t,s,i,e){7996<=this.RE&&this.uS();let h=this.RE,n=this.sM+this.iM;if(2===this.zE&&this.WE===n)this.jE[this.BE-1].mG++;else{const o=this.xD();o.VG(h,n),this.zE=2,this.WE=n}const r=this.NE;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.RE=h}BM(t){if(this.PE!==t){const s=this.xD();s.YG(t),this.PE=t,this.zE=0,this.Ky=null}}$D(){return this.PE}tA(){this.BM(this.FE)}sA(t){const s=this.xD();s.IG(t),this.zE=0}iA(t,s,i=1){const e=this.xD();e.uC(t,s,i),this.zE=0}eA(t,s,i,e,h,n,r){if(this.PE!==this.zy)throw new Error("must set tilemap fill mode first");const o=this.xD();o.fC(t,s,i,e,h,n,r),this.zE=0}hA(t,s,i,e,h,n,r){if(this.PE!==this.Uy)throw new Error("must set tile randomization mode first");const o=this.xD();o.pC(t,s,i,e,h,n,r),this.zE=0}nA(t,s,i,e,h,n,r,o,a,l,u){const c=this.PE;if(u%=10800,c.W2&&!c.Mv(s,i,e,h,n,r,o,a,l,u)){const f=this.xD(),d=(f.qG(),c.Tv(s,i,e,h,n,r,o,a,l,u),f.yG),p=(d[0]=n,d[1]=r,s.ma(d,2),d[6]=a,d[7]=l,i.ma(d,12),f.MG),m=(h.ma(p,0),p[1]);p[1]=p[3],p[3]=m,e.ma(f.wG,0),f.pG=u,f.mG=o,c.G2.Q2()?f.gG=t?t.kx():null:f.gG=null,this.zE=0}}rA(t){const s=this.PE;if(0!==t.length&&!s.pv(t)){const i=this.xD();i.KG(),s.gv(t),S.Yr(i.SG,t),this.zE=0}}oA(t,s,i,e){const h=this.xD();h.zG(t,s,i,e),this.zE=0}hc(t){const s=this.xD();s.BG(t),this.zE=0}aA(){}lS(){super.lS(),this.e2.flush()}lA(){if(this.SE&&this.UE&&this.UE.zx()){const t=this.xD();t.gC(this.bE),this.zE=0}}uA(t){if(this.bE!==(t=!!t)&&this.SE){this.bE=t;const s=this.xD();s.MC(t),this.zE=0}}cA(){return this.bE}Ix(){return this.vE}_x(){return this.TE}fA(t){if(t=!!t,this.TE&&this.xE!==t){if(t&&this.cA())throw new Error("depth still enabled");this.xE=t;const s=this.xD();s.SC(t),this.zE=0}}dA(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.qE.Gl(t,s,i,e)){this.qE.Ml(t,s,i,e);const n=h||this.qD(this.pA())[1],r=(s=n-s-e,this.xD());r._C(!0,t,s,i,e),this.zE=0}}mA(){if(-1!==this.qE._l()){this.qE.set(0,0,-1,-1);const t=this.xD();t._C(!1,0,0,0,0),this.zE=0}}gA(){for(const t of this.dD)t.nE(this.lM)}E_(){return!this.e2||this.e2.isContextLost()||this.hD}nT(){super.gM(),S.oy.Sb.nT(),S.oy.hx.nT(),S.oy.xS.nT();for(const t of this.dD)t.hc();this.eD=[],this.O_=null,this.nD=null,this.rD=null,this.oD=null,this.aD=null,this.lD=null,this.uD=null,this.cD=0,this.sD="(unavailable)",this.iD="(unavailable)",this.PE=null,this.FE=null,this.vE=null;for(const s of this.Xy.values())s.nT()}async rT(){this.hD=!0,await this.mM(),this.hD=!1;for(const t of this.Xy.values())t.rT(this);this.t_(this.Km,this.$m,!0)}yA(t,s){if(this.E_())throw new Error("context lost");this.uS();const i=S.un(S.oy.Sb,this);return i.Db(t,s),i}async MA(e,h){if(this.E_())throw new Error("context lost");if(h=Object.assign({},h),S.Ui.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.cb&&"clamp-to-edge"!==h.cb||h.fb&&"clamp-to-edge"!==h.fb,i=S.Fn(t.width)&&S.Fn(t.height);return this.Ob()||i||!s?h.premultiplyAlpha=!1:S.Ui.Ji?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.jn(t.width),resizeHeight:S.jn(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.zf(()=>this.yA(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.Ro(e);e=t}return S.zf(()=>this.yA(e,h))}Cx(t,s,i){this.uS();const e=S.un(S.oy.Sb,this);return e.Fb(t,s,i),e}D_(t,s,i){this.uS(),s.Wb(t,i)}Dx(t){t&&(t.Hb(),0<t.qb()||(this.uS(),t===this.VE&&(this.e2.bindTexture(this.e2.TEXTURE_2D,null),this.VE=null),t===this.XG&&(this.e2.activeTexture(this.e2.TEXTURE1),this.e2.bindTexture(this.e2.TEXTURE_2D,null),this.e2.activeTexture(this.e2.TEXTURE0),this.XG=null),t.Qb()))}wA(t){let s=this.Km,i=this.$m,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.uS();const h=S.un(S.oy.hx,this);return h.vx(s,i,Object.assign({tx:e},t)),this.UE=null,this.dG.Nx=null,this.dG.Lx=null,h}SA(t,s=!0){if(t!==this.UE){t&&t.Ux()&&t.Ex(this.Km,this.$m);const i=this.xD();i.FG(t),this.UE=t,this.zE=0,s&&this.vD()}}pA(){return this.UE}qD(t){return t?[t.pm(),t.Cm()]:[this.Km,this.$m]}TA(t,s="stretch"){if(this.L_<2||this.UE&&0<this.UE.Wx())this.zD(),this.LD(),this.bA(t,s);else{const i=this.xD();i.iC(t,this.UE,s),this.zE=0}}bA(t,s="stretch"){const i=t.kx();if(!i)throw new Error("not a texture-backed render target");this.RD(i),this.HD(s,i)}xA(t){if(!(this.L_<2)){const s=this.xD();s.tC(t.Ox()),this.zE=0}}vA(t){this.SA(null),this.uS();const s=t.kx();s===this.VE&&(this.e2.bindTexture(this.e2.TEXTURE_2D,null),this.VE=null),s===this.XG&&(this.e2.activeTexture(this.e2.TEXTURE1),this.e2.bindTexture(this.e2.TEXTURE_2D,null),this.e2.activeTexture(this.e2.TEXTURE0),this.XG=null),t.Qb()}async Hx(t,s,i){this.uS();let e=this.UE,h,n,r,o=(r=t?(h=t.pm(),n=t.Cm(),t.Ox()):(h=this.pm(),n=this.Cm(),null),0),a=0,l=h,u=n;if(i){o=S.yn(Math.floor(i.Cl()),0,h-1),a=S.yn(Math.floor(i.Il()),0,n-1);let t=i.width(),s=(t=0===t?h-o:S.yn(Math.floor(t),0,h-o),i.height());s=0===s?n-a:S.yn(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}let c=this.e2,f=(c.bindFramebuffer(c.FRAMEBUFFER,r),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.UE=null,this.dG.Nx=null,this.dG.Lx=null,this.SA(e)}),d;if(!s&&2<=this.Lb()){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.s2(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}GA(){this.uA(!0);const t=this.xD();t.bC(),this.zE=0,this.ZE=1}CA(){this.uA(!1);const t=this.xD();t.vC(),this.zE=0,this.ZE=2}IA(){return 2===this.ZE}_A(){this.uA(!0);const t=this.xD();t.CC(),this.zE=0,this.ZE=0}EA(t){if(this.DA()){const s=this.xD();s.hC(t),this.zE=0}}AA(t){if(this.DA()){const s=this.xD();s.oC(t),this.zE=0}}s2(s){const t=new Promise(t=>e.add({resolve:t,aE:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}MS(){return this.Km*this.$m*(this.mE.alpha?4:3)}wS(){let t=0;for(const s of S.oy.hx.qx())s.kx()||(t+=s.Xb());return t}SS(){let t=0;for(const s of S.oy.Sb.Kb())t+=s.Xb();return t}NA(){return this.gE}Lb(){return this.L_}LA(){return"webgl"+this.Lb()}Ob(){return 2<=this.Lb()}Ab(){return this.XE}OA(){return this.KE}RA(){return this.$E}kA(){return 0!==this.tD}PA(){return this.tD}FA(){return this.sD}jA(){return this.iD}BA(){if(2<=this.Lb())return"webgl2";{const t=[];return this.aD&&t.push("EXT_frag_depth"),this.lD&&t.push("OES_standard_derivatives"),this.uD&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}zA(){return this.eD}DA(){return!!this.O_}R_(){return this.O_}t2(){return this.nD}zb(){return this.rD}Ub(){return this.cD}iE(t){this.dD.add(t)}eE(t){this.dD.delete(t)}H_(){return this.pD}Nb(){return this.e2}mD(t){this.fw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}UA(){return this.bS()}}}{const Vi=self.Ps,Ji={WA:null,QA:null,VA:null,getTime:null,JA:null};Vi.oy.YA=class{constructor(t){t=Object.assign({},Ji,t),this.HA=t.WA,this.qA=t.QA,this.ZA=t.VA,this.XA=t.getTime,this.KA=t.JA,this.$A=null,this.tN=new Set}sN(t){this.tN.add(t)}iN(t){this.tN.delete(t)}nT(){this.$A=null;for(const t of this.tN)t.nT()}eN(t){return this.HA?this.HA(t):[t.pm(),t.Cm()]}pA(t){return this.qA(t)}hN(t,s){this.ZA(t,s)}nN(){return this.XA()}e1(t){this.KA(t)}rN(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.$A||this.$A.pm()===s&&this.$A.Cm()===i||(t.Dx(this.$A),this.$A=null),null===this.$A&&(this.$A=t.yA(null,{width:s,height:i,pb:"nearest",yb:!1})),this.$A}}}{const o=self.Ps,Yi=self.Ss,xh=Yi.vs,Hi=o.un(o.Rect),qi=o.un(o.Rect),Zi=o.un(o.Rect),Xi=o.un(o.Rect),Ki=xh.create(),$i=xh.create(),te={oN:null,aN:null,lN:null,uN:!1},se={cN:null,fN:!1,dN:!1,pN:!1,mN:!1,gN:!1,yN:!1};o.oy.MN=class{constructor(t,s){s=Object.assign({},te,s),this.d1=t,this.wN=s.oN,this.SN=s.aN,this.TN=s.lN,this.bN=null,this.xN=[],this.vN=[],this.GN=[],this.CN=!1,this.$S=0,this.IN=!1,this._N=!1,this.EN=!1,this.DN=!1,this.AN=!1,this.NN=!1,this.ME=!1,this.LN=!1,this.ON=!1,this.RN=!1,this.kN=!1,this.PN=!1,this.FN=0,this.jN=[null,null,null],this.BN=!!s.uN,this.zN=0,this.UN=0,this.WN=0,this.QN=0,this.VN=null,this.JN=null,this.YN=o.un(o.Rect),this.HN=o.un(o.Rect),this.qN=o.un(o.Rect),this.ZN=o.un(o.Rect),this.XN=o.un(o.Rect),this.KN=1,this.$N=1,this.tL=0,this.sL=0,this.iL=null,this.eL=null,this.hL=0,this.nL=0,this.rL=!1,this.Sx=xh.create(),this.oL=xh.create(),this.d1.sN(this)}cn(){this.d1.iN(this),o.Wr(this.GN),o.Wr(this.xN),o.Wr(this.vN),this.VN=null,this.JN=null,this.wN=null,this.SN=null,this.TN=null}nT(){this.CN=!0,o.Wr(this.GN),o.Wr(this.xN),o.Wr(this.vN)}aL(){return this.CN}lL(h,t){if(t=Object.assign({},se,t),o.Wr(this.GN),this.zN=0,this.UN=0,this.IN=!1,this._N=!1,this.EN=!1,this.DN=!1,this.AN=!1,this.NN=!1,this.FN=0,this.PN=!!t.mN,this.kN=!!t.yN,this.CN=!1,o.Yr(this.xN,h),0!==h.length){if(t.cN){if(t.cN.length!==h.length)throw new Error("incorrect indexMap length");o.Yr(this.vN,t.cN)}else{o.Wr(this.vN);for(let t=0,s=h.length;t<s;++t)this.vN.push(t)}for(const s of h)this.zN+=s.jS(),this.UN+=s.BS(),s.VS()&&(this.IN=!0),s.YS()&&(this._N=!0),s.JS()&&(this.EN=!0),s.zS()&&(this.DN=!0),s.ZS()&&(this.AN=!0);this.NN=this.uL(h[0].PS());const n=this.cL(h[0],t),r=this.fL(h.at(-1),t);if(1!==h.length||n||r){this.RN=!1;let e=0;n&&(this.FN=1,this.GN.push(o.un(o.oy.MN.pL.dL,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||n){let t=1===e?2:1;s!==i-1||r||(t=0),this.FN=Math.max(this.FN,t),this.GN.push(o.un(o.oy.MN.pL.mL,this,e,t,s)),e=t}else this.FN=1,this.GN.push(o.un(o.oy.MN.pL.gL,this,-1,1,s)),e=1;r&&this.GN.push(o.un(o.oy.MN.pL.yL,this,e,0))}else this.RN=!0}}cL(t,s){return!!(s.fN||t.US()||s.pN&&!t.QS()||t.YS()&&!this.kN||0!==this.zN||0!==this.UN)||(t.PS().yS()?t.JS()&&(s.gN||s.mN)||t.HS()&&s.mN:t.JS()&&!this.NN&&s.gN)}fL(t,s){return!!s.dN||(t.PS().yS()?t.JS()||t.zS():(t.JS()||t.zS())&&this.ML())}uL(t){return t.AM()&&this.EN&&!this.DN}wL(t,s,i){t.AM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.iL=s,this.VN=i.SL||null,this.JN=i.contextObject||null,this.$S=i.TL||0,this.KN=i.devicePixelRatio||1,this.$N=i.bL||1,this.tL=i.xL||0,this.sL="number"==typeof i.time?i.time:this.d1.nN(),this.ME=!1,t.CD(),this.IN&&this.vL();let e=!1;if(this.GL()&&(this.CL(t,i),e=!0,this.eL=this.d1.rN(t,this.WN,this.QN),Hi.I(this.HN),Hi.Hl(),t.AM()&&t._MaybeDoPendingClearRenderPass(this.iL),t.CopyTextureToTexture(this.iL.kx(),this.eL,Hi.Cl(),Hi.Il(),Hi.width(),Hi.height())),this.RN)this.IL(t,i);else if(e||this.CL(t,i),0!==this.qN.width()||0!==this.qN.height()){t.jD(),t.LD(),t.Sw(0),t.bw(0),this.bN=i._L||null,this.hL=i.EL||0,this.nL=i.DL||0,this.rL=!!i.AL,this.NL(t),this.jN[0]=s,this.jN[1]=1<=this.FN?this.LL():null,this.jN[2]=2===this.FN?this.LL():null;for(const h of this.GN){const n=this.OL(h.RL()),r=this.OL(h.kL());t.AM()?h.PL(t,n,r):h.FL(t,n,r)}t.RD(null),this.jN[1]&&this.jL(this.jN[1]),this.jN[2]&&this.jL(this.jN[2]),this.jN.fill(null),this.BL(t),this.iL=null,this.eL=null,this.VN=null,this.JN=null,this.bN=null}}CL(t,s){const[i,e]=this.d1.eN(t);this.zL(t,i,e),this.UL(s)}zL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.WN===s&&this.QN===i||this.WL(t,s,i,0,0,this.Sx,this.oL),this.WN=s,this.QN=i}WL(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h,l=(t.DM(n,s/i),t.OM(o,a,t.yM(i),o,a,0,i));xh.I(r,l)}UL(t){this.YN.I(t.QL),t.VL?this.HN.I(t.VL):this.HN.set(0,0,this.WN,this.QN),this.qN.I(this.HN),this.qN._t(this.WN,this.QN);const s=this.$N*this.KN;this.HN.jl(this.zN*s,this.UN*s),this.XN.I(this.HN),this.XN._t(this.WN,this.QN),this.HN.ql(0,0,this.WN,this.QN),this.ZN.I(this.HN),this.ZN._t(this.WN,this.QN)}NL(t){if(this.LN=t.cA(),this.ON=t.IA(),this.kN)t.uA(!1),this._N&&t.fA(!0);else{if(Hi.I(this.HN),t.yS()){const s=this.$N*this.KN;Hi.jl(Math.max(this.zN,1)*s,Math.max(this.UN,1)*s),Hi.Hl(),Hi.yn(0,0,this.WN,this.QN)}else Hi.Hl();t.dA(Hi.Cl(),Hi.Il(),Hi.width(),Hi.height(),this.QN)}}JL(t){t.LD(),this.kN||(this.ON&&t._A(),t.uA(!1),this._N&&t.fA(!0)),t.AM()&&t.SetNormalizedCoordsProgramVariant(!0)}BL(t){t.fA(!1),this.ON&&t.CA(),t.uA(this.LN),this.kN||t.mA(),t.AM()&&t.SetNormalizedCoordsProgramVariant(!1),this.ME=t.ID()}YL(){this.XN.yn(0,0,1,1)}OL(t){return t<0?null:this.jN[t]}LL(){return this.d1.pA(this)}HL(){return this.iL}jL(t){this.d1.hN(t,this)}qL(t){return this.xN[t]}ZL(t){this.bN?this.bN(this,t,()=>this.wN(t,this)):this.wN(t,this),this.RN||this.JL(t)}XL(t){if(this.kN)return!0;if(0!==this.hL||0!==this.nL)return!1;const[s,i]=t.qD(t.pA());return s===this.WN&&i===this.QN}KL(t,s){let i=this.Sx,e=this.oL;if(s&&!this.XL(t)){i=Ki,e=$i;const[h,n]=t.qD(t.pA());this.WL(t,h,n,this.hL,this.nL,i,e),this.kN||t.mA()}t.wD(i),t.GD(e)}vL(){this.d1.e1(this)}$L(t,s){return this.TN(this.vN[t],s)}tO(t,s){let i=this.XN,e=this.ZN,h=this.qN;t.yS()&&(qi.I(i),qi.Ul(1),i=qi,Zi.I(e),Zi.Ul(1),e=Zi,Xi.I(h),Xi.Ul(1),h=Xi),this.sO(t,s,e,h,i,1/this.WN,1/this.QN)}iO(t,s){let e=this.ZN,h=this.qN,n=1/this.WN,r=1/this.QN;if(this.SN){let{eO:t,hO:s,nO:i}=this.SN(this.VN);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.WN,i=i||this.QN,e=t,h=t,n=1/s,r=1/i}else t.yS()&&(Zi.I(e),Zi.Ul(1),e=Zi,Xi.I(h),Xi.Ul(1),h=Xi);let i=this.XN;t.yS()&&((i=qi).I(this.XN),i.Ul(1)),this.sO(t,s,e,h,i,n,r),t.AM()&&this.AN&&t.SetProgramParameter_IsSrcTexRotated(this.PN)}rO(t){return this.EN?t.AM()?this.GL()?this.eL:this.iL.kx():this.iL:null}sO(t,s,i,e,h,n,r){t.nA(this.rO(t),h,i,e,this.YN,n,r,this.KN,this.$N,this.tL,this.sL),t.rA(this.$L(s,t))}IL(t,s){const i=this.xN[0],e=t.cA(),h=i.YS();h&&(t.uA(!1),t.fA(!0),this.XN.set(0,0,1,1),this.qN.set(0,0,1,1)),t.BM(i),t.eT(this.$S),t.SA(this.iL);let n=0,r=1;if(this.qN.set(0,0,1,1),i.HS()&&this.SN){const{eO:o,hO:a,nO:l}=this.SN(this.VN);o&&this.qN.I(o),n=Number.isFinite(a)?1/a:0,r=Number.isFinite(l)?1/l:0}else{const[u,c]=this.d1.eN(t);n=1/u,r=1/c}s.QL?this.YN.I(s.QL):this.YN.set(0,0,0,0),t.nA(this.rO(t),this.XN,this.qN,this.qN,this.YN,n,r,this.KN,this.$N,this.tL,this.sL),t.rA(this.$L(0,t)),t.AM()&&this.AN&&t.SetProgramParameter_IsSrcTexRotated(this.PN),t.Sw(0),this.ZL(t),h&&(t.fA(!1),t.uA(e))}GL(){return this.NN}ML(){return!this.NN}oO(){return this.EN}aO(){return!!this.RN&&!this.GL()}lO(){return this.kN}uO(){return this.VN}cO(){return this.JN}fO(){return this.$S}dO(){return this.rL}ID(){return this.ME}pO(){return this.HN}mO(){return this.ZN}gO(){return this.BN}async yO(t,s,i){}}}{const ie=self.Ps;ie.oy.MN.pL=class{constructor(t,s,i,e=-1){this.MO=t,this.wO=s,this.SO=i,this.Kg=e}TO(){return this.MO}RL(){return this.wO}kL(){return this.SO}bO(){return this.Kg}lv(){return this.TO().qL(this.bO())}FL(t,s,i){}PL(t,s,i){}}}{const ee=self.Ps;ee.oy.MN.pL.dL=class extends ee.oy.MN.pL{constructor(t,s,i,e){super(t,s,i,e)}FL(t,s,i){const e=this.TO();t.jD(),t.jM(),t.SA(i,e.dO()),t.oA(0,0,0,0),e.ZL(t),e.YL()}PL(t,s,i){const e=this.TO();t.jD(),t.jM(),t.SA(i,!1),t.oA(0,0,0,0),e.ZL(t),e.YL()}}}{const he=self.Ps,ne=he.un(he.Rect),re=he.un(he.iu);he.oy.MN.pL.yL=class extends he.oy.MN.pL{constructor(t,s,i,e){super(t,s,i,e)}FL(t,s,i){const e=this.TO();t.jM(),t.SA(i),e.KL(t,!0),t.eT(e.fO()),t.RD(s.kx()),re.xu(e.pO()),ne.I(e.mO()),ne.Ul(1),t.Ow(re,ne),e.gO()&&t.xA(s)}PL(t,s,i){const e=this.TO();t.jM(),t.SA(i,!1),e.XL(t)?re.xu(e.mO()):(t.SetNormalizedCoordsProgramVariant(!1),e.KL(t,!0),re.xu(e.pO())),t.SetBackTexture(null),t.eT(e.fO()),t.RD(s.kx()),e.lO()?t.HD():t.Ow(re,e.mO())}}}{const oe=self.Ps;oe.oy.MN.pL.gL=class extends oe.oy.MN.pL{constructor(t,s,i,e){super(t,s,i,e)}FL(t,s,i){const e=this.TO();t.SA(i,e.dO()),t.oA(0,0,0,0),t.zD(),t.BM(this.lv()),e.iO(t,this.bO()),e.ZL(t),e.YL()}PL(t,s,i){const e=this.TO();t.SA(i,!1),t.oA(0,0,0,0),t.zD(),t.BM(this.lv()),e.iO(t,this.bO()),e.ZL(t),e.YL()}}}{const ae=self.Ps,le=ae.un(ae.Rect),ue=ae.un(ae.iu);ae.oy.MN.pL.mL=class extends ae.oy.MN.pL{constructor(t,s,i,e){super(t,s,i,e)}FL(t,s,i){const e=this.TO(),h=(t.SA(i),0===this.kL());h?t.eT(e.fO()):(t.oA(0,0,0,0),t.zD()),t.BM(this.lv()),e.tO(t,this.bO()),t.RD(s.kx()),e.KL(t,h),ue.xu(e.pO()),le.I(e.mO()),le.Ul(1),t.Ow(ue,le),e.gO()&&t.xA(s)}PL(t,s,i){const e=this.TO(),h=(t.SA(i,!1),0===this.kL());h?(t.eT(e.fO()),t.SetBackTexture(null),e.XL(t)?ue.xu(e.mO()):(t.SetNormalizedCoordsProgramVariant(!1),e.KL(t,!0),ue.xu(e.pO()))):(t.oA(0,0,0,0),t.zD(),ue.xu(e.mO())),t.BM(this.lv()),e.tO(t,this.bO()),t.RD(s.kx()),e.lO()?t.HD():t.Ow(ue,e.mO())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},c=(u,self.Ps),f=self.Ys,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.xO=class{constructor(t){d=t,Object.defineProperties(this,{vO:{value:d.CO().GO(),writable:!1},IO:{value:d.EO()._O(),writable:!1},DO:{value:{},writable:!1},AO:{value:{},writable:!1},NO:{value:d.LO(),writable:!1},OO:{value:d.RO(),writable:!1},kO:{value:new Date(d.PO()),writable:!1},storage:{value:new self.FO(d),writable:!1},isInWorker:{value:d.jO(),writable:!1},BO:{value:d.zO(),writable:!1},UO:{value:d.WO(),writable:!1},pb:{value:d.QO(),writable:!1},VO:{value:d.JO(),writable:!1},YO:{value:new self.HO(t),writable:!1},qO:{value:new self.ZO(t),writable:!1}}),d.XO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.XO().addEventListener("keyup",t=>s.delete(t.key)),d.Jf().addEventListener("window-blur",()=>s.clear()),d.jO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}KO(t){Object.defineProperties(this.DO,t)}$O(t){Object.defineProperties(this.AO,t)}addEventListener(t,s){d.XO().addEventListener(t,s)}removeEventListener(t,s){d.XO().removeEventListener(t,s)}tR(t,...s){f.Ge(t);const i=d.sR(),e=i.iR(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.tc())return e.eR();if(s.length<e.hR())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.hR()} expected)`);let h=e.nR(),n=h.rR(),r=i.oR();if(r){n=n.slice(0);const a=new Set(n);for(const l of r.rR())a.has(l)||(n.push(l),a.add(l));for(const u of i.aR())a.has(u)||(n.push(u),a.add(u))}const o=h.lR(n,e.uR(),e.cR(),e.eR(),...s);return o}fR(t){const s=d.pR().dR();if(!s)throw new Error("not in a function which returns a value");switch(s.mR()){case 1:"number"==typeof t&&s.gR(t);break;case 2:"string"==typeof t&&s.gR(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.gR(t)}}signal(t){f.Ge(t),d.sR().yR(t)}MR(t){return f.Ge(t),d.sR().wR(t)}SR(){return[d.zO(),d.WO()]}get isSuspended(){return d.TR()}get bR(){return d.xR()}get vR(){return d.GR()}get gameTime(){return d.CR()}get IR(){return d._R()}get timeScale(){return d.ER()}set timeScale(t){f.Se(t),d.DR(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.AR()}get framesPerSecond(){return d.AR()}get NR(){return d.LR()}get OR(){return d.RR()}get kR(){return d.PR()}get FR(){return d.jR()}set FR(t){if(!e.has(t))throw new Error("invalid framerate mode");d.BR(t)}get zR(){return d.UR()}set zR(t){f.Se(t),d.WR(t)}get QR(){return d.VR()}set QR(t){d.JR(t)}get YR(){return d.CO().HR()}get qR(){return d.CO().ZR()}random(){return d.KR()}get layout(){const t=d.$R();if(t)return t.sk();throw new Error("no layout is running - make sure a layout is loaded before accessing")}ik(t){let s=d.ek(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.hk(t))return i.sk();throw new Error("invalid layout")}nk(){return d.ek().rk().map(t=>t.sk())}ak(t){let s=d.ek(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.hk(t)))throw new Error("invalid layout");s.lk()||s.uk(i)}get keyboard(){const t=d.ck().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get fk(){const t=d.ck().fk;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get dk(){const t=d.ck().dk;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get pk(){const t=d.ck().pk;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}mk(t,s){f.Ge(t),f.Ge(s),d.gk(t,s)}yk(t){f.Se(t);const s=d.Mk(t);return s?s.wk():null}Sk(t,e){f.He(e);const h=d.Tk();for(const s of t){const i=d.bk(s),n=i.xk();p.push([n.vk().bO(),n.Gk()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.wk(),s.wk()));let i=!1;for(let t=0,s=p.length;t<s;++t){const r=m[t],o=h.Ck(p[t][0]),a=p[t][1],l=o.Ik();l[a]!==r&&((l[a]=r).xk()._k(o,!0),o.Ek(r),i=!0)}i&&d.Dk(),c.Wr(p),c.Wr(m)}}async Ak(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.Nk("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.Nk("runtime","alert",{message:t+(d.jO()?" [via Web Worker]":"")})}Lk(t){return f.Se(t),d.Ok(t)}Rk(t){d.kk(t)}}}{let s=self.Ps,i=null;self.Pk=class{constructor(t){i=t,Object.defineProperties(this,{Fk:{value:!0,writable:!1}})}jk(t){const s=self.zk.Bk(t);if(!s)throw new Error("invalid IImageInfo");s.Uk(i.Wk())}Qk(t){return i.Io(t)}Vk(t){return i._o(t)}Jk(t){return i.Eo(t)}Yk(t){return i.Do(t)}Hk(t){return i.qk(t)}Zk(t){return"flat"===i.Xk()&&s.vo(t)&&(t=t.toLowerCase()),i.Kk(t)}get $k(){return i.tP()}async sP(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}iP(...t){return i.eP(...t)}hP(t){return i.nP(t)}rP(t){return i.oP(t)}}}{let r=self.Ps,i=self.Ys,o=null;self.aP=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.Wk(),writable:!1}})}lP(t,s){const i=o.Wk(),e=i.bk(t),h=i.bk(s);return o.uP(e,h)}cP(t,s){const i=o.Wk(),e=i.bk(t);for(const h of s){const n=i.bk(h);if(o.uP(e,n))return h}return null}fP(t){const s=o.Wk().bk(t),i=o.dP(s);return i?i.wk():null}pP(t,s){if(i.Se(t),i.Se(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.mP(t,s)}gP(){return o.yP()}MP(t,s){let i=o.Wk(),e;e=Array.isArray(t)?t.map(t=>i.wP(t)):[i.wP(t)];const h=r.Rect.vl(s),n=[];return o.SP(null,e,h,n),n.map(t=>t.wk())}}}{let s=self.Ps,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),n=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.HO=class{constructor(t){i=t,Object.defineProperties(this,{TP:{value:s.li.Si,writable:!1},bP:{value:e.get(s.li.ci)||"unknown",writable:!1},xP:{value:s.li.fi,writable:!1},vP:{value:h.get(s.li.di)||"unknown",writable:!1},GP:{value:s.li.mi,writable:!1},CP:{value:n.get(s.li.yi)||"unknown",writable:!1}})}get exportType(){let t=i.IP();return i._P()?t="nwjs":i.EP()?t="windows-webview2":"cordova"===t?t="Android"===s.li.ci?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.AP().DP()}get NP(){return i.AP().LP()}get OP(){return i.AP().RP()}get kP(){return i.AP().PP()}get FP(){return i.AP().jP()}get BP(){return i.AP().zP()}get devicePixelRatio(){return i.UP()}}}{const ce=self.Ys;self.FO=class{constructor(t){this.WP=t.QP()}getItem(t){return ce.Ge(t),this.WP.getItem(t)}setItem(t,s){return ce.Ge(t),this.WP.setItem(t,s)}removeItem(t){return ce.Ge(t),this.WP.removeItem(t)}clear(){return this.WP.clear()}keys(){return this.WP.keys()}}}{const fe=self.Ps,de=fe.Fs();self.VP=class{#JP;constructor(){const t=fe.HP.YP(de);this.#JP=t,Object.defineProperties(this,{runtime:{value:t.Wk().qP(),writable:!1},ZP:{value:t.XP(),writable:!1},KP:{value:t.$P(),writable:!1},t3:{value:t.s3(),writable:!1},i3:{value:t.e3(),writable:!1},h3:{value:t.n3(),writable:!1},r3:{value:t.o3(),writable:!1},a3:{value:t.l3(),writable:!1},u3:{value:t.f3(),writable:!1}}),t.Wk().d3(this,t)}static m3(t){if(!t)return null;const s=fe.HP.g3(t);return s?s.y3():null}M3(){return this.#JP.S3().w3()}T3(){return this.#JP.b3().wk()}}}{const pe=self.Ps,me=self.Ys,ge=pe.Fs();self.x3=class{#JP;constructor(){const t=pe.HP.YP(ge);this.#JP=t,Object.defineProperties(this,{name:{value:t.ef(),writable:!1},runtime:{value:t.Wk().qP(),writable:!1},v3:{value:t.G3().y3(),writable:!1}}),t.Wk().d3(this,t)}addEventListener(t,s){me.Ge(t),me.He(s),this.#JP.XO().addEventListener(t,s)}removeEventListener(t,s){me.Ge(t),me.He(s),this.#JP.XO().removeEventListener(t,s)}C3(){return[...this.instances()]}I3(){return pe.first(this.instances())}_3(){return[...this.E3()]}D3(){return pe.first(this.E3())}A3(t){const s=this.#JP,i=s.Wk().N3(t),e=s.L3(i);return e?e.wk():null}*instances(){for(const t of this.#JP.O3())yield t.wk()}*E3(){for(const t of this.#JP.P3().R3())yield t.wk()}F3(t){me.He(t);const s=this.#JP;if(0<s.j3())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.B3(t)}Pi(t,s,i,e,h){if(me.me(s),me.me(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#JP,r=n.Wk(),o=r.$R().vk(t);if(!o)throw new Error("invalid layer");const a=r.z3(n,o,s,i,e,h),l=(e&&o.U3(a),r.sR());return l.W3(!0),a.Q3(),l.W3(!1),l.V3()||r.ek().J3()||r.Y3(),a.wk()}}}{const ye=self.Ys,l=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.H3=class{constructor(t){l.set(this,t);const s=[],i=t.q3(),e=i.Z3().length;for(let t=0;t<e;++t)s.push(new self.X3(i,t));Object.defineProperties(this,{name:{value:t.ef(),writable:!1},index:{value:t.bO(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ge(t),ye.He(s),l.get(this).XO().addEventListener(t,s)}removeEventListener(t,s){ye.Ge(t),ye.He(s),l.get(this).XO().removeEventListener(t,s)}get width(){return l.get(this).pm()}set width(t){ye.Se(t),l.get(this).xm(t)}get height(){return l.get(this).Cm()}set height(t){ye.Se(t),l.get(this).gm(t)}K3(t,s){ye.Se(t),ye.Se(s);const i=l.get(this);i.xm(t),i.gm(s)}getSize(){const t=l.get(this);return[t.pm(),t.Cm()]}set scale(t){ye.Se(t),l.get(this).t4(t)}get scale(){return l.get(this).s4()}set angle(t){ye.Se(t),l.get(this).i4(t)}get angle(){return l.get(this).e4()}set scrollX(t){ye.me(t),l.get(this).h4(t)}get scrollX(){return l.get(this).n4()}set scrollY(t){ye.me(t),l.get(this).r4(t)}get scrollY(){return l.get(this).o4()}scrollTo(t,s){ye.me(t),ye.me(s);const i=l.get(this);i.h4(t),i.r4(s)}a4(){const t=l.get(this);return[t.n4(),t.o4()]}l4(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.vk(t))?i.u4():null}c4(){return l.get(this).f4().map(t=>t.u4())}*d4(){for(const t of l.get(this).d4())yield t.u4()}m4(t,s,i){const e=l.get(this),h=self.g4,n=(ye.Ge(t),ye.eh(s,h),s?e.Wk().y4(s):null),r=Me.indexOf(i);if(r<0)throw new Error("invalid location");e.M4(t,n,r)}w4(t,s,i){const e=l.get(this),h=e.Wk(),n=self.g4,r=(ye.ih(t,n),h.y4(t));if(!r)throw new Error("invalid layer");ye.eh(s,n);const o=s?h.y4(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.S4(r,o,a)}T4(t){const s=l.get(this),i=self.g4,e=(ye.ih(t,i),s.Wk().y4(t));if(!e)throw new Error("invalid layer");const h=e.Wk();s.b4(e),h.sR().V3()||h.Y3()}x4(){const t=l.get(this),s=t.Wk();t.v4(),s.sR().V3()||s.Y3()}G4(t,s){ye.Se(t),ye.Se(s),l.get(this).C4(t,s)}I4(){return l.get(this)._4()}set K(t){ye.Ge(t);const s=l.get(this);if("perspective"===t)s.E4();else{if("orthographic"!==t)throw new Error("invalid projection");s.D4()}}get K(){return l.get(this).A4()?"orthographic":"perspective"}}}{const we=self.Ps,f=self.Ys,d=new WeakMap,Se=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Te=new Map([...Se.entries()].map(t=>[t[1],t[0]])),be=we.un(we.Ho);self.g4=class{constructor(t){d.set(this,t);const s=[],i=t.q3(),e=i.Z3().length;for(let t=0;t<e;++t)s.push(new self.X3(i,t));Object.defineProperties(this,{name:{value:t.ef(),writable:!1},layout:{value:t.hk().sk(),writable:!1},effects:{value:s,writable:!1}}),t.Wk().d3(this,t)}get N4(){const t=d.get(this).L4();return t?t.u4():null}*O4(){for(const t of d.get(this).O4())yield t.u4()}*R4(){for(const t of d.get(this).P4())yield t.u4()}*F4(){for(const t of d.get(this).P4())for(const s of t.j4())yield s.u4()}get index(){return d.get(this).bO()}get isVisible(){return d.get(this).B4()}set isVisible(t){d.get(this).z4(t)}get U4(){return d.get(this).W4()}get isInteractive(){return d.get(this).Q4()}set isInteractive(t){d.get(this).V4(t)}get J4(){return d.get(this).Y4()}set J4(t){d.get(this).H4(!!t)}get q4(){return d.get(this).Z4()}get opacity(){return d.get(this).DD()}set opacity(t){t=we.yn(+t,0,1),isNaN(t)||d.get(this).ND(t)}set scale(t){f.Se(t),d.get(this).X4(t)}get scale(){return d.get(this).K4()}set scaleRate(t){f.Se(t),d.get(this).tF(t)}get scaleRate(){return d.get(this).sF()}set angle(t){f.Se(t),d.get(this).i4(t)}get angle(){return d.get(this).iF()}set parallaxX(t){f.Se(t),d.get(this).eF(t)}get parallaxX(){return d.get(this).hF()}set parallaxY(t){f.Se(t),d.get(this).nF(t)}get parallaxY(){return d.get(this).rF()}set oF(t){f.Se(t),d.get(this).ST(t)}get oF(){return d.get(this).wT()}set aF(t){d.get(this).lF(t)}get aF(){return d.get(this).uF()}set cF(t){d.get(this).fF(t)}get cF(){return d.get(this).dF()}set TL(t){f.Ge(t);const s=Se.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).eT(s)}get TL(){return Te.get(d.get(this).pF())}set backgroundColor(t){if(f.Be(t),t.length<3)throw new Error("expected 3 elements");be.ta(t[0],t[1],t[2]);const s=d.get(this),i=s.mF();i.ya(be)||(i.la(be),s.Wk().Dk())}get backgroundColor(){const t=d.get(this).mF();return[t.ua(),t.ca(),t.fa()]}set scrollX(t){f.me(t);const s=d.get(this);s.gF(!0),s.h4(t)}get scrollX(){return d.get(this).n4()}set scrollY(t){f.me(t);const s=d.get(this);s.gF(!0),s.r4(t)}get scrollY(){return d.get(this).o4()}scrollTo(t,s){f.me(t),f.me(s);const i=d.get(this);i.gF(!0),i.h4(t),i.r4(s)}a4(){const t=d.get(this);return[t.n4(),t.o4()]}yF(){d.get(this).gF(!1)}getViewport(){return d.get(this).MF().Dl()}wF(t,s,i=0){f.me(t),f.me(s),f.me(i);const e=d.get(this),h=e.Wk();return e.SF(t-h.TF(),s-h.bF(),i)}xF(t,s,i=0){f.me(t),f.me(s),f.me(i);const e=d.get(this),h=e.Wk(),[n,r]=e.vF(t,s,i);return[n+h.TF(),r+h.bF()]}GF(t,s,i=0){return f.me(t),f.me(s),f.me(i),d.get(this).CF(t,s,i)}IF(t,s,i=0){return f.me(t),f.me(s),f.me(i),d.get(this)._F(t,s,i)}get EF(){return d.get(this).DF()}}}{let e=function(t){let s=Ge.get(t);return s||(s=xe.un(xe.Event.Jf),Ge.set(t,s)),s};e;const xe=self.Ps,ve=self.Ys,Ge=new WeakMap,Ce=xe.Fs();self.AF=class{#JP;constructor(){const t=xe.HP.YP(Ce),s={runtime:{value:(this.#JP=t).Wk().qP(),writable:!1},NF:{value:t.LF().w3(),writable:!1},v3:{value:t.G3().y3(),writable:!1}};t.OF(s),t.RF(s),Object.defineProperties(this,s),t.Wk().d3(this,t)}static kF(){return xe.HP.PF()}FF(){const t=Ge.get(this);t&&(t.cn(),Ge.delete(this))}addEventListener(t,s,i){ve.Ge(t),ve.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ve.Ge(t),ve.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}jF(){const t=this.#JP,s=t.Wk();s.BF(t),s.sR().V3()||s.ek().J3()||s.sR().zF()||s.Y3()}UF(){const t=this.#JP.WF();return t?t.map(t=>t.wk()):[]}*QF(){const t=this.#JP;if(t.VF())for(const s of t.JF())yield s.wk()}get uid(){return this.#JP.YF()}get HF(){return this.#JP.qF()}get ZF(){return this.#JP.XF()}set timeScale(t){ve.Se(t),this.#JP.DR(t)}get timeScale(){return this.#JP.KF()}$F(){this.#JP.tj()}get bR(){const t=this.#JP;return t.Wk().xR(t)}sj(...t){ve.Be(t);const s=new Set(t),i=this.#JP.ij();return s.isSubsetOf(i)}ej(t){ve.ih(t,Set),this.#JP.hj(t)}nj(){return new Set(this.#JP.ij())}signal(t){ve.Ge(t);const s=this.#JP;s.Wk().sR().rj(s,t)}MR(t){ve.Ge(t);const s=this.#JP;return s.Wk().sR().oj(s,t)}}}{const Ie=self.Ps,_e=self.Ys,Ee=Ie.Fs();self.aj=class extends self.AF{#JP;#lj=!1;#uj=null;#cj=!1;#fj=null;#dj;#pj;constructor(t){super(),this.#JP=Ie.HP.YP(Ee),this.#lj=!1,this.#uj=null,this.#cj=!1,this.#fj=null,this.#dj=t?.domComponentId,this.#pj=t?.wrapperComponentId}FF(){this.mj(!1),this.gj(!1),super.FF()}yj(){return Ie.HP.Mj()}wj(t){const s=this.#JP;s.Wk().Sj(t,s)}Tj(t){const s=this.#JP;return s.Wk().bj(t,s)}xj(t,s){if(_e.Ge(t),_e.He(s),!this.#dj)throw new Error("no DOM component id set");const i=this.#JP.Wk();i.vj(this.#dj,t,s)}Gj(t){_e.Be(t);for(const[s,i]of t)this.xj(s,i)}Cj(t,s){if(_e.Ge(t),!this.#dj)throw new Error("no DOM component id set");const i=this.#JP.Wk();i.gf(this.#dj,t,s)}Ij(t,s){if(_e.Ge(t),!this.#dj)throw new Error("no DOM component id set");const i=this.#JP.Wk();return i.Nk(this.#dj,t,s)}_j(t,s){const i=this.#JP.Wk();if(!i.jO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#dj,handler:t,data:s,responseId:null});this.Cj(t,s)}mj(t){if(this.#lj!==(t=!!t)){this.#lj=t;const s=this.#JP.Wk();if(t){if(!this.#uj)if(this.#JP.Wk().Ej()){const i=globalThis.C3Debugger,e=this.v3;this.#uj=()=>{const t=performance.now();this.Dj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#uj=()=>this.Dj();s.Jf().addEventListener("tick",this.#uj)}else s.Jf().removeEventListener("tick",this.#uj)}}Aj(){return this.#lj}Dj(){}gj(t){if(this.#cj!==(t=!!t)){this.#cj=t;const s=this.#JP.Wk();if(t){if(!this.#fj)if(this.#JP.Wk().Ej()){const i=globalThis.C3Debugger,e=this.v3;this.#fj=()=>{const t=performance.now();this.Nj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#fj=()=>this.Nj();s.Jf().addEventListener("tick2",this.#fj)}else s.Jf().removeEventListener("tick2",this.#fj)}}Lj(){return this.#cj}Nj(){}Oj(){return[]}Rj(){return null}kj(t){}Pj(){if(!this.#pj)throw new Error("no wrapper component id set");const t=this.#JP.Wk();return t.Fj(this.#pj)}jj(t,s){if(_e.Ge(t),_e.He(s),!this.#pj)throw new Error("no wrapper component id set");const i=this.#JP.Wk();i.Bj(this.#pj,t,s)}zj(t){_e.Be(t);for(const[s,i]of t)this.jj(s,i)}Uj(t,s){if(!this.#pj)throw new Error("no wrapper component id set");this.runtime.qO.Wj(this.#pj,t,s)}Qj(t,s){if(this.#pj)return this.runtime.qO.Vj(this.#pj,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#Jj;#Yj;constructor(t){super(t);const s=De.HP.YP(Oe),i=s.xk(),e=(this.#Jj=s,this.#Yj=i,Le.set(this,s),[]),h=i.Hj();if(h){const r=i.LF().q3().Z3().length;for(let t=0;t<r;++t)e.push(new self.X3(h,t))}const n={effects:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#Yj.hk().sk()}get qj(){return this.#Yj.vk().u4()}get x(){return this.#Yj.pT()}set x(t){t=+t;const s=this.#Yj;isNaN(t)||s.pT()===t||(s.mT(t),s.Zj())}get y(){return this.#Yj.yT()}set y(t){t=+t;const s=this.#Yj;isNaN(t)||s.yT()===t||(s.MT(t),s.Zj())}setPosition(t,s){t=+t,s=+s;const i=this.#Yj;isNaN(t)||isNaN(s)||i.pT()===t&&i.yT()===s||(i.Xj(t,s),i.Zj())}Kj(){const t=this.#Yj;return[t.pT(),t.yT()]}$j(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#Yj;i.t5(t,s),i.Zj()}}get oF(){return this.#Yj.wT()}set oF(t){t=+t;const s=this.#Jj,i=this.#Yj;isNaN(t)||i.wT()===t||(i.ST(t),s.Wk().Dk())}get s5(){return this.#Yj.i5()}get width(){return this.#Yj.pm()}set width(t){t=+t;const s=this.#Yj;isNaN(t)||s.pm()===t||(s.xm(t),s.Zj())}get height(){return this.#Yj.Cm()}set height(t){t=+t;const s=this.#Yj;isNaN(t)||s.Cm()===t||(s.gm(t),s.Zj())}K3(t,s){t=+t,s=+s;const i=this.#Yj;isNaN(t)||isNaN(s)||i.pm()===t&&i.Cm()===s||(i.t_(t,s),i.Zj())}getSize(){const t=this.#Yj;return[t.pm(),t.Cm()]}get angle(){return this.#Yj.e4()}set angle(t){t=De.Mn(+t);const s=this.#Yj;isNaN(t)||s.e4()===t||(s.i4(t),s.Zj())}get e5(){return De.Sn(this.angle)}set e5(t){this.angle=De.wn(t)}Cu(){return this.#Yj.h5().Dl()}n5(){return this.#Yj.r5().Su()}o5(){return this.#Yj.a5()}get isVisible(){return this.#Yj.W4()}set isVisible(t){t=!!t;const s=this.#Jj,i=this.#Yj;i.W4()!==t&&(i.z4(t),s.Wk().Dk())}get opacity(){return this.#Yj.DD()}set opacity(t){t=De.yn(+t,0,1);const s=this.#Jj,i=this.#Yj;isNaN(t)||i.DD()===t||(i.ND(t),s.Wk().Dk())}set l5(t){if(Ae.Be(t),t.length<3)throw new Error("expected 3 elements");Pe.ta(t[0],t[1],t[2]);const s=this.#Jj,i=this.#Yj;i.u5().ya(Pe)||(i.c5(Pe),s.Wk().Dk())}get l5(){const t=this.#Yj.u5();return[t.ua(),t.ca(),t.fa()]}set TL(t){Ae.Ge(t);const s=Re.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#Jj,e=this.#Yj;e.eT(s),i.Wk().Dk()}get TL(){return ke.get(this.#Yj.pF())}f5(){this.#Yj.d5()}p5(){this.#Yj.m5()}g5(t){Ae.ih(t,Ne);const s=this.#Jj,i=s.Wk().y4(t);if(!i)throw new Error("invalid layer");s.xk().y5(i)}M5(t,s){Ae.ih(t,h),this.#Yj.w5(Le.get(t),s)}get zIndex(){return this.#Yj.Gk()}get S5(){return this.#Yj.T5()}set S5(t){this.#Yj.b5(!!t)}Kl(t,s){return Ae.me(t),Ae.me(s),this.#Yj.x5(+t,+s)}lP(t){Ae.ih(t,h);const s=this.#Jj,i=Le.get(t);return s.Wk().EO().uP(s,i)}fP(){const t=this.#Jj,s=t.Wk().EO().dP(t);return s?s.wk():null}getParent(){const t=this.#Jj.v5();return t?t.wk():null}G5(){const t=this.#Jj.C5();return t?t.wk():null}*I5(){for(const t of this.#Jj.I5())yield t.wk()}_5(){return this.#Jj.E5()}D5(t){const s=this.#Jj.A5(t);return s?s.wk():null}*children(){for(const t of this.#Jj.children())yield t.wk()}*N5(){for(const t of this.#Jj.N5())yield t.wk()}L5(t,s){Ae.ih(t,h),Ae.Le(s),s=s||{};const i=this.#Jj,e=Le.get(t);i.O5(e,s)}removeChild(t){Ae.ih(t,h);const s=this.#Jj,i=Le.get(t);s.R5(i)}k5(){const t=this.#Jj;if(t.P5()){const s=t.v5();s.R5(t)}}F5(){const t=this.#Yj;return{j5:t.B5(),z5:t.U5(),W5:t.Q5(),V5:t.J5(),Y5:t.H5(),q5:t.Z5(),X5:t.K5(),tB:t.sB(),iB:t.eB()}}hB(t,s){Ae.Se(t),Ae.Se(s),this.#Yj.nB(t,s)}rB(){const t=this.#Yj;t.oB(),t.Zj()}aB(t,s,i){Ae.Se(t),Ae.Se(s),Ae.Ne(i);const e=this.#Yj;e.lB(t,s,i)&&e.Zj()}uB(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN,o=this.#Yj;if(o.cB()){const a=o.fB(),l=a.tb(t,s);null!==l&&(i=l.pT(),e=l.yT(),h=l.wT(),n=l.TT(),r=l.xT())}return{x:i,y:e,oF:h,u:n,v:r}}dB(){const t=this.#Yj;if(!t.cB())return[0,0];const s=t.fB();return[s.WT(),s.QT()]}}};0;const De=self.Ps,Ae=self.Ys,Ne=self.g4,Le=new WeakMap,Oe=De.Fs(),Re=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Re.entries()].map(t=>[t[1],t[0]])),Pe=De.un(De.Ho);self.pB=t(self.AF),self.mB=t(self.aj)}{const Fe=self.Ys;self.gB=class extends self.pB{#JP;constructor(){super(),this.#JP=self.AF.kF()}yB(){return this.#JP.wB().MB()}focus(){this.#JP.wB().SB()}blur(){this.#JP.wB().TB()}bB(t,s){Fe.Ge(t),this.#JP.wB().xB(t,s)}}}{let e=function(t){let s=ze.get(t);return s||(s=je.un(je.Event.Jf),ze.set(t,s)),s};e;const je=self.Ps,Be=self.Ys,ze=new WeakMap,Ue=je.Fs();self.vB=class{#JP;constructor(){const t=je.HP.YP(Ue),s={runtime:{value:(this.#JP=t).Wk().qP(),writable:!1},behavior:{value:t.CB().GB(),writable:!1},IB:{value:t.EB()._B(),writable:!1}};Object.defineProperties(this,s),t.Wk().d3(this,t)}static kF(){return je.HP.PF()}get DB(){return this.#JP.AB().wk()}FF(){const t=ze.get(this);t&&(t.cn(),ze.delete(this))}addEventListener(t,s,i){Be.Ge(t),Be.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Be.Ge(t),Be.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const We=self.Ps,Qe=We.Fs();self.NB=class{constructor(){const t=We.HP.YP(Qe),s={runtime:{value:t.Wk().qP(),writable:!1},behavior:{value:t.CB().GB(),writable:!1},name:{value:t.ef(),writable:!1}};Object.defineProperties(this,s)}}}{const Ve=self.Ps,Je=Ve.Fs();self.LB=class{#JP;constructor(){const t=Ve.HP.YP(Je),s={runtime:{value:(this.#JP=t).Wk().qP(),writable:!1}};Object.defineProperties(this,s),t.Wk().d3(this,t)}C3(){return this.#JP.R3().map(t=>t.wk())}static m3(t){if(!t)return null;const s=Ve.HP.OB(t);return s?s.GB():null}}}{const Ye=self.Ps,He=self.Ys,qe=Ye.un(Ye.Ho);self.X3=class{#JP;constructor(t,s){this.#JP=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#JP.Z3();return t[this.index].ef()}get isActive(){return this.#JP.RB(this.index)}set isActive(t){t=!!t;const s=this.#JP;s.RB(this.index)!==t&&(s.kB(this.index,t),s.PB(),s.Wk().Dk())}setParameter(t,s){He.Se(t),t=Math.floor(+t);const i=this.#JP,e=i.jB(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ye.Ho){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qe.ta(s[0],s[1],s[2]),s=qe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.BB(this.index,t,s);h&&i.RB(this.index)&&i.Wk().Dk()}getParameter(t){He.Se(t),t=Math.floor(+t);const s=this.#JP,i=s.jB(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Ye.Ho?[i.ua(),i.ca(),i.fa()]:i}}}self.zB=class{#JP;constructor(t){this.#JP=t,Object.defineProperties(this,{name:{value:t.ef(),writable:!1}})}get speed(){return this.#JP.UB()}get isLooping(){return this.#JP.WB()}get repeatCount(){return this.#JP.QB()}get VB(){return this.#JP.JB()}get YB(){return this.#JP.HB()}get frameCount(){return this.#JP.qB()}ZB(){return this.#JP.XB().map(t=>t.KB())}*frames(){for(const t of this.#JP.XB())yield t.KB()}};self.zk=class{#JP;constructor(t){this.#JP=t}static Bk(t){return t.#JP}get width(){return this.#JP.pm()}get height(){return this.#JP.Cm()}getSize(){const t=this.#JP;return[t.pm(),t.Cm()]}$B(t){return t.sz(this)}iz(){return this.#JP.A_().Dl()}};{const Ze=self.Ys;self.ez=class extends self.zk{#JP;constructor(t){super(t.hz()),this.#JP=t,Object.defineProperties(this,{duration:{value:t.nz(),writable:!1},rz:{value:t.oz(),writable:!1},az:{value:t.lz(),writable:!1}})}uz(){const t=this.#JP;return[t.oz(),t.lz()]}cz(){return this.#JP.fz()}dz(t){return this.pz(t)[0]}mz(t){return this.pz(t)[1]}pz(t){let s=this.#JP,i=null;if("number"==typeof t)i=s.gz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.yz(t)}return i?[i.pT(),i.yT()]:this.uz()}Mz(){const t=this.#JP.wz();return t?t.Uu():0}Sz(t){return this.Tz(t)[0]}bz(t){return this.Tz(t)[1]}Tz(t){Ze.Se(t),t=Math.floor(t);const s=this.#JP.wz();if(!s||t<0||t>=s.Uu())return[0,0];const i=s.zu(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#JP.xz()}}}{let s=function(t){const s=Ke.get(t);if(s.vz())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Xe=self.Ys,Ke=new WeakMap;self.Gz=class{constructor(t){Ke.set(this,t),t.Wk().d3(this,t)}pause(){s(this).Cz()}resume(){s(this).Iz()}stop(){s(this).d0()}sj(t){return s(this)._z(t)}set time(t){Xe.Se(t),s(this).Ez(t)}get time(){return s(this).nN()}set totalTime(t){Xe.Se(t),s(this).Dz(t)}get totalTime(){return s(this).Az()}set isLooping(t){s(this).Nz(!!t)}get isLooping(){return s(this).Lz()}set YB(t){s(this).Oz(!!t)}get YB(){return s(this).Rz()}set playbackRate(t){Xe.Se(t),s(this).kz(t)}get playbackRate(){return s(this).Pz()}get progress(){const t=s(this);return t.nN()/t.Az()}get tags(){return s(this).Fz()}get finished(){return s(this).jz()}get isPlaying(){return s(this).IsPlaying()}get Bz(){return s(this).zz()}get Uz(){return Ke.get(this).vz()}}}{let i=new WeakMap;self.Wz=class extends self.Gz{constructor(t){super(t),i.set(this,t);const s={name:{value:t.ef(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.vz())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ys),h=new WeakMap,n=new WeakMap,r=null;self.Qz=class extends self.Gz{constructor(t,s,i){super(t),r=r||i.easeToIndexFunc,h.set(this,t),s&&n.set(this,s)}stop(){const t=i(this),s=n.get(this);s.ReleaseTween(t)}Vz(t){e.Ge(t);const s=self.Sc.Fc(r(t));i(this).Jz(s)}get DB(){const t=i(this).Yz();return t?t.wk():null}get qz(){return i(this).Zz()}set qz(t){i(this).Xz(!!t)}get value(){const t=i(this);if("value"!==t.Kz())throw new Error("not a value tween");return t.tU("value").$z()}}}self.sU=class extends self.VP{constructor(){super()}};{const $e=self.Ps,th=self.Ys,sh=$e.Fs();self.iU=class extends self.sU{#JP;#dj;#eU=0;#hU=new Map;constructor(t){if(super(),this.#JP=$e.HP.YP(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#dj=t.domComponentId,this.nU("elem-focused",t=>t.rU()),this.nU("elem-blurred",t=>{t&&t.oU()})}aU(t){const s=this.#eU++;return this.#hU.set(s,t),s}lU(t){this.#hU.delete(t)}nU(t,i){const s=this.#JP.Wk();s.vj(this.#dj,t,t=>{const s=this.#hU.get(t.elementId);i(s,t)})}uU(t){th.Be(t);for(const[s,i]of t)this.uU(s,i)}}}{const ih=self.Ps,eh=(new WeakMap,ih.Fs());self.cU=class extends self.x3{#JP;constructor(){super(),this.#JP=ih.HP.YP(eh)}fU(){}dU(){return this.#JP.hz().pU()}mU(t){}gU(t){}yU(){}MU(t){}}}{const hh=self.Ps,nh=(new WeakMap,hh.Fs());self.wU=class extends self.mB{#JP;#SU=null;#TU=null;constructor(t){super(t),this.#JP=hh.HP.YP(nh)}FF(){if(super.FF(),this.#SU){const t=this.#JP.Wk().Jf();t.removeEventListener("renderercontextlost",this.#SU),t.removeEventListener("renderercontextrestored",this.#TU),this.#SU=null,this.#TU=null}}bU(){if(!this.#SU){this.#SU=()=>this.xU(),this.#TU=()=>this.vU();const t=this.#JP.Wk().Jf();t.addEventListener("renderercontextlost",this.#SU),t.addEventListener("renderercontextrestored",this.#TU)}}xU(){}vU(){}GU(t){}}}{const rh=self.Ps,oh=rh.un(rh.Rect),ah=new WeakMap,lh=rh.Fs();self.CU=class extends self.wU{#IU=-1;#_U=!0;#EU=!1;#DU=!1;#AU=-.2;#NU=rh.un(rh.Rect,0,0,-1,-1);#LU=0;#OU=0;#RU=-1;#kU=-1;#PU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=rh.HP.YP(lh),i=(ah.set(this,s),this.#IU=this.v3.aU(this),s.Wk().AP());this.#LU=i.FU(),this.#OU=i.jU(),this.mj(!0)}FF(){super.FF(),this.v3.lU(this.#IU),this.BU("destroy"),this.#IU=-1,ah.delete(this)}zU(){const t=ah.get(this).Wk();if(t.jO())throw new Error("not valid in worker mode");return this.UU("get-element")}BU(t,s){(s=s||{}).elementId=this.#IU,this.Cj(t,s)}UU(t,s){return(s=s||{}).elementId=this.#IU,this._j(t,s)}WU(t,s){return(s=s||{}).elementId=this.#IU,this.Ij(t,s)}QU(t){t=t||{};const s=ah.get(this).xk();t.elementId=this.#IU,t.isVisible=s.W4(),t.htmlIndex=s.vk().VU(),t.htmlZIndex=s.JU(),Object.assign(t,this.YU()),this.#_U=!!t.isVisible,this._j("create",t),this.HU(!0)}qU(t){this.#_U!==(t=!!t)&&(this.#_U=t,this.BU("set-visible",{isVisible:t}))}Dj(){this.HU(!1)}ZU(){const t=ah.get(this).Wk(),s=t.AP().XU();return"Android"===rh.li.ci&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}HU(u){const c=ah.get(this);if(!c.KU()){let t=c.xk(),s=t.vk(),i=t.h5(),[e,h]=s.vF(i.Cl(),i.Il()),[n,r]=s.vF(i._l(),i.El()),o=c.Wk().AP(),a=o.RP(),l=o.PP();if(t.W4()&&s.W4())if(!this.ZU()&&(n<=0||r<=0||a<=e||l<=h))this.qU(!1);else{oh.set(e,h,n,r);const f=o.FU(),d=o.jU(),p=s.VU(),m=t.JU();if(!u&&oh.equals(this.#NU)&&this.#LU===f&&this.#OU===d&&this.#RU===p&&this.#kU===m)this.qU(!0);else{this.#NU.I(oh),this.#LU=f,this.#OU=d,this.#RU=p,this.#kU=m,this.qU(!0);let t=null;this.#DU&&(t=s.$U()+this.#AU),this.BU("update-position",{left:Math.round(this.#NU.Cl()),top:Math.round(this.#NU.Il()),width:Math.round(this.#NU.width()),height:Math.round(this.#NU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.qU(!1)}}t6(){this.UU("focus",{focus:!0})}s6(){this.UU("focus",{focus:!1})}rU(){this.#EU=!0}oU(){this.#EU=!1}i6(){return this.#EU}e6(t,s){this.postToDOMElement("set-css-style",{prop:rh.Vo(t),val:s})}h6(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}n6(t){this.postToDOMElement("remove-attribute",{name:t})}r6(){this.#PU||(this.#PU=!0,Promise.resolve().then(()=>{this.#PU=!1,this.BU("update-state",this.YU())}))}YU(){}o6(){return this.#IU}}}self.a6=class extends self.LB{constructor(){super()}};self.l6=class extends globalThis.NB{constructor(){super()}fU(){}};{const uh=self.Ps,ch=new WeakMap,fh=uh.Fs();self.u6=class extends self.vB{#lj=!1;#cj=!1;#c6=!1;constructor(){super(),ch.set(this,uh.HP.YP(fh))}FF(){super.FF(),this.mj(!1),this.gj(!1),this.f6(!1),ch.delete(this)}yj(){return uh.HP.Mj()}d6(){}wj(t){const s=ch.get(this);s.Wk().Sj(t,s.AB(),s.EB())}Tj(t){const s=ch.get(this);return s.Wk().bj(t,s.AB(),s.EB())}mj(t){if(this.#lj!==(t=!!t)){this.#lj=t;const s=ch.get(this).Wk();t?s.p6(this):s.m6(this)}}Aj(){return this.#lj}Dj(){}gj(t){if(this.#cj!==(t=!!t)){this.#cj=t;const s=ch.get(this).Wk();t?s.g6(this):s.y6(this)}}Lj(){return this.#cj}Nj(){}f6(t){if(this.#c6!==(t=!!t)){this.#c6=t;const s=ch.get(this).Wk();t?s.M6(this):s.w6(this)}}S6(){return this.#c6}T6(){}Oj(){return[]}Rj(){return null}kj(t){}}}{let e=self.Ys,h=null;self.ZO=class{constructor(t){h=t}Rk(t){h.kk(t)}Wj(t,s,i){e.Ge(t),e.Ge(s),e.Ue(i),h.b6(t,s,i)}Vj(t,s,i){return e.Ge(t),e.Ge(s),e.Ue(i),h.x6(t,s,i)}v6(t){return e.Ce(t),new self.G6(h,t)}set C6(t){h.I6(!!t)}get C6(){return h._6()}E6(t){h.D6(!!t)}A6(t){e.me(t);const s=h.N6(t);return s?s.w3():null}}}self.G6=class{#L6;#O6;#R6;#k6;#P6;#F6;constructor(t,s){const i=(this.#L6=t).sR(),e=t.oR(),h=(this.#O6=e,this.#R6=e.j6(),t.pR()),n=(this.#k6=h.B6(),this.#P6=h.z6(e),i.U6()),r=n.z6();this.#F6=r,s&&r.W6(s),t.Q6(!1)}V6(){const t=this.#L6.sR(),s=this.#R6,i=this.#F6;t.J6(s),this.#O6.Y6(this.#k6,this.#P6),t.H6(s),i.q6(i.bO()+1)}get Z6(){return this.#F6.X6()}release(){const t=this.#L6,s=t.pR(),i=t.sR().U6();t.Q6(!0),i.K6(),s.K6()}};{let d=self.Ps,h=self.Ys,p=null,n=null;self.tW=class{constructor(t,s){n=t,p=s}sW(){p.jD()}iW(t){p.PD(t)}eW(){p.VM()}hW(){p.jM()}nW(){p.KM()}setColor(t){p.AD(t[0],t[1],t[2],t[3])}rW(t,s,i,e){p.AD(t,s,i,e)}oW(){p.LD()}aW(t){p.ND(t)}lW(t){p.bw(t)}uW(){p.xw()}rect(t){p.UD(t.left,t.top,t.right,t.bottom)}cW(t,s,i,e){p.UD(t,s,i,e)}fW(t){p.iu(d.iu.Tu(t))}dW(t,s,i,e,h,n,r,o){p.oS(t,s,i,e,h,n,r,o)}pW(t,s){p.Ow(d.iu.Tu(t),d.Rect.Al(s))}mW(t,s){p.VD(d.iu.Tu(t),d.iu.Tu(s))}gW(t,s,i,e,h,n,r,o,a,l,u,c,f){p.JD(t,s,i,e,h,n,r,o,a,l,u,c,d.Rect.Al(f))}yW(t,s,i,e,h,n,r,o,a,l,u,c,f){p.Ew(t,s,i,e,h,n,r,o,a,l,u,c,d.iu.Tu(f))}MW(t,s,i){p.YD(t,s,i)}wW(t){p.rS(t)}line(t,s,i,e){p.Am(t,s,i,e)}SW(t,s,i,e,h,n){p.Dw(t,s,i,e,h,n)}TW(t,s,i,e){p.Rw(t,s,i,e)}bW(t){p.jw(d.Rect.Al(t))}xW(t){p.Bw(d.iu.Tu(t))}vW(t){p.Jw(t)}GW(){p.Yw()}IW(t){p.Xw(t)}_W(){p.sS()}EW(t){h.eh(t,self.DW);const s=t?n.y4(t):null;p.RD(s)}AW(t,s){const i=self.zk.Bk(t);if(i)return i.NW(p,{cb:s?.cb??"clamp-to-edge",fb:s?.fb??"clamp-to-edge",pb:s?.pb??"trilinear",yb:s?.yb??!0});throw new Error("invalid IImageInfo")}LW(t){const s=self.zk.Bk(t);if(!s)throw new Error("invalid IImageInfo");s.TI()}sz(t){const s=self.zk.Bk(t);if(!s)throw new Error("invalid IImageInfo");const i=s.kx();return self.DW.OW(n,i)}RW(t,s,i){h.Se(t),h.Se(s);const e=p.Cx(t,s,{cb:i?.cb??"clamp-to-edge",fb:i?.fb??"clamp-to-edge",pb:i?.pb??"trilinear",yb:i?.yb??!0});return self.DW.OW(n,e)}kW(t,s,i){h.ih(s,self.DW);const e=n.y4(s);p.D_(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.ih(t,self.DW);const s=n.y4(t);p.Dx(s)}PW(){const t=p.bS();return new self.FW(n,t)}jW(){n.AP().BW(p)}zW(t){h.ih(t,globalThis.g4);const s=n.y4(t);s.UW(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.DW=class{constructor(t,s){dh.set(this,{runtime:t,WW:s}),ph.set(s,this),t.d3(this,s),Object.defineProperties(this,{width:{value:s.pm(),writable:!1},height:{value:s.Cm(),writable:!1}})}static OW(t,s){if(!s)return null;const i=ph.get(s);return i||new self.DW(t,s)}}}{let e=function(t){return gh.get(t).QW};e;const mh=self.Ys,gh=new WeakMap;self.FW=class{constructor(t,s){gh.set(this,{runtime:t,QW:s}),t.d3(this,s)}release(){e(this).cn()}set VW(t){mh.Ge(t),e(this).EI(t)}get VW(){return e(this).NC()}set JW(t){mh.Se(t),e(this).DI(t)}get JW(){return e(this).AI()}set lineHeight(t){mh.Se(t),e(this).LI(t)}get lineHeight(){return e(this).OI()}set YW(t){e(this).RI(t)}get YW(){return e(this).kI()}set HW(t){e(this).FI(t)}get HW(){return e(this).jI()}setColor(t){mh.Be(t),this.qW(t[0],t[1],t[2])}qW(t,s,i){e(this).QI(t,s,i)}ZW(t){mh.Ge(t),e(this).hT(t)}set XW(t){e(this).VI(t)}get XW(){return e(this).JI()}set verticalAlign(t){e(this).YI(t)}get verticalAlign(){return e(this).HI()}set KW(t){e(this).qI(t)}get KW(){return e(this).ZI()}set $W(t){e(this).XI(t)}get $W(){return e(this).KI()}set text(t){mh.Ge(t),e(this).yf(t)}get text(){return e(this).$I()}K3(t,s,i){mh.Se(t),mh.Se(s),mh.Se(i),e(this).t_(t,s,i)}$B(){const{runtime:t,QW:s}=gh.get(this),i=s.kx();return self.DW.OW(t,i)}iz(){return e(this).A_().Dl()}tQ(t){mh.He(t),e(this).xI=t}sQ(){e(this).TI()}get iQ(){return e(this).i_()}get eQ(){return e(this).h_()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Mh.get(i)||""},n=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,n;const g=self.Ps,yh=new Set(["local","remote"]),Mh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.hQ=class extends g.an{constructor(t,s){super();const i=s.exportType,e=(this.df=t,this.nQ="folders",this.rQ=new Map,this.oQ="cordova"===i,this.aQ=!!s.isiOSCordova,this.lQ=!!s.isFileProtocol,this.uQ=s.swClientId,this.cQ=s.supportedAudioFormats||{},this.fQ=new Map,this.dQ=!1,this.pQ=s.scriptFolder,this.mQ="",this.gQ="",this.yQ="",this.MQ=s.fileMap||new Map,this.wQ=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.SQ=e?"remote":"local",this.TQ=new Map,this.bQ=[],this.xQ=[],this.vQ=!1,this.GQ=0,this.CQ=0,this.IQ=0,this._Q=!1,this.EQ=g.un(g.Cd,()=>this.DQ(),50),this.AQ=g.un(g.yd,Math.max(g.hardwareConcurrency,8)),this.NQ=g.un(g.yd,20),this.LQ=new self.Pk(this)}cn(){for(const t of this.TQ.values())t.cn();this.TQ.clear(),g.Wr(this.xQ),this.df=null}Wk(){return this.df}OQ(t){this.nQ=t}Xk(){return this.nQ}RQ(){return this.pQ}kQ(t){this.mQ=t}tP(){return this.mQ}PQ(t){this.gQ=t}FQ(){return this.gQ}jQ(t){this.yQ=t}BQ(){return this.yQ}zQ(){return this.lQ}Eo(t,s){return s=s||this.SQ,g.vo(t)?("flat"===this.nQ&&(t=t.toLowerCase()),this.oQ&&this.lQ?this.UQ(t):"playable-ad-single-file"===this.df.IP()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.AQ:this.NQ).yc(()=>g.Eo(t))):g.Eo(t)}Do(t){return g.vo(t)?("flat"===this.nQ&&(t=t.toLowerCase()),this.oQ&&this.lQ?this.WQ(t):"playable-ad-single-file"===this.df.IP()?g.No(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.SQ?this.AQ:this.NQ).yc(()=>g.Do(t))):g.Do(t)}Io(t){return g.vo(t)?("flat"===this.nQ&&(t=t.toLowerCase()),this.oQ&&this.lQ?this.QQ(t):"playable-ad-single-file"===this.df.IP()?g.Lo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.SQ?this.AQ:this.NQ).yc(()=>g.Io(t))):g.Io(t)}async _o(t){const s=await this.Io(t);return JSON.parse(s)}VQ(t,s){return"flat"===this.nQ&&(t=t.toLowerCase()),this.df.Nk("runtime","cordova-fetch-local-file",{filename:t,as:s})}QQ(t){return this.VQ(t,"text")}async UQ(t){const s=await this.VQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async JQ(t){"flat"===this.nQ&&(t=t.toLowerCase());let s=this.rQ.get(t);if(!s){const i=await this.UQ(t);s=URL.createObjectURL(i),this.rQ.set(t,s)}return s}WQ(t){return this.VQ(t,"buffer")}Kk(t){"flat"===this.nQ&&(t=t.toLowerCase());let s=this.mQ+t;return"Gecko"===g.li.yi&&"preview"===this.df.IP()?this.YQ(s):s}qk(t){return g.xo(t)?Promise.resolve(t):this.oQ&&this.lQ?this.JQ(t):"playable-ad-single-file"===this.df.IP()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.nQ&&(t=t.toLowerCase()),Promise.resolve(t))}HQ(s){if(g.xo(s)||"preview"!==this.df.IP()||!this.uQ||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.uQ),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}qQ(t){return this.qk(t)}ZQ(t){if(t.XQ&&!yh.has(t.XQ))throw new Error("invalid load policy");let s=this.TQ.get(t.url);return s||(s=g.un(g.KQ,this,{url:t.url,size:t.size||0,XQ:t.XQ||this.SQ}),this.TQ.set(s.$Q(),s),this.vQ)||(this.GQ+=s.ac(),this.xQ.push(s.tV().then(()=>this.sV(s.ac())))),s}iV(t){this.TQ.delete(t.$Q())}async eV(){try{await Promise.all(this.xQ),this.IQ=1}catch(t){console.error("Error loading: ",t),this._Q=!0,this.DQ()}}hV(){this.vQ=!0}nV(){return this._Q}sV(t){this.CQ+=t,this.EQ.Fd()}DQ(){const t=g.un(g.Event,"loadingprogress");this.IQ=g.yn(this.CQ/this.GQ,0,1),t.progress=this.IQ,this.df.Jf().dispatchEvent(t)}HR(){return this.IQ}ZR(){return this.df.oV().rV()}aV(t){g.Yr(this.bQ,t),this.bQ.length&&this.xQ.push(this.lV())}async lV(){const t=[],s=[];for(const[i,e,h]of this.bQ)this.GQ+=h,t.push(this.uV(i,e,s).then(()=>this.sV(h)));await Promise.all(t),this.df.jO()&&0<s.length&&await this.df.Nk("runtime","load-webfonts",{webfonts:s})}async uV(s,i,e){try{let t=await this.qk(i);"Gecko"===g.li.yi&&(s=`'${s}'`),("Gecko"===g.li.yi&&"preview"===this.df.IP()||"playable-ad-single-file"===this.df.IP())&&(t=this.YQ(t));const h=new FontFace(s,`url('${t}')`);(this.df.jO()?self:document).fonts.add(h),await h.load(),this.df.jO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}cV(t){return!!this.cQ[t]}fV(t,s){this.dQ=!!s;for(const[i,e,h]of t)this.fQ.set(i,{fileName:i,dV:e.map(t=>({type:t[0],pV:t[1],mV:i+t[1],fileSize:t[2]})),isMusic:h})}gV(t){"flat"===this.nQ&&(t=t.toLowerCase());const s=this.fQ.get(t);if(!s)return null;let i=null;for(const e of s.dV)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.cV(e.type))return e;return i}yV(t){const s=this.gV(t);return s?{url:this.Kk(s.mV),type:s.type}:null}MV(){if(this.dQ){const t=[];for(const s of this.fQ.values())if(!s.isMusic){const i=this.gV(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.Kk(i.mV),type:i.type,fileSize:i.fileSize})}return t}return[]}wV(t){return"preview"===this.df.IP()&&(t=new URL(t,location.href).toString()),this.MQ.get(t)||null}YQ(t){let s=this.wQ.get(t);if(!s){const i=this.wV(t);if(!i)return t;s=URL.createObjectURL(i),this.wQ.set(t,s)}return s}GO(){return this.LQ}async eP(...t){const s=await Promise.all(t.map(t=>this.qk(t)));if(this.df.jO())if(1===t.length){const i=t[0];await import((g.vo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.vo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>n(t)))}async nP(t){if(WebAssembly.compileStreaming){const s=await this.qk(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.Do(t);return WebAssembly.compile(i)}}async oP(t){const s=await this.qk(t);return this.df.Nk("runtime","add-stylesheet",{url:s})}}}{const wh=self.Ps;wh.SV=class extends wh.an{constructor(t,s){super(),this.TV=t,this.df=t.Wk(),this.bV=s.url||"",this.xV=s.size,this.vV=s.XQ,this.GV=s.blob||null,this.CV=!!this.GV,this.Ug=null}cn(){this.Ug=null,this.TV=null,this.df=null,this.GV=null}$Q(){return this.bV}ac(){return this.xV}tV(){return"local"===this.vV||this.GV?(this.CV=!0,Promise.resolve()):(this.Ug||(this.Ug=this.TV.Eo(this.bV,this.vV).then(t=>(this.CV=!0,this.Ug=null,this.GV=t)).catch(t=>{console.error("Error loading resource: ",t),this.Ug=null})),this.Ug)}IV(){return this.CV}_V(){return this.GV?Promise.resolve(this.GV):this.Ug||this.TV.Eo(this.bV,this.vV)}}}{const Sh=self.Ps,ln=new Sh.yd,un=new Set;Sh.KQ=class extends Sh.SV{constructor(t,s){super(t,s),this.EV=null,this.DV=null,this.g1=0,this.AV=-1,this.NV=-1,un.add(this)}cn(){if(0!==this.g1)throw new Error("released image asset which still has texture references");this.TV.iV(this),this.EV=null,un.delete(this),super.cn()}static LV(){for(const t of un)t.EV=null,t.DV=null,t.g1=0}NW(t,s){return s=s||{},this.g1++,this.DV?Promise.resolve(this.DV):(this.EV||(s.mb=this.df.AP().OV(),this.EV=this.RV(t,s)),this.EV)}async RV(s,i){try{const e=await this._V();return 0===this.g1?this.EV=null:await ln.yc(async()=>{const t=await s.MA(e,i);return this.EV=null,0===this.g1?(s.Dx(t),null):(this.DV=t,this.AV=t.pm(),this.NV=t.Cm(),this.DV)})}catch(t){throw console.error("Failed to load texture: ",t),t}}TI(){if(this.g1<=0)throw new Error("texture released too many times");if(this.g1--,0===this.g1&&this.DV){const t=this.DV.PS();t.Dx(this.DV),this.DV=null}}kV(){return this.g1}kx(){return this.DV}pm(){return this.AV}Cm(){return this.NV}async PV(){const t=await this._V();return Sh.Ui.ImageBitmap?createImageBitmap(t):Sh.Ro(t)}}}{let t=function(t,s){return t.xk().FV()-s.xk().FV()};t;const cn=self.Ps;cn.jV=class extends cn.an{constructor(t,s,i){super(),this.BV=t,this.il=s,this.el=i,this.zV=[],this.UV=!0,this.WV=new Set,this.QV=!1}cn(){cn.Wr(this.zV),this.WV.clear(),this.BV=null}d0(){cn.Wr(this.zV),this.UV=!0,this.WV.clear(),this.QV=!1}VV(){this.UV=!1}nc(){if(this.zV.length){if(this.zV.length>this.WV.size)return!1;this.JV()}return!0}YV(t){this.WV.has(t)?(this.WV.delete(t),0===this.WV.size&&(this.QV=!1)):(this.zV.push(t),this.UV=1===this.zV.length)}G0(t){this.WV.add(t),this.QV=!0,50<=this.WV.size&&this.JV()}JV(){this.QV&&(this.zV.length===this.WV.size?this.d0():(cn.Kr(this.zV,this.WV),this.WV.clear(),this.QV=!1))}HV(){this.UV||(this.zV.sort(t),this.UV=!0)}qV(t){this.JV(),this.HV(),this.zV.length&&t.push(this.zV)}}}{const fn=self.Ps;fn.ZV=class extends fn.an{constructor(t,s){super(),this.XV=t,this.KV=s,this.$V=fn.un(fn.ic)}cn(){this.$V.cn(),this.$V=null}t8(t,s,i){let e=this.$V.ei(t,s);return e||(i?(e=fn.un(fn.jV,this,t,s),this.$V.Set(t,s,e),e):null)}s8(t){return Math.floor(t/this.XV)}i8(t){return Math.floor(t/this.KV)}e8(e,h,n){if(h)for(let i=h.Cl(),t=h._l();i<=t;++i)for(let t=h.Il(),s=h.El();t<=s;++t)if(!n||!n.Kl(i,t)){const r=this.t8(i,t,!1);r&&(r.G0(e),r.nc())&&this.$V.rc(i,t)}if(n)for(let i=n.Cl(),t=n._l();i<=t;++i)for(let t=n.Il(),s=n.El();t<=s;++t)h&&h.Kl(i,t)||this.t8(i,t,!0).YV(e)}h8(t,s){let i=this.s8(t.Cl()),e=this.i8(t.Il()),h=this.s8(t._l()),n=this.i8(t.El());for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.t8(i,t,!1);r&&r.qV(s)}}n8(t){let s=t.Cl(),i=t.Il(),e=t._l(),h=t.El();for(;s<=e;++s)for(let t=i;t<=h;++t){const n=this.t8(s,t,!1);n&&n.VV()}}}}{let r=function(t,s){return t.xk().FV()-s.xk().FV()},t=function(t,s){return t.xk().wT()-s.xk().wT()};r,t;const w=self.Ps,dn=new w.Rect,pn=new w.iu,mn=[],gn=(new w.Rect,new w.Rect,self.Ss),vh=gn._s,Uh=gn.Es,xh=gn.vs,yn=xh.create(),Mn=vh.create(),wn=Uh.create(),Sn=vh.create(),Tn=vh.create(),bn=vh.create(),xn=w.un(w.sl),vn=(w.un(w.Rect),[]),Gn=[],Cn=[],In={name:"",sid:-1,r8:!1,isVisible:!0,isInteractive:!0,J4:!1,backgroundColor:[1,1,1,1],aF:!0,o8:[1,1],opacity:1,cF:!1,a8:!1,l8:!1,u8:!1,scaleRate:1,TL:0,oF:0,c8:[],f8:[],d8:[]};w.p8=class extends w.an{constructor(t,s,i){super(),i=Object.assign({},In,i),this.m8=t,this.df=t.Wk(),this.g8=s,this.mn=i.name,this.Kg=-1,this.y8=!!i.J4,this.M8=-1,this.w8=i.sid,this.S8=!!i.r8,this.T8=!!i.isVisible,this.b8=!!i.isInteractive,this.x8=w.un(w.Ho),this.x8.Va(i.backgroundColor),this.v8=!!i.aF,this.G8=i.o8[0],this.C8=i.o8[1],this.tT=w.un(w.Ho,1,1,1,i.opacity),this.I8=w.un(w.Ho),this._8=!!i.cF,this.E8=!!i.a8,this.D8=!!i.l8,this.A8=!!i.u8,this.N8=i.scaleRate,this.$S=i.TL,this.L8=null,this.O8=1,this.sT=i.oF,this.k8=0,this.P8=0,this.F8=0,this.j8=!1,this.yE=w.un(w.Rect),this.B8=w.un(w.Rect),this.z8=w.un(w.Rect),this.U8=!0,this.Sx=xh.create(),this.W8=!0,this.oL=xh.create(),this.Q8=!0,this.V8=w.un(w.oy.yy),this.J8=!0,this.Y8=[],this.H8=i.c8,this.q8=[],this.Z8=[],this.X8=new Map,this.zV=[],this.K8=!1,this.tJ=!1,this.sJ=!1;const h=this.df.AP();this.iJ=w.un(w.eJ,this,i.f8),this.MO=w.un(w.oy.MN,h.hJ(),{oN:(t,s)=>{const i=s.uO(),e=i.pA();t.hT(i.nJ()),t.bA(e),t.xA(e),h.rJ(e)},lN:t=>this.q3().oJ(t)}),this.aJ=!0,this.lJ=!0,this.uJ=null,this.cJ=[],this.fJ=!1,this.dJ=w.un(w.Rect,0,0,-1,-1),this.pJ=w.un(w.Rect,0,0,-1,-1),this.mJ=new self.g4(this),this.gJ(),this.yJ()&&(this.uJ=w.un(w.ZV,this.df.zO(),this.df.WO())),this.MJ=i.d8.map(t=>w.p8.wJ(this.m8,this,t))}SJ(){for(const t of this.H8){const s=this.df.TJ(t[1]);this.m8.bJ(s),s.xJ()||(s.vJ(t),s.GJ(this.Kg)),this.q8.push(t),this.X8.set(t[2],t)}w.Yr(this.Y8,this.q8),this.H8=null}static wJ(t,s,i){return w.un(w.p8,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],J4:i[19],backgroundColor:i[4].map(t=>t/255),aF:i[5],o8:[i[6],i[7]],opacity:i[8],cF:i[9],a8:i[17],l8:i[18],u8:i[10],scaleRate:i[11],TL:i[12],oF:i[16],c8:i[14],f8:i[15],d8:i[20]})}cn(){for(const t of this.MJ)t.cn();w.Wr(this.MJ);for(const s of this.zV)this.df.BF(s);w.Wr(this.zV),this.iJ.cn(),this.iJ=null,this.MO.cn(),this.MO=null,this.mJ=null,this.g8=null,this.m8=null,this.df=null}CJ(t){return this.X8.get(t)}IJ(h){let n=this.m8._J(),r=0,o=this.q8;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.df.TJ(t[1]),i=!0;if(!s.EJ()||n){const a=this.df.DJ(t,this,!0);h.push(a),s.AJ()&&(i=!1,this.Z8.push(a.YF()))}i&&(o[r]=o[e],++r)}w.Ur(o,r),this.df.Y3(),this.Ek()}NJ(t,s){if(!t.G3().$P())throw new Error("instance is not of world type");const i=t.xk();if(i.vk()!==this)throw new Error("instance added to wrong layer");this.zV.push(t),0!==i.wT()&&(this.sJ=!0),s&&this.yJ()&&t.xk().Zj(),this.Ek(t)}LJ(t){this.zV.includes(t)||(this.zV.push(t),0!==t.xk().wT()&&(this.sJ=!0),this.Ek(t))}OJ(t,s){const i=t.xk();if(i.vk()!==this)throw new Error("instance added to wrong layer");this.zV.unshift(t),0!==i.wT()&&(this.sJ=!0),this.Ek(t),s&&this.yJ()&&t.xk().Zj()}RJ(t,s){const i=this.zV.indexOf(t);i<0||(s&&this.yJ()&&t.xk().kJ(),this.zV.splice(i,1),this.Ek(t),this.PJ())}FJ(){this.sJ=!0}PJ(){0===this.zV.length&&(this.sJ=!1)}jJ(t){if(t){const s=new Set;for(const i of this.zV){const e=i.xk().FV();0<=e&&s.add(e)}let t=-1;for(const h of this.zV){const n=h.xk();if(!(0<=n.FV())){for(++t;s.has(t);)++t;n.BJ(t)}}}this.zV.sort(r)}zJ(){}UJ(){for(const t of this.zV)t.LF().AJ()||this.df.BF(t);this.df.Y3(),w.Wr(this.zV),this.sJ=!1,this.Ek()}WJ(s,t,i,e,h,n){const r=this.df.sR(),o=this.df.QJ(),a=s.VJ(),l=[];for(const u of this.q8){const c=u[0],f=c[0],d=c[1];if(t.Kl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.JJ(p))continue}let t=h;if(!t){const y=this.df.Tk();t=this.hk()===y?this:(t=y.YJ(this.ef()))||y.Ck(this.bO())}const m=this.df.DJ(u,t,!1,void 0,void 0,!1,n),g=(t.U3(m),m.xk());g.t5(i,e),g.Zj(),r.W3(!0),m.Q3(),r.W3(!1),l.push(m)}}return l}j3(){return this.zV.length}hk(){return this.m8}ef(){return this.mn}HJ(t){this.Kg=t}bO(){return this.Kg}qJ(t){this.M8=t}VU(){return this.M8}Y4(){return this.y8}H4(t){this.y8!==(t=!!t)&&(this.y8=t,this.m8.ZJ(),this.df.Dk())}XJ(){let t=this.L4();return(t?t.P4():this.hk().KJ()).indexOf(this)}$J(){return this.w8}Wk(){return this.df}tY(){return this.S8}sY(){for(const t of this.O4())if(t.tY())return!0;return!1}UP(){return this.df.UP()}q3(){return this.iJ}TO(){return this.iY(),this.MO}iY(){const t=this.eY();if(this.aJ||t!==this.lJ||this.MO.aL()){const s=this.q3().hY();this.MO.lL(s.map(t=>t.lv()),{cN:s.map(t=>t.bO()),fN:!t,yN:!0}),this.aJ=!1,this.lJ=t}}PB(){this.q3().PB(),this.aJ=!0}yJ(){return this.A8&&!this.D8}nY(){return this.uJ}rY(){this.fJ=!1}W4(){for(const t of this.aY())if(!t.B4())return!1;return!0}B4(){return this.T8}z4(t){this.T8!==(t=!!t)&&(this.T8=t,this.df.Dk())}V4(t){this.b8=!!t}Q4(){return this.b8}Z4(){for(const t of this.aY())if(!t.Q4())return!1;return!0}gF(t){if(this.j8!==(t=!!t)){if(this.j8=t){const s=this.hk();this.P8=s.n4(),this.F8=s.o4()}this.lY(),this.df.Dk()}}uY(){return this.j8}h4(t){const s=this.hk(),i=s.cY(),e=s.fY();this.P8!==(t=(t=e<t?e:t)<i?i:t)&&(this.P8=t,this.uY())&&(this.lY(),this.df.Dk())}r4(t){const s=this.hk(),i=s.dY(),e=s.pY();this.F8!==(t=(t=e<t?e:t)<i?i:t)&&(this.F8=t,this.uY())&&(this.lY(),this.df.Dk())}n4(){return this.uY()?this.P8:this.hk().n4()}o4(){return this.uY()?this.F8:this.hk().o4()}MF(){return this.mY(),this.yE}gY(){return this.mY(),this.B8}yY(){return this.mY(),this.z8}_4(){const t=this.hk();return[t.MY(),t.wY()]}yM(t){return this.df.yM(t)}SY(c,e){const h=this.gY();if(0===c)e.I(h);else{let o=h.Ol(),a=h.Rl(),t=this.TY(c),s=h.width()/t,i=h.height()/t,[l,u]=this._4();if(.5!==l||.5!==u){let t=this.bY(),s=this.df,i=this.yM()/t,e=(l-.5)*s.xY()/i,h=(u-.5)*s.vY()/i,n=this.e4(),r=(0!==n&&(xn.set(e,h),xn.rotate(n),e=xn.rl(),h=xn.al()),w.Ln(t,0,c));o+=w.kt(e,0,r),a+=w.kt(h,0,r)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}DD(){return this.tT.da()}ND(t){t=w.yn(t,0,1),this.tT.da()!==t&&(this.tT.aa(t),this.gJ(),this.df.Dk())}gJ(){this.I8.I(this.tT),this.I8.xa()}nJ(){return this.I8}eY(){return this.tT.wa(1,1,1,1)}sF(){return this.N8}tF(t){this.N8!==t&&(this.N8=t,this.lY(),this.df.Dk())}hF(){return this.G8}rF(){return this.C8}GY(t,s){this.G8===t&&this.C8===s||(this.G8=t,this.C8=s,this.lY(),this.df.Dk())}eF(t){this.GY(t,this.rF())}nF(t){this.GY(this.hF(),t)}ST(t){this.sT!==t&&(this.sT=t,this.df.Dk())}wT(){return this.sT}i4(t){t=w.Mn(t),this.k8!==t&&(this.k8=t,this.lY(),this.df.Dk())}e4(){return w.Mn(this.m8.e4()+this.k8)}iF(){return this.k8}CY(){return 0<this.zV.length}Ik(){return this.zV}IY(){return this._Y()&&this.D8?(w.Yr(Cn,this.Ik()),Cn.sort((t,s)=>this.EY(t,s)),Cn):this.Ik()}DY(t){w.Zh(t,this.IY());for(const s of this.MJ)s.W4()&&0<s.DD()&&s.DY(t)}EY(t,s){const i=this.hk().AY(),e=i[0],h=i[1],n=i[2],r=t.xk(),o=s.xk(),a=r.pT()-e,l=r.yT()-h,u=r.wT()-n,c=o.pT()-e,f=o.yT()-h,d=o.wT()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}mF(){return this.x8}uF(){return this.v8}lF(t){this.v8!==(t=!!t)&&(this.v8=t,this.df.Dk())}dF(){return this._8}fF(t){this._8!==(t=!!t)&&(this._8=t,this.df.Dk())}NY(){return!this.Wk().LY()||!this.E8}_Y(){return!this.NY()}OY(){return this._Y()&&this.hk().RY()}kY(){if(!this.OY())return!1;for(const t of this.MJ)if(!t.kY())return!1;return!0}eT(t){this.$S!==t&&(this.$S=t,this.df.Dk())}pF(){return this.$S}PY(){return!this.g8}L4(){return this.g8}FY(t){this.g8=t}P4(){return this.MJ}jY(){return 0<this.MJ.length}BY(t,s=!0){s?this.MJ.push(t):this.MJ.unshift(t)}zY(t,s,i){let e=this.MJ.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.MJ.splice(e,0,t)}UY(t){const s=this.MJ.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.MJ.splice(s,1)}WY(){for(const t of this.MJ)if(t.QY())return!0;return!1}*j4(){for(const t of this.MJ)yield*t.j4();yield this}*O4(){let t=this.L4();for(;t;)yield t,t=t.L4()}*aY(){yield this,yield*this.O4()}VY(t){for(const s of this.O4())if(s===t)return!0;return!1}JY(t){return this===t||this.G8===t.G8&&this.C8===t.C8&&this.O8===t.O8&&this.N8===t.N8&&this.k8===t.k8&&this.n4()===t.n4()&&this.o4()===t.o4()}YY(){return{parallaxX:this.hF(),parallaxY:this.rF(),scale:this.K4(),scaleRate:this.sF(),angle:this.iF(),hasOwnScroll:this.uY(),scrollX:this.n4(),scrollY:this.o4()}}HY(t){this.GY(t.parallaxX,t.parallaxY),this.X4(t.scale),this.tF(t.scaleRate),this.i4(t.angle),this.gF(t.hasOwnScroll),this.h4(t.scrollX),this.r4(t.scrollY),this.mY()}qY(t){if(0!==t.size){const s=w.Kr(this.zV,t);0<s&&(this.PJ(),this.Ek())}}Ek(t){this.K8=!1,this.fJ=!1,t&&!t.LF().G3().s3()||(this.tJ=!1)}ZY(){if(!this.K8){if(this.zV.sort(t),this.yJ())for(let t=0,s=this.zV.length;t<s;++t){const i=this.zV[t].xk();i.BJ(t),this.uJ.n8(i.XY())}else for(let t=0,s=this.zV.length;t<s;++t)this.zV[t].xk().BJ(t);this.K8=!0}}KY(){if(!this.tJ){let t=this.m8.$Y(this.VU()),s=t.map(t=>[...t.j4()]).flat(),i=0;for(const e of s){for(const h of e.Ik())h.LF().G3().s3()&&h.xk().tH(i++);e.sH()}}}sH(){this.tJ=!0}iH(){return{isVisible:this.W4(),opacity:this.DD(),isInteractive:this.Q4()}}eH(t,s,i){const e=t.xk(),h=s.xk();if(e.vk()!==this||h.vk()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let n=e.Gk(),r=h.Gk();return n!==r+(i?1:-1)&&(w.Hr(this.zV,n),n<r&&r--,i&&r++,r===this.zV.length?this.zV.push(t):this.zV.splice(r,0,t),this.Ek(t),!0)}hH(t,s){let i=[],e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const o=t[e],a=s[h];o.xk().FV()<a.xk().FV()?(i.push(o),++e):(i.push(a),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}nH(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],n=s[t+1];i.push(this.hH(h,n))}return e%2==1&&i.push(s[e-1]),i}rH(t){for(;1<t.length;)t=this.nH(t);return t[0]}oH(){return this.ZY(),w.Wr(mn),this.uJ.h8(this.MF(),mn),mn.length?1===mn.length?mn[0]:this.rH(mn):[]}QY(){return this.W4()&&0<this.DD()&&this.aH()}aH(){if(this.CY()||!this.uF())return!0;for(const t of this.MJ)if(t.aH())return!0;return!1}lH(){return this.dF()||!this.eY()||0!==this.pF()||this.iJ.uH()}cH(){if(this.lH())return!0;for(const t of this.MJ)if(t.cH())return!0;return!1}pA(){return this.L8}TY(t){if(this.m8.A4())return 1;{const s=this.fH();return s/(s-t)}}dH(t){const s=this.df.DF();if(this.m8.A4())return s;{const i=this.fH(),e=this.yM();return e/Math.abs(i-t)*s}}lY(){this.Q8=!0,this.J8=!0,this.U8=!0}pH(t){return this.Q8&&(this.mH(t,this.oL,0,0,null),this.Q8=!1),this.oL}bY(t){return this.yM(t)/this.gH()}fH(){return this.OY()?this.hk().AY()[2]:this.bY()}yH(){if(this.OY()){const t=this.hk().AY();return[t[0],t[1],t[2]]}return this.MH()}MH(t=0,s=0,h=0){let n=this.df,i=this.hk(),e=n.wH(),r=n.SH(),o=(this.n4()-e)*this.G8+e,a=(this.o4()-r)*this.C8+r,l=(n.JO()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.A4()?this.yM(h):this.bY(h),[f,d]=this._4();if(.5!==f||.5!==d){let t=this.yM(h)/c,s=(f-.5)*n.xY()/t,i=(d-.5)*n.vY()/t,e=this.e4();0!==e&&(xn.set(s,i),xn.rotate(e),s=xn.rl(),i=xn.al()),l+=s,u+=i}return[l,u,c]}mH(t,s,i,e,h){const n=this.df,r=this.hk();if(this.OY()){vh.I(Sn,r.AY()),vh.I(Tn,r.TH()),vh.I(bn,r.bH());const o=n.wH(),a=n.SH(),l=Tn[0]-Sn[0],u=Tn[1]-Sn[1],c=Tn[2]-Sn[2];Sn[0]=(Sn[0]-o)*this.G8+o,Sn[1]=(Sn[1]-a)*this.C8+a,Sn[2]*=Math.max(this.G8,this.C8),Tn[0]=Sn[0]+l,Tn[1]=Sn[1]+u,Tn[2]=Sn[2]+c}else{const[f,d,p]=this.MH(i,e,h),m=(vh.set(Sn,f,d,p),vh.set(Tn,f,d,p-100),this.e4());0===m?vh.set(bn,0,1,0):vh.set(bn,Math.sin(m),Math.cos(m),0)}t.LM(s,Sn,Tn,bn,h||n.vY())}xH(){this.W8=!0,this.J8=!0,this.U8=!0}vH(t){return this.W8&&(this.GH(t),this.W8=!1),this.Sx}GH(t){const s=this.df.AP(),[i,e]=this._4();if(this.m8.A4())t.NM(this.Sx,s.CH(),s.IH());else if(.5===i&&.5===e)xh.I(this.Sx,s._H());else{const h=s.CH(),n=s.IH();t.DM(this.Sx,h/n,i,e)}}UW(t,s=!0,i=0,e=0,h=0){s&&t.wD(this.vH(t));let n;n=0===i&&0===e&&0===h?this.pH(t):(this.mH(t,yn,i,e,h),yn),t.GD(n)}EH(t){this.UW(t),t.Sw(this.wT())}DH(t){let s=null;if(t.yS()&&this.df.AH()){const i=this.df.AP().NH(this);i&&(s=i.hE(),t.EA(s))}return s}LH(t){if(t.AM()&&this.df.AH()){const s=2*(this.bO()+1);t.StartMeasuringRenderPassTime(s,1+s)}}ib(t,s,i){let e=this.df.AP(),h=this.lH(),n=null,r=this.DH(t);if(this.LH(t),h){const o={pb:this.df.QO(),$b:!0,OH:!!t.AM()&&this.df.RH()};"low"===e.kH()&&(o.width=e.CH(),o.height=e.IH()),n=this.df.PH(o),this.L8=n,t.SA(n),this.uF()&&t.oA(0,0,0,0)}else this.L8=s,t.SA(s);if(this.uF()||t.hc(this.x8),this.m8.FH(t,this.L8,this.MJ,h&&this.uF()),this.LH(t),this.UW(t),t.Sw(this.wT()),t.uA(this._Y()),this.gH()>Number.EPSILON){this.ZY();const a=this.yJ()&&0===this.wT()&&!this.sJ;this.OY()?this.jH(t):a?this.BH(t):this.zH(t,this.IY())}t.Sw(0),t.bw(0),h&&(t.uA(!1),this.UH(t,n,s,i)),r&&t.AA(r),this.L8=null}zH(i,e){let h=this.MF(),n=this.L8,r=this.hk().A4(),o=this.hk().WH(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).xk();u.W4()&&u.QH(h,o,r)&&this.VH(l,u,i,n)}}}jH(e){const h=this.L8,n=this.JH(),r=vn,o=Gn,a=this.IY();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.xk();if(u.W4()&&u.YH(n)){(!l.HH()||0<u.qH())&&o.push(l);const c=l.xk().i5();r.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.xk();if(d.W4()&&d.YH(n)){if(d.i5()!==c)break;(f.HH()?(0<d.qH()&&o.push(f),r):o).push(f)}}if(1!==r.length||r[0].ZH()){this.XH(e,r);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.xk();m.KH(!0),this.VH(p,m,e,h),m.KH(!1)}}else{this.VH(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.xk(),M=y.vk();M.VH(g,y,e,h)}}}s=t,w.Wr(r),w.Wr(o)}else++s}}XH(i,e){const h=this.L8;i.GA();for(let t=0,s=e.length;t<s;++t){const n=e[t],r=n.xk();r.$H(!0),this.t7(n,r,i)}i.CA();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.xk();this.VH(o,a,i,h),a.$H(!1)}i._A()}BH(t){let s=this.uJ,i=this.pJ,e=this.dJ,h=this.MF(),n;i.set(s.s8(h.Cl()),s.i8(h.Il()),s.s8(h._l()),s.i8(h.El())),this.fJ&&i.equals(e)?n=this.cJ:(n=this.oH(),this.fJ=!0,e.I(i)),this.zH(t,n),n!==this.cJ&&w.Yr(this.cJ,n)}VH(t,s,i,e){s.uH()?this.s7(t,s,i,e):this.t7(t,s,i)}t7(t,s,i){const e=s.i7();i.iw()!==e&&e.iT(),t.ib(i)}s7(t,s,i,e){this.e7(t,s,i,e,null)&&this.UW(i)}e7(t,s,i,e,h){const n=s.Hj().TO();return n.wL(i,e,{SL:t,TL:s.pF(),devicePixelRatio:this.df.h7(),time:t.n7(),bL:this.df.r7()*this.gH(),xL:this.e4(),QL:s.h5(),VL:n.aO()?null:this.o7(s),_L:h&&h._L,EL:h&&h.EL,DL:h&&h.DL,AL:h&&h.AL}),i.Sw(this.wT()),n.ID()}UH(t,s,i,e){const h=this.iJ.hY(),n=this.df;0===h.length?(t.SA(i),t.jM(),e&&0===this.$S&&this.eY()?t.TA(s):(t.eT(this.$S),t.hT(this.I8),t.bA(s)),t.xA(s),n.rJ(s)):this.TO().wL(t,i,{SL:this,TL:this.pF(),devicePixelRatio:n.h7(),bL:n.r7()*this.gH(),xL:this.e4(),QL:this.MF(),VL:null,uN:!0})}K4(){return this.O8}X4(t){this.O8!==t&&(this.O8=t,this.m8.a7(),this.lY(),this.df.Dk())}DF(){return this.gH()*this.df.DF()}$U(){return this.gH()*this.df.$U()}gH(){return(this.O8*this.m8.s4()-1)*this.N8+1}mY(){if(this.U8){this.U8=!1;let t=this.df.wH(),s=this.df.SH(),i=(this.n4()-t)*this.G8+t,e=(this.o4()-s)*this.C8+s,h=this.gH(),n=this.df.xY()/h,r=this.df.vY()/h,o=i-n/2,a=e-r/2;this.df.JO()&&(o=Math.round(o),a=Math.round(a));const l=this.B8,u=(l.set(o,a,o+n,a+r),this.e4()),c=(0!==u&&(dn.I(l),dn.offset(-l.Ol(),-l.Rl()),pn.vu(dn,u),pn.Cu(dn),dn.offset(l.Ol(),l.Rl()),l.I(dn)),this.sT);this.SY(c,this.yE),this.OY()?this.l7(c,this.z8):this.z8.I(this.yE)}}l7(t,s){let i=this.df.AP(),e=i.RP(),h=i.PP(),[n,r]=this.SF(0,0,t),[o,a]=this.SF(e,0,t),[l,u]=this.SF(e,h,t),[c,f]=this.SF(0,h,t),d=Math.min(n,o,l,c),p=Math.min(r,a,u,f),m=Math.max(n,o,l,c),g=Math.max(r,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}SF(t,s,i=0){return this.u7(t,s,i,this.$U())}CF(t,s,i=0){return this.u7(t,s,i,this.DF()*this.UP())}u7(t,s,i,e){const h=this.df,n=h.PS(),r=this.gH(),o=h.xY()/r,a=h.vY()/r,l=wn,u=(Uh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.vH(n)),c=this.pH(n),f=Mn,d=w.oy.gy(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}c7(t,s){const i=this.O8,e=this.N8,h=this.G8,n=this.C8,r=this.k8,o=(this.O8=1,this.N8=1,this.G8=1,this.C8=1,this.k8=0,this.lY(),this.SF(t,s));return this.O8=i,this.N8=e,this.G8=h,this.C8=n,this.k8=r,this.lY(),o}vF(t,s,i=0){return this.f7(t,s,i,this.$U())}_F(t,s,i=0){return this.f7(t,s,i,this.DF()*this.UP())}f7(t,s,i,e){const h=this.df,n=h.PS(),r=this.gH(),o=h.xY()/r,a=h.vY()/r,l=wn,u=(Uh.set(l,0,0,o,a),this.vH(n)),c=this.pH(n),f=Mn,d=w.oy.uy(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}d7(t,s){return t*=this.DF()*this.UP(),0!==s&&(t*=this.TY(s)),t}o7(t){const s=t.h5(),i=t.i5(),e=t.qH(),l=i+e,u=s.Cl(),c=s.Il(),f=s._l(),d=s.El();if(this.OY()){if(this.p7(u,c,i)||this.p7(f,c,i)||this.p7(f,d,i)||this.p7(u,d,i))return null;if(0<e&&(this.p7(u,c,l)||this.p7(f,c,l)||this.p7(f,d,l)||this.p7(u,d,l)))return null}else if(l>=this.bY())return null;let[p,m]=this._F(u,c,i),[g,y]=this._F(f,d,i);if(0!==this.e4()||0<e||this.OY()){const[M,w]=this._F(f,c,i),[S,T]=this._F(u,d,i);if(0<e){let[t,s]=this._F(u,c,l),[i,e]=this._F(f,c,l),[h,n]=this._F(f,d,l),[r,o]=this._F(u,d,l),a=Math.min(p,g,M,S,t,i,h,r);g=Math.max(p,g,M,S,t,i,h,r),p=a,a=Math.min(m,y,w,T,s,e,n,o),y=Math.max(m,y,w,T,s,e,n,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return dn.set(p,m,g,y),dn}JH(){return this.J8&&(this.m7(),this.J8=!1),this.V8}m7(){const t=this.df.PS(),s=this.vH(t),i=this.pH(t);this.V8.vy(i,s)}p7(t,s,i){return this.JH().Cy(t,s,i)}g7(){const t={d:this.tY(),s:this.K4(),a:this.iF(),v:this.B4(),i:this.Q4(),html:this.Y4(),bc:this.x8.toJSON(),t:this.uF(),sx:this.P8,sy:this.F8,hosp:this.j8,px:this.hF(),py:this.rF(),c:this.tT.toJSON(),sr:this.sF(),fx:this.iJ.IT(),cg:this.Z8};return t}y7(t){this.S8=!!t.d,this.O8=t.s,this.k8=t.a,this.T8=!!t.v,this.b8=!t.hasOwnProperty("i")||t.i,this.y8=!!t.html,this.x8.Va(t.bc),this.v8=!!t.t,t.hasOwnProperty("sx")&&(this.P8=t.sx),t.hasOwnProperty("sy")&&(this.F8=t.sy),t.hasOwnProperty("hosp")&&(this.j8=!!t.hosp),this.G8=t.px,this.C8=t.py,this.tT.Va(t.c),this.gJ(),this.N8=t.sr,w.Yr(this.Z8,t.cg),w.Yr(this.q8,this.Y8);let i=new Set(this.Z8),e=0;for(let t=0,s=this.q8.length;t<s;++t)i.has(this.q8[t][2])||(this.q8[e]=this.q8[t],++e);w.Ur(this.q8,e),this.iJ._T(t.fx),this.aJ=!0}M7(){this.jJ(!1),this.Ek(),this.lY(),this.xH()}u4(){return this.mJ}U3(t,s=!1){if(this.zV.includes(t))s&&this.zV.sort((t,s)=>{const i=t.xk().w7(),e=s.xk().w7();return i-e});else if(t.S7()){const i=[...t.N5()];i.push(t),i.sort((t,s)=>{const i=t.xk().w7(),e=s.xk().w7();return i-e});for(const e of i)if(e.VF())for(const h of e.JF())if(!i.includes(h)){const n=[...h.N5()];n.push(h),n.sort((t,s)=>{const i=t.xk().w7(),e=s.xk().w7();return i-e}),n&&n.length&&i.splice(i.length,0,...n)}for(const r of i)r.G3().$P()&&this.NJ(r,!0)}else if(t.G3().$P()&&this.NJ(t,!0),t.VF())for(const o of t.JF()){const a=[...o.N5()];if(a.push(o),a.sort((t,s)=>{const i=t.xk().w7(),e=s.xk().w7();return i-e}),a&&a.length)for(const l of a)l.G3().$P()&&this.NJ(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){I!==t&&(t.EH(s),I=t)},b=(l,T,self.Ps),e=self.C3Debugger,h=(b.un(b.Rect),b.un(b.Rect),b.un(b.Rect)),x=b.un(b.Ho),t=self.Ss,u=t._s,a=[],v=[],G=[],C=[],I=null;b.T7=class extends b.an{constructor(t,s,i){super(),this.b7=t,this.df=t.Wk(),this.mn=i[0],this.x7=i[1],this.v7=i[2],this.Km=i[1],this.$m=i[2],this.G7=!!i[3],this.C7=!!i[4],this.I7=i[5],this._7=i[6],this.E7=i[7],this.D7=null,this.w8=i[8],this.Kg=s,this.P8=0,this.F8=0,this.O8=1,this.k8=0,this.A7=new Set,this.N7=new Set,this.L7=new Set,this.O7=[],this.R7=[],this.k7=new Map,this.P7=new Map,this.F7=[],this.j7=!1,this.B7=u.create(),this.z7=u.create(),this.U7=u.create(),this.W7=[],this.Q7=[],this.V7=new Map,this.J7=new Map,this.Y7=-1;const h=this.df.AP();this.iJ=b.un(b.eJ,this,i[11]),this.MO=b.un(b.oy.MN,h.hJ(),{oN:(t,s)=>{const i=s.uO(),e=i.pA();t.LD(),t.bA(e),t.xA(e),h.rJ(e)},lN:t=>this.q3().oJ(t)}),this.aJ=!0,this.H7=!1,this.L8=null,this.q7={},this.Z7=new Map,this.X7=!0,this.K7=new self.H3(this),this.t9=b.un(b.Event.Jf);for(const e of i[9])this.W7.push(b.p8.wJ(this,null,e));this.s9();for(const n of this.d4())n.SJ();for(const r of i[10]){const o=this.df.TJ(r[1]);if(!o)throw new Error("missing nonworld object class");o.xJ()||o.vJ(r),this.F7.push(r),this.bJ(o)}}cn(){for(const t of this.Q7)t.cn();b.Wr(this.Q7),this.L7.clear(),this.D7=null,this.b7=null,this.df=null}Wk(){return this.df}ef(){return this.mn}$J(){return this.w8}bO(){return this.Kg}q3(){return this.iJ}TO(){return this.iY(),this.MO}iY(){const t="low"===this.df.AP().kH();if(this.aJ||this.H7!==t||this.MO.aL()){const s=this.q3().hY();this.MO.lL(s.map(t=>t.lv()),{cN:s.map(t=>t.bO()),dN:t,yN:!0}),this.aJ=!1,this.H7=t}}PB(){this.q3().PB(),this.aJ=!0}i9(){let i=this.Q7[0].gH();for(let t=1,s=this.Q7.length;t<s;++t){const e=this.Q7[t];0===e.hF()&&0===e.rF()||(i=Math.min(i,e.gH()))}return i}e9(){return.5*this.df.xY()/this.i9()}h9(){return.5*this.df.vY()/this.i9()}cY(){return this.n9()?-1/0:this.e9()}fY(){return this.n9()?1/0:this.pm()-this.e9()}dY(){return this.n9()?-1/0:this.h9()}pY(){return this.n9()?1/0:this.Cm()-this.h9()}h4(t){const s=this.cY(),i=this.fY();this.P8!==(t=(t=i<t?i:t)<s?s:t)&&(this.P8=t,this.r9(),this.df.Dk())}n4(){return this.P8}r4(t){const s=this.dY(),i=this.pY();this.F8!==(t=(t=i<t?i:t)<s?s:t)&&(this.F8=t,this.r9(),this.df.Dk())}o4(){return this.F8}n9(){return this.G7}a7(){this.h4(this.n4()),this.r4(this.o4());for(const t of this.Q7)t.uY()&&(t.h4(t.n4()),t.r4(t.o4()))}C4(t,s){this.I7===t&&this._7===s||(this.I7=t,this._7=s,this.o9()&&(this.a9(),this.r9(),this.df.Dk()))}MY(){return this.A4()?.5:this.I7}wY(){return this.A4()?.5:this._7}WH(){const t=this.MY(),s=this.wY();return t<0||1<t||s<0||1<s}E4(){this.C7&&(this.C7=!1,this.a9(),this.r9(),this.df.Dk())}D4(){this.C7||(this.C7=!0,this.a9(),this.r9(),this.df.Dk())}A4(){return this.C7}o9(){return!this.A4()}l9(t){this.j7!==(t=!!t)&&(this.j7=t,this.r9(),this.df.Dk())}RY(){return this.j7}u9(t,s,i,e,h,n,r,o,a){l(this.B7,t,s,i)&&l(this.z7,e,h,n)&&l(this.U7,r,o,a)||(u.set(this.B7,t,s,i),u.set(this.z7,e,h,n),u.set(this.U7,r,o,a),this.c9())}c9(){this.r9(),this.df.Dk()}AY(){return this.B7}TH(){return this.z7}bH(){return this.U7}s4(){return this.O8}t4(t){this.O8!==t&&(this.O8=t,this.r9(),this.a7(),this.df.Dk())}i4(t){t=b.Mn(t),this.k8!==t&&(this.k8=t,this.r9(),this.df.Dk())}e4(){return this.k8}pm(){return this.Km}xm(t){!isFinite(t)||t<1||(this.Km=t)}Cm(){return this.$m}gm(t){!isFinite(t)||t<1||(this.$m=t)}f9(){return this.D7}KJ(){return this.W7}*d4(){for(const t of this.W7)yield*t.j4()}f4(){return this.Q7}d9(){return this.Q7.length}vk(t){return"number"==typeof t?this.Ck(t):this.YJ(t.toString())}Ck(t){return t=b.yn(Math.floor(t),0,this.Q7.length-1),this.Q7[t]}YJ(t){return this.V7.get(t.toLowerCase())||null}p9(t){return!!this.YJ(t)}m9(t){return this.J7.get(t)||null}a9(){for(const t of this.Q7)t.xH()}r9(){for(const t of this.Q7)t.lY()}M4(t,s,i){if(this.p9(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.L4(),h=b.un(b.p8,this,e,{name:t,sid:Math.floor(1e15*Math.random()),r8:!0});this.g9(h,s,i),this.Wk().Dk(),this.ZJ()}S4(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.y9(t),this.g9(t,s,i),this.Wk().Dk(),this.ZJ())}b4(t){if(this.y9(t)){const s=this.df.sR();s.W3(!0),t.cn(),s.W3(!1),this.Wk().Dk(),this.ZJ()}}v4(){const t=new Set;for(const s of this.d4())s.tY()&&!s.sY()&&t.add(s);if(0!==t.size){const i=this.df.sR();i.W3(!0);for(const e of t)this.y9(e),e.cn();i.W3(!1),this.Wk().Dk(),this.ZJ()}}g9(s,i,e){if(2<=e)if(i){if(i===s||i.VY(s))throw new Error(`cannot move layer '${s.ef()}' to sub-layer of itself`);i.BY(s,2===e),s.FY(i)}else 2===e?this.W7.push(s):this.W7.unshift(s),s.FY(null);else{const t=i.L4();if(t){if(i.VY(s))throw new Error(`cannot move layer '${s.ef()}' to sub-layer of itself`);t.zY(s,i,0===e),s.FY(t)}else{let t=this.W7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.W7.splice(t,0,s),s.FY(null)}}}y9(t){const s=t.L4();if(s)return s.UY(t),!0;if(1<this.W7.length){const i=this.W7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.W7.splice(i,1),!0}return!1}s9(){this.Q7=[...this.d4()],this.V7.clear(),this.J7.clear();for(let t=0,s=this.Q7.length;t<s;++t){const i=this.Q7[t];i.HJ(t),this.V7.set(i.ef().toLowerCase(),i),this.J7.set(i.$J(),i)}}M9(){let t=0;for(const s of this.W7){for(const i of s.j4())i.qJ(t);s.Y4()&&t++}}w9(){return this.W7.at(-1).VU()+1}async ZJ(){this.s9(),this.M9(),this.Y7=this.w9()}S9(){return this.Y7}T9(){this.Y7=-1}$Y(t){const s=[];for(const i of this.W7){const e=i.VU();if(e===t)s.push(i);else if(t<e)break}return s}YY(){return{scrollX:this.n4(),scrollY:this.o4(),scale:this.s4(),angle:this.e4(),vpX:this.MY(),vpY:this.wY()}}HY(t){this.h4(t.scrollX),this.r4(t.scrollY),this.t4(t.scale),this.i4(t.angle),this.C4(t.vpX,t.vpY)}b9(){let t=this.W7.filter(t=>t.QY())[0];for(;t;){if(!t.uF())return x.la(t.mF()),x.aa(1),x;if(t.lH())return x.$o(0,0,0,0),x;t=t.P4().filter(t=>t.QY())[0]}return x.$o(0,0,0,0),x}_J(){return this.X7}x9(){return[...this.A7]}bJ(t){if(t.VF())for(const s of t.G9().v9())this.A7.add(s);else this.A7.add(t)}C9(){return[...this.N7]}I9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.Bo(this.N7,t.N7),t.N7.clear());const i=[];for(const e of this.A7)this.N7.has(e)||(i.push(e._9(s)),this.N7.add(e));return Promise.all(i)}async E9(t){if(t.VJ())throw new Error("cannot load textures for family");const s=this.df.PS();if(s&&!s.E_()&&!this.N7.has(t)){this.N7.add(t);const i=t._9(s);this.D9(i),await i,t.A9(),this.df.Dk()}}D9(t){this.L7.add(t),t.then(()=>this.L7.delete(t)).catch(()=>this.L7.delete(t))}N9(){return Promise.all([...this.L7])}L9(t){if(t.VJ()||0<t.j3())throw new Error("cannot unload textures");const s=this.df.PS();s&&this.N7.has(t)&&(this.N7.delete(t),t.O9(s))}R9(t,s){if(t!==this&&s)for(const i of this.N7)i.AJ()||t.A7.has(i)||(i.O9(),this.N7.delete(i))}k9(){this.N7.clear()}async P9(t){const s=this.df,i=this.b7,e=s.sR(),h=(this.E7&&(this.D7=e.F9(this.E7),this.D7.j9()),i.B9(this),this.Km=this.x7,this.$m=this.v7,this.P8=s.zO()/2,this.F8=s.WO()/2,this.a7(),this.a9(),this.r9(),this.M9(),await this.df.AP().z9(this.w9(),!0),this.U9(t),this.df.W9(!0),this.Q9(),this.X7||this.V9(),this.J9(this.O7),this.J9(this.R7),this.Y9(),i.H9(),s.Y3(),this.df.W9(!1),this.df.q9());if(await Promise.all(h),b.Wr(h),!s.Z9()){for(const n of this.O7)n.X9();for(const r of this.R7)r.K9(this.k7,this.P7);for(const[o,a]of Object.entries(this.q7)){const l=this.df.N6(parseInt(o,10));l&&!l.VJ()&&l.EJ()&&b.Wr(a)}for(const u of this.O7)u.tq();for(const c of this.R7)c.tq();for(const f of this.O7)f.P5()||f.sq();for(const d of this.R7)d.P5()||d.sq()}b.Wr(this.O7),b.Wr(this.R7),this.k7.clear(),this.P7.clear(),await Promise.all([...this.A7].map(t=>t.iq(this.df.PS()))),t&&(s.Jf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.eq(new b.Event("beforeprojectstart"))),await this.hq(new b.Event("beforeanylayoutstart")),s.Jf().dispatchEvent(new b.Event("beforelayoutstart")),await this.eq(new b.Event("beforelayoutstart")),s.Z9()||await s.bj(b.aq.oq.rq.nq,null,null),s.Jf().dispatchEvent(new b.Event("afterlayoutstart")),await this.eq(new b.Event("afterlayoutstart")),await this.hq(new b.Event("afteranylayoutstart")),t&&(s.Jf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.eq(new b.Event("afterprojectstart"))),e.lq(i),await this.N9(),this.X7=!1}U9(t){for(const s of this.df.QJ())if(!s.VJ()&&s.$P())for(const i of s.R3()){const e=i.xk(),h=e.vk(),n=b.yn(h.bO(),0,this.Q7.length-1),r=this.Q7[n];e._k(r,!0),r.LJ(i)}if(!t)for(const o of this.Q7)o.jJ(!1)}Q9(){for(const t of this.Q7)t.IJ(this.O7),t.zJ()}V9(){let s=!1;for(const[t,i]of Object.entries(this.q7)){const e=this.df.N6(parseInt(t,10));if(e&&!e.VJ()&&e.EJ())for(const h of i){let t=null;if(!e.$P()||(t=h.hasOwnProperty("instJson")?this.m9(h.instJson.w.l):this.m9(h.w.l))){const n=this.df.DJ(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?n._T(h.instJson):n._T(h),s=!0,this.R7.push(n),h.hasOwnProperty("instJson")&&(this.k7.set(n,h),this.P7.set(h.index,n))}}}for(const r of this.Q7)r.jJ(!0),r.Ek();s&&(this.df.Y3(),this.df.uq())}J9(s){for(const i of s)if(i.VF()){const e=i.xk(),t=i.qF();for(const h of i.LF().G9().cq())if(h!==i.LF()){const n=h.R3();if(n.length>t)i.fq(n[t]);else{let t;t=e?this.df.DJ(h,e.vk(),!0,e.pT(),e.yT(),!0):this.df.DJ(h,null,!0,0,0,!0),this.df.Y3(),h.pq(),i.fq(t),s.push(t)}}}}Y9(){for(const t of this.F7){const s=this.df.TJ(t[1]);s.VF()||this.df.DJ(t,null,!0)}}mq(){let i=[],e=this.F7,h=0;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=this.df.TJ(n[1]);r.AJ()?r.VF()&&r.G9().gq()||i.push(this.df.DJ(n,null,!0)):(e[h]=n,++h)}b.Ur(e,h),this.df.Y3(),this.J9(i)}WJ(t,s,i,e,h,n,r){if(i)return i.WJ(t,s,h,n,e,r);{const o=[];for(const a of this.Q7)o.push(a.WJ(t,s,h,n,e,r));return o.flat()}}async yq(){const t=this.b7;this.df.Z9()||(await this.hq(new b.Event("beforeanylayoutend")),await this.eq(new b.Event("beforelayoutend")),await this.df.bj(b.aq.oq.rq.Mq,null,null),await this.eq(new b.Event("afterlayoutend")),await this.hq(new b.Event("afteranylayoutend"))),t.wq(!0),this.df.sR().Sq(),this.X7||this.Tq();for(const s of this.Q7)s.UJ();for(const i of this.df.QJ())if(!(i.AJ()||i.$P()||i.G3().XP()||i.VJ())){for(const e of i.R3())this.df.BF(e);this.df.Y3()}t.wq(!1),t.$R()===this&&t.B9(null)}bq(t,s){const i=t.LF().$J().toString(),e=(this.q7.hasOwnProperty(i)||(this.q7[i]=[]),this.q7[i]),h={index:s,instJson:t.IT(),sceneGraphJson:{children:[]}};e.push(h),this.Z7.set(t,h)}xq(t){const s=this.Z7.get(t);for(const i of t.vq()){const e=this.Z7.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.Cq.Gq(i.xk())})}}Tq(){this.Z7.clear();let t=0;for(const s of this.Q7){s.ZY();for(const i of s.Ik()){const e=i.LF();!e.AJ()&&e.EJ()&&(this.bq(i,t),t++)}}for(const h of this.Q7)for(const n of h.Ik()){const r=n.LF();!r.AJ()&&r.EJ()&&this.xq(n)}this.Z7.clear()}Iq(){this.q7={},this.X7=!0}pA(){return this.L8}lH(){const t=this.df,s=t.PS().yS();return"low"===t.AP().kH()||s&&t.RH()||this.iJ.uH()||s&&t.LY()}_q(t){const s=this.df.AP();if(this.lH()){t.SA(null),t.oA(0,0,0,0);const i={pb:this.df.QO(),$b:t.AM()||this.df.RH()||this.iJ.uH(),OH:!!t.AM()&&this.df.RH()};"low"===s.kH()&&(i.width=s.CH(),i.height=s.IH()),this.L8=this.df.PH(i)}else this.L8=null}Eq(t){this.df.Dq(t)&&(t.uA(!1),t.SA(null),t.jM(),t.TA(this.L8))}Aq(t){this.lH()&&(t.uA(!1),this.Nq(t,this.L8))}Lq(t){t.SA(this.L8),t.hc(this.b9()),this.df.LY()&&t.lA();const s=this.$Y(0);this.FH(t,this.L8,s,!0),t.AM()&&t.StartMeasuringRenderPassTime(0,1),this.Aq(t),this.L8=null}Oq(t,s){let i=null;this.df.Dq(t)&&(i=this.L8),t.SA(i),t.oA(0,0,0,0),this.df.LY()&&t.lA();const e=this.$Y(s);this.FH(t,i,e,!0),this.Eq(t),t.uS(),this.df.AP().Rq(s)}FH(t,e,s,h){const n=s.filter(t=>t.QY());for(let s=0,i=n.length;s<i;){const r=n[s];if(r.kY()&&!r.cH()){a.push(r);for(let t=s+1;t<i;++t){const o=n[t];if(!o.kY()||o.cH())break;a.push(n[t])}if(2<=a.length||1===a.length&&a[0].WY()){this.kq(t,e,a),s+=a.length,b.Wr(a);continue}b.Wr(a)}r.ib(t,e,h&&0===s),++s}}Nq(t,s){const i=this.iJ.hY(),e=this.df;0===i.length?(t.SA(null),t.jM(),t.TA(s),t.xA(s),e.rJ(s)):(h.set(0,0,e.xY(),e.vY()),this.TO().wL(t,null,{SL:this,TL:3,devicePixelRatio:this.df.h7(),bL:this.df.r7()*this.s4(),xL:this.e4(),QL:h,VL:null,uN:!0}))}kq(e,h,t){t[0].uF()||(x.la(t[0].mF()),x.aa(1),e.hc(x)),this.df.AP(),e.uA(!0);const n=v,r=G,o=C;for(const a of t)a.ZY(),a.DY(n);const s=t[0],i=s.DH(e);s.LH(e);for(let s=0,i=n.length;s<i;){const l=n[s],u=l.xk(),c=u.vk();if(u.W4()&&u.YH(c.JH())){(!l.HH()||0<u.qH())&&o.push(l);const f=l.xk().i5();r.push(l);let t=s+1;for(;t<i;++t){const d=n[t],p=d.xk();if(p.W4()&&p.YH(p.vk().JH())){if(p.i5()!==f)break;(d.HH()?(0<p.qH()&&o.push(d),r):o).push(d)}}if(1!==r.length||r[0].ZH()){this.Pq(e,h,r);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.xk(),y=g.vk();g.KH(!0),T(y,e),y.VH(m,g,e,h),g.KH(!1)}}else{T(c,e),c.VH(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==l){const w=M.xk(),S=w.vk();T(S,e),S.VH(M,w,e,h)}}}s=t,b.Wr(r),b.Wr(o)}else++s}i&&e.AA(i),b.Wr(n),I=null}Pq(i,e,h){i.GA();for(let t=0,s=h.length;t<s;++t){const n=h[t],r=n.xk(),o=r.vk();r.$H(!0),T(o,i),o.t7(n,r,i)}i.CA();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.xk(),u=l.vk();T(u,i),u.VH(a,l,i,e),l.$H(!1)}i._A()}g7(){const t={sx:this.n4(),sy:this.o4(),s:this.s4(),a:this.e4(),w:this.pm(),h:this.Cm(),ortho:this.A4(),vpX:this.MY(),vpY:this.wY(),fv:this.X7,persist:this.q7,fx:this.iJ.IT(),layers:{},dynamicLayers:[]};for(const s of this.Q7)if(s.tY()){const i=s.L4();t.dynamicLayers.push({sid:s.$J(),name:s.ef(),parentSid:i?i.$J():null,siblingIndex:s.XJ(),data:s.g7()})}else t.layers[s.$J().toString()]=s.g7();return t}y7(t){this.P8=t.sx,this.F8=t.sy,this.O8=t.s,this.k8=t.a,this.Km=t.w,this.$m=t.h,this.C7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.I7=t.vpX),t.hasOwnProperty("vpY")&&(this._7=t.vpY),this.X7=!!t.fv,this.q7=t.persist,this.iJ._T(t.fx),this.aJ=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.m9(e);h&&h.y7(i)}if(t.hasOwnProperty("dynamicLayers")){this.v4(),this.df.Y3();const n=new Map,r=t.dynamicLayers;for(let t=r.length-1;0<=t;--t){const o=r[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.s9(),!this.p9(l)&&!this.m9(a)){let t,s;if(null===u)t=null,s=this.W7;else{if(!(t=this.m9(u)))continue;s=t.P4()}const d=b.un(b.p8,this,t,{name:l,sid:a,r8:!0});s.push(d);let i=n.get(s);i||(i=[],n.set(s,i)),i.push({qj:d,siblingIndex:c}),d.y7(f)}}for(const[p,m]of n){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.qj,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.ZJ(),this.a9(),this.r9()}sk(){return this.K7}XO(){return this.t9}Fq(t){t.layout=this.sk();const s=this.df,i=s.Ej()&&!s.sR().V3();i&&e.StartMeasuringScriptTime(),this.t9.dispatchEvent(t),i&&e.AddScriptTime()}eq(t){return t.layout=this.sk(),this.t9.t0(t)}hq(t){return t.layout=this.sk(),this.df.eq(t)}jq(){this.Bq(this.W7)}Bq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.ef()),this.Bq(e.P4(),s+1)}}}{const _n=self.Ps;_n.zq=class extends _n.an{#L6;#Uq=[];#Wq=new Map;#Qq=new Map;#Vq=null;#Jq=[];#Yq=null;#Hq=0;#qq=null;constructor(t){super(),this.#L6=t}cn(){this.#L6=null,this.#Vq=null,this.#Yq=null,this.#qq=null,_n.Wr(this.#Uq),this.#Wq.clear(),this.#Qq.clear(),_n.Wr(this.#Jq)}i2(t){const s=_n.un(_n.T7,this,this.#Uq.length,t);this.#Uq.push(s),this.#Wq.set(s.ef().toLowerCase(),s),this.#Qq.set(s.$J(),s)}Wk(){return this.#L6}Zq(t){this.#Yq=t}Xq(){if(this.#Yq)return this.#Yq;if(this.#Uq.length)return this.#Uq[0];throw new Error("no first layout")}Kq(t){return this.#Wq.get(t.toLowerCase())||null}$q(t){return this.#Qq.get(t)||null}tZ(t){return t=_n.yn(Math.floor(t),0,this.#Uq.length-1),this.#Uq[t]}hk(t){return"number"==typeof t?this.tZ(t):this.Kq(t.toString())}rk(){return this.#Uq}B9(t){this.#Vq=t}$R(){return this.#Vq}sZ(t){if(this.#Jq.includes(t))throw new Error("layout already running");this.#Jq.push(t)}iZ(t){const s=this.#Jq.indexOf(t);if(-1===s)throw new Error("layout not running");this.#Jq.splice(s,1)}*eZ(){this.#Vq&&(yield this.#Vq),this.#Jq.length&&(yield*this.#Jq)}hZ(t){return this.#Vq===t||this.#Jq.includes(t)}wq(t){if(t)this.#Hq++;else{if(this.#Hq<=0)throw new Error("already unset");this.#Hq--}}J3(){return 0<this.#Hq}uk(t){this.#qq=t}H9(){this.#qq=null}lk(){return!!this.#qq}nZ(){return this.#qq}rZ(){const t=this.$R();t&&t.a9()}oZ(){const t=this.$R();t&&t.r9()}}}{const S=self.Ps,En=new RegExp("<(.+?)>","g");S.aZ=class extends S.an{constructor(t){super(),this.df=t,this.lZ=S.un(S.uZ),this.cZ=null,this.fZ=[],this.dZ=new Map,this.pZ=new Map,this.mZ=new Map,this.gZ=[],this.yZ=[],this.MZ=[],this.wZ=!1,this.SZ=!1,this.TZ=!1,this.bZ=()=>this.xZ(),this.vZ=()=>this.GZ(),this.CZ=()=>this.IZ(),this._Z=()=>this.EZ(),this.DZ=t=>this.AZ(t.DB),this.NZ=t=>this.LZ(),this.OZ=t=>this.RZ(),this.kZ=t=>this.PZ(),this.FZ=[],this.jZ=0}cn(){this.BZ(),this.bZ=null,this.vZ=null,this.CZ=null,this._Z=null,this.DZ=null,this.OZ=null;for(const t of this.fZ)t.Cz(),t.cn();S.Wr(this.fZ),this.fZ=null,this.lZ.cn(),this.lZ=null,S.Wr(this.gZ),this.gZ=null,S.Wr(this.yZ),this.yZ=null,S.Wr(this.MZ),this.MZ=null,this.dZ.clear(),this.dZ=null,this.pZ.clear(),this.pZ=null,this.mZ.clear(),this.mZ=null,S.Wr(this.FZ),this.FZ=null,this.df=null}zZ(){const t=this.df.Jf();t.addEventListener("pretick",this.bZ),t.addEventListener("tick2",this.vZ),t.addEventListener("beforelayoutchange",this.CZ),t.addEventListener("layoutchange",this._Z),t.addEventListener("instancedestroy",this.DZ),t.addEventListener("beforeload",this.NZ),t.addEventListener("afterload",this.OZ),t.addEventListener("afterlayoutstart",this.kZ)}BZ(){const t=this.df.Jf();t.removeEventListener("pretick",this.bZ),t.removeEventListener("tick2",this.vZ),t.removeEventListener("beforelayoutchange",this.CZ),t.removeEventListener("layoutchange",this._Z),t.removeEventListener("instancedestroy",this.DZ),t.removeEventListener("beforeload",this.NZ),t.removeEventListener("afterload",this.OZ),t.removeEventListener("afterlayoutstart",this.kZ)}i2(t){this.lZ.yc(t);const s=S.WZ.UZ(t,this);this.yc(s),this.QZ(s),this.mZ.set(s.ef(),0)}VZ(t){const s=this.JZ(),i=t.XF(),e=s.ei(i),h=S.WZ.VZ(i+":"+this.mZ.get(i),e,this);return this.YZ(i),this.yc(h),h}YZ(t){this.mZ.set(t,this.mZ.get(t)+1)}HZ(){for(const t of this.fZ)if(!t.qZ()){const s=t.XF();this.YZ(s)}}ZZ(){for(const t of this.mZ.keys())this.mZ.set(t,0)}yc(t){this.fZ.push(t),this.dZ.set(t.ef().toLowerCase(),t)}G0(t){t.XZ(),t.qZ()||(S.qr(this.fZ,t),S.qr(this.gZ,t),S.qr(this.yZ,t),S.qr(this.MZ,t),this.dZ.delete(t.ef().toLowerCase()),this.KZ(t),t.vz())||t.cn()}Sj(t){this.df.Sj(t,this.cZ,null)}Wk(){return this.df}JZ(){return this.lZ}$Z(t){this.cZ=t}tX(){return this.cZ}*sX(){for(const t of this.fZ)yield t}*iX(){for(const t of this.yZ)yield t}eX(t,s){this.pZ.has(t)||this.pZ.set(t,new Set),this.pZ.get(t).add(s)}QZ(t){for(const s of t.hX())this.eX(s,t)}KZ(t){for(const[s,i]of this.pZ.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.pZ.delete(s)}nX(t){if(this.pZ.has(t))return this.pZ.get(t)}rX(t,s){if(s)for(const i of this.fZ){const e=s.every(t=>i.aX(t.DB,t.trackId));if(e&&i.ef().includes(t.ef()))return i}}lX(t){return this.dZ.get(t.toLowerCase())||null}uX(t){for(const s of this.gZ)if(s.ef()===t)return s;for(const i of this.yZ)if(i.ef()===t)return i;return null}*cX(i){if(En.test(i)){En.lastIndex=0;let t,s=new Set;do{if(t=En.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const n of s.values()){const r=this.lX(n);r&&(yield r)}s.clear()}else{const t=this.lX(i);t&&(yield t)}}*fX(t){for(const s of this.fZ)s._z(t)&&(yield s)}dX(t){this.gZ.includes(t)||this.gZ.push(t),this.pX()}mX(t){S.qr(this.yZ,t),this.gX()}yX(t){this.yZ.includes(t)?(t.MX(!0),t.wX(!1),t.SX(!1)):(t.MX(!1),t.wX(!0),t.SX(!1),this.gZ.includes(t)||this.gZ.push(t)),this.pX()}TX(t){t.MX(!1),t.wX(!1),t.bX(),S.qr(this.gZ,t),this.gX()}xX(t){t.MX(!1),t.wX(!1),this.yZ.includes(t)&&(t.SX(!0),this.MZ.push(t),S.qr(this.yZ,t)),this.gZ.includes(t)&&t.SX(!0)}vX(t){t.MX(!1),t.wX(!1),t.SX(!1),t.kz(1),S.qr(this.yZ,t)}GX(t){this.xX(t),t.bX()}xZ(){if(!this.Wk().Z9()&&this.wZ&&!this.SZ){for(this.TZ=!0;this.gZ.length;){const t=this.gZ.pop();(t.CX()?(t.IX(),this.MZ):(t._X(),this.yZ)).push(t),0!==t.EX()&&(this.jZ=1)}const s=this.df.DX(),i=this.df.AX(),e=this.df.ER();for(let t=this.yZ.length-1;0<=t;t--){const h=this.yZ[t];h&&h.NX(s,e,i)}this.TZ=!1,0!==this.jZ&&this.Wk().Dk()}}GZ(){if(!this.Wk().Z9()&&this.wZ&&!this.SZ){let i;for(let t=0,s=this.MZ.length;t<s;t++){const e=this.MZ[t];i=i||new Set,e.XZ(),this.LX(e),i.add(e)}if(i){S.Kr(this.MZ,i);for(let t=this.jZ=0,s=this.yZ.length;t<s;t++)if(0!==this.yZ[t].EX()){this.jZ=1;break}}this.gX()}}LX(t){t.vz()||t.OX()&&t.RX()&&t.kX()&&t.PX()}pX(){this.wZ||(this.wZ=!0)}gX(){this.MZ.length||this.yZ.length||this.gZ.length||this.TZ||(this.wZ=!1)}IZ(){for(this.SZ=!0;this.gZ.length;)this.TX(this.gZ.pop());const t=new Set;for(const s of this.yZ){const i=s.IZ();i&&(s.XZ(),t.add(s))}S.Kr(this.yZ,t),t.clear();for(const e of this.MZ){const h=e.IZ();h&&(e.XZ(),t.add(e))}S.Kr(this.MZ,t),this.gX();for(const n of this.fZ)n.FX()}EZ(){this.SZ=!1}AZ(t){const s=t.LF(),i=this.nX(s);if(i)if(this.df.Z9())this.FZ.push(t);else for(const e of i)e.qZ()||(e.vz()?this.G0(e):e.OX()||(this.LX(e),this.G0(e)))}LZ(){for(const t of this.gZ.map(t=>t))this.LX(t),this.G0(t);for(const s of this.yZ.map(t=>t))this.LX(s),this.G0(s)}RZ(){for(const t of this.FZ)this.AZ(t);S.Wr(this.FZ);for(const s of this.fZ)s.RZ()}PZ(){const t=this.df.ek(),s=t.$R();if(s)for(const i of this.fZ){const e=i.jX();e&&s.ef()===e&&this.yX(i)}}g7(){return{timelinesJson:this.BX(),scheduledTimelinesJson:this.zX(),playingTimelinesJson:this.UX(),markedForRemovalTimelinesJson:this.WX(),hasRuntimeListeners:this.wZ,changingLayout:this.SZ,isTickingTimelines:this.TZ}}y7(t){t&&(this.ZZ(),this.QX(t.timelinesJson),this.VX(t.scheduledTimelinesJson),this.JX(t.playingTimelinesJson),this.YX(t.markedForRemovalTimelinesJson),this.wZ=!t.hasRuntimeListeners,this.SZ=!!t.changingLayout,this.TZ=!!t.isTickingTimelines,this.HZ(),this.pX(),this.gX())}BX(){return this.fZ.map(t=>t.g7())}QX(t){for(const s of t){let t=this.lX(s.name);if(t)t.y7(s);else{const i=this.HX(s);if(!i)continue;const e=this.lX(i);(t=this.VZ(e)).y7(s)}t.qX()||this.G0(t)}}HX(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}zX(){return this.ZX(this.gZ)}VX(t){this.XX(t,this.gZ)}UX(){return this.ZX(this.yZ)}JX(t){this.XX(t,this.yZ)}WX(){return this.ZX(this.MZ)}YX(t){this.XX(t,this.MZ)}KX(t,s){if(s)for(const i of s)if(i===t.ef())return!0;return!1}ZX(t){return t.map(t=>t.ef())}XX(t,s){const i=new Set;for(const e of s)this.KX(e,t)||i.add(e);if(S.Kr(s,i),t)for(const h of t){const n=this.lX(h);if(n){const r=s.find((s=>t=>t.ef()===s)(h));r||s.push(n)}}}}}{const Dn=self.Ps,An=[0,0],Nn=[0,0],Ln=[0,0],On=[0,0,0,0,0],Rn=new Array(4),kn=[{x:0,y:0,t:0,Dt:0},{x:0,y:0,t:0,Dt:0},{x:0,y:0,t:0,Dt:0}],Pn={x:0,y:0,t:0,Dt:0};Dn.$X=class{constructor(t,s){this.tK=!1,this.sK=t,this.iK=[];let i=null;if(i=s?this.sK.eK(s):Dn.first(this.sK.hK())){const e=i.tU("offsetX"),h=i.tU("offsetY");if(e&&h){this.nK=e,this.rK=h;const n=e.oK(),r=h.oK();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const o=n[t],a=(o.aK(),o.lK()),l=r[t],u=(l.aK(),l.lK());a&&"cubic-bezier"===a.uK()&&u&&"cubic-bezier"===u.uK()?this.iK.push(Dn.un(Dn.cK,a,u,o,l,this.iK.length)):(a&&"line"===a.uK()&&u&&u.uK(),this.iK.push(Dn.un(Dn.fK,o,l,this.iK.length)))}this.tK=!0}}}cn(){for(const t of this.iK)t.cn();Dn.Wr(this.iK),this.iK=null,this.sK=null,this.nK=null,this.rK=null}dK(){return this.tK}pK(){return this.iK}mK(t){const s="relative"===this.nK.gK()?t.pT():0,i="relative"===this.rK.gK()?t.yT():0;for(const e of this.iK)e.mK(s,i)}uy(s,i,t){let e=NaN,h=this.iK.length;for(let t=0;t<h;t++){const n=this.iK[t];if("cubic-bezier"===n.dv()){const r=n.uy(s,i);(isNaN(e)||r[3]<e)&&(e=r[3],Ln[0]=r[2],Ln[1]=n.bO())}}return Ln}yK(s,i,t){const e=t.tRange;Dn.pe(e[0])||(e[0]=0),Dn.pe(e[1])||(e[1]=1);let h=NaN,n=this.iK.length;for(let t=0;t<n;t++){const r=this.iK[t];if("cubic-bezier"===r.dv()){const o=r.MK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Ln[0]=o[2],Ln[1]=r.bO())}}return Ln}wK(t,s){return this.iK[s].wK(t)}SK(t,s){return this.iK[s].SK(t)}},Dn.cK=class{constructor(t,s,i,e,h){this.Kg=h;const n=t.TK("cubic-bezier"),r=i.TK("cubic-bezier"),o=s.TK("cubic-bezier"),a=e.TK("cubic-bezier");this.bK=t.xK(),this.vK=s.xK(),this.GK=t.xK()+n.CK(),this.IK=s.xK()+o.CK(),this._K=i.xK()+r.EK(),this.DK=e.xK()+a.EK(),this.AK=i.xK(),this.NK=e.xK(),this.LK=0,this.RK=0,this.kK=0,this.PK=0,this.FK=0,this.jK=0,this.BK=0,this.zK=0,this.UK=0,this.WK=0,this.QK=0,this.VK=0,this.JK=0,this.YK=0,this.HK=0,this.qK=0,this.ZK=0,this.XK=0,this.KK=0,this.$K=0,this.t$=NaN,this.tK=!1,this.s$=100,this.i$=new Array(this.s$+1),this.i$[0]=0,this.e$=0,this.h$=[],this.n$=[];for(let t=0;t<100;t++)this.n$.push({x:0,y:0,t:0,Dt:0});this.r$()}cn(){Dn.Wr(this.i$),this.i$=null,Dn.Wr(this.h$),this.h$=null,Dn.Wr(this.n$),this.n$=null}dv(){return"cubic-bezier"}bO(){return this.Kg}o$(){return Math.floor(this.e$/25)}a$(){return 1/this.o$()}mK(t,s){this.l$=t,this.u$=s,this.i$=new Array(this.s$+1),this.i$[0]=0,this.r$(),this.LK=this.bK+this.l$,this.RK=this.vK+this.u$,this.kK=this.GK+this.l$,this.PK=this.IK+this.u$,this.FK=this._K+this.l$,this.jK=this.DK+this.u$,this.BK=this.AK+this.l$,this.zK=this.NK+this.u$,this.UK=3*(this.kK-this.LK),this.WK=3*(this.PK-this.RK),this.QK=3*(this.FK-this.kK),this.VK=3*(this.jK-this.PK),this.JK=3*(this.BK-this.FK),this.YK=3*(this.zK-this.jK),this.HK=3*(this.kK-this.LK),this.qK=3*(this.LK+this.FK-2*this.kK),this.ZK=this.BK-this.LK+3*(this.kK-this.FK),this.XK=3*(this.PK-this.RK),this.KK=3*(this.RK+this.jK-2*this.PK),this.$K=this.zK-this.RK+3*(this.PK-this.jK)}Map(t){if(!this.tK)return NaN;const s=this.c$(t);return Nn[0]=this.f$(s),Nn[1]=this.d$(s),Nn}uy(t,s){const i=this.p$(100),e=this.m$(t,s,i),h=this.g$(t,s,i,e);return On[0]=h.x,On[1]=h.y,On[2]=h.t,On[3]=h.Dt,On}MK(t,s,i){const e=this.p$(100),h=this.y$(t,s,e,i),n=this.g$(t,s,e,h);return On[0]=n.x,On[1]=n.y,On[2]=n.t,On[3]=n.Dt,On}wK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.UK+e*this.QK+h*this.JK,r=i*this.WK+e*this.VK+h*this.YK,o=Dn.Tn(n,r);return An[0]=n/o,An[1]=r/o,An}SK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.UK+e*this.QK+h*this.JK,r=i*this.WK+e*this.VK+h*this.YK;return Math.atan2(r,n)}c$(h){if(this.tK){let t=h*this.i$[this.s$],s=0,i=this.s$,e=0;for(;s<i;)e=s+((i-s)/2|0),this.i$[e]<t?s=e+1:i=e;this.i$[e]>t&&e--;const n=this.i$[e];return n===t?e/this.s$:(e+(t-n)/(this.i$[e+1]-n))/this.s$}}f$(t){return this.tK?self.Sc.kc("cubicbezier")(t,this.bK+this.l$,this.GK+this.l$,this._K+this.l$,this.AK+this.l$):NaN}d$(t){return this.tK?self.Sc.kc("cubicbezier")(t,this.vK+this.u$,this.IK+this.u$,this.DK+this.u$,this.NK+this.u$):NaN}p$(s){if(!(this.h$.length>=(s=s||100))){this.h$=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,n=this.HK*i,r=this.qK*e,o=this.ZK*h,a=this.XK*i,l=this.KK*e,u=this.$K*h,c=this.LK+n+r+o,f=this.RK+a+l+u;this.n$[t].x=c,this.n$[t].y=f,this.n$[t].t=i,this.n$[t].Dt=0,this.h$[t]=this.n$[t]}}return this.h$}m$(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.t$))for(let t=0;t<100;t++){const r=e[t],o=r.x-s,a=r.y-i;r.Dt=o*o+a*a,r.Dt<h&&(h=r.Dt,n=t)}else{for(let t=this.t$;t<this.t$+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Dt=u*u+c*c,l.Dt<h&&(h=l.Dt,n=t)}for(let t=this.t$;t>this.t$-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Dt=d*d+p*p,f.Dt<h&&(h=f.Dt,n=t)}}return this.t$=n}y$(s,i,e,h,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.t$))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Dt=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.Dt<n&&(n=o.Dt,r=t)}else{for(let t=this.t$;t<this.t$+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Dt=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.Dt<n&&(n=u.Dt,r=t)}for(let t=this.t$;t>this.t$-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Dt=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Dt<n&&(n=d.Dt,r=t)}}return this.t$=r}g$(r,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,n=(h-e)/4;if(n<.001)break;Rn[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*n,d=f**2,p=f**3,m=this.HK*f,g=this.qK*d,y=this.ZK*p,M=this.XK*f,w=this.KK*d,S=this.$K*p,T=this.LK+m+g+y,b=this.RK+M+w+S,x=T-r,v=b-o,G=x*x+v*v;if(G<c){c=G,l=t,Pn.x=T,Pn.y=b,Pn.t=f,Pn.Dt=G,u=Pn;break t}const C=kn[t-1];C.x=T,C.y=b,C.t=f,C.Dt=G,Rn[t]=C}Rn[3]=a[i],a=Rn}while(t++<20);return u}r$(){this.tK=!0;let s=this.f$(0),i=this.d$(0),e=0;for(let t=1;t<=this.s$;t++){const h=this.f$(.01*t),n=this.d$(.01*t),r=s-h,o=i-n;e+=Dn.Tn(r,o),this.i$[t]=e,s=h,i=n}this.e$=e}},Dn.fK=class{constructor(t,s,i){this.Kg=i,this.M$=t.xK(),this.w$=s.xK(),this.l$=0,this.u$=0}cn(){}dv(){return"line"}bO(){return this.Kg}mK(t,s){this.l$=t,this.u$=s}pT(){return this.M$+this.l$}yT(){return this.w$+this.u$}}}{const T=self.Ps;T.WZ=class extends T.an{constructor(t,s,i){super(),this.df=i.Wk(),this.S$=i,this.T$=s,this.mn=t,this.b$=[],this.x$=0,this.v$=null,this.G$=0,this.C$(),this.I$=null,this._$=null,this.E$=0,this.D$=0,this.A$=1,this.N$=0,this.L$=1,this.O$=!1,this.R$=!1,this.k$=!1,this.P$=!0,this.F$=!1,this.j$=!1,this.B$=-1,this.z$=!1,this.U$=!1,this.W$=!1,this.Q$=!1,this.V$=NaN,this.J$=[""],this.Y$="",this.H$=!1,this.jZ=0,this.q$=0,this.Z$=null}static UZ(t,s){const i=s.JZ(),e=i.X$(),h=i.ei(t[e]),n=T.un(T.WZ,t[e],h,s);return n.K$(!0),n}static VZ(t,s,i){return T.un(T.WZ,t,s,i)}cn(){if(!this.vz()){const t=this.df.Jf();this.S$.TX(this),this.S$.GX(this);for(const s of this.b$)s.cn();T.Wr(this.b$),this.b$=null,this.df=null,this.S$=null,this.T$=null,this.F$=!0,this.I$=null,this._$=null,this.$$(t)}}$$(t){const s=T.un(T.Event,"timelinestatereleased");s.ttt=this,t.dispatchEvent(s)}dv(){return 0}C$(){for(const t of this.T$.itt().stt())this.x$=this.b$.push(T.ett.i2(this,t))}htt(){return this.S$}Wk(){return this.df}hK(){return this.b$}ntt(e,h,n,r){if(this.q$){let i;for(let s=0;s<this.b$.length;s++){let t=this.b$[s];if(e===t.Yz()){const o=t.tU(n);o&&h.constructor===o.ott().constructor&&o.gK()===r.gK()&&(i=i||[]).push(o)}}return i}}qX(){return!!this.b$.length}eK(t){for(const s of this.b$)if(T.gh(s.Kz(),t))return s;return null}att(t){for(const s of this.b$)if(!s.ltt()&&T.gh(s.ef(),t))return s;return null}W6(t){this.mn=t}ef(){return this.mn}utt(){return this.T$}XF(){return this.T$.ef()}Az(){return this.T$.Az()}Dz(t){this.T$.Dz(t)}ctt(){return this.T$.ctt()}ftt(t){this.T$.ftt(t)}dtt(){return this.T$.dtt()}ptt(t){this.T$.ptt(t)}gK(){return this.T$.gK()}mtt(t){this.T$.gK(t)}Jz(t){for(const s of this.hK())s.Jz(t)}Lz(){return this.T$.Lz()}Nz(t){return this.T$.Nz(t)}Rz(){return this.T$.Rz()}Oz(t){return this.T$.Oz(t)}QB(){return this.T$.QB()}gtt(t){return this.T$.gtt(t)}kz(t){return this.A$=t}Pz(){return this.A$}jX(){return this.T$.jX()}ytt(){return this.T$.ytt()}Mtt(){return this.T$.Mtt()}wtt(){return this.N$}Stt(){return!this.IsPlaying()||0<this.A$}jz(){return this.I$||(this.I$=new Promise(t=>{this._$=t})),this.I$}bX(){this.I$&&(this._$(),this.I$=null,this._$=null)}Ttt(t){this.J$=T.WZ.btt(t),this.H$=!0}Fz(){return this.J$}xtt(){return this.H$&&(this.Y$=this.J$.join(" ")),this.H$=!1,this.Y$}_z(t){if(!this.J$)return!1;if(!this.J$.length)return!1;const s=T.WZ.btt(t);return!!s&&!!s.length&&s.every(T.WZ.vtt,this)}Gtt(){T.aq.Timeline&&this.constructor===T.WZ&&(T.aq.Timeline.rq.PushTriggerTimeline(this),this.S$.Sj(T.aq.Timeline.rq.OnTimelineStarted),this.S$.Sj(T.aq.Timeline.rq.OnTimelineStartedByName),this.S$.Sj(T.aq.Timeline.rq.OnTimelineStartedByTags),this.S$.Sj(T.aq.Timeline.rq.OnAnyTimelineStarted),T.aq.Timeline.rq.PopTriggerTimeline())}Ctt(){this.B$=this.df.Itt()}PX(){this.W$||(this.W$=!0,T.aq.Timeline&&this.constructor===T.WZ&&(T.aq.Timeline.rq.PushTriggerTimeline(this),this.S$.Sj(T.aq.Timeline.rq.OnTimelineFinished),this.S$.Sj(T.aq.Timeline.rq.OnTimelineFinishedByName),this.S$.Sj(T.aq.Timeline.rq.OnTimelineFinishedByTags),this.S$.Sj(T.aq.Timeline.rq.OnAnyTimelineFinished),T.aq.Timeline.rq.PopTriggerTimeline()))}MX(t){this.O$=t}_tt(){return this.B$===this.df.Itt()}IsPlaying(t=!1){return!!this._tt()||!(!this.Ett()||t)||this.O$}Dtt(){return this.IsPlaying(!0)}zz(){return this.Att()}Att(){return!(this.vz()||this.Ett()||this.Dtt()||this.RX())}wX(t){this.R$=t}Ett(){return this.R$}Ntt(t){this.P$=t;const s=this.nN();(s<=0||s>=this.Az())&&(this.P$=!0)}RX(){return this.P$}vz(){return this.F$}SX(t){this.j$=t}CX(){return this.j$}Ltt(t){this.z$=t}Ott(){return this.z$}K$(t){this.U$=!!t}qZ(){return this.U$}kX(){return this.k$}nN(){return this.E$}Ez(t){const s=this.nN();this.Rtt(t),this.Ntt(!1),this.RX()||this.Ltt(!0),!this.Dtt()&&!this.Ett()&&this.k$||(this.Dtt()||this.Ett()||this.k$?this.Dtt()?this.Cz():this.Ett()&&(this.S$.TX(this),this.ktt()):this.ktt()),this.Ptt(),this.Ftt(this.nN(),!1,!0,!0,s),this.jtt(),this.jZ&&this.Wk().Dk(),this.Btt()}Rtt(t){(t=T.pe(t)?t:this.Az())<0?this.E$=0:t>=this.Az()?this.E$=this.Az():this.E$=t}ztt(t){(t=T.pe(t)?t:this.Az())<0?this.E$=0:t>=this.Az()?this.E$=this.Az():this.E$=t;for(const s of this.b$)s.Utt()}Btt(){T.aq.Timeline&&this.constructor===T.WZ&&(T.aq.Timeline.rq.PushTriggerTimeline(this),this.S$.Sj(T.aq.Timeline.rq.OnTimeSet),this.S$.Sj(T.aq.Timeline.rq.OnTimeSetByName),this.S$.Sj(T.aq.Timeline.rq.OnTimeSetByTags),T.aq.Timeline.rq.PopTriggerTimeline())}Wtt(){if(!this.Lz())if(this.Rz()&&1===this.N$){if(this.Stt()){if(this.nN()>=this.Az())return!1}else if(this.nN()<=0)return!1}else if(!this.Lz()&&!this.Rz())if(this.Stt()){if(this.nN()>=this.Az())return!1}else if(this.nN()<=0)return!1;return!0}Iz(){this.vz()||this.Wtt()&&this.Play(!0)}Play(t=!1){return!this.vz()&&!this.Ett()&&(this.Dtt()&&this._tt()?this.Qtt():!this.Dtt()&&!!(this.RX()||t||this.Ott())&&this.Vtt())}Qtt(){return this.Ltt(!1),this.S$.mX(this),this.S$.yX(this),this.jz(),!0}Vtt(){return this.Ltt(!1),this.S$.yX(this),this.jz(),!0}Cz(t=!1){this.vz()||(this.Ntt(t),this.S$.xX(this),this.RX()&&this.bX())}d0(t=!0,s=!1){if(!this.vz()){if(!this.Dtt()&&this.Ett())return this.S$.TX(this);if(!this.RX()){this.Cz(!0),this.Stt()?this.Rtt(0):this.Rtt(this.Az());const i=this.nN();this.Ptt(),s?this.Jtt(i):this.Ftt(i,!1,!1,!0),t&&this.Btt(),this.jtt(),this.jZ&&t&&this.Wk().Dk()}}}Ytt(){this.d0(!1,!0)}Jtt(t){this.Ftt(t,!1,!1,!0,NaN,!1,!0)}IZ(){if(!this.vz()){if(!this.Wk().Z9()&&this.Htt())return!1;this.S$.vX(this),this.Wk().Z9()||this.Ytt()}return!0}ktt(){this._X(!0)}IX(){this._X(!1,!0),this.MX(!1),this.wX(!1)}_X(t=!1,s=!1){if(!this.CX()||s){if(t){this.W$=!1,this.k$=!0,this.Q$=!0,this.Ptt();for(const i of this.b$)i._X()}else if(this.MX(!0),this.wX(!1),this.Gtt(),this.RX()){this.B$=-1,0!==this.N$&&(this.A$=Math.abs(this.A$)),this.N$=0,this.L$=1,this.P$=!1,this.W$=!1,this.k$=!0,this.Q$=!0,this.Stt()?this.Rtt(0):this.Rtt(this.Az()),this.Ptt();for(const e of this.b$)e._X()}else{this.Q$=!0,this.W$=!1,this.Ptt();for(const h of this.b$)h.qtt()}this.jtt()}}EX(){return this.jZ}Ptt(){this.q$=0;for(const t of this.b$)t.X_()&&(this.q$=1)}jtt(){this.jZ=0;for(const t of this.b$)t.Ztt(),0===this.jZ&&1===t.EX()&&(this.jZ=1),this.v$||1!==t.Xtt()||(this.v$||(this.v$=[]),this.G$=this.v$.push(t))}NX(t,s,i){if(this.Mtt()){if(0===t&&0===this.V$)return;this.V$=t,t=i}else{if(0===i&&0===this.V$)return;t=this.V$=i,s=1}const e=this.E$+this.D$,h=t*s*this.A$,n=e+h,r=this.T$.Ktt;n<0?(this.E$=0,this.D$=-n):r<=n?(this.E$=r,this.D$=this.E$-n):(this.E$=n,this.D$=0);let o=!1,a=!1,l=this.Lz(),u=this.Rz();l||u?l&&!u?0<this.A$?this.E$>=r&&(this.ztt(0),a=!0):this.E$<=0&&(this.ztt(r),a=!0):!l&&u?0<this.A$?this.E$>=r&&(this.Rtt(r),this.kz(-1*this.Pz()),a=!0,1===this.N$?this.L$<this.QB()?(this.L$++,this.N$=0):o=!0:0===this.N$&&(this.N$=1)):this.E$<=0&&(this.Rtt(0),this.kz(-1*this.Pz()),a=!0,1===this.N$?this.L$<this.QB()?(this.L$++,this.N$=0):o=!0:0===this.N$&&(this.N$=1)):l&&u&&(0<this.A$?this.E$>=r&&(this.Rtt(r),this.kz(-1*this.Pz()),a=!0,this.N$++,T.wrap(this.N$,0,2)):this.E$<=0&&(this.Rtt(0),this.kz(-1*this.Pz()),a=!0,this.N$++,T.wrap(this.N$,0,2))):0<this.A$?this.E$>=r&&(this.L$<this.QB()?(this.L$++,this.ztt(0),a=!0):(this.Rtt(r),o=!0)):this.E$<=0&&(this.L$<this.QB()?(this.L$++,this.ztt(r),a=!0):(this.Rtt(0),o=!0));let c,f=this.x$;if(o){for(c=0;c<f;c++)this.b$[c].$tt();this.Cz(!0),this.Ctt()}else{const d=this.G$;for(c=0;c<d;c++)this.v$[c].tst();if(1===this.q$)for(c=0;c<f;c++){const p=this.b$[c],m=p.sst(),g=this.E$-m,y=e-m;g<0&&0<y?(this.E$=m<0?0:r<=m?r:m,p.Jc(m,!0,!1,a,this.Q$,!1)):p.Jc(this.E$,!0,!1,a,this.Q$,!1)}else for(c=0;c<f;c++)this.b$[c].Jc(this.E$,!0,!1,a,this.Q$,!1);for(c=0;c<d;c++)this.v$[c].ist();this.Q$&&(this.Q$=!1)}}Ftt(s,i=!1,e=!1,h=!1,n=NaN,t=!1,r=!1){for(const o of this.b$)o.tst();for(const a of this.b$){let t=s;if("number"==typeof n&&!isNaN(n)){const l=this.nN(),u=l-a.sst(),c=n-a.sst();u<0&&0<c&&(t=a.sst(),this.Rtt(t))}a.Jc(t,i,e,h,this.Q$,r)}for(const f of this.b$)f.ist();this.Q$&&t&&(this.Q$=!1)}est(){const t=this.T$.itt().hst(),s=T.ett.i2(this,t);return this.x$=this.b$.push(s),s}XZ(){if(!this.vz())for(const t of this.b$)t.nst()}FX(){for(const t of this.b$)t.FX()}rst(){for(const t of this.b$)t.ost()}ast(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.b$[i];return e?(e.lst(s),void this.S$.eX(s.LF(),this)):void 0}for(const h of this.b$)if(h.ltt())if(t){if(h.Kz()===t){h.lst(s),this.S$.eX(s.LF(),this);break}}else if(!h.ust()){h.lst(s),this.S$.eX(s.LF(),this);break}}}aX(t,s){for(const i of this.b$)if(i.ltt())if(s){if(s===i.Kz()&&t===i.Yz())return!0}else if(t===i.Yz())return!0;return!1}OX(){return this.b$.some(t=>!t.ltt()||t.cst())}Htt(){return this.b$.some(t=>{if(t.ltt()){if(!t.cst())return!1;const s=t.LF();return!!s&&s.AJ()}return!1})}tU(t){for(const s of this.hK())for(const i of s.fst())if(i.dst()===t)return i}pst(t){for(const s of this.b$)if(t===s.Yz())return s;return null}mst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.hK())for(const h of e.gst()){const n=s.every(t=>h.yst(t));if(n)return h}}hX(){const t=[];for(const s of this.hK())t.push(s.LF());return t.filter(t=>t)}RZ(){for(const t of this.hK())t.RZ()}g7(){return{tracksJson:this.Mst(),name:this.mn,playheadTime:this.nN(),playbackRate:this.A$,pingPongState:this.N$,currentRepeatCount:this.L$,isPlaying:this.O$,isScheduled:this.R$,initialStateSet:this.k$,finishedTriggers:this.W$,complete:this.P$,released:this.F$,markedForRemoval:this.j$,completedTick:this.B$,implicitPause:this.z$,isTemplate:this.U$,tags:this.J$.join(" "),stringTags:this.Y$,tagsChanged:this.H$,firstTick:this.Q$}}y7(t){t&&(this.wst(t.tracksJson),this.mn=t.name,this.E$=t.playheadTime,this.A$=t.playbackRate,this.N$=t.pingPongState,this.L$=t.currentRepeatCount,this.O$=!!t.isPlaying,this.R$=!!t.isScheduled,this.k$=!!t.initialStateSet,this.W$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.P$=!!t.complete,this.F$=!!t.released,this.j$=!!t.markedForRemoval,this.B$=t.completedTick,this.z$=!!t.implicitPause,this.U$=!!t.isTemplate,this.J$=t.tags.split(" "),this.Y$=t.stringTags,this.H$=!!t.tagsChanged,this.Q$=!!t.firstTick)}Mst(){return this.b$.map(t=>t.g7())}wst(t){this.rst(),t.forEach((t,s)=>{const i=this.b$[s];i.y7(t)}),this.b$.filter(t=>t.cst())}static vtt(t){const s=this.Fz();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static btt(t){if(T.je(t))return t.slice(0);if(T.ve(t))return t.split(" ");throw new Error("invalid tags")}Sst(){return this.Z$||(this.Z$=T.un(self.Wz,this)),this.Z$}}}{const Fn=self.Ps;Fn.ett=class extends Fn.an{constructor(t,s){super(),this.sK=t,this.Tst=s,this.bst=s.itt(),this.xst=NaN,this.vst=NaN,this.Gst=null,this.Cst=null,this.Ist=!1,this.V_=0<s.sst(),this._st=!1,this.Est=!1,this.Dst=NaN,this.Ast=null,this.Nst=this.Tst.Ost().Lst(),this.Rst=[],this.kst(),this.Pst=0,this.jZ=0,this.Fst=0}static i2(t,s){return Fn.un(Fn.ett,t,s)}cn(){this.Nst=null;for(const t of this.Rst)t.cn();Fn.Wr(this.Rst),this.Rst=null,this.sK=null,this.Gst=null,this.Cst=null,this.Tst=null,this.Ast=null}kst(){for(const t of this.Tst.Bst().jst())this.Rst.push(Fn.zst.i2(this,t))}nst(){for(const t of this.Rst)t.nst()}FX(){for(const t of this.Rst)t.FX();this.Gst=null,this.Cst=null}Ust(){return this.sK}Wk(){return this.sK.Wk()}gst(){return this.Nst||(this.Nst=this.Tst.Ost().Lst()),this.Nst}fst(){return this.Rst}tU(s){for(let t=0;t<this.Rst.length;t++){const i=this.Rst[t];if(i.dst()===s)return i}}Wst(){this.Gst||this.Yz()}Qst(){return!!this.Gst&&!this.Gst.KU()}cst(){if(!this.ltt())return!1;const t=this.Vst(),s=this.Wk().Mk(t);return!!s&&!s.KU()}LF(){if(this.ltt()){const t=this.Jst();if(-1!==t)return this.Wk().TJ(t)}}Yst(){return this.sK.hK().indexOf(this)}ost(){this.Gst=null,this.xst=NaN,this.Cst=null,this.vst=NaN,this.Ist=!0}ust(){return!!this.Gst}Yz(){if(!this.Ist){if(!this.Gst||!this.Qst()){const t=this.Vst();this.Gst=this.Wk().Mk(t)}return this.Gst}}lst(t){if(this.Ist=!1,this.Gst!==t){this.FX(),this.Gst=t,this.vst=t.LF().bO(),this.xst=t.YF(),this.Cst=t.xk();for(const s of this.Hst()){const i=s.qst,e=s.Zst,h=i.Xst();switch(h){case"instance-variable":{e.Kst();const n=t.LF(),r=n.$st(s.name),o=n.tit(r),a=n.sit(r);o===s.name&&a===s.type&&e.iit(r);break}case"behavior":{const l=s.IB,u=this.LF(),c=t.LF(),f=e.EB(c);if(l&&f){const d=l.ef();u.eit(d),c.eit(d),e.Kst(),e.hit(f.$J())}break}}}}}*Hst(){for(const t of this.Rst){const s=t.ott(),i=this.LF(),e={qst:t,Zst:s};switch(t.Xst()){case"world-instance":e.property=t.dst();break;case"instance-variable":{const h=s.Kst();e.name=i.tit(h),e.type=i.sit(h);break}case"effect":{const n=i.q3(),r=s.nit(n);e.rit=r;break}case"behavior":{const o=s.EB(i);e.IB=o;break}case"plugin":e.v3=i.G3()}yield e}}xk(){if(!this.Cst||!this.Qst()){const t=this.Yz();t&&(this.Cst=t.xk())}return this.Cst}oit(){return this.Tst}Vst(){return isNaN(this.xst)?this.Tst.Vst():this.xst}ait(t){this.Tst.ait(t)}dtt(){return this.Tst.dtt()}ptt(t){this.Tst.ptt(t)}gK(){return this.Tst.gK()}Kz(){return this.Tst.Kz()}sst(){return this.Tst.sst()}lit(){return this.Tst.lit()}uit(t){this.Tst.uit(t)}mtt(t){this.Tst.mtt(t)}Jz(t){for(const s of this.gst())s.Jz(t);for(const i of this.fst())i.Jz(t)}cit(){return this.Tst.cit()}fit(t){this.Tst.fit(t)}Jst(){return isNaN(this.vst)?this.Tst.Jst():this.vst}dit(t){this.Tst.dit(t)}pit(t){this.Tst.pit(t)}mit(){const t=this.Yz();if(t){const s=t.wB();if(s.git())return t.wB().mit()}return this.Tst.mit()}yit(t){this.Tst.yit(t)}Mit(){const t=this.Yz();if(t){const s=t.wB();if(s.git())return t.wB().Mit()}return this.Tst.Mit()}dv(){return this.Tst.dv()}ef(){return this.Tst.ef()}ltt(){return 0===this.dv()}wit(){return 1===this.dv()}Sit(){return 2===this.dv()}Tit(){return this.Pst}EX(){return this.jZ}Xtt(){return this.Fst}X_(){return this.V_}Utt(){for(const t of this.Rst)t.Utt()}_X(){if(this.Wst(),this.Qst()||!this.ltt()){const t=this.Ust(),s=t.Stt(),i=s?0:this.lit();for(const h of this.Rst)h._X(i),0===this.Pst&&1===h.Tit()&&(this.Pst=1),0===this.jZ&&1===h.EX()&&(this.jZ=1);this.Fst=0;const e=this.Rst.some(t=>t.Xtt());e&&(this.Fst=1),this.Ast=this.bit(i),this._st=!1,this.Est=!1,this.Jc(i),this.xit(this.bit(i))}}qtt(){if(this.Wst(),this.Qst()||!this.ltt()){this.sK.Stt();const t=this.sK.nN()-this.sst();this.Ast=this.bit(t);for(const s of this.Rst)s.qtt(t)}}$tt(){if(!this.Ust().RX()&&(this.Wst(),this.Qst()||!this.ltt())&&!this.V_){const t=this.sK.nN(),s=this.sst()+this.lit();s<=t?this.Jc(this.lit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Jc(0,!0,!1,!0,!1,!1,!0)}}Ztt(){for(let t=0,s=this.Rst.length;t<s;t++){const i=this.Rst[t];i.Ztt(),0===this.Pst&&1===i.Tit()&&(this.Pst=1),0===this.jZ&&1===i.EX()&&(this.jZ=1)}}tst(){const s=this.Rst.length;for(let t=0;t<s;t++)this.Rst[t].tst()}Jc(i,t=!1,e=!1,h=!1,s=!1,n=!1,r=!1){this.Gst||this.Yz();const o=this.Gst&&!this.Gst.KU(),a=0===this.Tst.Tf;if((o||!a)&&!(n&&a&&this.LF().AJ()||(i-=this.sst())<0)){this.vit(i,t),this.Git(i,t,s);for(let t=0,s=this.Rst.length;t<s;t++)this.Rst[t].Jc(i,e,h,r);this.Cit(i,t),0!==this.Pst&&(this.Cst||(this.Cst=this.Gst.xk()),this.Cst)&&this.Cst.Zj()}}ist(){const s=this.Rst.length;for(let t=0;t<s;t++)this.Rst[t].ist()}vit(t,s){if(s&&this.V_&&!this._st){const i=this.Ust();if(i.Stt()){if(t<0)return}else if(t>this.lit())return;for(const e of this.Rst)e._X();this._st=!0}}Cit(t,s){if(s&&this.V_&&!this.Est){const i=this.Ust();if(i.Stt()){if(t>=this.lit()){for(const e of this.Rst)e.Jc(this.lit(),!1,!0);this.Est=!0}}else if(t<=0){for(const h of this.Rst)h.Jc(0,!1,!0);this.Est=!0}}}Git(t,s,i){if(!i&&s&&Fn.aq.Timeline){const e=this.Ust(),h=this.Ast.aK(),n=this.Ast.nN(),r=h?h.nN():e.Az();if(t<=n||r<=t)if(this.Ast=this.bst.Iit(t,this.Tst),e.Stt())h&&this.xit(this.Ast);else{const o=this.Ast.aK();o&&this.xit(o)}}}bit(t){const s=this.bst._it(t,this.Tst);return s||this.bst.Iit(t,this.Tst)}xit(t){if(Fn.aq.Timeline){const s=this.Ust(),i=s.htt();Fn.aq.Timeline.rq.PushTriggerTimeline(s),Fn.aq.Timeline.rq.PushTriggerKeyframe(t),i.Sj(Fn.aq.Timeline.rq.OnAnyKeyframeReached),i.Sj(Fn.aq.Timeline.rq.xit),Fn.aq.Timeline.rq.PopTriggerTimeline(s),Fn.aq.Timeline.rq.PopTriggerKeyframe(t)}}Eit(){const t=this.Tst.Ost(),s=t.Dit();return s}Ait(){const t=this.Tst.Bst(),s=t.Nit(),i=Fn.zst.i2(this,s);return this.Rst.push(i),i}Lit(t){const s=this.Tst.Ost();s.Oit(t)}Rit(t){for(const s of this.Rst)s.Rit(t)}kit(){for(const t of this.Rst)t.kit()}Pit(){if(this.Wst(),this.Qst()||!this.ltt())for(const t of this.Rst)t.Pit()}Fit(){if(this.Wst(),this.Qst()||!this.ltt()){let t=!1;for(const s of this.Rst){const i=s.Fit();!t&&i&&(t=!0)}if(t){const e=this.Eit();e.Ez(this.Ust().nN()),e.Jz("noease"),e.fit(!0),e.Ttt("")}}}RZ(){isNaN(this.Dst)||this.jit(this.Dst),this.Dst=NaN}g7(){const t=this.Yz(),s=t?t.YF():this.Vst();return{propertyTracksJson:this.Bit(),lastKeyframeDataItemJson:this.zit(),initialStateOfNestedSet:this._st,endStateOfNestedSet:this.Est,instanceUid:s,cleared:this.Ist}}y7(t){if(t){this.Uit(t.propertyTracksJson),this.Wit(t.lastKeyframeDataItemJson),this.Dst=t.instanceUid,this._st=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this._st=t.initialStateOfNestedSet),this.Est=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Est=t.endStateOfNestedSet),this.Ist=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Rst)0===this.Pst&&1===s.Tit()&&(this.Pst=1),0===this.jZ&&1===s.EX()&&(this.jZ=1);this.Fst=0,this.Rst.some(t=>t.Xtt())&&(this.Fst=1)}}zit(){const t=this.Tst.Ost();return t.Qit(this.Ast)}Bit(){return this.Rst.map(t=>t.g7())}Uit(t){t.forEach((t,s)=>{const i=this.Rst[s];i.y7(t)})}jit(t){if(Fn.pe(t)){const s=this.Wk().Mk(t);if(s){const i=this.Ust();i.ast(this.Tst.Kz(),s,this.Yst())}}}Wit(t){const s=this.Tst.Ost();this.Ast=s.Vit(t)}}}{const jn=self.Ps;jn.zst=class extends jn.an{constructor(t,s){super(),this.Jit=t,this.Yit=s,this.Hit=s.Bst(),this.Pst=0,this.jZ=0,this.Fst=0,this.qit=this.ott(),this.Zit=this.Yit.Kit().Xit(),this.$it=null,this.tet=null}static i2(t,s){return jn.un(jn.zst,t,s)}cn(){this.Jit=null,this.qit&&(this.qit.cn(),this.qit=null),this.Zit=null,this.Yit=null,this.Hit=null}Tit(){return this.Pst}EX(){return this.jZ}Xtt(){return this.Fst}iet(){return!!this.tet}eet(t){this.tet=t}het(){return this.tet}net(){return this.Jit}ret(){return this.Yit}Bst(){return this.Hit}Ust(){return this.Jit.Ust()}Wk(){return this.Jit.Wk()}Yz(){return this.Jit.Yz()}ott(){if(!this.qit){let t=this.Yit.Xst(),s;switch(t){case"behavior":s=new jn.zst.oet(this);break;case"effect":s=new jn.zst.aet(this),this.jZ=1;break;case"instance-variable":s=new jn.zst.let(this);break;case"plugin":s=new jn.zst.uet(this),this.jZ=1;break;case"world-instance":s=new jn.zst.cet(this),this.jZ=1,this.Pst=1;break;case"value":s=new jn.zst.fet(this);break;case"audio":s=new jn.zst.det(this)}this.qit=s}return this.qit}Xst(){return this.Yit.Xst()}pet(t){this.Yit.pet(t)}met(){return this.Yit.yet()}Met(t){this.Yit.wet(t)}$z(){return this.ott().Tet()}dst(){return this.Yit.bet()}xet(t){this.Yit.vet(t)}Get(){return this.Yit.dv()}Cet(t){this.Yit.Iet(t)}_et(){return this.Bst().Eet(this.Yit).dv()}Det(){return this.Yit.Det()}Aet(t){this.Yit.Aet(t)}Net(){return this.Yit.Net()}Let(t){this.Yit.Let(t)}cit(){return this.Yit.cit()}fit(t){this.Yit.fit(t)}dtt(){return this.Yit.dtt()}ptt(t){this.Yit.ptt(t)}gK(){return this.Yit.gK()}mtt(t){this.Yit.mtt(t)}Jz(t){for(const s of this.Oet())s.Jz(t)}Ret(){return this.Yit.Ret()}Oet(){return this.Zit||(this.Zit=this.Yit.Kit().Xit()),this.Zit}oK(){return this.Yit.Kit().oK()}ket(t){return this.Hit.ket(t,this.Yit)}Pet(t){return this.Hit.Pet(t,this.Yit)}Fet(t){let s=this.Hit.ket(t,this.Yit),i;return i=s?this.Hit.jet(t,this.Yit):(s=this.Hit.Pet(t,this.Yit),this.Hit.Bet(t,this.Yit)),{start:s,end:i}}*zet(){for(const t of this.Oet())yield t.xK()}*Uet(){for(const t of this.Oet())yield t.nN()}nst(){this.ott().nst()}FX(){this.ott().FX()}Wet(){return this.ott().Wet()}Utt(){this.ott().Utt()}_X(t){this.ott()._X(),this.$it=this.Qet(t),this.Ztt()}qtt(t){this.ott().qtt(),this.$it=this.Qet(t)}Ztt(){const t=this.net();if(this.Fst=0,t.ltt()){const s=this.Ust(),i=t.Yz(),e=this.ott(),h=this.dst(),n=e.Vet();if(n){const r=s.ntt(i,e,h,this);r&&r.length&&(this.Fst=1)}else this.Fst=0}}Qet(t){const s=this.Ust(),i=this.Hit.ket(t,this.Yit);return i||(s.Stt()?this.Hit.Pet(t,this.Yit):this.Hit.Bet(t,this.Yit))}tst(){this.qit.tst()}Jc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Hit.Pet(t,this.Yit);else{if(this.$it){const o=this.Ust(),a=this.$it.aK(),l=this.$it.nN(),u=a?a.nN():o.Az();(t<=l||u<=t)&&(this.$it=this.Hit.Pet(t,this.Yit),r=!0)}else this.$it=this.Hit.Pet(t,this.Yit),r=!0;h=this.$it}h&&(n=h.aK()),this.qit.Jc(t,h,n,s,i,e,r)}Jet(t){if(this.$it){const e=this.Ust(),h=this.$it.aK(),n=this.$it.nN(),r=h?h.nN():e.Az();(t<=n||r<=t)&&(this.$it=this.Hit.Pet(t,this.Yit))}else this.$it=this.Hit.Pet(t,this.Yit);const s=this.$it,i=s.aK();return this.qit.Jet(t,s,i)}Yet(t,s,i){return this.qit.Jet(t,s,i)}ist(){this.qit.ist()}static Het(t,s){const i=s.ret(),e=s.Hit;return e.Pet(t,i)}static qet(t,s){const i=s.ret(),e=s.Hit;return e.Bet(t,i)}Zet(){const t=this.Yit.Kit(),s=t.Xet();return this.$it=null,s}Rit(t){this.$it=null;const s=this.Yit.Kit();s.Ket(t)}kit(){this.ott().kit()}Pit(){const t=this.ott().Pit();if(t){const s=this.Hit.Eet(this.Yit),i=this.ott().Wet();s.$et(i)}}Fit(){const t=this.ott().Fit();return t&&this.tht(),this.ott().sht(),t}tht(){const t=this.Ust().nN(),s=this.ott(),i=jn.zst.Het(t,this),e=this.Zet();e.Iet(i.dv()),e.Ez(t),e.Jz(i.iht()),e.fit(!0),e.eht(s.hht()),e.$et(s.Wet())}g7(){return{sourceAdapterJson:this.ott().g7()}}y7(t){t&&this.ott().y7(t.sourceAdapterJson)}}}{const Bn=self.Ps,zn=Bn.zst;zn.cet=class{constructor(t){this.nht=t,this.rht=null,this.oht()}cn(){this.rht&&(this.rht.cn(),this.rht=null),this.nht=null}Vet(){return this.rht.Vet()}tU(){return this.nht}nst(){this.rht&&this.rht.nst()}FX(){this.rht&&this.rht.FX()}oht(){return this.rht||(this.rht=this.aht()),this.rht}Kst(){}bO(){return this.Kst()}lht(){}Utt(){this.oht().Utt()}_X(){this.oht()._X()}qtt(){this.oht().qtt()}tst(){this.rht.uht()}Jc(t,s,i,e,h,n,r){let o=this.nht._et(),a;switch(o){case"numeric":a=zn.cht.Jc(t,s,i,this.nht);break;case"angle":a=zn.fht.Jc(t,s,i,this.nht);break;case"boolean":a=zn.dht.Jc(t,s,i,this.nht);break;case"color":a=zn.pht.Jc(t,s,i,this.nht);break;case"text":a=zn.mht.Jc(t,s,i,this.nht)}this.rht.ght(t,a,s,i,e,h,n,r)}Jet(t,s,i){switch(this.nht._et()){case"numeric":return zn.cht.Jc(t,s,i,this.nht);case"angle":return zn.fht.Jc(t,s,i,this.nht);case"boolean":return zn.dht.Jc(t,s,i,this.nht);case"color":return zn.pht.Jc(t,s,i,this.nht);case"text":return zn.mht.Jc(t,s,i,this.nht)}}ist(){this.rht.yht()}kit(){this.oht().Mht()}sht(){this.oht().sht()}Wet(){return this.oht().Wet()}Pit(){return this.oht().Pit()}Fit(){return this.oht().Fit()}hht(){const t=this.nht,s=t.net(),i=s.Ust().nN(),e=zn.Het(i,t),h=e.aK(),n=t._et();switch(n){case"numeric":return zn.cht.Jc(i,e,h,t);case"angle":return zn.fht.Jc(i,e,h,t);case"boolean":return zn.dht.Jc(i,e,h,t);case"color":return zn.pht.Jc(i,e,h,t);case"text":return zn.mht.Jc(i,e,h,t)}}aht(){const t=this.nht,s=t.Ret()?t._et():"";switch(s){case"combo":case"boolean":case"text":case"string":return new zn.Sht.wht(this);case"numeric":case"number":case"angle":return new("combo"===this.nht.Get()?zn.Sht.wht:zn.Sht.Tht)(this);case"color":case"offsetColor":return new zn.Sht.bht(this);default:return new zn.Sht.Tht(this)}}g7(){return{propertyAdapterJson:this.oht().g7()}}y7(t){t&&this.oht().y7(t.propertyAdapterJson)}}}{const Un=self.Ps;class Wn extends Un.zst.cet{constructor(t){super(t),this.xht=NaN}Kst(){return this.nht.ret().yet()[0]}bO(){return this.xht||super.bO()}lht(){return this.nht.net().Yz()}iit(t){const s=this.nht.ret().yet()[0];s!==t&&(this.xht=t)}Jc(t,s,i,e,h,n,r){this.oht().vht(s.Tet())&&super.Jc(t,s,i,e,h,n,r)}Jet(t,s,i){if(this.oht().vht(s.Tet()))return super.Jet(t,s,i)}g7(){return Object.assign(super.g7(),{index:this.xht})}y7(t){t&&(super.y7(t),this.xht=t.index)}}Un.zst.let=Wn}{const Qn=self.Ps;class Vn extends Qn.zst.cet{constructor(t){super(t),this.w8=NaN}Kst(){const t=this.nht.ret();return t.yet()[1]}lht(){const t=this.nht.ret(),s=this.nht.net(),i=this.w8||t.yet()[0],e=s.Yz(),h=e.Ght(i),n=e.Cht()[h];return n.wB()}EB(t){const s=this.nht.ret(),i=s.yet()[2];return t.Iht(i)}hit(t){const s=this.nht.ret();s.yet()[0]!==t&&(this.w8=t)}Jc(t,s,i,e,h,n,r){const o=this.nht.net(),a=o.Yz();this.EB(a.LF())&&super.Jc(t,s,i,e,h,n,r)}Jet(t,s,i){const e=this.nht.net(),h=e.Yz();if(this.EB(h.LF()))return super.Jet(t,s,i)}g7(){return Object.assign(super.g7(),{sid:this.w8})}y7(t){t&&(super.y7(t),this.w8=t.sid)}}Qn.zst.oet=Vn}{const Jn=self.Ps;class Yn extends Jn.zst.cet{constructor(t){super(t)}Kst(){return this.nht.ret().yet()[1]}lht(){const t=this.nht,s=t.net(),i=s.xk(),e=i.Hj(),h=e.q3(),n=this.nit(h),r=n.bO();return e.RB(r)?e._ht(r):null}nit(t){const s=this.nht,i=s.ret().yet()[0];return t.Eht(i)}Jc(t,s,i,e,h,n,r){this.Dht()&&super.Jc(t,s,i,e,h,n,r)}Jet(t,s,i){if(this.Dht())return super.Jet(t,s,i)}Dht(){const t=this.nht,s=t.net(),i=s.xk(),e=i.Hj(),h=e.q3(),n=this.nit(h);if(n){const r=n.bO();return e.RB(r)}}}Jn.zst.aet=Yn}{const Hn=self.Ps;class qn extends Hn.zst.cet{constructor(t){super(t)}Kst(){return this.nht.ret().yet()[0]}lht(){return this.nht.net().Yz().wB()}Jc(t,s,i,e,h,n,r){const o=this.nht.net(),a=o.LF().G3(),l=o.Yz().LF().G3();a===l&&super.Jc(t,s,i,e,h,n,r)}Jet(t,s,i){const e=this.nht.net(),h=e.LF().G3(),n=e.Yz().LF().G3();if(h===n)return super.Jet(t,s,i)}Aht(){const t=this.nht.net(),s=t.LF().G3();if(Hn.aq.Nht&&s instanceof Hn.aq.Nht&&("initial-frame"===this.nht.dst()||"initial-animation"===this.nht.dst()))switch(this.nht.gK()){case"relative":case"absolute":return null}}}Hn.zst.uet=qn}{const Zn=self.Ps;class Xn extends Zn.zst.cet{constructor(t){super(t),this.Lht=0,this.Oht=!1}Vet(){return!1}_X(){let t=this.nht.Bst(),s=this.nht.ret();s=t.Eet(s),this.Lht=s.xK()}qtt(){}Tet(){return this.Oht||this.nht.Jc(0),this.Lht}Jc(t,s,i,e,h,n,r){this.Lht=Zn.zst.cht.Jc(t,s,i,this.nht),this.Oht=!0}kit(){}sht(){}Wet(){return this.Lht}Pit(){return!1}Fit(){return!1}g7(){return{value:this.Lht,init:this.Oht}}y7(t){t&&(this.Lht=t.value,this.Oht=!t.hasOwnProperty("init")||t.init)}}Zn.zst.fet=Xn}{const Kn=self.Ps;class $n extends Kn.zst.cet{constructor(t){super(t),this.Rht=!1,this.kht=null,this.Pht=null,this.Fht=null,this.sK=this.nht.Ust(),this.Jit=this.nht.net(),this.jht=this.nht.met(),this.Bht=this.jht[0],this.zht=this.jht[1],this.jht[3]?this.Uht=this.jht[3]:this.Uht=Math.random().toString(36).slice(2),this.Wht=NaN,this.Qht=NaN,this.Vht=NaN,this.Jht=null,this.Yht()}cn(){super.cn(),this.kht=null,this.Pht=null,this.Fht=null,this.sK=null,this.Jit=null,this.jht=null,this.Bht=null,this.Jht=null}Yht(){if(self.Ps.aq.Audio){const t=this.nht.Wk(),s=t.Hht(self.Ps.aq.Audio);s&&(this.kht=s.b3().wB()),this.Pht=self.Ps.aq.Audio.qht,this.Fht=self.Ps.aq.Audio.Zht}}Xht(){if(!this.Jht){const t=this.nht.net(),s=t.tU("audioSource");s&&(this.Jht=s.ott())}}Kht(){const t=this.nht.net(),s=t.tU("volume");return(s?s.ott():this).Qht}nst(){super.nst(),this.Rht=!1,this.kht&&(this.Fht&&(this.Wht=this.Fht.$ht.call(this.kht,this.Uht),this.Qht=this.Fht.tnt.call(this.kht,this.Uht)),this.Pht)&&this.Pht.Cz.call(this.kht,this.Uht)}snt(){return this.Uht}int(){return this.Vht}ent(t){this.Vht=t}_X(){super._X(),this.Wht=NaN,this.Rht=!1}qtt(){super.qtt();const t=this.nht.Ust(),s=t.nN();switch(this.Wht=s-this.zht,this.nht.dst()){case"audioSource":break;case"volume":this.Qht=this.nht.Jet(s)}this.Rht=!1}Jc(t,s,i,e,h,n,r){if(this.kht)switch(this.nht.dst()){case"audioSource":{if(!this.sK.Stt())return;if(e)return void(this.Pht&&this.Pht.Cz.call(this.kht,this.Uht));if(t<this.zht)return void(this.Rht=!1);const o=this.Fht.hnt.call(this.kht,this.Uht),a=this.sK.Pz();if(a!==o&&this.Pht.kz.call(this.kht,this.Uht,a),this.Rht)return;if(!this.nht.Ust().IsPlaying())return;if(this.Rht=!0,isNaN(this.Wht)){const l=self.performance.now(),u=t-this.zht,c=this.kht.nnt();if("suspended"===c)return void(this.Rht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.Pht){let t=this.int();isNaN(t)?(this.ent(0),t=0):this.ent(t),this.Pht.rnt.call(this.kht,this.Bht,t,this.Uht,p)}}else{const m=this.Wht,g=(this.Wht=NaN,this.Kht()),y=(this.Qht=NaN,this.kht.nnt());if("suspended"===y)return void(this.Rht=!1);this.Pht&&(this.ent(g),this.Pht.rnt.call(this.kht,this.Bht,g,this.Uht,m))}break}case"volume":this.Xht(),super.Jc(t,s,i,e,h,n,r)}}Jet(t,s,i){if(this.kht)switch(this.nht.dst()){case"audioSource":return;case"volume":return this.Xht(),super.Jet(t,s,i)}}ont(t,s){return this.Jht?this.Jht.int():0}ant(t,s,i,e){this.Jht&&this.Jht.ent(this.ont()+s),this.Pht&&this.Jht&&this.Pht.ent.call(this.kht,this.Jht.snt(),this.Jht.int())}lnt(t,s,i){this.Jht&&this.Jht.ent(s),this.Pht&&this.Jht&&this.Pht.ent.call(this.kht,this.Jht.snt(),this.Jht.int())}unt(){return!0}g7(){return{audioPlaybackStarted:this.Rht,audioTag:this.Uht,pauseTime:this.Wht,pauseVolume:this.Qht,volume:this.Vht}}y7(t){t&&(this.Rht=t.audioPlaybackStarted,this.Uht=t.audioTag,this.Wht=t.pauseTime,this.Qht=t.pauseVolume,this.Vht=t.volume,this.Yht())}}Kn.zst.det=$n}{const tr=self.Ps;tr.zst.Sht=class{constructor(t){this.qit=t,this.nht=t.tU(),this.Cst=this.nht.net().xk(),this.cnt=this.nht.dst(),this.fnt=!1,this.dnt=null,this.pnt=null}cn(){this.qit=null,this.nht=null,this.Cst=null,this.dnt=null,this.pnt=null}Vet(){return!1}nst(){}FX(){this.Cst=null,this.dnt=null,this.pnt=null}ott(){return this.qit}tU(){return this.nht}xk(){return this.Cst||(this.Cst=this.nht.net().xk()),this.Cst}mnt(t){this.fnt=!!t}gnt(){return this.fnt}Utt(){}_X(){}qtt(){}Mht(){this.dnt=this.Wet()}sht(){this.dnt=null}Wet(){}Pit(){}Fit(){}vht(t){const s=typeof this.ynt(),i=typeof t;return s==i}uht(){}ght(t,s,i,e,h,n,r,o){}yht(){}Mnt(){const t=this.wnt(()=>{const t=this.nht.ret(),s=this.nht.Bst();return s.Eet(t)},()=>{const t=this.nht.ret(),s=this.nht.Bst();return s.Snt(t)});return t.Tnt()}bnt(){const t=this.nht.Ust(),e=t.nN()-this.nht.net().sst(),s=this.wnt(()=>{const t=this.nht.ret(),s=this.nht.Bst();return s.Pet(e,t)},()=>{const t=this.nht.ret(),s=this.nht.Bst(),i=s.Bet(e,t);return i||s.Snt(t)});return s.Tnt()}wnt(t,s){const i=this.nht.Ust();return(i.Stt()?t:s)()}xnt(t,s){const i=this.nht.gK();return("relative"===i?t:s)()}vnt(t,s){return(this.gnt()?(this.mnt(!1),t):s)()}Gnt(t){}Cnt(){return this.qit.bO()}Int(){return this.pnt||(this.pnt=this.qit.lht()),this.pnt}_nt(t,s,i,e,h,n){const r=this.nht.Xst();switch(r){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}g7(){return{firstAbsoluteUpdate:this.fnt,saveState:this.dnt}}y7(t){t&&(this.fnt=t.firstAbsoluteUpdate,this.dnt=t.saveState)}Ent(t,s=!1){const i=[];for(const e of t){const h=e.net().sst();for(const n of e.Oet())(s&&0===n.nN()||!s)&&i.push({time:h+n.nN(),value:n.Tnt()})}return i.sort((t,s)=>t.time-s.time)}Dnt(t,s,i){return this.Ant(s,i)}Ant(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const sr=self.Ps,ir=new Map,er=[0,0,0];class hr extends sr.zst.Sht{constructor(t){super(t)}Utt(){}_X(){}qtt(){}Wet(){const t=this.nht.Xst(),s=this.Int(),i=this.Cnt();switch(t){case"behavior":return this.Nnt(s.Lnt(i));case"effect":return this.Nnt(s[i]);case"plugin":return this.Nnt(s.Lnt(i));case"world-instance":return this.Nnt(this.ynt())}}Pit(){const t=this.Mnt();return!this.Ont(t,this.ynt())}Fit(){return!sr.ye(this.dnt)&&!this.Ont(this.dnt,this.ynt())}Ont(t,s){return t=this.Rnt(t),s=this.Rnt(s),t.ya(s)}Mnt(){const t=super.Mnt();return this.Rnt(t)}bnt(){const t=super.bnt();return this.Rnt(t)}Gnt(t){}Nnt(t){return(sr.$e(t,sr.Ho)?t.toArray():t).slice(0,3)}Rnt(t){return sr.$e(t,sr.Ho)?t:new sr.Ho(t[0],t[1],t[2],1)}vht(t){return!0}Vet(){return!0}uht(){const t=this.nht.Ust(),s=this.nht.Yz(),i=this.nht.ott(),e=t.ntt(s,i,this.cnt,this.nht);if(e&&1<e.length){ir.has(s)||ir.set(s,new Map);const h=ir.get(s),n=this.nht.Xst(),r=(h.has(n)||h.set(n,new Map),h.get(n));r.has(this.cnt)||r.set(this.cnt,{knt:!1,color:new sr.Ho(0,0,0,1)})}}Pnt(t,s,i){const e=ir.get(t).get(s).get(i);return e.knt=!0,e.color}ght(t,s,i,e,h,n,r,o){const a=this.nht.Ust(),l=this.nht.net(),u=this.nht.Yz(),c=this.nht.ott(),f=this.nht.Xst(),d=this.cnt,p=a.ntt(u,c,d,this.nht);if(p&&1<p.length){const m=this.Ent(p,!0),g=this.Dnt(a,a.nN(),m);if(g){const y=l.sst(),M=g.time-y;if(0==M)this.Pnt(u,f,this.cnt).ia(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.nht.Jc(M,!1,!0),x=sr.Ho.qa(w,b[0]),v=sr.Ho.qa(S,b[1]),G=sr.Ho.qa(T,b[2]);this.Pnt(u,f,this.cnt).ia(x,v,G)}}}else this.Fnt(s[0],s[1],s[2])}yht(){const t=this.nht.Yz();if(ir.has(t)){const s=ir.get(t),i=this.nht.Xst();if(s.has(i)){const e=s.get(i);if(e.has(this.cnt)){const h=e.get(this.cnt),n=h.knt,r=h.color;n&&this.Fnt(r.ua(),r.ca(),r.fa()),0===e.size&&s.delete(i),0===s.size&&ir.delete(t)}}}}ynt(){const t=this.nht.Xst(),s=this.Int(),i=this.Cnt();switch(t){case"behavior":return this.Rnt(s.Lnt(i));case"effect":return s[i].clone();case"plugin":return this.Rnt(s.Lnt(i));case"world-instance":return this.xk().u5().clone()}}Fnt(t,s,i){const e=this.nht.Xst(),h=this.Int(),n=this.Cnt();switch(e){case"behavior":er[0]=t,er[1]=s,er[2]=i,h.jnt(n,er);break;case"effect":h[n].ta(t,s,i);break;case"plugin":er[0]=t,er[1]=s,er[2]=i,h.jnt(n,er);break;case"world-instance":this.xk().Bnt(t,s,i)}}g7(){}y7(t){}}sr.zst.Sht.bht=hr}{const nr=self.Ps,rr=nr.zst;class or extends nr.zst.Sht{constructor(t){super(t)}Utt(){}_X(){}qtt(){}Wet(){return this.ynt()}Pit(){const t=this.Mnt();return t!==this.Wet()}Fit(){return!nr.ye(this.dnt)&&this.dnt!==this.Wet()}Vet(){return!1}ght(t,s,i,e,h,n,r,o){const a=this.nht,l=a.net(),u=a.Xst(),c=a.Ust(),f=l.Yz(),d=a.ott(),p=this.cnt,m=c.ntt(f,d,p,a);if(m&&1<m.length){const y=this.Ent(m),M=t+l.sst(),w=this.Dnt(c,M,y);w&&(s=w.value)}const g=a._et();switch(g){case"numeric":if(rr.cht.znt(this.Cnt(),this.Int(),s,u))break;return;case"angle":if(rr.fht.znt(this.Cnt(),this.Int(),s,u))break;return;case"boolean":if(rr.dht.znt(this.Cnt(),this.Int(),s,u))break;return;case"color":if(rr.pht.znt(this.Cnt(),this.Int(),s,u))break;return;case"text":if(!rr.mht.znt(this.Cnt(),this.Int(),s,u))return}this.Fnt(s)}ynt(){const t=this.nht.Xst(),s=this.Int(),i=this.Cnt();switch(t){case"behavior":return s.Lnt(i);case"effect":return s[i];case"instance-variable":return s.Unt(i);case"plugin":return s.Lnt(i)}}Fnt(t){const s=this.nht.Xst(),i=this.Int(),e=this.Cnt();switch(s){case"behavior":i.jnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Wnt(e,t);break;case"plugin":i.jnt(e,t)}}}nr.zst.Sht.wht=or}{const ar=self.Ps,lr=(ar.zst.Sht,new Map),ur=(t,s,i,e,h,n=!1,r=null,o=null)=>{lr.set(t,{Qnt:s,Vnt:i,Jnt:e,round:h,Ynt:n,init:r,reset:o})};ur("offsetX",(t,s,i,e)=>{"relative"===e.nht.gK()?t.Hnt(s,i.Ust().ytt()):t.Hnt(s)},(t,s)=>t.mT(s),t=>t.pT(),!0),ur("offsetY",(t,s,i,e)=>{"relative"===e.nht.gK()?t.qnt(s,i.Ust().ytt()):t.qnt(s)},(t,s)=>t.MT(s),t=>t.yT(),!0),ur("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.nht.gK(),l=1===i.Znt.dv();if((h||l)&&s.P5()&&s.Q5()){if(isNaN(i.Xnt)){let e=[],t=s.v5();for(;t;)e.push(t),t=t.v5();e.reverse();let a=(t,s)=>s.Ust().pst(t.Yz()),h=(t,s)=>{const i=a(t,s);if(i)return i.mit();const e=t.Yz().wB();return e.git()?e.mit():t.$nt().Knt()},n=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const n=h.tU(i);if(!n)return e;const r=n.ret().Kit();if(!r)return e;const o=r.Snt();return o?o.Tet():e},r;if(l){let t=e[e.length-1];r=t.pm()}else{let s=e[0],t=s.$nt().Knt(),i=s.$nt().trt();r=t*i,r=(r+=n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).$nt().trt();r=(r=(r*=u)+n(s,o,"offsetWidth"))+h(s,o)*n(s,o,"offsetScaleX")}}i.Xnt=0===r?Number.EPSILON:r}e||s.Hm(t/i.Xnt,!0)}else s.Hm(t)}},(t,s)=>t.xm(s),t=>t.pm(),!0),ur("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.nht.gK(),a=1===i.Znt.dv();if((h||a)&&s.P5()&&s.J5()){if(isNaN(i.Xnt)){let e=[],t=s.v5();for(;t;)e.push(t),t=t.v5();e.reverse();let h=(t,s)=>{e=t;const i=s.Ust().pst(e.Yz());var e;if(i)return i.Mit();const h=t.Yz().wB();return h.git()?h.Mit():t.$nt().srt()},n=(t,s,i,e=0)=>{const h=s.Ust().pst(t.Yz());if(!h)return e;const n=h.tU(i);if(!n)return e;const r=n.ret().Kit();if(!r)return e;const o=r.Snt();return o?o.Tet():e},r;if(a){let t=e[e.length-1];r=t.Cm()}else{let s=e[0],t=s.$nt().srt(),i=s.$nt().irt();r=t*i,r=(r+=n(s,o,"offsetHeight"))+h(s,o)*n(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).$nt().irt();r=(r=(r*=l)+n(s,o))+h(s,o)*n(s,o,"offsetScaleY")}}i.Xnt=0===r?Number.EPSILON:r}e||s.ert(t/i.Xnt,!0)}else s.ert(t)}},(t,s)=>t.gm(s),t=>t.Cm(),!0),ur("offsetAngle",(t,s,i,e,h)=>{t.hrt(s)},(t,s)=>t.i4(s),t=>t.e4(),!1,!0),ur("offsetOpacity",(t,s,i,e,h)=>{const n=e.nrt||1,r=(s/=n,t.DD()),o=r+s;if(0===e.rrt)1<o?e.rrt+=o-1:o<0&&(e.rrt+=o),t.ort(s);else{const a=t.DD()+s;0<s&&0<e.rrt?1<a&&(e.rrt+=a-1):0<s&&e.rrt<0?(e.rrt+=s,0<e.rrt&&(t.ort(e.rrt),e.rrt=0)):s<0&&0<e.rrt?(e.rrt+=s,e.rrt<0&&(t.ort(e.rrt),e.rrt=0)):s<0&&e.rrt<0&&a<0&&(e.rrt+=a)}},(t,s)=>{t.ND(s)},t=>t.DD(),!1,!0,(n,h,r)=>{switch(n.rrt=0,n.nht.gK()){case"relative":{n.nht.Bst();let t=n.nht.ret(),s=t.Kit(),i=s.Xit(),e=n.xk().DD(),h=e;for(const o of i){const a=o.nN(),l=n.nht.Jet(a);h=e+l,h=ar.yn(h,0,1)}n.art=e-h,n.art=Math.round(100*(n.art+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].nN(),c=n.nht.Jet(u);h-=c,h=ar.yn(h,0,1)}n.lrt=h,n.lrt=Math.round(100*(n.lrt+Number.EPSILON))/100;break}}const t="relative"===n.nht.gK(),s=1===n.Znt.dv();if((t||s)&&h.P5()&&h.K5()){let s=[],t=h.v5();for(;t;)s.push(t),t=t.v5();s.reverse();let i=(t,s,i)=>{const e=s.Ust().pst(t.Yz());if(!e)return 0;const h=e.tU(i);if(!h)return 0;const n=h.ret().Kit();if(!n)return 0;const r=n.Snt();return r?r.Tet():0},e=s[0].$nt().urt();e+=i(s[0],r,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],r,"offsetOpacity");n.nrt=0===e?1:e}},i=>{switch(i.nht.gK()){case"relative":{i.rrt=0;let t=i.xk(),s=t.DD();s=Math.round(100*(s+Number.EPSILON))/100,i.nht.Ust().Stt()?(t.ND(s+i.art),i.sG=0):(t.ND(s-i.lrt),i.sG=i.ott().hht());break}}}),ur("offsetOriginX",(t,s)=>t.crt(s),(t,s)=>t.frt(s),t=>t.oz(),!1),ur("offsetOriginY",(t,s)=>t.drt(s),(t,s)=>t.prt(s),t=>t.lz(),!1),ur("offsetZElevation",(t,s)=>t.mrt(s),(t,s)=>t.ST(s),t=>t.wT(),!0),ur("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.pm()<0?-1:1;if("relative"===e.nht.gK()&&t.P5()&&t.Q5()){const n=i.mit()*h*s;isNaN(e.Xnt)&&lr.get("offsetWidth").Qnt(t,1,i,e,!0),t.Hm(n/e.Xnt,!0)}else t.Hm(i.mit()*h*s)}},(t,s,i)=>{t.xm(i.mit()*s)},(e,h)=>{const n=e.pm()<0?-1:1;if(e.Q5()){let t=e.v5(),s=h.Ust().pst(t.Yz()),i=NaN;if(s)i=t.pm()/s.mit();else{const r=t.Yz().wB();i=r.git()?t.pm()/r.mit():1}return e.pm()*n/(h.mit()*i)}return e.pm()*n/h.mit()},!1),ur("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Cm()<0?-1:1;if("relative"===e.nht.gK()&&t.P5()&&t.J5()){const n=i.Mit()*h*s;isNaN(e.Xnt)&&lr.get("offsetHeight").Qnt(t,1,i,e,!0),t.ert(n/e.Xnt,!0)}else t.ert(i.Mit()*h*s)}},(t,s,i)=>{t.gm(i.Mit()*s)},(e,h)=>{const n=e.Cm()<0?-1:1;if(e.J5()){let t=e.v5(),s=h.Ust().pst(t.Yz()),i=NaN;if(s)i=t.Cm()/s.Mit();else{const r=t.Yz().wB();i=r.git()?t.Cm()/r.Mit():1}return e.Cm()*n/(h.Mit()*i)}return e.Cm()*n/h.Mit()},!1);class cr extends ar.zst.Sht{constructor(t){super(t),this.sG=0,this.rrt=0,this.art=0,this.lrt=0,this.nrt=NaN,this.Xnt=NaN,this.grt=void 0,this.yrt=void 0,this.Mrt=null,this.wrt=null,this.Srt=null,this.Trt=null,this.brt=null,this.xrt=null,this.vrt=null,this.Grt=null,this.Crt=!1,this.Irt=!1,ar.$e(this.nht.Ust(),ar._rt)?this.Znt=new ar.zst.Sht.Ert(this):this.Znt=new ar.zst.Sht.Drt(this);const s=this.nht.dst();switch(this.nht.Xst()){case"world-instance":{const i=lr.get(s);this.Mrt=i.Jnt,this.wrt=i.Qnt,this.Srt=i.Vnt,this.Crt=i.round,this.Irt=i.Ynt,this.brt=i.init,this.Trt=i.reset;break}case"audio":this.xrt=t.ont,this.vrt=t.ant,this.Grt=t.lnt,this.Crt=!!t.unt(),this.Irt=!1}}cn(){this.Znt=null,this.Mrt=null,this.wrt=null,this.Srt=null,this.Trt=null,this.brt=null,this.xrt=null,this.vrt=null,this.Grt=null,super.cn()}Vet(){return this.Znt.Vet()}Art(){return this.sG}Nrt(t){this.sG=t}Utt(){this.Trt&&this.Trt(this)}_X(){const t=this.Znt._X();if("number"==typeof t&&(this.sG=t),this.brt){const s=this.xk(),i=this.nht.net();this.brt(this,s,i)}}qtt(){const t=this.Znt.qtt();"number"==typeof t&&(this.sG=t)}Wet(){return this.ynt()}Pit(){const t=this.Mnt();return t!==this.Wet()}Fit(){return!ar.ye(this.dnt)&&this.dnt!==this.Wet()}uht(){this.Znt.uht()}ght(t,s,i,e,h,n,r,o){return this.Znt.ght(t,s,i,e,h,n,r,o)}yht(){this.Znt.yht()}ynt(){const t=this.Int(),s=this.Cnt(),i=this.xk(),e=this.nht.net(),h=this.nht.Xst();switch(h){case"behavior":return t.Lnt(s);case"effect":return t[s];case"instance-variable":return t.Unt(s);case"plugin":return t.Lnt(s);case"world-instance":return this.Mrt(i,e);case"audio":return this.xrt.call(this.ott(),i,e)}}Fnt(t,s,i){const e=this.Int(),h=this.Cnt(),n=this.xk(),r=this.nht.net(),o=this.nht.Xst();switch(o){case"behavior":e.Lrt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Ort(h,t);break;case"plugin":e.Lrt(h,t,this.ott().Aht());break;case"world-instance":this.wrt(n,t,r,this);break;case"audio":this.vrt.call(this.ott(),n,t,r,this)}}Rrt(t,s,i){let e=this.nht.dtt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.nht.Ust(),u=l.nN(),c=this.nht.ket(u);if(!c)return}const h=this.Int(),n=this.Cnt(),r=this.xk(),o=this.nht.net(),a=this.nht.Xst();switch(a){case"behavior":h.jnt(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.Wnt(n,t);break;case"plugin":h.jnt(n,t,this.ott().Aht());break;case"world-instance":this.Srt(r,t,o);break;case"audio":this.Grt.call(this.ott(),r,t,o)}}}krt(t,s,i,e,h,n,r,o){this.Znt.krt(t,s,i,e,h,n,r,o)}Prt(t,s,i,e,h){let n=(t="angle"===this.nht.Get()?ar.Sn(t):t).toString(),r=n.split(".")[1]||"",o=r.length,a=this.ynt(),l;switch(l=0===o?this.Crt?Math.round(a):this.Irt?"angle"===this.nht.Get()?ar.wn(Math.round(ar.Sn(a))):Number(ar.toFixed(a,2)):a:this.Crt?Number(ar.toFixed(a,o)):(this.Irt,a),this.Fnt(l-a,s,i),this.nht.dst()){case"offsetWidth":case"offsetScaleX":{const u=this.xk(),c=u.pm(),f=Number(ar.toFixed(c,2));u.Hm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.xk(),p=d.Cm(),m=Number(ar.toFixed(p,2));d.ert(m-p);break}}}g7(){return Object.assign(super.g7(),{v:this.sG,a:this.rrt,fod:this.art,bod:this.lrt,of:this.nrt,sf:this.Xnt,armorf:this.grt,armandf:this.yrt})}y7(t){t&&(super.y7(t),this.sG=t.v,this.rrt=t.a,this.art=ar.pe(t.fod)?t.fod:0,this.lrt=ar.pe(t.bod)?t.bod:0,this.nrt=ar.pe(t.of)?t.of:NaN,this.Xnt=ar.pe(t.sf)?t.sf:NaN,this.grt=ar.pe(t.armorf)?t.armorf:void 0,this.yrt=ar.pe(t.armandf)?t.armandf:void 0)}}ar.zst.Sht.Tht=cr}{const fr=self.Ps;class dr{constructor(t){this.Frt=!1,this.Lht=0,this.jrt=!1,this.Brt=!1,this.Rst=t;for(let t=0,s=this.Rst.length;t<s;t++)this.Rst[t].eet(this)}fst(){return this.Rst}zrt(){this.Frt=!0}Urt(){return this.Frt}eht(t){this.Lht=t}Tet(){return this.Lht}Wrt(t){this.jrt=t}Qrt(){return this.jrt}$tt(t){this.Brt=t}Vrt(){return this.Brt}d0(){this.Frt=!1,this.Lht=0,this.jrt=!1,this.Brt=!1}}class pr{constructor(t){this.Jrt=t}cn(){this.Jrt=null}dv(){return 0}_X(){const t=this.Jrt;return this.Jrt.tU(),t.xnt(()=>t.wnt(()=>0,()=>t.ott().hht()),()=>{})}qtt(){}Vet(){this.Jrt;const t=this.Jrt.tU();switch(t.gK()){case"relative":return!1;case"absolute":return!0}}uht(){this.Jrt;const t=this.Jrt.tU(),s=t.dst();switch(t.gK()){case"relative":break;case"absolute":if(t.iet()){const i=t.het();i.d0()}else{const e=t.Ust(),h=t.Yz(),n=t.ott(),r=e.ntt(h,n,s,t);r&&1<r.length&&new dr(r)}}}ght(t,s,i,e,h,n,r,o){const a=this.Jrt,l=this.Jrt.tU();switch(l.gK()){case"relative":{const u=a.Art();a.Fnt(s-u,i,e),n&&this.krt(t,i,e,h,u,s),a.Nrt(s);break}case"absolute":{const c=l.Ust(),f=l.net();if(l.Yz(),l.ott(),l.iet()){const d=l.het(),p=d.fst(),m=a.Ent(p,!0),g=a.Dnt(c,c.nN(),m);if(g){const y=f.sst(),M=g.time-y;if(0==M)d.$tt(r),d.Wrt(o),d.zrt(),d.eht(d.Tet()+s);else{if(M<0)return;const w=l.Jet(M);d.$tt(r),d.Wrt(o),d.zrt(),d.eht(d.Tet()+(s-w))}}}else a.Rrt(s,o,r);break}}}yht(){const t=this.Jrt,s=this.Jrt.tU();switch(s.gK()){case"relative":break;case"absolute":if(s.iet()){const i=s.het();i.Urt()&&t.Rrt(i.Tet(),i.Qrt(),i.Vrt())}}}krt(t,s,i,e,h,n){const r=this.Jrt;e||(s&&t===s.nN()?r.Prt(s.xK(),s,i):i&&t===i.nN()?r.Prt(i.xK(),s,i):n-h==0&&r.Prt(s.xK(),s,i))}}fr.zst.Sht.Drt=pr}{const mr=self.Ps;class gr{constructor(t){this.Jrt=t}cn(){this.Jrt=null}dv(){return 1}_X(){const t=this.Jrt;return t.mnt(!0),this.Gnt(t.Mnt())}qtt(){const t=this.Jrt;if(t.Mnt()!==t.bnt())return t.mnt(!0),this.Gnt(t.bnt())}Vet(){return!1}uht(){}ght(t,s,i,e,h,n,r,o){const a=this.Jrt,l=a.Art();switch(a.tU().gK()){case"relative":a.Fnt(s-l,i,e),n&&this.krt(t,i,e,h,l,s,!1,r);break;case"absolute":a.gnt()?(a.mnt(!1),a.Fnt(l,i,e)):0===t&&0===a.tU().Ust().Az()?a.Rrt(s,!0,!1):(a.Fnt(s-l,i,e),n&&this.krt(t,i,e,h,l,s,this.Yrt(),r))}a.Nrt(s)}yht(){}Gnt(t){const s=this.Jrt;return t-s.Wet()}Yrt(){let t=this.Jrt,s=t.xk().Yz(),i=t.tU().Wk(),e=i.htt(),h=0;for(const n of e.iX())0===n.dv()?n.aX(s)&&h++:1===n.dv()&&n.Yz()===s&&h++;return h<=1}krt(t,s,i,e,h,n,r,o){const a=this.Jrt;e?s&&t===s.nN()?a.Prt(s.xK(),s,i,r,o):i&&t===i.nN()?a.Prt(i.xK(),s,i,r,o):i||a.Prt(s.xK(),s,i,r,o):s&&t===s.nN()?a.Prt(s.xK(),s,i,r,o):i&&t===i.nN()?a.Prt(i.xK(),s,i,r,o):n-h==0&&a.Prt(s.xK(),s,i,r,o)}}mr.zst.Sht.Ert=gr}{const yr=self.Ps,Mr=self.Sc;yr.zst.cht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Jc(n,r,o,a){if(!o){let t=a.ret(),s=a.Bst();return(t=s.Snt(t)).xK()}let l=a.dtt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Get()?"discrete":l))return r.xK();if("continuous"===l||"step"===l){const u=a.Ust().ctt();if("step"===l&&0!==u){const g=1/u;n=Math.floor(n*g)/g}const c=r.xK(),f=o.xK(),d=r.TK("cubic-bezier"),p=o.TK("cubic-bezier"),m=d&&d.Hrt()&&p&&p.qrt();if(!m&&c===f)return c;let t=r.nN(),s=o.nN(),i=("step"===l&&0!==u&&(n=yr.yn(n,t,s)),yr.normalize(n,t,s)),e=r.iht(),h;if(m){const y=s-t;h=Mr.kc(e)(y*i,0,1,y),h=Mr.kc("cubicbezier")(h,c,c+d.CK(),f+p.EK(),f)}else h=Mr.kc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Get()?Math.floor(h):h}}}}{const wr=self.Ps;wr.zst.fht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Jc(t,s,i,e){if(!i){let t=e.ret(),s=e.Bst();return(t=s.Snt(t)).xK()}let h=e.dtt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Get()?"discrete":h))return s.xK();if("continuous"===h||"step"===h){const n=e.Ust().ctt();if("step"===h&&0!==n){const c=1/n;t=Math.floor(t*c)/c}const r=s.nN(),o=i.nN(),a=s.xK(),l=i.xK(),u=("step"===h&&0!==n&&(t=wr.yn(t,r,o)),s.TK("angle"));if(!u){if(a===l)return a;const f=wr.normalize(t,r,o),d=self.Sc.kc(s.iht());return wr.En(a,l,d(f,0,1,1))}{const p=u.Zrt();if(a===l&&0===p)return a;const m=wr.normalize(t,r,o),g=self.Sc.kc(s.iht()),y=g(m,0,1,1);switch(u.Xrt()){case"closest":return wr.En(a,l,y,p);case"clockwise":return wr.Dn(a,l,y,p);case"anti-clockwise":return wr.An(a,l,y,p)}}}}}}{const Sr=self.Ps;Sr.zst.dht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.Lnt(t)}return!!h!=!!i}static Jc(t,s,i,e){if(i)return s.xK()?1:0;{let t=e.ret(),s=e.Bst();return(t=s.Snt(t)).xK()?1:0}}}}{const Tr=self.Ps,br=[0,0,0],xr=[0,0,0],vr=[0,0,0];Tr.zst.pht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.Lnt(t)}return Array.isArray(i)?(br[0]=i[0],br[1]=i[1],br[2]=i[2]):(vr.La(i),br[0]=Math.floor(255*vr.ua()),br[1]=Math.floor(255*vr.ca()),br[2]=Math.floor(255*vr.fa())),Array.isArray(h)?(xr[0]=h[0],xr[1]=h[1],xr[2]=h[2]):(vr.La(h),xr[0]=Math.floor(255*vr.ua()),xr[1]=Math.floor(255*vr.ca()),xr[2]=Math.floor(255*vr.fa())),br[0]!==xr[0]||br[1]!==xr[1]||br[2]!==xr[2]}static Jc(t,s,i,e){if(!i){let t=e.ret(),s=e.Bst(),i=(t=s.Snt(t)).xK();return br[0]=i[0],br[1]=i[1],br[2]=i[2],br}let h=e.dtt();if("discrete"===(h="default"===h?"continuous":h)){const n=s.xK();return br[0]=n[0],br[1]=n[1],br[2]=n[2],br}if("continuous"===h||"step"===h){const r=e.Ust().ctt();if("step"===h&&0!==r){const b=1/r;t=Math.floor(t*b)/b}const o=s.nN(),a=i.nN(),l=s.xK(),u=i.xK(),c=("step"===h&&0!==r&&(t=Tr.yn(t,o,a)),Tr.normalize(t,o,a)),f=s.iht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],M=u[2],w=self.Sc.kc(f),S=a-o,T=S*c;return br[0]=d===g?d:w(T,d,g-d,S),br[1]=p===y?p:w(T,p,y-p,S),br[2]=m===M?m:w(T,m,M-m,S),br}}}}{const Gr=self.Ps;Gr.zst.mht=class{constructor(){}static znt(t,s,i,e){let h;switch(e){case"behavior":h=s.Lnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Unt(t);break;case"plugin":h=s.Lnt(t)}return h!==i}static Jc(t,s,i,e){if(i)return s.xK();{let t=e.ret(),s=e.Bst();return(t=s.Snt(t)).xK()}}}}{const Cr=self.Ps;Cr.uZ=class{constructor(){this.Krt=new Map}cn(){for(const t of this.Krt.values())t.cn();this.Krt.clear(),this.Krt=null}yc(t){const s=new Cr.$rt(t),i=s.ef();this.Krt.set(i,s)}ei(t){return this.Krt.get(t)}X$(){return 0}static tot(t,s,i,e){if(s)for(const h of s)Cr.uZ.sot("create",h,t,i,e)}static iot(t,s,i,e){if(s)for(const h of s)Cr.uZ.sot("create-including-disabled",h,t,i,e)}static eot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].y7(t)}):t.forEach(t=>{Cr.uZ.sot("load",t,i,s,e)})}static sot(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const r=e.prop,o=s[r],a=e.map.get(o);switch(t){case"load":n=new a(null,h);break;case"create":case"create-including-disabled":n=new a(s,h)}}switch(t){case"load":n.y7(s),i.push(n);break;case"create":if("function"==typeof n.cit&&!n.cit())return n.cn();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const Ir=self.Ps;Ir.$rt=class{constructor(t){this.mn="",this.Ktt=NaN,this.hot=0,this.not="default",this.rot="default",this.oot=!1,this.aot=!1,this.lot=1,this.bst=null,this.uot="",this.cot=!1,this.fot=!0,t&&(this.mn=t[0],this.Ktt=t[1],this.hot=t[2],this.not=t[3],this.rot=t[4],this.oot=!!t[6],this.aot=!!t[7],this.lot=t[8],this.uot=t[9],this.cot=!!t[10],this.fot=!!t[11],this.bst=new Ir.dot(t[5],this))}cn(){this.bst.cn(),this.bst=null}itt(){return this.bst||(this.bst=new Ir.dot(null,this)),this.bst}ef(){return this.mn}W6(t){this.mn=t}Az(){return this.Ktt}Dz(t){this.Ktt=t}ctt(){return this.hot}ftt(t){this.hot=t}dtt(){return this.not}ptt(t){this.not=t}gK(){return this.rot}mtt(t){this.rot=t}Lz(){return this.oot}Nz(t){this.oot=t}Rz(){return this.aot}Oz(t){this.aot=t}QB(){return this.lot}gtt(t){this.lot=t}jX(){return this.uot}ytt(){return this.cot}Mtt(){return this.fot}g7(){return{trackDataJson:this.bst.g7(),name:this.mn,totalTime:this.Ktt,step:this.hot,interpolationMode:this.not,resultMode:this.rot,loop:this.oot,pingPong:this.aot,repeatCount:this.lot,startOnLayout:this.uot,transformWithSceneGraph:!!this.cot,useSystemTimescale:this.fot}}y7(t){t&&(this.itt().y7(t.trackDataJson),this.mn=t.name,this.Ktt=t.totalTime,this.hot=t.step,this.not=t.interpolationMode,this.rot=t.resultMode,this.oot=t.loop,this.aot=t.pingPong,this.lot=t.repeatCount,this.uot=t.startOnLayout,this.cot=!!t.transformWithSceneGraph,this.fot=!!t.useSystemTimescale)}}}{const _r=self.Ps;class Er{constructor(t,s){this.bst=s,this.pot=null,this.mot=null,this.xst=NaN,this.vst=NaN,this.not="default",this.rot="default",this.Bu=!1,this.got=null,this.Hit=null,this.mf="",this.yot=null,this.Mot=0,this.wot=this.bst.utt().Az(),this.Tf=0,this.mn="",t&&(t[0]&&(this.pot=t[0],this.xst=t[0][2],this.vst=t[0][1]),this.not=t[1],this.rot=t[2],this.Bu=!!t[3],t[6]&&(this.mf=t[6]),t[7]&&(this.yot=t[7],this.Mot=t[7][0],this.wot=t[7][1]),t[8]&&(this.mot=t[8]),t[8]&&(this.mot=t[8]),t[9]&&(this.Tf=t[9]),t[10]&&(this.mn=t[10]),this.got=new _r.Sot(t[4],this),this.Hit=new _r.Tot(t[5],this))}cn(){this.pot=null,this.bst=null,this.got&&(this.got.cn(),this.got=null),this.Hit&&(this.Hit.cn(),this.Hit=null),this.yot=null}itt(){return this.bst}Ost(){return this.got||(this.got=new _r.Sot(null,this)),this.got}Bst(){return this.Hit||(this.Hit=new _r.Tot(null,this)),this.Hit}bot(){return this.pot}Jst(){return this.vst}dit(t){this.vst=t}Vst(){return this.xst}ait(t){this.xst=t}dtt(){return this.not}ptt(t){this.not=t}gK(){return this.rot}mtt(t){this.rot=t}cit(){return this.Bu}fit(t){this.Bu=!!t}Kz(){return this.mf}sst(){return this.Mot}lit(){return this.wot}uit(t){this.wot=t}mit(){return this.mot[0]}pit(t){this.mot||(this.mot=[]),this.mot[0]=t}Mit(){return this.mot||(this.mot=[]),this.mot[1]}yit(t){this.mot||(this.mot=[]),this.mot[1]=t}dv(){return this.Tf}ef(){return this.mn}g7(){return{keyframeDataJson:this.got.g7(),propertyTrackDataJson:this.Hit.g7(),instanceData:this.pot,additionalInstanceData:this.mot,instanceUid:this.xst,objectClassIndex:this.vst,interpolationMode:this.not,resultMode:this.rot,enabled:this.Bu,id:this.mf,nestedData:this.yot,type:this.Tf,name:this.mn}}y7(t){t&&(this.pot=t.instanceData,this.xst=t.instanceUid,this.vst=t.objectClassIndex,this.not=t.interpolationMode,this.rot=t.resultMode,this.Bu=t.enabled,this.mf=t.id,this.Tf=t.type||0,this.mn=t.name||"",this.wot=this.bst.utt().Az(),t.nestedData&&(this.yot=t.nestedData,this.Mot=this.yot[0],this.wot=this.yot[1]),t.additionalInstanceData&&(this.mot=t.additionalInstanceData),this.Ost().y7(t.keyframeDataJson),this.Bst().y7(t.propertyTrackDataJson))}}_r.dot=class{constructor(t,s){this.T$=s,this.xot=[],_r.uZ.tot(this.xot,t,Er,this)}cn(){this.T$=null;for(const t of this.xot)t.cn();_r.Wr(this.xot),this.xot=null}utt(){return this.T$}hst(){const t=new Er(null,this);return this.xot.push(t),t}vot(t){return t.Ost().Lst()[0]}Got(t){const s=t.Ost().Lst();return s.at(-1)}_it(s,t){const i=t.Ost().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.nN()===s)return h}}Cot(s,t){const i=t.Ost().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.nN()>s)return h}}Iot(s,t){const i=t.Ost().Lst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.nN()>=s)return h}}Iit(s,t){const i=t.Ost().Lst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.nN()<=s)return e}}*stt(){for(const t of this.xot)yield t}g7(){return{trackDataItemsJson:this.xot.map(t=>t.g7())}}y7(t){t&&_r.uZ.eot(this.xot,t.trackDataItemsJson,Er,this)}}}{const Dr=self.Ps;class Ar{constructor(t,s){this.Hit=s,this._ot="",this.Eot=null,this.cnt=null,this.Tf=null,this.Dot=NaN,this.Aot=NaN,this.not="default",this.rot="default",this.Bu=!1,this.Not=null,this.Lot=!0,t&&(this._ot=t[0][0],this.Eot=t[0].slice(1),this.cnt=t[1],this.Tf=t[2],this.Dot=t[3],this.Aot=t[4],this.not=t[5],this.rot=t[6],this.Bu=!!t[7],this.Not=new Dr.Oot(t[8],this),this.Lot=t[9])}cn(){this.Not.cn(),this.Not=null,this.Hit=null,this.Eot=null}Bst(){return this.Hit}Kit(){return this.Not||(this.Not=new Dr.Oot(null,this)),this.Not}Xst(){return this._ot}pet(t){this._ot=t}yet(){return this.Eot}wet(t){this.Eot=t}bet(){return this.cnt}vet(t){this.cnt=t}dv(){return this.Tf}Iet(t){this.Tf=t}Det(){return this.Dot}Aet(t){this.Dot=t}Net(){return this.Aot}Let(t){this.Aot=t}dtt(){return this.not}ptt(t){this.not=t}gK(){return this.rot}mtt(t){this.rot=t}cit(){return this.Bu}fit(t){this.Bu=!!t}Ret(){return!!this.Lot}g7(){return{propertyKeyframeDataJson:this.Not.g7(),sourceAdapterId:this._ot,sourceAdapterArguments:this.Eot,property:this.cnt,type:this.Tf,min:this.Dot,max:this.Aot,interpolationMode:this.not,resultMode:this.rot,enabled:this.Bu,canHavePropertyKeyframes:this.Lot}}y7(t){t&&(this._ot=t.sourceAdapterId,this.Eot=t.sourceAdapterArguments,this.cnt=t.property,this.Tf=t.type,this.Dot=t.min,this.Aot=t.max,this.not=t.interpolationMode,this.rot=t.resultMode,this.Bu=t.enabled,this.Lot=t.canHavePropertyKeyframes,this.Kit().y7(t.propertyKeyframeDataJson))}}Dr.Tot=class{constructor(t,s){this.Tst=s,this.Rot=[],Dr.uZ.tot(this.Rot,t,Ar,this)}cn(){this.Tst=null;for(const t of this.Rot)t.cn();Dr.Wr(this.Rot),this.Rot=null}oit(){return this.Tst}Nit(){const t=new Ar(null,this);return this.Rot.push(t),t}Eet(t){const s=t.Kit();return s.Xit()[0]}Snt(t){const s=t.Kit(),i=s.Xit();return i.at(-1)}ket(s,t){const i=t.Kit(),e=i.Xit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.nN()===s)return n}}jet(s,t){const i=t.Kit(),e=i.Xit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.nN()>s)return n}}Bet(s,t){const i=t.Kit(),e=i.Xit(),h=e.length;for(let t=0;t<h;t++){const n=e[t];if(n.nN()>=s)return n}}Pet(s,t){const i=t.Kit(),e=i.Xit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.nN()<=s)return h}}*jst(){for(const t of this.Rot)yield t}g7(){return{propertyTrackDataItemsJson:this.Rot.map(t=>t.g7())}}y7(t){t&&Dr.uZ.eot(this.Rot,t.propertyTrackDataItemsJson,Ar,this)}}}{const Nr=self.Ps;class Lr{constructor(t,s){if(this.got=s,this.sL=-1,this.kot="noease",this.Pot=!1,this.J$=null,this.Fot=null,t){this.sL=t[0],this.kot=t[1],this.Pot=!!t[2];const i=t[3];this.J$=i?i.split(" "):[],this.Fot=new Set(this.J$.map(t=>t.toLowerCase())),this.jot=null}}cn(){this.got=null,Nr.Wr(this.J$),this.J$=null,this.Fot.clear(),this.Fot=null,this.jot=null}Ost(){return this.got}aK(){return this.jot}Bot(t){this.jot=t}nN(){return this.sL}Ez(t){this.sL=t,this.got.zot()}iht(){return this.kot}Jz(t){this.kot=t}cit(){return this.Pot}fit(t){this.Pot=!!t}Fz(){return this.J$}Ttt(t){this.J$=t?t.split(" "):[],this.Fot=new Set(this.J$.map(t=>t.toLowerCase()))}Uot(){return this.Fot}yst(t){return this.Fot.has(t.toLowerCase())}g7(){return{time:this.sL,ease:this.kot,enable:this.Pot,tags:this.J$}}y7(t){t&&(this.sL=t.time,this.kot=t.ease,this.Pot=t.enable,this.J$=t.tags,this.Fot=new Set(this.J$.map(t=>t.toLowerCase())))}}Nr.Sot=class{constructor(t,s){this.Tst=s,this.Nst=[],Nr.uZ.tot(this.Nst,t,Lr,this),this.zot()}cn(){this.Tst=null;for(const t of this.Nst)t.cn();Nr.Wr(this.Nst),this.Nst=null}zot(){this.Nst.sort((t,s)=>t.nN()-s.nN());for(let t=0;t<this.Nst.length;t++){const s=this.Nst[t];s.Bot(this.Nst[t+1])}}oit(){return this.Tst}Wot(){return this.Nst.length}Lst(){return this.Nst}Dit(){const t=new Lr(null,this);return this.Nst.push(t),this.zot(),t}Oit(t){for(const s of this.Nst)if(t(s)){const i=this.Nst.indexOf(s);-1!==i&&(s.cn(),this.Nst.splice(i,1))}this.Qot(),this.zot()}Qot(){this.Nst.sort((t,s)=>t.nN()-s.nN())}Qit(t){return this.Nst.indexOf(t)}Vit(t){return this.Nst[t]}*Vot(){for(const t of this.Nst)yield t}*Jot(){for(let t=this.Nst.length-1;0<=t;t--)yield this.Nst[t]}g7(){return{keyframeDataItemsJson:this.Nst.map(t=>t.g7())}}y7(t){t&&(Nr.uZ.eot(this.Nst,t.keyframeDataItemsJson,Lr,this),this.zot())}}}{const Or=self.Ps;class Rr{constructor(t,s){this.Not=s,this.Lht=null,this.Yot=null,this.Tf="",this.sL=NaN,this.kot="noease",this.Pot=!1,this.Hot=null,this.qot=void 0,this.Zot="line",t&&(this.Lht=t[0][0],this.Yot=t[0][1],this.Tf=t[0][2],this.sL=t[1],this.kot=t[2],this.Pot=!!t[3],this.Zot=t[5],this.Hot=null,t[4]&&(this.Hot=new Or.Xot(t[4],this)),this.jot=null,this.Kot=null)}cn(){this.Not=null,this.Hot&&(this.Hot.cn(),this.Hot=null),this.jot=null,this.Kot=null}$ot(){return this.Hot}Bot(t){this.jot=t}aK(){return this.jot}tat(t){this.Kot=t}lK(){return this.Kot}Tet(){return this.Lht}eht(t){"color"===this.Tf&&Or.pe(t)?(this.Lht[0]=Or.Yn(t),this.Lht[1]=Or.Hn(t),this.Lht[2]=Or.qn(t)):this.Lht=t}Tnt(){return this.Yot}$et(t){"color"===this.Tf&&Or.pe(t)?(this.Yot[0]=Or.Yn(t),this.Yot[1]=Or.Hn(t),this.Yot[2]=Or.qn(t)):this.Yot=t}xK(){const t=this.Not.ret().gK();return"relative"===t?this.Tet():"absolute"===t?this.Tnt():void 0}dv(){return this.Tf}Iet(t){this.Tf=t}nN(){return this.sL}Ez(t){this.sL=t,this.Not.sat()}iht(){return this.kot}Jz(t){this.kot=t}cit(){return this.Pot}fit(t){this.Pot=!!t}uK(){return this.Zot}TK(s){if(this.Hot){if(!this.qot&&null!==this.qot){const i=this.Hot.iat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.Kz()===s)return this.qot=h,this.qot}}this.qot=null}return this.qot}}g7(){const t=this.Hot;return{addonDataJson:t&&t.g7(),value:this.Lht,aValue:this.Yot,type:this.Tf,time:this.sL,ease:this.kot,enable:this.Pot}}y7(t){t&&(t.addonDataJson&&this.Hot._SetFromJson(t.addonDataJson),this.Lht=t.value,this.Yot=t.aValue,this.Tf=t.type,this.sL=t.time,this.kot=t.ease,this.Pot=t.enable)}}Or.Oot=class{constructor(t,s){this.Yit=s,this.Zit=[],this.eat=[],Or.uZ.tot(this.Zit,t,Rr,this),Or.uZ.iot(this.eat,t,Rr,this),this.sat()}cn(){this.Yit=null;for(const t of this.Zit)t.cn();Or.Wr(this.Zit),this.Zit=null;for(const s of this.eat)s.cn();Or.Wr(this.eat),this.eat=null}sat(){let s=this.Zit;s.sort((t,s)=>t.nN()-s.nN());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Bot(s[t+1]),0<=t-1&&i.tat(s[t-1])}(s=this.eat).sort((t,s)=>t.nN()-s.nN());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Bot(s[t+1]),0<=t-1&&e.tat(s[t-1])}}Xet(){const t=new Rr(null,this);return this.Zit.push(t),this.sat(),t}Ket(t){for(const s of this.Zit)if(t(s)){const i=this.Zit.indexOf(s);-1!==i&&(s.cn(),this.Zit.splice(i,1))}this.hat(),this.sat()}hat(){this.Zit.sort((t,s)=>t.nN()-s.nN())}ret(){return this.Yit}nat(){return this.Zit.length}Snt(){return this.Zit[this.Zit.length-1]}Xit(){return this.Zit}oK(){return this.eat}*rat(){for(const t of this.Zit)yield t}*oat(){for(let t=this.Zit.length-1;0<=t;t--)yield this.Zit[t]}g7(){const t=this.Zit,s=this.eat;return{propertyKeyframeDataItemsJson:t.map(t=>t.g7()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.g7())}}y7(t){t&&(Or.uZ.eot(this.Zit,t.propertyKeyframeDataItemsJson,Rr,this),Or.uZ.eot(this.eat,t.propertyKeyframeDataItemsIncludingDisabledJson,Rr,this),this.sat())}}}{const kr=self.Ps;class Pr{constructor(t,s){this.Hot=s,this.mf=t[0],this.aat=t[1]}cn(){this.Hot=null,this.aat=null}$ot(){return this.Hot}Kz(){return this.mf}g7(){return{id:this.mf,data:this.aat}}y7(t){t&&(this.mf=t.id,this.aat=t.data)}}class Fr extends Pr{constructor(t,s){super(t,s),this.lat=this.aat[0],this.uat=!!this.aat[1],this.cat=this.aat[2],this.fat=!!this.aat[3]}cn(){super.cn()}CK(){return this.lat}Hrt(){return this.uat}EK(){return this.cat}qrt(){return this.fat}g7(){return Object.assign(super.g7(),{startAnchor:this.lat,startEnable:!!this.uat,endAnchor:this.cat,endEnable:!!this.fat})}y7(t){t&&(super.y7(t),this.lat=t.startAnchor,this.uat=!!t.startEnable,this.cat=t.endAnchor,this.fat=!!t.endEnable)}}class jr extends Pr{constructor(t,s){super(t,s),this.dat=this.aat[0],this.pat=this.aat[1]}cn(){super.cn()}Xrt(){return this.dat}Zrt(){return this.pat}g7(){return Object.assign(super.g7(),{direction:this.dat,revolutions:this.pat})}y7(t){t&&(super.y7(t),this.dat=t.direction,this.pat=t.revolutions)}}kr.Xot=class{constructor(t,s){this.mat=s,this.gat=[],kr.uZ.tot(this.gat,t,{prop:0,map:new Map([["cubic-bezier",Fr],["angle",jr]])},this)}cn(){this.mat=null;for(const t of this.gat)t.cn();kr.Wr(this.gat),this.gat=null}yat(){return this.mat}iat(){return this.gat}*Mat(){for(const t of this.gat)yield t}g7(){return{addonDataItemsJson:this.gat.map(t=>t.g7())}}y7(t){t&&kr.uZ.eot(this.gat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Fr],["angle",jr]])},this)}}}{let m=self.Ps,i=0;m._rt=class extends m.WZ{constructor(t,s){super("tween-"+i++,t,s),this.mf="",this.wat=!1,this.Sat="start-value",this.Gst=null,this.Tat=null,this.bat=null,this.Jit=null,this.xat=null}$$(t){const s=m.un(m.Event,"tweenstatereleased");s.vat=this,t.dispatchEvent(s)}dv(){return 1}C$(){for(const t of this.T$.itt().stt())this.b$.push(m.Gat.i2(this,t));this.Jit=this.b$[0]}est(){const t=this.T$.itt().hst(),s=m.Gat.i2(this,t);return this.b$.push(s),this.Cat(),s}Cat(){this.Jit=this.b$[0]}tU(t){return this.Jit.fst()[0]}Cet(t){this.Iat=t}Yz(){const t=this.hK();if(t&&t.length){const s=t[0];if(this.Jit=s){const i=s.Yz();return s.Qst()?i:void 0}}}_at(t){this.bat||(this.bat=[]),this.bat.push(t)}Eat(t){this.Tat||(this.Tat=[]),this.Tat.push(t)}Dat(t){if(this.bat){const s=this.bat.indexOf(t);-1!==s&&this.bat.splice(s,1)}}Aat(t){if(this.Tat){const s=this.Tat.indexOf(t);-1!==s&&this.Tat.splice(s,1)}}Nat(t,s){for(const i of this.b$)for(const e of i.Rst)if(e.dst()===s){const h=e.Bst(),n=e.ret(),r=h.Eet(n);r.eht(t),r.$et(t)}}Lat(t){for(const s of this.b$)for(const i of s.Rst)if(i.dst()===t)return i}Oat(t){for(const s of t){const i=this.Lat(s);this.Nat(i.Wet(),s)}if(this.Stt()){const e=this.Az()-this.nN();this.Dz(e);for(const h of this.b$)h.uit(e);this.Rtt(0)}else{const n=this.nN();this.Dz(n);for(const r of this.b$)r.uit(n);this.Rtt(n)}this.ktt()}Rat(t,s){const i=this.Lat(s),e=i.Bst(),h=i.ret(),n=e.Snt(h);n.Ez(this.Az()),n.eht(t),n.$et(t)}kat(t){this.mf=t}Kz(){return this.mf}Pat(t){this.Sat=t}Fat(){return this.Sat}Xz(t){this.wat=t}Zz(){return this.wat}Gtt(){if(this.bat)for(const t of this.bat)t(this);if(!this.RX())for(const s of this.b$)s.Fit()}Ctt(){this.B$=this.df.Itt()}PX(){if(!this.W$&&(this.W$=!0,this.Tat))for(const t of this.Tat)t(this)}Ez(t){this.jat(),super.Ez(t)}ztt(t){(t=m.pe(t)?t:this.Az())<0?this.E$=0:t>=this.Az()?this.E$=this.Az():this.E$=t,this.Jit.Utt()}_X(t){if(!this.kX()&&"current-state"===this.Fat())for(const s of this.b$)s.Pit();super._X(t)}Cz(t=!1){if(super.Cz(t),!this.RX())for(const s of this.b$)s.kit()}d0(t=!0,s=!1){this.jat(),super.d0(t,s)}jat(){for(const t of this.b$){const s=t=>{const s=t.nN(),i=this.Az();return 0!==s&&s!==i};t.Lit(s),t.Rit(s)}}IZ(){if(!this.vz()){const t=this.Yz();if(t&&t.LF().AJ())return!1;this.S$.vX(this),this.Ytt()}return!0}NX(h,t,s){if(this.Gst||(this.Gst=this.Yz()),!this.Gst||this.Gst.KU())this.Cz(!0),this.Ctt();else{const i=this.Gst.ER();if(0!==(h=-1!==i?s*i:h)||0!==this.V$){this.V$=h;const n=this.E$+this.D$,r=h*this.A$,o=n+r,a=this.T$.Ktt;o<0?(this.E$=0,this.D$=-o):a<=o?(this.E$=a,this.D$=this.E$-o):(this.E$=o,this.D$=0);let t=!1,s=!1,i=this.Lz(),e=this.Rz();i||e?i&&!e?0<this.A$?this.E$>=a&&(this.ztt(0),this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),s=!0):this.E$<=0&&(this.ztt(a),this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),s=!0):!i&&e?0<this.A$?this.E$>=a&&(this.Rtt(a),this.kz(-1*this.Pz()),s=!0,1===this.N$?this.L$<this.QB()?(this.L$++,this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong),this.N$=0):(this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong),t=!0):0===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong),this.N$=1)):this.E$<=0&&(this.Rtt(0),this.kz(-1*this.Pz()),s=!0,1===this.N$?this.L$<this.QB()?(this.L$++,this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong),this.N$=0):(t=!0,this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong)):0===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong),this.N$=1)):i&&e&&(0<this.A$?this.E$>=a&&(this.Rtt(a),this.kz(-1*this.Pz()),s=!0,0===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong)),1===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong)),this.N$++,this.N$=m.wrap(this.N$,0,2)):this.E$<=0&&(this.Rtt(0),this.kz(-1*this.Pz()),s=!0,0===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong)),1===this.N$&&(this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),this.Bat(m.zat.Tween.rq.OnAnyTweenPingPong),this.Bat(m.zat.Tween.rq.OnTweensPingPong)),this.N$++,this.N$=m.wrap(this.N$,0,2))):0<this.A$?this.E$>=a&&(this.L$<this.QB()?(this.L$++,this.ztt(0),this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),s=!0):(this.Rtt(a),t=!0)):this.E$<=0&&(this.L$<this.QB()?(this.L$++,this.ztt(a),this.Bat(m.zat.Tween.rq.OnAnyTweenLoop),this.Bat(m.zat.Tween.rq.OnTweensLoop),s=!0):(this.Rtt(0),t=!0)),t?(this.Jit.$tt(),this.Cz(!0),this.Ctt()):(this.Jit.Jc(this.E$,!0,!1,s,this.Q$,!1),this.Q$&&(this.Q$=!1))}}}Bat(t){const s=this.Yz(),i=s.Uat(m.zat.Tween);i.PushTriggerTween(this),this.df.Sj(t,s,i.EB()),i.PopTriggerTween()}g7(){const t=super.g7(),s=this.utt();return Object.assign(t,{tweenDataItemJson:s.g7(),id:this.mf,destroyInstanceOnComplete:this.wat,initialValueMode:this.Sat})}y7(t){if(t){const s=this.utt();s.y7(t.tweenDataItemJson),super.y7(t),this.mf=t.id,this.wat=t.destroyInstanceOnComplete,this.Sat=t.initialValueMode,this.Cat()}}static IsPlaying(t){return t.IsPlaying()}static zz(t){return t.zz()}static Wat(t){return!!t.Rz()&&0===t.wtt()}static Qat(t){return!!t.Rz()&&1===t.wtt()}static Vat(t){const s=t.runtime.htt(),i=new m.$rt;if(t.json){i.y7(t.json.tweenDataItemJson);const e=new m._rt(i,s);return e.y7(t.json),e}{const h=new m._rt(i,s),n=(m.je(t.Jat)||(t.Jat=[t.Jat]),h.kat(t.id),h.Ttt(t.tags),h.Pat(t.initialValueMode),h.Xz(t.releaseOnComplete),h.Nz(t.loop),h.Oz(t.pingPong),h.Dz(t.time),h.ftt(0),h.ptt("default"),h.mtt(t.Jat[0].resultMode),h.gtt(t.repeatCount),h.est()),r=(n.ait(t.DB.YF()),n.ptt("default"),n.mtt(t.Jat[0].resultMode),n.fit(!0),n.dit(t.DB.LF().bO()),t.DB.wB()),o=r.git()?r.mit():t.DB.xk().pm(),a=r.git()?r.Mit():t.DB.xk().Cm(),l=(n.pit(o),n.yit(a),n.Eit()),u=(l.Ez(0),l.Jz("noease"),l.fit(!0),l.Ttt(""),n.Eit());u.Ez(t.time),u.Jz("noease"),u.fit(!0),u.Ttt("");for(const c of t.Jat){const f=n.Ait(),d=(f.pet(c.sourceId),f.Met(c.sourceArgs),f.xet(c.property),f.Cet(c.type),f.Aet(NaN),f.Let(NaN),f.ptt("default"),f.mtt(c.resultMode),f.fit(!0),f.Zet()),p=(d.Iet(c.valueType),d.Ez(0),d.Jz(c.ease),d.fit(!0),d.eht(c.startValue),d.$et(c.startValue),f.Zet());p.Iet(c.valueType),p.Ez(t.time),p.Jz(c.ease),p.fit(!0),p.eht(c.endValue),p.$et(c.endValue),f.ott()}return h}}static ait(t,s){if(!isNaN(s))for(const i of t.hK())i.ait(s)}Yat(t,s){return this.xat||(this.xat=m.un(self.Qz,this,t,s)),this.xat}}}{const Br=self.Ps;Br.Gat=class extends Br.ett{constructor(t,s){super(t,s),this.Hat=null,this.qat=null}static i2(t,s){return Br.un(Br.Gat,t,s)}Zat(){1===this.Rst.length?this.Hat=this.Rst[0]:(this.Hat=this.Rst[0],this.qat=this.Rst[1])}kst(){for(const t of this.Tst.Bst().jst())this.Rst.push(Br.Xat.i2(this,t));this.Zat()}Ait(){const t=this.Tst.Bst(),s=t.Nit(),i=Br.Xat.i2(this,s);return this.Rst.push(i),this.Zat(),i}_X(){if(this.Wst(),this.Qst()||!this.ltt()){const t=this.Ust(),s=t.Stt(),i=s?0:this.lit();for(const h of this.Rst)h._X(i),0===this.Pst&&1===h.Tit()&&(this.Pst=1),0===this.jZ&&1===h.EX()&&(this.jZ=1);this.Fst=0;const e=this.Rst.some(t=>t.Xtt());e&&(this.Fst=1),this.Ast=this.bit(i),this._st=!1,this.Est=!1,this.Jc(i)}}tst(){}Jc(t,s=0,i=!1,e=!1,h,n=!1,r=!1){if(this.Gst||this.Yz(),this.Gst){const o=!this.Gst.KU();return o&&(!n||!this.LF().AJ())&&((this.qat?(this.Hat.Jc(t,i,e,r),this.qat):this.Hat).Jc(t,i,e,r),void(0!==this.Hat.Tit()&&(this.Cst||(this.Cst=this.Gst.xk()),this.Cst)&&this.Cst.Zj()))}}ist(){}y7(t){super.y7(t),this.Zat()}}}{const zr=self.Ps;zr.Xat=class extends zr.zst{constructor(t,s){super(t,s),this.Kat=!1}static i2(t,s){return zr.un(zr.Xat,t,s)}Jc(t,s=!1,i=!1,e=!1){let h,n;if(this.Kat)h=this.Zit[0],n=this.Zit[1];else{if(s)h=this.Hit.Pet(t,this.Yit);else{if(this.$it){const r=this.Ust(),o=this.$it.aK(),a=this.$it.nN(),l=o?o.nN():r.Az();(t<=a||l<=t)&&(this.$it=this.Hit.Pet(t,this.Yit))}else this.$it=this.Hit.Pet(t,this.Yit);h=this.$it}n=h.aK()}this.qit.Jc(t,h,n,s,i,e)}Zet(){const t=this.Yit.Kit(),s=t.Xet();return this.$it=null,this.Kat=this.Oet().length<=2,s}Rit(t){this.$it=null;const s=this.Yit.Kit();s.Ket(t),this.Kat=this.Oet().length<=2}g7(){return{sourceAdapterJson:this.ott().g7(),basic:this.Kat}}y7(t){t&&(this.ott().y7(t.sourceAdapterJson),this.Kat=t.basic)}}}{const Ur=self.Ps,Wr=self.Sc;Ur.Yc=class extends Ur.an{constructor(t,s=!0){super(),this.mn=t[0],this.$at=t[2],this.tlt=[];for(const i of t[1]){const e=Ur.slt.i2(this,i);this.tlt.push(e)}for(let t=0;t<this.tlt.length;t++){const h=this.tlt[t],n=this.tlt[t+1],r=this.tlt[t-1];h.Bot(n),h.tat(r)}this.ilt=new Map,this.elt=new Map,this.hlt(),s&&Wr.qc(this.mn,(t,s,i,e)=>this.Jc(t,s,i,e),null,{transition:this})}static i2(t){return Ur.un(Ur.Yc,t)}cn(){for(const t of this.tlt)t.cn();Ur.Wr(this.tlt),this.tlt=null,this.ilt.clear(),this.ilt=null,this.elt.clear(),this.elt=null}Hc(t){this.$at=!!t}nlt(t){const s=this.elt.get(t);if(s)return s;for(const i of this.tlt)if(i.rlt()===t)return this.elt.set(t,i),i}olt(s){for(let t=this.tlt.length-1;0<=t;t--){const i=this.tlt[t],e=i.rlt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.lK();if(!h)break;if(h.rlt()!==t.rlt())break;t=h}return t}}}}Jc(t,s,i,e){let h=t/e;if(this.$at){const M=this.nlt(0),w=this.nlt(1),S=s+(s+i)*M.llt(),T=(s+i)*w.llt(),b=T-S;return 0===e?S+b:Wr.Xc(t,S,b,e)}0===e&&(h=1);let n=this.olt(h),r=n.aK();if(!r){const x=n.lK(),v=n;n=x,r=v}const o=r.rlt()-n.rlt(),a=Ur.gn(h,n.rlt(),r.rlt(),0,o);if(n.ult()||0==o){const G=s+(s+i)*n.llt(),C=(s+i)*r.llt(),I=C-G;return 0==o?1===a?G+I:G:Wr.Xc(a,G,I,o)}let l=n.rlt(),u=n.llt(),c=n.rlt()+n.clt(),f=n.llt()+n.flt(),d=r.rlt()+r.dlt(),p=r.llt()+r.plt(),m=r.rlt(),g=r.llt(),y=Wr.kc("spline")(a,l,u,c,f,d,p,m,g,this.ilt.get(n));return(1-(y+=n.llt()))*s+y*(s+i)}hlt(){this.ilt.clear();for(let t=0;t<this.tlt.length-1;t++){const s=this.tlt[t];if(s.Hrt()){const i=s,e=this.tlt[t+1];if(e.qrt()){const h=i.rlt(),n=i.rlt()+i.clt(),r=e.rlt()+e.dlt(),o=e.rlt();this.ilt.set(i,Wr.Kc(h,n,r,o))}}}}}}{const Qr=self.Ps;Qr.slt=class extends Qr.an{constructor(t,s){super(),this.mlt=t,this.glt=s[0],this.ylt=s[1],this.Mlt=s[2],this.wlt=s[3],this.Slt=s[4],this.Tlt=s[5],this.uat=s[6],this.fat=s[7],this.blt=s[8],this.jot=null,this.Kot=null}cn(){this.mlt=null}static i2(t,s){return Qr.un(Qr.slt,t,s)}Bot(t){this.jot=t}aK(){return this.jot}tat(t){this.Kot=t}lK(){return this.Kot}rlt(){return this.glt}llt(){return this.ylt}clt(){return this.Mlt}flt(){return this.wlt}dlt(){return this.Slt}plt(){return this.Tlt}Hrt(){return this.uat}qrt(){return this.fat}ult(){return"linear"===this.blt}xlt(){return"cubic"===this.blt}}}{const Vr=self.Ps;Vr.vlt=class extends Vr.an{constructor(t){super(),this.df=t,this.Glt=[]}cn(){for(const t of this.Glt)t.cn();Vr.Wr(this.Glt),this.Glt=null}i2(t){this.Glt.push(Vr.Yc.i2(t))}}}{const Jr=self.Ps;Jr.Clt=class extends Jr.an{constructor(t){super(),this.df=t,this.Ilt=null,this._lt=null,this.DZ=t=>this.AZ(t.DB)}cn(){if(this.BZ(),this.Ilt){for(const t of this.Ilt.values())t.clear();this.Ilt.clear()}this.Ilt=null,this.df=null}i2(t){if(this.Ilt||(this.Ilt=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.Ilt.has(e)||this.Ilt.set(e,new Map),this.Ilt.get(e));h.set(i,t)}}zZ(){const t=this.df.Jf();t&&t.addEventListener("instancedestroy",this.DZ)}BZ(){const t=this.df.Jf();t&&t.removeEventListener("instancedestroy",this.DZ)}Elt(){return!!this.Ilt&&0!==this.Ilt.size}Dlt(t,s){let i;if(i=t instanceof Jr.Alt?t.bO():t,this.Ilt.has(i)){const e=this.Ilt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Nlt(t,s){this._lt||(this._lt=new WeakMap),this._lt.has(t)||this._lt.set(t,s)}Llt(t){if(!this._lt)return"";const s=this._lt.get(t);return s||""}AZ(t){this._lt&&this._lt.has(t)&&this._lt.delete(t)}}}{const Yr=self.Ps;Yr.Olt=class{constructor(t){this.df=t,this.Rlt=new Yr.klt}cn(){this.Rlt.cn(),this.Rlt=null,this.df=null}Wk(){return this.df}i2(t){this.Rlt.yc(t)}Plt(t){return this.Rlt.ei(t)}Flt(){return this.Rlt.Flt()}}}{const b=self.Ps;b.jlt=class{constructor(t,s,i,e,h,n,r){this.df=h.Wk(),this.Blt=h,this.zlt=t,this.Ult=i,this.Wlt=e,this.$g=s,this.cZ=n,this.Qlt=r??n.Yz().YF(),this.Vlt(),this.Jlt=this.Hlt?.Ylt()??-1,this.qlt=[],this.Zlt=null,this.Xlt=NaN,this.Klt=null,this.$lt=null,this.tut=null,this.sut="",this.iut=null,this.eut="",this.hut="",this.nut=0,this.rut=!1,this.F$=!1}cn(){this.F$||(b.Wr(this.qlt),this.qlt=null,this.df=null,this.Blt=null,this.Wlt=null,this.cZ=null,this.Zlt=null,this.Xlt=NaN,this.Klt&&this.Klt.clear(),this.Klt=null,this.$lt=null,this.tut=null,this.sut="",this.iut=null,this.eut="",this.hut="",this.F$=!0)}dn(){return this.F$}out(){return this.Blt}Wk(){return this.df}ef(){return this.zlt}aut(){return this.Wlt}xz(){return this.$g}tX(){return this.cZ||(this.cZ=this.df.Mk(this.Qlt).wB()),this.cZ}lut(){return this.uut(this.Jlt)}cut(){const t=this.lut();return t?t.xz():""}fut(){const t=this.lut();return t?t.Fz():[]}dut(t){const s=this.fut();if(!s)return!1;if(!s.length)return!1;const i=b.jlt.btt(t);return!(!i||!i.length)&&i.every(b.jlt.vtt,s)}mut(t,s){const i=this.fut();if(!i)return!1;if(!i.length)return!1;const e=b.jlt.btt(t);return!(!e||!e.length)&&e.every(t=>b.jlt.gut.call(i,t,s))}static vtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static btt(t){return t.trim().split(" ")}static gut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>b.compare(t.trim(),i,s.trim()))}yut(t){const s=this.lut();if(s){if(b.pe(t)){const i=s.Mut(),e=i?i[t]:void 0;if(b.pe(e))return this.uut(e)}if("string"==typeof t)for(const h of s.Mut()){const n=this.uut(h);if(n._z(t))return this.uut(n.Ylt())}}}wut(t){const s=this.yut(t);return s?s.xz():""}Sut(t){const s=this.yut(t);return s?s.Fz():""}Tut(t){const s=this.lut();if(!s)return-1;const i=s.Mut();if(!i)return-1;const e=this.yut(t);return e?i.indexOf(e.Ylt()):-1}but(){const t=this.lut();if(!t)return 0;const s=t.Mut();return s?s.length:0}uut(t){return this.Wlt.uut(t)}d0(){const t=this.xut();t.vut(!0)}vut(t){if(this.Gut()){for(const[s,i]of this.Gut().entries())i.vut(!1);this.Gut().clear()}if(this.Klt=null,this.Zlt=null,this.Cut=null,this.$lt=null,this.sut="",this.iut=null,this.eut="",this.hut="",this.qlt=[],t){this.Blt.Iut(this);const e=this.Hlt.Ylt();e!==this.Jlt&&this._ut(e)}else this.Jlt=this.Hlt.Ylt()}Eut(){const t=this.Wlt.uut(this.Jlt);return t?t.Aut().Dut():0}Nut(t){const s=this.Lut(t);return s?s.ef():""}Out(t){let s;return b.pe(t)&&(s=this.Lut(t)),"string"==typeof t&&(s=this.Rut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Tet():""}kut(t){let s;if(b.pe(t)&&(s=this.Lut(t)),s="string"==typeof t?this.Rut(t):s){const i=s.Put();b.pe(i)&&(this.qlt.push(this.Jlt),this._ut(i))}}Fut(t){const s=this.Wlt.jut(t);if(s){const i=this.Wlt.uut(s.Ylt());i&&(this.qlt.push(this.Jlt),this._ut(i.Ylt()))}}But(){const t=this.qlt.pop();b.pe(t)?this._ut(t):this.zut()&&(this.Blt.Iut(this.zut(),!0,!1,!1),this.zut()._ut(this.Uut()),this.xut().Wut(this.zut()))}Qut(t){const s=this.lut();if(s){s.Ylt();const i=this.yut(t);i&&(this.qlt.push(this.Jlt),this._ut(i.Ylt()))}}Vut(s){if(b.pe(s)){const t=this.Wlt.uut(this.Jlt),i=t.Aut().Jut();return!!i[s]}if("string"==typeof s){const e=this.Wlt.uut(this.Jlt),h=e.Aut().Jut();for(let t=0;t<h.length;t++)if(h[t].ef()===s)return!0}return!1}Yut(){this.rut=!0}Hut(){return 0<this.nut}qut(){this.nut++}Zut(){this.nut--,0===this.nut&&this.rut&&this.Blt.Xut(this)}_ut(t){const i=this.Jlt,s=this.tX().Yz();if(this.qut(),this.Blt.Kut(this),this.df.Sj(b.aq.Flowchart.rq.OnBeforeAnyNodeChange,s),this.df.Sj(b.aq.Flowchart.rq.OnBeforeTaggedNodeChange,s),this.df.Sj(b.aq.Flowchart.rq.OnBeforeAnyNodeChangeInFlowchart,s),this.df.Sj(b.aq.Flowchart.rq.OnBeforeTaggedNodeChangeInFlowchart,s),this.Jlt=t,this.df.Sj(b.aq.Flowchart.rq.OnAnyNodeChange,s),this.df.Sj(b.aq.Flowchart.rq.OnTaggedNodeChange,s),this.df.Sj(b.aq.Flowchart.rq.OnAnyNodeChangeInFlowchart,s),this.df.Sj(b.aq.Flowchart.rq.OnTaggedNodeChangeInFlowchart,s),this.Blt.$ut(),this.Zut(),!this.dn()){const e=this.uut(this.Jlt);if("reference"===e.dv()){const h=e.tct();if(this.sct(e)){this.qlt.pop();const n=this.ict(e),r=(this.Blt.Iut(n,!0,!0,!1),n.ect(this,i),this.xut());r.Wut(n)}else{const o=e.hct();if(h){this.qlt.pop();let s=e.nct();if(s){let t=this.Blt.rct(s);for(;t;)s=b.K1(s),t=this.Blt.rct(s)}else{s=h+"-ref";let t=this.Blt.rct(s);for(;t;)s=b.K1(s),t=this.Blt.rct(s)}const a=this.Blt.oct(h,o,s,this.cZ,!0),l=(a.ect(this,i),this.lct(e,a),this.xut());a.uct(l),l.Wut(a)}}}}}Lut(t){const s=this.Wlt.uut(this.Jlt);if(!s)return null;const i=s.Aut().Jut();if(!i)return null;const e=i[t];return e||null}Rut(t){const s=this.Wlt.uut(this.Jlt);if(!s)return null;const i=s.Aut().cct(t);return i||null}Vlt(s){if("number"==typeof s){let t=this.uut(s);t=t||this.Wlt.fct(),this.Hlt=t}else{let t=this.Wlt.jut(this.Ult);t=t||this.Wlt.fct(),this.Hlt=t}}g7(){return this.rut?null:{flowchartName:this.zlt,flowchartTag:this.$g,startNodeTag:this.Ult,currentNodeId:this.Jlt,previousNodeIds:this.qlt,pluginUID:this.cZ.Yz().YF(),reference:{previousFlowchartTag:this.zut()?this.zut().xz():"",previousStartNodeId:b.pe(this.Uut())?this.Uut():NaN,referencesJson:this.dct(),currentReferenceFlowchartTag:this.pct()?this.pct().xz():"",rootFlowchartTag:this.xut()?this.xut().xz():""}}}dct(){if(!this.mct())return null;const t=[];for(const[s,i]of this.Gut().entries())t.push({flowchartElementId:s.Ylt(),flowchartStateTag:i.xz()});return t.length?t:null}y7(t){if(t){if(this.zlt=t.flowchartName,this.$g=t.flowchartTag,this.Ult=t.startNodeTag,this.Jlt=t.currentNodeId,this.qlt=t.previousNodeIds,this.Qlt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.sut=s.previousFlowchartTag,this.Xlt=s.previousStartNodeId,this.iut=s.referencesJson,this.eut=s.currentReferenceFlowchartTag,this.hut=s.rootFlowchartTag}this.Vlt()}}zut(){return"string"==typeof this.sut&&this.sut&&(this.Zlt=this.Blt.rct(this.sut),this.sut=""),this.Zlt}Uut(){return this.Xlt}ect(t,s){this.Zlt=t,this.Xlt=s}pct(){return"string"==typeof this.eut&&this.eut&&(this.$lt=this.Blt.rct(this.eut),this.eut=""),this.$lt}Wut(t){this.$lt=t,this.$lt===this&&(this.$lt=null)}xut(){return"string"==typeof this.hut&&this.hut&&(this.tut=this.Blt.rct(this.hut),this.hut=""),this.tut||this}uct(t){this.tut=t}mct(){return this.gct(),!!this.Klt}sct(t){return this.gct(),this.Klt&&this.Klt.has(t)}gct(){if(this.iut){this.Klt&&this.Klt.clear(),this.Klt||(this.Klt=new Map);for(const t of this.iut){const s=this.Blt.rct(t.flowchartStateTag),i=s.uut(t.flowchartElementId);this.Klt.set(i,s)}this.iut=null}}Gut(){return this.gct(),this.Klt}ict(t){return this.gct(),this.Klt.get(t)}lct(t,s){this.Klt||(this.Klt=new Map),this.Klt.set(t,s)}}}{const Hr=self.Ps;Hr.yct=class{constructor(t){this.df=t,this.Mct=new Map,this.wct=null,this.Sct=[],this.Tct=()=>this.RZ(),this.bct=null}cn(){Hr.Wr(this.Sct),this.Sct=null,this.Mct.clear(),this.Mct=null,this.wct=null,this.df=null,this.bct=null}Wk(){return this.df}oct(t,s,i,e,h,n){const r=this.df.out().Plt(t);if(r){if(!this.Mct.has(i)){const o=new Hr.jlt(t,i,s,r,this,e,n);return this.Mct.set(i,o),h&&this.Iut(o,!0),o}{const a=this.Mct.get(i);a&&this.Xut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Xut(t){if(t.Yut(),!t.Hut()){const s=t.xz();this.Mct.delete(s),t.cn(),this.wct===t&&(this.wct=null)}}xct(t){t.d0()}rct(t){return this.Mct.get(t)}Kut(t){this.Sct.push(t)}$ut(){this.Sct.pop()}Iut(t,s=!1,i=!1,e=!0){if(e){const h=t.pct();t=h||t}t!==this.wct&&(this.vct(),this.Gct(t,s,i))}Cct(t){return"string"==typeof t?this.rct(t):this.Sct.length?this.Sct[this.Sct.length-1]:this.wct}vct(){if(this.wct&&!this.wct.dn()){const t=this.wct.tX().Yz();this.wct.qut(),this.Kut(this.wct),this.df.Sj(Hr.aq.Flowchart.rq.OnBeforeFlowchartChange,t),this.$ut(),this.wct.Zut()}}Gct(t,s=!1,i=!1){if(this.wct=t,this.wct&&!this.wct.dn()){const e=this.wct.tX().Yz();this.wct.qut(),this.Kut(this.wct),this.df.Sj(Hr.aq.Flowchart.rq.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.wct.Vlt(i),s&&(this.df.Sj(Hr.aq.Flowchart.rq.OnAnyNodeChange,e),this.df.Sj(Hr.aq.Flowchart.rq.OnTaggedNodeChange,e)),this.$ut(),this.wct.Zut()}}g7(){return{flowchartJsonObjects:[...this.Mct.values()].map(t=>t.g7()),currentFlowchartTag:this.wct?this.wct.xz():null}}y7(t){if(t){this.bct=t;const s=new Map;for(const i of this.bct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Mct.has(e)){const h=this.Mct.get(e);h.y7(i),s.set(e,h)}else{const n=this.oct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);n.y7(i),s.set(i.flowchartTag,n)}}for(const[r,o]of this.Mct.entries())s.has(r)||o.cn();this.Mct.clear(),this.Mct=s,this.df.Z9()?this.df.Jf().addEventListener("afterload",this.Tct):this.RZ()}}RZ(){this.df.Jf().removeEventListener("afterload",this.Tct);const t=this.Mct.get(this.bct.currentFlowchartTag);t&&this.Iut(t,!0),this.bct=null}}}{const qr=self.Ps;qr.klt=class{constructor(){this.Ict=new Map}cn(){for(const t of this.Ict.values())t.cn();this.Ict.clear(),this.Ict=null}yc(t){const s=new qr._ct(t),i=s.ef();this.Ict.set(i,s)}ei(t){return this.Ict.get(t)}Flt(){return!!this.Ict.size}static Ect(t,s,i,e){if(s)for(const h of s){const n=new i(h,e);t.push(n)}}}}{const Zr=self.Ps;Zr._ct=class{constructor(t){this.mn=t[0],this.Dct=new Zr.Act(t[1],this)}cn(){this.Dct.cn(),this.Dct=null}Nct(){return this.Dct}uut(t){return this.Dct.uut(t)}jut(t){return this.Dct.jut(t)}fct(){return this.Dct.fct()}ef(){return this.mn}}}{const Xr=self.Ps;class Kr{constructor(t,s){this.Dct=s,this.Tf=t[7],this.Lct=t[0],this.$g=t[1],this.$g?this.J$=this.$g.trim().split(" ").map(t=>t.trim()):this.J$=[],this.Oct=t[2],this.Rct=null,this.kct=null,"dictionary"===this.Tf&&(this.Rct=t[3],this.kct=t[4]),this.Pct=t[6],this.Fct=null,this.jct=null,this.Bct=null,"reference"===this.Tf&&(this.Fct=t[8],this.jct=t[9],this.Bct=t[10]),this.zct=new Xr.Uct(t[5],this)}cn(){this.Dct=null}Nct(){return this.Dct}Aut(){return this.zct}Ylt(){return this.Lct}xz(){return this.$g}Fz(){return this.J$}_z(t){if(!this.J$)return!1;if(!this.J$.length)return!1;const s=Xr.jlt.btt(t);return!(!s||!s.length)&&s.every(Xr.jlt.vtt,this.J$)}Wct(){return this.Pct}Qct(t){this.Pct=!!t}Vct(){if("dictionary"===this.Tf)return!0;if("reference"===this.Tf)return!1;throw new Error("unexpected flowchart node type: "+this.Tf)}Mut(){return this.Oct}Jct(){return this.Rct}Yct(){return this.kct}dv(){return this.Tf}tct(){return this.Fct}hct(){return this.jct}nct(){return this.Bct}}Xr.Act=class{constructor(t,s){this.Wlt=s,this.Hct=[],this.qct=new Map,this.Zct=new Map,this.Xct=null,Xr.klt.Ect(this.Hct,t,Kr,this);for(const i of this.Hct){const e=i.Ylt(),h=i.xz(),n=i.Fz(),r=i.Wct();if(this.qct.set(e,i),h)for(const a of n)this.Zct.has(a)||this.Zct.set(a,new Set),this.Zct.get(a).add(i);r&&(this.Xct=i);const o=i.Aut();for(const l of o.Kct()){const u=l.Ylt();this.qct.set(u,l)}}this.Xct||this.$ct()}cn(){this.Wlt=null;for(const t of this.Hct)t.cn();Xr.Wr(this.Hct),this.Hct=null}aut(){return this.Wlt}uut(t){return this.qct.get(t)}jut(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Zct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}fct(){return this.Xct}*tft(){for(const t of this.Hct)yield t}$ct(){let t=0;for(const s of this.tft())s.Wct()&&t++;if(0===t){for(const i of this.tft())if(i.Vct()&&!i.Wct())return void i.Qct(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.tft())e.Vct()&&(e.Wct()&&t?t=!1:e.Wct()&&!t&&e.Qct(!1))}}for(const h of this.tft())if(h.Vct()&&h.Wct())return void(this.Xct=h)}}}{const $r=self.Ps;class to{constructor(t,s){this.zct=s,this.Lct=t[0],this.mn=t[1],this.Lht=t[2],this.ift=t[3]}cn(){this.zct=null}Aut(){return this.zct}Ylt(){return this.Lct}ef(){return this.mn}Tet(){return this.Lht}Put(){return this.ift}}$r.Uct=class{constructor(t,s){this.eft=s,this.hft=[],this.nft=new Map,$r.klt.Ect(this.hft,t,to,this);for(const i of this.hft)this.nft.set(i.ef(),i)}cn(){this.eft=null;for(const t of this.hft)t.cn();$r.Wr(this.hft),this.hft=null}rft(){return this.eft}Dut(){return this.hft.length}Jut(){return this.hft}cct(t){return this.nft.get(t)}*Kct(){for(const t of this.hft)yield t}}}{const so=self.Ps;so.oft=class extends so.an{constructor(t){super(),this.aft=t,this.lft=[],this.lft.push(so.un(so.uft,this)),this.Kg=0,this.cft=this.lft[0]}cn(){for(const t of this.lft)t.cn();so.Wr(this.lft),this.cft=null,this.aft=null}LF(){return this.aft}P3(){return this.cft}fft(){return this.lft[this.Kg-1]}hc(){this.P3().hc()}dft(){const t=this.lft,s=++this.Kg;if(s===t.length){const i=so.un(so.uft,this);t.push(i),this.cft=i}else{const e=t[s];e.d0(),this.cft=e}}pft(){const t=this.lft,s=++this.Kg,i=(s===t.length&&t.push(so.un(so.uft,this)),t[s]);i.N0(t[s-1]),this.cft=i}K6(){this.cft=this.lft[--this.Kg]}mft(i){const e=this.lft;for(let t=0,s=e.length;t<s;++t)e[t].mft(i)}}}{const io=self.Ps;io.uft=class extends io.an{constructor(t){super(),this.lft=t,this.aft=this.lft.LF(),this.gft=this.aft.Wk().pR(),this.yft=!0,this.zV=[],this.Mft=[]}cn(){this.wft(),this.lft=null,this.aft=null,this.gft=null}wft(){io.Wr(this.zV),io.Wr(this.Mft)}LF(){return this.aft}Sft(){return this.yft}Tft(){return this.yft?!!this.aft.j3():!!this.zV.length}R3(){return this.yft?this.aft.R3():this.zV}bft(){return!!this.Mft.length}xft(){return this.Mft}vft(){const t=this.R3();return t.length?t:this.Mft}d0(){this.yft=!0,io.Wr(this.Mft)}hc(){this.yft=!0}N0(t){t.Sft()?this.d0():(this.yft=!1,io.Yr(this.zV,t.zV),io.Wr(this.Mft))}Gft(t){this.zV.push(t)}Cft(t){this.Mft.push(t)}Ift(t){this.yft=!!t}_ft(){return this.zV}Eft(){return this.Mft}Dft(t){this.yft=!1,io.Wr(this.zV),this.zV.push(t)}Aft(t){this.yft=!1,io.Yr(this.zV,t)}Nft(t){this.yft=!1,io.Wr(this.zV);for(const s of t)this.zV.push(s)}Lft(t,s){for(const i of s)t.has(i)||this.Mft.push(i)}Oft(t){for(const s of t)this.zV.push(s);io.Kr(this.Mft,t)}Rft(){io.Wr(this.Mft)}kft(t){if(t)if(this.gft.B6().oR().Pft()){this.Sft()&&(io.Wr(this.zV),io.Yr(this.Mft,t.LF().R3()),this.yft=!1);const s=this.Mft.indexOf(t);-1!==s&&(this.zV.push(this.Mft[s]),this.Mft.splice(s,1))}else this.Dft(t)}mft(t){io.Kr(this.zV,t),io.Kr(this.Mft,t)}}}{const eo=self.Ps;eo.Fft=class extends eo.an{constructor(t){super(),this.jft=t,this.df=this.jft.Wk(),this.lft=[],this.lft.push(eo.un(eo.Bft,this,null)),this.Kg=0,this.zft=[]}cn(){for(const t of this.lft)t.cn();eo.Wr(this.lft),eo.Wr(this.zft),this.jft=null,this.df=null}sR(){return this.jft}Wk(){return this.df}B6(){return this.lft[this.Kg]}Uft(){return this.lft}Wft(){return this.Kg}z6(t){const s=this.lft,i=++this.Kg;if(i===s.length){const e=eo.un(eo.Bft,this,t);return s.push(e),e}{const h=s[i];return h.d0(t),h}}K6(){--this.Kg}Qft(t){this.zft.push(t)}Vft(){this.zft.pop()}dR(){const t=this.zft;return 0===t.length?null:t.at(-1)}}}{const ho=self.Ps;ho.Bft=class extends ho.an{constructor(t,s){super(),this.lft=t,this.df=this.lft.Wk(),this.Jft=s,this.Yft=0,this.Hft=0,this.qft=!1,this.Zft=!1,this.Xft=null,this.Kft=0,this.$ft=0,this.t0t=null}cn(){this.d0(null),this.lft=null,this.df=null}d0(t){this.Jft=t,this.Yft=0,this.Hft=0,this.qft=!1,this.Zft=!1,this.t0t=null}s0t(t,s){this.Jft=t,this.Yft=0,this.Hft=s}i0t(){this.Yft=0,this.Hft=0}oR(){return this.Jft}e0t(t){this.Jft=t}h0t(){return this.Yft}n0t(t){this.Yft=t}r0t(){return this.Hft}o0t(t){this.Hft=t}a0t(t){this.qft=!!t}l0t(){return this.qft}u0t(t){this.Zft=!!t}c0t(){return this.Zft}f0t(t){this.Xft=t}d0t(){return this.Xft}p0t(t,s){this.Kft=t,this.$ft=s}mR(){return this.Kft}gR(t){this.$ft=t}m0t(){return this.$ft}g0t(){const t=this.Jft;return!!t.y0t()||this.Yft<t.M0t()-1&&!!t.j6().length}w0t(t){this.t0t=t}S0t(){return this.t0t}}}{const no=self.Ps;no.T0t=class extends no.an{constructor(t){super(),this.jft=t,this.df=this.jft.Wk(),this.lft=[],this.Kg=-1,this.cft=null,this.b0t=[]}cn(){no.Wr(this.lft),this.jft=null,this.df=null}x0t(t){this.b0t=t;const s=this.b0t.slice(0);this.lft.push(s),this.Kg=0,this.cft=s}sR(){return this.jft}Wk(){return this.df}v0t(){return this.cft}z6(){const t=++this.Kg,s=this.lft;t===s.length?s.push(this.b0t.slice(0)):no.Yr(s[t],this.b0t),this.cft=s[t]}K6(){this.cft=this.lft[--this.Kg]}}}{const ro=self.Ps;ro.G0t=class extends ro.an{constructor(t){super(),this.jft=t,this.df=this.jft.Wk(),this.lft=[],this.Kg=-1}cn(){ro.Wr(this.lft),this.jft=null,this.df=null}sR(){return this.jft}Wk(){return this.df}C0t(){return 0<=this.Kg}v0t(){return this.lft[this.Kg]}z6(){if(++this.Kg,this.Kg===this.lft.length){const t=ro.un(ro.I0t,this);return this.lft.push(t),t}{const s=this.lft[this.Kg];return s.d0(),s}}K6(){--this.Kg}_0t(s){const i=this.lft;for(let t=this.Kg;0<=t;--t){const e=i[t];if(e.ef()===s)return e}return null}E0t(){return this.lft.slice(0,this.Kg+1)}}}{const oo=self.Ps;oo.I0t=class extends oo.an{constructor(t){super(),this.D0t=t,this.mn="",this.Kg=0,this.A0t=!1,this.N0t=NaN}d0(){this.mn="",this.Kg=0,this.A0t=!1,this.N0t=NaN}W6(t){this.mn=t}ef(){return this.mn}q6(t){this.Kg=t}bO(){return this.Kg}Cz(){this.A0t=!0}X6(){return this.A0t}L0t(t){this.N0t=t}O0t(){return this.N0t}}}{const ao=self.Ps;ao.R0t=class extends ao.an{constructor(){super(),this.lft=[],this.Kg=-1}cn(){ao.Wr(this.lft)}v0t(){return this.lft[this.Kg]}z6(){if(++this.Kg,this.Kg!==this.lft.length)return this.lft[this.Kg];{const t=[];return this.lft.push(t),t}}K6(){--this.Kg}}}{let t=function(t,s){return t.bO()-s.bO()},n=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,n;const lo=self.Ps;lo.k0t=class extends lo.an{constructor(t){super(),this.df=t,this.P0t=[],this.F0t=new Map,this.j0t=[],this.B0t=new Map,this.z0t=new Map,this.U0t=new Map,this.W0t=new Map,this.Q0t=new Map,this.V0t=new Map,this.J0t=0,this.Y0t=[],this.H0t=[],this.q0t=[],this.Z0t=new Map,this.X0t=new Map,this.gft=lo.un(lo.Fft,this),this.K0t=lo.un(lo.T0t,this),this.D0t=lo.un(lo.G0t,this),this.$0t=[],this.tdt=[],this.sdt=[],this.idt=0,this.edt=0,this.hdt=0,this.ndt=[],this.rdt=[],this.odt=[],this.adt=new Map,this.ldt=new Map,self.c3_callFunction=(t,s)=>this.udt(t,s)}cn(){this.Sq(),this.gft.cn(),this.gft=null,this.K0t.cn(),this.K0t=null,lo.Wr(this.tdt),lo.Wr(this.sdt),this.df=null,lo.Wr(this.P0t),this.F0t.clear()}i2(t){const s=lo.un(lo.cdt,this,t);this.P0t.push(s),this.F0t.set(s.ef().toLowerCase(),s)}fdt(t){this.$0t.push(t)}ddt(){for(const t of this.X0t.values())t.pdt();for(const s of this.Z0t.values())s.ddt();for(const i of this.X0t.values())i.ddt();for(const e of this.P0t)e.ddt();for(const h of this.P0t)h.j9();for(const n of this.$0t)n.ddt(!1);lo.Wr(this.$0t),this.K0t.x0t(this.q0t)}Wk(){return this.df}F9(t){return this.F0t.get(t.toLowerCase())||null}mdt(t){this.j0t.push(t),this.B0t.set(t.gdt(),t)}ydt(t){this.z0t.set(t.$J(),t)}Mdt(t){this.U0t.set(t.$J(),t)}wdt(t){this.W0t.set(t.$J(),t)}Sdt(t){switch(t.Tdt()){case 0:this.Z0t.set(t.bdt().toLowerCase(),t);break;case 1:this.X0t.set(t.bdt().toLowerCase(),t)}}xdt(t){this.V0t.set(t.$J(),t),(t.AJ()?this.Y0t:this.H0t).push(t)}vdt(i){2<=i.length&&i.sort(t);let e=this.Q0t.get(i.length);e||(e=[],this.Q0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(n(i,h))return h}return e.push(i),i}Gdt(t){return this.q0t.push(t.Cdt()),this.J0t++}pR(){return this.gft}Idt(){return this.pR().B6()}oR(){return this.Idt().oR()}_dt(){const t=this.Idt(),s=t.oR();return s.Edt(t.h0t())}Ddt(){const t=this.Idt(),s=t.oR();return s.Adt(t.r0t())}Ndt(){return this.K0t}U6(){return this.D0t}Ldt(t){const s=[];for(t=t.Odt();t;)lo.Zh(s,t.Rdt()),t=t.Odt();return s}kdt(t){const s={};for(const i of this.Ldt(t))s[i.Pdt()]=i.Fdt();return Object.create(Object.prototype,s)}jdt(t){return this.V0t.get(t)||null}Bdt(t){return this.z0t.get(t)||null}zdt(t){return this.U0t.get(t)||null}Udt(t){return this.W0t.get(t)||null}iR(t){return this.Z0t.get(t.toLowerCase())||null}Wdt(t,s){let i=this.X0t.get((t.ef()+"."+s).toLowerCase());if(i)return i;if(!t.VJ())for(const e of t.Qdt())if(i=this.X0t.get((e.ef()+"."+s).toLowerCase()))return i;return null}Vdt(){return this.Y0t}Jdt(){return this.H0t}Ydt(t){for(const s of this.Y0t)s.Hdt();if(t)for(const i of this.H0t)i.Zb()&&i.Hdt()}qdt(t){return this.B0t.get(t.toLowerCase())||null}Zdt(t){const s=this.z0t.get(t);return s&&s.Xdt()?s:null}Kdt(){return this.j0t}$dt(){for(const t of this.j0t)t.t1t()}s1t(){for(const t of this.P0t)t.i1t()}e1t(t){this.s1t(),this.idt++;for(const s of t.eZ()){const i=s.f9();i&&(this.df.h1t(s),i.DC(),this.df.n1t())}this.idt--}async r1t(t){this.s1t(),this.idt++;for(const s of this.o1t(t))await this.df.a1t(s);this.idt--}*o1t(t){for(const s of t.eZ()){const i=s.f9();i&&(this.df.h1t(s),yield*i.l1t(),this.df.n1t())}}u1t(t,s,i,e){let h=!1;if(!t.$R())return this.c1t(s,i,e);this.edt++;for(const n of t.eZ()){const r=n.f9();if(r){this.df.h1t(n);for(const a of r.f1t()){const l=a.u1t(s,i,e);h=h||l}const o=r.u1t(s,i,e);h=h||o,this.df.n1t()}}return this.edt--,h}*d1t(t,s,i,e){let h=!1;if(!t.$R())return this.c1t(s,i,e);this.edt++;for(const n of t.eZ()){const r=n.f9();if(r){this.df.h1t(n);for(const a of r.f1t()){const l=yield*a.d1t(s,i,e);h=h||l}const o=yield*r.d1t(s,i,e);h=h||o,this.df.n1t()}}return this.edt--,h}c1t(t,s,i){return this.tdt.push([t,s,i]),!1}p1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.sdt.push([t,s,i,e]),h}*m1t(){if(this.df.g1t())throw new Error("should not be in breakpoint");const t=this.df.ek();for(;this.sdt.length;){const[s,i,e,h]=this.sdt.shift(),n=yield*this.d1t(t,s,i,e);h(n)}}async y1t(){for(const t of this.m1t())await this.df.a1t(t)}M1t(t,i,e,h){let n=!1,s=t.$R(),r=s.f9();if(r){this.edt++,this.df.h1t(s);const o=r.f1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].M1t(i,e,h);n=n||l}const a=r.M1t(i,e,h);return n=n||a,this.df.n1t(),this.edt--,n}}*w1t(t,i,e,h){let n=!1,s=t.$R(),r=s.f9();if(r){this.edt++,this.df.h1t(s);const o=r.f1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].w1t(i,e,h);n=n||l}const a=yield*r.w1t(i,e,h);return n=n||a,this.df.n1t(),this.edt--,n}}S1t(){return this.edt}T1t(){return 0<this.S1t()}b1t(){return++this.edt}x1t(){--this.edt}v1t(){return 0<this.idt}V3(){return this.v1t()||this.T1t()}lq(t){for(const[s,i,e]of this.tdt)this.u1t(t,s,i,e);lo.Wr(this.tdt)}W3(t){t?this.hdt++:this.hdt--}zF(){return 0<this.hdt}G1t(i){for(let t=0,s=i.length;t<s;++t)i[t].C1t().hc()}I1t(i){for(let t=0,s=i.length;t<s;++t)i[t].C1t().dft()}J6(i){for(let t=0,s=i.length;t<s;++t)i[t].C1t().pft()}H6(i){for(let t=0,s=i.length;t<s;++t)i[t].C1t().K6()}aR(s){const i=new Set,e=this.gft.Uft(),h=this.gft.Wft();for(let t=0;t<=h;++t){const n=e[t].S0t();if(n)for(const r of n)s&&s.has(r)||i.add(r)}return i}_1t(t){const s=new Set([...t]),i=this.aR(s);if(0<i.size){for(const e of i)e.C1t().dft();return[...i]}return null}E1t(){const t=lo.un(lo.D1t,this);return this.ndt.push(t),t}A1t(){return this.ndt}N1t(){if(this.ndt.length){let i=this.Idt(),e=!1;this.idt++;for(let t=0,s=this.ndt.length;t<s;++t){const h=this.ndt[t];h.L1t()&&h.O1t(i),h.R1t()&&(e=!0)}e&&(this.k1t(),i.d0(null)),this.idt--}}async P1t(){if(this.ndt.length){let i=this.Idt(),e=!1;this.idt++;for(let t=0,s=this.ndt.length;t<s;++t){const h=this.ndt[t];h.L1t()&&await h.F1t(i),h.R1t()&&(e=!0)}e&&(this.k1t(),i.d0(null)),this.idt--}}k1t(){const t=lo.Xr(this.ndt,t=>t.R1t());for(const s of t)s.cn()}Sq(){for(const t of this.ndt)t.cn();lo.Wr(this.ndt)}j1t(t){for(const s of this.ndt)s.mft(t);for(const i of t){const e=this.ldt.get(i);if(this.ldt.delete(i),e)for(const{resolve:h}of e.B1t.values())h(!0)}}z1t(t){this.rdt.push({promise:t,U1t:this.S1t()})}W1t(){lo.Wr(this.rdt)}Q1t(){const s=this.S1t();this.rdt=this.rdt.filter(t=>t.U1t<=s)}V1t(){const t=Promise.all(this.rdt.map(t=>t.promise));return this.rdt=[],t}yR(t){const s=t.toLowerCase();this.odt.push(s),this.df.Sj(lo.aq.oq.rq.J1t,null),this.odt.pop();for(const e of this.df.sR().A1t())e.Y1t()&&e.H1t()===s&&e.q1t();const i=this.adt.get(s);i&&(i.resolve(),this.adt.delete(s))}wR(t){const i=t.toLowerCase(),s=this.adt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.adt.set(i,{promise:t,resolve:s}),t}}Z1t(){if(0===this.odt.length)throw new Error("not in a signal");return this.odt.at(-1)}X1t(t){let s=this.ldt.get(t);return s||(s={K1t:[],B1t:new Map},this.ldt.set(t,s)),s}rj(t,s){const i=this.X1t(t),e=s.toLowerCase();i.K1t.push(e),this.df.Sj(t.G3().tpt().rq.$1t,t),i.K1t.pop();for(const n of this.df.sR().A1t())n.spt()&&n.H1t()===e&&n.ipt(t);const h=i.B1t.get(e);h&&(h.resolve(!1),i.B1t.delete(e)),0===i.K1t.length&&0===i.B1t.size&&this.ldt.delete(t)}oj(t,s){const i=this.X1t(t),e=s.toLowerCase(),h=i.B1t.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.B1t.set(e,{promise:t,resolve:s}),t}}ept(t){const s=this.X1t(t);if(s&&0!==s.K1t.length)return s.K1t.at(-1);throw new Error("not in a signal")}g7(){return{groups:this.hpt(),cnds:this.npt(),acts:this.rpt(),vars:this.opt(),waits:this.apt()}}y7(t){this.lpt(t.groups),this.upt(t.cnds),this.cpt(t.acts),this.fpt(t.vars),this.dpt(t.waits)}hpt(){const t={};for(const s of this.Kdt())t[s.$J().toString()]=s.ppt();return t}lpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.Zdt(e);h&&h.mpt(i)}}npt(){const t={};for(const[s,i]of this.U0t){const e=i.g7();e&&(t[s.toString()]=e)}return t}upt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.U0t)n.y7(s.get(h)||null)}rpt(){const t={};for(const[s,i]of this.W0t){const e=i.g7();e&&(t[s.toString()]=e)}return t}cpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,n]of this.W0t)n.y7(s.get(h)||null)}opt(){const t={};for(const[s,i]of this.V0t)i.gpt()||!i.AJ()&&!i.Zb()||(t[s.toString()]=i.Tet());return t}fpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.jdt(e);h&&h.eht(i)}}apt(){return this.ndt.filter(t=>!t.ypt()).map(t=>t.g7())}dpt(t){this.Sq();for(const s of t){const i=lo.D1t.Mpt(this,s);i&&this.ndt.push(i)}}wpt(){return[...this.df.ek().eZ()].map(t=>t.f9()).filter(t=>t).map(t=>t.Spt())}Tpt(t){for(;t;){const s=t.Odt();if(s instanceof lo.bpt)return s;t=s}return null}udt(t,s){Array.isArray(s)||(s=[]);const i=this.iR(t.toLowerCase());if(!i)return null;if(!i.tc())return i.eR();const e=i.xpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Cdt()),s.length<e.length;);const h=i.nR();return h.lR(h.rR(),!1,i.cR(),i.eR(),...s)}}}{const uo=self.Ps;uo.cdt=class extends uo.an{constructor(t,s){super(),this.jft=t,this.df=t.Wk(),this.mn=s[0],this.vpt=[],this.Gpt=new Map,this.Cpt=new Map,this.Ipt=new Map,this._pt=!1,this.Ept=[],this.Dpt=[],this.Apt=new Set;for(const i of s[1])this.Npt(i,null,this.vpt);this.Lpt=this.df.Ej()?{type:"sheet",name:this.mn,Opt:0,children:[]}:null}cn(){this.jft=null,this.df=null}Npt(t,s,i){switch(t[0]){case 0:case 3:this.Rpt(t,s,i);break;case 1:this.kpt(t,s,i);break;case 2:this.Ppt(t,s,i);break;case 4:this.Fpt(t,s);break;case 5:this.jpt(t,s,i);break;case 6:this.Bpt(t,s);break;default:throw new Error("invalid event type")}}Rpt(t,s,i){const e=uo.zpt.i2(this,s,t);if(e.Pft()){i.push(e);const h=e.Upt();for(let t=0,s=h.length;t<s;++t)h[t].Wpt()&&this.Qpt(e,t)}else e.Wpt()?this.Qpt(e,0):i.push(e)}Fpt(t,s){const i=uo.bpt.Vpt(this,s,t);this.jft.Sdt(i)}Bpt(t,s){const i=uo.bpt.Jpt(this,s,t);this.jft.Sdt(i)}kpt(t,s,i){const e=uo.Ypt.i2(this,s,t);i.push(e)}Ppt(t,s,i){const e=uo.Hpt.i2(this,s,t);i.push(e)}jpt(t,s,i){const e=uo.qpt.i2(this,s,t);i.push(e)}Qpt(h,n){h.Pft()||this.jft.fdt(h);const r=h.Edt(n),o=r.Zpt(),a=r.LF();if(r.Xpt()){let t=this.Cpt.get(a),s=(t||(t=new Map,this.Cpt.set(a,t)),r.Kpt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,n])}else{let t=this.Gpt.get(a),s=(t||(t={$pt:new Map,tmt:new Map},this.Gpt.set(a,t)),r.EB()),i,e=(s?(i=t.tmt.get(s))||(i=new Map,t.tmt.set(s,i)):i=t.$pt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,n])}}ddt(){const i=this.vpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.zpt&&i[t+1].smt();i[t].ddt(e)}}imt(t){this.Ept.push(t)}j9(){uo.Wr(this.Dpt),this.emt(this),this.Apt.clear()}emt(t){const s=t.Dpt,i=t.Apt;for(const e of this.Ept){const h=e.hmt();e.nmt()&&t!==h&&!i.has(h)&&(i.add(h),h.emt(t),s.push(h))}}f1t(){return this.Dpt}sR(){return this.jft}Wk(){return this.df}ef(){return this.mn}rmt(t,s){this.Ipt.set(s,t)}omt(t){return this.Ipt.get(t)||null}i1t(){this._pt=!1}DC(){if(!this._pt){const t=this.df,s=t.amt(),i=s?performance.now():0,e=(this._pt=!0,this.sR()),h=e.Idt();for(const n of this.vpt)n.DC(h),e.G1t(n.j6()),e.W1t(),t.Y3();h.d0(null),s&&(this.Lpt.Opt+=performance.now()-i)}}*l1t(){if(!this._pt){this._pt=!0;const t=this.df,s=this.sR(),i=s.Idt();for(const e of this.vpt)yield*e.l1t(i),s.G1t(e.j6()),s.W1t(),t.Y3();i.d0(null)}}u1t(e,h,n){if(!h)return this.lmt(e,h,null,null);{let t=h.LF(),s=!1,i=this.lmt(e,h,t,n);s=s||i;for(const r of t.Qdt())i=this.lmt(e,h,r,n),s=s||i}}lmt(t,s,i,e){const h=this.Gpt.get(i);if(!h)return!1;const n=e?h.tmt.get(e):h.$pt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){const u=this.umt(s,a,l);o=o||u}return o}*d1t(e,h,n){if(!h)return yield*this.cmt(e,h,null,null);{let t=h.LF(),s=!1,i=yield*this.cmt(e,h,t,n);s=s||i;for(const r of t.Qdt())i=yield*this.cmt(e,h,r,n),s=s||i}}*cmt(t,s,i,e){const h=this.Gpt.get(i);if(!h)return!1;const n=e?h.tmt.get(e):h.$pt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[a,l]of r){let t;t=a.fmt()?this.umt(s,a,l):yield*this.dmt(s,a,l),o=o||t}return o}M1t(t,s,i){const e=s.LF(),h=this.Cpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const a=r[t],l=this.umt(null,a[0],a[1]);o=o||l}return o}*w1t(t,s,i){const e=s.LF(),h=this.Cpt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let h=0,t=r.length;h<t;++h){let t=r[h],s=t[0],i=t[1],e;e=s.fmt()?this.umt(null,s,i):yield*this.dmt(null,s,i),o=o||e}return o}umt(t,s,i){let e=this.df,h=this.jft,n=h.oR(),r=h.pR(),o=h.S1t(),a=!1;n&&h.I1t(n.rR()),h.I1t(s.rR());const l=1<o,u=(l&&h.Ndt().z6(),r.z6(s));if(t){const f=s.Upt()[i].LF(),d=f.P3();d.Dft(t),t.VF()&&t.pmt()}let c=!0;if(s.v5()){const p=s.mmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].gmt(u)){c=!1;break}}return c&&(s.Pft()?s.ymt(u,i):s.DC(u),a=u.l0t()),r.K6(),l&&h.Ndt().K6(),h.H6(s.rR()),n&&h.H6(n.rR()),n||1!==o||(h.W1t(),h.zF())||e.Y3(),a}*dmt(t,s,i){let e=this.df,h=this.jft,n=h.oR(),r=h.pR(),o=h.S1t(),a=!1;n&&h.I1t(n.rR()),h.I1t(s.rR());const l=1<o,u=(l&&h.Ndt().z6(),r.z6(s));if(t){const f=s.Upt()[i].LF(),d=f.P3();d.Dft(t),t.VF()&&t.pmt()}let c=!0;if(s.v5()){const p=s.mmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Mmt(u))){c=!1;break}}return c&&(s.Pft()?yield*s.wmt(u,i):yield*s.l1t(u),a=u.l0t()),r.K6(),l&&h.Ndt().K6(),h.H6(s.rR()),n&&h.H6(n.rR()),n||1!==o||(h.W1t(),h.zF())||e.Y3(),a}Spt(){return this.Lpt}}}{let u=function(t,s){return!0};u;const co=self.Ps,fo=[];function*j(t,s){return!0}co.zpt=class extends co.an{constructor(t,s,i){super(),this.D7=t,this.df=t.Wk(),this.Smt=s,this.Tmt=null,this.gft=this.df.sR().pR(),this.bmt=[],this.xmt=[],this.vmt=!1,this.Gmt=!1,this.Cmt=!1,this.Imt=!1,this._mt=!!i[2],this.Emt=!1,this.Dmt=null,this.Amt=[],this.Pht=[],this.Nmt=[],this.Lmt=u,this.Omt=j,this.Rmt=!1,this.kmt=!1,this.Pmt="",this.Fmt=!1,this.jmt=null,this.Lpt=null,this.w8=i[4],this.Bmt=i[5],this.D7.rmt(this,this.Bmt),this.zmt=this.df.Ej()?{Umt:i[3][0],Wmt:i[3][1],Qmt:!1,Vmt:!1,Jmt:!1,Ymt:!1}:null,this.sR().ydt(this),3===i[0]&&this.Hmt(i[1]);let e=0;for(const h of i[6]){const n=co.qmt.i2(this,h,e++);this.Amt.push(n),this.Zmt(n.LF())}e=0;for(const r of i[7]){const o=co.Xmt.i2(this,r,e++);this.Pht.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.D7.Npt(l,this,this.Nmt)}this.Amt.length&&(this.Emt=null===this.Amt[0].LF()&&this.Amt[0].Zpt()===co.aq.oq.rq.Kmt),0===this.Amt.length&&(this.Amt=fo),0===this.Pht.length&&(this.Pht=fo),0===this.Nmt.length&&(this.Nmt=fo)}static i2(t,s,i){return co.un(co.zpt,t,s,i)}Hmt(t){this.Rmt=!0,this.kmt=!!t[0],this.Fmt=this.kmt,this.Pmt=t[1].toLowerCase(),this.jmt=[],this.sR().mdt(this),this.df.Ej()&&(this.Lpt={type:"group",name:t[1],Opt:0,children:[]})}$mt(t){this.jmt.push(t)}tgt(t,s){for(const i of t.G9().cq())s.includes(i)||s.push(i)}sgt(t,s){if(t)if(s.includes(t)||s.push(t),t.VJ())for(const i of t.igt())i.VF()&&this.tgt(i,s);else t.VF()&&this.tgt(t,s)}Zmt(t){this.sgt(t,this.bmt)}egt(t){this.sgt(t,this.xmt)}hgt(){this.bmt=this.df.QJ()}ddt(t){this.Imt=!!t,this.ngt(),this.rgt();for(const s of this.Amt)s.ddt();if(0<this.Pht.length){let t=!1;for(const e of this.Pht)e.ddt(),e.ogt()&&(t=!0);t?(this.Lmt=this.agt,this.Omt=this.lgt):(this.Lmt=this.ugt,this.Omt=this.cgt)}const i=this.Nmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof co.zpt&&i[t+1].smt();i[t].ddt(h)}this.zmt&&this.fgt(),this.Lpt&&this.dgt().Spt().children.push(this.Lpt)}Spt(){return this.Lpt}dgt(){let t=this.v5();for(;t;){if(t.Xdt())return t;t=t.v5()}return this.D7}fgt(){const t=this.zmt;t.Qmt=this.Amt.every(t=>t.fmt()),t.Vmt=this.Pht.every(t=>t.fmt()),t.Jmt=this.Nmt.every(t=>t.fmt()),t.Ymt=t.Qmt&&t.Vmt&&t.Jmt}pgt(){let t=this;for(;t.fgt(),t=t.v5(););}ngt(){if(this.Xdt()){let t=this.v5();for(this.Cmt=!0;t;){if(!t.Xdt()){this.Cmt=!1;break}t=t.v5()}}}mgt(){const t=this.df.QJ();if(this.bmt===t)this.xmt=t;else{this.xmt=co.ho(this.bmt);let t=this.v5();for(;t;){for(const i of t.bmt)this.egt(i);t=t.v5()}const s=this.sR();this.bmt=s.vdt(this.bmt),this.xmt=s.vdt(this.xmt)}}rgt(){if(this.ggt()){this.Dmt=[];let t=this.v5();for(;t;)this.Dmt.push(t),t=t.v5();this.Dmt.reverse()}}ygt(){this.Gmt=!0,this.Smt&&this.Smt.ygt()}y0t(){return this.Gmt}j6(){return this.bmt}rR(){return this.vmt||(this.vmt=!0,this.mgt()),this.xmt}Mgt(t){return this.bmt.includes(t)}mmt(){return this.Dmt}f9(){return this.D7}sR(){return this.D7.sR()}Wk(){return this.df}v5(){return this.Smt}wgt(t){this.Tmt=t}Odt(){return this.Tmt||this.Smt}Sgt(){return this.Bmt}Tgt(){return this.zmt&&this.zmt.Wmt}bgt(){return this.Tgt()&&this.zmt.Umt}xgt(t){this.zmt.Umt=!!t,this.pgt()}Xdt(){return this.Rmt}vgt(){return this.Cmt}smt(){return this.Emt}Ggt(){return this.Imt}gdt(){return this.Pmt}ppt(){return this.Fmt}t1t(){this.mpt(this.kmt)}mpt(t){if(t=!!t,!this.Rmt)throw new Error("not a group");if(this.Fmt!==t){this.Fmt=t;for(const s of this.jmt)s.Cgt();if(this.jmt.length){const i=this.df.Tk(),e=i.f9();e&&e.j9()}}}$J(){return this.w8}Pft(){return this._mt}Wpt(){return this.Amt.length&&this.Amt[0].Wpt()}Igt(){return this.Tmt&&this.Tmt instanceof co.bpt}ggt(){return this.Igt()||this.Amt.some(t=>t.Wpt())}Upt(){return this.Amt}M0t(){return this.Amt.length}Edt(t){if((t=Math.floor(t))<0||t>=this.Amt.length)throw new RangeError("invalid condition index");return this.Amt[t]}_gt(t){return this.Edt(t)}Egt(t){let s=t.bO();if(0!==s){--s;const i=t.Dgt()?t.Agt():t.LF();for(;0<=s;--s){const e=this.Amt[s];if(i===e.LF()||e.Dgt()&&e.Agt()===i)return!1}}return!0}Ngt(){return this.Pht}Lgt(){return this.Pht.length}Adt(t){if((t=Math.floor(t))<0||t>=this.Pht.length)throw new RangeError("invalid action index");return this.Pht[t]}Ogt(s){s=Math.floor(s);const t=this.Pht.find(t=>t.Rgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}kgt(t){return 0<=(t=Math.floor(t))&&t<this.Pht.length}Pgt(){return this.Nmt}Rdt(){return this.Nmt.filter(t=>t instanceof co.Ypt)}gmt(i){i.e0t(this);let e=this.Amt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.n0t(t),n.WB())throw new Error("trigger cannot be used as sub-event to a loop");if(n.DC())h=!0;else if(!this._mt)return!1}return!this._mt||h}ymt(t,s){t.e0t(this),t.n0t(s),this.Amt[s].DC()&&(this.Lmt(t,0)&&this.Fgt(t),t.a0t(!0))}*Mmt(i){i.e0t(this);let e=this.Amt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(i.n0t(t),n.WB())throw new Error("trigger cannot be used as sub-event to a loop");if(n.fmt()?n.DC():yield*n.l1t())h=!0;else if(!this._mt)return!1}return!this._mt||h}*wmt(t,s){t.e0t(this),t.n0t(s);let i=this.Amt[s];if(i.fmt()?i.DC():yield*i.l1t())(this.jgt()?this.Lmt(t,0):yield*this.Omt(t,0))&&(this.Bgt()?this.Fgt():yield*this.zgt()),t.a0t(!0)}DC(t){t.e0t(this),this.Emt||t.u0t(!1),this._mt?this.Ugt(t):this.Wgt(t)}*l1t(t){(this.bgt()||this.df.Qgt())&&(yield this),t.e0t(this),this.Emt||t.u0t(!1),this._mt?yield*this.Vgt(t):yield*this.Jgt(t)}Ugt(i){let e=this.Amt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const n=e[t];if(!n.Wpt()){i.n0t(t);const r=n.DC();h=h||r}}i.a0t(h),h&&(this.Lmt(i,0)&&this.Fgt(i),this.Imt)&&i.u0t(!0)}*Vgt(i){let e=this.Amt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const n=e[s];if(!n.Wpt()){i.n0t(s);let t;t=n.fmt()?n.DC():yield*n.l1t(),h=h||t}}if(i.a0t(h),h)(this.jgt()?this.Lmt(i,0):yield*this.Omt(i,0))&&(this.Bgt()?this.Fgt():yield*this.zgt()),this.Imt&&i.u0t(!0)}Wgt(i){const e=this.Amt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=(i.n0t(t),h.DC());if(!n)return void i.a0t(!1)}i.a0t(!0),this.Lmt(i,0)&&this.Fgt(i),i.l0t()&&this.Imt&&i.u0t(!0)}*Jgt(i){const e=this.Amt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.n0t(t);if(!(h.fmt()?h.DC():yield*h.l1t()))return void i.a0t(!1)}i.a0t(!0);(this.jgt()?this.Lmt(i,0):yield*this.Omt(i,0))&&(this.Bgt()?this.Fgt():yield*this.zgt()),i.l0t()&&this.Imt&&i.u0t(!0)}ugt(i,e){const h=this.Pht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.o0t(t),n.DC()}return!0}*cgt(i,e){const h=this.Pht;for(let t=e,s=h.length;t<s;++t){const n=h[t];i.o0t(t),n.fmt()?n.DC():yield*n.l1t()}return!0}agt(i,e){const h=this.sR(),n=this.Pht;for(let t=e,s=n.length;t<s;++t){const r=n[t],o=(i.o0t(t),r.DC());if(r.Ygt()&&!0===o)return!1;r.Hgt()&&o instanceof Promise&&h.z1t(o)}return!0}*lgt(i,e){const h=this.sR(),n=this.Pht;for(let s=e,t=n.length;s<t;++s){const r=n[s];i.o0t(s);let t;if(t=r.fmt()?r.DC():yield*r.l1t(),r.Ygt()&&!0===t)return!1;r.Hgt()&&t instanceof Promise&&h.z1t(t)}return!0}qgt(t){this.Lmt(t,t.r0t())&&this.Fgt()}*Zgt(t){(yield*this.Omt(t,t.r0t()))&&(yield*this.zgt())}Fgt(){if(this.Nmt.length){const t=this.Xdt()&&this.df.amt(),s=t?performance.now():0,i=this.gft,e=i.z6(this);this.Gmt?this.Xgt(e):this.Kgt(e),i.K6(),t&&(this.Lpt.Opt+=performance.now()-s)}}Xgt(e){const h=this.Rmt,n=this.Cmt,r=this.sR(),o=this.Nmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.j6(),u=!n||!h&&t<i;u&&r.J6(l),a.DC(e),u?r.H6(l):r.G1t(l)}}Kgt(i){const e=this.Nmt;for(let t=0,s=e.length;t<s;++t)e[t].DC(i)}*zgt(){if(this.Nmt.length){const t=this.gft,s=t.z6(this);this.Gmt?yield*this.$gt(s):yield*this.tyt(s),t.K6()}}*$gt(e){const h=this.Rmt,n=this.Cmt,r=this.sR(),o=this.Nmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.j6(),u=!n||!h&&t<i;u&&r.J6(l),yield*a.l1t(e),u?r.H6(l):r.G1t(l)}}*tyt(i){const e=this.Nmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].l1t(i)}Y6(i,e){e.i0t();const h=this.Amt;if(!this.Pft())for(let t=i.h0t()+1,s=h.length;t<s;++t){const n=h[t],r=(e.n0t(t),n.DC());if(!r)return!1}return this.Lmt(e,0)&&this.Fgt(e),!0}*syt(i,e){e.i0t();const h=this.Amt;if(!this.Pft())for(let t=i.h0t()+1,s=h.length;t<s;++t){const n=h[t];e.n0t(t);if(!(n.fmt()?n.DC():yield*n.l1t()))return!1}return(this.jgt()?this.Lmt(e,0):yield*this.Omt(e,0))&&(this.Bgt()?this.Fgt():yield*this.zgt()),!0}fmt(){return!this.bgt()&&!this.df.Qgt()&&this.zmt.Ymt}jgt(){return!this.df.Qgt()&&this.zmt.Vmt}Bgt(){return!this.df.Qgt()&&this.zmt.Jmt}iyt(i){if(this.v5()){const e=this.mmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].gmt(i))return!1}return!0}*eyt(i){if(this.v5()){const e=this.mmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Mmt(i)))return!1}return!0}hyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ei(0));t.Ndt().z6(),this.Tmt.nyt(e)}else this.Tmt.ryt(s);else i&&t.Ndt().z6()}oyt(t,s,i,e){let h,n,r=0<t.length,o=null,a=this.df,l=this.gft,u=a.sR(),c=this.Tmt,f=c.Hgt(),d=u.b1t(),p=1<d;if(this.hyt(u,s,p),r&&(i?u.J6(t):u.I1t(t)),null!==e){if(e.ayt){const g=i?e.ayt.P3():e.ayt.C1t().fft(),y=e.lyt.P3();y.Aft(g.R3()),y.Rft(),i||e.lyt.uyt()}else if(e.cyt){const M=e.cyt.P3();M.Aft(e.fyt),M.Rft()}e.dyt&&(o=u._1t(t))}const m=l.z6(this);return i&&m.w0t(t),this.iyt(m)&&(m.e0t(this),f&&([n,h]=c.pyt()),this.Wgt(m),f)&&c.myt(n),l.K6(),p&&u.Ndt().K6(),null!==o&&u.H6(o),r&&u.H6(t),u.x1t(),f||u.Q1t(),h}*gyt(t,s,i,e){let h,n,r=((this.bgt()||this.df.Qgt())&&(yield this),0<t.length),o=null,a=this.df,l=this.gft,u=a.sR(),c=this.Tmt,f=c.Hgt(),d=u.b1t(),p=1<d;if(this.hyt(u,s,p),r&&(i?u.J6(t):u.I1t(t)),null!==e){if(e.ayt){const g=i?e.ayt.P3():e.ayt.C1t().fft(),y=e.lyt.P3();y.Aft(g.R3()),y.Rft(),i||e.lyt.uyt()}else if(e.cyt){const M=e.cyt.P3();M.Aft(e.fyt),M.Rft()}e.dyt&&(o=u._1t(t))}const m=l.z6(this);return i&&m.w0t(t),(yield*this.eyt(m))&&(m.e0t(this),f&&([n,h]=c.pyt()),yield*this.Jgt(m),f)&&c.myt(n),l.K6(),p&&u.Ndt().K6(),null!==o&&u.H6(o),r&&u.H6(t),u.x1t(),f||u.Q1t(),h}yyt(t,s){const i=this.rR(),e=0<i.length,h=this.df,n=this.gft,r=h.sR(),o=r.b1t(),a=1<o,l=(a&&r.Ndt().z6(),this.Tmt.nyt(t),e&&(s?r.J6(i):r.I1t(i)),n.z6(this));this.iyt(l)&&(l.e0t(this),this.Wgt(l)),n.K6(),a&&r.Ndt().K6(),e&&r.H6(i),r.x1t(),r.Q1t()}*Myt(t,s){(this.bgt()||this.df.Qgt())&&(yield this);const i=this.rR(),e=0<i.length,h=this.df,n=this.gft,r=h.sR(),o=r.b1t(),a=1<o,l=(a&&r.Ndt().z6(),this.Tmt.nyt(t),e&&(s?r.J6(i):r.I1t(i)),n.z6(this));(yield*this.eyt(l))&&(l.e0t(this),yield*this.Jgt(l)),n.K6(),a&&r.Ndt().K6(),e&&r.H6(i),r.x1t(),r.Q1t()}lR(t,s,i,e,...h){let n,r,o=0<t.length,a=this.df,l=this.gft,u=a.sR(),c=this.Tmt,f=c.Hgt(),d=u.b1t(),p=1<d,m=(p&&u.Ndt().z6(),0<h.length&&this.Tmt.nyt(h),o&&(s?u.J6(t):u.I1t(t)),l.z6(this));return m.p0t(i,e),l.Qft(m),a.Q6(!1),this.iyt(m)&&(m.e0t(this),f&&([r,n]=c.pyt()),this.Wgt(m),f)&&c.myt(r),a.Q6(!0),l.K6(),l.Vft(),p&&u.Ndt().K6(),o&&u.H6(t),u.x1t(),f||u.Q1t(),n||m.m0t()}}}{let e=self.Ps,t=[],s=!1;e.qpt=class extends e.an{constructor(t,s,i){super();const e=t.Wk(),h=t.sR(),n=(this.D7=t,this.jft=h,this.df=t.Wk(),this.Smt=s,e.wyt(i[1]));this.Syt=n,this.Bmt=i[2],this.D7.rmt(this,this.Bmt),this.zmt=e.Ej()?{Umt:i[3][0],Wmt:i[3][1]}:null}static i2(t,s,i){return e.un(e.qpt,t,s,i)}ddt(){const t=this.Syt,s=this.df.sR().kdt(this);this.Syt=t.bind(null,this.df.qP(),s)}v5(){return this.Smt}Odt(){return this.Smt}f9(){return this.D7}Sgt(){return this.Bmt}Tgt(){return this.zmt&&this.zmt.Wmt}bgt(){return this.Tgt()&&this.zmt.Umt}xgt(t){this.zmt.Umt=!!t}smt(){return!1}j6(){return t}rR(){return this.Smt?this.Smt.rR():t}DC(t){t.e0t(this),this.jft.z1t(this.Tyt())}async Tyt(){try{await this.Syt()}catch(t){console.error(`Unhandled exception running script %c${this.f9().ef()}, event ${this.Sgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*l1t(t){t.e0t(this),(this.bgt()||this.df.Qgt())&&(yield this),this.DC(t)}fmt(){return!this.bgt()&&!this.df.Qgt()}static byt(){return s}static xyt(){s=!0}}}{const po=self.Ps;po.bpt=class extends po.an{constructor(t,s,i){super(),this.D7=t,this.df=t.Wk(),this.Smt=s,this.vyt=0,this.Gyt="",this.Cyt=0,this.Iyt=[],this._yt=!0,this.Eyt="",this.aft=null,this.Dyt=!1,this.Ayt=[],this.Nyt=!1,this.Lyt=!1,this.Oyt=0,this.Ryt=-1,this.kyt=new Map,this.Pyt=po.zpt.i2(t,s,i),this.Pyt.wgt(this)}Fyt(t){this.vyt=0,this.Gyt=t[0],this.Cyt=t[1],this.Iyt=t[2].map(t=>po.Ypt.i2(this.D7,this,t)),this._yt=t[3],this.Lyt=t[4],this.Nyt=t[5]}jyt(t){this.vyt=1,this.Eyt=t[1],this.aft=this.df.TJ(t[2]),this.Pyt.Zmt(this.aft),this.Gyt=this.aft.ef()+"."+this.Eyt,this.Cyt=t[3],this.Iyt=t[4].map(t=>po.Ypt.i2(this.D7,this,t)),this._yt=t[5],this.Lyt=t[6],this.Nyt=t[7],this.aft.Byt(this)}static Vpt(t,s,i){const e=po.un(po.bpt,t,s,i),h=i[1];return e.Fyt(h),e}static Jpt(t,s,i){const e=po.un(po.bpt,t,s,i),h=i[1];return e.jyt(h),e}pdt(){if(this.aft&&this.aft.VJ())for(const t of this.aft.igt())if(t.zyt(this.Eyt)){this.Dyt=!0;break}}ddt(){for(const t of this.Iyt)t.ddt();this.Pyt.ddt(!1)}Tdt(){return this.vyt}Rdt(){return this.Iyt}xpt(){return this.Iyt}hR(){return this.Iyt.length}Uyt(t){this.Ayt.push(t)}Wyt(){return this.Ayt}ryt(i){const e=this.Iyt;for(let t=0,s=e.length;t<s;++t)e[t].eht(i[t].ei(0))}nyt(i){const e=this.Iyt;for(let t=0,s=e.length;t<s;++t)e[t].eht(i[t])}Qyt(){return this.Iyt.map(t=>t.Tet())}v5(){return this.Smt}Odt(){return this.Smt}bdt(){return this.Gyt}Vyt(){return this.Eyt}Jyt(){return this.Dyt}cR(){return this.Cyt}LF(){return this.aft}tc(){return this._yt}eR(){switch(this.Cyt){case 0:return null;case 2:return"";default:return 0}}nR(){return this.Pyt}uR(){return this.Nyt}Hgt(){return this.Lyt}pyt(){const t=this.Oyt++;this.Ryt=t;let s,i=new Promise(t=>s=t);return this.kyt.set(t,{resolve:s,Yyt:0}),[t,i]}myt(t){const s=this.kyt.get(t);0===s.Yyt&&(s.resolve(),this.kyt.delete(t)),this.Ryt=-1}Hyt(){const t=this.kyt.get(this.Ryt);return t.Yyt++,this.Ryt}qyt(t){this.Ryt=t;const s=this.kyt.get(t);s.Yyt--}Zyt(t,s){const i=new Map,e=[];for(const h of this.aft.P3().R3()){const n=h.LF();if(n.zyt(this.Eyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&this.Pyt.oyt(t,s,this.Nyt,{cyt:this.aft,fyt:e}),0<i.size)for(const[o,a]of i){const l=o.Xyt(this.Eyt).nR(),u=[...new Set([...t,...l.j6()])];l.oyt(u,s,this.Nyt,{cyt:o,fyt:a})}}*Kyt(t,s){const i=new Map,e=[];for(const h of this.aft.P3().R3()){const n=h.LF();if(n.zyt(this.Eyt)){const r=i.get(n);Array.isArray(r)?r.push(h):i.set(n,[h])}else e.push(h)}if(0<e.length&&(yield*this.Pyt.gyt(t,s,this.Nyt,{cyt:this.aft,fyt:e})),0<i.size)for(const[o,a]of i){const l=o.Xyt(this.Eyt).nR(),u=[...new Set([...t,...l.j6()])];yield*l.gyt(u,s,this.Nyt,{cyt:o,fyt:a})}}}}{const mo=self.Ps,go=[];mo.Ypt=class extends mo.an{constructor(t,s,i){super();const e=t.sR();this.D7=t,this.jft=e,this.df=t.Wk(),this.Smt=s,this.K0t=e.Ndt(),this.mn=i[1],this.Tf=i[2],this.$yt=i[3],this.bb=!!i[4],this.tMt=!!i[5],this.sMt=s instanceof mo.bpt,this.w8=i[6],this.iMt=this.df.Pdt(i[8]),this.eMt=t=>this.eht(t),this.hMt=()=>this.Tet(),this.nMt=!this.Smt||this.bb||this.tMt,this.Lht=this.$yt,this.rMt=-1,this.oMt()&&(this.Lht=this.Lht?1:0),!this.aMt()||this.Zb()||this.gpt()||(this.rMt=e.Gdt(this)),e.xdt(this)}static i2(t,s,i){return mo.un(mo.Ypt,t,s,i)}ddt(){if(this.aMt()&&!this.Zb()&&!this.gpt()&&!this.lMt()){const t=this.jft.Tpt(this);t&&t.Uyt(this)}}ef(){return this.mn}Pdt(){return this.iMt}v5(){return this.Smt}Odt(){return this.v5()}AJ(){return!this.v5()}aMt(){return!this.AJ()}lMt(){return this.sMt}Zb(){return this.bb}gpt(){return this.tMt}de(){return 0===this.Tf}ve(){return 1===this.Tf}oMt(){return 2===this.Tf}smt(){return!1}$J(){return this.w8}Cdt(){return this.$yt}j6(){return go}DC(t){!this.aMt()||this.Zb()||this.gpt()||this.eht(this.Cdt())}fmt(){return!0}*l1t(t){this.DC(t)}eht(t){this.de()?"number"!=typeof t&&(t=parseFloat(t)):this.ve()?"string"!=typeof t&&(t=t.toString()):this.oMt()&&(t=t?1:0),this.nMt?this.Lht=t:this.K0t.v0t()[this.rMt]=t}Tet(){return this.nMt?this.Lht:this.K0t.v0t()[this.rMt]}uMt(){let t=this.Tet();return this.oMt()?!!t:t}Hdt(){this.Lht=this.$yt}Fdt(){return{configurable:!1,enumerable:!0,get:this.hMt,set:this.eMt}}}}{const yo=self.Ps,Mo=[];yo.Hpt=class extends yo.an{constructor(t,s,i){super();const e=t.sR();this.D7=t,this.jft=e,this.df=t.Wk(),this.Smt=s,this.cMt=null,this.fMt=i[1],this.f0=!0}static i2(t,s,i){return yo.un(yo.Hpt,t,s,i)}ddt(){this.cMt=this.jft.F9(this.fMt),this.D7.imt(this);let t=this.v5();for(;t;)t instanceof yo.zpt&&t.Xdt()&&t.$mt(this),t=t.v5();this.Cgt(),this.df.Ej()&&this.D7.Spt().children.push(this.cMt.Spt())}v5(){return this.Smt}j6(){return Mo}hmt(){return this.cMt}DC(t){const s=!!this.v5(),i=this.df.QJ();s&&this.jft.I1t(i),this.cMt.DC(),s&&this.jft.H6(i)}*l1t(t){const s=!!this.v5(),i=this.df.QJ();s&&this.jft.I1t(i),yield*this.cMt.l1t(),s&&this.jft.H6(i)}fmt(){return!1}nmt(){return this.f0}Cgt(){let t=this.v5();for(;t;){if(t instanceof yo.zpt&&t.Xdt()&&!t.ppt())return void(this.f0=!1);t=t.v5()}this.f0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const wo=self.Ps;wo.dMt=class extends wo.an{constructor(t){super(),this.RT=t,this.df=t.Wk()}ddt(){}static pMt(t,s){const i=s[0],e=[vo,bo,xo,Go,So,To];return wo.un(e[i],t,s)}};class So extends wo.dMt{constructor(t,s){super(t),this.mMt=this.df.oV(),this.Syt=this.df.wyt(s[1]),this.Syt!==wo.aq.oq.Zht.random&&this.Syt!==wo.aq.oq.Zht.gMt||this.RT.yMt()}MMt(){return this.mMt.wMt(this.Syt,this.mMt)}}class To extends wo.dMt{constructor(t,s){super(t),this.SMt=null,this.Gyt=s[1],this.RT.yMt()}ddt(){const t=this.df.sR(),s=(this.SMt=t.iR(this.Gyt),this.Gyt=null,this.RT.nR()),i=this.SMt.nR();this.TMt=[...new Set([...s.rR(),...i.rR()])],this.TMt=t.vdt(this.TMt)}MMt(){const t=this.SMt;if(t.tc()){const s=t.nR();return wo.zpt.prototype.lR.bind(s,this.TMt,t.uR(),t.cR(),t.eR())}{const i=t.eR();return()=>i}}}class bo extends wo.dMt{constructor(t,s){super(t),this.aft=this.df.TJ(s[1]),this.Syt=this.df.wyt(s[2]),this.bMt=!!s[3],this.gft=this.df.sR().pR(),this.RT.xMt(this.aft)}MMt(){return this.aft.G3().wMt(this.Syt,this.aft.b3().wB())}vMt(...t){const s=this.aft,i=s.P3().vft(),e=i.length;if(0===e)return this.bMt?"":0;const h=a(this.RT.GMt(),e);return this.gft.B6().f0t(s),this.Syt.apply(i[h].wB(),t)}CMt(t,...s){const i=this.aft,e=i.R3(),h=e.length;if(0===h||"number"!=typeof t)return this.bMt?"":0;const n=a(t,h);return this.gft.B6().f0t(i),this.Syt.apply(e[n].wB(),s)}}class xo extends wo.dMt{constructor(t,s){super(t),this.aft=this.df.TJ(s[1]),this.IMt=s[3],this.bMt=!!s[2],this.RT.xMt(this.aft)}_Mt(){const t=this.aft.P3().vft(),s=t.length;if(0===s)return this.bMt?"":0;const i=a(this.RT.GMt(),s);return t[i].EMt(this.IMt)}DMt(){const t=this.aft,s=t.P3().vft(),i=s.length;if(0===i)return this.bMt?"":0;const e=a(this.RT.GMt(),i),h=s[e],n=h.LF().AMt(t.NMt());return h.EMt(this.IMt+n)}LMt(t){const s=this.aft,i=s.R3(),e=i.length;if(0===e||"number"!=typeof t)return this.bMt?"":0;let h=a(t,e),n=i[h],r=0;return s.VJ()&&(r=n.LF().AMt(s.NMt())),n.EMt(this.IMt+r)}}class vo extends wo.dMt{constructor(t,s){super(t),this.aft=this.df.TJ(s[1]),this.OMt=this.aft.Iht(s[2]),this.RMt=this.aft.eit(s[2]),this.Syt=this.df.wyt(s[3]),this.bMt=!!s[4],this.gft=this.df.sR().pR(),this.RT.xMt(this.aft)}kMt(...t){const s=this.aft,i=s.P3().vft(),e=i.length;if(0===e)return this.bMt?"":0;let h=a(this.RT.GMt(),e),n=(this.gft.B6().f0t(s),i[h]),r=0;return s.VJ()&&(r=n.LF().PMt(s.NMt())),this.Syt.apply(n.Cht()[this.RMt+r].wB(),t)}FMt(t,...s){const i=this.aft,e=i.R3(),h=e.length;if(0===h||"number"!=typeof t)return this.bMt?"":0;let n=a(t,h),r=(this.gft.B6().f0t(i),e[n]),o=0;return i.VJ()&&(o=r.LF().PMt(i.NMt())),this.Syt.apply(r.Cht()[this.RMt+o].wB(),s)}}class Go extends wo.dMt{constructor(t,s){super(t),this.jMt=null,this.BMt=s[1]}ddt(){this.jMt=this.df.sR().jdt(this.BMt)}zMt(){return this.jMt}}}{let n=function(t){const s=self.UMt[t];if(s)return s;throw new Error("invalid expression number")};n;const Co=self.Ps;Co.WMt=class extends Co.an{constructor(t,s,i){super(),this.RT=t,this.Kg=i,this.Tf=s,this.ei=null,this.QMt=!1,this.tMt=!1}static i2(t,s,i){const e=s[0],h=[Io,_o,Ro,Do,No,Eo,Lo,Io,Do,Do,ko,Po,Ro,jo,_o,Oo,Ao,Fo,Bo,zo,Uo,Wo];return Co.un(h[e],t,e,i,s)}ddt(){}yMt(){this.QMt=!0}xMt(t){this.QMt||!t||t.G3().XP()||(this.QMt=!0)}VMt(){return this.QMt}bO(){return this.Kg}Wk(){return this.RT.Wk()}nR(){return this.RT.nR()}gpt(){return this.tMt}JMt(){return 4===this.Tf}};class Io extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.YMt=0;const h=e[1];this.HMt=h[0],this.qMt=[],this.ZMt=null;for(let t=1,s=h.length;t<s;++t)this.qMt.push(Co.dMt.pMt(this,h[t]));this.qMt.length?this.ei=this.XMt:(this.ei=n(this.HMt),this.tMt=!0)}KMt(t){if(t<0||t>=this.qMt.length)throw new RangeError("invalid numbered node");return this.qMt[t]}ddt(){for(const s of this.qMt)s.ddt();const t=n(this.HMt);this.qMt.length?this.ZMt=t(this):this.ZMt=t}GMt(){return this.YMt}XMt(t){return this.YMt=t,this.ZMt()}}class _o extends Io{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.$Mt,14===s&&(this.nR().hgt(),this.RT instanceof Co.Xmt)&&this.nR().ygt()}$Mt(t){this.YMt=t;const s=this.ZMt();return"string"==typeof s?s:""}twt(){return n(this.HMt)()}}class Eo extends Io{constructor(t,s,i,e){super(t,s,i,e),2<=t.swt()?this.ei=this.u4:this.ei=this.vk,this.tMt=!1}vk(t){this.YMt=t;const s=this.ZMt(),i=this.Wk().Tk();return i.vk(s)}u4(t){const s=this.vk(t);return s?s.u4():null}}class Do extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.iwt=e[1],this.ei=this.ewt,this.tMt=!0}ewt(){return this.iwt}}class Ao extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.hwt=e[1],this.ei=this.nwt,this.tMt=!0}nwt(){return this.hwt}}class No extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.aft=this.Wk().TJ(e[1]),2<=t.swt()?this.ei=this.w3:this.ei=this.LF;const h=this.nR();h.Zmt(this.aft),this.RT instanceof Co.Xmt?h.ygt():h.v5()&&h.v5().ygt(),this.tMt=!0}LF(){return this.aft}w3(){return this.aft?this.aft.w3():null}}class Lo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.m8=this.Wk().ek().Kq(e[1]),2<=t.swt()?this.ei=this.sk:this.ei=this.hk,this.tMt=!0}hk(){return this.m8}sk(){return this.m8?this.m8.sk():null}}class Oo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.sK=this.Wk().htt().lX(e[1]),2<=t.swt()?this.ei=this.Sst:this.ei=this.Ust,this.tMt=!0}Ust(){return this.sK}Sst(){return this.sK?this.sK.Sst():null}}class Ro extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.rwt=e[1],this.ei=this.owt,this.tMt=!0}owt(){return this.rwt}}class ko extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.awt=e[1];const h=this.RT.LF();this.RT instanceof Co.qmt&&this.RT.Zb()||!h||!h.VJ()?(this.ei=this.lwt,this.tMt=!0):(this.ei=this.uwt,this.yMt())}lwt(){return this.awt}uwt(t){t=t||0;let s=this.RT.LF(),i=s.P3(),e=i.R3(),h=null;if(e.length)h=e[t%e.length].LF();else if(i.bft()){const n=i.xft();h=n[t%n.length].LF()}else{if(!(0<s.j3()))return 0;{const r=s.R3();h=r[t%r.length].LF()}}return this.awt+h.AMt(s.NMt())}}class Po extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.BMt=e[1],this.jMt=null,2<=t.swt()?this.ei=this.cwt:this.ei=this.fwt,this.tMt=!0}ddt(){this.jMt=this.Wk().sR().jdt(this.BMt)}fwt(){return this.jMt}cwt(){return null}}class Fo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.dwt=e[1],this.SMt=null,2<=t.swt()?this.ei=this.pwt:this.ei=this.mwt,this.tMt=!0}ddt(){this.SMt=this.Wk().sR().iR(this.dwt),this.dwt=null}mwt(){return this.SMt}pwt(){return null}}class jo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.gwt=[],this.ywt=[],this.tMt=!0;for(let t=1,s=e.length;t<s;++t){const h=Co.WMt.i2(this.RT,e[t],0);this.gwt.push(h),this.ywt.push(0),h.gpt()||(this.tMt=!1)}this.ei=this.Mwt}ddt(){for(const t of this.gwt)t.ddt()}Mwt(){const i=this.gwt,e=this.ywt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0);return e}}class Bo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.wwt=e[1],this.ei=this.iht,this.tMt=!0}iht(){return this.wwt}}class zo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.Swt=e[1],this.ei=this.Twt,this.tMt=!0}Twt(){return this.Swt}}class Uo extends Io{constructor(t,s,i,e){super(t,s,i,e),this.ei=this.XF,this.tMt=!1}XF(){return this.ZMt()}}class Wo extends Co.WMt{constructor(t,s,i,e){super(t,s,i),this.Wlt=this.Wk().out().Plt(e[1]),this.ei=this.bwt,this.tMt=!0}bwt(){return this.Wlt.ef()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};e;const Qo=self.Ps,Vo=[],Jo=function(){};Qo.qmt=class extends Qo.an{constructor(t,i,s){if(super(),this.Pyt=t,this.df=t.Wk(),this.Kg=s,this.Syt=this.df.wyt(i[1]),this.xwt=0<i[3],this.vwt=2===i[3],this.Gwt=!!i[4],this.Cwt=!!i[5],this.bb=!!i[6],this.w8=i[7],this.Iwt=this.Pyt.Pft(),this.aft=null,this.OMt=null,this.RMt=-1,this.mMt=null,this.DC=Jo,this.l1t=Jo,this.Zs=[],this._wt=[],this.Ewt=!1,this.Dwt=null,this.Awt=null,this.zmt=this.df.Ej()?{Umt:i[8][0],Nwt:i[8][1]}:null,-1===i[0]?this.mMt=this.df.oV():(this.aft=this.df.TJ(i[0]),i[2]&&(this.OMt=this.aft.Iht(i[2]),this.RMt=this.aft.eit(i[2])),this.Pyt.v5()&&this.Pyt.v5().ygt()),10===i.length){let s=i[9];for(let t of s)this.Zs.push(Qo.WMt.i2(this,t,this.Zs.length)),this._wt.push(0)}0===this.Zs.length&&(this.Zs=Vo,this._wt=Vo),this.Pyt.sR().Mdt(this)}static i2(t,s,i){return Qo.un(Qo.qmt,t,s,i)}ddt(){for(const t of this.Zs)t.ddt(),t.VMt()&&(this.Ewt=!0);this.vwt?(this.DC=this.Lwt,this.l1t=this.Owt):this.mMt?(this.Rwt(),this.l1t=this.kwt):this.aft.G3().XP()?(this.Pwt(),this.l1t=this.Fwt):this.bb?(this.DC=this.jwt,this.l1t=this.Bwt):(this.DC=this.zwt,this.l1t=this.Uwt)}Rwt(){const t=this.mMt,s=this.mMt;this.Wwt(t,s,this.Qwt)}Pwt(){const t=this.aft.G3(),s=this.aft.b3().wB();this.Wwt(t,s,this.Vwt)}Wwt(t,s,i){const e=this.Syt,h=this.Cwt,n=this.Zs;if(0===n.length){const r=t.wMt(e,s);h?this.DC=function(){return Qo.xor(r(),h)}:this.DC=r}else if(1===n.length){const o=n[0];if(!h&&o.gpt())this.DC=t.Jwt(e,s,o.ei(0));else{const a=t.wMt(e,s);this.DC=function(){return Qo.xor(a(o.ei(0)),h)}}}else if(2===n.length){const l=n[0],u=n[1];if(!h&&l.gpt()&&u.gpt())this.DC=t.Ywt(e,s,l.ei(0),u.ei(0));else{const c=t.wMt(e,s);this.DC=function(){return Qo.xor(c(l.ei(0),u.ei(0)),h)}}}else if(3===n.length){const f=n[0],d=n[1],p=n[2];if(!h&&f.gpt()&&d.gpt()&&p.gpt())this.DC=t.Hwt(e,s,f.ei(0),d.ei(0),p.ei(0));else{const m=t.wMt(e,s);this.DC=function(){return Qo.xor(m(f.ei(0),d.ei(0),p.ei(0)),h)}}}else this.DC=i}$J(){return this.w8}Zpt(){return this.Syt}LF(){return this.aft}EB(){return this.OMt}qwt(){return this.OMt?this.OMt.CB():this.aft?this.aft.G3():null}swt(){const t=this.qwt();return t?t.Zwt():1}nR(){return this.Pyt}Wk(){return this.df}bO(){return this.Kg}Rgt(){return this.bO()}Wpt(){return this.xwt}Xpt(){return this.vwt}Xwt(){return this.Cwt}WB(){return this.Gwt}Zb(){return this.bb}Kwt(){return this.zmt.Umt}$wt(){return!!this.mMt}Dgt(){return this.$wt()||this.aft.G3().XP()}Agt(){for(const t of this.Zs)if(t.JMt())return t.LF();return null}tSt(t){this.zmt.Umt=!!t,this.Pyt.pgt()}sSt(){return this.zmt.Nwt}fmt(){return!this.Kwt()&&!this.df.Qgt()&&!this.sSt()}iSt(){return this.Dwt||(this.Dwt=new Map),this.Dwt}eSt(){return this.Awt||(this.Awt=new Map),this.Awt}Qwt(){const t=this._wt;return e(this.Zs,t),Qo.xor(this.Syt.apply(this.mMt,t),this.Cwt)}*kwt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const s=this._wt;e(this.Zs,s);let t=this.Syt.apply(this.mMt,s);return Qo.Jo(t)&&(t=yield*t),Qo.xor(t,this.Cwt)}return this.DC()}Vwt(){const t=this._wt,s=(e(this.Zs,t),this.aft.b3().wB());return Qo.xor(this.Syt.apply(s,t),this.Cwt)}*Fwt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){let t=this._wt,s=(e(this.Zs,t),this.aft.b3().wB()),i=this.Syt.apply(s,t);return Qo.Jo(i)&&(i=yield*i),Qo.xor(i,this.Cwt)}return this.DC()}Lwt(){return!0}*Owt(){return(this.Kwt()||this.df.Qgt())&&(yield this),!0}hSt(){return this.OMt?2<=this.OMt.CB().Zwt()?this.OMt._B():this.OMt:2<=this.aft.G3().Zwt()?this.aft.w3():this.aft}jwt(){const t=this._wt,s=(e(this.Zs,t),this.Syt.apply(this.hSt(),t));return this.aft.uyt(),s}*Bwt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const s=this._wt;e(this.Zs,s);let t=this.Syt.apply(this.hSt(),s);return Qo.Jo(t)&&(t=yield*t),this.aft.uyt(),t}return this.DC()}zwt(){const i=this.Zs,e=this._wt,t=this.aft.P3();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.VMt()||(e[t]=h.ei(0))}return t.Sft()?this.nSt(t):this.rSt(t)}*Uwt(){return(this.Kwt()||this.df.Qgt())&&(yield this),this.zwt()}oSt(i){const e=this.Zs,h=this._wt;for(let t=0,s=e.length;t<s;++t){const n=e[t];n.VMt()&&(h[t]=n.ei(i))}}nSt(i){const t=this.aft,e=t.VJ(),h=t.NMt(),n=this.RMt,r=0<=n,o=t.R3(),a=this.Ewt,l=this._wt,u=this.Syt,c=this.Cwt,f=this.Iwt&&!this.xwt;i.wft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.oSt(s);let t;if(r){const p=e?d.LF().PMt(h):0;t=u.apply(d.Cht()[n+p].wB(),l)}else t=u.apply(d.wB(),l);Qo.xor(t,c)?i.Gft(d):f&&i.Cft(d)}return t.aSt(!0),i.Ift(!1),t.uyt(),i.Tft()}rSt(t){let s=this.aft,i=s.VJ(),e=s.NMt(),h=s.VF(),n=this.RMt,r=0<=n,o=this.Ewt,a=this._wt,l=this.Syt,u=this.Cwt,c=this.Iwt&&!this.xwt,f=t._ft(),d=t.Eft(),p=c&&!this.Pyt.Egt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.oSt(s);let t;if(r){const S=i?w.LF().PMt(e):0;t=l.apply(w.Cht()[n+S].wB(),a)}else t=l.apply(w.wB(),a);Qo.xor(t,u)?(y=!0,p?(f.push(w),h&&w.lSt()):(m[g]=w,h&&w.uSt(g),++g)):p?(m[g]=w,h&&w.cSt(g),++g):c&&(d.push(w),h)&&w.fSt()}Qo.Ur(m,g),h&&s.dSt(p,g);const M=y;return p&&!y&&(y=this.pSt(f)),s.aSt(M||c),c?y:t.Tft()}pSt(i){const t=this.aft,e=t.VJ(),h=t.NMt(),n=this.Ewt,r=this.RMt,o=0<=r,a=this._wt,l=this.Syt,u=this.Cwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];n&&this.oSt(s);let t;if(o){const f=e?c.LF().PMt(h):0;t=l.apply(c.Cht()[r+f].wB(),a)}else t=l.apply(c.wB(),a);if(Qo.xor(t,u))return!0}return!1}mSt(t,s){return this.Zs[t].ei(s)}Kpt(){const t=this.Zs;if(t.length)return t[0].twt();throw new Error("no parameters")}g7(){if(!this.Dwt||!this.Dwt.size)return null;const s={};for(const[i,e]of this.Dwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].YF(),t[1].YF(),t[2]])),s[i]=t}return{ex:s}}y7(t){if(this.Dwt&&(this.Dwt.clear(),this.Dwt=null),t){const s=this.df,i=t.ex;if(i){const e=this.iSt();e.clear();for(const[h,n]of Object.entries(i)){let t=n;"collmemory"===h&&(t=Qo.un(Qo.ic,n.map(t=>[s.Mk(t[0]),s.Mk(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ei(0)};h;const Yo=self.Ps,Ho=[],qo=function(){},Zo=function*(){};Yo.Xmt=class extends Yo.an{constructor(t,s,i){super();const e=(this.Pyt=t).Wk(),h=(this.df=e,this.Kg=i,this.w8=4<=s.length?s[3]:-1,this.gSt=5<=s.length?255&s[4]:0,this.ySt=5<=s.length?s[4]>>8:0,this.Syt=null,this.aft=null,this.OMt=null,this.RMt=-1,this.mMt=null,this.MSt="",this.wSt=null,this.SSt=null,this.DC=qo,this.l1t=qo,this.Zs=[],this._wt=[],this.Ewt=!1,this.Dwt=null,this.Awt=null,-3===s[0]),n=h?s[2]:s[5];if(this.zmt=e.Ej()||h?{Umt:n[0],Nwt:n[1],index:n[2]}:null,-1===s[0])this.mMt=e.oV(),this.Syt=e.wyt(s[1]);else if(-2===s[0])this.MSt=s[1];else if(h){const r=e.wyt(s[1]);this.Syt=r,this.DC=this.TSt,this.l1t=this.bSt,this.ySt|=8}else this.aft=e.TJ(s[0]),4&this.ySt?(this.MSt=s[1],this.wSt=e.TJ(s[2])):(s[2]&&(this.OMt=this.aft.Iht(s[2]),this.RMt=this.aft.eit(s[2])),this.Syt=e.wyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Zs.push(Yo.WMt.i2(this,a,this.Zs.length)),this._wt.push(0)}0===this.Zs.length&&(this.Zs=Ho,this._wt=Ho),this.xSt()&&(this.Pyt.hgt(),this.Pyt.ygt()),this.Pyt.sR().wdt(this)}static i2(t,s,i){return Yo.un(Yo.Xmt,t,s,i)}ddt(){for(const t of this.Zs)t.ddt(),t.VMt()&&(this.Ewt=!0);if(this.mMt)this.Rwt(),this.l1t=this.kwt;else if(this.MSt)4&this.ySt?this.vSt():this.GSt(),this.MSt="",this.wSt=null;else if(this.DC===this.TSt){const s=this.Syt,i=this.df.sR().kdt(this.Pyt);this.Syt=s.bind(null,this.df.qP(),i)}else this.OMt?this.Hgt()?(this.DC=this.CSt,this.l1t=this.ISt):(this.DC=this._St,this.l1t=this.ESt):this.aft.G3().XP()?(this.Pwt(),this.l1t=this.Fwt):this.Zb()?(this.DC=this.DSt,this.l1t=this.ASt):this.Hgt()?(this.DC=this.NSt,this.l1t=this.LSt):this.OSt()?(this.DC=this.RSt,this.l1t=this.kSt):this.Zs.length?this.Zs.every(t=>t.VMt())?(this.DC=this.PSt,this.l1t=this.FSt):this.Ewt?(this.DC=this.jSt,this.l1t=this.BSt):this.Zs.every(t=>t.gpt())?(h(this.Zs,this._wt),this.DC=this.zSt,this.l1t=this.USt):(this.DC=this.WSt,this.l1t=this.QSt):(this.DC=this.zSt,this.l1t=this.USt)}Rwt(){const t=this.mMt,s=this.mMt;this.Wwt(t,s,this.Qwt)}Pwt(){const t=this.aft.G3(),s=this.aft.b3().wB();this.Wwt(t,s,this.Vwt)}GSt(){const t=this.Pyt.sR(),i=t.iR(this.MSt);if(i.tc()){const e=0!=(2&this.ySt);this.SSt=i.nR();let s=[...new Set([...this.Pyt.rR(),...this.SSt.rR()])];s=t.vdt(s);const h=!i.uR()&&this.VSt()?{dyt:!0}:null;if(this.DC=Yo.zpt.prototype.oyt.bind(this.SSt,s,this.Zs,e,h),this.df.Ej()){const n=this;this.l1t=function*(){(n.Kwt()||n.df.Qgt())&&(yield n);const t=yield*n.SSt.gyt(s,n.Zs,e,h);return t}}else this.l1t=Zo}else this.DC=qo,this.l1t=Zo}vSt(){const n=this.Pyt.sR(),r=n.Wdt(this.wSt,this.MSt);if(r.tc()){const o=0!=(2&this.ySt);this.SSt=r.nR();let s=[...new Set([...this.Pyt.rR(),...this.SSt.rR(),this.aft,r.LF()])],t=(s=n.vdt(s),!this.aft.VJ()&&!r.LF().VJ()),i=!this.aft.VJ()&&r.LF().VJ(),e=this.aft.VJ(),h=null;if(!r.uR()&&this.VSt()&&((h=h||{}).dyt=!0),!i&&o||((h=h||{}).ayt=this.aft,h.lyt=r.LF()),t||i||e&&!r.Jyt()?this.DC=Yo.zpt.prototype.oyt.bind(this.SSt,s,this.Zs,o,h):e&&(this.DC=Yo.bpt.prototype.Zyt.bind(r,s,this.Zs)),this.df.Ej()){const a=this;t||i||e&&!r.Jyt()?this.l1t=function*(){(a.Kwt()||a.df.Qgt())&&(yield a);const t=yield*a.SSt.gyt(s,a.Zs,o,h);return t}:e&&(this.l1t=function*(){(a.Kwt()||a.df.Qgt())&&(yield a);const t=yield*r.Kyt(s,a.Zs);return t})}else this.l1t=Zo}else this.DC=qo,this.l1t=Zo}Wwt(t,s,i){const e=this.Syt,h=this.Zs;if(0===h.length)this.DC=t.wMt(e,s);else if(1===h.length){const n=h[0];if(n.gpt())this.DC=t.Jwt(e,s,n.ei(0));else{const r=t.wMt(e,s);this.DC=function(){return r(n.ei(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.gpt()&&a.gpt())this.DC=t.Ywt(e,s,o.ei(0),a.ei(0));else{const l=t.wMt(e,s);this.DC=function(){return l(o.ei(0),a.ei(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.gpt()&&c.gpt()&&f.gpt())this.DC=t.Hwt(e,s,u.ei(0),c.ei(0),f.ei(0));else{const d=t.wMt(e,s);this.DC=function(){return d(u.ei(0),c.ei(0),f.ei(0))}}}else this.DC=i}$J(){return this.w8}Hgt(){return 0!=(8&this.ySt)}Ygt(){return 0!=(16&this.ySt)}OSt(){return 1===this.gSt}Zb(){return 2===this.gSt}xSt(){return 0!=(1&this.ySt)}ogt(){return this.Hgt()||this.Ygt()}LF(){return this.aft}qwt(){return this.OMt?this.OMt.CB():this.aft?this.aft.G3():null}swt(){const t=this.qwt();return t?t.Zwt():1}nR(){return this.Pyt}VSt(){let t=this.Pyt;do{if(t instanceof Yo.bpt&&t.uR())return!0}while(t=t.Odt());return!1}Wk(){return this.df}bO(){return this.Kg}Rgt(){return this.zmt.index}Kwt(){return this.zmt.Umt}tSt(t){this.zmt.Umt=!!t,this.Pyt.pgt()}sSt(){return this.zmt.Nwt}fmt(){return!this.Kwt()&&!this.df.Qgt()&&!this.sSt()}iSt(){return this.Dwt||(this.Dwt=new Map),this.Dwt}eSt(){return this.Awt||(this.Awt=new Map),this.Awt}Qwt(){const t=this._wt;return h(this.Zs,t),this.Syt.apply(this.mMt,t)}*kwt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const t=this._wt,s=(h(this.Zs,t),yield*this.Syt.apply(this.mMt,t));return s}return this.DC()}Vwt(){const t=this._wt;return h(this.Zs,t),this.Syt.apply(this.aft.b3().wB(),t)}*Fwt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const t=this._wt,s=(h(this.Zs,t),yield*this.Syt.apply(this.aft.b3().wB(),t));return s}return this.DC()}zSt(){const i=this._wt,e=this.aft.P3().R3();for(let t=0,s=e.length;t<s;++t)this.Syt.apply(e[t].wB(),i)}*USt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const i=this._wt,e=this.aft.P3().R3();for(let t=0,s=e.length;t<s;++t)yield*this.Syt.apply(e[t].wB(),i)}else this.zSt()}WSt(){const i=this._wt,e=(h(this.Zs,i),this.aft.P3().R3());for(let t=0,s=e.length;t<s;++t)this.Syt.apply(e[t].wB(),i)}*QSt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const i=this._wt,e=(h(this.Zs,i),this.aft.P3().R3());for(let t=0,s=e.length;t<s;++t)yield*this.Syt.apply(e[t].wB(),i)}else this.WSt()}PSt(){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(r.wB(),h)}}*FSt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3();for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(r.wB(),h)}}else this.PSt()}jSt(){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.VMt()||(h[t]=i.ei(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.VMt()&&(h[t]=o.ei(i))}s.apply(r.wB(),h)}}*BSt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.VMt()||(h[t]=i.ei(0))}for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.VMt()&&(h[t]=o.ei(i))}yield*s.apply(r.wB(),h)}}else this.jSt()}RSt(){const e=this.Zs,h=this._wt,s=this.Syt,t=this.aft,i=t.JSt(),n=t.P3().R3();i.YSt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);s.apply(r.wB(),h)}i.HSt(s)}*kSt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const e=this.Zs,h=this._wt,s=this.Syt,t=this.aft,i=t.JSt(),n=t.P3().R3();i.YSt(s);for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);yield*s.apply(r.wB(),h)}i.HSt(s)}else this.RSt()}qSt(){return this.OMt?2<=this.OMt.CB().Zwt()?this.OMt._B():this.OMt:2<=this.aft.G3().Zwt()?this.aft.w3():this.aft}DSt(){const t=this._wt;return h(this.Zs,t),this.Syt.apply(this.qSt(),t)}*ASt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const s=this._wt;h(this.Zs,s);let t=this.Syt.apply(this.qSt(),s);return Yo.Jo(t)?yield*t:t}return this.DSt()}_St(){const t=this.aft,s=t.VJ(),e=t.NMt(),h=this.Zs,n=this.Ewt,r=this._wt,o=this.Syt,a=this.RMt,l=t.P3().R3();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.VMt()||(r[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.VMt()&&(r[t]=f.ei(i))}const c=s?u.LF().PMt(e):0;o.apply(u.Cht()[a+c].wB(),r)}}*ESt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const t=this.aft,s=t.VJ(),e=t.NMt(),h=this.Zs,n=this.Ewt,r=this._wt,o=this.Syt,a=this.RMt,l=t.P3().R3();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.VMt()||(r[t]=i.ei(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(n)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.VMt()&&(r[t]=f.ei(i))}const c=s?u.LF().PMt(e):0;yield*o.apply(u.Cht()[a+c].wB(),r)}}else this._St()}NSt(){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);r.push(s.apply(o.wB(),h))}return Promise.all(r)}*LSt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const e=this.Zs,h=this._wt,s=this.Syt,n=this.aft.P3().R3(),r=[];for(let i=0,t=n.length;i<t;++i){const o=n[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ei(i);r.push(yield*s.apply(o.wB(),h))}return Promise.all(r)}return this.NSt()}CSt(){const t=this.aft,s=t.VJ(),e=t.NMt(),h=this.Zs,n=this._wt,r=this.Syt,o=this.RMt,a=t.P3().R3(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].ei(i);const c=s?u.LF().PMt(e):0;l.push(r.apply(u.Cht()[o+c].wB(),n))}return Promise.all(l)}*ISt(){if((this.Kwt()||this.df.Qgt())&&(yield this),this.sSt()){const t=this.aft,s=t.VJ(),e=t.NMt(),h=this.Zs,n=this._wt,r=this.Syt,o=this.RMt,a=t.P3().R3(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)n[t]=h[t].ei(i);const c=s?u.LF().PMt(e):0;l.push(yield*r.apply(u.Cht()[o+c].wB(),n))}return Promise.all(l)}return this.CSt()}async TSt(){try{await this.Syt()}catch(t){console.error(`Unhandled exception running script %c${this.Pyt.f9().ef()}, event ${this.Pyt.Sgt()}, action ${this.Rgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Yo.qpt.byt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Yo.qpt.xyt())}}*bSt(){return(this.Kwt()||this.df.Qgt())&&(yield this),this.TSt()}g7(){return this.Dwt&&this.Dwt.size?{ex:Yo.Wo(this.Dwt)}:null}y7(t){if(this.Dwt&&(this.Dwt.clear(),this.Dwt=null),t){const s=t.ex;s&&(this.Dwt=Yo.Qo(s))}}}}{let d=function(t){return t instanceof o?M.y4(t):t.Yz()},u=function(t){return d(t).xk()},h=function(t){return M.y4(t)},m=function(t){return t instanceof a?M.y4(t):t},s=function(t){return t instanceof c?M.y4(t):t},_=function(t,s,i,e){const h=s.YF(),n=i.YF();h<n?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.YF(),h=i.YF();e<h?t.rc(s,i):t.rc(i,s)},D=function(t,s){t.oc(s)},A=function(t,s,i){const e=s.YF(),h=i.YF();return e<h?t.ei(s,i):t.ei(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.xk(),r=M.EO(),o=M._dt(),a=o.nR().Pft(),l=o.LF(),u=o.Xwt(),c=s.P3(),f=l!==s;C=s,G=f&&!u;let d,p=0,m=0,g=I=!1;c.Sft()?(w.I(n.h5()),w.offset(i,e),r.ZSt(n.vk(),s,w,S),d=S):!a||M.XSt()&&!c.Eft().length&&c._ft().length?d=c._ft():(d=c.Eft(),I=!0),h&&(p=n.pT(),m=n.yT(),n.t5(i,e),n.Zj());for(const y of d)if(r.uP(t,y)){if(g=!0,u)break;f&&O.add(y)}return h&&(n.Xj(p,m),n.Zj()),N.Wr(S),g},i=function(t){const s=M.oR().Pft(),i=C.P3(),e=i._ft(),h=i.Eft();i.Sft()?(i.Nft(O),s&&(N.Wr(h),i.Lft(O,C.R3()))):s?I?i.Oft(O):(i.Lft(O,e),i.Nft(O)):i.Nft(O),C.uyt()},T=function(t,s){G&&(s&&i(),O.clear(),C=null,G=!1)},n=function(t,s){const i=M.Mk(s);if(i){const e=t.P3();if(e.Sft()||e._ft().includes(i))if(t.VJ()){if(i.LF().KSt(t))return e.kft(i),t.uyt(),!0}else if(i.LF()===t)return e.kft(i),t.uyt(),!0}return!1},r=function(t,h){const n=t.P3();if(n.Sft()){n.Ift(!1),n.wft();const i=t.R3();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.YF()===h?n.Cft(e):n.Gft(e)}return t.uyt(),!!n._ft().length}{let i=n._ft(),e=0;for(let t=0,s=i.length;t<s;++t){const r=i[t];(i[e]=r).YF()===h?n.Cft(r):++e}return N.Ur(i,e),t.uyt(),!!i.length}},N=(d,u,h,m,s,_,E,D,A,e,i,T,n,r,self.Ps),l=new N.Ho,b={},x={},v={},M=null,o=(N.$St=function(t){M=t},self.AF),a=self.x3,c=self.g4,w=(x.tTt=function(t,s){return N.compare(this.xk().pT(),t,s)},v.tTt=function(t,s){return N.compare(this.x,t,s)},x.sTt=function(t,s){return N.compare(this.xk().yT(),t,s)},v.sTt=function(t,s){return N.compare(this.y,t,s)},x.iTt=function(){return this.xk().a5()},v.iTt=function(){return this.o5()},b.eTt=function(){const t=u(this),s=t.hk(),i=t.h5();return i._l()<0||i.El()<0||i.Cl()>s.pm()||i.Il()>s.Cm()},b.hTt=function(i,e,h){const t=m(this),s=t.P3(),n=s.R3();if(!n.length)return!1;let r=n[0],o=r.xk(),a=r,l=N.vn(o.pT(),o.yT(),e,h);for(let t=1,s=n.length;t<s;++t){r=n[t],o=r.xk();const u=N.vn(o.pT(),o.yT(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=r)}return s.kft(a),!0},x.mT=function(t){const s=this.xk();s.pT()!==t&&(s.mT(t),s.Zj())},v.mT=function(t){this.x=+t},x.MT=function(t){const s=this.xk();s.yT()!==t&&(s.MT(t),s.Zj())},v.MT=function(t){this.y=+t},x.nTt=function(t,s){const i=this.xk();i.rTt(t,s)||(i.Xj(t,s),i.Zj())},v.nTt=function(t,s){this.setPosition(t,s)},b.oTt=function(t,s){if(t=m(t)){const i=d(this),e=t.L3(i);if(e){const[h,n]=e.aTt(s),r=i.xk();r.pT()===h&&r.yT()===n||(r.Xj(h,n),r.Zj())}}},b.lTt=function(t){if(0!==t){const s=u(this);s.t5(s.uTt()*t,s.cTt()*t),s.Zj()}},x.fTt=function(t,s){if(0!==s){const i=this.xk();t=N.wn(t),i.t5(Math.cos(t)*s,Math.sin(t)*s),i.Zj()}},v.fTt=function(t,s){0!==s&&(t=N.wn(t),this.$j(Math.cos(t)*s,Math.sin(t)*s))},x.pT=function(){return this.xk().pT()},v.pT=function(){return this.x},x.yT=function(){return this.xk().yT()},v.yT=function(){return this.y},b.xR=function(){return M.xR(d(this))},x.dTt=function(t,s){return N.compare(this.xk().pm(),t,s)},v.dTt=function(t,s){return N.compare(this.width,t,s)},x.pTt=function(t,s){return N.compare(this.xk().Cm(),t,s)},v.pTt=function(t,s){return N.compare(this.height,t,s)},x.xm=function(t){const s=this.xk();s.pm()!==t&&(s.xm(t),s.Zj())},v.xm=function(t){this.width=t},x.gm=function(t){const s=this.xk();s.Cm()!==t&&(s.gm(t),s.Zj())},v.gm=function(t){this.height=t},x.t_=function(t,s){const i=u(this);i.pm()===t&&i.Cm()===s||(i.t_(t,s),i.Zj())},v.t_=function(t,s){this.K3(t,s)},x.pm=function(){return this.xk().pm()},v.pm=function(){return this.width},x.Cm=function(){return this.xk().Cm()},v.Cm=function(){return this.height},b.mTt=function(){return u(this).h5().Cl()},b.gTt=function(){return u(this).h5().Il()},b.yTt=function(){return u(this).h5()._l()},b.MTt=function(){return u(this).h5().El()},b.wTt=function(){const t=u(this).h5();return(t.Cl()+t._l())/2},b.STt=function(){const t=u(this).h5();return(t.Il()+t.El())/2},b.TTt=function(t,s){return N.Cn(u(this).e4(),N.wn(s))<=N.wn(t)},b.bTt=function(t){return N._n(u(this).e4(),N.wn(t))},b.xTt=function(t,s){const i=N.wn(t),e=N.wn(s),h=u(this).e4(),n=!N._n(e,i);return n?!(!N._n(h,i)&&N._n(h,e)):N._n(h,i)&&!N._n(h,e)},x.i4=function(t){const s=this.xk(),i=N.Mn(N.wn(t));isNaN(i)||s.e4()===i||(s.i4(i),s.Zj())},v.i4=function(t){this.e5=t},b.vTt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.i4(s.e4()+N.wn(t)),s.Zj()}},b.GTt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.i4(s.e4()-N.wn(t)),s.Zj()}},b.CTt=function(t,s){const i=u(this),e=i.e4(),h=N.In(e,N.wn(s),N.wn(t));isNaN(h)||e===h||(i.i4(h),i.Zj())},b.ITt=function(t,s,i){const e=u(this),h=e.e4(),n=s-e.pT(),r=i-e.yT(),o=Math.atan2(r,n),a=N.In(h,o,N.wn(t));isNaN(a)||h===a||(e.i4(a),e.Zj())},b._Tt=function(t,s){const i=u(this),e=i.e4(),h=t-i.pT(),n=s-i.yT(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.i4(r),i.Zj())},x.e4=function(){return N.Sn(this.xk().e4())},v.e4=function(){return this.e5},b.ETt=function(t,s){return N.compare(N.Un(100*u(this).DD(),6),t,s)},x.W4=function(){return this.xk().W4()},v.W4=function(){return this.isVisible},b.z4=function(t){const s=u(this);t=2===t?!s.W4():0!==t,s.W4()!==t&&(s.z4(t),M.Dk())},b.ND=function(t){const s=N.yn(t/100,0,1),i=u(this);if(i.K5()){if(i.$nt().DTt()===s)return}else if(i.DD()===s)return;i.ND(s),M.Dk()},b.ATt=function(t){l.Ca(t);const s=u(this);s.u5().ya(l)||(s.c5(l),M.Dk())},b.OD=function(){const t=u(this).u5();return N.Vn(t.ua(),t.ca(),t.fa(),t.da())},b.DD=function(){return N.Un(100*u(this).DD(),6)},b.NTt=function(t){return!!(t=s(t))&&u(this).vk()===t},b.LTt=function(i){const t=m(this),s=t.P3(),e=s.R3();if(!e.length)return!1;let h=e[0],n=h;for(let t=1,s=e.length;t<s;++t){const r=e[t],o=r.xk(),a=n.xk(),l=o.vk().bO(),u=a.vk().bO();0===i?(u<l||l===u&&o.Gk()>a.Gk())&&(n=r):(l<u||l===u&&o.Gk()<a.Gk())&&(n=r)}return s.kft(n),!0},x.OTt=function(t,s,i){const e=this.xk(),h=0===t?e.wT():e.i5();return N.compare(h,s,i)},v.OTt=function(t,s,i){const e=0===t?this.oF:this.s5;return N.compare(e,s,i)},x.RTt=function(){this.xk().d5()},v.RTt=function(){this.f5()},x.kTt=function(){this.xk().m5()},v.kTt=function(){this.p5()},b.PTt=function(t){(t=s(t))&&u(this).y5(t)},b.FTt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.jTt(e);h&&e.xk().w5(h,i)}},x.ST=function(t){const s=this.xk();s.wT()!==t&&(s.ST(t),M.Dk())},v.ST=function(t){this.oF=t},b.BTt=function(){return u(this).vk().bO()},b.zTt=function(){return u(this).vk().ef()},x.UTt=function(){return this.xk().Gk()},v.UTt=function(){return this.zIndex},x.WTt=function(){return this.xk().wT()},v.WTt=function(){return this.oF},x.QTt=function(){return this.xk().i5()},v.QTt=function(){return this.s5},b.VTt=function(t){const s=d(this),i=s.LF().q3().Eht(t);if(i){const e=i.bO(),h=s.xk().Hj();return h.RB(e)}},b.JTt=function(t,s){const i=d(this),e=i.LF().q3().Eht(s);if(e){const h=e.bO(),n=1===t,r=i.xk().Hj();r.RB(h)!==n&&(r.kB(h,n),r.PB(),M.Dk())}},b.YTt=function(t,s,i){const e=d(this),h=e.LF().q3().Eht(t);if(h){s=Math.floor(s);const n=h.lv().cv(s);if(n){"color"===n?(l.Ca(i),i=l):"percent"===n&&(i/=100);const r=h.bO(),o=e.xk().Hj(),a=o.BB(r,s,i);a&&o.RB(r)&&M.Dk()}}},N.un(N.Rect)),L=[],S=[],G=!1,C=null,I=!1,O=new Set;b.HTt=function(y){const t=m(this),M=(y=m(y),t.Wk());if(M.qTt())return function*(M){if(M){let t=this.Wk(),s=t.EO(),e=t.sR(),i=e.pR(),h=e._dt(),n=h.LF(),r=h.iSt(),o=h.eSt(),a=i.B6(),l=t.Itt(),u=l-1,c=a.oR(),f=i.z6(c),d=r.get("collmemory"),p=(d||(d=N.un(N.ic),r.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Jf().addEventListener("instancedestroy",t=>D(d,t.DB))),n.P3()),m=M.P3(),g=p.R3(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Sft()?(s.ZSt(w.xk().vk(),M,w.xk().h5(),L),y=L,s.ZTt(w,M,y)):y=m.R3();for(let t=0;t<y.length;++t){const S=y[t];if(s.uP(w,S)||s.XTt(w,S)){let t=A(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<u;if(_(d,w,S,l),T){const b=c.j6(),x=(e.J6(b),n.P3()),v=M.P3();if(x.Ift(!1),v.Ift(!1),n===M){const G=x._ft();N.Wr(G),G.push(w),G.push(S),n.uyt()}else{const C=x._ft(),I=v._ft();N.Wr(C),N.Wr(I),C.push(w),I.push(S),n.uyt(),M.uyt()}yield*c.syt(a,f),e.H6(b)}}else E(d,w,S)}N.Wr(L)}i.K6()}return!1}.call(t,y);if(y){let s=M.EO(),e=M.sR(),t=e.pR(),i=e._dt(),h=i.LF(),n=i.iSt(),r=i.eSt(),o=t.B6(),a=M.Itt(),l=a-1,u=o.oR(),c=t.z6(u),f=n.get("collmemory"),d=(f||(f=N.un(N.ic),n.set("collmemory",f)),r.get("collisionCreatedDestroyCallback")||(r.set("collisionCreatedDestroyCallback",!0),M.Jf().addEventListener("instancedestroy",t=>D(f,t.DB))),h.P3()),p=y.P3(),m=d.R3(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.Sft()?(s.ZSt(w.xk().vk(),y,w.xk().h5(),L),g=L,s.ZTt(w,y,g)):g=p.R3();for(let t=0;t<g.length;++t){const S=g[t];if(s.uP(w,S)||s.XTt(w,S)){let t=A(f,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(_(f,w,S,a),T){const b=u.j6(),x=(e.J6(b),h.P3()),v=y.P3();if(x.Ift(!1),v.Ift(!1),h===y){const G=x._ft();N.Wr(G),G.push(w),G.push(S),h.uyt()}else{const C=x._ft(),I=v._ft();N.Wr(C),N.Wr(I),C.push(w),I.push(S),h.uyt(),y.uyt()}u.Y6(o,c),e.H6(b)}}else E(f,w,S)}N.Wr(L)}t.K6()}return!1},b.KTt=function(t){return t=m(t),e(d(this),t,0,0)},b.$Tt=function(t,s,i){return t=m(t),e(d(this),t,s,i)},b.tbt=function(){return!0},b.P5=function(){return u(this).P5()},b.S7=function(){return u(this).S7()},b.sbt=function(i,e){const t=m(this),s=(i=m(i),t.Wk()),h=this.P3(),n=h.R3();if(0===n.length)return!1;let r=i.P3(),o=r.R3();if(r.Sft()){const u=[...s.ibt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=r.Sft()?null:new Set(o),l=new Set;for(let t=0,s=n.length;t<s;++t){const c=n[t];if(1===e)for(const f of c.I5())f.ebt(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.v5()))continue}else t=c.C5();t.ebt(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(r.Nft(l),i.uyt(),!0)},b.hbt=function(i,e){const t=m(this),s=(i=m(i),t.Wk()),h=t.P3(),n=h.R3();if(0===n.length)return!1;let r=i.P3(),o=r.R3();if(r.Sft()){const u=[...s.ibt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=r.Sft()?null:new Set(o),l=new Set;for(let t=0,s=n.length;t<s;++t){const c=n[t];2!==e||c.S7()||!c.ebt(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.N5())2===e&&f.S7()||f.ebt(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(r.Nft(l),i.uyt(),!0)},b.nbt=function(i,e,h){const t=m(this),s=(i=m(i),t.Wk()),n=t.P3(),r=n.R3();if(0===r.length)return!1;let o=i.P3(),a=o.R3();if(o.Sft()){const c=[...s.ibt(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.Sft()?null:new Set(a),u=[];for(let t=0,s=r.length;t<s;++t){const f=r[t];if(0===e){const d=f.A5(h);null!==d&&d.ebt(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.ebt(i)){if(0===h){null!==l&&!l.has(p)||u.push(p);break}--h}}return 0!==u.length&&(o.Aft(u),i.uyt(),!0)},b.rbt=function(t,s,i){const e=d(this);switch(t){case 0:default:return N.compare(e.E5(),s,i);case 1:return N.compare(e.obt(),s,i)}},b.O5=function(t,s,i,e,h,n,r,o,a,l){t=m(t);const u=d(this),c=M.Ddt().LF();for(const f of t.abt(u,c)){if(!f.G3().l3())return;u.O5(f,{j5:s,z5:i,W5:e,V5:h,Y5:n,X5:r,q5:o,tB:a,iB:l})}},b.R5=function(t){t=m(t);const s=d(this),i=M.Ddt().LF();for(const e of t.abt(s,i))s.R5(e)},b.lbt=function(){const t=d(this);if(t.P5()){const s=t.v5();s.R5(t)}},b.ubt=function(){const t=d(this).v5();return t?t.YF():-1},b.cbt=function(){return d(this).E5()},b.fbt=function(){return d(this).obt()},b.dbt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.oB(),i.Zj()):i.nB(t,s)},b.lB=function(t,s,i,e,h,n,r,o){const a=u(this),l=a.lB(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,oF:n,u:r,v:o});l&&a.Zj()},b.pbt=function(){const t=u(this);return t.cB()?t.fB().WT():0},b.mbt=function(){const t=u(this);return t.cB()?t.fB().QT():0},b.gbt=function(t){const s=u(this);t=2===t?!s.W4():0!==t,s.W4()!==t&&s.z4(t)},b.xB=function(t,s){this instanceof self.AF?this.e6(t,s):this.xB(t,s)},b.ybt=function(t,s){this instanceof self.AF?this.h6(t,""+s):this.ybt(t,""+s)},b.Mbt=function(t){this instanceof self.AF?this.n6(t):this.Mbt(t)},b.wbt=function(){this instanceof self.AF?this.t6():this.SB()},b.Sbt=function(){this instanceof self.AF?this.s6():this.TB()},b.Tbt=function(){return this instanceof self.AF?this.i6():this.Tbt()},b.bbt=function(t){this instanceof self.AF?this._setEnabled(0!==t):this.xbt(0!==t)},b.vbt=function(){return this instanceof self.AF?this._yt():this.Gbt()},x.Cbt=function(t,s,i){return N.compare(this.Yz().Unt(t),s,i)},v.Cbt=function(t,s,i){return N.compare(h(this).Unt(t),s,i)},x.Ibt=function(t){return!!this.Yz().Unt(t)},v.Ibt=function(t){return!!h(this).Unt(t)},b._bt=function(i,e){const h=m(this),t=h.P3(),n=t.R3();if(!n.length)return!1;let r=h.VJ(),o=null,a=0;for(let t=0,s=n.length;t<s;++t){const l=n[t],u=r?l.LF().AMt(h.NMt()):0,c=l.Unt(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.kft(o),!0},b.Ebt=function(t){const s=m(this);return(s.Wk()._dt().Xwt()?r:n)(s,t)},b._z=function(t){const s=new Set(N.ao(t)),i=d(this).ij();return s.isSubsetOf(i)},b.Dbt=function(){return d(this).Abt()},b.Nbt=function(){return d(this).ij().size},b.Lbt=function(t){return d(this).Obt(t)},b.Rbt=function(t,s){const i=N.ao(s);if(0!==i.length){const e=d(this),h=new Set(e.ij());if(0===t)for(const n of i)h.add(n);else if(1===t)for(const r of i)h.delete(r);e.hj(h)}},b.kbt=function(){M.BF(d(this))},b.Pbt=function(){return!0},b.Fbt=function(){return!0},x.jbt=function(t,s){this.Yz().Wnt(t,s)},v.jbt=function(t,s){h(this).Wnt(t,s)},x.Bbt=function(t,s){const i=this.Yz(),e=i.Unt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Wnt(t,e+s)},v.Bbt=function(t,s){const i=h(this),e=i.Unt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Wnt(t,e+s)},x.zbt=function(t,s){const i=this.Yz(),e=i.Unt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Wnt(t,e-s))},v.zbt=function(t,s){const i=h(this),e=i.Unt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Wnt(t,e-s))},x.Ubt=function(t,s){this.Yz().Wnt(t,s?1:0)},v.Ubt=function(t,s){h(this).Wnt(t,s?1:0)},x.Wbt=function(t){const s=this.Yz();s.Wnt(t,0===s.Unt(t)?1:0)},v.Wbt=function(t){const s=h(this);s.Wnt(t,0===s.Unt(t)?1:0)},b.Qbt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.Vbt(),i.LZ("state"),i._T(s,"state"),M.Jbt("state",{Ybt:!0})},b.Hbt=function(){return JSON.stringify(d(this).IT("state"))},b.qbt=function(){return d(this).LF().ef()},b.Zbt=function(){let t=M.Idt().d0t(),s=t.j3();for(const i of M.ibt(t))++s;return s},b.Xbt=function(){return M.Idt().d0t().P3().R3().length},x.qF=function(){return this.Yz().qF()},v.qF=function(){return h(this).qF()},x.YF=function(){return this.Yz().YF()},v.YF=function(){return h(this).YF()},b.$1t=function(t){const s=d(this);return t.toLowerCase()===M.sR().ept(s)},b.rj=function(t){const s=d(this);M.sR().rj(s,t)},b.Kbt=function(t){const s=m(this);return M.sR().E1t().$bt(s.P3().R3(),t),!0},b.txt=function(){return d(this).XF()},N.sxt=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.rq,M=s.qht,w=s.Zht,S=Object.assign({},b,2<=i?v:x);h&&(y.tTt=S.tTt,y.sTt=S.sTt,y.iTt=S.iTt,y.eTt=S.eTt,y.hTt=S.hTt,M.mT=S.mT,M.MT=S.MT,M.nTt=S.nTt,M.oTt=S.oTt,M.lTt=S.lTt,M.fTt=S.fTt,w.ixt=S.pT,w.hxt=S.yT,w.bR=S.xR),n&&(y.dTt=S.dTt,y.pTt=S.pTt,M.xm=S.xm,M.gm=S.gm,M.t_=S.t_,w.nxt=S.pm,w.rxt=S.Cm,w.oxt=S.mTt,w.axt=S.gTt,w.lxt=S.yTt,w.uxt=S.MTt,w.cxt=S.wTt,w.fxt=S.STt),r&&(y.dxt=S.TTt,y.pxt=S.bTt,y.xTt=S.xTt,M.i4=S.i4,M.vTt=S.vTt,M.GTt=S.GTt,M.CTt=S.CTt,M.ITt=S.ITt,M._Tt=S._Tt,w.mxt=S.e4),o&&(y.W4=S.W4,y.ETt=S.ETt,M.z4=S.z4,M.ND=S.ND,M.ATt=S.ATt,w.Opacity=S.DD,w.gxt=S.OD),a&&(y.NTt=S.NTt,y.LTt=S.LTt,y.OTt=S.OTt,M.RTt=S.RTt,M.kTt=S.kTt,M.PTt=S.PTt,M.FTt=S.FTt,M.ST=S.ST,w.BTt=S.BTt,w.zTt=S.zTt,w.UTt=S.UTt,w.WTt=S.WTt,w.QTt=S.QTt),l&&(y.VTt=S.VTt,M.JTt=S.JTt,M.YTt=S.YTt),d&&(y.tbt=S.tbt,y.P5=S.P5,y.S7=S.S7,y.sbt=S.sbt,y.hbt=S.hbt,y.nbt=S.nbt,y.rbt=S.rbt,M.O5=S.O5,M.R5=S.R5,M.lbt=S.lbt,w.ubt=S.ubt,w.cbt=S.cbt,w.fbt=S.fbt),p&&(M.dbt=S.dbt,M.lB=S.lB,w.pbt=S.pbt,w.mbt=S.mbt),u&&(y.W4=S.W4,M.z4=S.gbt,M.yxt=S.xB,M.Mxt=S.ybt,M.wxt=S.Mbt),c&&(y.Sxt=S.Tbt,M.Txt=S.wbt,M.bxt=S.Sbt),f&&(y.tc=S.vbt,M.xxt=S.bbt),m&&(y.HTt=S.HTt,y.KTt=S.KTt,y.$Tt=S.$Tt,s.vxt=T),e||(y.Cbt=S.Cbt,y.Ibt=S.Ibt,y._bt=S._bt,y.Ebt=S.Ebt,y._z=S._z,M.jbt=S.jbt,M.Bbt=S.Bbt,M.zbt=S.zbt,M.Ubt=S.Ubt,M.Wbt=S.Wbt,M.Rbt=S.Rbt,y.Pbt=S.Pbt,y.Fbt=S.Fbt,M.kbt=S.kbt,M.Qbt||(M.Qbt=S.Qbt),w.Hbt||(w.Hbt=S.Hbt),w.Zbt=S.Zbt,w.Xbt=S.Xbt,w.Gxt=S.qF,w.Cxt=S.YF,w.qbt=S.qbt,w.Dbt=S.Dbt,w.Nbt=S.Nbt,w.Lbt=S.Lbt,y.$1t=S.$1t,M.rj=S.rj,M.Kbt=S.Kbt),g&&(w.txt=S.txt)}}{const Xo=self.Ps;Xo.D1t=class extends Xo.an{constructor(t){super(),this.jft=t,this.Tf="",this.sL=-1,this.Ixt="",this._xt=!1,this.Ext=null,this.Hft=0,this.bmt=[],this.t0t=null,this.Dxt=new Map,this.Axt=null,this.Nxt=null,this.Lxt=-1,this.Iyt=null,this.Oxt=null,this.Rxt=!1}cn(){this.Tf="",this.sL=-1,this.Ixt="",this.Ext=null,this.Nxt=null,this.Iyt=null,this.Oxt=null,this.Lxt=-1,Xo.Wr(this.bmt),this.t0t&&(this.t0t.clear(),this.t0t=null);for(const t of this.Dxt.values())t.cn();this.Dxt.clear(),this.Axt=null}dT(){const t=this.jft,s=t.Wk().QJ(),i=t.Idt(),e=(this.Ext=i.oR(),this.Hft=i.r0t()+1,t.Tpt(this.Ext));e&&(this.Nxt=e,this.Iyt=e.Qyt(),this.Oxt=e.Wyt().map(t=>t.Tet()),e.Hgt())&&(this.Lxt=e.Hyt());for(const n of s){const r=n.P3();r.Sft()&&!this.Ext.Mgt(n)||(this.bmt.push(n),this.Dxt.set(n,Xo.un(Xo.kxt,r)))}const h=t.aR();this.t0t=0<h.size?h:null}Pxt(t){this.Tf="timer",this.dT(),this.sL=this.jft.Wk().CR()+t}Fxt(t){this.Tf="walltimer",this.dT(),this.sL=this.jft.Wk()._R()+t}jxt(t){this.Tf="signal",this.dT(),this.Ixt=t.toLowerCase()}$bt(t,s){this.Tf="instance-signals",this.dT(),this.Ixt=s.toLowerCase(),this.Axt=new Set(t)}Bxt(t){this.Tf="promise",this.dT(),t.then(()=>this.q1t()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.q1t()})}zxt(){return"timer"===this.Tf}Uxt(){return"walltimer"===this.Tf}Y1t(){return"signal"===this.Tf}spt(){return"instance-signals"===this.Tf}ypt(){return"promise"===this.Tf}H1t(){return this.Ixt}Wxt(){return this._xt}q1t(){this._xt=!0}ipt(t){this.Axt.delete(t),0===this.Axt.size&&this.q1t()}L1t(){return this.zxt()?this.sL<=this.jft.Wk().CR():this.Uxt()?this.sL<=this.jft.Wk()._R():this.Wxt()}Qxt(t){t.s0t(this.Ext,this.Hft);for(const[i,e]of this.Dxt.entries()){const h=i.P3();e.s0t(h)}this.t0t&&t.w0t([...this.t0t]);const s=this.Nxt;s&&(s.nyt(this.Iyt),s.Wyt().map((t,s)=>t.eht(this.Oxt[s])),s.Hgt())&&s.qyt(this.Lxt)}O1t(t){this.Qxt(t),this.Ext.qgt(t),this.Nxt&&this.Nxt.Hgt()&&this.Nxt.myt(this.Lxt),this.jft.G1t(this.bmt),this.Rxt=!0}async F1t(t){this.Qxt(t);for(const s of this.Ext.Zgt(t))await this.jft.Wk().a1t(s);this.Nxt&&this.Nxt.Hgt()&&this.Nxt.myt(this.Lxt),this.jft.G1t(this.bmt),this.Rxt=!0}R1t(){return this.Rxt}mft(t){for(const s of this.Dxt.values())s.mft(t);if("instance-signals"===this.Tf){for(const i of t)this.Axt.delete(i);0===this.Axt.size&&this.q1t()}}g7(){const t={},s={wt:this.Tf,t:this.sL,st:this.Ixt,s:this._xt,ev:this.Ext.$J(),sm:this.bmt.map(t=>t.$J()),dsm:this.t0t?[...this.t0t].map(t=>t.$J()):null,sols:t};this.Ext.kgt(this.Hft)&&(s.act=this.Ext.Adt(this.Hft).$J());for(const[i,e]of this.Dxt)t[i.$J().toString()]=e.g7();return"instance-signals"===this.Tf&&(s.pi=[...this.Axt].map(t=>t.YF())),s}static Mpt(t,s){const i=t.Wk(),e=t.Bdt(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const r=t.Udt(s.act);if(!r)return null;h=r.bO()}const n=Xo.un(Xo.D1t,t);n.sL=s.t,s.hasOwnProperty("wt")?n.Tf=s.wt:n.Tf=-1===n.sL?"signal":"timer",n.Ixt=s.st,n._xt=s.s,n.Ext=e,n.Hft=h;for(const o of s.sm){const a=i.N6(o);a&&n.bmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.N6(l);u&&(n.t0t||(n.t0t=new Set),n.t0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.N6(d);if(p){const m=Xo.un(Xo.kxt,null);m.y7(t,f),n.Dxt.set(p,m)}}if("instance-signals"===n.Tf){n.Axt=new Set;for(const g of s.pi){const y=i.Mk(g);y&&n.Axt.add(y)}}return n}}}{const Ko=self.Ps;Ko.kxt=class extends Ko.an{constructor(t){super(),this.aft=null,this.Vxt=!0,this.zV=[],t&&(this.aft=t.LF(),this.Vxt=t.Sft(),Ko.Yr(this.zV,t._ft()))}cn(){this.aft=null,Ko.Wr(this.zV)}s0t(t){t.Ift(this.Vxt),Ko.Yr(t._ft(),this.zV)}mft(t){Ko.Kr(this.zV,t)}g7(){return{sa:this.Vxt,insts:this.zV.map(t=>t.YF())}}y7(t,s){const i=t.Wk();this.Vxt=!!s.sa,Ko.Wr(this.zV);for(const e of s.insts){const h=i.Mk(e);h&&this.zV.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const $o=self.Ps;$o.Jxt=class extends $o.an{constructor(t){super(),this.df=t.runtime,this.mn=t.name??"",this.Yxt=!!t.ZP,this.Hxt=!!t.qxt,this.Zxt=!!t.i3,this.Xxt=!!t.Kxt,this.$xt=!!t.h3,this.t2t=!!t.s2t,this.i2t=!!t.u3,this.e2t=!!t.t3,this.h2t=!!t.r3,this.n2t=t.r2t,this.o2t=null,this.a2t=new Map,this.l2t=new Map,this.u2t=new Map,this.c2t=new Map,this.f2t=t.d2t,this.p2t=null}cn(){this.df=null}Wk(){return this.df}ef(){return this.mn}m2t(){}tpt(){return(2<=this.Zwt()?this.p2t:this).constructor}Zwt(){return this.n2t}g2t(t=!1){let s=this.f2t;return t&&"function"!=typeof s&&2<=this.Zwt()?globalThis.sU:s}XP(){return this.Yxt}$P(){return this.Hxt}s3(){return this.e2t}o3(){return this.h2t}e3(){return this.Zxt}US(){return this.Xxt}n3(){return this.$xt}l3(){return this.t2t}f3(){return this.i2t}wMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.a2t.get(t);return i||(i=t.bind(s),this.a2t.set(t,i)),i}Jwt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.l2t,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}Ywt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.u2t,t),n=l(h,i),r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r)),r}Hwt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let n=l(this.c2t,t),r=l(n,i),o=l(r,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}y2t(t){if(!this.XP())throw new Error("must be single-global plugin");this.o2t=t}S3(){if(this.XP())return this.o2t;throw new Error("must be single-global plugin")}b3(){if(this.XP())return this.o2t.b3();throw new Error("must be single-global plugin")}M2t(){const t=this.Zwt(),s=($o.HP.w2t(this,t),this.g2t(!0));if(s){if(this.p2t=new s,!(this.p2t instanceof self.VP))throw new TypeError("plugin class must derive from IPlugin")}else this.p2t=new self.VP;$o.HP.S2t(t)}y3(){return this.p2t}}}{const ta=self.Ps;ta.T2t=class extends ta.Jxt{constructor(t,s){super(t),this.b2t=s,this.x2t=0,this.v2t=new Map,this.G2t("elem-focused",t=>t.C2t()),this.G2t("elem-blurred",t=>{t&&t.I2t()})}cn(){super.cn()}_2t(t){const s=this.x2t++;return this.v2t.set(s,t),s}E2t(t){this.v2t.delete(t)}G2t(t,i){this.df.vj(this.b2t,t,t=>{const s=this.v2t.get(t.elementId);i(s,t)})}}}{const sa=self.Ps;sa.D2t=class extends sa.an{constructor(t){super(),this.aft=t,this.df=t.Wk(),this.A2t=t.G3()}cn(){this.aft=null,this.df=null,this.A2t=null}LF(){return this.aft}Wk(){return this.df}G3(){return this.A2t}hz(){return this.aft.hz()}m2t(){}aSt(t){}YSt(t){}HSt(t){}_9(t){}O9(){}A9(){}iq(t){}N2t(){}g2t(){return null}L2t(t,s,i){const e=sa.un(sa.Event,t,s);e.O2t=this,i&&Object.assign(e,i),this.LF().Fq(e)}}}{const ia=self.Ps;ia.R2t=class extends ia.an{constructor(t,s){super(),this.Gi=t,this.b2t=s,this.k2t=null,this.df=t.Wk(),this.aft=this.Gi.LF(),this.P2t=this.aft.JSt(),this.bZ=null,this.vZ=null,this.Aj=!1,this.Lj=!1,this.v0=null,this.vI=!1}cn(){this.vI=!0,this.F2t(),this.j2t(),this.bZ=null,this.vZ=null,this.v0&&(this.v0.cn(),this.v0=null),this.Gi=null,this.df=null,this.aft=null,this.P2t=null}dn(){return this.vI}Yz(){return this.Gi}Wk(){return this.df}LF(){return this.aft}G3(){return this.P2t.G3()}JSt(){return this.P2t}B2t(){return this.Gi.wk()}Sj(t){return this.df.Sj(t,this.Gi,null)}z2t(t){return this.df.z2t(t,this.Gi,null)}bj(t){return this.df.bj(t,this.Gi,null)}U2t(t,s){return this.df.U2t(t,this.Gi,s)}W2t(t,s){return this.df.W2t(t,this.Gi,s)}Q2t(t){return this.df.Q2t(t)}V2t(t,s){this.df.vj(this.b2t,t,s)}J2t(t){for(const[s,i]of t)this.V2t(s,i)}Y2t(t,s){this.df.gf(this.b2t,t,s)}H2t(t,s){return this.df.Nk(this.b2t,t,s)}q2t(t,s){if(!this.df.jO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.b2t,handler:t,data:s,responseId:null});this.Y2t(t,s)}Z2t(t){if(!t)throw new Error("cannot set empty component id");this.k2t=t}X2t(){if(this.k2t)return this.df.Fj(this.k2t);throw new Error("wrapper extension component id not set")}Bj(t,s){if(!this.k2t)throw new Error("wrapper extension component id not set");this.df.Bj(this.k2t,t,s)}K2t(t){for(const[s,i]of t)this.Bj(s,i)}b6(t,s){if(!this.k2t)throw new Error("wrapper extension component id not set");this.df.b6(this.k2t,t,s)}x6(t,s){if(this.k2t)return this.df.x6(this.k2t,t,s);throw new Error("wrapper extension component id not set")}NX(){}$2t(){}tvt(){if(!this.Aj){if(!this.bZ)if(this.df.Ej()){const s=globalThis.C3Debugger,i=this.G3();this.bZ=()=>{const t=performance.now();this.NX(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.bZ=()=>this.NX();this.df.Jf().addEventListener("tick",this.bZ),this.Aj=!0}}F2t(){this.Aj&&(this.df.Jf().removeEventListener("tick",this.bZ),this.Aj=!1)}svt(){return this.Aj}ivt(){if(!this.Lj){if(!this.vZ)if(this.df.Ej()){const s=globalThis.C3Debugger,i=this.G3();this.vZ=()=>{const t=performance.now();this.$2t(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.vZ=()=>this.$2t();this.df.Jf().addEventListener("tick2",this.vZ),this.Lj=!0}}j2t(){this.Lj&&(this.df.Jf().removeEventListener("tick2",this.vZ),this.Lj=!1)}evt(){return this.Lj}hvt(){return[]}IT(){return null}_T(t){}Lnt(t){}jnt(t,s){}Lrt(t,s,i){if(0!==s){const e=this.Lnt(t);if("number"!=typeof e)throw new Error("expected number");this.jnt(t,e+s,i)}}nvt(t,s,i,e){}rvt(t,...s){t.call(this,...s)}ovt(t,...s){return t.call(this,...s)}g2t(){return null}L2t(t,s,i){if(this.Gi.avt()){const e=this.B2t(),h=ia.un(ia.Event,t,s);h.DB=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}US(){return!1}}}{const ea=self.Ps;ea.lvt=class extends ea.R2t{constructor(t,s){super(t,s),this.Cst=t.xk(),this.uvt=null,this.cvt=null}cn(){if(this.uvt){const t=this.df.Jf();t.removeEventListener("renderercontextlost",this.uvt),t.removeEventListener("renderercontextrestored",this.cvt),this.uvt=null,this.cvt=null}this.Cst=null,super.cn()}fvt(){this.dvt()}pvt(){}mvt(){}dvt(){if(!this.uvt){this.uvt=()=>this.LV(),this.cvt=()=>this.gvt();const t=this.df.Jf();t.addEventListener("renderercontextlost",this.uvt),t.addEventListener("renderercontextrestored",this.cvt)}}LV(){this.pvt()}gvt(){this.mvt()}xk(){return this.Cst}git(){return!1}mit(){if(!this.git())throw new Error("original size not known");const t=this.yvt();if(t)return t.pm()}Mit(){if(!this.git())throw new Error("original size not known");const t=this.yvt();if(t)return t.Cm()}yvt(){return null}Mvt(){const t=this.yvt();if(t){const s=t.kx();if(s)return[s.pm(),s.Cm()]}return[100,100]}wvt(){const t=this.yvt();return t?t.A_():null}Svt(){const t=this.yvt();return t?t.Tvt():null}bvt(){const t=this.yvt();return!!t&&t.xvt()}aTt(t){const s=this.Gi.xk();return[s.pT(),s.yT(),s.i5()]}N2t(t,s,i){}vvt(t,s){}HH(){return!0}}}{const ha=self.Ps,na=ha.un(ha.Rect);ha.Gvt=class extends ha.lvt{constructor(t,s){super(t,s),this.Cvt=this.G3()._2t(this),this.Ivt=!0,this._vt=!1,this.Evt=!1,this.Dvt=-.2,this.Avt=ha.un(ha.Rect,0,0,-1,-1);const i=this.df.AP();this.Nvt=i.FU(),this.Lvt=i.jU(),this.Ovt=-1,this.Rvt=-1,this.kvt=!1,this.tvt()}cn(){this.G3().E2t(this.Cvt),this.Pvt("destroy"),this.Cvt=-1,super.cn()}MB(){if(this.df.jO())throw new Error("not valid in worker mode");return this.Fvt("get-element")}Pvt(t,s){(s=s||{}).elementId=this.Cvt,this.Y2t(t,s)}Fvt(t,s){return(s=s||{}).elementId=this.Cvt,this.q2t(t,s)}jvt(t,s){return(s=s||{}).elementId=this.Cvt,this.H2t(t,s)}Bvt(t){t=t||{};const s=this.xk();t.elementId=this.Cvt,t.isVisible=s.W4(),t.htmlIndex=s.vk().VU(),t.htmlZIndex=s.JU(),Object.assign(t,this.zvt()),this.Ivt=!!t.isVisible,this.q2t("create",t),this.Uvt(!0)}gbt(t){this.Ivt!==(t=!!t)&&(this.Ivt=t,this.Pvt("set-visible",{isVisible:t}))}NX(){this.Uvt(!1)}Wvt(){const t=this.df.AP().XU();return"Android"===ha.li.ci&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Uvt(u){if(!this.Yz().KU()){let t=this.xk(),s=t.vk(),i=t.h5(),[e,h]=s.vF(i.Cl(),i.Il()),[n,r]=s.vF(i._l(),i.El()),o=this.df.AP(),a=o.RP(),l=o.PP();if(t.W4()&&s.W4())if(!this.Wvt()&&(n<=0||r<=0||a<=e||l<=h))this.gbt(!1);else{na.set(e,h,n,r);const c=o.FU(),f=o.jU(),d=s.VU(),p=t.JU();if(!u&&na.equals(this.Avt)&&this.Nvt===c&&this.Lvt===f&&this.Ovt===d&&this.Rvt===p)this.gbt(!0);else{this.Avt.I(na),this.Nvt=c,this.Lvt=f,this.Ovt=d,this.Rvt=p,this.gbt(!0);let t=null;this.Evt&&(t=s.$U()+this.Dvt),this.Pvt("update-position",{left:Math.round(this.Avt.Cl()),top:Math.round(this.Avt.Il()),width:Math.round(this.Avt.width()),height:Math.round(this.Avt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.gbt(!1)}}SB(){this.Fvt("focus",{focus:!0})}TB(){this.Fvt("focus",{focus:!1})}C2t(){this._vt=!0}I2t(){this._vt=!1}Tbt(){return this._vt}xB(t,s){this.Pvt("set-css-style",{prop:ha.Vo(t),val:s})}ybt(t,s){this.Pvt("set-attribute",{name:t,val:s})}Mbt(t){this.Pvt("remove-attribute",{name:t})}Qvt(){this.kvt||(this.kvt=!0,Promise.resolve().then(()=>{this.kvt=!1,this.Pvt("update-state",this.zvt())}))}zvt(){}Vvt(){return this.Cvt}}}{const ra=self.Ps,oa=self.LB;ra.Jvt=class extends ra.an{constructor(t){super(),this.df=t.runtime,this.mn=t.name??"",this.Yvt=ra.un(ra.uc),this.Hvt=ra.un(ra.uc),this.n2t=t.r2t,this.f2t=t.d2t,this.qvt=null}cn(){this.Hvt.cn(),this.Yvt.cn(),this.df=null}Wk(){return this.df}ef(){return this.mn}m2t(){}Zwt(){return this.n2t}g2t(t=!1){let s=this.f2t;return t&&"function"!=typeof s&&2<=this.Zwt()?globalThis.a6:s}Zvt(t){this.Yvt.yc(t)}hX(){return this.Yvt.Mc()}NJ(t){this.Hvt.yc(t)}RJ(t){this.Hvt.rc(t)}R3(){return this.Hvt.Mc()}M2t(){const t=this.Zwt(),s=(ra.HP.w2t(this,t),this.g2t(!0));if(s){if(this.qvt=new s,!(this.qvt instanceof oa))throw new TypeError("behavior class must derive from IBehavior")}else this.qvt=new oa;ra.HP.S2t(t)}GB(){return this.qvt}}}{const aa=self.Ps;aa.Xvt=class extends aa.an{constructor(t){super(),this.df=t.Wk(),this.OMt=t,this.aft=t.LF(),this.Kvt=t.CB(),this.Kvt.Zvt(this.aft)}cn(){this.df=null,this.OMt=null,this.aft=null,this.Kvt=null}m2t(){}EB(){return this.OMt}LF(){return this.aft}Wk(){return this.df}CB(){return this.Kvt}}}{const la=self.Ps;la.$vt=class extends la.an{constructor(t,s){super(),this.tGt=t,this.b2t=s,this.Gi=t.AB(),this.df=t.Wk(),this.OMt=t.EB(),this.P2t=this.OMt.JSt(),this.Aj=!1,this.Lj=!1,this.S6=!1,this.v0=null}cn(){this.F2t(),this.j2t(),this.sGt(),this.v0&&(this.v0.cn(),this.v0=null),this.tGt=null,this.Gi=null,this.df=null,this.OMt=null,this.P2t=null}CB(){return this.OMt.CB()}iGt(){return this.tGt}AB(){return this.Gi}LF(){return this.Gi.LF()}xk(){return this.Gi.xk()}Wk(){return this.df}EB(){return this.OMt}JSt(){return this.P2t}B2t(){return this.tGt.B2t()}Sj(t){return this.df.Sj(t,this.Gi,this.OMt)}z2t(t){return this.df.z2t(t,this.Gi,this.OMt)}bj(t){return this.df.bj(t,this.Gi,this.OMt)}eGt(){}NX(){}$2t(){}hGt(){}tvt(){this.Aj||(this.df.p6(this),this.Aj=!0)}F2t(){this.Aj&&(this.df.m6(this),this.Aj=!1)}svt(){return this.Aj}ivt(){this.Lj||(this.df.g6(this),this.Lj=!0)}j2t(){this.Lj&&(this.df.y6(this),this.Lj=!1)}evt(){return this.Lj}nGt(){this.S6||(this.df.M6(this),this.S6=!0)}sGt(){this.S6&&(this.df.w6(this),this.S6=!1)}rGt(){return this.S6}hvt(){return[]}V2t(t,s){this.df.vj(this.b2t,t,s)}oGt(t,s){}IT(){return null}_T(t){}Lnt(t){}jnt(t,s){}Lrt(t,s){if(0!==s){const i=this.Lnt(t);if("number"!=typeof i)throw new Error("expected number");this.jnt(t,i+s)}}nvt(t,s,i,e){}rvt(t,...s){t.call(this,...s)}ovt(t,...s){return t.call(this,...s)}g2t(){return null}L2t(t,s,i){if(this.tGt.avt()){const e=this.B2t(),h=la.un(la.Event,t,s);h.aGt=e,h.DB=e.DB,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},n=(s,self.Ps),i=(n.aq={},n.zat={},n.Fs()),e=[],h=[],r=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;n.HP=class extends n.an{constructor(t,s){super(),this.df=t,this.lGt=[],this.mMt=null,this.uGt=[],this.cGt=new Map,this.fGt=null,this.dGt=null,this.pGt=new Set(s)}mGt(t){const s=t[19],i=this.df.wyt(t[0]);if(!i)throw new Error("missing plugin");n.sxt(t,i,s);const e=2<=s?n.Jxt:i,h=n.un(e,{runtime:this.df,ZP:t[1],qxt:t[2],i3:t[5],h3:t[8],Kxt:t[9],s2t:t[13],u3:t[14],t3:t[17],r3:t[18],r2t:s,name:t[20],d2t:2<=s?i:null});h.m2t(),this.lGt.push(h),u.set(i,h)}gGt(){this.mMt=n.un(n.aq.oq,{runtime:this.df,ZP:!0}),this.mMt.m2t()}yGt(t){const i=t[1],e=t[2],h=this.df.wyt(t[0]);if(!h)throw new Error("missing behavior");this.cGt.set(h,()=>{const t=2<=i?n.Jvt:h,s=n.un(t,{runtime:this.df,name:e,r2t:i,d2t:2<=i?h:null});s.m2t(),this.uGt.push(s),c.set(h,s),!this.fGt&&n.zat.MGt&&s instanceof n.zat.MGt?this.fGt=s:!this.dGt&&n.zat.jumpthru&&s instanceof n.zat.jumpthru&&(this.dGt=s),s.M2t()})}wGt(t){const s=this.cGt.get(t);s&&(s(),this.cGt.delete(t))}static w2t(t,s=1){if(n.HP.w2t!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static S2t(t=1){if(n.HP.S2t!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static PF(){if(n.HP.PF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static YP(t){if(n.HP.YP!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static SGt(t){r.push(t)}static TGt(){r.pop()}static Mj(){if(0===r.length)throw new Error("no init properties set");return r.at(-1)}bGt(){for(const t of this.lGt)t.M2t()}static g3(t){return u.get(t)||null}static OB(t){return c.get(t)||null}oV(){return this.mMt}xGt(){return this.fGt}vGt(){return this.dGt}Fj(t){return this.pGt.has(t)}},o=n.HP.w2t,a=n.HP.S2t,t=n.HP.PF,l=n.HP.YP}{const ua=self.Ps,ca=new Set;ua.GGt=class extends ua.an{constructor(){super(),this.CGt=0,this.bV="",this.xV=0,this.IGt=0,this._Gt=0,this.Km=0,this.$m=0,this.EGt=!1,this.DGt=!1,this.AGt=null,this.NGt="",this.MI=ua.un(ua.Rect),this.LGt=ua.un(ua.iu),this.OGt="",this.RGt=new self.zk(this),ca.add(this)}cn(){this.TI(),this.AGt&&0===this.AGt.kV()&&this.AGt.cn(),this.AGt=null,ca.delete(this),this.kGt()}static LV(){for(const t of ca)t.NGt="",t.MI.set(0,0,0,0),t.LGt.xu(t.MI)}PGt(t){this.bV=t[0],this.xV=t[1],this.IGt=t[2],this._Gt=t[3],this.Km=t[4],this.$m=t[5],this.EGt=t[6],this.DGt=!0}FGt(t,s){if(this.AGt)throw new Error("already loaded asset");this.bV=s;const i={};return ua.xo(s)&&(i.XQ="remote"),this.Uk(t,i),this.AGt.tV()}jGt(t,s){if(this.AGt)throw new Error("already loaded asset");this.bV="",this.xV=s.size,this.AGt=ua.un(ua.KQ,t.CO(),{blob:s,size:this.xV,XQ:"local"})}BGt(t){if(t===this)throw new Error("cannot replace with self");this.CGt++,this.TI(),this.bV=t.bV,this.xV=t.xV,this.IGt=t.IGt,this._Gt=t._Gt,this.Km=t.Km,this.$m=t.$m,this.EGt=t.EGt,this.DGt=t.DGt,this.AGt=t.AGt,this.NGt=t.NGt,this.MI=t.MI,this.LGt=t.LGt,this.kGt()}$Q(){return this.bV}ac(){return this.xV}zGt(){return this.IGt}UGt(){return this._Gt}xvt(){return this.EGt}pm(){return this.Km}Cm(){return this.$m}WGt(){return this.AGt.pm()}QGt(){return this.AGt.Cm()}Uk(t,s){if(this.AGt)throw new Error("already got asset");s=Object.assign({},s,{url:this.$Q(),size:this.ac()}),this.AGt=t.ZQ(s)}IV(){return this.AGt&&this.AGt.IV()}async NW(t,s){if(!this.AGt)throw new Error("no asset");if(this.NGt)throw new Error("already loaded texture");const i=this.CGt,e=(this.NGt="loading",await this.AGt.NW(t,s));if(this.CGt!==i)return null;if(!e)return this.NGt="",null;this.NGt="loaded",this.DGt||(this.Km=e.pm(),this.$m=e.Cm(),this.DGt=!0);const h=this.EGt?this.$m:this.Km,n=this.EGt?this.Km:this.$m;return this.MI.set(this.IGt,this._Gt,this.IGt+h,this._Gt+n),this.MI._t(e.pm(),e.Cm()),this.LGt.xu(this.MI),this.EGt&&this.LGt.Eu(),e}TI(){this.NGt&&(this.AGt&&this.AGt.TI(),this.NGt="",this.MI.set(0,0,0,0),this.LGt.xu(this.MI))}kx(){return this.AGt&&"loaded"===this.NGt?this.AGt.kx():null}A_(){return this.MI}Tvt(){return this.LGt}pU(){return this.RGt}VGt(){return this.AGt}async JGt(t){t=t||await this.AGt.PV();const s=ua.ko(this.Km,this.$m),i=s.getContext("2d");return this.EGt?(i.rotate(Math.PI/-2),i.translate(-this.$m,0),i.drawImage(t,this.IGt,this._Gt,this.$m,this.Km,0,0,this.$m,this.Km)):i.drawImage(t,this.IGt,this._Gt,this.Km,this.$m,0,0,this.Km,this.$m),s}async YGt(t){if(!this.OGt){const s=await this.JGt(t),i=await ua.Po(s);this.OGt=URL.createObjectURL(i)}return this.OGt}kGt(){this.OGt&&(URL.revokeObjectURL(this.OGt),this.OGt="")}}}{const fa=self.Ps;fa.HGt=class extends fa.an{constructor(t){super(),this.mn=t[0],this.qGt=t[1],this.Gwt=!!t[2],this.lot=t[3],this.ZGt=t[4],this.XGt=!!t[5],this.w8=t[6],this.KGt=t[7].map(t=>fa.un(fa.$Gt,t)),this.tCt=new self.zB(this)}static sCt(t,s){const i=fa.un(fa.HGt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.KGt.push(fa.$Gt.sCt(t)),i}cn(){for(const t of this.KGt)t.cn();fa.Wr(this.KGt)}iCt(t){for(const s of this.KGt)s.hz().Uk(t)}eCt(s,i){return Promise.all(this.KGt.map(t=>t.hz().NW(s,i)))}hCt(){for(const t of this.KGt)t.hz().TI()}ef(){return this.mn}$J(){return this.w8}qB(){return this.KGt.length}XB(){return this.KGt}nCt(t){if((t=Math.floor(t))<0||t>=this.KGt.length)throw new RangeError("invalid frame");return this.KGt[t]}rCt(t,s){(s=Math.floor(s))<0?this.KGt.unshift(t):s>=this.KGt.length?this.KGt.push(t):this.KGt.splice(s,0,t)}oCt(t){if((t=Math.floor(t))<0||t>=this.KGt.length)throw new RangeError("invalid frame");this.KGt[t].cn(),this.KGt.splice(t,1)}aCt(i){for(let t=0,s=this.KGt.length;t<s;++t)if(fa.gh(this.KGt[t].xz(),i))return t;return-1}lCt(t){if("string"!=typeof t)return t;{const s=this.aCt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}UB(){return this.qGt}WB(){return this.Gwt}QB(){return this.lot}JB(){return this.ZGt}HB(){return this.XGt}uCt(){return this.tCt}}}{const da=self.Ps,pa=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();da.$Gt=class extends da.an{constructor(t){super(),this.cCt=da.un(da.GGt),this.cCt.PGt(t),this.fCt=t[7],this.dCt=da.un(da.sl,t[8],t[9]),this.pCt=t[10].map(t=>da.un(da.mCt,this,t)),this.gCt=new Map;for(const i of this.pCt)this.gCt.set(i.ef().toLowerCase(),i);this.yCt=null;const s=t[11];6<=s.length&&(this.yCt=da.un(da.ku,s)),this.$g=t[12]||"",this.MCt=new self.ez(this)}static sCt(t){const s=da.un(da.$Gt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.cCt.jGt(t,pa),s}cn(){this.yCt&&(this.yCt.cn(),this.yCt=null),this.cCt.cn(),this.cCt=null}hz(){return this.cCt}nz(){return this.fCt}oz(){return this.dCt.rl()}lz(){return this.dCt.al()}wz(){return this.yCt}yz(t){return this.gCt.get(t.toLowerCase())||null}gz(t){return(t=Math.floor(t))<0||t>=this.pCt.length?null:this.pCt[t]}fz(){return this.pCt.length}xz(){return this.$g}KB(){return this.MCt}}}{const ma=self.Ps;ma.mCt=class extends ma.an{constructor(t,s){super(),this.wCt=t,this.mn=s[0],this.SCt=ma.un(ma.sl,s[1],s[2])}cn(){}ef(){return this.mn}pT(){return this.SCt.rl()}yT(){return this.SCt.al()}TCt(){return this.SCt}}}{const x=self.Ps,ga=self.C3Debugger,ya=self.x3;x.Alt=class extends x.an{constructor(s,t,i){super();const e=s.wyt(i[1]),[h,n]=(this.df=s,this.A2t=x.HP.g3(e),this.P2t=null,this.bCt=e.Instance,this.Kg=t,this.w8=i[11],this.mn=i[0],this.iMt=this.df.Pdt(i[14]),this.xCt=!!i[9],this.vCt=!!i[2],this.GCt=!!i[10],this.CCt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],ICt:s.Pdt(t[3])})),this._Ct=i[4],this.ECt=i[5],this.Hxt=this.A2t.$P(),this.DCt=x.un(x.Event.Jf),this.iJ=null,s.EO().yP());if(this.ACt=x.un(x.NCt,h,n),this.LCt=!0,this.OCt=null,this.RCt=null,this.kCt=-1,this.PCt=null,this.FCt=null,this.jCt=null,this.BCt=null,this.zCt=null,this.UCt=!1,this.WCt=null,this.QCt=i[8].map(t=>x.VCt.i2(this,t)),this.JCt=[],this.YCt=new Map,this.HCt=new Map,this.qCt=new Set,this.ZCt=new Map,this.XCt=x.un(x.oft,this),this.KCt=null,this.$Ct=0,this.tIt=!1,this.WCt=null,this.cCt=null,this.sIt=null,this.iIt=null,this.eIt=null,this.hIt=0,this.Dwt=new Map,this.Awt=new Map,this.zV=[],this.nIt=new Map,this.rIt=!0,this.A2t.n3()&&(this.iJ=x.un(x.eJ,this,i[12])),i[6]&&(this.cCt=x.un(x.GGt),this.cCt.PGt(i[6])),i[7]){this.sIt=i[7].map(t=>x.un(x.HGt,t)),this.iIt=new Map,this.eIt=new Map;for(const a of this.sIt)this.iIt.set(a.ef().toLowerCase(),a),this.eIt.set(a.$J(),a)}this.vCt?(this.OCt=[],this.RCt=new Set,this.kCt=this.df.oIt()):(this.PCt=[],this.FCt=new Set,this.jCt=[],this.BCt=[],this.zCt=[]);const r=this.A2t.Zwt();if(r<2&&(this.P2t=x.un(e.aIt,this,i[15]),!(this.P2t instanceof x.D2t)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.lIt=null,this.uIt=null,this.t9=x.un(x.Event.Jf),x.HP.w2t(this,r);let o;if(o=2<=r?(o=e.aIt)||globalThis.cU:this.P2t.g2t()){if(this.lIt=new o(r<2?this:null),r<2&&!(this.lIt instanceof ya))throw new TypeError("script interface class must derive from IObjectClass");if(2<=r&&!(this.lIt instanceof globalThis.cU))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.lIt=new ya;if(x.HP.S2t(r),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.P2t.N2t(u,c,f)}}this.df.cIt()&&!this.vCt&&!this.GCt&&this.Hxt||this.m2t(),this.A2t.XP()&&(this.A2t.y2t(this),this.fIt(i)),this.dIt=null}static i2(t,s,i){return x.un(x.Alt,t,s,i)}cn(){if(this.DCt.cn(),this.DCt=null,this.cCt&&(this.cCt.cn(),this.cCt=null),this.sIt){for(const t of this.sIt)t.cn();x.Wr(this.sIt),this.iIt.clear(),this.eIt.clear()}this.dIt=null,this.XCt.cn(),this.XCt=null,this.Dwt.clear(),this.Awt.clear(),this.WCt=null,this.df=null}pIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.df.TJ(i[t]);this.OCt.push(e),this.RCt.add(e),e.PCt.push(this),e.FCt.add(this)}}mIt(t){this.UCt=!0,this.WCt=t}VF(){return this.UCt}G9(){return this.WCt}gIt(){let t=0;if(!this.vCt)for(const s of this.PCt)for(const i of s.yIt()){const e=i.ef().toLowerCase();this.YCt.set(e,i),this.HCt.set(e,t),this.JCt.push(i),++t}for(const h of this.yIt()){const n=h.ef().toLowerCase();this.YCt.set(n,h),this.HCt.set(n,t),this.JCt.push(h),++t}for(const r of this.JCt)this.qCt.add(r.CB().constructor);if(!this.vCt&&this.PCt.length){let t=this.df.MIt(),s=(x.Vr(this.jCt,t,0),x.Vr(this.BCt,t,0),x.Vr(this.zCt,t,0),[]),i=0,e=0,h=0;for(const o of this.PCt){const a=o.NMt(),l=(this.jCt[a]=i,i+=o.wIt(),this.BCt[a]=e,e+=o.SIt(),this.zCt[a]=h,h+=o.TIt(),o.q3());if(l&&this.iJ)for(const u of l.Z3())s.push(u.bIt(this.iJ))}this.iJ&&this.iJ.xIt(s)}}fIt(t){const s=this.df.vIt(),i=x.un(x.Instance,{runtime:this.df,NF:this,uid:s});i.GIt(t[16],[]),this.df.CIt(s,i),this.zV.push(i)}JSt(){return this.P2t}IIt(){return this.GCt}Jf(){return this.DCt}m2t(){this.vCt||(this.P2t?this.P2t.m2t():this.lIt.fU())}_It(){return 0<this.hIt}async _9(t){this.vCt||(this.hIt++,1===this.hIt&&(this.P2t?await this.P2t._9(t):await this.lIt.mU(this.df.AP().EIt())))}O9(){if(!this.vCt){if(this.hIt--,this.hIt<0)throw new Error("released textures too many times");0===this.hIt&&(this.P2t?this.P2t.O9():this.lIt.gU(this.df.AP().EIt()))}}A9(){if(this.vCt)throw new Error("not applicable to family");this.P2t?this.P2t.A9():this.lIt.yU()}async iq(t){this.vCt||(this.P2t?await this.P2t.iq(t):await this.lIt.MU(this.df.AP().EIt()))}Wk(){return this.df}G3(){return this.A2t}DIt(){return this.bCt}ef(){return this.mn}Pdt(){return this.iMt}bO(){return this.Kg}$J(){return this.w8}VJ(){return this.vCt}AJ(){return this.xCt}$P(){return this.Hxt}NMt(){return this.kCt}yIt(){return this.QCt}SIt(){return this._Ct}AIt(t){return t&&this.qCt.has(t)}wIt(){return this.CCt.length}NIt(){return this.CCt.map(t=>t.sid)}LIt(s){return this.CCt.findIndex(t=>t.sid===s)}$st(s){return this.CCt.findIndex(t=>t.name===s)}OIt(){return this.CCt.map(t=>t.name)}RIt(){return this.CCt.map(t=>t.ICt)}sit(t){if((t=Math.floor(t))<0||t>=this.CCt.length)throw new RangeError("invalid instance variable index");return this.CCt[t].type}tit(t){if((t=Math.floor(t))<0||t>=this.CCt.length)throw new RangeError("invalid instance variable index");return this.CCt[t].name}TIt(){return this.ECt}kIt(){return this.JCt}Iht(t){return this.YCt.get(t.toLowerCase())||null}eit(t){const s=this.HCt.get(t.toLowerCase());return void 0===s?-1:s}q3(){return this.iJ}n3(){return this.A2t.n3()}PIt(){return this.iJ&&this.iJ.FIt()}C1t(){return this.XCt}P3(){return this.XCt.P3()}hz(){return this.cCt}vJ(t){this.KCt=t}xJ(){return this.KCt}GJ(t){this.$Ct=t}jIt(){return this.$Ct}BIt(){return this.sIt}zIt(){return this.sIt.length}Qdt(){return this.PCt}KSt(t){return this.FCt.has(t)}igt(){return this.OCt}JJ(t){return this.RCt.has(t)}PMt(t){return this.BCt[t]}AMt(t){return this.jCt[t]}Byt(t){this.ZCt.set(t.Vyt().toLowerCase(),t)}zyt(t){return!!this.Xyt(t)}Xyt(t){const s=this.ZCt.get(t.toLowerCase());return s&&s.tc()?s:null}UIt(){return this.sIt}WIt(t){if(this.sIt)return this.iIt.get(t.toLowerCase())||null;throw new Error("no animations")}QIt(t){if(this.sIt)return this.eIt.get(t)||null;throw new Error("no animations")}VIt(t){if(this.WIt(t))throw new Error(`animation name '${t}' already exists`);const s=x.HGt.sCt(this.Wk(),t);return this.sIt.push(s),this.iIt.set(s.ef().toLowerCase(),s),this.eIt.set(s.$J(),s),s}JIt(t){const s=this.WIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.sIt.length)throw new Error("cannot remove last animation");const i=this.sIt.indexOf(s);this.sIt.splice(i,1),this.iIt.delete(s.ef().toLowerCase()),this.eIt.delete(s.$J()),s.cn()}YIt(){if(this.sIt)return this.sIt[0];throw new Error("no animations")}HIt(){return this.YIt().nCt(0)}qIt(){if(this.sIt){const t=this.HIt().hz();return[t.pm(),t.Cm()]}return this.cCt?[this.cCt.pm(),this.cCt.Cm()]:[100,100]}b3(){if(this.A2t.XP())return this.zV[0];throw new Error("not a single-global plugin")}R3(){return this.zV}*instances(){yield*this.zV}*O3(){yield*this.zV,yield*this.df.ibt(this)}j3(){return this.zV.length}NJ(t){this.zV.push(t)}ZIt(){this.rIt=!0}pq(){if(this.rIt&&!this.vCt){let s=this.zV,i=0;for(let t=s.length;i<t;++i)s[i].XIt(i);const t=this.df.KIt();for(const e of t)e.LF()===this&&e.XIt(i++);this.rIt=!1}}$It(t){const s=this.zV;if(t<s.length)return s[t];t-=s.length;const i=this.df.KIt();for(const e of i)if(e.LF()===this){if(0===t)return e;--t}return null}jTt(t){if(t&&t.VF()&&t.LF()!==this)for(const i of t.JF())if(i.LF()===this)return i;const s=this.P3().R3();return s.length?s[0]:null}L3(t){const s=this.P3().R3();return 0<s.length?s[t.qF()%s.length]:null}*abt(t,s){let i=this.P3().R3(),e=i.length,h=s.P3(),n=s.P3().R3(),r=n.length,o=t.qF(),a=(!s.VJ()&&h.Sft()||(o=n.indexOf(t)),Math.ceil(e/r)),l=e%r,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}aSt(t){this.P2t?.aSt(t)}uyt(){if(this.UCt&&!this.vCt){this.pq();const t=this.P3(),s=t._ft(),i=t.Sft(),e=this.df.Idt(),h=e&&e.oR()&&e.oR().Pft();for(const n of this.WCt.cq())if(n!==this){n.pq();const r=n.P3();if(r.Ift(i),!i){const o=r._ft();x.Wr(o);for(const a of s)o.push(n.$It(a.qF()));if(h){const l=t.Eft(),u=r.Eft();x.Wr(u);for(const c of l)u.push(n.$It(c.qF()))}}}}}dSt(t,s){for(const i of this.G9().cq()){const e=i.P3();t?x.Ur(e.Eft(),s):x.Ur(e._ft(),s)}}t_t(){return this.ACt}s_t(t){this.LCt=!!t}i_t(){if(this.LCt&&this.Hxt){for(const t of this.zV)t.xk().e_t();for(const s of this.df.KIt())s.LF()===this&&s.xk().e_t();this.LCt=!1}}h_t(s,t,i){if(t){const e=this.nIt.get(t);e&&(e.delete(s),0===e.size)&&this.nIt.delete(t)}if(i){let t=this.nIt.get(i);t||(t=new Set,this.nIt.set(i,t)),t.add(s)}}n_t(){if(this.VJ()){const t=new Set;for(const s of this.OCt)for(const i of s.n_t())t.add(i);return t.values()}return this.nIt.keys()}iSt(){return this.Dwt||(this.Dwt=new Map),this.Dwt}eSt(){return this.Awt||(this.Awt=new Map),this.Awt}r_t(){return this.AIt(x.zat.MGt)}o_t(){return this.AIt(x.zat.jumpthru)}a_t(){return this.AIt(x.zat.NoSave)}EJ(){return this.AIt(x.zat.Persist)}g7(){const t={instances:this.zV.map(t=>t.IT())};return this.Dwt&&this.Dwt.size&&(t.ex=x.Wo(this.Dwt)),t}y7(t,e){this.Dwt&&(this.Dwt.clear(),this.Dwt=null);const s=t.ex,h=(s&&(this.Dwt=x.Qo(s)),this.zV),n=t.instances;for(let t=0,s=Math.min(h.length,n.length);t<s;++t)h[t]._T(n[t]);for(let t=n.length,s=h.length;t<s;++t)this.df.BF(h[t]);for(let i=h.length,t=n.length;i<t;++i){let t=n[i],s=null;if(!this.$P()||(s=this.df.$R().m9(t.w.l))){const r=this.df.DJ(this.KCt||this,s,!1,0,0,!0);r._T(t),e&&e.add(r)}}this.dIt=n,this.ZIt()}l_t(){return this.dIt}u_t(){this.dIt=null}c_t(){for(let t=0,s=this.zV;t<s;++t)this.zV[t].c_t()}w3(){return this.lIt}XO(){return this.t9}f_t(){return this.uIt}B3(t){this.uIt=t}Fq(t){const s=this.df,i=s.Ej()&&!s.sR().V3();i&&ga.StartMeasuringScriptTime(),this.t9.dispatchEvent(t),i&&ga.AddScriptTime()}}}{const Ma=self.Ps;Ma.d_t=class extends Ma.an{constructor(t,s){super(),this.df=t,this.p_t=s;for(const i of this.p_t)i.mIt(this)}cn(){this.df=null}Wk(){return this.df}v9(){return this.p_t}cq(){return this.p_t}gq(){return this.p_t.some(t=>t.$P())}}}{let w=self.Ps,h=self.C3Debugger,r=w.HP,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.an{constructor(t){if(w.HP!==r)throw new Error("invalid addon manager");super(),this.df=t.runtime,this.m_t=t.NF,this.Cst=null,this.g_t=null,this.y_t=null,this.M_t=0,this.w_t=t.uid,this.S_t=a++,this.ySt=0,this.T_t=null;const s=w.ao(t.tags),i=(0<s.length&&(this.T_t=new Set(s)),this.b_t=o,this.x_t=o,this.m_t.kIt()),e=(0<i.length&&(this.x_t=i.map((t,s)=>w.un(w.v_t,{runtime:this.df,IB:t,DB:this,index:s}))),this.G_t=this.m_t.VF()?[]:null,this.C_t=-1,this.DCt=null,this.G3());if(e.US()&&(this.ySt|=4),e.$P())if(this.Cst=w.un(w.I_t,this,t.qj),t.__t)this.Cst.E_t(t.__t);else{this.Cst.D_t();const[h,n]=this.m_t.qIt();this.Cst.t_(h,n),this.LF().PIt()&&this.Cst.Hj().A_t()}t.N_t?this.L_t(t.N_t):this.O_t()}cn(){if(this.y_t&&(this.y_t.FF(),this.y_t=null),0<this.x_t.length){for(const i of this.x_t)i.cn();w.Wr(this.x_t)}this.g_t&&(this.g_t.cn(),this.g_t=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.G_t&&w.Wr(this.G_t),this.DCt&&(this.DCt.cn(),this.DCt=null),this.T_t&&this.T_t.clear(),this.T_t=null,this.df=null,this.m_t=null,0<this.b_t.length&&w.Wr(this.b_t),this.Cst&&(this.Cst.cn(),this.Cst=null)}L_t(t){0<t.length&&(this.b_t=[],w.Yr(this.b_t,t))}O_t(){const s=this.m_t.wIt();if(0!==s){this.b_t=[];const i=[0,0,""];for(let t=0;t<s;++t)this.b_t.push(i[this.m_t.sit(t)])}}GIt(t,i){if(this.g_t)throw new Error("already got sdk instance");for(let t=0,s=this.x_t.length;t<s;++t){const e=this.x_t[t];e.GIt(i?i[t]:null)}const s=this.G3().Zwt();if(s<2){if(this.g_t=w.un(this.m_t.DIt(),this,t),!(this.g_t instanceof w.R2t))throw new Error("sdk type must derive from SDKInstanceBase");!this.G3().$P()&&this.m_t.f_t()&&this.wk()}else{const h=this.G3().g2t();this.R_t(h.Instance,t)}}wB(){return this.g_t??this.y_t}xk(){return this.Cst}Wk(){return this.df}ER(){return this.C_t}KF(){const t=this.C_t;return-1===t?this.Wk().ER():t}DR(t){((t=+t)<0||!isFinite(t))&&(t=0),this.C_t=t,this.LF().PIt()&&this.df.k_t(this,!0)}tj(){this.C_t=-1,this.LF().PIt()&&this.df.k_t(this,!1)}n7(){return this.df.P_t(this)}Jf(){return this.DCt||(this.DCt=w.un(w.Event.Jf)),this.DCt}ib(t){this.g_t?this.g_t.ib(t):this.y_t.GU(this.df.AP().EIt())}m2t(t){this.g_t.m2t(t)}F_t(){this.ySt|=2}j_t(){return 0!=(2&this.ySt)}B_t(){this.ySt|=1}KU(){return 0!=(1&this.ySt)}US(){return 0!=(4&this.ySt)||this.g_t.US()}z_t(){this.ySt|=32}ZH(){return 0!=(32&this.ySt)}U_t(){return 0!=(8&this.ySt)}W_t(t){t?this.ySt|=8:this.ySt&=-9}Q_t(){return 0!=(16&this.ySt)}V_t(t){t?this.ySt|=16:this.ySt&=-17}J_t(){return 0!=(64&this.ySt)}Y_t(t){t?this.ySt|=64:this.ySt&=-65}H_t(t,s){t<<=16,s?this.ySt|=t:this.ySt&=~t}q_t(t){return 0!=(this.ySt&t<<16)}yvt(){return this.g_t.yvt()}Mvt(){return this.g_t.Mvt()}wvt(){return this.g_t.wvt()}Svt(){return this.g_t.Svt()}bvt(){return this.g_t.bvt()}aTt(t){return this.g_t.aTt(t)}LF(){return this.m_t}HH(){return this.g_t.HH()}ebt(t){return t.VJ()?t.JJ(this.LF()):this.LF()===t}Z_t(h,t,s){const i=(t,s)=>{const i=s||t.LF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.VF())for(const e of this.JF())i(e);if(s)for(const n of this.N5())i(n)}X_t(){if(!this.G3().l3())throw new Error("object does not support scene graph")}P5(){return null!==this.v5()}v5(){const t=this.xk();if(!t)return null;const s=t.v5();return s?s.Yz():null}C5(){const t=this.xk();if(!t)return null;const s=t.C5();return s?s.Yz():null}*I5(){const t=this.xk();if(t)for(const s of t.I5())yield s.Yz()}K_t(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}S7(){const t=this.xk();return!!t&&t.S7()}$_t(t){const s=this.xk();if(!s)return[];const i=t.ef();return s.vq().map(t=>t.Yz()).filter(t=>t.LF().ef()===i)}vq(){const t=this.xk();return t?t.vq().map(t=>t.Yz()):[]}*children(){const t=this.xk();if(t)for(const s of t.children())yield s.Yz()}*N5(){const t=this.xk();if(t)for(const s of t.N5())yield s.Yz()}E5(){const t=this.xk();return t?t.E5():0}tEt(){return[...this.I5()].length}obt(){const t=this.xk();return t?t.obt():0}A5(t){const s=this.xk();if(!s)return null;const i=s.A5(t);return i?i.Yz():null}sEt(){const t=this.xk();if(!t)return NaN;const s=t.v5();return s?s.iEt(t):NaN}eEt(t){for(const s of this.xk().vq())if(s.Yz().YF()===t)return!0;return!1}O5(t,s){this.X_t(),t.X_t(),this.xk().O5(t.xk(),s||{})}R5(t){const s=this.xk();s&&s.R5(t.xk())}eB(){const t=this.xk();return!!t&&t.eB()}X9(){const t=this.xk();if(t){const s=t.hEt();if(s)for(const i of s){const e=this.df.Mk(i[2]);if(e){const h=i[3];this.O5(e,{j5:!!(h>>0&1),z5:!!(h>>1&1),W5:!!(h>>2&1),V5:!!(h>>3&1),Y5:!!(h>>4&1),iB:!!(h>>5&1),q5:!!(h>>6&1),X5:!!(h>>7&1),tB:!!(h>>8&1)})}}}}K9(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const n=e.flags;this.O5(h,{j5:!!(n>>0&1),z5:!!(n>>1&1),W5:!!(n>>2&1),V5:!!(n>>3&1),Y5:!!(n>>4&1),iB:!!(n>>5&1),q5:!!(n>>6&1),X5:!!(n>>7&1),tB:!!(n>>8&1)})}}}XF(){const t=this.df.nEt();return t?t.Llt(this):""}VF(){return null!==this.G_t}fq(t){this.G_t.push(t)}WF(){return this.G_t}rEt(t){return!!this.oEt(t)}oEt(t){const s=this.JF();if(null===s||0===s.length)return!1;for(const i of s)if(i.LF()===t)return i;return null}JF(){return this.G_t}pmt(){for(const t of this.JF())t.LF().P3().Dft(t)}lSt(){for(const t of this.JF())t.LF().P3().Gft(t)}uSt(t){for(const s of this.JF())s.LF().P3()._ft()[t]=s}fSt(){for(const t of this.JF())t.LF().P3().Cft(t)}cSt(t){for(const s of this.JF())s.LF().P3().Eft()[t]=s}G3(){return this.m_t.G3()}XIt(t){this.M_t=t}qF(){return this.m_t.pq(),this.M_t}YF(){return this.w_t}aEt(){return this.S_t}lEt(t){t?this.hj(new Set(t)):this.T_t=null}hj(t){if(0===t.size)this.T_t=null;else{this.T_t?this.T_t.clear():this.T_t=new Set;for(const s of t)this.T_t.add(s)}}ij(){return this.T_t??new Set}Abt(){return Array.from(this.ij()).join(" ")}Obt(t){t=Math.floor(t);for(const s of this.ij()){if(0===t)return s;--t}return""}Cht(){return this.x_t}uEt(t){if(t)for(const s of this.x_t)if(s.CB()instanceof t)return s;return null}Uat(t){if(!t)return null;const s=this.uEt(t);return s?s.wB():null}Ght(i){const e=this.x_t;for(let t=0,s=e.length;t<s;++t)if(e[t].EB().$J()===i)return t;return-1}cEt(){return this.b_t}OIt(){return this.m_t.OIt()}fEt(){return this.b_t.length}Unt(t){const s=this.b_t;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}EMt(t){return this.b_t[t]}dEt(t){const s=this.b_t[t];return 0===this.m_t.sit(t)?!!s:s}Wnt(t,s){const i=this.b_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.m_t.sit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Ort(t,s){if(0!==s){const i=this.b_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}iSt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}eSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}pEt(t){const s=this.LF();if(s.XO().Xf(t))return!0;for(const i of s.Qdt())if(i.XO().Xf(t))return!0;return!!this.df.XO().Xf(t)}Q3(){const t=new Set,s=(t.add(this),this.xk());if(s&&s.S7())for(const i of this.N5())if(t.add(i),i.VF())for(const e of i.JF())t.add(e);if(this.VF())for(const h of this.JF())t.add(h);for(const n of t.values())n.tq();this.sq()}mEt(){this.m_t.f_t()&&this.wk();for(const t of this.x_t)t.eGt()}gEt(){this.mEt()}tq(){if(this.mEt(),this.pEt("instancecreate")){const t=this.LF(),s=new w.Event("instancecreate");s.DB=this.wk(),t.Fq(s);for(const i of t.Qdt())i.Fq(s);this.df.Fq(s)}this.df.Sj(this.G3().tpt().rq.Pbt,this,null)}sq(){if(this.G3().l3()){if(this.Fq(new w.Event("hierarchyready")),this.pEt("hierarchyready")){const t=this.LF(),s=new w.Event("hierarchyready");s.DB=this.wk(),t.Fq(s);for(const i of t.Qdt())i.Fq(s);this.df.Fq(s)}this.df.Sj(this.G3().tpt().rq.tbt,this,null)}}yEt(){this.df.Sj(this.G3().tpt().rq.Fbt,this,null)}MEt(t){if(this.y_t){const s=new w.Event("destroy");s.wEt=t,this.Fq(s)}if(this.pEt("instancedestroy")){const i=this.LF(),e=new w.Event("instancedestroy");e.DB=this.wk(),e.wEt=t,i.Fq(e);for(const h of i.Qdt())h.Fq(e);this.df.Fq(e)}}SEt(){return this.g_t?this.g_t.hvt():this.y_t.Oj()}IT(t="full",s=null){const i={},e=("full"===t?i.uid=this.YF():i.c3=!0,this.ij());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const n=S.get(this);if(n&&n.size&&(i.ex=w.Wo(n)),-1!==this.ER()&&(i.mts=this.ER()),0<this.m_t.wIt()){const r={},o=this.m_t.NIt();for(let t=0,s=this.b_t.length;t<s;++t)r[o[t].toString()]=this.b_t[t];i.ivs=r}if(this.x_t.length){const a={};for(const l of this.x_t){const u=l.IT(t);u&&(a[l.EB().$J().toString()]=u)}i.behs=a}}this.Cst&&(i.w=this.Cst.g7(t,s));const h=this.g_t?this.g_t.IT():this.y_t.Rj();return h&&(i.data=h),i}LZ(t="full",s){this.Cst&&this.Cst.LZ(t)}RZ(t,s="full",i=null){this.Cst&&this.Cst.RZ(t,s,i)}TEt(t,s="full",i=null){this.Cst&&this.Cst.TEt(t,s,i)}c_t(){this.G3().$P()&&this.Cst.c_t()}_T(s,t="full",i){if("full"===t)this.w_t=s.uid;else if(!s.c3)return;if(this.lEt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,n=(h&&(t=w.Qo(h),S.set(this,t)),this.C_t=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(n)for(const[r,o]of Object.entries(n)){const a=parseInt(r,10),l=this.m_t.LIt(a);if(!(l<0||l>=this.b_t.length)){let t=o;null===t&&(t=NaN),this.b_t[l]=t}}}if(this.G3().$P()){const u=s.w;if(u){const c=u.l;if(this.Cst.vk().$J()!==c){const f=this.Cst.vk(),d=f.hk().m9(c);d?(this.Cst._k(d),f.RJ(this,!0),d.NJ(this,!0),d.Ek(this),this.Cst.Zj()):"full"===t&&this.df.BF(this)}this.Cst.y7(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.Ght(y);M<0||M>=this.x_t.length||this.x_t[M]._T(g,t)}}const e=s.data;e&&(this.g_t?this.g_t._T(e,t):this.y_t.kj(e))}wk(){return this.y_t||this.R_t()}avt(){return!!this.y_t}R_t(t,s){const i=this.Cst?t?self.wU:self.pB:t?self.aj:self.AF,e=t||this.g_t.g2t(),h=this.m_t.f_t(),n=h||e||i,r=this.G3().Zwt();if(w.HP.w2t(this,r),w.HP.SGt(s),this.y_t=new n,w.HP.TGt(),w.HP.S2t(r),e&&!(this.y_t instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.y_t instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.y_t}OF(t){if(0!==this.b_t.length){const i={},e=this.m_t.RIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.dEt.bind(this,t),set:w.Instance.prototype.Wnt.bind(this,t)};const s=Object.create(Object.prototype,i);t.bEt={value:s,writable:!1}}}RF(t){const s=this.x_t;if(0!==s.length){const i={};for(const h of s)i[h.EB().Pdt()]={value:h.B2t(),writable:!1};const e=Object.create(Object.prototype,i);t.tmt={value:e,writable:!1}}}Fq(t){if(this.avt()){const s=this.wk(),i=(t.DB=s,this.df),e=i.Ej()&&!i.sR().V3();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const wa=self.Ps;wa.Cq=class extends wa.an{constructor(e){super(),this.RT=e,this.Smt=null,this.xEt=[],this.vEt=e.pm(),this.GEt=e.Cm(),this.CEt=1,this.IEt=1,this._Et=0,this.EEt=1,this.DEt=e.DD(),this.AEt=null,this.NEt=null,this.LEt=NaN,this.OEt=!1,this.x7=NaN,this.v7=NaN,this.REt=t=>{if(t.DB===this.Smt.Yz()){const s=e.Wk(),i=(s.Jf().removeEventListener("instancecreate",this.REt),this.Smt.Yz().wB());this.OEt=!!i.git(),this.x7=this.OEt?i.mit():NaN,this.v7=this.OEt?i.Mit():NaN}}}cn(){this.Smt=null,this.AEt=null,this.NEt=null,this.LEt=NaN,this.OEt=!1,this.x7=NaN,this.v7=NaN,wa.Wr(this.xEt)}kEt(t){if(this.EEt=this.RT.DD(),this.DEt=this.EEt,this.Smt=t,this._Et=t?t.e4():0,this.Smt){const s=this.RT,i=s.Wk(),e=this.Smt.Yz().G3().Zwt();if(e<2){const h=this.Smt.Yz().wB();h?(this.OEt=!!h.git(),this.x7=this.OEt?h.mit():NaN,this.v7=this.OEt?h.Mit():NaN):this.Smt.Yz().KU()||i.Jf().addEventListener("instancecreate",this.REt)}else this.OEt=!1,this.x7=NaN,this.v7=NaN}else this.OEt=!1,this.x7=NaN,this.v7=NaN}v5(){return this.Smt}S7(){return 0<this.xEt.length}vq(){return this.xEt}PEt(){this.S7()&&1!==this.xEt.length&&(this.NEt?this.xEt.sort((t,s)=>{const i=this.NEt.get(t.Yz()),e=this.NEt.get(s.Yz());return wa.pe(i)&&wa.pe(e)?i-e:0}):this.xEt.sort((t,s)=>{const i=t.$nt().FEt(),e=s.$nt().FEt();return wa.pe(i)&&wa.pe(e)?i-e:0}))}FEt(){return this.LEt}trt(){return this.CEt}jEt(t){this.CEt=t}irt(){return this.IEt}BEt(t){this.IEt=t}urt(){return this.DEt}DTt(){return this.EEt}zEt(t){this.EEt=t}Knt(){return 0===this.vEt?Number.EPSILON:this.vEt}srt(){return 0===this.GEt?Number.EPSILON:this.GEt}UEt(){if(this.RT.Q5()){let t=this.Smt,s=t.pm(),i=t.$nt().Knt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OEt?1+s/this.x7:s/i}return 1}WEt(){if(this.RT.J5()){let t=this.Smt,s=t.Cm(),i=t.$nt().srt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OEt?1+s/this.v7:s/i}return 1}QEt(){return 0}VEt(){return{sw:this.vEt,sh:this.GEt,sx:this.CEt,sy:this.IEt,psa:this._Et,oo:this.EEt,so:this.DEt,pi:this.RT.Yz().sEt()}}g7(t,s=null){const i=this.VEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.JEt(t),c:this.YEt(t)})}HEt(t){let s="";return t.B5()&&(s+="x"),t.U5()&&(s+="y"),t.Q5()&&(s+="w"),t.J5()&&(s+="h"),t.H5()&&(s+="a"),t.Z5()&&(s+="z"),t.eB()&&(s+="d"),t.K5()&&(s+="o"),t.sB()&&(s+="v"),s}JEt(t){return this.Smt&&this.Smt.Yz()&&!this.Smt.Yz().KU()?this.qEt(this.Smt,this.RT,t):null}YEt(s){return this.xEt.map(t=>this.qEt(t,t,s)).filter(t=>t)}qEt(t,s,i){const e=t.Yz();if(e&&e.KU())return null;const h={};return h.uid=e.YF(),h.f=this.HEt(s),h.offsets=s.ZEt(),h.data=wa.Cq.XEt(e),h.oci=e.LF().bO(),"state"===i?(h.inst=e.IT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.LF().R3().indexOf(e),h.inst=null),h}y7(t){this.vEt=t.sw,this.GEt=t.sh,this.CEt=t.sx,this.IEt=t.sy,this._Et=t.psa,this.EEt=t.oo,this.DEt=t.so,this.LEt=wa.pe(t.pi)?t.pi:NaN}KEt(t,s){if(!t&&!s&&this.AEt)for(const i of this.AEt)i.KU()||i.P5()||i.Wk().BF(i);this.AEt=t,this.NEt=s}RZ(t,s){const i=this.RT,e=i.Wk(),h=new Set;if(t.p&&!this.Smt){const o=t.p.uid,a=e.Mk(o);if(s?.Ybt,a){const l=a.xk();if(a.K_t(i.Yz()))this.Smt=l;else{a.eEt(i.Yz().YF())?e.BF(i.Yz()):a.O5(i.Yz(),this.$Et(t.p.f)),h.has(i)||(i.tDt(t.p.offsets),this.sDt(a,t.p,s)),h.add(i);const u=a.xk();u.$nt().PEt()}}else if(wa.pe(t.p.oci)){const c=e.TJ(t.p.oci),f=(e.oV(),e.z3(c,i.vk(),0,0,!0));if(s?.Ybt,f){const d=this.iDt(t.p,e),p=(d&&f._T(d),f.xk()),m=(p.vk().U3(f),f.O5(i.Yz(),this.$Et(t.p.f)),f.xk());m.$nt().PEt()}}}const n=[];for(const g of t.c){const y=g.uid,M=e.Mk(y);M&&n.push(M)}let r=0;for(const w of t.c){const S=w.uid,T=e.Mk(S);if(s?.Ybt,T){if(this.AEt){if(this.AEt.includes(T)){const G=T;if(G.LF()!==T.LF()){r++;continue}if(G.KU()){r++;continue}const C=t.c[r];if(!s?.Ybt&&this.eDt(G,n,i)){this.hDt(r,C,i,h,s),r++;continue}if(G.P5()&&G.v5()!==i.Yz()){const I=this.nDt(C,s);this.rDt(I,C,h,s),r++;continue}this.rDt(G.xk(),C,h,s,!0),r++;continue}if(this.AEt[r]){const _=this.AEt[r];if(_.LF()!==T.LF()){r++;continue}if(_.KU()){r++;continue}const E=t.c[r];if(!s?.Ybt&&this.eDt(_,n,i)){this.hDt(r,E,i,h,s),r++;continue}if(_.P5()&&_.v5()!==i.Yz()){const D=this.nDt(E,s);this.rDt(D,E,h,s),r++;continue}this.rDt(_.xk(),E,h,s,!0),r++;continue}}const b=T.LF(),x=this.oDt(n,b),v=i.Yz().$_t(b).length;if(x===v){const A=i.Yz().A5(r);if(A){const N=A.xk();N&&(h.has(N)||(N.tDt(w.offsets),this.sDt(A,w,s)),h.add(N))}r++;continue}if(T.P5()&&T.v5()!==i.Yz()){const L=this.nDt(w,s);this.rDt(L,w,h,s),r++;continue}this.rDt(T.xk(),w,h,s)}else if(this.AEt&&this.AEt[r]){const O=this.AEt[r],k=e.TJ(this.aDt(w));if(O.LF()!==k){r++;continue}if(O.KU()){r++;continue}const R=t.c[r];if(!s?.Ybt&&this.eDt(O,n,i)){this.hDt(r,R,i,h,s),r++;continue}if(O.P5()&&O.v5()!==i.Yz()){const P=this.nDt(R,s);this.rDt(P,R,h,s),r++;continue}this.rDt(O.xk(),R,h,s)}else{const F=this.nDt(w,s);this.rDt(F,w,h,s)}r++}}eDt(t,s,i){const e=t.LF(),h=this.oDt(s,e),n=i.Yz().$_t(e).length;return h===n}hDt(t,s,i,e,h){const n=i.Yz().A5(t,s);if(n){const r=n.xk();r&&(e.has(r)||(r.tDt(s.offsets),this.sDt(n,s,h)),e.add(r))}}$Et(t){const s={};return s.j5=t.includes("x"),s.z5=t.includes("y"),s.W5=t.includes("w"),s.V5=t.includes("h"),s.Y5=t.includes("a"),s.q5=t.includes("z"),s.iB=t.includes("d"),s.X5=t.includes("o"),s.tB=t.includes("v"),s}aDt(t){return wa.pe(t.oci)?t.oci:t[1]}nDt(e,h){if(wa.pe(e.oci)){let t=this.RT,s=t.Wk(),i;if(e.data)i=s.DJ(e.data,t.vk(),!1,0,0,!1,!0);else{const n=s.TJ(e.oci);i=s.z3(n,t.vk(),0,0,!0)}if(h?.Ybt,i){const r=this.iDt(e,s),o=(r&&i._T(r),i.xk());return o.vk().U3(i,!0),o}}}rDt(t,s,i,e,h=!0){const n=this.RT,r=n.O5(t,this.$Et(s.f));r&&h&&(i.has(t)||(t.tDt(s.offsets),this.sDt(t.Yz(),s,e)),i.add(t)),this.PEt()}sDt(t,s,i){let e=this.iDt(s,this.RT.Wk());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t._T(e))}oDt(t,s){return t.filter(t=>t.LF().ef()===s.ef()).length}iDt(t,s){if(wa.pe(t.instIndex)){const i=s.TJ(t.oci),e=i.l_t();return e?e[t.instIndex]:null}return wa.ve(t.inst)?JSON.parse(t.inst):t.inst||void 0}static XEt(t){let s=t.xk().vk().CJ(t.YF());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.vq()]){const h=e.xk();i.push([h.hk().$J(),h.vk().bO(),e.YF(),wa.Cq.Gq(h),e.LF().VF()?1:0,h.Gk(),wa.Cq.XEt(e)])}return wa.je(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=wa.Cq.lDt(),s[0][14][1]=i,s[0][14][2]=t.xk().Gk()),s}static Gq(t){let s=0;return(s|=Number(t.sB())<<8)|Number(t.K5())<<7|Number(t.Z5())<<6|Number(t.eB())<<5|Number(t.H5())<<4|Number(t.J5())<<3|Number(t.Q5())<<2|Number(t.U5())<<1|Number(t.B5())<<0}static lDt(t){let s=0;return s,511}}}{let d=self.Ps,t=self.Ss,n=(t._s,d.un(d.Rect)),r=d.un(d.iu),s=d.un(d.Event,"bboxchange",!1),f=d.un(d.Ho,0,0,0,0),u=d.un(d.ku),i=d.un(d.Ho,1,1,1,1),o=d.un(d.Rect,0,0,-1,-1),h=d.un(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.I_t=class extends d.an{constructor(t,s){super(),this.Gi=t,this.aft=t.LF(),this.df=t.Wk(),this.uDt=s,this.aft.h_t(this,null,s),this.cDt=-1,this.fDt=-1,this.ySt=196635,this.aft.G3().e3()&&(this.ySt|=128),this.il=NaN,this.el=NaN,this.sT=NaN,this.dDt=NaN,this.pDt=NaN,this.yx=NaN,this.Ko=NaN,this.mDt=NaN,this.gDt=NaN,this.yDt=NaN,this.MDt=NaN,this.wDt=d.un(d.Rect),this.SDt=d.un(d.iu),this.TDt=h,this.bDt=o,this.xDt=null,this.vDt=null,this.GDt=null,this.tT=i,this.CDt=i,this.IDt=null,this._Dt=null,this.Gi.LF().PIt()&&(this._Dt=d.un(d.EDt,this.Gi,this)),this.DDt=null,this.AEt=null,this.NEt=null,this.ADt=-1,this.NDt=null}B_t(){this.ySt|=256}cn(){if(this.aft.h_t(this,this.uDt,null),this.IDt&&(this.df.PS().aw(this.IDt),this.IDt=null),this.xDt=null,this.vDt&&(this.vDt.LDt.cn(),this.vDt=null),this.GDt&&(this.GDt.clear(),this.GDt=null),this.oB(),this._Dt&&this._Dt.cn(),this.P5()&&this.v5().R5(this),this.S7()){const t=[...this.vq()];for(const s of t)this.R5(s)}this.ODt(),this.RDt(),g.delete(this),a.delete(this),this.Gi=null,this.aft=null,this.df=null,this.uDt=null}E_t(t){if(m=!1,this.Xj(t[0],t[1]),this.ST(t[2]),this.t_(t[3],t[4]),this.yx=0,this.e3()?this.i4(t[6]):this.Ko=0,f.Va(t[7]),this.kDt(f),this.frt(t[8]),this.prt(t[9]),this.eT(t[10]),this._Dt&&this._Dt.PDt(t[12]),t[14]&&g.set(this,{FDt:t[14][1],jDt:t[14][2]}),t[15]){const s=t[15],e=(this.nB(s[0],s[1]),this.fB()),h=s[2];for(let i=0,t=h.length;i<t;++i){const n=h[i];for(let t=0,s=n.length;t<s;++t){const r=n[t],o=e.tb(t,i);o.mT(r[0]),o.MT(r[1]),o.ST(r[2]),o.bT(r[3]),o.vT(r[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.df.nEt();l&&c&&c.Nlt(this.Yz(),a),u&&c&&c.Nlt(this.Yz(),i)}m=!0,this.BDt()}D_t(){this.il=0,this.el=0,this.sT=0,this.dDt=0,this.pDt=0,this.yx=0,this.Ko=0,this.mDt=0,this.gDt=1,this.yDt=0,this.MDt=0,this.BDt()}Wk(){return this.df}LF(){return this.aft}Yz(){return this.Gi}zDt(){return this.H5()?this.UDt(this.v5().WDt()-this.DDt.QEt()):0}mT(t){if(t=+t,this.B5()){const s=this.DDt,i=t-this.pT(),e=-this.zDt();0==e?this.il+=i/s.UEt():(this.il+=Math.cos(e)*i/s.UEt(),this.U5()&&(this.el+=Math.sin(e)*i/s.WEt()))}else this.il=t}Hnt(t,s=!1){t=+t,!s&&this.B5()?this.mT(this.pT()+t):this.il+=t}pT(){if(this.B5()){let t=this.il,s=this.DDt,i=this.v5(),e=this.zDt();return 0===e?t*=s.UEt():(t=t*s.UEt()*Math.cos(e),this.U5()&&(t-=this.el*s.WEt()*Math.sin(e))),i.pT()+t}return this.il}MT(t){if(t=+t,this.U5()){const s=this.DDt,i=t-this.yT(),e=-this.zDt();0==e?this.el+=i/s.WEt():(this.B5()&&(this.il-=Math.sin(e)*i/s.UEt()),this.el+=Math.cos(e)*i/s.WEt())}else this.el=t}qnt(t,s=!1){t=+t,!s&&this.U5()?this.MT(this.yT()+t):this.el+=t}yT(){if(this.U5()){let t=this.el,s=this.DDt,i=this.v5(),e=this.zDt();return 0===e?t*=s.WEt():(t=t*s.WEt()*Math.cos(e),this.B5()&&(t+=this.il*s.UEt()*Math.sin(e))),i.yT()+t}return this.el}Xj(t,s){if(t=+t,s=+s,this.QDt()){const i=this.B5(),e=this.U5(),h=this.DDt,n=t-this.pT(),r=s-this.yT(),o=-this.zDt();if(0==o)i?this.il+=n/h.UEt():this.il=t,e?this.el+=r/h.WEt():this.el=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.il+=e?(l*n-a*r)/h.UEt():l*n/h.UEt():this.il=t,e?this.el+=i?(a*n+l*r)/h.WEt():l*r/h.WEt():this.el=s}}else this.il=t,this.el=s}VDt(){return[this.pT(),this.yT()]}t5(t,s){t=+t,s=+s,this.QDt()?this.Xj(this.pT()+t,this.yT()+s):(this.il+=t,this.el+=s)}rTt(t,s){return this.pT()===t&&this.yT()===s}ST(t){if(t=+t,this.Z5()&&(t-=this.v5().wT()),this.sT!==t){this.sT=t,this.JDt();const s=this.vk();0!==this.sT&&s.FJ(),s.Ek(this)}}JDt(){if(this.BDt(),this.S7()){const i=this.vq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.Z5()&&e.JDt()}}}mrt(t){this.ST(this.wT()+t)}wT(){return this.Z5()?this.v5().wT()+this.sT:this.sT}i5(){return this.vk().wT()+this.wT()}git(){const t=this.Yz().G3().Zwt();return t<2&&this.Yz().wB().git()}xm(t){if(t=+t,this.Q5()){const s=this.pm();0===s?this.dDt=Number.EPSILON:this.dDt*=t/s}else this.dDt=t;this.YDt()}Hm(t,s){t=+t,!s&&this.Q5()?this.xm(this.pm()+t):this.dDt+=t,this.YDt()}pm(){if(this.Q5()){const t=this.v5(),s=t.pm(),i=t.$nt().Knt();return i===Number.EPSILON?(this.$nt().Knt()+s)*this.dDt:s*this.dDt}return this.dDt}gm(t){if(t=+t,this.J5()){const s=this.Cm();0===s?this.pDt=Number.EPSILON:this.pDt*=t/s}else this.pDt=t;this.YDt()}ert(t,s){t=+t,!s&&this.J5()?this.gm(this.Cm()+t):this.pDt+=t,this.YDt()}Cm(){if(this.J5()){const t=this.v5(),s=t.Cm(),i=t.$nt().srt();return i===Number.EPSILON?(this.$nt().srt()+s)*this.pDt:s*this.pDt}return this.pDt}t_(t,s){if(t=+t,s=+s,this.Q5()){const i=this.pm();0===i?this.dDt=Number.EPSILON:this.dDt*=t/i}else this.dDt=t;if(this.J5()){const e=this.Cm();0===e?this.pDt=Number.EPSILON:this.pDt*=s/e}else this.pDt=s;this.YDt()}ac(){return[this.pm(),this.Cm()]}qH(){return this.yx}HDt(t){if(t<0)throw new RangeError("invalid depth");this.yx=t}qDt(){if(this.P5()){const t=this.DDt;return Math.min(t.UEt(),t.WEt())}return 1}e3(){return 0!=(128&this.ySt)}i4(t){t=+t,this.e3()&&(this.H5()&&(t-=this.v5().e4()),t=d.Mn(t),this.Ko!==t)&&(this.Ko=t,this.YDt())}hrt(t){0!=(t=+t)&&this.e3()&&(this.Ko=d.Mn(this.Ko+t),this.YDt())}YDt(){if(this.ySt|=1<<18,this.S7()){const i=this.vq();for(let t=0,s=i.length;t<s;t++)i[t].YDt()}}e4(){return this.H5()&&this.e3()?this.UDt(d.Mn(this.v5().WDt()+this.Ko)):this.Ko}WDt(){return this.H5()&&this.e3()?d.Mn(this.v5().WDt()+this.Ko):this.Ko}UDt(t){return this.Q5()&&this.C5().pm()<0&&(t=d.Mn(d.Nn(t,this.C5().e4()+Math.PI))),this.J5()&&this.C5().Cm()<0?d.Nn(t,this.C5().e4()):t}ZDt(){const t=this.v5();return!!(this.Q5()&&t.pm()<0)||!!(this.J5()&&t.Cm()<0)}XDt(){const t=this.v5();return!!(this.Q5()&&t.pm()<0&&this.J5()&&t.Cm()<0)}KDt(){const t=this.ySt;if(0!=(t&1<<18)){const s=this.e4();this.mDt=Math.sin(s),this.gDt=Math.cos(s),this.ySt=-262145&t}}cTt(){return this.KDt(),this.mDt}uTt(){return this.KDt(),this.gDt}frt(t){this.yDt=+t}crt(t){this.yDt+=+t}oz(){return this.yDt}prt(t){this.MDt=+t}drt(t){this.MDt+=+t}lz(){return this.MDt}kDt(t){this.tT.equals(t)||(this.tT===i?(this.tT=d.un(d.Ho,t),this.CDt=d.un(d.Ho,t),this.CDt.xa()):t.wa(1,1,1,1)?(this.tT=i,this.CDt=i):(this.tT.set(t),this.CDt.set(t),this.CDt.xa()),this.BDt())}ND(t){if(t=d.yn(+t,0,1),this.K5()){if(this.$nt().DTt()===t)return;this.$nt().zEt(t),t=this.DD()}else if(this.tT.a===t)return;this.$Dt(t)}tAt(){if(this.S7()){const i=this.vq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.$Dt(e.DD())}}}$Dt(t){f.la(this.tT),f.a=t,this.kDt(f),this.tAt()}ort(t){this.K5()?this.ND(this.$nt().DTt()+t):this.ND(this.DD()+t)}DD(){return this.K5()?this.v5().DD()*this.$nt().DTt():this.tT.a}c5(t){this.tT.ya(t)||(f.la(t),f.a=this.DD(),this.kDt(f))}Bnt(t,s,i){f.ta(t,s,i),this.c5(f)}sAt(t,s,i){0===t&&0===s&&0===i||(f.la(this.tT),f.r+=t,f.g+=s,f.b+=i,this.c5(f))}u5(){return this.tT}nJ(){return this.CDt}eB(){return 0!=(512&this.ySt)}iAt(t){this.eAt(512,t)}B5(){return 0!=(1024&this.ySt)}hAt(t){this.eAt(1024,t)}U5(){return 0!=(2048&this.ySt)}QDt(){return 0!=(3072&this.ySt)}nAt(t){this.eAt(2048,t)}Q5(){return 0!=(4096&this.ySt)}rAt(t){this.eAt(4096,t)}J5(){return 0!=(8192&this.ySt)}oAt(t){this.eAt(8192,t)}H5(){return 0!=(16384&this.ySt)}aAt(t){this.eAt(16384,t)}Z5(){return 0!=(32768&this.ySt)}lAt(t){this.eAt(32768,t)}K5(){return 0!=(this.ySt&1<<22)}uAt(t){this.eAt(1<<22,t)}sB(){return 0!=(this.ySt&1<<23)}cAt(t){this.eAt(1<<23,t)}fAt(){this.ySt&=-12647937}O5(t,s){if(t===this)return!1;if(t.P5())return!1;if(this.dAt(t))return!1;if(this.pAt(t))return!1;const i=t.pT(),e=t.yT(),h=t.pm(),n=t.Cm(),r=t.e4(),o=t.wT(),a=t.DD(),l=(t.mAt(this),t.hAt(s.j5),t.nAt(s.z5),t.rAt(s.W5),t.oAt(s.V5),t.aAt(s.Y5),t.lAt(s.q5),t.uAt(s.X5),t.cAt(s.tB),t.iAt(s.iB),i-this.pT()),u=e-this.yT(),c=-this.e4(),f=Math.cos(c),d=Math.sin(c);if(s.j5&&(s.Y5?t.il=l*f-u*d:t.il=l,s.W5)){const p=this.pm()/this.DDt.Knt();0!=p&&(t.il/=p)}if(s.z5&&(s.Y5?t.el=l*d+u*f:t.el=u,s.V5)){const m=this.Cm()/this.DDt.srt();0!=m&&(t.el/=m)}if(s.W5){const g=this.pm();0===g||g===Number.EPSILON?(t.dDt=1,t.DDt.jEt(1)):(t.dDt=h/this.pm(),t.DDt.jEt(t.dDt))}if(s.V5){const y=this.Cm();0===y||y===Number.EPSILON?(t.pDt=1,t.DDt.BEt(1)):(t.pDt=n/this.Cm(),t.DDt.BEt(t.pDt))}return s.Y5&&(t.Ko=r-this.e4()),s.q5&&(t.sT=o-this.wT()),s.X5&&t.DDt.zEt(a),s.tB&&t.z4(this.W4()),this.gAt(t),this.Zj(),this.tAt(),!0}R5(t){if(t.v5()===this){const s=t.pT(),i=t.yT(),e=t.pm(),h=t.Cm(),n=t.e4(),r=t.wT(),o=t.DD();t.mAt(null),t.fAt(),t.Xj(s,i),t.t_(e,h),t.i4(n),t.ST(r),t.ND(o),this.yAt(t),this.Zj()}}MAt(){return this.ADt}wAt(){this.SAt();const t=[...this.children()];for(const i of t)this.R5(i);const s=this.v5();s&&s.R5(this),this.fAt()}SAt(){if(this.TAt(),!this.AEt){const s=[...this.children()];s.length&&(this.AEt=[],this.NEt=new WeakMap);let t=0;for(const i of s){const e=i.Yz();this.AEt.push(e),this.NEt.set(e,t),t++}}const t=this.v5();t&&t.SAt()}TAt(){if(-1===this.ADt){const t=[...this.I5()];this.ADt=t.length;for(const i of t)i.TAt();const s=[...this.children()];for(const e of s)e.TAt()}}RDt(){this.AEt&&(this.AEt.length=0),this.AEt=null,this.NEt=null;const t=this.v5();t&&t.RDt(),this.ADt=-1}P5(){return null!==this.v5()}v5(){const t=this.DDt;return null!==t?t.v5():null}C5(){let t=this;for(;t.P5();)t=t.v5();return t}*I5(){let t=this.v5();for(;t;)yield t,t=t.v5()}K_t(t){return this.vq().includes(t)}S7(){const t=this.DDt;return null!==t&&t.S7()}vq(){const t=this.DDt;return null!==t?t.vq():e}children(){return this.vq()}*N5(){for(const t of this.children())yield t,yield*t.N5()}E5(){return this.vq().length}obt(){return[...this.N5()].length}A5(t){const s=this.vq();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}iEt(s){if(s){const i=this.vq();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}bAt(t){this.DDt||(this.DDt=d.un(d.Cq,this)),t&&this.DDt.kEt(t)}$nt(){return this.DDt}ODt(){this.DDt&&(this.DDt.cn(),this.DDt=null)}mAt(t){t?(t.bAt(null),this.bAt(t)):(this.DDt&&this.DDt.kEt(null),this.S7()||this.ODt())}pAt(t){if(!this.P5())return!1;const s=this.v5();return s===t||s.pAt(t)}dAt(t){if(this.K_t(t))return!0;for(const s of this.vq())if(s.dAt(t))return!0;return!1}gAt(t){this.DDt.vq().push(t)}yAt(t){const s=this.DDt.vq(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.P5()||this.ODt(),t.S7()||t.ODt()}hEt(){const t=g.get(this);return t?t.FDt:null}xAt(){const t=g.get(this);return t?t.jDt:NaN}w7(){const t=a.get(this);return d.pe(t)?t:NaN}vAt(t){a.set(this,t)}GAt(){this.eAt(1<<19,!0),this.BDt()}BDt(){if(m){const s=this.df.PS();this.IDt&&s.aw(this.IDt);let t;t=0!=(this.ySt&1<<19)?s.zM()||"<point>":s.FM()||"<default>",this.IDt=s.ew(t,this.pF(),this.CDt,this.wT())}}i7(){return this.IDt}eY(){return this.tT===i}eT(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.pF()!==t&&(this.ySt=this.ySt&~(31<<26)|t<<26,this.BDt())}pF(){return(this.ySt&31<<26)>>26}_k(t,s){const i=s&&this.uDt!==t;i&&this.kJ(),this.aft.h_t(this,this.uDt,t),this.uDt=t,i&&this.CAt(),0!==this.wT()&&this.uDt.FJ()}vk(){return this.uDt}hk(){return this.vk().hk()}BJ(t){this.cDt=0|t}Gk(){return this.uDt.ZY(),this.cDt}tH(t){this.fDt=0|t}JU(){return this.uDt.KY(),this.fDt}FV(){return this.cDt}eAt(t,s){s?this.ySt|=t:this.ySt&=~t}W4(){return 0!=(1&this.ySt)}z4(t){if(this.eAt(1,t),this.S7())for(const s of this.vq())s.sB()&&s.z4(t)}T5(){return 0!=(8&this.ySt)}b5(t){t=!!t,this.T5()!==t&&(this.eAt(8,t),t?this.Zj():this.IAt())}_At(t,s){if(this.eAt(32,t),this.GDt&&this.GDt.clear(),s.trim()){this.GDt||(this.GDt=new Set);for(const i of s.split(" "))i&&this.GDt.add(i.toLowerCase())}else this.GDt=null}EAt(t){const s=0!=(32&this.ySt),i=this.GDt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}Zj(){if(this.ySt|=65554,this.aft.s_t(!0),this.df.Dk(),this.uDt.yJ()&&(this.DAt(this.wDt,this.SDt,!0),this.ySt&=-3,this.CAt()),0!=(4&this.ySt)&&this.Gi.Jf().dispatchEvent(s),null!==this.DDt){const i=this.DDt.vq();for(let t=0,s=i.length;t<s;++t)i[t].Zj()}}DAt(t,s,i){const e=this.pT(),h=this.yT(),n=this.pm(),r=this.Cm(),o=this.e4();t.Ml(e-this.yDt*n,h-this.MDt*r,n,r),i&&this.cB()&&this.AAt(t),0===o?s.xu(t):(t.offset(-e,-h),s.Gu(t,this.cTt(),this.uTt()),s.offset(e,h),s.Cu(t)),t.normalize()}NAt(){const t=this.ySt;0!=(2&t)&&(this.DAt(this.wDt,this.SDt,!0),this.ySt=-3&t)}h5(){return this.NAt(),this.wDt}r5(){return this.NAt(),this.SDt}LAt(t){const s=this.pT(),i=this.yT(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(r.I(t),r.offset(e,h),r)}OAt(t){this.wDt.I(t),this.SDt.xu(this.wDt),this.ySt&=-3,this.e_t(),this.CAt()}RAt(t){this.eAt(4,t)}kAt(){return 0!=(4&this.ySt)}QH(t,s,i){return s&&0!==this.qH()?this.YH(this.vk().JH()):0===this.wT()||i?t.Zl(this.h5()):this.PAt()}PAt(){const t=this.vk(),s=this.i5();return!(s>=t.bY())&&(t.SY(s,n),n.Zl(this.h5()))}YH(t){const s=this.h5(),i=s.Cl(),e=s._l(),h=s.Il(),n=s.El(),r=this.i5(),o=r+this.qH();return t.Gy(i,h,r,e,n,o)}a5(){const t=this.vk();if(t.OY())return this.YH(t.JH());{const s=t.hk();return this.QH(t.MF(),s.WH(),s.A4())}}$H(t){this.eAt(1<<20,t)}KH(t){this.eAt(1<<21,t)}FAt(){return 0!=(this.ySt&1<<20)}jAt(){return 0!=(this.ySt&1<<21)}BAt(t){this.xDt=t,this.zAt(),this.cB()&&(this.NDt.UAt=null)}WAt(){return this.xDt}QAt(){return null!==this.xDt||this.cB()}VAt(){return this.JAt(this.pm(),this.Cm(),this.e4(),this.cTt(),this.uTt())}YAt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.JAt(t,s,i,e,h)}JAt(h,n,t,r,o){let s=this.vDt;null===s&&(s={LDt:d.un(d.ku),width:NaN,height:NaN,angle:NaN},this.vDt=s);const a=s.LDt;if(s.width!==h||s.height!==n||s.angle!==t){const l=this.xDt;if(this.cB()){let t=this.oz(),s=this.lz(),i=this.fB(),e=this.NDt.UAt;e||(l?(u.I(l),u.offset(t,s)):u.Qu(),e=i.hb(u),this.NDt.UAt=e),i.nb(e,a),a.offset(-t,-s),a.Hu(h,n,r,o)}else l?(a.I(l),a.Hu(h,n,r,o)):a.Yu(this.r5(),-this.pT(),-this.yT());s.width=h,s.height=n,s.angle=t}return a}zAt(){this.HAt(!0);const t=this.vDt;null!==t&&(t.width=NaN)}nB(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Yz().G3().f3())throw new Error("object does not support mesh");this.oB(),this.NDt={qAt:d.un(d.oy.NT,t,s),ZAt:d.un(d.oy.NT,t,s),UAt:null}}cB(){return null!==this.NDt}fB(){if(this.cB())return this.NDt.qAt;throw new Error("no mesh")}XAt(){if(this.cB())return this.NDt.ZAt;throw new Error("no mesh")}KAt(t){this.eAt(65536,t)}$At(){return 0!=(65536&this.ySt)}HAt(t){this.eAt(1<<17,t)}tNt(){return 0!=(this.ySt&1<<17)}AAt(t){const s=this.NDt.qAt,i=Math.min(s.HT(),0),e=Math.min(s.qT(),0),h=Math.max(s.ZT(),1),n=Math.max(s.XT(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.kl((h-1)*r),t.Pl((n-1)*o),this.yx=s.KT()}oB(){this.NDt&&(this.NDt.qAt.cn(),this.NDt.ZAt.cn(),this.NDt=null,this.zAt())}lB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,n=i.x,r=i.y,o=i.oF,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.cB())return!1;const u=this.fB(),c=u.tb(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.wT()!==o&&(c.ST(o),f=!0),h&&(n+=t/(u.WT()-1),r+=s/(u.QT()-1)),a=-1!==a||h?(h&&(a+=t/(u.WT()-1)),d.yn(a,0,1)):c.TT(),l=-1!==l||h?(h&&(l+=s/(u.QT()-1)),d.yn(l,0,1)):c.xT(),c.pT()===n&&c.yT()===r&&c.TT()===a&&c.xT()===l?f:(c.mT(n),c.MT(r),c.bT(a),c.vT(l),this.zAt(),!0)}j_t(){return this.Gi.j_t()}x5(t,s){return!!this.h5().Kl(t,s)&&!!this.r5().Kl(t,s)&&(this.j_t()?this.Gi.wB().vvt(t,s):!this.QAt()||this.VAt().Kl(t-this.pT(),s-this.yT()))}sNt(){return 0!=(16&this.ySt)}e_t(){if(this.sNt()&&this.T5()&&0==(256&this.ySt)){const t=this.h5(),s=this.aft.t_t(),i=this.TDt;if(n.set(s.s8(t.Cl()),s.i8(t.Il()),s.s8(t._l()),s.i8(t.El())),!i.equals(n)){const e=this.Gi;i===h?(s.e8(e,null,n),this.TDt=d.un(d.Rect,n)):(s.e8(e,i,n),i.I(n)),this.ySt&=-17}}}iNt(){this.ySt|=16}IAt(){const t=this.TDt;t!==h&&(this.aft.t_t().e8(this.Gi,t,null),this.TDt=h)}CAt(){const t=this.vk();if(t.yJ()&&0==(256&this.ySt)){const s=t.nY(),i=this.h5(),e=this.bDt;if(n.set(s.s8(i.Cl()),s.i8(i.Il()),s.s8(i._l()),s.i8(i.El())),!e.equals(n)){const h=this.Gi;e===o?(s.e8(h,null,n),this.bDt=d.un(d.Rect,n)):(s.e8(h,e,n),e.I(n)),t.rY()}}}kJ(){const t=this.bDt;t!==o&&(this.vk().nY().e8(this.Gi,t,null),this.bDt=o)}XY(){return this.bDt}d5(){const t=this.Gi,s=this.uDt,i=s.Ik();i.length&&i.at(-1)===t||(s.RJ(t,!1),s.NJ(t,!1),this.df.Dk())}m5(){const t=this.Gi,s=this.uDt,i=s.Ik();i.length&&i[0]===t||(s.RJ(t,!1),s.OJ(t,!1),this.df.Dk())}y5(t){const s=this.Gi,i=this.uDt;if(i.hk()!==t.hk())throw new Error("layer from different layout");t!==i&&(i.RJ(s,!0),this._k(t),t.NJ(s,!0),this.df.Dk())}w5(t,s){let i=this.Gi,e=!1,h=this.uDt;if(t.YF()!==i.YF()){const n=t.xk();if(!n)throw new Error("expected world instance");const r=n.vk(),o=(h.bO()!==r.bO()&&(h.RJ(i,!0),this._k(r),r.NJ(i,!0),e=!0),r.eH(i,t,!!s));(e||o)&&this.df.Dk()}}Hj(){return this._Dt}eNt(t){this.eAt(64,t)}uH(){return 0!=(64&this.ySt)}g7(t,s=null){const i={x:this.pT(),y:this.yT(),w:this.pm(),h:this.Cm(),l:this.vk().$J(),zi:this.Gk()},e=(0!==this.wT()&&(i.ze=this.wT()),0!==this.e4()&&(i.a=this.WDt()),this.eY()||(i.c=this.tT.toJSON()),.5!==this.oz()&&(i.oX=this.oz()),.5!==this.lz()&&(i.oY=this.lz()),0!==this.pF()&&(i.bm=this.pF()),this.W4()||(i.v=this.W4()),this.T5()||(i.ce=this.T5()),this.kAt()&&(i.be=this.kAt()),this._Dt&&(i.fx=this._Dt.g7()),0!=(32&this.ySt));return e&&(i.sfi=e),this.GDt&&(i.sft=[...this.GDt].join(" ")),this.DDt&&"visual-state"!==t&&(i.sgi=this.DDt.g7(t,s),g.has(this))&&(i.sgcd=g.get(this).FDt,i.sgzid=g.get(this).jDt),this.cB()&&(i.mesh=this.fB().IT()),i}ZEt(){return{x:this.il,y:this.el,z:this.sT,w:this.dDt,h:this.pDt,a:this.Ko,sgi:this.$nt()?this.$nt().VEt():null}}tDt(t){t&&(this.il=t.x,this.el=t.y,this.sT=t.z,this.dDt=t.w,this.pDt=t.h,this.Ko=t.a,t.sgi&&this.$nt()&&this.$nt().y7(t.sgi),this.YDt(),this.Zj())}c_t(){this.RDt(),this.wAt(),this.bAt(null),this.DDt&&this.DDt.KEt(this.AEt,this.NEt)}LZ(t){"visual-state"!==t&&this.wAt()}RZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ySt)&&this.DDt.RZ(t.sgi,i)}TEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ySt)&&(this.DDt.KEt(null,null),this.RDt(),this.Zj())}y7(t,s){if(m=!1,this.mT(t.x),this.MT(t.y),this.xm(t.w),this.gm(t.h),this.BJ(t.zi),this.ST(t.hasOwnProperty("ze")?t.ze:0),this.i4(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Va(t.c):t.hasOwnProperty("o")?(f.la(this.tT),f.a=t.o):f.$o(1,1,1,1),this.kDt(f),this.frt(t.hasOwnProperty("oX")?t.oX:.5),this.prt(t.hasOwnProperty("oY")?t.oY:.5),this.eT(t.hasOwnProperty("bm")?t.bm:0),this.z4(!t.hasOwnProperty("v")||t.v),this.b5(!t.hasOwnProperty("ce")||t.ce),this.RAt(!!t.hasOwnProperty("be")&&t.be),this._At(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this._Dt&&t.hasOwnProperty("fx")&&this._Dt.y7(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.AEt)for(const i of this.AEt)i.KU()||this.df.BF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.bAt(null);const e=this.DDt,h=t.sgi;e.y7(h),e.KEt(this.AEt,this.NEt),t.sgcd&&d.pe(t.sgzid)&&g.set(this,{FDt:t.sgcd,jDt:t.sgzid})}if(t.hasOwnProperty("mesh")){const n=t.mesh;this.nB(n.cols,n.rows),this.fB()._T(n)}else this.oB();this.Zj(),m=!0,this.BDt(),"visual-state"!==s&&this.df.hNt(this.Yz(),t)}}}{const Sa=self.Ps;Sa.VCt=class extends Sa.an{constructor(t,s){super();const i=t.Wk(),e=i.wyt(s[1]),h=(i.nNt().wGt(e),this.df=i,this.aft=t,this.Kvt=Sa.HP.OB(e),this.P2t=null,this.rNt=null,this.bCt=e.Instance,this.w8=s[2],this.mn=s[0],this.iMt=this.df.Pdt(s[3]),this.Kvt.Zwt());if(h<2&&(this.P2t=Sa.un(e.aIt,this),!(this.P2t instanceof Sa.Xvt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Sa.HP.w2t(this,h),2<=h){const n=e.aIt??globalThis.l6;if(this.rNt=new n,!(this.rNt instanceof globalThis.l6))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.rNt=new globalThis.NB;Sa.HP.S2t(h),this.m2t()}static i2(t,s){return Sa.un(Sa.VCt,t,s)}cn(){this.df=null,this.Kvt=null,this.P2t&&(this.P2t.cn(),this.P2t=null),this.bCt=null}JSt(){return this.P2t}m2t(){this.P2t?this.P2t.m2t():this.rNt&&this.rNt.fU()}Wk(){return this.df}LF(){return this.aft}CB(){return this.Kvt}DIt(){return this.bCt}ef(){return this.mn}$J(){return this.w8}_B(){return this.rNt}Pdt(){return this.iMt}}}{const Ta=self.Ps,ba=self.vB;Ta.v_t=class extends Ta.an{constructor(t){super(),this.df=t.runtime,this.OMt=t.IB,this.Kvt=this.OMt.CB(),this.Gi=t.DB,this.Kg=t.index,this.g_t=null,this.y_t=null,this.Kvt.NJ(this.Gi)}cn(){this.y_t&&(this.y_t.FF(),this.y_t=null),this.Kvt.RJ(this.Gi),this.g_t&&(this.g_t.cn(),this.g_t=null),this.df=null,this.OMt=null,this.Kvt=null,this.Gi=null}GIt(t){if(this.g_t)throw new Error("already got sdk instance");const s=this.CB().Zwt();if(s<2){if(this.g_t=Ta.un(this.OMt.DIt(),this,t),!(this.g_t instanceof Ta.$vt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.CB().g2t();this.M2t(i.Instance,t)}}wB(){return this.g_t??this.y_t}AB(){return this.Gi}Wk(){return this.df}EB(){return this.OMt}CB(){return this.Kvt}Cnt(){return this.Kg}eGt(){this.g_t?this.g_t.eGt():this.y_t.d6()}oGt(t,s){this.g_t&&this.g_t.oGt(t,s)}SEt(){return this.g_t?this.g_t.hvt():this.y_t.Oj()}IT(t="full"){return this.g_t?this.g_t.IT(t):this.y_t.Rj(t)}_T(t,s="full"){if(this.g_t)return this.g_t._T(t,s);this.y_t.kj(t,s)}static oNt(t,s,i){let e=globalThis.u6,h,n;h=s instanceof e?t.y4(s):s.iGt(),n=i instanceof e?t.y4(i):i.iGt();const r=h.AB(),o=n.AB(),a=r.LF().bO(),l=o.LF().bO();if(a!==l)return a-l;const u=r.aEt(),c=o.aEt();return u!==c?u-c:h.Cnt()-n.Cnt()}M2t(t,s){const i=ba,e=t??this.g_t.g2t(),h=e||i,n=this.CB().Zwt();if(Ta.HP.w2t(this,n),Ta.HP.SGt(s),this.y_t=new h,Ta.HP.TGt(),Ta.HP.S2t(n),!e||this.y_t instanceof i)return this.y_t;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}B2t(){return this.y_t||this.M2t()}avt(){return!!this.y_t}}}{const xa=self.Ps;xa.eJ=class extends xa.an{constructor(t,s){super(),this.RT=t,this.aNt=[],this.lNt=[],this.uNt=new Map,this.cNt=[],this.fNt=[],this.dNt=new Set,this.DS=!0;for(const i of s){const e=xa.un(xa.pNt,this,i,this.aNt.length);this.aNt.push(e),this.uNt.set(e.ef().toLowerCase(),e),3<=i.length&&this.cNt.push(this.mNt(e,i[2]))}this.Wk().gNt(this)}cn(){this.Wk().yNt(this);for(const t of this.fNt)t.cn();xa.Wr(this.fNt),xa.Wr(this.aNt),xa.Wr(this.lNt),this.uNt.clear(),xa.Wr(this.cNt),this.RT=null}MNt(t){this.dNt.add(t)}wNt(t){this.dNt.delete(t)}SNt(t){t.AM()&&(this.fNt=this.aNt.map(t=>{const s=t.lv();return 0<s.GetCustomParametersByteSize()?xa.un(xa.oy.WebGPUEffectCustomParamsBuffer,s):null}),this.TNt());for(const s of this.dNt)s.SNt(t)}xIt(t){if(t.length){this.aNt=t.concat(this.aNt);for(const s of t)this.uNt.set(s.ef().toLowerCase(),s);for(let t=0,s=this.aNt.length;t<s;++t)this.aNt[t].HJ(t)}}mNt(t,s){t.bNt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=xa.un(xa.Ho);h.Va(e),i[t]=h}}return i}VT(){return this.RT}Wk(){return this.RT.Wk()}PB(){xa.Wr(this.lNt);let t=!0;for(const s of this.aNt)s.nmt()&&(this.lNt.push(s),s.lv().WS()||(t=!1));this.DS=t}Z3(){return this.aNt}FIt(){return 0<this.aNt.length}Eht(t){return this.uNt.get(t.toLowerCase())||null}xNt(t){if((t=Math.floor(+t))<0||t>=this.aNt.length)throw new RangeError("invalid effect type index");return this.aNt[t]}RB(t){return this.xNt(t).nmt()}kB(t,s){this.xNt(t).bNt(s)}hY(){return this.lNt}uH(){return 0<this.lNt.length}WS(){return this.DS}_ht(t){return this.cNt[t]}oJ(t){return(t<this.fNt.length?this.fNt:this.cNt)[t]}jB(t,s){if(t<0||t>=this.cNt.length)return null;const i=this.cNt[t];return s<0||s>=i.length?null:i[s]}BB(t,s,i){if(t<0||t>=this.cNt.length)return!1;const e=this.cNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof xa.Ho){if(h.ya(i))return!1;h.la(i)}else{if(h===i)return!1;e[s]=i}return t<this.fNt.length&&this.fNt[t].SetParameterValue(s,i),!0}TNt(){const i=this.cNt,e=this.fNt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}static vNt(t){return t&&t instanceof xa.Ho?{t:"color",v:t.toJSON()}:t}static GNt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=xa.un(xa.Ho);return i.Va(t.v),i}}}static CNt(t){return t.map(xa.eJ.vNt)}static INt(t){return t.map(xa.eJ.GNt)}IT(){return this.aNt.map(t=>({name:t.ef(),active:t.nmt(),params:xa.eJ.CNt(this.cNt[t.bO()])}))}_T(t){for(const s of t){const i=this.Eht(s.name);i&&(i.bNt(s.active),this.cNt[i.bO()]=xa.eJ.INt(s.params))}this.PB(),this.TNt()}}}{const va=self.Ps;va.pNt=class extends va.an{constructor(t,s,i){super(),this.iJ=t,this.mf=s[0],this.mn=s[1],this.Kg=i,this.XS=null,this.f0=!0}cn(){this.iJ=null,this.XS=null}bIt(t){const s=va.un(va.pNt,t,[this.mf,this.mn],-1);return s.XS=this.XS,s.f0=this.f0,s}SNt(t){const s=t.PM(this.mf);if(!s)throw new Error("failed to find shader program '"+this.mf+"'");this.XS=s}q3(){return this.iJ}ef(){return this.mn}HJ(t){this.Kg=t}bO(){return this.Kg}VT(){return this.iJ.VT()}Wk(){return this.iJ.Wk()}bNt(t){this.f0=!!t}nmt(){return this.f0}lv(){return this.XS}_Nt(){const i=[];for(let t=0,s=this.XS.uv();t<s;++t){const e=this.XS.cv(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(va.un(va.Ho,1,1,1,1))}}return i}}}{const Ga=self.Ps;Ga.EDt=class extends Ga.an{constructor(t,s){super(),this.Gi=t,this.ENt=s,this.iJ=t.LF().q3(),this.DNt=!0,this.lJ=!0,this.ANt=!1,this.NNt=!1,this.LNt=!1,this.ONt=!1,this.MO=Ga.un(Ga.oy.MN,t.Wk().AP().hJ(),{oN:(t,s)=>{const i=s.uO(),e=i.xk();t.hT(e.nJ()),t.bw(e.i5()),i.ib(t),t.bw(0)},aN:t=>{const s=t.wvt(),[i,e]=t.Mvt();return{eO:s,hO:i,nO:e}},lN:t=>this.oJ(t)}),this.RNt=[],this.lNt=[],this.DS=!0,this.cNt=[],this.fNt=[],this.SNt(t.Wk().PS());for(let t=0,s=this.iJ.Z3().length;t<s;++t)this.RNt.push(!0);this.PB(),this.iJ.MNt(this)}cn(){this.iJ.wNt(this);for(const t of this.fNt)t&&t.cn();Ga.Wr(this.fNt),this.MO.cn(),this.MO=null,Ga.Wr(this.RNt),Ga.Wr(this.lNt),Ga.Wr(this.cNt),this.Gi=null,this.iJ=null}SNt(t){t.AM()&&(this.fNt=this.iJ.Z3().map(t=>{const s=t.lv();return 0<s.GetCustomParametersByteSize()?Ga.un(Ga.oy.WebGPUEffectCustomParamsBuffer,s):null}))}PDt(t){let s=0;for(const i of t)this.cNt.push(this.mNt(s,i)),++s;this.TNt(),this.PB()}mNt(t,s){this.RNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ga.un(Ga.Ho);h.Va(e),i[t]=h}}return i}A_t(){for(const t of this.iJ.Z3())this.cNt.push(t._Nt());this.TNt()}VT(){return this.RT}q3(){return this.iJ}TO(){return this.iY(),this.MO}Wk(){return this.Gi.Wk()}PB(){Ga.Wr(this.lNt);let t=this.ENt,i=this.iJ.Z3(),e=this.lNt,h=this.RNt,n=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const r=i[t];e.push(r),r.lv().WS()||(n=!1)}this.DS=n,t.eNt(!!e.length),this.DNt=!0}iY(){const t=this.Gi,s=this.ENt,i=s.eY(),e=t.G3().o3(),h=0!==s.e4()||0!==s.vk().e4()||s.pm()<0||s.Cm()<0,n=t.bvt(),r=t.US();(this.DNt||i!==this.lJ||e!==this.ANt||h!==this.NNt||n!==this.LNt||r!==this.ONt||this.MO.aL())&&(this.MO.lL(this.lNt.map(t=>t.lv()),{cN:this.lNt.map(t=>t.bO()),fN:!i||r,pN:e,mN:n,gN:h}),this.DNt=!1,this.lJ=i,this.ANt=e,this.NNt=h,this.LNt=n,this.ONt=r)}hY(){return this.lNt}_ht(t){return this.cNt[t]}oJ(t){return(t<this.fNt.length?this.fNt:this.cNt)[t]}jB(t,s){if(t<0||t>=this.cNt.length)return null;const i=this.cNt[t];return s<0||s>=i.length?null:i[s]}BB(t,s,i){if(t<0||t>=this.cNt.length)return!1;const e=this.cNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ga.Ho){if(h.ya(i))return!1;h.la(i)}else{if(h===i)return!1;e[s]=i}return t<this.fNt.length&&this.fNt[t].SetParameterValue(s,i),!0}TNt(){const i=this.cNt,e=this.fNt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=i[t];for(let t=0,s=n.length;t<s;++t)h.SetParameterValue(t,n[t])}}WS(){return this.DS}kNt(){return this.lNt.some(t=>t.lv().JS())}RB(t){return this.RNt[t]}kB(t,s){this.RNt[t]=!!s}Z3(){return this.iJ.Z3()}g7(){return this.iJ.Z3().map(t=>({name:t.ef(),active:this.RNt[t.bO()],params:Ga.eJ.CNt(this.cNt[t.bO()])}))}y7(t){for(const s of t){const i=this.iJ.Eht(s.name);i&&(this.RNt[i.bO()]=s.active,this.cNt[i.bO()]=Ga.eJ.INt(s.params))}this.PB(),this.TNt()}}}{let C=self.Ps,n=[],S=[],r=[],T=C.un(C.ku),M=C.un(C.ku),b=C.un(C.iu),d=C.un(C.Rect),p=C.un(C.Rect),m=null,g=null,y=null;C.PNt=class extends C.an{constructor(t){super(),this.df=t,this.FNt=0,this.jNt=0,this.BNt=[],this.zNt=0,this.UNt=0,this.WNt=0,this.QNt=0,this.VNt=new self.aP(this)}cn(){this.df=null}Wk(){return this.df}_O(){return this.VNt}JNt(){this.UNt=this.zNt,this.zNt=0,this.QNt=this.WNt,this.WNt=0}YNt(){return this.UNt}HNt(){return this.QNt}qNt(t,s){const i=t.xk(),e=s.xk();i&&e&&i.T5()&&e.T5()&&this.BNt.push([t,s])}ZTt(s,i,e){for(const[h,n]of this.BNt){let t=null;if(s===h)t=n;else{if(s!==n)continue;t=h}t.ebt(i)&&!e.includes(t)&&e.push(t)}}XTt(t,s){if(this.BNt.length)for(const[i,e]of this.BNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}ZNt(){C.Wr(this.BNt)}uP(t,s){if(!t||!s||t===s)return!1;const i=t.xk(),e=s.xk();if(!i.T5()||!e.T5())return!1;this.zNt++;const h=i.vk(),n=e.vk(),r=h.JY(n);return r?this.XNt(i,e):this.KNt(i,e)}XNt(t,s){if(!t.h5().Zl(s.h5()))return!1;if(this.WNt++,!t.r5()._u(s.r5()))return!1;if(t.j_t()&&s.j_t())return!1;if(t.j_t())return this.$Nt(t,s);if(s.j_t())return this.$Nt(s,t);if(!t.QAt()&&!s.QAt())return!0;const i=t.VAt(),e=s.VAt();return i.qu(e,s.pT()-t.pT(),s.yT()-t.yT())}KNt(i,e){const t=i.j_t(),s=e.j_t();if(t&&!s)return this.tLt(i,e);if(s&&!t)return this.tLt(e,i);if(s||t)return!1;{const h=i.vk(),n=e.vk(),r=(T.I(i.VAt()),M.I(e.VAt()),T.zu());for(let t=0,s=r.length;t<s;t+=2){const a=t+1,l=r[t],u=r[a],[c,f]=h.vF(l+i.pT(),u+i.yT());r[t]=c,r[a]=f}const o=M.zu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=n.vF(p+e.pT(),m+e.yT());o[t]=g,o[d]=y}return T.Vu(),M.Vu(),this.WNt++,T.qu(M,0,0)}}tLt(t,s){const i=t.vk(),e=s.vk(),h=(m=m||C.un(C.ku),g=g||C.un(C.Rect),y=y||C.un(C.iu),s.pT()),n=s.yT(),[r,o]=e.vF(h,n),[a,l]=i.SF(r,o),u=a-h,c=l-n;if(g.I(s.h5()),g.offset(u,c),!t.h5().Zl(g))return!1;if(y.I(s.r5()),y.offset(u,c),this.WNt++,!t.r5()._u(y))return!1;m.I(s.VAt());const f=m.zu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Vu(),this.$Nt(t,s,a,l,m,g,y)}$Nt(t,e,s,i,h,n,r){const o=void 0!==n?n:e.h5(),a=t.pT(),l=t.yT(),u=t.Yz().wB(),c=void 0!==s?s:e.pT(),f=void 0!==i?i:e.yT(),d=e.QAt(),p=void 0!==r?r:e.r5(),m=S;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.zNt++,o.Xl(y,a,l)&&(b.xu(y),b.offset(a,l),b._u(p)))if(d){let t=void 0!==h?h:e.VAt(),s=c,i=f;void 0!==h&&(s=e.pT(),i=e.yT());const M=g.GetPoly();if(M){if(this.WNt++,M.qu(t,s-(a+y.Cl()),i-(l+y.Il())))return C.Wr(m),!0}else if(T.Yu(b,0,0),T.qu(t,s,i))return C.Wr(m),!0}else{const w=g.GetPoly();if(!w)return C.Wr(m),!0;if(T.Yu(p,0,0),w.qu(T,-(a+y.Cl()),-(l+y.Il())))return C.Wr(m),!0}}return C.Wr(m),!1}sLt(t,o,a){const l=t.P3(),s=this.df.oR();if(!s)throw new Error("cannot call outside event");const u=s.Pft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.Z4(),i.set(t,s)),s};if(l.Sft()){a||(l.Ift(!1),C.Wr(l._ft())),u&&C.Wr(l.Eft());for(const e of t.R3()){let h=e.xk(),n=h.vk();if(!(!c(n)||!h.a5())&&o.some(([t,s])=>{const[i,e]=n.SF(t,s,h.i5());return h.x5(i,e)})){if(a)return!1;l.Gft(e)}else u&&l.Cft(e)}}else{let i,e=!1,r=(!u||s.Egt(this.df._dt())||this.df.XSt()&&!l.Eft().length&&l._ft().length?i=l._ft():(i=l.Eft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.xk(),n=h.vk();if(!(!c(n)||!h.a5())&&o.some(([t,s])=>{const[i,e]=n.SF(t,s,h.i5());return h.x5(i,e)})){if(a)return!1;e?l.Gft(t):i[r++]=t}else e?i[r++]=t:u&&l.Cft(t)}a||(i.length=r)}return t.uyt(),i.clear(),!!a||l.Tft()}iLt(t,s){if(t)for(const i of s.n_t())if(!t.JY(i))return!1;return!0}ZSt(t,s,i,e){if(s.VJ())for(const h of s.igt())this.iLt(t,h)?(h.i_t(),h.t_t().h8(i,e)):C.Zh(e,h.R3());else this.iLt(t,s)?(s.i_t(),s.t_t().h8(i,e)):C.Zh(e,s.R3())}SP(t,s,i,e){for(const h of s)this.ZSt(t,h,i,e)}eLt(t,s,i){const e=this.df.xGt();e&&this.SP(t,e.hX(),s,i)}hLt(t,s,i){const e=this.df.vGt();e&&this.SP(t,e.hX(),s,i)}EAt(t,s){return t.U_t()&&(!s||s.xk().EAt(t.iSt().get("solidTags")))}dP(t){const s=t.xk();this.eLt(s.vk(),s.h5(),n);for(const i of n)if(this.EAt(i,t)&&this.uP(t,i))return C.Wr(n),i;return C.Wr(n),null}nLt(t,s){this.eLt(null,t,n);for(const i of n)if(this.EAt(i,s)&&this.rLt(t,i))return C.Wr(n),i;return C.Wr(n),null}oLt(t,s){let i=null;s&&(i=r,C.Wr(i));const e=t.xk();this.hLt(e.vk(),e.h5(),n);for(const h of n)if(h.Q_t()&&this.uP(t,h)){if(!s)return C.Wr(n),h;i.push(h)}return C.Wr(n),i}aLt(s,i,e,h,n){h=h||50;const r=s.xk(),o=r.pT(),a=r.yT();for(let t=0;t<h;++t)if(r.Xj(o+i*t,a+e*t),r.Zj(),!this.uP(s,n))return!0;return r.Xj(o,a),r.Zj(),!1}lLt(s,i,e,h,n,r){h=h||50;let o=s.xk(),a=o.pT(),l=o.yT(),u=null,c=null;for(let t=0;t<h;++t)if(o.Xj(a+i*t,l+e*t),o.Zj(),!this.uP(s,u))if(u=this.dP(s))c=u;else if(n&&(u=r?this.uP(s,r)?r:null:this.oLt(s))&&(c=u),!u)return c&&this.uLt(s,i,e,c,16,!0),!0;return o.Xj(a,l),o.Zj(),!1}cLt(i,e,h,t){t=t||50;let n=i.xk(),r=n.pT(),o=n.yT(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(n.Xj(r+e*s*u,o+h*s*u),n.Zj(),!this.uP(i,a)){if(!(a=this.dP(i)))return l&&this.uLt(i,e*u,h*u,l,16,!0),!0;l=a}}return n.Xj(r,o),n.Zj(),!1}uLt(t,s,i,e,h,n){let r=2,o=!1,a=!1,l=t.xk(),u=l.pT(),c=l.yT();for(;r<=h;){const f=1/r;r*=2,l.t5(s*f*(o?1:-1),i*f*(o?1:-1)),l.Zj(),this.uP(t,e)||n&&this.dP(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.pT(),c=l.yT())}a&&(l.Xj(u,c),l.Zj())}fLt(i,t=100){let e=0,h=i.xk(),n=h.pT(),r=h.yT(),o=0,a=this.dP(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.Xj(Math.floor(n+t*e),Math.floor(r+s*e)),h.Zj(),!this.uP(i,a)&&!(a=this.dP(i)))return!0}return h.Xj(n,r),h.Zj(),!1}dLt(t,s,i,e){const h=t.xk(),n=h.pT(),r=h.yT(),o=Math.max(10,C.xn(s,i,n,r)),a=C.Gn(s,i,n,r),l=e||this.dP(t);if(!l)return C.Mn(a+Math.PI);let u=l,c=0,f=0,d=C.wn(5),p;for(p=1;p<36;++p){const v=a-p*d;if(h.Xj(s+Math.cos(v)*o,i+Math.sin(v)*o),h.Zj(),!this.uP(t,u)&&!(u=e?null:this.dP(t))){c=v;break}}for(36===p&&(c=C.Mn(a+Math.PI)),u=l,p=1;p<36;++p){const G=a+p*d;if(h.Xj(s+Math.cos(G)*o,i+Math.sin(G)*o),h.Zj(),!this.uP(t,u)&&!(u=e?null:this.dP(t))){f=G;break}}if(36===p&&(f=C.Mn(a+Math.PI)),h.Xj(n,r),h.Zj(),f===c)return f;let m=C.Cn(f,c)/2,g;g=C._n(f,c)?C.Mn(c+m+Math.PI):C.Mn(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return C.Gn(0,0,b,x)}pLt(t,s,i,e,h){if(!h)return!1;const n=h.xk();if(!n.T5())return!1;if(this.zNt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!n.h5().Zl(d))return!1;if(h.j_t())return this.mLt(t,s,i,e,h,n);if(this.WNt++,!n.r5().Iu(t,s,i,e))return!1;if(!n.QAt())return!0;const r=n.VAt();return r.Iu(n.pT(),n.yT(),t,s,i,e)}mLt(i,e,h,n,t,s){const r=s.pT(),o=s.yT(),a=t.wB(),l=S;p.set(i,e,h,n),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.zNt++,d.Xl(c,r,o)&&(b.xu(c),b.offset(r,o),b.Iu(i,e,h,n))){const f=u.GetPoly();if(!f)return C.Wr(l),!0;if(this.WNt++,f.Iu(r+c.Cl(),o+c.Il(),i,e,h,n))return C.Wr(l),!0}}return C.Wr(l),!1}rLt(t,s){if(!s)return!1;const i=s.xk();if(!i.T5())return!1;if(this.zNt++,!i.h5().Zl(t))return!1;if(s.j_t())return this.gLt(t,s,i);if(this.WNt++,b.xu(t),!i.r5()._u(b))return!1;if(!i.QAt())return!0;const e=T,h=(e.xu(t,i.pT(),i.yT()),i.VAt());return e.qu(h,0,0)}gLt(i,t,s){const e=s.pT(),h=s.yT(),n=t.wB(),r=S;n.GetCollisionRectCandidates(i,r);for(let t=0,s=r.length;t<s;++t){const o=r[t],a=o.GetRect();if(this.zNt++,i.Xl(a,e,h)){const l=o.GetPoly();if(!l)return C.Wr(r),!0;if(this.WNt++,T.xu(i,0,0),l.qu(T,-(e+a.Cl()),-(h+a.Il())))return C.Wr(r),!0}}return C.Wr(r),!1}yLt(t,s){if(t){const i=t.xk();i.T5()&&(this.zNt++,i.h5().Zl(s.rect))&&(t.j_t()?this.MLt(t,i,s):(this.WNt++,i.QAt()?s.wLt(t,i.pT(),i.yT(),i.VAt()):s.SLt(t,i.r5())))}}MLt(i,e,h){const n=e.pT(),r=e.yT(),o=S;i.wB().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.zNt++,h.rect.Xl(l,n,r)){const u=a.GetPoly();this.WNt++,u?h.wLt(i,n+l.Cl(),r+l.Il(),u):h.TLt(i,e.pT(),e.yT(),l)}}C.Wr(o)}mP(t,s){if(t!==this.FNt||s!==this.jNt){this.FNt=t,this.jNt=s;const i=this.df.QJ();for(const e of i)if(e.$P()){for(const h of e.O3())h.xk().IAt();e.t_t().bLt(t,s),e.s_t();for(const n of e.O3()){const r=n.xk();r.iNt(),r.e_t()}}}}yP(){return[this.FNt,this.jNt]}xLt(t,s){this.FNt=t,this.jNt=s}}}{const Ca=self.Ps;Ca.NCt=class extends Ca.an{constructor(t,s){super(),this.XV=t,this.KV=s,this.$V=Ca.un(Ca.ic)}cn(){this.$V.cn(),this.$V=null}bLt(t,s){if(!this.$V.nc())throw new Error("grid not empty");this.XV=t,this.KV=s}t8(t,s,i){let e=this.$V.ei(t,s);return e||(i?(e=Ca.un(Ca.vLt,this,t,s),this.$V.Set(t,s,e),e):null)}s8(t){const s=Math.floor(t/this.XV);return isFinite(s)?s:0}i8(t){const s=Math.floor(t/this.KV);return isFinite(s)?s:0}e8(e,h,n){if(h)for(let i=h.Cl(),t=h._l();i<=t;++i)for(let t=h.Il(),s=h.El();t<=s;++t)if(!n||!n.Kl(i,t)){const r=this.t8(i,t,!1);r&&(r.G0(e),r.nc())&&this.$V.rc(i,t)}if(n)for(let i=n.Cl(),t=n._l();i<=t;++i)for(let t=n.Il(),s=n.El();t<=s;++t)h&&h.Kl(i,t)||this.t8(i,t,!0).YV(e)}h8(t,s){let i=this.s8(t.Cl()),e=this.i8(t.Il()),h=this.s8(t._l()),n=this.i8(t.El());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const r=this.t8(i,t,!1);r&&r.qV(s)}}}}{const Ia=self.Ps;Ia.vLt=class extends Ia.an{constructor(t,s,i){super(),this.BV=t,this.il=s,this.el=i,this.zV=Ia.un(Ia.uc)}cn(){this.zV.cn(),this.zV=null,this.BV=null}nc(){return this.zV.nc()}YV(t){this.zV.yc(t)}G0(t){this.zV.rc(t)}qV(t){Ia.Zh(t,this.zV.Mc())}}}{const _a=self.Ps;_a.GLt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new _a.Rect,this.CLt=2,this.ILt=null,this._Lt=0,this.ELt=0,this.DLt=0,this.ALt=0,this.NLt=0,this.Dt=0,this.LLt=1,this.OLt=0,this.RLt=1,this.kLt=0}PLt(){return this.CLt<1+1e-6}d0(){this.CLt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.CLt=2,this.ILt=null,this._Lt=0,this.ELt=0,this.DLt=0,this.ALt=0,this.NLt=0,this.Dt=0,this.LLt=1,this.OLt=0,this.RLt=1,this.kLt=0,this}FLt(){if(!1!==this.PLt()){const t=this.dx*this.CLt,s=this.dy*this.CLt,i=_a.Tn(t,s),e=t/i,h=s/i,n=(this.Dt=i-1e-6,this.ALt=this.x1+e*this.Dt,this.NLt=this.y1+h*this.Dt,this._Lt=Math.atan2(this.DLt,this.ELt)+Math.PI/2,this.LLt=Math.cos(this._Lt),this.OLt=Math.sin(this._Lt),e*this.LLt+h*this.OLt);if(this.RLt=e-2*this.LLt*n,this.kLt=h-2*this.OLt*n,0<n){const r=Math.PI;this._Lt=_a.Mn(this._Lt+r),this.LLt=-this.LLt,this.OLt=-this.OLt}}}jLt(t,s,i,e,h){const n=_a.mr(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=n&&n<this.CLt&&(this.CLt=n,this.ILt=t.YF(),this.ELt=s-e,this.DLt=i-h)}TLt(t,s,i,e){const h=s+e.Cl(),n=s+e._l(),r=i+e.Il(),o=i+e.El();this.jLt(t,h,r,n,r),this.jLt(t,n,r,n,o),this.jLt(t,n,o,h,o),this.jLt(t,h,o,h,r)}SLt(t,s){const i=s.er(),e=s.hr(),h=s.nr(),n=s.rr(),r=s.lr(),o=s.ur(),a=s.cr(),l=s.dr();this.jLt(t,i,e,h,n),this.jLt(t,h,n,r,o),this.jLt(t,r,o,a,l),this.jLt(t,a,l,i,e)}wLt(i,e,h,t){const n=t.zu();for(let t=0,s=n.length;t<s;t+=2){const r=(t+2)%s,o=n[t]+e,a=n[t+1]+h,l=n[r]+e,u=n[1+r]+h;this.jLt(i,o,a,l,u)}}}}{const v=self.Ps,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Da=new Set(["high","low"]),Aa=self.Ss,xh=Aa.vs,vh=Aa._s,Na=xh.create(),La=v.un(v.iu),G=v.un(v.Rect);v.BLt=class extends v.an{constructor(t){super(),this.df=t,this.zLt=[],this.ULt=!1,this.WLt=null,this.QLt=null,this.VLt=null,this.JLt="high-performance",this.YLt=!1,this.HLt="auto",this.qLt=0,this.ZLt=0,this.XLt="",this.KLt=0,this.$Lt=0,this.tOt=0,this.sOt=0,this.iOt=0,this.eOt=0,this.Oy="normalized",this.hOt=0,this.nOt=1,this.rOt=1e4,this.uM=!0,this.oOt=0,this.WN=0,this.QN=0,this.aOt="letterbox-scale",this.lOt="letterbox-scale",this.uOt=0,this.cOt=0,this.fOt=xh.create(),this.dOt="high",this.pOt=this.dOt,this.mOt=!1,this.gOt=[],this.yOt=new Set,this.MOt=self.C3_Shaders,this.wOt=v.un(v.oy.YA,{WA:()=>[this.CH(),this.IH()],QA:()=>this.SOt(),VA:t=>this.TOt(t),getTime:()=>this.Wk().CR(),JA:()=>this.Wk().Dk()}),this.bOt=0,this.xOt=0,this.vOt=NaN,this.GOt=null,this.COt=new Map,this.IOt=NaN,this._Ot=new Map,this.EOt="",this.DOt=1,this.AOt=v.un(v.Rect),this.NOt="",this.LOt=null,this.OOt=null,this.ROt=0,this.kOt=0,this.POt=-1,this.FOt=0,this.jOt=t=>this.FOt=t.progress,this.BOt=null,this.zOt={UOt:null,WOt:null,QOt:null},this.VOt=0,this.JOt=0,this.YOt=0,this.HOt="fade-in",this.qOt=null,this.ZOt=new Promise(t=>this.qOt=t)}XOt(t){this.JLt=t}KOt(t){this.ULt=!!t}$Ot(t){this.Oy=t}tRt(){return this.Oy}sRt(t){this.hOt=t}iRt(t,s){this.nOt=t,this.rOt=s}eRt(t){this.YLt=!!t}hRt(t){this.HLt=t}async ko(t){let s=t.canvas,i=(this.zLt.push({canvas:s,nRt:null}),this.df.vj("runtime","window-resize",t=>this.rRt(t)),this.df.vj("runtime","fullscreenchange",t=>this.oRt(t)),this.df.vj("runtime","fullscreenerror",t=>this.aRt(t)),s.addEventListener("webglcontextlost",t=>this.lRt(t)),s.addEventListener("webglcontextrestored",t=>this.uRt(t)),this.mOt=!!t.isFullscreen,this.XLt=t.cssDisplayMode,navigator.gpu&&this.ULt),e=!1;if(i)try{await this.cRt(!0)}catch(t){this.fRt("WebGPU",t),this.QLt=null}if(!this.PS())try{await this.dRt(!0)}catch(t){this.fRt("WebGL",t),this.WLt=null}if(this.PS()||(e=!0),!this.PS()&&i)try{await this.cRt(!1)}catch(t){this.fRt("WebGPU",t),this.QLt=null}if(!this.PS())try{await this.dRt(!1)}catch(t){this.fRt("WebGL",t),this.WLt=null}const h=this.PS();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.mS(e),this.QLt&&(this.QLt.pRt=()=>this.mRt(),this.QLt.gRt=()=>this.yRt()),"normalized"===this.Oy?h.IM():(h._M(),h.GM(this.hOt)),this.t_(t.windowInnerWidth,t.windowInnerHeight,!0),await this.SNt()}fRt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async cRt(t){let s={Iy:this.nOt,_y:this.rOt},i=!0;"no"===this.HLt?i=!1:"auto"===this.HLt&&(i=v.li.wi);const e={powerPreference:this.JLt,depth:this.df.LY(),failIfMajorPerformanceCaveat:t,MRt:this.df.RH(),wRt:this.df.SRt(),uE:this.df.TRt(),bRt:i};this.QLt=v.un(v.oy.WebGPURenderer,s),await this.QLt.i2(this.zLt[0].canvas,e)}async dRt(t){const s={alpha:!0,powerPreference:this.JLt,lE:"xbox-uwp-webview2"!==this.df.IP(),depth:this.df.LY(),uE:this.df.TRt(),failIfMajorPerformanceCaveat:t,Iy:this.nOt,_y:this.rOt};this.YLt&&(s.cE=1),this.WLt=v.un(v.oy.pE,this.zLt[0].canvas,s),await this.WLt.mM()}async xRt(){if(this.MOt){const t=[];for(const[s,i]of Object.entries(this.MOt)){i.src=i.wgsl;const e=v.oy.WebGPUShaderProgram.Dv();t.push(this.QLt.gD(Object.assign({$x:e,name:s},i)))}await Promise.all(t)}}async vRt(){if(this.MOt){const s=[];for(const[i,e]of Object.entries(this.MOt)){let t;if(e.glslWebGL2&&2<=this.WLt.Lb())e.src=e.glslWebGL2,t=v.oy.Xx.Av();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=v.oy.Xx.Dv()}s.push(this.WLt.gD(Object.assign({$x:t,name:i},e)))}await Promise.all(s),this.WLt.yD(),this.WLt.jM()}this.WLt.DA()&&(this.GOt=v.un(v.oy.K_,this.WLt))}async SNt(){this.QLt?await this.xRt():this.WLt&&await this.vRt();const t=this.PS();t.dS(this.uM),t.DA()&&(this.vOt=0);for(const s of this.df.GRt()){for(const i of s.Z3())i.SNt(t);s.SNt(t),s.PB()}this.VLt=new self.tW(this.df,t)}cn(){this.df=null,this.WLt=null,this.zLt.length=0}jO(){return this.df.jO()}rRt(t){const s=this.df;if(!s.CRt()){const i=t.devicePixelRatio,e=(this.jO()&&(self.devicePixelRatio=i),s.IRt(i),this.mOt=!!t.isFullscreen,this.XLt=t.cssDisplayMode,this.t_(t.innerWidth,t.innerHeight),s.Dk(),new v.Event("window-resize")),h=(e.data=t,s.Jf().i0(e),new v.Event("resize"));h._Rt=this.RP(),h.ERt=this.PP(),h.DRt=this.jP(),h.ARt=this.zP(),s.Fq(h),s.Ej()&&(s.g1t()||self.C3Debugger.IsDebuggerPaused())&&s.wL()}}oRt(t){this.mOt=!!t.isFullscreen,this.t_(t.innerWidth,t.innerHeight,!0),this.df.Dk()}aRt(t){this.mOt=!!t.isFullscreen,this.t_(t.innerWidth,t.innerHeight,!0),this.df.Dk()}t_(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.qLt!==t||this.ZLt!==s||i){this.qLt=t,this.ZLt=s;const e=this.NRt();"letterbox-scale"===e?this.LRt(t,s):"letterbox-integer-scale"===e?this.ORt(t,s):"off"===e?this.RRt(t,s):this.kRt(t,s),this.PRt(e);for(const{canvas:r}of this.zLt)r.width=this.tOt,r.height=this.sOt;this.df.gf("canvas","update-size",{marginLeft:this.iOt,marginTop:this.eOt,styleWidth:this.KLt,styleHeight:this.$Lt,displayScale:this.$U()});const h=this.PS();h.t_(this.tOt,this.sOt,!0);for(const o of this.gOt)h.vA(o);v.Wr(this.gOt),this.FRt();const n=this.df.ek();n.rZ(),n.oZ()}}FRt(){this.PS().DM(this.fOt,this.CH()/this.IH())}_H(){return this.fOt}LRt(t,s){const i=this.df.UP(),e=this.df.zO(),h=this.df.WO(),n=e/h,r=t/s;if(n<r){const o=s*n;this.KLt=Math.round(o),this.$Lt=s,this.iOt=Math.floor((t-this.KLt)/2),this.eOt=0}else{const a=t/n;this.KLt=t,this.$Lt=Math.round(a),this.iOt=0,this.eOt=Math.floor((s-this.$Lt)/2)}this.tOt=Math.round(this.KLt*i),this.sOt=Math.round(this.$Lt*i),this.df.jRt(e,h)}ORt(t,s){let i=this.df.UP(),e=(1!==i&&(t+=1,s+=1),this.df.zO()),h=this.df.WO(),n=e/h,r=t/s,o;if(n<r){const a=s*n;o=a*i/e}else{const l=t/n;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.tOt=Math.round(e*o),this.sOt=Math.round(h*o),this.KLt=this.tOt/i,this.$Lt=this.sOt/i,this.iOt=Math.max(Math.floor((t-this.KLt)/2),0),this.eOt=Math.max(Math.floor((s-this.$Lt)/2),0),this.df.jRt(e,h)}kRt(t,s){const i=this.df.UP(),e=(this.KLt=t,this.$Lt=s,this.tOt=Math.round(this.KLt*i),this.sOt=Math.round(this.$Lt*i),this.iOt=0,this.eOt=0,this.$U());this.df.jRt(this.KLt/e,this.$Lt/e)}RRt(t,s){const i=this.df.UP();this.KLt=this.df.xY(),this.$Lt=this.df.vY(),this.tOt=Math.round(this.KLt*i),this.sOt=Math.round(this.$Lt*i),this.BRt()?(this.iOt=Math.floor((t-this.KLt)/2),this.eOt=Math.floor((s-this.$Lt)/2)):(this.iOt=0,this.eOt=0),this.df.jRt(this.df.xY(),this.df.vY())}PRt(i){if("high"===this.dOt)this.WN=this.tOt,this.QN=this.sOt,this.pOt="high";else{let t,s;if(s="off"===this.NRt()?(t=this.df.xY(),this.df.vY()):(t=this.df.zO(),this.df.WO()),this.tOt<t||this.sOt<s)this.WN=this.tOt,this.QN=this.sOt,this.pOt="high";else if(this.WN=t,this.QN=s,this.pOt="low","scale-inner"===i){const e=t/s,h=this.qLt/this.ZLt;h<e?this.WN=this.QN*h:e<h&&(this.QN=this.WN/h)}else if("scale-outer"===i){const n=t/s,r=this.qLt/this.ZLt;n<r?this.WN=this.QN*r:r<n&&(this.QN=this.WN/r)}}}Wk(){return this.df}zRt(){return this.zLt[0].canvas}hJ(){return this.wOt}BRt(){return this.mOt}URt(){return this.XLt}WRt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.aOt=t;const s=this.df.ek();s.rZ(),s.oZ()}XU(){return this.aOt}QRt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.lOt=t;const s=this.df.ek();s.rZ(),s.oZ()}VRt(){return this.lOt}NRt(){return this.BRt()?this.VRt():this.XU()}JRt(t){if(!Da.has(t))throw new Error("invalid fullscreen scaling quality");this.dOt=t,this.df.ek().rZ()}YRt(){return this.dOt}kH(){return this.pOt}static HRt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}FU(){return this.qLt}jU(){return this.ZLt}CH(){return this.WN}IH(){return this.QN}dS(t){this.uM=!!t}qRt(t){this.oOt=t}OV(){return this.oOt}ZRt(){return this.PS().E_()}lRt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.gOt=[],this.yOt.clear(),this.wOt.nT(),this.WLt.nT(),this.df.k9()}mRt(){console.log("[Construct] WebGPU device lost"),this.gOt=[],this.yOt.clear(),this.wOt.nT(),this.df.k9()}async uRt(t){await this.WLt.rT(),await this.SNt(),await this.df.XRt(),console.log("[Construct] WebGL context restored")}async yRt(){await this.SNt(),await this.df.XRt(),console.log("[Construct] WebGPU device restored")}KRt(){return this.WLt}$Rt(){return this.QLt}PS(){return this.QLt||this.WLt}EIt(){return this.VLt}DP(){let t="";return t=this.df.$Rt()?"webgpu":"webgl"+this.df.KRt().Lb(),this.df.PS().gS()&&(t+="-software"),t}LP(){return this.df.$Rt()?this.df.$Rt().GetAdapterInfoString():this.df.KRt().jA()}DF(){return"low"===this.pOt?1/this.df.UP():this.$U()}$U(){const t=this.NRt();if("off"===t||"crop"===t)return 1;const s=this.df.zO(),i=this.df.WO(),e=s/i,h=this.tOt/this.sOt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.$Lt/i:this.KLt/s}r7(){return"low"===this.kH()?1:this.$U()}h7(){return"low"===this.kH()?1:this.df.UP()}tkt(t,s){this.uOt=t,this.cOt=s}BW(s,i,e,t=!0){i=i||this.WN,e=e||this.QN;const h=i/2+this.uOt,n=e/2+this.cOt;if(t){let t=this._H();i===this.WN&&e===this.QN||(s.DM(Na,i/e),t=Na),s.wD(t)}const r=s.OM(h,n,s.yM(e),h,n,0,e);s.GD(r)}skt(t,s=!0){const i=this.RP(),e=this.PP(),h=i/2,n=e/2,r=(s&&t.wD(this._H()),t.OM(h,n,t.yM(e),h,n,0,e));t.GD(r)}jP(){return this.tOt}zP(){return this.sOt}RP(){return this.KLt}PP(){return this.$Lt}TF(){return this.iOt}bF(){return this.eOt}w9(){return this.zLt.length}ikt(){return"undefined"!=typeof OffscreenCanvas&&this.zRt()instanceof OffscreenCanvas&&("Chromium"!==v.li.yi||124<=v.li.gi)}async z9(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.zLt.length!==e){let t=this.df.ek().$R(),s={count:e,layersDomState:t.KJ().filter(t=>t.Y4()).map(t=>t.iH()),immediate:h,marginLeft:this.iOt,marginTop:this.eOt,styleWidth:this.KLt,styleHeight:this.$Lt},i;if(i=this.jO()?await this.df.Nk("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.zLt.length)this.zLt.length=e;else for(const n of i.addedCanvases){n.width=this.tOt,n.height=this.sOt;const r=this.ikt()?"bitmaprenderer":"2d",o=n.getContext(r);if(!o)throw new Error(`failed to acquire '${r}' canvas context`);this.zLt.push({canvas:n,nRt:o})}this.df.Dk()}}Rq(t){if(!(t>=this.zLt.length)){const s=this.zRt(),i=this.zLt[t].nRt;this.ikt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}PH(s){s.depth=this.df.LY();let t=this.gOt,i=t.findIndex(t=>t.Vx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.PS().wA(s),this.yOt.add(e),e}rJ(t){if(!this.yOt.has(t))throw new Error("render target not in use");this.yOt.delete(t),this.gOt.push(t)}SOt(){const t={pb:this.df.QO()};return"low"===this.kH()&&(t.width=this.CH(),t.height=this.IH()),this.PH(t)}TOt(t){this.rJ(t)}*ekt(){for(const t of this.df.ek().eZ())for(const s of t.f4()){const i=this.COt.get(s);i&&(yield i)}}NH(t){if(!this.PS().DA())return null;let s=this.COt.get(t);return s||(s={qj:t,name:t.ef(),hkt:v.un(v.oy.K_,this.WLt),nkt:0,rkt:0,okt:0},this.COt.set(t,s)),s.hkt}akt(){const t=this.PS();if(t.DA()&&0===this.xOt){this.xOt=t.cS(),this.IOt=NaN;for(const s of this.ekt())s.nkt=NaN}}lkt(){this.WLt&&this.WLt.DA()&&this.ukt(),this.QLt&&this.QLt.DA()&&this.ckt()}ukt(){if(isNaN(this.IOt)&&(this.IOt=this.GOt.rE(this.bOt,this.xOt),!isNaN(this.IOt))){if(this.df.Ej())for(const t of this.ekt())if(t.nkt=t.hkt.rE(this.bOt,this.xOt),isNaN(t.nkt))return;if(this.GOt.oE(this.xOt),this.vOt=Math.min(this.IOt,1),this.df.Ej()){const i=new Map;for(const h of this.ekt())h.hkt.oE(this.xOt),h.rkt=Math.min(h.nkt,1),i.set(h.qj,h.rkt);for(const n of this.ekt()){const r=n.qj,o=i.get(r)||0,a=o-r.P4().reduce((t,s)=>t+(i.get(s)||0),0);n.okt=v.yn(a,0,1)}const s=this.df.$R(),e=this.vOt-s.KJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(v.yn(e,0,1),this.vOt,[...this.ekt()])}this.bOt=this.xOt,this.xOt=0}}fkt(){return this.GOt}ckt(){if(0!==this.xOt){for(let t=this.bOt;t<this.xOt;++t){const i=this._Ot.get(t);if(i&&!i.z_())return}let t=this.df.$R(),r=v.Yo(t.d9()+1,0),s=0;for(let t=this.bOt;t<this.xOt;++t){const o=this._Ot.get(t);if(o){let i=o.U_(),e=BigInt(0),h=BigInt(0),n=BigInt(0);for(let t=0,s=Math.min(r.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==n&&(e===n||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;r[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.vOt=v.yn(s,0,1),this.df.Ej()){const e=t.f4(),h=new Map;for(let t=0,s=Math.min(e.length,r.length-1);t<s;++t){const g=r[t+1];h.set(e[t],g)}const n=[],p=new Map;for(const[y,M]of h){const w=[...y.j4()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),n.push({name:y.ef(),okt:v.yn(M,0,1),rkt:v.yn(w,0,1)})}const m=this.vOt-t.KJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(v.yn(m,0,1),this.vOt,n)}for(let t=this.bOt;t<this.xOt;++t)this._Ot.delete(t);this.bOt=this.xOt,this.xOt=0}}dkt(t){this._Ot.set(this.QLt.cS(),t)}PR(){return this.vOt}pkt(t,s,i,e,h,n){return this.EOt=t,this.DOt=s,this.AOt.Ml(i,e,h,n),this.LOt||(this.LOt=new Promise(t=>{this.OOt=t})),this.LOt}mkt(){if(this.EOt){let t=this.zRt(),s=this.AOt,i=v.yn(Math.floor(s.Cl()),0,t.width),e=v.yn(Math.floor(s.Il()),0,t.height),h=s.width(),n=(h=0===h?t.width-i:v.yn(Math.floor(h),0,t.width-i),s.height());if(n=0===n?t.height-e:v.yn(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&0<h&&0<n){const r=v.ko(h,n),o=r.getContext("2d");o.drawImage(t,i,e,h,n,0,0,h,n),t=r}v.Po(t,this.EOt,this.DOt).then(t=>{this.NOt&&URL.revokeObjectURL(this.NOt),this.NOt=URL.createObjectURL(t),this.LOt=null,this.OOt(this.NOt)}),this.EOt="",this.DOt=1}}gkt(){return this.NOt}ykt(t){t?this.ROt++:this.ROt--}Mkt(){return 0<this.ROt}wkt(t){const s=this.PS();if(2===t)this.BOt=v.un(v.oy.xS,this.PS()),this.BOt.EI("Arial"),this.BOt.DI(16),this.BOt.VI("center"),this.BOt.YI("center"),this.BOt.t_(300,200);else if(0===t){const i=this.df.Skt();i&&i.NW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.Tkt("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.HOt?s.Dx(t):this.zOt.UOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bkt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.HOt?s.Dx(t):this.zOt.WOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.bkt("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.HOt?s.Dx(t):this.zOt.QOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async Tkt(t){t=new URL(t,this.df.xkt()).toString();const s=await v.Eo(t),i=await this.df.vkt(s,2048,2048);return this.PS().MA(i,{Mb:"high"})}async bkt(t){t=new URL(t,this.df.xkt()).toString();const s=await v.Eo(t);return this.PS().MA(s,{Mb:"high"})}Gkt(){this.df.gf("runtime","hide-cordova-splash")}Ckt(){this.kOt=Date.now(),this.df.Jf().addEventListener("loadingprogress",this.jOt),this.POt=requestAnimationFrame(()=>this.Ikt());const t=this.df._kt();3!==t&&this.Gkt()}async Ekt(){const t=this.PS(),s=(this.FOt=1,this.df._kt());4===s&&await this.ZOt,this.qOt=null,this.ZOt=null,-1!==this.POt&&(cancelAnimationFrame(this.POt),this.POt=-1),this.df.Jf().removeEventListener("loadingprogress",this.jOt),this.jOt=null,this.BOt&&(this.BOt.cn(),this.BOt=null),this.df.Dkt(),t.aA(),this.zOt.UOt&&(t.Dx(this.zOt.UOt),this.zOt.UOt=null),this.zOt.WOt&&(t.Dx(this.zOt.WOt),this.zOt.WOt=null),this.zOt.QOt&&(t.Dx(this.zOt.QOt),this.zOt.QOt=null),t.oA(0,0,0,0),t.lS(),this.HOt="done",this.bOt=t.cS(),3===s&&this.Gkt()}Ikt(){if(-1!==this.POt){const t=this.PS(),s=(t.aA(),this.POt=-1,this.df.CO().nV()),i=this.df._kt();if(3!==i&&(this.skt(t),t.oA(0,0,0,0),t.LD(),t.jM(),t.RD(null)),0===i)this.Akt(s);else if(1===i)this.Nkt(s,120,0);else if(2===i)this.Lkt(s);else if(3===i)v.jr();else{if(4!==i)throw new Error("invalid loader style");this.Okt(s)}t.lS(),this.POt=requestAnimationFrame(()=>this.Ikt())}}Lkt(t){t?this.BOt.QI(1,0,0):this.BOt.QI(.6,.6,.6),this.BOt.yf(Math.round(100*this.FOt)+"%");const s=this.KLt/2,i=this.$Lt/2,e=(La.cu(s-150,i-100,150+s,100+i),this.PS());e.RD(this.BOt.kx()),e.Ow(La,this.BOt.A_())}Nkt(t,s,i){const e=this.PS(),h=(e.VM(),t?e.AD(1,0,0,1):e.AD(.118,.565,1,1),this.KLt/2),n=this.$Lt/2,r=s/2;G.Ml(h-r,n-4+i,Math.floor(s*this.FOt),8),e.Rect(G),G.Ml(h-r,n-4+i,s,8),G.offset(-.5,-.5),G.jl(.5,.5),e.AD(0,0,0,1),e.jw(G),G.jl(1,1),e.AD(1,1,1,1),e.jw(G)}Akt(t){const s=this.PS(),i=this.df.Skt();if(i){const e=i.kx();if(e){const h=e.pm(),n=e.Cm(),r=this.KLt/2,o=this.$Lt/2,a=h/2,l=n/2;La.cu(r-a,o-l,r+a,o+l),s.RD(e),s.iu(La),this.Nkt(t,h,16+l)}else this.Nkt(t,120,0)}else this.Nkt(t,120,0)}Okt(t){let s=this.PS(),i=this.zOt.UOt,e=this.zOt.WOt,h=this.zOt.QOt,n=Date.now(),r=(0===this.VOt&&(this.kOt=n),this.df.Rkt()||this.df.kkt()&&!this.df.Pkt()),o=r?0:200,a=r?0:3e3,l=1,u=("fade-in"===this.HOt?l=Math.min((n-this.kOt)/300,1):"fade-out"===this.HOt&&(l=Math.max(1-(n-this.YOt)/300,0)),s.VM(),s.AD(.231*l,.251*l,.271*l,l),G.set(0,0,this.KLt,this.$Lt),s.Rect(G),Math.ceil(this.KLt)),c=Math.ceil(this.$Lt),f,d;256<this.$Lt?(s.AD(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),G.Ml(0,.8*c-d/2,f,d),s.Rect(G),t?s.AD(l,0,0,l):s.AD(.161*l,.953*l,.816*l,l),f=u*this.FOt,G.Ml(.5*u-f/2,.8*c-d/2,f,d),s.Rect(G),s.AD(l,l,l,l),s.jM(),e&&(f=1.5*v.yn(.22*c,105,.6*u),d=f/8,G.Ml(.5*u-f/2,.2*c-d/2,f,d),s.RD(e),s.Rect(G)),i&&(f=Math.min(.395*c,.95*u),d=f,G.Ml(.5*u-f/2,.485*c-d/2,f,d),s.RD(i),s.Rect(G)),h&&(f=1.5*v.yn(.22*c,105,.6*u),d=f/8,G.Ml(.5*u-f/2,.868*c-d/2,f,d),s.RD(h),s.Rect(G))):(s.AD(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),G.Ml(0,.85*c-d/2,f,d),s.Rect(G),t?s.AD(l,0,0,l):s.AD(.161*l,.953*l,.816*l,l),f=u*this.FOt,G.Ml(.5*u-f/2,.85*c-d/2,f,d),s.Rect(G),s.AD(l,l,l,l),s.jM(),i&&(f=.55*c,d=f,G.Ml(.5*u-f/2,.45*c-d/2,f,d),s.RD(i),s.Rect(G))),this.VOt++,"fade-in"===this.HOt&&300<=n-this.kOt&&2<=this.VOt&&(this.HOt="wait",this.JOt=n),"wait"===this.HOt&&n-this.JOt>=a&&1<=this.FOt&&(this.HOt="fade-out",this.YOt=n),("fade-out"===this.HOt&&n-this.YOt>=300+o||r&&1<=this.FOt&&n-this.kOt<500)&&this.qOt()}}}{let U=self.Ps,W=self.C3Debugger,h=self.u6,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},r=!0;U.Fkt=class extends U.an{constructor(t){t=Object.assign({},i,t),super(),this.jkt=t.messagePort,this.Bkt=t.runtimeBaseUrl,this.zkt=t.previewUrl,this.Ukt=!!t.headless,this.Wkt=!!t.hasDom,this.Qkt=!!t.isInWorker,r=t.ife,this.Vkt=!!t.useAudio,this.Jkt=t.exportType,this.Ykt=t.isNWjs,this.aQ=!!t.isiOSCordova,this.Hkt=!!t.isiOSWebView,this.qkt=!!t.isWindowsWebView2,this.Zkt=!!t.isAnyWebView2Wrapper,this.Xkt=!!t.isFBInstantAvailable,this.Kkt=!("preview"!==this.Jkt||!t.isDebug),this.$kt=this.Kkt,this.tPt=this.Kkt,this.sPt=0,this.iPt=[],this.ePt=[],this.hPt=!1,this.nPt="",this.rPt="",this.oPt="",this.aPt="",this.lPt=0,this.uPt=0,this.cPt=0,this.KN=self.devicePixelRatio,this.fPt=0,this.dPt=0,this.pPt=0,this.mPt=0,this.gPt=0,this.yPt=!1,this.zg=!0,this.MPt=!1,this.wPt=!1,this.SPt=!1,this.TPt=null,this.TV=U.un(U.hQ,this,t),this.b7=U.un(U.zq,this),this.jft=U.un(U.k0t,this),this.bPt=U.un(U.HP,this,t.wrapperComponentIds),this.xPt=U.un(U.PNt,this),this.S$=U.un(U.aZ,this),this.vPt=U.un(U.vlt,this),this.GPt=U.un(U.Clt,this),this.Blt=U.un(U.Olt,this),this.kg=U.un(U.vg,{Ig:t=>this.CPt(t),Eg:t=>this.IPt(t)}),this._Pt=new Map,this.EPt=[],this.DPt=new Map,this.APt=new Map,this.NPt=0,this.LPt=[],this.OPt=new Set,this.RPt=[],this.kPt=[],this.PPt=new Map,this.FPt=!1,this.jPt=!1,this.BPt=0,this.zPt=0,this.UPt=new Map,this.WPt=new Set,this.QPt=new Set,this.VPt=[],this.JPt=[],this.YPt=null,this.HPt=!1,this.qPt="vsync",this.Gb="trilinear",this.ZPt=!1,this.XPt=!0,this.KPt=!1,this.$Pt=!1,this.t3t=null,this.s3t={i3t:t=>{this.POt=-1,this.e3t=-1,this.NX(t)},h3t:t=>{this.e3t=-1,this.NX(t,!1,"skip-render")},n3t:()=>{this.POt=-1,this.wL()}},this.POt=-1,this.e3t=-1,this.r3t=0,this.o3t=0,this.a3t=!1,this.l3t=!1,this.u3t=!1,this.c3t=!0,this.f3t=!0,this.d3t=!1,this.p3t=0,this.m3t=new U.yd(1),this.g3t=()=>Math.random(),this.y3t=0,this.M3t=0,this.w3t=0,this.S3t=0,this.T3t=0,this.C_t=1,this.b3t=1/30,this.x3t=0,this.v3t=U.un(U.I0),this.G3t=U.un(U.I0),this.C3t=U.un(U.I0),this.I3t=new Map,this._3t=-1,this.E3t=0,this.D3t=0,this.A3t=-1,this.N3t=0,this.L3t=0,this.O3t=0,this.R3t=!1,this.k3t="",this.P3t=!1,this.F3t="",this.kj=null,this.j3t="",this.B3t=null,this.z3t=null,this.DCt=U.un(U.Event.Jf),this.U3t=new Map,this.W3t=new Map,this.Q3t=0,this.V3t=!1,this.J3t=!1,this.Y3t=!1,this.H3t=[],this.q3t={pretick:U.un(U.Event,"pretick",!1),tick:U.un(U.Event,"tick",!1),tick2:U.un(U.Event,"tick2",!1),instancecreate:U.un(U.Event,"instancecreate",!1),instancedestroy:U.un(U.Event,"instancedestroy",!1),beforelayoutchange:U.un(U.Event,"beforelayoutchange",!1),layoutchange:U.un(U.Event,"layoutchange",!1)},this.q3t.instancecreate.DB=null,this.q3t.instancedestroy.DB=null,this.t9=U.un(U.Event.Jf),this.Z3t=null;const s=(t,s)=>U.v_t.oNt(this,t,s);this.X3t=U.un(U.k0,s),this.K3t=U.un(U.k0,s),this.$3t=U.un(U.k0,s),this.t4t=U.un(U.s4t,this,t.jobScheduler),t.canvas&&(this.YPt=U.un(U.BLt,this)),this.jkt.onmessage=t=>this._OnMessageFromDOM(t.data),this.vj("runtime","visibilitychange",t=>this.i4t(t)),this.vj("runtime","wrapper-extension-message",t=>this.e4t(t)),this.vj("runtime","get-remote-preview-status-info",()=>this.h4t()),this.vj("runtime","js-invoke-function",t=>this.udt(t)),this.vj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.vj("runtime","offline-audio-render-completed",t=>this.n4t(t)),this.DCt.addEventListener("window-blur",t=>this.r4t(t)),this.DCt.addEventListener("window-focus",()=>this.o4t()),this.S$.zZ(),this.GPt.zZ(),this.a4t=null,this.l4t=new WeakMap,this.u4t={keyboard:null,fk:null,dk:null,pk:null},this.c4t=new WeakMap,this.f4t=[]}static i2(t){return U.un(U.Fkt,t)}cn(){U.Wr(this.EPt),this.DPt.clear(),this.APt.clear(),this.b7.cn(),this.b7=null,this.jft.cn(),this.jft=null,this.bPt.cn(),this.bPt=null,this.TV.cn(),this.TV=null,this.xPt.cn(),this.xPt=null,this.S$.cn(),this.S$=null,this.vPt.cn(),this.vPt=null,this.GPt.cn(),this.GPt=null,this.Blt.cn(),this.Blt=null,this.kg.cn(),this.kg=null,this.YPt&&(this.YPt.cn(),this.YPt=null),this.DCt.cn(),this.DCt=null,this.d4t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.p4t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.m4t(t)}}p4t(t){if(this.Y3t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const l=new U.Event(i);l.data=e,this.DCt.i0(l)}if(r){const u=new U.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.Fq(u)}}const a=this.U3t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.g4t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.g4t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.g4t(o,!1,""+t)}):this.g4t(o,!0,t))}else n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.H3t.push(t)}g4t(t,s,i){this.jkt.postMessage({type:"result",responseId:t,isOk:s,result:i})}m4t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.W3t.get(s);i?h.resolve(e):h.reject(e),this.W3t.delete(s)}vj(t,s,i){let e=this.U3t.get(t);if(e||(e=new Map,this.U3t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}gf(t,s,i,e){this.jkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}Nk(t,s,i,e){const h=this.Q3t++,n=new Promise((t,s)=>{this.W3t.set(h,{resolve:t,reject:s})});return this.jkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}b6(t,s,i,e=-1){this.gf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}x6(t,s,i){const e=this.Q3t++,h=new Promise((t,s)=>{this.W3t.set(e,{resolve:t,reject:s})});return this.b6(t,s,i,e),h}e4t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.W3t.get(s);i.resolve(t.params),this.W3t.delete(s)}else this.p4t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Bj(t,s,i){this.vj("wrapper-extension:"+t,s,i)}Fj(t){return this.bPt.Fj(t)}y4t(t){if(!this.Ej())throw new Error("not in debug mode");this.gf("runtime","post-to-debugger",t)}async E_t(t){U.$St(this),this.Ej()?await W.E_t(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.TV._o("data.json");if(await this.M4t(s),await this.w4t(t),this.Rkt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.KRt()){const i=this.KRt();console.info(`[C3 runtime] Hosted in ${this.jO()?"worker":"DOM"}, rendering with WebGL ${i.Lb()} [${i.jA()}]`)}else this.$Rt()&&console.info(`[C3 runtime] Hosted in ${this.jO()?"worker":"DOM"}, rendering with WebGPU [${this.$Rt().GetAdapterInfoString()}]`);this.PS().gS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.Y3t=!0;for(const e of this.H3t)this.p4t(e);U.Wr(this.H3t),this.YPt&&this.YPt.Ckt();for(const h of t.runOnStartupFunctions)this.iPt.push(this.S4t(h));if(await Promise.all([this.TV.eV(),...this.iPt]),U.Wr(this.iPt),!this.TV.nV())return this.YPt&&await this.YPt.Ekt(),await this.DCt.t0(new U.Event("beforeruntimestart")),await this.aA(),this.jkt.postMessage({type:"runtime-ready"}),this;this.YPt&&this.YPt.Gkt()}async S4t(t){try{await t(this.a4t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async M4t(t){const s=t.project,i=(this.nPt=s[0],this.rPt=s[16],this.oPt=s[31],this.aPt=s[38],this.lPt=s[36],s[39]||"loading-logo.png"),e=(this.ZPt=!!s[9],this.uPt=this.pPt=s[10],this.cPt=this.mPt=s[11],this.xPt.xLt(this.uPt,this.cPt),this.fPt=this.uPt/2,this.dPt=this.cPt/2,this.qPt=s[37],this.HPt=!!s[40],this.Gb=s[14],this.MPt=s[15],this.wPt=s[42],this.SPt=s[17],this.yPt=!!s[18],this.gPt=s[19],this.zPt=s[21],this.KPt=s[22],this.TV);if(e.OQ(s[45]),e.fV(s[7],s[25]),e.kQ(s[8]),e.PQ(s[32]),e.jQ(s[28]),e.aV(s[29]),0===this.gPt){let t;(t="flat"===e.Xk()?e.BQ()+i:i)&&(this.TPt=e.ZQ({url:t}))}this.YPt&&(this.YPt.WRt(U.BLt.HRt(s[12])),this.YPt.JRt(s[23]?"high":"low"),this.YPt.dS(0!==s[24]),this.YPt.XOt(s[34]),this.YPt.qRt(s[41]),this.YPt.KOt(s[13]),this.YPt.$Ot(s[30]),this.YPt.iRt(s[46],s[47]),this.YPt.sRt(s[26]),this.YPt.eRt(s[48]),this.YPt.hRt(s[50]));const h=s[43],n=(h&&await this.T4t(h),this.b4t(),this.bPt.gGt(),this.VPt=self.x4t(),s[2]);for(const l of n[1])this.bPt.yGt(l);for(const u of n[0])this.bPt.mGt(u);this.VPt=self.x4t(),this.v4t(),this.bPt.bGt();for(const c of s[3]){const f=U.Alt.i2(this,this.EPt.length,c);this.EPt.push(f),this.DPt.set(f.ef().toLowerCase(),f),this.APt.set(f.$J(),f)}for(const d of s[4]){const p=this.EPt[d[0]];p.pIt(d)}for(const m of s[27]){const g=m.map(t=>this.EPt[t]);this.LPt.push(U.un(U.d_t,this,g))}this.G4t();for(const y of this.EPt)y.gIt();for(const M of s[5])this.b7.i2(M);const r=s[1];if(r){const w=this.b7.Kq(r);w&&this.b7.Zq(w)}for(const S of s[35])this.vPt.i2(S);for(const T of s[33])this.S$.i2(T);for(const b of s[44])this.GPt.i2(b);this.GPt.Elt()||(this.GPt.cn(),this.GPt=null);for(const x of s[49])this.Blt.i2(x);this.Blt.Flt()||(this.Blt.cn(),this.Blt=null);for(const v of s[6])this.jft.i2(v);this.jft.ddt(),this.C4t(),U.Wr(this.VPt),this.Y3();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.gf("runtime","set-target-orientation",{targetOrientation:o})}async T4t(t){const s=t.format;"image-sequence"===s?this.t3t=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.t3t=new self.C3ExportToGIF(this,t):"webm"===s?this.t3t=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.t3t=new self.C3ExportToMP4Video(this,t)),this.qPt="unlimited-frame",this.YPt.WRt("off"),this.KN=1,self.devicePixelRatio=1,await this.Nk("runtime","set-exporting-to-video",{message:this.t3t.GetExportingMessageForPercent(0),duration:this.t3t.nz()})}_kt(){return this.gPt}CRt(){return null!==this.t3t}I4t(){return this.t3t.nz()}_4t(){return this.t3t.GetFramerate()}E4t(){return this.t3t.E_t({width:this.YPt.jP(),height:this.YPt.zP()})}D4t(){const t=this.r3t/this._4t();return this.t3t.AddFrame(this.YPt.zRt(),t)}A4t(){this.t3t&&this.t3t.Eit()}n4t(t){this.t3t.OnOfflineAudioRenderCompleted(t)}N4t(){return this.t3t.lS()}kkt(){return this.Xkt}Jg(){return this.zg}kk(t){this.iPt.push(t)}W9(t){this.hPt=!!t}L4t(t){this.hPt&&this.ePt.push(t)}q9(){return this.ePt}oIt(){return this.NPt++}MIt(){return this.NPt}gNt(t){this.OPt.add(t)}yNt(t){this.OPt.delete(t)}GRt(){return this.OPt}async w4t(t){this.YPt&&(await this.YPt.ko(t),this.YPt.wkt(this.gPt))}async aA(){this.a3t=!0,this.y3t=Date.now();let s=null,t=new Promise(t=>s=t);if(this.yPt){for(const h of this.EPt)h.VJ()||h.IIt()||!h.$P()||h.m2t();(async()=>{await this.TV.eV(),await t,this.zg=!1,this.O4t()})()}else this.zg=!1;this.TV.hV(),this.Ej()&&W.RuntimeInit(r);for(const n of this.b7.rk())n.mq();this.CRt()&&await this.E4t();const i=this.b7.Xq(),e=(await i.I9(null,this.PS()),await i.P9(!0),this.E3t=performance.now(),s(),this.yPt||this.O4t(),await this.Nk("runtime","before-start-ticking"));e.isSuspended&&!this.CRt()?(this.p3t++,this.d3t=!0):this.NX()}O4t(){this.Sj(U.aq.oq.rq.R4t,null,null),this.gf("runtime","register-sw")}wyt(t){t=Math.floor(t);const s=this.VPt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}v4t(){for(const t of self.k4t){const s=U.first(Object.keys(t));this.JPt.push(s)}}Pdt(t){t=Math.floor(t);const s=this.JPt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}P4t(){return this.Wkt}F4t(){return this.Ukt}jO(){return this.Qkt}xkt(){return this.Bkt}j4t(){return this.zkt}sR(){return this.jft}pR(){return this.jft.pR()}Idt(){return this.jft.Idt()}oR(){return this.jft.oR()}_dt(){return this.jft._dt()}XSt(){return 0===this.Idt().h0t()}Ddt(){return this.jft.Ddt()}nNt(){return this.bPt}oV(){return this.bPt.oV()}TJ(t){if((t=Math.floor(t))<0||t>=this.EPt.length)throw new RangeError("invalid index");return this.EPt[t]}B4t(t){return this.DPt.get(t.toLowerCase())||null}N6(t){return this.APt.get(t)||null}Hht(t){const s=U.HP.g3(t);return s?s.S3():null}QJ(){return this.EPt}*z4t(){for(const t of this.EPt)t.VJ()||(yield*t.instances())}Jf(){return this.DCt}XO(){return this.t9}Fq(t){t.runtime=this.qP();const s=this.Ej()&&!this.jft.V3();s&&W.StartMeasuringScriptTime(),this.t9.dispatchEvent(t),s&&W.AddScriptTime()}eq(t){return t.runtime=this.qP(),this.t9.t0(t)}zO(){return this.uPt}WO(){return this.cPt}U4t(t,s){if(this.uPt!==t||this.cPt!==s){this.uPt=t,this.cPt=s;const i=this.ek();i.rZ(),i.oZ()}}xY(){return this.pPt}vY(){return this.mPt}jRt(t,s){if(this.pPt!==t||this.mPt!==s){this.pPt=t,this.mPt=s;const i=this.ek();i.rZ(),i.oZ()}}IRt(t){this.CRt()||(this.KN=t)}UP(){return this.KN}wH(){return this.fPt}SH(){return this.dPt}AP(){return this.YPt}CH(){return this.YPt?this.YPt.CH():this.pPt}IH(){return this.YPt?this.YPt.IH():this.mPt}DF(){return this.YPt?this.YPt.DF():1}$U(){return this.YPt?this.YPt.$U():1}r7(){return this.YPt?this.YPt.r7():1}h7(){return this.YPt?this.YPt.h7():1}TF(){return this.YPt?this.YPt.TF():0}bF(){return this.YPt?this.YPt.bF():0}W4t(){return this.YPt?this.YPt.RP():0}Q4t(){return this.YPt?this.YPt.PP():0}XU(){return this.YPt?this.YPt.XU():"off"}PH(t){return this.YPt?this.YPt.PH(t):null}rJ(t){this.YPt&&this.YPt.rJ(t)}RH(){return this.MPt}SRt(){return this.wPt}TRt(){return this.SPt}PR(){return this.YPt?this.YPt.PR():NaN}Fx(){return"nearest"!==this.QO()}jR(){return this.qPt}BR(t){this.qPt!==t&&(this.qPt=t,-1!==this.POt||-1!==this.e3t)&&(this.V4t(),this.J4t())}QO(){return this.Gb}cIt(){return this.yPt}Skt(){return this.TPt}Dkt(){this.TPt&&(this.TPt.TI(),this.TPt.cn(),this.TPt=null)}ek(){return this.b7}$R(){return this.b7.$R()}htt(){return this.S$}Y4t(){return this.vPt}nEt(){return this.GPt}out(){return this.Blt}CO(){return this.TV}ZQ(t){return this.TV.ZQ(t)}z3(t,s,i,e,h,n){if(n&&this.GPt){if(t instanceof U.Alt&&t.VJ()){const o=t.igt(),a=Math.floor(this.KR()*o.length);return this.z3(o[a],s,i,e,h,n)}const r=this.GPt.Dlt(t,n);if(r){const l=this.DJ(r,s,!1,i,e,!1,h,void 0,h);return this.GPt.Nlt(l,n),l}}return this.DJ(t,s,!1,i,e,!1,h,void 0,h)}DJ(t,s,i,e,h,n,r,o,a){let l=null,u=null;if(t instanceof U.Alt){if((u=t).VJ()){const S=u.igt(),T=Math.floor(this.KR()*S.length);u=S[T]}l=u.xJ()}else l=t,u=this.TJ(l[1]);const c=u.G3().$P();if(this.zg&&c&&!u.IIt())return null;const f=s;c||(s=null);let d;d=i&&!n&&l&&!this.UPt.has(l[2])?l[2]:this.zPt++;const p=l?l[0]:null,m=U.un(U.Instance,{runtime:this,NF:u,qj:s,__t:p,N_t:l?l[3]:null,uid:d,tags:l?l[6]:null});this.UPt.set(d,m);let g=null,y=(c&&(g=m.xk(),void 0!==e&&void 0!==h&&(g.mT(e),g.MT(h)),u.s_t(!0)),s&&(a||s.NJ(m,!0),s.hk().E9(u)),this.BPt++,!0);if(o){const b=o.LF();if(b.VF()&&u.VF()){const x=u.G9(),v=b.G9();x===v&&(y=!1)}}if(u.VF()&&!i&&!n&&y){const G=new Set;for(const C of u.G9().cq())if(C!==u){const I=this.H4t(C,g,G);if(I){const _=this.DJ(I,f,!1,g?g.pT():e,g?g.yT():h,!0,!1,void 0,a);m.fq(_)}else{const F=this.DJ(C,f,!1,g?g.pT():e,g?g.yT():h,!0,!1,void 0,a);m.fq(F)}}for(const E of m.JF()){E.fq(m);for(const D of m.JF())E!==D&&E.fq(D)}}if(c&&!i&&r&&this.q4t(m,p,g,s,e,h,a),u.VF()&&!i&&!n&&r)for(const A of m.JF()){const N=A.xk();if(N){const j=A.G3(),L=A.LF().xJ()[0];j.$P()?this.q4t(A,L,N,s,N.pT(),N.yT(),a):this.q4t(A,L,N,s,void 0,void 0,a)}}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.C5(),B=e-g.pT()+O.pT(),z=h-g.yT()+O.yT();O.Xj(B,z)}u.ZIt();const k=l?U.ho(l[5]):null,P=l?l[4].map(t=>U.ho(t)):null,M=c&&p&&p[13];if(M&&m.F_t(),m.GIt(k,P),M){const R=p[13];m.wB().N2t(R[2],R[0],R[1])}this.kPt.push(m),this.FPt=!0,this.Ej()&&W.InstanceCreated(m);const w=this.q3t.instancecreate;return w.DB=m,this.DCt.dispatchEvent(w),m}iDt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const n=this.b7.$q(s),r=n.vk(i);return r.CJ(e)}H4t(t,s,i){const e=s?.hEt()??[];for(const h of e){const n=this.iDt(h),r=!!h[4],o=this.TJ(n[1]);if(!i.has(n)&&t===o&&r)return i.add(n),n}}q4t(a,t,s,l,u,c,f){const i=s.xAt(),e=s.hEt();if(a.xk().vAt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],n=g[5],r=g[6],o;if(r)o=r;else{const S=this.b7.$q(t),T=S.vk(s);o=T.CJ(i)}const y=this.TJ(o[1]),M=a.rEt(y),w=d.has(y);if(M&&!w&&h){const b=a.oEt(y),x=(b.xk().E_t(o[0]),u+o[0][0]-p),v=c+o[0][1]-m;b.xk().Xj(x,v),b.xk().vAt(n),a.O5(b,{j5:!!(e>>0&1),z5:!!(e>>1&1),W5:!!(e>>2&1),V5:!!(e>>3&1),Y5:!!(e>>4&1),iB:!!(e>>5&1),q5:!!(e>>6&1),X5:!!(e>>7&1),tB:!!(e>>8&1)}),d.add(y)}else{const G=u+o[0][0]-p,C=c+o[0][1]-m,I=this.DJ(o,l,!1,G,C,!1,!0,a,f);I.xk().vAt(n),a.O5(I,{j5:!!(e>>0&1),z5:!!(e>>1&1),W5:!!(e>>2&1),V5:!!(e>>3&1),Y5:!!(e>>4&1),iB:!!(e>>5&1),q5:!!(e>>6&1),X5:!!(e>>7&1),tB:!!(e>>8&1)})}}}}BF(i){if(!this.WPt.has(i)){let t=i.LF(),s=this.PPt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.PPt.set(t,s);if(this.Ej()&&W.InstanceDestroyed(i),i.B_t(),this.FPt=!0,i.VF())for(const e of i.JF())this.BF(e);for(const h of i.children())h.eB()&&this.BF(h);if(!this.b7.J3()&&!this.R3t){const n=this.sR();n.W3(!0),i.yEt(),n.W3(!1)}i.MEt(this.b7.J3())}}Y3(){this.FPt&&(this.jPt=!0,this.Z4t(),this.X4t(),this.jPt=!1,this.FPt=!1,this.Dk())}Z4t(){for(const t of this.kPt){const s=t.LF();s.NJ(t);for(const i of s.Qdt())i.NJ(t),i.ZIt()}U.Wr(this.kPt)}X4t(){this.DCt.jf(!0);for(const[t,s]of this.PPt.entries())this.K4t(t,s),s.clear();this.PPt.clear(),this.DCt.jf(!1)}K4t(t,s){for(const i of s){const e=this.q3t.instancedestroy,h=(e.DB=i,this.DCt.dispatchEvent(e),this.UPt.delete(i.YF()),this.I3t.delete(i),i.xk());h&&(h.IAt(),h.kJ(),h.B_t()),this.WPt.add(i),this.BPt--}U.Kr(t.R3(),s),t.ZIt(),this.QPt.add(t);for(const n of t.Qdt())U.Kr(n.R3(),s),n.ZIt(),this.QPt.add(n);if(t.G3().$P()){const r=new Set([...s].map(t=>t.xk().vk()));for(const o of r)o.qY(s)}}KIt(){return this.kPt}*ibt(t){for(const s of this.KIt())t.VJ()?s.LF().KSt(t)&&(yield s):s.LF()===t&&(yield s)}vIt(){return this.zPt++}CIt(t,s){this.UPt.set(t,s)}I6(t){this.f3t!==(t=!!t)&&(this.f3t=!!t,this.f3t)&&this.d3t&&(this.D6(!1),this.d3t=!1)}_6(){return this.f3t}k9(){this.DCt.dispatchEvent(U.un(U.Event,"renderercontextlost")),this.D6(!0);for(const s of this.EPt)!s.VJ()&&s._It()&&s.O9();const t=this.$R();t&&t.k9(),U.GGt.LV(),U.KQ.LV()}async XRt(){await this.$R().I9(null,this.PS()),this.DCt.dispatchEvent(U.un(U.Event,"renderercontextrestored")),this.D6(!1),this.Dk()}i4t(t){if(this.f3t){const s=t.hidden;this.D6(s),(this.d3t=s)||this.Dk()}}r4t(t){this.Rkt()&&this.KPt&&!U.li.Si&&!t.data.parentHasFocus&&(this.D6(!0),this.$Pt=!0)}o4t(){this.$Pt&&(this.D6(!1),this.$Pt=!1)}J4t(){const t=this.s3t;"vsync"===this.qPt?-1===this.POt&&(this.POt=self.requestAnimationFrame(t.i3t)):"unlimited-tick"===this.qPt?(-1===this.e3t&&(this.e3t=U.yo(t.h3t)),-1===this.POt&&(this.POt=self.requestAnimationFrame(t.n3t))):-1===this.e3t&&(this.e3t=U.yo(t.i3t))}V4t(){-1!==this.POt&&(self.cancelAnimationFrame(this.POt),this.POt=-1),-1!==this.e3t&&(U.Mo(this.e3t),this.e3t=-1)}TR(){return 0<this.p3t}D6(t){if(!this.CRt()){const s=this.TR(),i=(this.p3t+=t?1:-1,this.p3t<0&&(this.p3t=0),this.TR());if(!s&&i)console.log("[Construct] Suspending"),this.V4t(),this.DCt.dispatchEvent(U.un(U.Event,"suspend")),this.Sj(U.aq.oq.rq.$4t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.M3t=e,this.E3t=e,this._3t=0,this.D3t=0,this.A3t=0,this.N3t=0,this.O3t=0,this.L3t=0,this.DCt.dispatchEvent(U.un(U.Event,"resume")),this.Sj(U.aq.oq.rq.tFt,null,null),this.g1t()||this.NX(e)}}}p6(t){this.X3t.yc(t)}M6(t){this.K3t.yc(t)}g6(t){this.$3t.yc(t)}m6(t){this.X3t.G0(t)}w6(t){this.K3t.G0(t)}y6(t){this.$3t.G0(t)}sFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Dj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.NX(),s&&W.AddIndividualBehaviorTickTime(t.CB(),performance.now()-i)),e}iFt(){const t=this.Ej();this.X3t.md(!0);for(const s of this.X3t)this.sFt(s,t);this.X3t.md(!1)}eFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.T6(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.hGt(),s&&W.AddIndividualBehaviorTickTime(t.CB(),performance.now()-i)),e}hFt(){const t=this.Ej();this.K3t.md(!0);for(const s of this.K3t)this.eFt(s,t);this.K3t.md(!1)}nFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Nj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.$2t(),s&&W.AddIndividualBehaviorTickTime(t.CB(),performance.now()-i)),e}rFt(){const t=this.Ej();this.$3t.md(!0);for(const s of this.$3t)this.nFt(s,t);this.$3t.md(!1)}*oFt(){const t=this.Ej();this.X3t.md(!0);for(const s of this.X3t){const i=this.sFt(s,t);U.Jo(i)&&(yield*i)}this.X3t.md(!1)}*aFt(){const t=this.Ej();this.K3t.md(!0);for(const s of this.K3t){const i=this.eFt(s,t);U.Jo(i)&&(yield*i)}this.K3t.md(!1)}*lFt(){const t=this.Ej();this.$3t.md(!0);for(const s of this.$3t){const i=this.nFt(s,t);U.Jo(i)&&(yield*i)}this.$3t.md(!1)}async NX(a,t,s){this.u3t=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.ek(),f=this.AP();if(this.a3t&&(!this.TR()||t||l)){let t=performance.now(),s=(this.l3t=!0,this.uFt(a||0),this.A3t++,this.cFt(),this.fFt()),i=(this.qTt()&&await s,this.DCt.s0(this.q3t.pretick)),e=(i instanceof Promise&&await i,this.Fq(this.Z3t.pretick),this.dFt()),h=(this.qTt()&&await e,this.pFt()&&await this.mFt(),c.lk()&&await this.gFt(),this.yFt()),n=(this.qTt()&&await h,c.$R()),r=n.S9(),o=!1;if(-1!==r&&(n.T9(),f.w9()!==r)){const d=this.AP().z9(r);this.jO()&&(o=!0,await d)}this.gf("canvas","update-html-layer-dom-state",{layersDomState:n.KJ().filter(t=>t.Y4()).map(t=>t.iH())}),u&&this.wL(),o&&this.gf("canvas","cleanup-html-layers"),this.CRt()&&(await this.D4t(),this.CR()>=this.I4t())?this.N4t():(this.TR()||l||this.J4t(),this.r3t++,this.o3t++,this.l3t=!1,this.L3t+=performance.now()-t)}}async fFt(){const t=this.jft,s=this.Ej();this.Y3(),t.W3(!0),this.h1t(this.$R()),s&&W.StartMeasuringTime(),this.qTt()?await t.P1t():t.N1t(),s&&W.AddEventsTime(),this.n1t(),t.W3(!1),this.Y3(),t.W3(!0)}async dFt(){const t=this.jft,s=this.Ej(),i=this.qTt(),e=this.DCt,h=this.q3t,n=this.Z3t;s&&W.StartMeasuringTime(),i?await this.MFt(this.oFt()):this.iFt(),i?await this.MFt(this.aFt()):this.hFt(),s&&W.AddBehaviorTotalTickTime(),s&&W.StartMeasuringTime(),i?await this.wFt(h.tick):e.dispatchEvent(h.tick),s&&W.AddPluginTotalTickTime(),t.W3(!1),this.Fq(n.tick)}async yFt(){const t=this.jft,s=this.DCt,i=this.q3t,e=this.Z3t,h=this.Ej(),n=this.qTt();h&&W.StartMeasuringTime(),n?await t.r1t(this.b7):t.e1t(this.b7),h&&W.AddEventsTime(),this.xPt.ZNt(),this.cFt(),this.c3t=!1,t.W3(!0),h&&W.StartMeasuringTime(),n?await this.MFt(this.lFt()):this.rFt(),h&&W.AddBehaviorTotalTickTime(),h&&W.StartMeasuringTime(),n?await this.wFt(i.tick2):s.dispatchEvent(i.tick2),h&&W.AddPluginTotalTickTime(),t.W3(!1),this.Fq(e.tick2),n&&await t.y1t()}cFt(){if(0!==this.WPt.size){const t=this.DCt;t.jf(!0);for(const s of this.QPt)s.C1t().mft(this.WPt);this.QPt.clear(),this.jft.j1t(this.WPt);for(const i of this.WPt)i.cn();this.WPt.clear(),t.jf(!1)}}async gFt(){let t=this.ek(),s=0;for(;t.lk()&&s++<10;)await this.SFt(t.nZ())}uFt(t){let s=0;if(this.CRt())s=1/this._4t(),this.w3t=s,this.S3t=s;else if(0!==this.M3t){const i=Math.max(t-this.M3t,0);.5<(s=i/1e3)&&(s=0),this.w3t=s,this.S3t=U.yn(s,this.x3t,this.b3t)}this.M3t=t,this.T3t=this.S3t*this.C_t,this.v3t.yc(this.T3t),this.G3t.yc(s*this.C_t),this.C3t.yc(this.S3t);for(const[e,h]of this.I3t)h.yc(this.S3t*e.ER());this.YPt&&this.YPt.lkt(),1e3<=t-this.E3t&&(this.E3t+=1e3,1e3<=t-this.E3t&&(this.E3t=t),this.D3t=this._3t,this._3t=0,this.N3t=this.A3t,this.A3t=0,this.O3t=Math.min(this.L3t/1e3,1),this.L3t=0,this.YPt&&this.YPt.akt(),this.xPt.JNt(),this.Ej())&&W.Update1sPerfStats()}k_t(t,s){if(s){if(!this.I3t.has(t)){const i=U.un(U.I0);i.N0(this.v3t),this.I3t.set(t,i)}}else this.I3t.delete(t)}P_t(t){const s=this.I3t.get(t);return s?s.ei():this.CR()}async SFt(t){const s=this.DCt,i=this.ek(),e=i.$R();await e.yq(),e.R9(t,this.PS()),e===t&&this.jft.Sq(),this.xPt.ZNt(),this.cFt(),s.dispatchEvent(this.q3t.beforelayoutchange),U.zf.h0(!0),await t.I9(e,this.PS()),U.zf.h0(!1),await t.P9(!1),s.dispatchEvent(this.q3t.layoutchange),this.Dk(),this.c3t=!0,this.Y3(),this.A4t()}Dk(){this.XPt=!0}KRt(){return this.YPt?this.YPt.KRt():null}$Rt(){return this.YPt?this.YPt.$Rt():null}PS(){return this.YPt?this.YPt.PS():null}wL(){const i=this.YPt;if(i&&!i.ZRt()){const e=this.PS(),t=e.DA(),h=t&&e.yS(),n=t&&e.AM();if(h&&e.gA(),this.XPt||this.CRt()){const r=this.b7.$R(),o=(this._3t++,e.aA(),this.Ej());o&&W.StartMeasuringTime(),this.XPt=!1;let t=null,s=(h&&(t=i.fkt().hE(),e.EA(t)),null);n&&(s=e.StartFrameTiming(2*(1+r.d9())),e.StartMeasuringRenderPassTime(0,1)),this.LY()&&"low"===i.kH()?e.TD(i.CH(),i.IH()):e.bD(),this.TFt(this.PS(),r),t&&e.AA(t),n&&(e.StopMeasuringRenderPassTime(),this.YPt.dkt(s)),e.lS(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.mkt()}else e.fS()}}Dq(t){return"low"===this.AP().kH()||t.yS()&&(this.RH()||this.LY())}TFt(s,i){s.jM(),s.jD(),s.AD(1,1,1,1),s.SA(null),s.RD(null),s.uA(this.LY()),this.Dq(s)&&i._q(s);const e=i.w9();for(let t=1;t<e;++t)i.Oq(s,t),s.AM()&&s.Restart();this.Dq(s)||i._q(s),i.Lq(s)}Sj(t,s,i){if(!this.a3t)return!1;let e=!this.l3t&&!this.jft.T1t(),h=0;e&&(h=performance.now());const n=this.Ej(),r=(n&&this.Q6(!1),this.jft.u1t(this.b7,t,s,i));if(e){const o=performance.now()-h;this.L3t+=o,n&&W.AddTriggersTime(o)}return n&&this.Q6(!0),r}z2t(t,s,i){if(!this.qTt())return this.Sj(t,s,i);if(this.g1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.l3t||this.jft.T1t())return this.jft.d1t(this.b7,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async bj(t,s,i){if(!this.qTt())return this.Sj(t,s,i);if(!this.a3t)return!1;if(this.g1t())return this.jft.p1t(t,s,i);if(!this.$R())return this.jft.c1t(t,s,i);let e=performance.now(),h=this.jft.d1t(this.b7,t,s,i),n=h.next();for(;!n.done;)await this.a1t(n.value),n=h.next();return this.TR()||this.jft.T1t()||(await this.jft.y1t(),this.u3t&&!this.l3t&&this.J4t()),this.L3t+=performance.now()-e,n.value}U2t(t,s,i){const e=this.Ej(),h=(e&&this.Q6(!1),this.jft.M1t(this.b7,t,s,i));return e&&this.Q6(!0),h}W2t(t,s,i){return this.jft.w1t(this.b7,t,s,i)}Q2t(t){return this.m3t.yc(t)}h1t(t){this.RPt.push(t)}n1t(){if(!this.RPt.length)throw new Error("layout stack empty");this.RPt.pop()}Tk(){return this.RPt.length?this.RPt.at(-1):this.$R()}xR(t){return t&&-1!==t.ER()?this.S3t*t.ER():this.T3t}DX(){return this.T3t}AX(){return this.S3t}GR(){return this.w3t}ER(){return this.C_t}DR(t){(isNaN(t)||t<0)&&(t=0),this.C_t=t}WR(t){this.x3t=Math.max(t,0)}UR(){return this.x3t}JR(t){this.b3t=Math.max(t,0)}VR(){return this.b3t}AR(){return this.D3t}LR(){return this.N3t}RR(){return this.O3t}bFt(){return this.y3t}CR(){return this.v3t.ei()}xFt(){return this.G3t.ei()}_R(){return this.C3t.ei()}Itt(){return this.r3t}vFt(){return this.o3t}GFt(){return this.BPt}LO(){return this.nPt}RO(){return this.rPt}CFt(){return this.oPt}IFt(){return this.aPt}PO(){return this.lPt}Mk(t){if(this.R3t)throw new Error("cannot call while loading state - wait until afterload event");return this.UPt.get(t)||null}uq(){this.UPt.clear();for(const t of this.EPt)if(!t.VJ())for(const s of t.R3())this.UPt.set(s.YF(),s)}Rkt(){return"preview"===this.Jkt}Ej(){return this.Kkt}IP(){return this.Jkt}_P(){return"nwjs"===this.IP()||this.Ykt}Pkt(){return"cordova"===this.Jkt}_Ft(){return"Android"===U.li.ci&&("cordova"===this.Jkt||"playable-ad-single-file"===this.Jkt||"playable-ad-zip"===this.Jkt||"instant-games"===this.Jkt)}EFt(){return this.aQ}DFt(){return this.Hkt}EP(){return this.qkt}AFt(){return this.Zkt}EO(){return this.xPt}xGt(){return this.bPt.xGt()}vGt(){return this.bPt.vGt()}LY(){return this.HPt}NFt(){return this.PS().SM(this.vY())}yM(t){return this.PS().yM(t||this.vY())}LFt(){return this.c3t}OFt(t){this.ZPt!==(t=!!t)&&(this.ZPt=t,this.ek().oZ(),this.Dk())}JO(){return this.ZPt}RFt(t){if(!this._Pt.has(t)){const i=()=>this.kFt(t);this._Pt.set(t,i),t.Jf().addEventListener("animationframeimagechange",i)}const s=this.kg.Dg(t);return s.Vg()||s.Yg().then(()=>this.Dk()),s}kFt(t){this.kg.Og(t)}CPt(t){const s=[];for(const i of t.BIt())for(const e of i.XB()){const h=e.hz();s.push({source:e,width:h.pm(),height:h.Cm(),tag:e.xz()})}return{Wg:s}}async IPt(t){const s=U.un(U.yd),i=[],h=new Map;for(const r of t.BIt())for(const o of r.XB()){const a=o.hz().VGt();h.has(a)||(h.set(a,null),i.push(s.yc(async()=>{const t=await a.PV();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.BIt())for(const u of l.XB())e.push(s.yc(async()=>{const t=u.hz(),s=h.get(t.VGt()),i=await t.JGt(s),e=await createImageBitmap(i);return{qg:e}}));const n=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Wg:n}}PFt(t){this.k3t=t,this.P3t=!1}FFt(){this.k3t="",this.P3t=!0}jFt(t){this.F3t=t}Qbt(t){this.kj=t}BFt(){return this.j3t}pFt(){return!!(this.k3t||this.P3t||this.F3t||null!==this.kj)}async mFt(){if(this.k3t&&(this.Y3(),await this.zFt(this.k3t),this.UFt()),this.F3t&&(await this.WFt(this.F3t),this.UFt(),this.Ej())&&W.StepIfPausedInDebugger(),this.P3t){const t=await this.QFt();this.j3t=t,await this.bj(U.aq.oq.rq.VFt,null),this.j3t="",this.UFt()}if(null!==this.kj){this.Y3();try{await this.JFt(this.kj),this.j3t=this.kj,await this.bj(U.aq.oq.rq.YFt,null),this.j3t=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.bj(U.aq.oq.rq.HFt,null)}this.UFt()}}UFt(){this.k3t="",this.P3t=!1,this.F3t="",this.kj=null}QP(){return this.B3t||(this.B3t=localforage.Pi({name:"c3-localstorage-"+this.CFt(),description:this.LO()})),this.B3t}qFt(){return this.z3t||(this.z3t=localforage.Pi({name:"c3-savegames-"+this.CFt(),description:this.LO()})),this.z3t}async zFt(t){const s=await this.QFt();try{await this.qFt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.j3t=s,await this.bj(U.aq.oq.rq.VFt,null),this.j3t=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.bj(U.aq.oq.rq.ZFt,null)}}async WFt(t){try{const s=await this.qFt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.JFt(s),this.j3t=s,await this.bj(U.aq.oq.rq.YFt,null),this.j3t=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.bj(U.aq.oq.rq.HFt,null)}}async QFt(){const t={c3save:!0,version:1,rt:{time:this.CR(),timeRaw:this.xFt(),walltime:this._R(),timescale:this.ER(),tickcount:this.Itt(),next_uid:this.zPt,running_layout:this.$R().$J(),start_time_offset:Date.now()-this.y3t},types:{},layouts:{},events:this.jft.g7(),timelines:this.S$.g7(),user_script_data:null};for(const i of this.EPt)i.VJ()||i.a_t()||(t.types[i.$J().toString()]=i.g7());for(const e of this.b7.rk())t.layouts[e.$J().toString()]=e.g7();const s=this.XFt("save");return s.saveData=null,await this.eq(s),t.user_script_data=s.saveData,JSON.stringify(t)}Z9(){return this.R3t}async JFt(t){const s=this.ek(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.Vbt(),this.DCt.dispatchEvent(U.un(U.Event,"beforeload"));for(const a of this.z4t()){const l=a.LF();l.a_t()||a.LZ()}let e=i.rt,h=(this.v3t.Set(e.time),e.hasOwnProperty("timeRaw")&&this.G3t.Set(e.timeRaw),this.C3t.Set(e.walltime),this.C_t=e.timescale,this.r3t=e.tickcount,this.y3t=Date.now()-e.start_time_offset,e.running_layout),n=!(this.R3t=!0);if(h!==this.$R().$J()){const u=s.$q(h);if(!u)return;await this.SFt(u),n=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.$q(d);p&&p.y7(f)}const r=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.N6(y);!M||M.VJ()||M.a_t()||M.y7(g,r)}for(const w of this.b7.rk())for(const S of w.d4())S.M7();if(this.Y3(),this.uq(),this.R3t=!1,n){for(const T of this.z4t())T.X9();for(const[b,x]of Object.entries(i.types)){const v=parseInt(b,10),G=this.N6(v);!G||G.VJ()||G.a_t()||G.c_t(x)}}this.zPt=e.next_uid,this.jft.y7(i.events);for(const C of this.EPt)if(!C.VJ()&&C.VF())for(const I of C.R3()){const _=I.qF();for(const E of C.G9().cq())if(E!==C){const D=E.R3();if(_<0||_>=D.length)throw new Error("missing sibling instance");I.fq(D[_])}}this.S$.y7(i.timelines),s.rZ(),s.oZ();for(const A of r)A.gEt();this.Jbt(),this.DCt.dispatchEvent(U.un(U.Event,"afterload")),this.Fq(this.XFt("afterload"));for(const[N,L]of Object.entries(i.types)){const O=parseInt(N,10),R=this.N6(O);R&&R.u_t()}const o=this.XFt("load");o.saveData=i.user_script_data,await this.eq(o),this.Dk()}KFt(t,s){return t.xk().MAt()-s.xk().MAt()}hNt(t,s){t.xk()&&!this.c4t.has(t)&&(this.c4t.set(t,s),this.f4t.push(t))}Vbt(){this.c4t=new WeakMap,U.Wr(this.f4t)}Jbt(t="full",s=null){this.f4t.sort(this.KFt);for(const i of this.f4t)i.RZ(this.c4t.get(i),t,s);for(const e of this.f4t)e.TEt(this.c4t.get(e),t,s);this.Vbt()}async $Ft(t){const s=await Promise.all(t.map(async t=>{const s=this.Pkt()&&this.TV.zQ();if(s||"playable-ad-single-file"===this.IP()){const i=await this.TV.Eo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.t4t.tjt(s)}sjt(t,s){this.t4t.ijt(t,s)}ejt(t,s){this.t4t.hjt(t,s)}njt(t,s,i,e){return this.t4t.njt(t,s,i,null,null,e)}rjt(t,s,i,e){return this.t4t.rjt(t,s,i,e)}ojt(){return this.t4t.ajt()}gk(t,s){this.gf("runtime","invoke-download",{url:t,filename:s})}async vkt(t,s,i,e,h,n){if(e=e||s,h=h||i,this.jO()){const r=await this.Nk("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n});return r.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?self.createImageBitmap(o,n):o}}async ljt(t){return this.jO()?this.Nk("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}ujt(){this.V3t||(this.V3t=!0,this.gf("runtime","enable-device-orientation"))}cjt(){this.J3t||(this.J3t=!0,this.gf("runtime","enable-device-motion"))}KR(){return this.g3t()}fjt(t){this.g3t=t}h4t(){const t=this.PS();return{fps:this.AR(),tps:this.LR(),cpu:this.RR(),gpu:this.PR(),layout:this.$R()?this.$R().ef():"",renderer:t.yS()?t.jA():t.GetAdapterInfoString()}}g1t(){return!!this.Ej()&&W.g1t()}a1t(t){return this.qTt()?W.a1t(t):Promise.resolve()}Qgt(){return!!this.qTt()&&W.BreakNext()}djt(t){this.$kt=!!t,this.pjt()}mjt(){return this.$kt}qTt(){return this.tPt}Q6(t){t?this.sPt--:this.sPt++,this.pjt()}pjt(){this.tPt=this.Ej()&&this.$kt&&0===this.sPt}amt(){return this.Ej()&&W.amt()}AH(){return this.Ej()&&this.PS().DA()&&W.AH()}async MFt(t){if(t)for(const s of t)await this.a1t(s)}wFt(t){return this.MFt(this.DCt.e0(t))}udt(t){return this.jft.udt(t.name,t.params)}Ok(t){if(this.jO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}qP(){return this.a4t}XFt(t){const s=U.un(U.Event,t,!1);return s.runtime=this.a4t,s}b4t(){this.a4t=new self.xO(this),this.Z3t={pretick:this.XFt("pretick"),tick:this.XFt("tick"),tick2:this.XFt("tick2")}}G4t(){const t={};for(const s of this.EPt)t[s.Pdt()]={value:s.w3(),enumerable:!0,writable:!1};this.a4t.KO(t)}C4t(){const t={};for(const s of this.sR().Vdt())t[s.Pdt()]=s.Fdt();this.a4t.$O(t)}ck(){return this.u4t}d3(t,s){this.l4t.set(t,s)}y4(t){return this.l4t.get(t)}wP(t){if(!(t instanceof self.x3))throw new TypeError("expected IObjectClass");const s=this.y4(t);if(s&&s instanceof U.Alt)return s;throw new Error("invalid IObjectClass")}N3(t){if(!(t instanceof self.AF))throw new TypeError("expected IInstance");const s=this.y4(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}bk(t){if(!(t instanceof self.pB))throw new TypeError("expected IWorldInstance");const s=this.y4(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.Fkt.i2,self.C3_InitRuntime=(t,s)=>t.E_t(s)}{const Oa=self.Ps;Oa.s4t=class extends Oa.an{constructor(t,s){super(),this.df=t,this.gjt=new Map,this.yjt=0,this.Mjt=s.inputPort,s.outputPort.onmessage=t=>this.wjt(t),this.Sjt=s.maxNumWorkers,this.Tjt=1,this.bjt=!1,this.xjt=!1}ajt(){return this.Sjt}tjt(t){this.Mjt.postMessage({type:"_import_scripts",scripts:t})}ijt(t,s){this.Mjt.postMessage({type:"_send_blob",blob:t,id:s})}hjt(t,s){this.Mjt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}njt(t,s,i,e,h,n){if(i=i||[],"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.yjt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.gjt.set(r,{resolve:t,progress:e,reject:s,vjt:!1,maxWorkerNum:n})});return h&&h.x0(()=>this.Gjt(r)),this.Mjt.postMessage(o,i),this.Cjt(),a}rjt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.yjt++,n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.Mjt.postMessage(n,i)}Gjt(t){const s=this.gjt.get(t);s&&(s.vjt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Mjt.postMessage({type:"_cancel",jobId:t}))}wjt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.Ijt(e,s.result);break;case"progress":this._jt(e,s.progress);break;case"error":this.Ejt(e,s.error);break;case"ready":this.Djt();break;default:throw new Error(`unknown message from worker '${i}'`)}}Ijt(t,s){const i=this.gjt.get(t);if(!i)throw new Error("invalid job ID");i.vjt||i.resolve(s),this.gjt.delete(t)}_jt(t,s){const i=this.gjt.get(t);if(!i)throw new Error("invalid job ID");!i.vjt&&i.progress&&i.progress(s)}Ejt(t,s){const i=this.gjt.get(t);if(!i)throw new Error("invalid job ID");i.vjt||i.reject(s),this.gjt.delete(t)}Djt(){this.bjt&&(this.bjt=!1,this.Tjt++,this.Tjt<this.Sjt?this.Cjt():this.Mjt.postMessage({type:"_no_more_workers"}))}Ajt(){let t=0,s=[...this.gjt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async Cjt(){if(!(this.Tjt>=this.Sjt||this.bjt||this.xjt||this.Ajt()<=this.Tjt))try{this.bjt=!0;const t=await this.df.Nk("runtime","create-job-worker");t.outputPort.onmessage=t=>this.wjt(t)}catch(t){this.xjt=!0,this.bjt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Tjt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,n=""+e;return h<n?-1:n<h?1:0}},S=(w,self.Ps),i=null,e="",h="",n=[],r="",o="",a="",T=S.un(S.R0t);S.aq.oq=class extends S.Jxt{constructor(t){super(t),this.D0t=this.df.sR().U6(),this.gft=this.df.sR().pR(),this.Njt=0,this.Ljt=0,this.Ojt=new Map}cn(){super.cn()}Dk(){this.df.Dk()}Sj(t){this.df.Sj(t,null,null)}Rjt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}kjt(t,s,i){if(t!==r||s!==o||i!==a){const e=this.Rjt(s,i);n=t.match(e),r=t,o=s,a=i}return n}async Pjt(t,s){if(s.length){this.Njt+=s.length;const i=[];for(const e of s)i.push(t.E9(e));await S.do(i,()=>{this.Ljt++}),this.Ljt++,this.Ljt===this.Njt&&(this.Ljt=0,this.Njt=0,this.df.Sj(S.aq.oq.rq.Fjt,null,null))}}rV(){return 0===this.Njt?1:this.Ljt/this.Njt}jjt(t,s){for(const i of s)0===i.j3()&&t.L9(i)}Bjt(){return T}zjt(s){const i=this.df.sR(),t=i.pR(),e=t.B6(),h=e.oR(),n=h.j6(),r=e.g0t(),o=t.z6(h),a=i.U6(),l=a.z6();if(l.L0t(s),r)for(let t=0;t<s&&!l.X6();++t)i.J6(n),l.q6(t),h.Y6(e,o),i.H6(n);else for(let t=0;t<s&&!l.X6();++t)l.q6(t),h.Y6(e,o);return t.K6(),a.K6(),!1}*Ujt(s){const i=this.df.sR(),t=i.pR(),e=t.B6(),h=e.oR(),n=h.j6(),r=e.g0t(),o=t.z6(h),a=i.U6(),l=a.z6();if(l.L0t(s),r)for(let t=0;t<s&&!l.X6();++t)i.J6(n),l.q6(t),yield*h.syt(e,o),i.H6(n);else for(let t=0;t<s&&!l.X6();++t)l.q6(t),yield*h.syt(e,o);return t.K6(),a.K6(),!1}Wjt(){const s=this.df.sR(),t=s.pR(),i=t.B6(),e=i.oR(),h=e.j6(),n=i.g0t(),r=t.z6(e),o=s.U6(),a=o.z6();if(n)for(let t=0;!a.X6();++t)s.J6(h),a.q6(t),e.Y6(i,r)||a.Cz(),s.H6(h);else for(let t=0;!a.X6();++t)a.q6(t),e.Y6(i,r)||a.Cz();return t.K6(),o.K6(),!1}*Qjt(){const s=this.df.sR(),t=s.pR(),i=t.B6(),e=i.oR(),h=e.j6(),n=i.g0t(),r=t.z6(e),o=s.U6(),a=o.z6();if(n)for(let t=0;!a.X6();++t){s.J6(h),a.q6(t);const l=yield*e.syt(i,r);l||a.Cz(),s.H6(h)}else for(let t=0;!a.X6();++t){a.q6(t);const u=yield*e.syt(i,r);u||a.Cz()}return t.K6(),o.K6(),!1}Vjt(t,s,i){const e=this.df.sR(),h=e.pR(),n=h.B6(),r=n.oR(),o=r.j6(),a=n.g0t(),l=h.z6(r),u=e.U6(),c=u.z6();if(c.W6(t),c.L0t(i),i<s)if(a)for(let t=s;t>=i&&!c.X6();--t)e.J6(o),c.q6(t),r.Y6(n,l),e.H6(o);else for(let t=s;t>=i&&!c.X6();--t)c.q6(t),r.Y6(n,l);else if(a)for(let t=s;t<=i&&!c.X6();++t)e.J6(o),c.q6(t),r.Y6(n,l),e.H6(o);else for(let t=s;t<=i&&!c.X6();++t)c.q6(t),r.Y6(n,l);return h.K6(),u.K6(),!1}*Jjt(t,s,i){const e=this.df.sR(),h=e.pR(),n=h.B6(),r=n.oR(),o=r.j6(),a=n.g0t(),l=h.z6(r),u=e.U6(),c=u.z6();if(c.W6(t),c.L0t(i),i<s)if(a)for(let t=s;t>=i&&!c.X6();--t)e.J6(o),c.q6(t),yield*r.syt(n,l),e.H6(o);else for(let t=s;t>=i&&!c.X6();--t)c.q6(t),yield*r.syt(n,l);else if(a)for(let t=s;t<=i&&!c.X6();++t)e.J6(o),c.q6(t),yield*r.syt(n,l),e.H6(o);else for(let t=s;t<=i&&!c.X6();++t)c.q6(t),yield*r.syt(n,l);return h.K6(),u.K6(),!1}Yjt(i){const t=i.P3(),s=t.R3();if(0!==s.length){const e=this.df.sR(),h=e.pR(),n=h.B6(),r=n.oR(),o=r.j6(),a=n.g0t(),l=h.z6(r),u=e.U6(),c=u.z6(),f=i.VF(),d=T.z6();if(S.Yr(d,s),c.L0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.X6();++t){e.J6(o);const p=d[t];i.P3().Dft(p),f&&p.pmt(),c.q6(t),r.Y6(n,l),e.H6(o)}else{t.Ift(!1);const m=t._ft();S.Wr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.X6();++t){const g=d[t];m[0]=g,f&&g.pmt(),c.q6(t),r.Y6(n,l)}}h.K6(),u.K6(),S.Wr(d),T.K6()}return!1}*Hjt(i){const t=i.P3(),s=t.R3();if(0!==s.length){const e=this.df.sR(),h=e.pR(),n=h.B6(),r=n.oR(),o=r.j6(),a=n.g0t(),l=h.z6(r),u=e.U6(),c=u.z6(),f=i.VF(),d=T.z6();if(S.Yr(d,s),c.L0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.X6();++t){e.J6(o);const p=d[t];i.P3().Dft(p),f&&p.pmt(),c.q6(t),yield*r.syt(n,l),e.H6(o)}else{t.Ift(!1);const m=t._ft();S.Wr(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.X6();++t){const g=d[t];m[0]=g,f&&g.pmt(),c.q6(t),yield*r.syt(n,l)}}h.K6(),u.K6(),S.Wr(d),T.K6()}return!1}qjt(i,t){const s=i.P3(),e=s.R3();if(0!==e.length){const h=this.df.sR(),n=h.pR(),r=h._dt(),o=n.B6(),a=o.oR(),l=a.j6(),u=o.g0t(),c=n.z6(a),f=h.U6(),d=f.z6(),p=i.VF(),m=T.z6();S.Wr(m),d.L0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.mSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.X6();++t){h.J6(l);const g=m[t][0];i.P3().Dft(g),p&&g.pmt(),d.q6(t),a.Y6(o,c),h.H6(l)}else{s.Ift(!1);const y=s._ft();S.Wr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.X6();++t){const M=m[t][0];y[0]=M,p&&M.pmt(),d.q6(t),a.Y6(o,c)}}n.K6(),f.K6(),S.Wr(m),T.K6()}return!1}*Zjt(i,t){const s=i.P3(),e=s.R3();if(0!==e.length){const h=this.df.sR(),n=h.pR(),r=h._dt(),o=n.B6(),a=o.oR(),l=a.j6(),u=o.g0t(),c=n.z6(a),f=h.U6(),d=f.z6(),p=i.VF(),m=T.z6();S.Wr(m),d.L0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.mSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.X6();++t){h.J6(l);const g=m[t][0];i.P3().Dft(g),p&&g.pmt(),d.q6(t),yield*a.syt(o,c),h.H6(l)}else{s.Ift(!1);const y=s._ft();S.Wr(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.X6();++t){const M=m[t][0];y[0]=M,p&&M.pmt(),d.q6(t),yield*a.syt(o,c)}}n.K6(),f.K6(),S.Wr(m),T.K6()}return!1}Xjt(t,s){let i=this.Ojt.get(t);if(!i){if(!s)return null;i={Kjt:null,$jt:new Map},this.Ojt.set(t,i)}return i}t5t(t,s,i,e,h){s.nR().yyt(i,s.uR()),e&&t.H6(h)}*s5t(t,s,i,e,h){yield*s.nR().Myt(i,s.uR()),e&&t.H6(h)}}}{const Ra=self.Ps;Ra.aq.oq.aIt=class extends Ra.an{constructor(t){super(),this.aft=t,this.df=t.Wk(),this.A2t=t.G3()}m2t(){}cn(){this.aft=null,this.df=null,this.A2t=null}}}{const ka=self.Ps;ka.aq.oq.Instance=class extends ka.an{constructor(t,s){super(),this.Gi=t,this.aft=this.Gi.LF(),this.P2t=this.aft.JSt(),this.df=this.Gi.Wk()}cn(){this.Gi=null,this.aft=null,this.P2t=null,this.df=null}}}{const I=self.Ps,Pa=[];I.aq.oq.rq={i5t(){return!0},nq(){return!0},Mq(){return!0},$4t(){return!0},tFt(){return!0},TR(){return this.df.TR()},Kmt(){const t=this.df.Idt();return!t.c0t()&&!t.l0t()},e5t(){let t=this.df._dt(),s=t.iSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.df.Itt();return s.set("TriggerOnce_lastTick",e),this.df.LFt()||i!==e-1},h5t(t){const s=this.df._dt(),i=s.iSt(),e=i.get("Every_lastTime")||0,h=this.df.CR(),n=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+n<=h?(i.set("Every_lastTime",e+n),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},ppt(t){const s=this.df.sR().qdt(t);return s&&s.ppt()},Rkt(){return this.df.Rkt()},Si(){return I.li.Si},R4t(){return!0},n5t(){return!0},r5t(){return!0},VFt(){return!0},ZFt(){return!0},YFt(){return!0},HFt(){return!0},o5t(t){return!!this.df.Mk(t)},a5t(t){switch(t){case 0:return"browser"===I.li.Mi;case 1:return"iOS"===I.li.ci;case 2:return"Android"===I.li.ci;case 8:return"cordova"===I.li.Mi;case 9:return"scirra-arcade"===this.df.IP();case 10:return"nwjs"===I.li.Mi;case 13:return"windows-uwp"===this.df.IP();default:return!1}},l5t(t,s,i){const e=this.Rjt(s,i);return e.test(t)},u5t(t,s,i){return I.compare(t,s,i)},c5t(t,s,i){return s<=t&&t<=i},f5t(t,s,i){return I.compare(t.Tet(),s,i)},d5t(t){return!!t.Tet()},p5t(t,s){const i=this.df.CR();if(0!==t)return I.compare(i,t,s);{const e=this.df._dt(),h=e.iSt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},m5t(t){return isNaN(t)},dxt(t,s,i){return I.Cn(I.wn(t),I.wn(i))<=I.wn(s)},pxt(t,s){return I._n(I.wn(t),I.wn(s))},xTt(t,s,i){let e=I.wn(t),h=I.wn(s),n=I.wn(i),r=!I._n(n,h);return r?!(!I._n(e,h)&&I._n(e,n)):I._n(e,h)&&!I._n(e,n)},g5t(t,s){return"number"==typeof t?0===s:1===s},y5t(t){return!!t},J1t(t){return t.toLowerCase()===this.df.sR().Z1t()},M5t(t,i,e,h){if(!t)return!1;let s=this.Bjt(),n=s.z6(),r=t.P3(),o=(I.Yr(n,r.R3()),r.Sft()&&I.Wr(r.Eft()),this.df._dt()),a=0;for(let t=0,s=n.length;t<s;++t){const u=n[t];n[a]=u,i=o.mSt(1,t),h=o.mSt(3,t),I.compare(i,e,h)?++a:r.Cft(u)}I.Ur(n,a),r.Aft(n);const l=!!n.length;return I.Wr(n),s.K6(),t.uyt(),l},w5t(t,s){if(!t)return!1;let i=this.Bjt(),e=i.z6(),h=t.P3(),n=(I.Yr(e,h.R3()),h.Sft()&&I.Wr(h.Eft()),this.df._dt()),r=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[r]=a,n.mSt(1,t)?++r:h.Cft(a)}I.Ur(e,r),h.Aft(e);const o=!!e.length;return I.Wr(e),i.K6(),t.uyt(),o},S5t(t,i,e){if(!t)return!1;const s=t.P3(),h=s.R3();if(0===h.length)return!1;let n=this.df._dt(),r=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=n.mSt(2,t),(null===r||0===i&&e<o||1===i&&e>o)&&(o=e,r=a)}return s.kft(r),t.uyt(),!0},T5t(t,s){if(!t)return!1;const i=t.P3(),e=i.R3();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.kft(h),t.uyt(),!0},b5t(t){if(!t)return!1;const s=t.P3(),i=s.R3(),e=Math.floor(this.df.KR()*i.length);if(e>=i.length)return!1;const h=i[e];return s.kft(h),t.uyt(),!0},x5t(t){if(!t)return!1;if(!t.j3())return!1;const s=t.P3();return s.Ift(!0),t.uyt(),!0},v5t(t,i,e){if(!t)return!1;const h=t.P3(),s=h.R3(),n=this.df.oR(),r=n.Pft(),o=this.df._dt().Xwt();h.Sft()?(I.Yr(Pa,s),h.wft(),h.Ift(!1)):r?(I.Yr(Pa,h.Eft()),I.Wr(h.Eft())):(I.Yr(Pa,h._ft()),I.Wr(h._ft()));for(let t=0,s=Pa.length;t<s;++t){const a=Pa[t];I.xor(a.xk().x5(i,e),o)?h.Gft(a):h.Cft(a)}return t.uyt(),I.xor(!!h._ft().length,o)},G5t(s){if(!s)return!1;let i=s.VJ(),e=null,h=this.df.KIt();for(let t=h.length-1;0<=t;--t){const n=h[t];if(i){if(n.LF().KSt(s)){e=n;break}}else if(n.LF()===s){e=n;break}}if(!e){const r=s.R3();r.length&&(e=r.at(-1))}if(!e)return!1;const t=s.P3();return t.kft(e),s.uyt(),!0},C5t(t){return this.df.qTt()?this.Ujt(t):this.zjt(t)},I5t(){return this.df.qTt()?this.Qjt():this.Wjt()},_5t(t,s,i){return this.df.qTt()?this.Jjt(t,s,i):this.Vjt(t,s,i)},gd(t){return this.df.qTt()?this.Hjt(t):this.Yjt(t)},E5t(t,s,i){return this.df.qTt()?this.Zjt(t,i):this.qjt(t,i)},D5t(t){return!!t&&t.W4()},A5t(t){return!!t&&t.Z4()},N5t(t){return!!t&&t.Y4()},L5t(t){return!!t&&!t.j3()},O5t(t,s,i){return!!t&&I.compare(100*t.DD(),s,i)},R5t(t){const s=this.df.$R();return!!s&&s.p9(t)},Fjt(){return!0},k5t(){return 0<this.Njt},P5t(t,s){const i=this.df.nEt();return!!i&&!!s&&!!i.Dlt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const n=t[1],r=s[1];return n-r},g=function(t,s){return t[1]-s[1]};m,g;const Fa=self.Ps,ja=[],Ba=[],za=Fa.un(Fa.Rect),Ua=Fa.un(Fa.Ho),Wa=[];Fa.aq.oq.qht={F5t(t,s){t.eht(s)},j5t(t,s){t.de()&&"number"!=typeof s&&(s=parseFloat(s)),t.eht(t.Tet()+s)},B5t(t,s){t.de()&&t.eht(t.Tet()-s)},z5t(t,s){t.eht(!!s)},U5t(t){t.eht(!t.Tet())},W5t(t){t.eht(t.Cdt())},Q5t(t){this.df.sR().Ydt(t)},V5t(t,s,i,e,h,n){if(t&&s){const r=this.df.z3(t,s,i,e,h,n);if(r){h&&s.U3(r);const o=this.df.sR(),a=(o.W3(!0),r.Q3(),o.W3(!1),new Map);r.Z_t(a,t,h);for(const[l,u]of a)l.P3().Nft(u)}}},J5t(t,s,i,e,h,n){if(t&&s){const r=this.df.B4t(t);r&&Fa.aq.oq.qht.V5t.call(this,r,s,i,e,h,n)}},WJ(h,n,r,o,a,t,l,u,c,f,d){if(h){let s=this.df.Tk(),i=s;if(t){const p=this.df.ek().Kq(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.vk(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.vk(u))){za.set(n,r,o,a);const m=i.WJ(h,za,e,t,c,f,d);h.P3().Aft(m),h.uyt()}}}},Y5t(){const t=this.D0t;t.C0t()&&t.v0t().Cz()},mpt(t,s){const i=this.df.sR().qdt(t);i&&(0===s?i.mpt(!1):1===s?i.mpt(!0):i.mpt(!i.ppt()))},H5t(t){this.df.DR(t)},q5t(t,s){if(s<0&&(s=0),t){const i=t.P3(),e=i.R3();for(const h of e)h.DR(s)}},Z5t(t){if(t){const s=t.P3(),i=s.R3();for(const e of i)e.tj()}},Pr(t,s){if(!(t<0)){const i=this.df.sR().E1t();return s?i.Pxt(t):i.Fxt(t),!0}},wR(t){return this.df.sR().E1t().jxt(t),!0},X5t(){const t=this.df.sR();return t.E1t().Bxt(t.V1t()),!0},yR(t){this.df.sR().yR(t)},async pkt(t,s,i,e,h,n){const r=this.df.AP();r&&(this.Dk(),await r.pkt(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.df.bj(Fa.aq.oq.rq.n5t,null))},K5t(t,s){if(!(t<=0||s<=0)){this.df.jRt(t,s),this.df.Tk().a7();const i=this.df.AP();i&&("off"!==i.NRt()&&this.df.U4t(t,s),i.t_(i.FU(),i.jU(),!0),this.df.Dk())}},$5t(t){const s=this.df.AP();s&&"off"!==s.NRt()&&(s.JRt(0!==t?"high":"low"),s.t_(s.FU(),s.jU(),!0))},kit(t){this.df.PFt(t)},tBt(){this.df.FFt()},sBt(t){this.df.jFt(t)},iBt(t){this.df.Qbt(t)},eBt(t){},hBt(){for(const t of this.df.ek().rk())t.Iq()},nBt(t){this.df.OFt(0!==t)},rBt(t,s){this.df.JR(1/t),this.df.WR(1/s)},oBt(t,s){this.df.WR(t),this.df.JR(s)},aBt(t){this.df.BR(["vsync","unlimited-tick","unlimited-frame"][t])},lBt(t,i){if(t){const s=t.P3(),e=s.R3(),h=ja,n=Ba,r=this.df.Tk(),o=t.VJ(),a=t.NMt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.xk();if(u){let t;t=o?l.Unt(i+l.LF().AMt(a)):l.Unt(i),h.push([u.vk().bO(),u.Gk()]),n.push([l,t])}}if(h.length){h.sort(m),n.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=n[t][0],f=r.Ck(h[t][0]),d=h[t][1],p=f.Ik();p[d]!==c&&((p[d]=c).xk()._k(f,!0),f.Ek(c),i=!0)}i&&this.df.Dk(),Fa.Wr(ja),Fa.Wr(Ba)}}},mP(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.df.EO().mP(t,s)},uBt(t){if(!this.df.Jg()){const s=this.df.ek();s.lk()||s.uk(t)}},cBt(t){if(!this.df.Jg()){const s=this.df.ek();if(!s.lk()){const i=s.Kq(t);i&&s.uk(i)}}},fBt(t){if(!this.df.Jg()){const s=this.df.ek();if(!s.lk()){const i=s.rk(),e=i.indexOf(s.$R());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.uk(h)}}}},dBt(){if(!this.df.Jg()){const t=this.df.ek();t.lk()||(t.uk(t.$R()),this.df.sR().$dt())}},pBt(t,s){t&&t.z4(s)},mBt(t,s){t&&t.V4(s)},gBt(t,s){t&&t.H4(s)},yBt(t,s){t&&t.ND(s/100)},MBt(t,s){t&&t.X4(s)},wBt(t,s){t&&t.tF(s)},SBt(t,s){t&&t.i4(Fa.wn(+s))},TBt(t,s,i){t&&(t.gF(!0),t.h4(s),t.r4(i))},bBt(t){t&&t.gF(!1)},xBt(t,s,i){t&&t.GY(s/100,i/100)},vBt(t,s){t&&t.ST(+s)},GBt(t,s){if(t){Ua.Ca(s),Ua.yn();const i=t.mF();i.ya(Ua)||(i.la(Ua),this.Dk())}},CBt(t,s){t&&t.lF(s)},IBt(t,s){t&&t.eT(s)},_Bt(t,s,i){if(t){const e=t.q3(),h=e.Eht(i);if(h){const n=1===s;h.nmt()!==n&&(h.bNt(n),t.PB(),this.df.Dk())}}},EBt(t,s,i,e){if(t){const h=t.q3(),n=h.Eht(s);if(n){i=Math.floor(i);const r=n.lv().cv(i);if(r){"color"===r?(Ua.Ca(e),e=Ua):"percent"===r&&(e/=100);const o=h.BB(n.bO(),i,e);o&&n.nmt()&&this.df.Dk()}}}},DBt(t,s){t&&t.fF(s)},ABt(t){this.df.Tk().t4(+t)},NBt(t){this.df.Tk().i4(Fa.wn(+t))},LBt(t,s){const i=this.df.Tk(),e=i.q3(),h=e.Eht(s);if(h){const n=1===t;h.nmt()!==n&&(h.bNt(n),i.PB(),this.df.Dk())}},OBt(t,s,i){const e=this.df.Tk(),h=e.q3(),n=h.Eht(t);if(n){s=Math.floor(s);const r=n.lv().cv(s);if(r){"color"===r?(Ua.Ca(i),i=Ua):"percent"===r&&(i/=100);const o=h.BB(n.bO(),s,i);o&&n.nmt()&&this.df.Dk()}}},RBt(t,s){const i=this.df.Tk();i.C4(t/100,s/100)},kBt(t){const s=this.df.Tk();0===t?s.E4():s.D4()},PBt(t){const s=this.df.Tk();s.h4(t)},FBt(t){const s=this.df.Tk();s.r4(t)},jBt(t,s){const i=this.df.Tk();i.h4(t),i.r4(s)},BBt(t){if(t){const s=t.jTt();if(s){const i=s.xk();if(i){const e=this.df.Tk();e.h4(i.pT()),e.r4(i.yT())}}}},M4(t,s,i){const e=this.df.Tk();try{e.M4(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},S4(t,s,i){if(t){const e=this.df.Tk();try{e.S4(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},b4(t){if(t){const s=this.df.Tk();s.b4(t)}},v4(){this.df.Tk().v4()},async zBt(t){const s=this.df.$R();if(s&&t&&!this.df.Jg()){const i=t.VJ()?t.igt():[t];await this.Pjt(s,i)}},async UBt(t){await Fa.aq.oq.qht.zBt.call(this,this.df.B4t(t))},WBt(t){const s=this.df.$R();if(s&&t){const i=t.VJ()?t.igt():[t];this.jjt(s,i)}},QBt(t){Fa.aq.oq.qht.WBt.call(this,this.df.B4t(t))},VBt(){const t=this.df.$R();if(t){const s=t.C9();this.jjt(t,s)}},async JBt(t){const s=this.df.$R();t&&s&&!this.df.Jg()&&await this.Pjt(s,t.x9())},async YBt(t){const s=this.df.$R(),i=this.df.ek().Kq(t);i&&s&&!this.df.Jg()&&await this.Pjt(s,i.x9())},gR(t){const s=this.gft.dR();if(s)switch(s.mR()){case 1:"number"==typeof t&&s.gR(t);break;case 2:"string"==typeof t&&s.gR(t);break;case 3:s.gR(t)}},HBt(t,s,i){const e=this.Xjt(t.toLowerCase(),!0),h=e.$jt,n=s.toLowerCase(),r=(h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Fa.first(h.values())||e.Kjt);if(r){const o=0!==r.cR(),a=0!==i.cR();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(n,i)},qBt(t,s){const i=this.Xjt(t.toLowerCase(),!0),e=(i.Kjt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Fa.first(i.$jt.values())||i.Kjt);if(e){const h=0!==e.cR(),n=0!==s.cR();if(h!=n)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.Kjt=s},ZBt(t,s,i){const e=this.df,h=e.qTt()?Wa:null,n=(i=Math.floor(i),this.Xjt(t.toLowerCase(),!1));if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.$jt.get(s.toLowerCase());if(!r){if(!n.Kjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.Kjt,i=0}if(!r.tc())return h;if(0!==r.cR())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.sR(),a=o.oR(),l=a.rR(),u=0<l.length,c=(u&&(r.uR()?o.J6(l):o.I1t(l)),[]),f=o.Tpt(a);if(f){const p=f.xpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Tet())}const d=r.xpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Cdt());return e.qTt()?this.s5t(o,r,c,u,l):this.t5t(o,r,c,u,l)}}}{const _=self.Ps;_.aq.oq.Zht={XBt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},P(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.df.KR()*t:this.df.KR()*(s-t)+t},gMt(...t){const s=Math.floor(this.df.KR()*t.length);return t[s]},KBt(t,...s){return"number"!=typeof t&&(t=0),s[t=_.yn(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},$Bt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},tzt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(_.wn(t))},cos(t){return Math.cos(_.wn(t))},tan(t){return Math.tan(_.wn(t))},asin(t){return _.Sn(Math.asin(t))},acos(t){return _.Sn(Math.acos(t))},atan(t){return _.Sn(Math.atan(t))},exp(t){return Math.exp(t)},Kt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},yn(t,s,i){return _.yn(t,s,i)},Dt(t,s,i,e){return _.xn(t,s,i,e)},angle(t,s,i,e){return _.Sn(_.Gn(t,s,i,e))},kt(t,s,i){return _.kt(t,s,i)},Ln(t,s,i){return _.Ln(t,s,i)},Rn(t,s,i,e){return _.Rn(t,s,i,e)},kn(t,s,i,e,h){return _.kn(t,s,i,e,h)},Pn(t,s,i){return _.Pn(t,s,i)},szt(t,s){return _.Sn(_.Cn(_.wn(t),_.wn(s)))},izt(t,s,i){return _.Sn(_.En(_.wn(t),_.wn(s),i))},ezt(t,s,i){return _.Sn(_.In(_.wn(t),_.wn(s),_.wn(i)))},hzt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},nzt(t,s){return(t|=0)^1<<(0|s)},rzt(t,s){return(t|=0)&1<<(0|s)?1:0},ozt(){return"\n"},azt(t){return"string"==typeof t?t.toUpperCase():""},lzt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},uzt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},czt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ue(s),"i")):-1},fzt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.ue(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(_.ue(s),"gi"),i):"string"==typeof t?t:""},dzt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},pzt(t,s,i){const e=this.Rjt(s,i);return t?t.search(e):-1},mzt(t,s,i,e){const h=this.Rjt(s,i);return t?t.replace(h,e):""},gzt(t,s,i){const e=this.kjt(t.toString(),s,i);return e?e.length:0},yzt(t,s,i,e){e=Math.floor(e);const h=this.kjt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},Mzt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},wzt(t){return encodeURIComponent(t)},Szt(t){return decodeURIComponent(t)},bR(){return this.df.DX()},Tzt(){return this.df.AX()},timescale(){return this.df.ER()},bzt(){return(Date.now()-this.df.bFt())/1e3},xzt(){return Date.now()},time(){return this.df.CR()},tickcount(){return this.df.Itt()},vzt(){return this.df.GFt()},fps(){return this.df.AR()},Gzt(){return this.df.RR()},Czt(){return this.df.PR()},Izt(){return this.df.AP().jP()},_zt(){return this.df.AP().zP()},Ezt(){return this.df.zO()},Dzt(){return this.df.WO()},Azt(){return this.df.zO()},Nzt(){return this.df.WO()},Lzt(){return this.df.Tk().n4()},Ozt(){return this.df.Tk().o4()},Rzt(){return this.df.Tk().ef()},kzt(){return this.df.Tk().s4()},Pzt(){return _.Sn(this.df.Tk().e4())},Fzt(){return this.df.Tk().pm()},jzt(){return this.df.Tk().Cm()},Bzt(){return 100*this.df.Tk().MY()},zzt(){return 100*this.df.Tk().wY()},Uzt(t){const s=this.df.Tk().vk(t);return s?s.yY().Cl():0},Wzt(t){const s=this.df.Tk().vk(t);return s?s.yY().Il():0},Qzt(t){const s=this.df.Tk().vk(t);return s?s.yY()._l():0},Vzt(t){const s=this.df.Tk().vk(t);return s?s.yY().El():0},Jzt(t){const s=this.df.Tk().vk(t);return s?s.yY().width():0},Yzt(t){const s=this.df.Tk().vk(t);return s?s.yY().height():0},Hzt(t){const s=this.df.Tk().vk(t);if(s){const i=s.yY();return(i.Cl()+i._l())/2}return 0},qzt(t){const s=this.df.Tk().vk(t);if(s){const i=s.yY();return(i.Il()+i.El())/2}return 0},Zzt(t,s,i){const e=this.df.Tk().vk(t);return e?e.SF(s,i)[0]:0},Xzt(t,s,i){const e=this.df.Tk().vk(t);return e?e.SF(s,i)[1]:0},Kzt(t,s,i){const e=this.df.Tk().vk(t);return e?e.vF(s,i)[0]:0},$zt(t,s,i){const e=this.df.Tk().vk(t);return e?e.vF(s,i)[1]:0},tUt(t,s,i,e){const h=this.df.Tk(),n=h.vk(t),r=h.vk(s);if(!n||!r||n===r)return i;const[o,a]=n.vF(i,e);return r.SF(o,a)[0]},sUt(t,s,i,e){const h=this.df.Tk(),n=h.vk(t),r=h.vk(s);if(!n||!r||n===r)return e;const[o,a]=n.vF(i,e);return r.SF(o,a)[1]},iUt(t){const s=this.df.Tk().vk(t);return s?s.K4():0},eUt(t){const s=this.df.Tk().vk(t);return s?_.Sn(s.iF()):0},hUt(t){const s=this.df.Tk().vk(t);return s?100*s.DD():0},nUt(t){const s=this.df.Tk().vk(t);return s?s.sF():0},rUt(t){const s=this.df.Tk().vk(t);return s?s.n4():0},oUt(t){const s=this.df.Tk().vk(t);return s?s.o4():0},aUt(t){const s=this.df.Tk().vk(t);return s?100*s.hF():0},lUt(t){const s=this.df.Tk().vk(t);return s?100*s.rF():0},uUt(t){const s=this.df.Tk().vk(t);return s?s.wT():0},cUt(t){const s=this.df.Tk().vk(t);return s?s.bO():-1},fUt(){const t=this.df.AP();return t?t.gkt():""},dUt(t){const s=this.D0t;if(!s.C0t())return 0;if(t){const i=s._0t(t);return i?i.bO():0}return s.v0t().bO()},pUt(){return this.df.BFt()},mUt(t,s,...i){const e=this.Xjt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.$jt.get(s.toLowerCase());if(!h){if(!e.Kjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.Kjt}const n=h.cR(),r=h.eR();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.tc())return r;const o=this.df,a=o.sR(),l=a.oR(),u=l.rR(),c=0<u.length,f=(c&&(h.uR()?a.J6(u):a.I1t(u)),h.xpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Cdt());const d=h.nR(),p=d.lR(d.rR(),h.uR(),n,r,...i);return c&&a.H6(u),p},gUt(){return this.df.CO().HR()},yUt(){return this.rV()},renderer(){return this.df.$Rt()?"webgpu":"webgl"},MUt(){return this.df.$Rt()?this.df.$Rt().GetAdapterInfoString():this.df.KRt().jA()},wUt(){let t=this.df.PS().SS();return Math.round(100*t/1048576)/100},SUt(t,s,i){return _.Qn(t,s,i)},TUt(t,s,i){return _.Jn(t/100,s/100,i/100)},bUt(t,s,i,e){return _.Vn(t/100,s/100,i/100,e/100)},xUt(t,s,i){return _.Jn(t/255,s/255,i/255)},vUt(t,s,i,e){return _.Vn(t/255,s/255,i/255,e/255)},GUt(){return this.df.LO()},CUt(){return this.df.RO()},IUt(){return this.df.oR().f9().ef()},_Ut(){return this.df.oR().Sgt()}}}{const Qa=self.Ps;Qa.aq.Nht=class extends Qa.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{const Va=self.Ps,Ja=self.Ys,Ya=[],Ha=(Va.aq.Nht.aIt=class extends Va.D2t{constructor(t){super(t),this.sIt=t.BIt()}cn(){Va.Wr(this.sIt),super.cn()}m2t(){for(const t of this.sIt)t.iCt(this.df)}_9(s){const i={pb:this.df.QO()};return Promise.all(this.sIt.map(t=>t.eCt(s,i)))}O9(){for(const t of this.sIt)t.hCt()}A9(){this.EUt()}EUt(){for(const t of this.aft.O3())t.wB().DUt()}aSt(t){Va.aq.Nht.vxt(this,t)}YSt(t){Ya.push({O2t:null,AUt:!1,instances:[]})}NUt(t,s,i){const e=Ya.at(-1);e.O2t=t,e.AUt=i,e.instances.push(s)}HSt(t){const s=Ya.pop(),i=s.O2t,e=s.AUt;if(i){const h=new Map;for(const n of s.instances)n.Z_t(h,i,e);for(const[r,o]of h)r.P3().Nft(o)}}LUt(t){const s=this.LF().VIt(t),i=this.Wk(),e=s.nCt(0);return e.hz().NW(i.PS(),{pb:i.QO()}).then(()=>this.EUt()),s}OUt(t){for(const s of this.aft.O3())s.wB().RUt(t);this.LF().JIt(t)}kUt(t,s){const i=this.aft.WIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.lCt(s);e<0&&(e+=i.qB()+1);const h=Va.$Gt.sCt(this.Wk()),n=(i.rCt(h,e),this.Wk());h.hz().NW(n.PS(),{pb:n.QO()}).then(()=>this.EUt());for(const r of this.aft.O3())r.wB().PUt();return h}FUt(t,s){const i=this.aft.WIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.qB())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.lCt(s);e<0&&(e+=i.qB()),i.oCt(e);for(const h of this.aft.O3())h.wB().PUt()}g2t(){return self.jUt}},new WeakMap);self.jUt=class extends self.x3{constructor(t){super(t),Ha.set(this,t.JSt())}BUt(t){Ja.Ge(t);const s=Ha.get(this).LF().WIt(t);return s?s.uCt():null}zUt(){return Ha.get(this).LF().UIt().map(t=>t.uCt())}UUt(t){return Ja.Ge(t),Ha.get(this).LUt(t).uCt()}WUt(t){Ja.Ge(t),Ha.get(this).OUt(t)}QUt(t,s){if(Ja.Ge(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ha.get(this).kUt(t,s).KB()}VUt(t,s){if(Ja.Ge(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ha.get(this).FUt(t,s)}}}{const E=self.Ps,qa=self.Ys,Za=E.un(E.Rect),Xa=E.un(E.iu),Ka=E.un(E.sl),D=(E.aq.Nht.Instance=class extends E.lvt{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[0],e=s[1],h=s[2],n=s[3]),this.JUt=this.aft.WIt(e)||this.aft.BIt()[0],this.YUt=E.yn(h,0,this.JUt.qB()-1),this.HUt=this.JUt.nCt(this.YUt);const r=this.HUt.hz(),o=(this.qUt=r.kx(),this.ZUt=r.A_(),this.XUt=r.Tvt(),this.dvt(),t.H_t(2,!0),t.H_t(1,0<=this.JUt.UB()),this.KUt=Math.abs(this.JUt.UB()),this.$Ut=this.JUt.JB(),this.t6t=E.un(E.I0),this.s6t=0,this.i6t=0,this.e6t="",this.h6t=-1,this.n6t="",this.r6t=0,this.xk());this.o6t=o.r5(),o.z4(i),o.b5(n),o.frt(this.HUt.oz()),o.prt(this.HUt.lz()),o.BAt(this.HUt.wz()),o.Zj(),1===this.aft.zIt()&&1===this.aft.BIt()[0].qB()||0===this.KUt||this.tvt()}cn(){this.JUt=null,this.HUt=null,this.qUt=null,this.t6t=null,super.cn()}yvt(){return this.HUt.hz()}git(){return!0}LV(){this.qUt=null}gvt(){this.DUt()}ib(t){const s=this.qUt;if(null!==s){t.RD(s);const i=this.xk();i.cB()?this.a6t(i,t):this.l6t(i,t)}}l6t(t,s){let i=this.o6t;this.df.JO()&&(i=t.LAt(i)),s.VD(i,this.XUt)}a6t(s,t){const i=s.XAt();if(s.$At()){s.DAt(Za,Xa,!1);let t=Xa;this.df.JO()&&(t=s.LAt(t)),i.sb(s.fB(),t,this.XUt),s.KAt(!1)}i.ib(t)}u6t(){return this.t6t.ei()}c6t(){return this.Gi.q_t(2)}f6t(t){this.Gi.H_t(2,t)}d6t(){return this.Gi.q_t(1)}p6t(t){this.Gi.H_t(1,t)}m6t(){return this.Gi.q_t(4)}g6t(t){this.Gi.H_t(4,t)}NX(){this.n6t&&this.y6t(),0<=this.h6t&&this.M6t();const t=this.KUt;if(this.c6t()&&0!==t){const s=this.df.xR(this.Gi),i=(this.t6t.yc(s),this.u6t()),e=this.HUt,h=e.nz()/t;if(!(i<this.s6t+h)){const n=this.JUt,r=this.$Ut,o=n.qB(),a=n.QB(),l=n.WB(),u=n.HB(),c=(this.d6t()?this.YUt++:this.YUt--,this.s6t+=h,this.YUt>=o&&(u?(this.p6t(!1),this.YUt=o-2):!l&&(this.i6t++,this.i6t>=a)?this.w6t(!1):this.YUt=r),this.YUt<0&&(u?(this.YUt=1,this.p6t(!0),l||(this.i6t++,this.i6t>=a&&this.w6t(!0))):!l&&(this.i6t++,this.i6t>=a)?this.w6t(!0):this.YUt=r),this.YUt=E.yn(this.YUt,0,o-1),n.nCt(this.YUt));i>this.s6t+c.nz()/t&&(this.s6t=i),this.S6t(e,c)}}else this.F2t()}w6t(t){this.YUt=t?0:this.JUt.qB()-1,this.f6t(!1),this.e6t=this.JUt.ef(),this.g6t(!0),this.L2t("animationend",!1,{animationName:this.e6t}),this.Sj(E.aq.Nht.rq.T6t),this.Sj(E.aq.Nht.rq.b6t),this.g6t(!1),this.i6t=0}S6t(i,e,t){if(i!==e){const s=this.xk(),h=i.hz(),n=e.hz(),r=h.pm(),o=h.Cm(),a=n.pm(),l=n.Cm(),u=(t&&t.onFrameChange?t.onFrameChange(s,r,o,a,l):(r!==a&&s.xm(s.pm()*(a/r)),o!==l&&s.gm(s.Cm()*(l/o))),s.frt(e.oz()),s.prt(e.lz()),s.BAt(e.wz()),s.Zj(),this.HUt=e,this.qUt=n.kx(),this.ZUt=n.A_(),this.XUt=n.Tvt(),this.Yz().Cht());for(let t=0,s=u.length;t<s;++t)u[t].oGt(i,e);this.L2t("framechange",!1,{animationName:this.JUt.ef(),x6t:this.YUt}),this.Sj(E.aq.Nht.rq.v6t),this.df.Dk()}}G6t(t){this.f6t(!0),this.s6t=this.u6t(),1===t&&0!==this.YUt&&(this.h6t=0,this.m6t()||this.M6t()),this.tvt()}C6t(t,s,i){this.n6t=t,this.r6t=s,this.tvt(),!i&&this.m6t()||this.y6t()}I6t(){return this.JUt}_6t(){return this.n6t||this.JUt.ef()}RUt(t){E.gh(t,this._6t())&&this.C6t(this.aft.YIt().ef(),1,!0)}E6t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.aft.WIt(this._6t());if(!s)return;if(-1===(t=s.aCt(t)))return}isFinite(t)&&(this.h6t=t,this.m6t()||this.M6t())}PUt(){if(!this.n6t&&-1===this.h6t){const t=this.HUt,s=this.JUt.nCt(E.yn(this.YUt,0,this.JUt.qB()-1));t!==s&&this.S6t(t,s),1<this.JUt.qB()&&0<this.KUt&&this.tvt()}}D6t(){return this.YUt}A6t(){return this.HUt.xz()}N6t(t){this.KUt=Math.abs(t),this.p6t(0<=t),0<this.KUt&&this.tvt()}L6t(){return this.d6t()?this.KUt:-this.KUt}O6t(t){"string"==typeof t&&-1===(t=this.JUt.aCt(t))||(t=E.yn(Math.floor(t),0,this.JUt.qB()-1),this.$Ut=t)}R6t(){return this.$Ut}y6t(t){const s=this.HUt,i=this.aft.WIt(this.n6t);if(this.n6t="",i&&(i!==this.JUt||!this.c6t())){this.JUt=i,this.p6t(0<=i.UB()),this.KUt=Math.abs(i.UB()),this.$Ut=i.JB(),this.YUt=E.yn(this.YUt,0,this.JUt.qB()-1),1===this.r6t&&(this.YUt=0),this.f6t(!0),this.s6t=this.u6t();const e=this.JUt.nCt(this.YUt);this.S6t(s,e,t)}}M6t(t){const s=this.HUt,i=this.YUt;if(this.YUt=E.yn(Math.floor(this.h6t),0,this.JUt.qB()-1),this.h6t=-1,t||i!==this.YUt){const e=this.JUt.nCt(this.YUt);this.S6t(s,e),this.s6t=this.u6t()}}DUt(){const t=this.HUt.hz();this.qUt=t.kx(),this.ZUt=t.A_(),this.XUt=t.Tvt(),this.xk().KAt(!0)}kx(){return this.qUt}A_(){return this.ZUt}Tvt(){return this.XUt}fz(){return this.HUt.fz()}aTt(t){let s=this.HUt,i=this.xk(),e=null;if("string"==typeof t)e=s.yz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.gz(t-1)}let h=i.i5();if(!e)return[i.pT(),i.yT(),h];if(Ka.I(e.TCt()),i.cB()){const[n,r,o]=i.fB().ab(Ka.rl(),Ka.al());Ka.set(n,r),h+=o}return Ka.offset(-s.oz(),-s.lz()),Ka.scale(i.pm(),i.Cm()),Ka.rotate(i.e4()),Ka.offset(i.pT(),i.yT()),[Ka.rl(),Ka.al(),h]}k6t(){return this.xk().VAt().Uu()}P6t(t){t=Math.floor(t);const s=this.xk(),i=s.VAt(),e=i.Uu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.zu();return[h[2*t+0]+s.pT(),h[2*t+1]+s.yT()]}hvt(){const s=E.aq.Nht.qht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.JUt.ef(),F6t:t=>this.rvt(s.j6t,t,0)},{name:t+".current-frame",value:this.YUt,F6t:t=>this.rvt(s.B6t,t)},{name:t+".is-playing",value:this.c6t(),F6t:t=>t?this.rvt(s.z6t,0):this.rvt(s.U6t)},{name:t+".speed",value:this.KUt,F6t:t=>this.rvt(s.W6t,t)},{name:t+".repeats",value:this.i6t,F6t:t=>this.i6t=t}]}]}IT(){const t={a:this.JUt.$J()},s=(0!==this.s6t&&(t.fs=this.s6t),this.u6t()),i=(0!==s&&(t.at=s),0!==this.YUt&&(t.f=this.YUt),0!==this.KUt&&(t.cas=this.KUt),1!==this.i6t&&(t.ar=this.i6t),0!==this.$Ut&&(t.rt=this.$Ut),this.c6t()||(t.ap=this.c6t()),this.d6t()||(t.af=this.d6t()),this.xk());return i.T5()&&(t.ce=i.T5()),t}_T(t){const s=this.LF().QIt(t.a),i=(s&&(this.JUt=s),this.s6t=t.hasOwnProperty("fs")?t.fs:0,this.t6t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.YUt=E.yn(i,0,this.JUt.qB()-1),this.KUt=t.hasOwnProperty("cas")?t.cas:0,this.i6t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.$Ut=E.yn(e,0,this.JUt.qB()-1),this.f6t(!t.hasOwnProperty("ap")||!!t.ap),this.p6t(!t.hasOwnProperty("af")||!!t.af),this.JUt.nCt(this.YUt)),n=(this.HUt=h,this.DUt(),this.xk());n.frt(h.oz()),n.prt(h.lz()),n.BAt(h.wz()),n.b5(!!t.ce),this.c6t()&&this.tvt()}Lnt(t){const s=this.xk();switch(t){case 3:return s.T5();case 2:return E.yn(this.YUt,0,this.JUt.qB()-1);case 1:return this.JUt.ef()}}jnt(t,s,i){const e=this.xk();switch(t){case 3:e.b5(!!s);break;case 2:{this.f6t(!1);const h=this.JUt.qB()-1,n=s=E.yn(s,0,h),r=this.JUt.nCt(this.YUt),o=this.JUt.nCt(n);this.S6t(r,o,i),this.YUt=E.yn(n,0,h);break}case 1:{this.n6t=s,this.y6t(i);const a=this.JUt.qB();1<a&&0<this.JUt.UB()?this.tvt():this.F2t();break}}}g2t(){return self.Q6t}},new WeakMap),$a=new Map([["current-frame",0],["beginning",1]]);self.Q6t=class extends self.pB{constructor(){super(),D.set(this,self.AF.kF().wB())}cz(){return D.get(this).fz()}dz(t){return this.pz(t)[0]}mz(t){return this.pz(t)[1]}V6t(t){return this.pz(t)[2]}pz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return D.get(this).aTt(t)}Mz(){return D.get(this).k6t()}Sz(t){return qa.Se(t),D.get(this).P6t(t)[0]}bz(t){return qa.Se(t),D.get(this).P6t(t)[1]}Tz(t){return qa.Se(t),D.get(this).P6t(t)}J6t(){D.get(this).f6t(!1)}Y6t(t="current-frame"){qa.Ge(t);const s=$a.get(t);if(void 0===s)throw new Error("invalid mode");D.get(this).G6t(s)}H6t(t,s="beginning"){qa.Ge(t),qa.Ge(s);const i=$a.get(s);if(void 0===i)throw new Error("invalid mode");const e=D.get(this);if(!e.LF().WIt(t))throw new Error(`animation name "${t}" does not exist`);e.C6t(t,i)}BUt(t){qa.Ge(t);const s=D.get(this).LF().WIt(t);return s?s.uCt():null}get animation(){return D.get(this).I6t().uCt()}get animationName(){return D.get(this)._6t()}set x6t(t){qa.Se(t),D.get(this).E6t(t)}get x6t(){return D.get(this).D6t()}set q6t(t){qa.Ge(t),D.get(this).E6t(t)}get q6t(){return D.get(this).A6t()}set Z6t(t){qa.Se(t),D.get(this).N6t(t)}get Z6t(){return D.get(this).L6t()}set X6t(t){qa.Se(t),D.get(this).O6t(t)}get X6t(){return D.get(this).R6t()}get imageWidth(){return D.get(this).yvt().pm()}get imageHeight(){return D.get(this).yvt().Cm()}K6t(){const t=D.get(this).yvt();return[t.pm(),t.Cm()]}async $6t(t){qa.ih(t,Blob);const s=D.get(this),i=s.Wk(),e=s.yvt(),h=E.un(E.GGt);if(h.jGt(i,t),await h.NW(i.PS(),{pb:i.QO()}),s.dn())h.cn();else{e.BGt(h);const n=s.JSt();n.EUt(),n.LF().Jf().dispatchEvent(new E.Event("animationframeimagechange")),i.Dk()}}tWt(t,s){qa.Ge(s),D.get(this).xk()._At(!!t,s)}}}{const tl=self.Ps;tl.aq.Nht.rq={sWt(t){return tl.gh(this._6t(),t)},iWt(t,s){return tl.compare(this.YUt,t,s)},eWt(t,s){if("string"!=typeof s)return!1;const i=this.HUt.xz();return tl.compare(i.toLowerCase(),t,s.toLowerCase())},hWt(t,s){return tl.compare(this.L6t(),t,s)},b6t(t){return tl.gh(this.e6t,t)},T6t(){return!0},v6t(){return!0},nWt(){return this.xk().pm()<0},rWt(){return this.xk().Cm()<0},oWt(){return!0},aWt(){return!0},T5(){return this.xk().T5()}}}{const sl=self.Ps;sl.aq.Nht.qht={lWt(t,s,i,e,h){if(t&&s){const[n,r]=this.aTt(i),o=this.df.z3(t,s,n,r,e,h);if(o){if(e&&s.U3(o),t.G3().e3()){const l=o.xk();l.i4(this.xk().e4()),l.Zj()}const a=this.df.sR();a.W3(!0),o.Q3(),a.W3(!1),t!==this.df.Ddt().LF()&&this.P2t.NUt(t,o,e)}}},U6t(){this.f6t(!1)},z6t(t){this.G6t(t)},j6t(t,s){this.C6t(t,s)},B6t(t){this.E6t(t)},W6t(t){this.N6t(t)},uWt(t){this.O6t(t)},cWt(s,t){try{0===s?this.JSt().LUt(t):this.JSt().OUt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},fWt(s,t,i){try{0===s?this.JSt().kUt(t,i):this.JSt().FUt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},dWt(t){const s=this.xk(),i=s.pm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.xm(e),s.Zj())},pWt(t){const s=this.xk(),i=s.Cm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.gm(e),s.Zj())},t4(t){const s=this.HUt,i=s.hz(),e=this.xk(),h=e.pm()<0?-1:1,n=e.Cm()<0?-1:1,r=i.pm()*t*h,o=i.Cm()*t*n;e.pm()===r&&e.Cm()===o||(e.t_(r,o),e.Zj())},async mWt(t,s,i){const e=this.HUt,h=e.hz(),n=this.xk(),r=this.df,o=this.P2t;if(h.$Q()===t)0===s&&(n.t_(h.pm(),h.Cm()),n.Zj()),this.Sj(sl.aq.Nht.rq.oWt);else{const a=sl.un(sl.GGt);try{if(await a.FGt(r,t),!a.IV())throw new Error("image failed to load");if(this.dn())return void a.cn();await a.NW(r.PS(),{pb:r.QO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.dn()||this.Sj(sl.aq.Nht.rq.aWt))}this.dn()?a.cn():(h.BGt(a),o.EUt(),o.LF().Jf().dispatchEvent(new sl.Event("animationframeimagechange")),r.Dk(),0===s&&(n.t_(h.pm(),h.Cm()),n.Zj()),await this.bj(sl.aq.Nht.rq.oWt))}},gWt(t){this.xk().b5(t)},_At(t,s){this.xk()._At(0===t,s)},yWt(t){this.xk().eT(t),this.df.Dk()}}}{const il=self.Ps;il.aq.Nht.Zht={MWt(){return this.D6t()},wWt(){return this.A6t()},SWt(){return this.JUt.qB()},TWt(){return this.JUt.ef()},bWt(){return this.L6t()},xWt(){return this.JUt.UB()},vWt(t){return this.aTt(t)[0]},GWt(t){return this.aTt(t)[1]},CWt(t){return this.aTt(t)[2]},IWt(){return this.fz()},_Wt(){return this.yvt().pm()},EWt(){return this.yvt().Cm()},DWt(t){return this.P6t(t)[0]},AWt(t){return this.P6t(t)[1]},NWt(){return this.k6t()}}}{const el=self.Ps;el.aq.LWt=class extends el.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{let h=function(){return s.b3().wB()};h;const hl=self.Ps,nl=self.Ys;hl.aq.LWt.aIt=class extends hl.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}g2t(){return self.OWt}};let s=null;self.OWt=class extends self.x3{constructor(t){super(t),(s=t).Wk().ck().fk=this}RWt(t){return h().kWt(t)[0]}PWt(t){return h().kWt(t)[1]}FWt(t){return h().kWt(t)}jWt(t){return h().BWt(t)}zWt(t){nl.Ge(t),h().UWt(t)}WWt(t){const s=h(),i=s.Wk(),e=i.wP(t);s.QWt(e)}}}{let r=self.Ps,o=null;r.aq.LWt.Instance=class extends r.R2t{constructor(t,s){super(t,"mouse"),this.VWt=[!1,!1,!1,!1,!1],this.JWt=0,this.YWt=0,this.HWt=0,this.qWt=0,this.ZWt=0,this.XWt=0,this.KWt=0,this.$Wt=0,this.tQt=!1,this.sQt=0,this.iQt=0,this.J2t([["pointer-lock-change",t=>this.eQt(t)],["pointer-lock-error",t=>this.hQt(t)]]);const i=this.Wk().Jf();this.v0=new r.T0(r.m0.S0(i,"pointermove",t=>this.nQt(t.data)),r.m0.S0(i,"pointerdown",t=>this.rQt(t.data)),r.m0.S0(i,"pointerup",t=>this.oQt(t.data)),r.m0.S0(i,"dblclick",t=>this.aQt(t.data)),r.m0.S0(i,"wheel",t=>this.lQt(t.data)),r.m0.S0(i,"window-blur",()=>this.r4t()))}cn(){super.cn()}rQt(t){"mouse"===t.pointerType&&(this.JWt=t.pageX-this.df.TF(),this.YWt=t.pageY-this.df.bF(),this.uQt(t.lastButtons,t.buttons))}nQt(t){this.sQt=t.movementX,this.iQt=t.movementY,this.Sj(r.aq.LWt.rq.cQt),this.sQt=0,this.iQt=0,"mouse"===t.pointerType&&(this.JWt=t.pageX-this.df.TF(),this.YWt=t.pageY-this.df.bF(),this.uQt(t.lastButtons,t.buttons))}oQt(t){"mouse"===t.pointerType&&this.uQt(t.lastButtons,t.buttons)}uQt(t,s){this.fQt(t,s,1,0),this.fQt(t,s,4,1),this.fQt(t,s,2,2),this.fQt(t,s,8,3),this.fQt(t,s,16,4)}fQt(t,s,i,e){!(t&i)&&s&i?this.dQt(e):t&i&&!(s&i)&&this.pQt(e)}dQt(t){this.VWt[t]=!0,this.Sj(r.aq.LWt.rq.mQt),this.HWt=t,this.qWt=0,this.Sj(r.aq.LWt.rq.gQt),this.Sj(r.aq.LWt.rq.yQt)}pQt(t){this.VWt[t]&&(this.VWt[t]=!1,this.HWt=t,this.Sj(r.aq.LWt.rq.MQt))}aQt(t){this.HWt=t.button,this.qWt=1,this.Sj(r.aq.LWt.rq.gQt),this.Sj(r.aq.LWt.rq.yQt)}lQt(t){this.ZWt=t.deltaY<0?1:0,this.XWt=t.deltaX,this.KWt=t.deltaY,this.$Wt=t.deltaZ,this.Sj(r.aq.LWt.rq.wQt)}r4t(){for(let t=0,s=this.VWt.length;t<s;++t){if(!this.VWt[t])return;this.VWt[t]=!1,this.HWt=t,this.Sj(r.aq.LWt.rq.MQt)}}kWt(t){const s=this.df.$R(),i=this.JWt,e=this.YWt;if(void 0===t){const h=s.Ck(0);return h.c7(i,e)}{const n=s.vk(t);return n?n.SF(i,e):[0,0]}}BWt(t){return t=Math.floor(t),!!this.VWt[t]}SQt(){return 0<=this.JWt&&0<=this.YWt&&this.JWt<this.df.W4t()&&this.YWt<this.df.Q4t()}UWt(t){o!==t&&(o=t,this.Y2t("cursor",t))}async QWt(t){if(!r.li.Si&&t){const s=t.jTt();if(s){const i=s.xk(),e=s.yvt();if(i&&e&&o!==e){const h=await(o=e).YGt(),n=`url(${h}) ${Math.round(i.oz()*e.pm())} ${Math.round(i.lz()*e.Cm())}, auto`;this.Y2t("cursor",n)}}}}eQt(t){this.TQt(t["has-pointer-lock"])}hQt(t){this.TQt(t["has-pointer-lock"]),this.Sj(r.aq.LWt.rq.bQt)}TQt(t){this.tQt!==t&&(this.tQt=t,this.tQt?this.Sj(r.aq.LWt.rq.xQt):this.Sj(r.aq.LWt.rq.vQt))}hvt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.JWt+","+this.YWt},{name:t+".debugger.left-button",value:this.VWt[0]},{name:t+".debugger.middle-button",value:this.VWt[1]},{name:t+".debugger.right-button",value:this.VWt[2]},{name:t+".debugger.button-4",value:this.VWt[3]},{name:t+".debugger.button-5",value:this.VWt[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.df.$R().f4().map(t=>({name:"$"+t.ef(),value:t.SF(this.JWt,this.YWt).join(", ")}))}]}}}{const rl=self.Ps;rl.aq.LWt.rq={gQt(t,s){return this.HWt===t&&this.qWt===s},mQt(){return!0},GQt(t){return this.VWt[t]},MQt(t){return this.HWt===t},CQt(t){const s=this.df._dt(),i=s.Xwt(),e=[];return this.SQt()&&e.push([this.JWt,this.YWt]),rl.xor(this.df.EO().sLt(t,e,i),i)},yQt(t,s,i){if(t!==this.HWt||s!==this.qWt)return!1;if(!this.SQt())return!1;const e=this.JWt,h=this.YWt;return this.df.EO().sLt(i,[[e,h]],!1)},wQt(t){return 2===t||this.ZWt===t},xQt(){return!0},vQt(){return!0},bQt(){return!0},IQt(){return this.tQt},cQt(){return!0}}}{const ol=self.Ps,al=["auto","pointer","text","crosshair","move","help","wait","none"],ll=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];ol.aq.LWt.qht={_Qt(t){this.UWt(al[t])},EQt(t){this.UWt(ll[t])},DQt(t){this.QWt(t)},AQt(t){this.q2t("request-pointer-lock",{unadjustedMovement:t})},NQt(){this.Y2t("release-pointer-lock")}}}{const ul=self.Ps;ul.aq.LWt.Zht={ixt(t){return this.kWt(t)[0]},hxt(t){return this.kWt(t)[1]},LQt(){return this.JWt},OQt(){return this.YWt},RQt(){return this.sQt},kQt(){return this.iQt},PQt(){return this.XWt},FQt(){return this.KWt},jQt(){return this.$Wt}}}{const cl=self.Ps;cl.aq.gamepad=class extends cl.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{const fl=self.Ps;fl.aq.gamepad.aIt=class extends fl.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const dl=self.Ps;class pl{constructor(t,s,i){this.Kg=t,this.mf=s,this.BQt=new Set(i),this.zQt=new ml,this.UQt=new ml,this.WQt=[],this.QQt=[]}VQt(){return this.mf}e8(t,s){const i=this.UQt;this.UQt=this.zQt,this.zQt=i,this.zQt.e8(t,s),dl.Jr(this.WQt,this.zQt.JQt(),!1),dl.Jr(this.QQt,this.zQt.JQt(),!1);for(let t=0,s=this.zQt.JQt();t<s;++t){const e=this.UQt.YQt(t),h=this.zQt.YQt(t);.5<=h&&e<.5&&(this.WQt[t]=!0),h<.5&&.5<=e&&(this.QQt[t]=!0)}}JQt(){return this.zQt.JQt()}HQt(){return this.zQt.HQt()}qQt(t){return!((t=Math.floor(t))<0||t>=this.WQt.length)&&this.WQt[t]}ZQt(t){return!((t=Math.floor(t))<0||t>=this.QQt.length)&&this.QQt[t]}XQt(){this.WQt.fill(!1),this.QQt.fill(!1)}YQt(t){return this.zQt.YQt(t)}GQt(t){return.5<=this.zQt.YQt(t)}KQt(t){return this.zQt.KQt(t)}bO(){return this.Kg}$Qt(){return this.BQt}}class ml{constructor(){this.tVt=[],this.sVt=[]}e8(s,t){let i=this.tVt,e=0;for(let t=s.length;e<t;++e){const h=s[e];e===i.length?i.push(h.value):i[e]=h.value}e<i.length&&dl.Ur(i,e),dl.Yr(this.sVt,t)}JQt(){return this.tVt.length}HQt(){return this.sVt.length}YQt(t){return(t=Math.floor(t))<0||t>=this.tVt.length?0:this.tVt[t]}KQt(t){return(t=Math.floor(t))<0||t>=this.sVt.length?0:this.sVt[t]}}dl.aq.gamepad.Instance=class extends dl.R2t{constructor(t,s){super(t,"gamepad"),this.iVt=25,this.eVt=0,this.hVt=-1,this.nVt=new Map,s&&(this.iVt=s[0]),this.V2t("gamepad-connected",t=>this.rVt(t)),this.V2t("gamepad-disconnected",t=>this.oVt(t)),this.V2t("input-update",t=>this.aVt(t));const i=this.Wk().Jf();this.v0=new dl.T0(dl.m0.S0(i,"tick2",()=>this.GZ()),dl.m0.S0(i,"suspend",()=>this.lVt()),dl.m0.S0(i,"resume",()=>this.uVt())),this.Y2t("ready")}cn(){super.cn()}rVt(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.nVt.has(s)||(this.nVt.set(s,new pl(s,i,e)),this.hVt=s,this.Sj(dl.aq.gamepad.rq.cVt),this.hVt=-1)}oVt(t){const s=t.index;this.hVt=s,this.Sj(dl.aq.gamepad.rq.fVt),this.hVt=-1,this.nVt.delete(s)}aVt(t){for(const s of t)this.dVt(s)}dVt(t){const s=t.index,i=(this.nVt.has(s)||this.rVt(t),this.nVt.get(s));i.e8(t.buttons,t.axes);for(let t=0,s=i.JQt();t<s;++t)i.qQt(t)&&(this.eVt=t)}pVt(t){return this.nVt.get(Math.floor(t))||null}mVt(t){if(-1===t)return[...this.nVt.values()];{const s=this.nVt.get(Math.floor(t));return s?[s]:[]}}GZ(){for(const t of this.nVt.values())t.XQt()}lVt(){this.Y2t("suspend")}uVt(){this.Y2t("resume")}hvt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.eVt},{name:t+".properties.analog-deadzone.name",value:this.iVt}]}]}}}{const gl=self.Ps;gl.aq.gamepad.rq={cVt(){return!0},fVt(){return!0},GQt(t,s){const i=this.pVt(t);if(!i)return!1;const e=i.GQt(s);return e&&(this.eVt=s),e},gVt(t,s){const i=this.pVt(t);if(!i)return!1;const e=i.qQt(s);return e&&(this.eVt=s),e},yVt(t,s){const i=this.pVt(t);if(!i)return!1;const e=i.ZQt(s);return e&&(this.eVt=s),e},MVt(){return 0<this.nVt.size},wVt(t,s,i,e){s=Math.floor(s);const h=this.pVt(t);if(!h)return!1;let n=h.KQt(s),r;return r=s%2==0?h.KQt(s+1):h.KQt(s-1),n*=100,r*=100,Math.hypot(n,r)<=this.iVt&&(n=0),gl.compare(n,i,e)},SVt(t){const s=this.mVt(t);if(0!==s.length){const i=this.df,e=i.sR(),h=i.oR(),n=h.j6(),r=i.pR(),o=r.B6(),a=r.z6(h);i.Q6(!1);for(const l of s)for(let t=0,s=l.JQt();t<s;++t)l.qQt(t)&&(this.hVt=l.bO(),this.eVt=t,e.J6(n),h.Y6(o,a),e.H6(n),this.hVt=-1);i.Q6(!0),r.K6()}return!1},TVt(t){const s=this.mVt(t);if(0!==s.length){const i=this.df,e=i.sR(),h=i.oR(),n=h.j6(),r=i.pR(),o=r.B6(),a=r.z6(h);i.Q6(!1);for(const l of s)for(let t=0,s=l.JQt();t<s;++t)l.ZQt(t)&&(this.hVt=l.bO(),this.eVt=t,e.J6(n),h.Y6(o,a),e.H6(n),this.hVt=-1);i.Q6(!0),r.K6()}return!1},bVt(t,s){s=Math.floor(s);const i=this.pVt(t);if(!i)return!1;const e=i.GQt(s);return e&&(this.eVt=s),e},xVt(t,s){s=Math.floor(s);const i=this.pVt(t);if(!i)return!1;const e=i.qQt(s);return e&&(this.eVt=s),e},vVt(t,s){s=Math.floor(s);const i=this.pVt(t);if(!i)return!1;const e=i.ZQt(s);return e&&(this.eVt=s),e},GVt(t,s){const i=this.pVt(t);if(!i)return!1;const e=i.$Qt();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},CVt(){return!0}}}{const yl=self.Ps;yl.aq.gamepad.qht={IVt(t,s,i,e){this.Y2t("vibrate-dual-rumble",{index:t,duration:s,weakMag:yl.yn(i/100,0,1),strongMag:yl.yn(e/100,0,1)})},_Vt(t,s,i,e,h,n){this.Y2t("vibrate-trigger-rumble",{index:t,duration:s,weakMag:yl.yn(i/100,0,1),strongMag:yl.yn(e/100,0,1),leftMag:yl.yn(h/100,0,1),rightMag:yl.yn(n/100,0,1)})},EVt(t){this.Y2t("reset-vibrate",{index:t})}}}{const Ml=self.Ps;Ml.aq.gamepad.Zht={DVt(){return this.nVt.size},AVt(t){const s=this.pVt(t);return s?s.VQt():""},NVt(){return this.hVt},LVt(t){const i=this.pVt(t);if(!i)return"";let e="";for(let t=0,s=i.HQt();t<s;++t)e+=`Axis ${t}: ${Math.round(100*i.KQt(t))}
`;return e},OVt(t){const i=this.pVt(t);if(!i)return"";let e="";for(let t=0,s=i.JQt();t<s;++t)e+=`Button ${t}: ${Math.round(100*i.YQt(t))}
`;return e},RVt(t,s){const i=this.pVt(t);return i?i.YQt(Math.floor(s)):0},kVt(t,s){const i=this.pVt(t);return i?i.KQt(Math.floor(s)):0},PVt(t){const s=this.pVt(t);return s?s.JQt():0},FVt(t){const s=this.pVt(t);return s?s.HQt():0},jVt(t,s){const i=this.pVt(t);return i?100*i.YQt(Math.floor(s)):0},BVt(t,s){s=Math.floor(s);const i=this.pVt(t);if(!i)return 0;let e=i.KQt(s),h;return h=s%2==0?i.KQt(s+1):i.KQt(s-1),e*=100,h*=100,Math.hypot(e,h)<=this.iVt?0:e},zVt(){return this.eVt},UVt(){return this.eVt}}}{const wl=self.Ps;wl.aq.Keyboard=class extends wl.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{let i=function(){return s.b3().wB()};i;const Sl=self.Ps;Sl.aq.Keyboard.aIt=class extends Sl.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}g2t(){return self.WVt}};let s=null;self.WVt=class extends self.x3{constructor(t){super(t),(s=t).Wk().ck().keyboard=this}QVt(t){const s=i();if("string"==typeof t)return s.VVt(t);if("number"==typeof t)return s.JVt(t);throw new TypeError("expected string or number")}}}{const Tl=self.Ps;Tl.aq.Keyboard.Instance=class extends Tl.R2t{constructor(t,s){super(t,"keyboard"),this.YVt=new Set,this.HVt=new Set,this.qVt=0,this.ZVt="",this.XVt="",this.KVt=!1;const i=this.Wk().Jf();this.v0=new Tl.T0(Tl.m0.S0(i,"keydown",t=>this.$Vt(t.data)),Tl.m0.S0(i,"keyup",t=>this.t8t(t.data)),Tl.m0.S0(i,"window-blur",()=>this.s8t()),Tl.m0.S0(i,"keyboard-blur",()=>this.s8t())),this.df.kk(this.dT())}cn(){super.cn()}async dT(){const t=await this.H2t("init");this.KVt=t.isKeyboardLockSupported}$Vt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.YVt.has(i)||(this.YVt.add(i),this.HVt.add(s),this.ZVt=i,this.qVt=s,this.XVt=e,this.Sj(Tl.aq.Keyboard.rq.i8t),this.Sj(Tl.aq.Keyboard.rq.e8t),this.Sj(Tl.aq.Keyboard.rq.h8t),this.Sj(Tl.aq.Keyboard.rq.n8t))}t8t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.YVt.delete(i),this.HVt.delete(s),this.ZVt=i,this.qVt=s,this.XVt=e,this.Sj(Tl.aq.Keyboard.rq.r8t),this.Sj(Tl.aq.Keyboard.rq.o8t),this.Sj(Tl.aq.Keyboard.rq.a8t),this.Sj(Tl.aq.Keyboard.rq.l8t)}s8t(){for(const t of this.HVt)this.HVt.delete(t),this.qVt=t,this.Sj(Tl.aq.Keyboard.rq.r8t),this.Sj(Tl.aq.Keyboard.rq.o8t),this.Sj(Tl.aq.Keyboard.rq.l8t);this.YVt.clear()}VVt(t){return this.YVt.has(t)}JVt(t){return this.HVt.has(t)}IT(){return{tk:this.qVt,tkk:this.XVt}}_T(t){this.qVt=t.tk,t.hasOwnProperty("tkk")&&(this.XVt=t.tkk)}hvt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.qVt},{name:t+".debugger.last-key-string",value:Tl.aq.Keyboard.Zht.u8t(this.qVt)},{name:t+".debugger.last-typed-key",value:this.XVt}]}]}}}{const bl=self.Ps,xl=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];bl.aq.Keyboard.rq={VVt(t){return this.HVt.has(t)},e8t(t){return this.qVt===t},i8t(){return!0},r8t(){return!0},o8t(t){return this.qVt===t},JVt(t){return t=Math.floor(t),this.HVt.has(t)},n8t(t){return this.qVt===t},l8t(t){return this.qVt===t},h8t(t){const s=xl[t];return this.ZVt===s},a8t(t){const s=xl[t];return this.ZVt===s},c8t(t){const s=xl[t];return this.YVt.has(s)},f8t(){return this.KVt},d8t(){return!0},p8t(){return!0}}}{const vl=self.Ps;vl.aq.Keyboard.qht={async m8t(s){if(this.KVt){let t=[];s&&(t=s.split(","));const i=await this.H2t("lock-keyboard",{keysArr:t});i.isOk?this.Sj(vl.aq.Keyboard.rq.d8t):this.Sj(vl.aq.Keyboard.rq.p8t)}},g8t(){this.KVt&&this.H2t("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Gl=self.Ps;Gl.aq.Keyboard.Zht={y8t(){return this.qVt},u8t(t){return s(t)},M8t(){return this.XVt}}}{const Cl=self.Ps,Il=[];Cl.aq.Audio=class extends Cl.Jxt{constructor(t){super(t)}w8t(t){Il.push(t)}static async S8t(){await Promise.all(Il),Cl.Wr(Il)}cn(){super.cn()}}}{let s=function(){return i.b3().wB()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const _l=self.Ps,El=self.Ys;_l.aq.Audio.aIt=class extends _l.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}g2t(){return self.T8t}};let i=null;self.T8t=class extends self.x3{constructor(t){super(t),i=t}get b8t(){return t().GetAudioContextExtern()}get x8t(){return t().GetDestinationNodeExtern()}get isSilent(){return s().v8t()}set isSilent(t){s().G8t(t)}get masterVolume(){return s().C8t()}set masterVolume(t){El.Se(t),s().I8t(t)}_8t(){s().E8t()}}}{const Dl=self.Ps,Al=["interactive","balanced","playback"];Dl.aq.Audio.Instance=class extends Dl.R2t{constructor(t,s){super(t,"audio"),this.D8t=0,this.A8t=[],this.N8t=!0,this.L8t=0,this.O8t=0,this.R8t=!1,this.k8t=1,this.P8t=1,this.F8t=[this.df.xY()/2,this.df.vY()/2,600],this.j8t=[0,0,-1],this.B8t=[0,1,0],this.z8t=600,this.U8t=1e4,this.W8t=1,this.Q8t=null,this.V8t=-1,this.J8t=1,this.Y8t=!1,this.H8t=0,this.q8t="suspended",this.Z8t=0,this.X8t=new Map,this.K8t=0,this.$8t=0,this.tJt=new Map,this.sJt=new Map;let i="interactive";s&&(this.L8t=s[0],this.O8t=s[1],this.R8t=s[2],i=Al[s[3]],this.N8t=s[4],this.k8t=s[5],this.P8t=s[6],this.F8t[2]=s[7],this.z8t=s[8],this.U8t=s[9],this.W8t=s[10]),this.iJt=[],this.eJt=[],this.hJt=[],this.J2t([["state",t=>this.nJt(t)],["audiocontext-state",t=>this.rJt(t)],["fxstate",t=>this.oJt(t)],["trigger",t=>this.aJt(t)],["buffer-metadata",t=>this.lJt(t)]]);const e=this.Wk().Jf(),h=(this.v0=new Dl.T0(Dl.m0.S0(e,"instancedestroy",t=>this.uJt(t.DB)),Dl.m0.S0(e,"afterload",()=>this.RZ()),Dl.m0.S0(e,"suspend",()=>this.lVt()),Dl.m0.S0(e,"resume",()=>this.uVt())),this.df.IP()),n="Safari"===Dl.li.di,r=this.df.DFt()||"macos-wkwebview"===h,o=this.df.CO().zQ(),a="playable-ad-single-file"===this.df.IP(),l=n||r||o||a;this.df.kk(this.H2t("create-audio-context",{preloadList:this.df.CO().MV().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.L8t,latencyHint:i,panningModel:this.k8t,distanceModel:this.P8t,refDistance:this.z8t,maxDistance:this.U8t,rolloffFactor:this.W8t,listenerPos:this.F8t,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.H8t=t.sampleRate,this.q8t=t.audioContextState,this.Z8t=t.outputLatency})),this.tvt()}cn(){this.Q8t=null,super.cn()}cJt(t){return this.N8t?t.split(" ").filter(t=>!!t):t?[t]:[]}fJt(s,t){for(const i of t){let t=!1;for(const e of s)if(Dl.gh(e,i)){t=!0;break}if(!t)return!1}return!0}dJt(t,s){return this.fJt(t,this.cJt(s))}w8t(t){this.G3().w8t(t)}uJt(t){this.Q8t===t&&(this.Q8t=null)}pJt(t){return Math.pow(10,t/20)}mJt(t){const s=this.pJt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}gJt(t){return Math.log(t)/Math.log(10)*20}yJt(t){return this.gJt(Math.max(Math.min(t,1),0))}lVt(){this.R8t||this.Y2t("set-suspended",{isSuspended:!0})}uVt(){this.R8t||this.Y2t("set-suspended",{isSuspended:!1})}nJt(t){const s=t.tickCount,i=(this.Z8t=t.outputLatency,this.iJt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.iJt=t.audioInstances,this.hJt=t.analysers,0<i.length&&Dl.Zh(this.iJt,i)}lJt(t){this.tJt.set(t.originalUrl,{duration:t.duration})}rJt(t){this.q8t=t.audioContextState}nnt(){return this.df.CRt()?"running":this.q8t}oJt(t){this.eJt=t.fxstate}MJt(t){const s=this.cJt(t);for(const i of this.iJt)if(this.fJt(i.tags,s))return i;return null}wJt(t){const s=this.cJt(t);return this.iJt.some(t=>this.fJt(t.tags,s)&&t.isPlaying)}SJt(t,s,i,e,h){if(this.wJt(s))return null;const n=this.tJt.get(t),r={tags:this.cJt(s),duration:n?n.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.iJt.push(r),r}TJt(t){const s=this.cJt(t);for(const i of this.iJt)this.fJt(i.tags,s)&&(i.isPlaying=!1)}async aJt(t){const s=t.type,i=(this.A8t=t.tags,t.aiid);if("ended"===s){for(const e of this.iJt)if(e.aiid===i){e.isPlaying=!1;break}await this.bj(Dl.aq.Audio.rq.bJt)}else"fade-ended"===s&&await this.bj(Dl.aq.Audio.rq.xJt)}vJt(t){return this.dJt(this.A8t,t)}NX(){const t={timeScale:this.df.ER(),gameTime:this.df.xFt(),instPans:this.GJt(),tickCount:this.df.vFt()};if(this.Q8t){const s=this.Q8t.xk();this.F8t[0]=s.pT(),this.F8t[1]=s.yT(),t.listenerPos=this.F8t,t.listenerOrientation=[...this.j8t,...this.B8t]}this.Y2t("tick",t)}CJt(t,s,i,e,h){if(0!==i){const n=Math.sin(i),r=Math.cos(i),o=(t-=e)*n,a=(s-=h)*n,l=t*r,u=s*r;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}GJt(){return this.iJt.filter(t=>-1!==t.uid).map(t=>this.df.Mk(t.uid)).filter(t=>t).map(t=>{const s=t.xk(),i=s.vk().e4(),[e,h]=this.CJt(s.pT(),s.yT(),-i,this.F8t[0],this.F8t[1]);return{uid:t.YF(),x:e,y:h,z:s.i5(),angle:s.e4()-i}})}IJt(t,s){for(const i of this.hJt)if(i.index===s&&Dl.gh(i.tag,t))return i;return null}_Jt(t){for(const s of this.cJt(t)){const i=s.toLowerCase();this.X8t.set(i,(this.X8t.get(i)||0)+1)}}v8t(){return this.Y8t}G8t(t){this.Y8t!==(t=!!t)&&(this.Y8t=t,this.Y2t("set-silent",{isSilent:t}))}C8t(){return this.J8t}I8t(t){this.J8t!==t&&(this.J8t=t,this.Y2t("set-master-volume",{vol:t}))}E8t(){this.Y2t("stop-all");for(const t of this.iJt)t.isPlaying=!1}EJt(t){return!t.hasOwnProperty("placeholder")&&3!==this.O8t&&!(t.isMusic&&1===this.O8t||!t.isMusic&&2===this.O8t)}IT(){return{isSilent:this.Y8t,masterVolume:this.J8t,listenerZ:this.F8t[2],listenerForwardVec:this.j8t,listenerUpVec:this.B8t,listenerUid:this.Q8t?this.Q8t.YF():-1,remoteUrls:[...this.sJt.entries()],playing:this.iJt.filter(t=>this.EJt(t)),effects:this.eJt,analysers:this.hJt}}_T(t){if(this.Y8t=t.isSilent,this.J8t=t.masterVolume,this.F8t[2]=t.listenerZ,this.Q8t=null,this.V8t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.j8t=t.listenerForwardVec:this.j8t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.B8t=t.listenerUpVec:this.B8t=[0,1,0],this.sJt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.sJt.set(s,i);this.iJt=t.playing;for(const e of this.iJt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.eJt=t.effects,this.hJt=t.analysers}RZ(){if(-1!==this.V8t&&(this.Q8t=this.df.Mk(this.V8t),this.V8t=-1,this.Q8t)){const t=this.Q8t.xk();this.F8t[0]=t.pT(),this.F8t[1]=t.yT()}for(const s of this.iJt){const i=this.df.CO().yV(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.eJt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const n=this.df.CO().yV(h.bufferOriginalUrl);n&&(h.bufferUrl=n.url,h.bufferType=n.type)}this.Y2t("load-state",{saveLoadMode:this.O8t,timeScale:this.df.ER(),gameTime:this.df.xFt(),listenerPos:this.F8t,listenerOrientation:[...this.j8t,...this.B8t],isSilent:this.Y8t,masterVolume:this.J8t,playing:this.iJt.filter(t=>null!==t.bufferUrl),effects:this.eJt})}hvt(){const t=[];for(const[i,e]of Object.entries(this.eJt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.iJt.length},...this.iJt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Nl=self.Ps;Nl.aq.Audio.rq={bJt(t){return this.vJt(t)},xJt(t){return this.vJt(t)},DJt(){return this.$8t===this.K8t},AJt(){return!0},NJt(){return this.v8t()},LJt(){for(const t of this.iJt)if(t.isPlaying)return!0;return!1},OJt(t){return this.wJt(t)}}}{const A=self.Ps,Ll=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];A.aq.Audio.qht={Play(t,s,i,e,h){const n=A.aq.Audio.qht.RJt.call(this,t,s,i,e,h);return this.w8t(n),n},rnt(t,s,i,e){A.aq.Audio.qht.RJt.call(this,t,0,s,0,i,e)},async RJt(t,s,i,e,h,n){if(!this.Y8t){const r=t[1],o=this.df.CO().yV(t[0]);if(o){const a=this.D8t,l=(this.D8t=0,this.SJt(t[0],h,r,0!==s,this.mJt(i)));try{await this.H2t("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:r,tags:this.cJt(h),isLooping:0!==s,vol:this.mJt(i),stereoPan:A.yn(e/100,-1,1),pos:n||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.df.vFt())}}}},async kJt(t,s,i,e,h,n,r,o,a,l,u){if(!this.Y8t){const c=t[1],f=this.df.CO().yV(t[0]);if(f){const d=this.D8t,p=(this.D8t=0,this.SJt(t[0],u,c,0!==s,this.mJt(i)));try{await this.H2t("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.cJt(u),isLooping:0!==s,vol:this.mJt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:n,angle:A.wn(r),innerAngle:A.wn(o),outerAngle:A.wn(a),outerGain:this.mJt(l)}})}finally{p&&(p.placeholder=this.df.vFt())}}}},async PJt(t,s,i,e,h,n,r,o){if(!this.Y8t&&e){const a=e.jTt();if(a&&a.xk()){const l=a.xk(),u=l.vk().e4(),[c,f]=this.CJt(l.pT(),l.yT(),-u,this.F8t[0],this.F8t[1]),d=t[1],p=this.df.CO().yV(t[0]);if(p){const m=this.D8t,g=(this.D8t=0,this.SJt(t[0],o,d,0!==s,this.mJt(i)));try{await this.H2t("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.cJt(o),isLooping:0!==s,vol:this.mJt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.i5(),angle:l.e4()-u,innerAngle:A.wn(h),outerAngle:A.wn(n),outerGain:this.mJt(r),uid:a.YF()}})}finally{g&&(g.placeholder=this.df.vFt())}}}}},async FJt(t,s,i,e,h,n){if(!this.Y8t){const r=1===t,o=this.df.CO().yV(s)||this.sJt.get(s.toLowerCase());if(o){const a=this.D8t,l=(this.D8t=0,this.SJt(s,n,r,0!==i,this.mJt(e)));try{await this.H2t("play",{originalUrl:s,url:o.url,type:o.type,isMusic:r,tags:this.cJt(n),isLooping:0!==i,vol:this.mJt(e),stereoPan:A.yn(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.df.vFt())}}}},async jJt(t,s,i,e,h,n,r,o,a,l,u,c){if(!this.Y8t){const f=1===t,d=this.df.CO().yV(s)||this.sJt.get(s.toLowerCase());if(d){const p=this.D8t,m=(this.D8t=0,this.SJt(s,c,f,0!==i,this.mJt(e)));try{await this.H2t("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.cJt(c),isLooping:0!==i,vol:this.mJt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:n,z:r,angle:A.wn(o),innerAngle:A.wn(a),outerAngle:A.wn(l),outerGain:this.mJt(u)}})}finally{m&&(m.placeholder=this.df.vFt())}}}},async BJt(t,s,i,e,h,n,r,o,a){if(!this.Y8t&&!this.Y8t&&h){const l=h.jTt();if(l&&l.xk()){const u=l.xk(),c=u.vk().e4(),[f,d]=this.CJt(u.pT(),u.yT(),-c,this.F8t[0],this.F8t[1]),p=1===t,m=this.df.CO().yV(s)||this.sJt.get(s.toLowerCase());if(m){const g=this.D8t,y=(this.D8t=0,this.SJt(s,a,p,0!==i,this.mJt(e)));try{await this.H2t("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.cJt(a),isLooping:0!==i,vol:this.mJt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.i5(),angle:u.e4()-c,innerAngle:A.wn(n),outerAngle:A.wn(r),outerGain:this.mJt(o),uid:l.YF()}})}finally{y&&(y.placeholder=this.df.vFt())}}}}},zJt(t,s){this.Y2t("set-looping",{tags:this.cJt(t),isLooping:0===s})},UJt(t,s){this.Y2t("set-muted",{tags:this.cJt(t),isMuted:0===s})},ent(t,s){this.Y2t("set-volume",{tags:this.cJt(t),vol:this.mJt(s)})},WJt(t,s,i,e){this.Y2t("fade-volume",{tags:this.cJt(t),vol:this.mJt(s),duration:i,stopOnEnd:0===e})},QJt(t,s){this.Y2t("set-stereo-pan",{tags:this.cJt(t),p:A.yn(s/100,-1,1)})},async VJt(t){const s=t[1],i=this.df.CO().yV(t[0]);i&&(this.K8t++,await this.H2t("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.$8t++)},async JJt(t,s){const i=1===t,e=this.df.CO().yV(s)||this.sJt.get(s.toLowerCase());e&&(this.K8t++,await this.H2t("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.$8t++)},kz(t,s){this.Y2t("set-playback-rate",{tags:this.cJt(t),rate:Math.max(s,0)})},Cz(t){this.TJt(t),this.Y2t("stop",{tags:this.cJt(t)})},YJt(){this.E8t()},HJt(t,s){this.Y2t("set-paused",{tags:this.cJt(t),paused:0===s})},qJt(t,s){this.Y2t("seek",{tags:this.cJt(t),pos:s})},ZJt(t){2===t&&(t=this.v8t()?1:0),this.G8t(0===t)},XJt(t){const s=this.mJt(t);this.I8t(s)},KJt(t,s,i,e,h,n,r){const o=Ll[s];this._Jt(t),this.Y2t("add-effect",{type:"filter",tags:this.cJt(t),params:[o,i,e,h,n,A.yn(r/100,0,1)]})},$Jt(t,s,i,e){this._Jt(t),this.Y2t("add-effect",{type:"delay",tags:this.cJt(t),params:[s,this.mJt(i),A.yn(e/100,0,1)]})},tYt(t,s,i,e,h,n){this._Jt(t),this.Y2t("add-effect",{type:"flanger",tags:this.cJt(t),params:[s/1e3,i/1e3,e,h/100,A.yn(n/100,0,1)]})},sYt(t,s,i,e,h,n,r){this._Jt(t),this.Y2t("add-effect",{type:"phaser",tags:this.cJt(t),params:[s,i,e,h,n,A.yn(r/100,0,1)]})},iYt(t,s,i,e){const h=this.df.CO().yV(s[0]);h&&(this._Jt(t),this.Y2t("add-effect",{type:"convolution",tags:this.cJt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,A.yn(e/100,0,1)]}))},eYt(t,s){this._Jt(t),this.Y2t("add-effect",{type:"gain",tags:this.cJt(t),params:[this.mJt(s)]})},hYt(t,s){this._Jt(t),this.Y2t("add-effect",{type:"stereopan",tags:this.cJt(t),params:[A.yn(s/100,-1,1)]})},nYt(t){this._Jt(t),this.Y2t("add-effect",{type:"gain",tags:this.cJt(t),params:[0]})},rYt(t,s,i){this._Jt(t),this.Y2t("add-effect",{type:"tremolo",tags:this.cJt(t),params:[s,A.yn(i/100,0,1)]})},oYt(t,s,i){this._Jt(t),this.Y2t("add-effect",{type:"ringmod",tags:this.cJt(t),params:[s,A.yn(i/100,0,1)]})},aYt(t,s,i,e,h,n){this._Jt(t),this.Y2t("add-effect",{type:"distortion",tags:this.cJt(t),params:[this.pJt(s),this.pJt(i),e,this.pJt(h),A.yn(n/100,0,1)]})},lYt(t,s,i,e,h,n){this._Jt(t),this.Y2t("add-effect",{type:"compressor",tags:this.cJt(t),params:[s,i,e,h/1e3,n/1e3]})},uYt(t,s,i){this._Jt(t),this.Y2t("add-effect",{type:"analyser",tags:this.cJt(t),params:[s,i]})},cYt(t){const s=this.cJt(t);for(const i of s)this.X8t.set(i.toLowerCase(),0);this.Y2t("remove-effects",{tags:s}),this.eJt={}},BB(t,s,i,e,h,n){this.Y2t("set-effect-param",{tags:this.cJt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:n})},fYt(t){if(t){const s=t.jTt();s&&s.xk()&&(this.Q8t=s)}},dYt(t){this.F8t[2]=t},pYt(t,s,i,e,h,n){this.j8t[0]=t,this.j8t[1]=s,this.j8t[2]=-i,this.B8t[0]=e,this.B8t[1]=h,this.B8t[2]=-n},mYt(t){this.D8t=Math.max(t,0)},gYt(t){const s=t[1],i=this.df.CO().yV(t[0]);i&&this.Y2t("unload",{url:i.url,type:i.type,isMusic:s})},yYt(t,s){const i=1===t,e=this.df.CO().yV(s)||this.sJt.get(s.toLowerCase());e&&this.Y2t("unload",{url:e.url,type:e.type,isMusic:i})},MYt(){this.Y2t("unload-all")},wYt(t,s,i){this.sJt.set(i.toLowerCase(),{url:t,type:s})}}}{const Ol=self.Ps;Ol.aq.Audio.Zht={SYt(t){const s=this.MJt(t);return s?s.duration:0},$ht(t){const s=this.MJt(t);return s?s.playbackTime:0},hnt(t){const s=this.MJt(t);return s?s.playbackRate:0},tnt(t){const s=this.MJt(t);return s?this.yJt(s.volume):0},TYt(){return this.yJt(this.C8t())},bYt(t){return this.X8t.get(t.toLowerCase())||0},xYt(t,s){const i=this.IJt(t,Math.floor(s));return i?i.binCount:0},vYt(t,s,i){const e=this.IJt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},GYt(t,s){const i=this.IJt(t,Math.floor(s));return i?i.peak:0},CYt(t,s){const i=this.IJt(t,Math.floor(s));return i?i.rms:0},IYt(){return this.H8t},_Yt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},EYt(){return this.Z8t},DYt(t,s){return 0==(t=Ol.yn(+t,0,100)/100)?-1/0:t<.1?this.yJt(Ol.kt(0,this.mJt(s),10*t)):Ol.kt(s,0,(t-.1)/.9)}}}{const Rl=self.Ps;Rl.aq.Text=class extends Rl.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{const kl=self.Ps;kl.aq.Text.aIt=class extends kl.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}_9(t){}O9(){}}}{const Pl=self.Ps,Fl=self.Ys,jl=[0,0,0],Bl=["left","center","right"],zl=["top","center","bottom"],Ul=["ltr","rtl"],Wl=["word","cjk","character"],Ql=new Pl.Rect,Vl=new Pl.iu,Jl=new Pl.Ho,Yl=Pl.un(Pl.sl),Hl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),N=(Pl.aq.Text.Instance=class extends Pl.lvt{constructor(t,s){if(super(t),this.pf="",this.AYt=!0,this.NYt="Arial",this.LYt=12,this.OYt=0,this.FC=!1,this.jC=!1,this.tT=Pl.un(Pl.Ho),this.VC=0,this.JC=0,this.qC="word",this.ZC=0,this.RYt="auto",this.kYt=1,this.PYt=null,this.FYt="",this.jYt=!1,this.BYt=!1,this.zYt=null,this.UYt=-1,this.WYt=-1,this.QYt=0,this.VYt=Pl.un(Pl.oy.xS,this.df.PS(),{timeout:5}),this.VYt.xI=()=>this.df.Dk(),this.JYt=()=>this.YYt(),this.HYt=!1,s){this.pf=s[0],this.AYt=!!s[1],this.NYt=s[2],this.LYt=s[3],this.OYt=s[4],this.FC=!!s[5],this.jC=!!s[6],this.VC=s[8],this.JC=s[9],this.qC=Wl[s[10]],this.ZC=s[11],this.qYt(this.df.N6(s[12]));const i=s[7];this.tT.ta(i[0],i[1],i[2]),this.xk().z4(s[13]),this.BYt=!!s[15]}this.ZYt(),this.XYt()}cn(){this.qYt(null),this.KYt(),this.zYt&&(this.zYt.cn(),this.zYt=null),this.VYt.cn(),this.VYt=null,super.cn()}ZYt(){const t=this.VYt;t.yf(this.pf),t.II(this.AYt),this.VYt.AC()&&this.PYt?this.VYt.um(this.Wk().RFt(this.PYt)):this.VYt.um(null),t._I("nearest"!==this.df.QO()),t.EI(this.NYt),t.LI(this.OYt),t.RI(this.FC),t.FI(this.jC),t.hT(this.tT),t.VI(Bl[this.VC]),t.YI(zl[this.JC]),t.qI(this.qC),t.XI(Ul[this.ZC])}$Yt(){let t=this.xk(),s=(this.VYt.DI(this.LYt),this.VYt.NI(t.qDt()),t.vk()),i;"auto"===this.RYt?i=s.dH(t.i5()):"fixed"===this.RYt&&(i=this.kYt),t.cB()&&i!==this.VYt.s_()&&t.KAt(!0),this.VYt.t_(t.pm(),t.Cm(),i)}qYt(t){t&&(t.VJ()||t.G3().constructor!==Pl.aq.Nht)||t!==this.PYt&&(this.PYt&&this.PYt.Jf().removeEventListener("animationframeimagechange",this.JYt),this.PYt=t,this.PYt&&this.PYt.Jf().addEventListener("animationframeimagechange",this.JYt),this.ZYt(),this.jYt=!1,this.df.Dk())}YYt(){this.df.kFt(this.PYt),this.df.Dk(),this.HYt=!0}XYt(){if(this.BYt){let t=this.pf;this.AYt&&(t=Pl.Dh.im(t)),this.zYt?this.zYt.yf(t):this.zYt=Pl.un(Pl.ff,this.df,t)}else this.zYt&&(this.zYt.cn(),this.zYt=null)}ib(t){const s=this.xk(),i=(this.$Yt(),this.HYt&&(this.HYt=!1,this.VYt.AC())&&this.PYt&&this.VYt.um(this.Wk().RFt(this.PYt)),this.VYt.kx());if(i){const e=s.vk();if(0===s.e4()&&0===e.e4()&&0===s.i5()&&!s.cB()&&e.NY()){const h=s.r5(),[n,r]=e._F(h.er(),h.hr()),[o,a]=e._F(h.lr(),h.ur()),l=n-Math.round(n),u=r-Math.round(r),[c,f]=(Ql.set(n,r,o,a),Ql.offset(-l,-u),Vl.xu(Ql),t.qD(t.pA()));this.df.AP().BW(t,c,f),t.RD(i),t.Ow(Vl,this.VYt.A_()),e.UW(t)}else t.RD(i),s.cB()?this.a6t(s,t):this.l6t(s,t)}}l6t(t,s){let i=t.r5();this.df.JO()&&(i=this.tHt(i)),s.Ow(i,this.VYt.A_())}a6t(s,t){const i=s.XAt();if(s.$At()){s.DAt(Ql,Vl,!1);let t=Vl;this.df.JO()&&(t=this.tHt(t)),i.sb(s.fB(),t,this.VYt.A_()),s.KAt(!1)}i.ib(t)}tHt(t){const s=t.er()-Math.round(t.er()),i=t.hr()-Math.round(t.hr());return 0==s&&0==i?t:(Vl.I(t),Vl.offset(-s,-i),Vl)}Mvt(){const t=this.VYt.kx();return t?[t.pm(),t.Cm()]:[100,100]}wvt(){return this.VYt.A_()}bvt(){return!1}IT(){const t={t:this.pf,c:this.tT.toJSON(),fn:this.NYt,ps:this.LYt};return this.AYt&&(t.bbc=this.AYt),0!==this.VC&&(t.ha=this.VC),0!==this.JC&&(t.va=this.JC),"word"!==this.qC&&(t.wr=this.qC),0!==this.OYt&&(t.lho=this.OYt),this.FC&&(t.b=this.FC),this.jC&&(t.i=this.jC),-1!==this.WYt&&(t.tw={st:this.UYt,en:this.WYt,l:this.QYt}),this.PYt&&(t.ioc=this.PYt.$J()),"fixed"===this.RYt&&(t.fs=this.kYt),t}_T(t){if(this.KYt(),this.pf=t.t,this.tT.Va(t.c),this.NYt=t.fn,this.LYt=t.ps,this.AYt=!!t.hasOwnProperty("bbc")&&t.bbc,this.VC=t.hasOwnProperty("ha")?t.ha:0,this.JC=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.qC="boolean"==typeof s?s?"word":"character":s}else this.qC="word";if(this.OYt=t.hasOwnProperty("lho")?t.lho:0,this.FC=!!t.hasOwnProperty("b")&&t.b,this.jC=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.UYt=i.st,this.WYt=i.en,this.QYt=i.l}if(t.hasOwnProperty("ioc")){const e=this.Wk().N6(t.ioc);e&&this.qYt(e)}else this.qYt(null);t.hasOwnProperty("fs")?(this.RYt="fixed",this.kYt=t.fs):this.RYt="auto",this.ZYt(),this.XYt(),this.jYt=!1,-1!==this.WYt&&this.tvt()}Lnt(t){switch(t){case 0:return this.$I();case 1:return this.AYt;case 2:return this.sHt();case 3:return this.iHt();case 4:return this.eHt();case 5:return this.hHt();case 6:return this.nHt();case 7:return jl[0]=this.tT.ua(),jl[1]=this.tT.ca(),jl[2]=this.tT.fa(),jl;case 8:return this.rHt();case 9:return this.oHt();case 10:return this.aHt();case 15:return this.lHt()}}jnt(t,s){switch(t){case 0:this.uHt(s);break;case 1:this.AYt!==!!s&&(this.AYt=!!s,this.ZYt());break;case 2:this.cHt(s);break;case 3:this.fHt(s);break;case 4:this.dHt(s);break;case 5:this.pHt(s);break;case 6:this.mHt(s);break;case 7:const i=this.tT,e=s;i.ua()===e[0]&&i.ca()===e[1]&&i.fa()===e[2]||(this.tT.ta(e[0],e[1],e[2]),this.ZYt());break;case 8:this.gHt(s);break;case 9:this.yHt(s);break;case 10:this.MHt(s)}}nvt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.tT.ia(s,i,e),this.ZYt())}uHt(t){this.pf!==t&&(this.pf=t,this.VYt.yf(t),this.XYt(),this.jYt=!1,this.df.Dk())}$I(){return this.pf}wHt(t,s){this.$Yt(),this.uHt(t),this.UYt=this.df._R(),this.WYt=this.UYt+s/this.Yz().KF(),this.QYt=this.VYt.n_(),this.VYt.BI(0),this.tvt()}KYt(){this.UYt=-1,this.WYt=-1,this.QYt=0,this.VYt.BI(-1),this.F2t()}SHt(){-1!==this.WYt&&(this.KYt(),this.Sj(Pl.aq.Text.rq.THt),this.df.Dk())}cHt(t){this.NYt!==t&&(this.NYt=t,this.VYt.EI(t),this.df.Dk())}sHt(){return this.NYt}pHt(t){this.FC!==(t=!!t)&&(this.FC=t,this.VYt.RI(t),this.df.Dk())}hHt(){return this.FC}mHt(t){this.jC!==(t=!!t)&&(this.jC=t,this.VYt.FI(t),this.df.Dk())}nHt(){return this.jC}fHt(t){this.LYt!==t&&(this.LYt=t,this.df.Dk())}iHt(){return this.LYt}bHt(t){this.tT.ya(t)||(this.tT.la(t),this.VYt.hT(this.tT),this.df.Dk())}xHt(){return this.tT}dHt(t){this.OYt!==t&&(this.OYt=t,this.ZYt(),this.df.Dk())}eHt(){return this.OYt}gHt(t){this.VC!==t&&(this.VC=t,this.ZYt(),this.df.Dk())}rHt(){return this.VC}yHt(t){this.JC!==t&&(this.JC=t,this.ZYt(),this.df.Dk())}oHt(){return this.JC}vHt(t){this.MHt(Wl[t])}MHt(t){this.qC!==t&&(this.qC=t,this.ZYt(),this.df.Dk())}aHt(){return this.qC}GHt(t){this.ZC!==t&&(this.ZC=t,this.ZYt(),this.df.Dk())}CHt(){return this.ZC}IHt(t){this.BYt=!!t,this.XYt()}lHt(){return this.BYt}_Ht(t){this.RYt!==t&&(this.RYt=t,this.df.Dk())}EHt(){return this.RYt}DHt(t){this.kYt!==t&&(this.kYt=t,"fixed"===this.RYt)&&this.df.Dk()}AHt(){return this.kYt}NHt(){return this.$Yt(),this.VYt.i_()}LHt(){return this.$Yt(),this.VYt.h_()}OHt(t,s){this.$Yt();const i=this.xk(),e=(Yl.set(t-i.pT(),s-i.yT()),Yl.rotate(-i.e4()),Yl.offset(i.pm()*i.oz(),i.Cm()*i.lz()),Yl._t(i.pm(),i.Cm()),Yl.scale(this.VYt.pm(),this.VYt.Cm()),this.VYt.o_(Yl.rl(),Yl.al()));if(e){const h=e.pg("tag");if(h)return h.param}return""}RHt(t,s,i){const e=this.OHt(s,i);return e&&Pl.gh(t,e)}kHt(t,s){this.$Yt(),s=Math.floor(s);const i=this.VYt.l_(t,s);if(!i)return null;const e=this.xk(),h=this.VYt.WI(),n=i.ag(),r=i.ug()-(i.Cm()-i._m())*h,o=i.pm()*h/this.VYt.pm()*e.pm(),a=i.Cm()*h/this.VYt.Cm()*e.Cm();return Yl.set(n,r),Yl._t(this.VYt.pm(),this.VYt.Cm()),Yl.scale(e.pm(),e.Cm()),Yl.offset(-e.pm()*e.oz(),-e.Cm()*e.lz()),Yl.rotate(e.e4()),Yl.offset(e.pT(),e.yT()),{x:Yl.rl(),y:Yl.al(),width:o,height:a}}PHt(t){return this.$Yt(),this.VYt.u_(t)}FHt(t){let s=Hl.get(t);return null===s?"":`</${s||"span"||"span"}>`}jHt(t,s){let i=Hl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async BHt(){if(!this.jYt){let t=new Pl.Dh(this.pf,{Pp:!0}).Hp(),s=new Map,h='<span class="c3-text"',i=[],n=(i.push(`font-family: '${this.sHt()}';`),this.hHt()&&i.push("font-weight: bold;"),this.nHt()&&i.push("font-style: italic;"),"character"===this.aHt()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.PYt?this.Wk().RFt(this.PYt):null);if(this.PYt){const o=Pl.un(Pl.yd),a=[],l=new Map;for(const c of t)if(c.vm()){const f=c.Sg(n);if(f){const d=f.iy(),p=d.hz().VGt();l.has(p)||(l.set(p,null),a.push(o.yc(async()=>{const t=await p.PV();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.vm()){const g=m.Sg(n);if(g){const y=g.iy(),M=y.hz().VGt();u.push(o.yc(async()=>{const t=await y.hz().YGt(l.get(M));s.set(g,t)}))}}await Promise.all(u);for(const w of l.values())w instanceof ImageBitmap&&w.close&&w.close()}const r=new Map;for(const S of t){let e=S.gg(),t=[...r.keys()];t.reverse();for(const T of t)e.has(T)&&e.get(T)===r.get(T)||(r.delete(T),h+=this.FHt(T));for(const[b,x]of e)r.has(b)||(r.set(b,x),h+=this.jHt(b,x));if(S.Tm()&&(h+=Pl.ep(Pl.tp(S.Bm().join("")),"\n","<br>")),S.vm()&&n){const v=S.Sg(n);if(v){const G=s.get(v);if(G){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.df.QO()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${S.wg()}" width="${v.pm()}" height="${v.Cm()}" style="${t.join(";")}" src="${G}">`}}}}const e=[...r.keys()];e.reverse();for(const C of e)h+=this.FHt(C);h+="</span>",this.FYt=h,this.jYt=!0}return this.FYt}NX(){const s=this.df._R();if(s>=this.WYt)this.KYt(),this.Sj(Pl.aq.Text.rq.THt),this.df.Dk();else{let t=Pl.On(this.UYt,this.WYt,s,0,this.QYt);(t=Math.floor(t))!==this.VYt.zI()&&(this.VYt.BI(t),this.df.Dk())}}hvt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.$I(),F6t:t=>this.uHt(t)},{name:t+".properties.font.name",value:this.sHt(),F6t:t=>this.cHt(t)},{name:t+".properties.size.name",value:this.iHt(),F6t:t=>this.fHt(t)},{name:t+".properties.line-height.name",value:this.eHt(),F6t:t=>this.dHt(t)},{name:t+".properties.bold.name",value:this.hHt(),F6t:t=>this.pHt(t)},{name:t+".properties.italic.name",value:this.nHt(),F6t:t=>this.mHt(t)}]}]}g2t(){return self.zHt}},new WeakMap),ql=new Map([["left",0],["center",1],["right",2]]),Zl=new Map([["top",0],["center",1],["bottom",2]]),Xl=["ltr","rtl"];new Set(["auto","fixed"]);self.zHt=class extends self.pB{constructor(){super(),N.set(this,self.AF.kF().wB())}get text(){return N.get(this).$I()}set text(t){Fl.Ge(t);const s=N.get(this);s.KYt(),s.uHt(t)}UHt(t,s){Fl.Ge(t),Fl.Se(s);const i=N.get(this);i.KYt(),i.wHt(t,s)}WHt(){N.get(this).SHt()}set VW(t){Fl.Ge(t),N.get(this).cHt(t)}get VW(){return N.get(this).sHt()}set YW(t){N.get(this).pHt(t)}get YW(){return N.get(this).hHt()}set HW(t){N.get(this).mHt(t)}get HW(){return N.get(this).nHt()}set JW(t){Fl.Se(t),N.get(this).fHt(t)}get JW(){return N.get(this).iHt()}set QHt(t){if(Fl.Be(t),t.length<3)throw new Error("expected 3 elements");Jl.ta(t[0],t[1],t[2]),N.get(this).bHt(Jl)}get QHt(){const t=N.get(this).xHt();return[t.ua(),t.ca(),t.fa()]}set lineHeight(t){Fl.Se(t),N.get(this).dHt(t)}get lineHeight(){return N.get(this).eHt()}set XW(t){Fl.Ge(t);const s=ql.get(t);if(void 0===s)throw new Error("invalid mode");N.get(this).gHt(s)}get XW(){return Bl[N.get(this).rHt()]}set verticalAlign(t){Fl.Ge(t);const s=Zl.get(t);if(void 0===s)throw new Error("invalid mode");N.get(this).yHt(s)}get verticalAlign(){return zl[N.get(this).oHt()]}set KW(t){if(!Wl.includes(t))throw new Error("invalid mode");N.get(this).MHt(t)}get KW(){return N.get(this).aHt()}set $W(t){Fl.Ge(t);const s=Xl.indexOf(t);if(-1===s)throw new Error("invalid text direction");N.get(this).GHt(s)}get $W(){return Xl[N.get(this).CHt()]}set VHt(t){N.get(this).IHt(!!t)}get VHt(){return N.get(this).lHt()}JHt(t){Fl.Se(t);const s=N.get(this);s._Ht("fixed"),s.DHt(t)}YHt(){N.get(this)._Ht("auto")}get iQ(){return N.get(this).NHt()}get eQ(){return N.get(this).LHt()}HHt(){const t=N.get(this);return[t.NHt(),t.LHt()]}qHt(t,s,i){return Fl.Ge(t),Fl.Se(s),Fl.Se(i),N.get(this).RHt(t,s,i)}ZHt(t,s){return Fl.Se(t),Fl.Se(s),N.get(this).OHt(t,s)}XHt(t,s=0){return Fl.Ge(t),Fl.Se(s),N.get(this).kHt(t,s)}KHt(t){return Fl.Ge(t),N.get(this).PHt(t)}$Ht(t){const s=N.get(this),i=s.Wk().wP(t);s.qYt(i)}t7t(){return N.get(this).BHt()}}}{const Kl=self.Ps;Kl.aq.Text.rq={s7t(t,s){return s?this.pf===t:Kl.gh(this.pf,t)},i7t(){return-1!==this.WYt},THt(){return!0},e7t(t,s,i){return this.RHt(t,s,i)}}}{const $l=self.Ps,tu=$l.un($l.Ho);$l.aq.Text.qht={yf(t){this.KYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.uHt(t.toString())},h7t(t){this.KYt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.uHt(this.pf+t)},n7t(t,s){this.KYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.wHt(t.toString(),s)},r7t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.NYt&&i===this.FC&&e===this.jC||(this.cHt(t),this.pHt(i),this.mHt(e))},DI(t){this.fHt(t)},o7t(t){tu.Ca(t),tu.yn(),this.bHt(tu)},a7t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},yWt(t){this.xk().eT(t),this.df.Dk()},l7t(){this.SHt()},LI(t){this.dHt(t)},u7t(t){this.gHt(t)},c7t(t){this.yHt(t)},f7t(t){this.vHt(t)},XI(t){this.GHt(t)},d7t(t){this.qYt(t)},p7t(){return this.BHt()},m7t(t){this.IHt(t)},g7t(t,s){this._Ht(["auto","fixed"][t]),this.DHt(s)}}}{const su=self.Ps;su.aq.Text.Zht={Text(){return this.pf},y7t(){return this.AYt?su.Dh.im(this.pf):this.pf},M7t(){return this.NYt},w7t(){return this.LYt},S7t(){return this.NHt()},T7t(){return this.LHt()},b7t(){return this.OYt},x7t(t,s){return this.OHt(t,s)},v7t(t){return this.PHt(t)},G7t(t,s){const i=this.kHt(t,s);return i?i.x:0},C7t(t,s){const i=this.kHt(t,s);return i?i.y:0},I7t(t,s){const i=this.kHt(t,s);return i?i.width:0},_7t(t,s){const i=this.kHt(t,s);return i?i.height:0},E7t(){return this.FYt}}}{const iu=self.Ps;iu.aq.D7t=class extends iu.Jxt{constructor(t){super(t)}cn(){super.cn()}}}{const eu=self.Ps;eu.aq.D7t.aIt=class extends eu.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){this.hz().Uk(this.df)}_9(t){return this.hz().NW(t,{pb:this.df.QO()})}O9(){this.hz().TI()}}}{let s=function(t){return ou.get(t).A7t()};s;const hu=self.Ps,nu=self.Ys,ru=hu.un(hu.Rect),ou=(hu.aq.D7t.Instance=class extends hu.lvt{constructor(t,s){super(t),this.N7t=!0;const i=hu.un(self.L7t);(this.R7t=i).O7t=()=>this.k7t(),this.P7t=null,this.F7t=(t,s,i,e,h,n)=>this.j7t(t,s,i,e,h,n),this.B7t=t=>this.z7t(t);let e=this.U7t=!0;s&&(i.W7t(s[0]),i.Q7t(hu.wn(s[1])),i.V7t(s[2]?"one-shot":"continuous-spray"),this.J7t(this.df.N6(s[3])),e=s[4],i.Y7t(s[5]),i.H7t(s[6]),i.q7t(s[7]/100),i.Z7t(s[8]),i.X7t(s[9]),i.K7t(s[10]),i.$7t(s[11]),i.t9t(s[12]),i.s9t(s[13]),i.i9t(s[14]),i.e9t(s[15]),i.h9t(s[16]),i.n9t(s[17]),i.r9t(s[18]),i.o9t(s[19]),i.a9t(s[20])),this.l9t(),this.P7t&&(this.U7t=!1),"one-shot"===i.u9t()?i.c9t():i.f9t(!0);const h=this.xk();h.z4(e),h.RAt(!0),this.Gi.Jf().addEventListener("bboxchange",()=>{h.OAt(this.R7t.h5())}),this.Wk().PS().AM()&&h.GAt(),this.OZ=t=>this.RZ(t),this.Wk().Jf().addEventListener("afterload",this.OZ),this.tvt()}cn(){this.Wk().Jf().removeEventListener("afterload",this.OZ),this.OZ=null,this.R7t.cn(),this.R7t=null,this.F7t=null,this.B7t=null,super.cn()}A7t(){return this.R7t}d9t(t){this.R7t.W7t(t),"one-shot"===this.R7t.u9t()&&this.N7t&&this.R7t.p9t(t)}J7t(t){(t=t===this.LF()?null:t)===this.P7t||(this.P7t=t,this.R7t.m9t=t?t=>this.g9t(t):null,this.P7t)||(this.U7t=!0)}l9t(){const t=this.R7t,s=this.xk();t.y9t(s.DD()),t.nBt(this.df.JO()),t.M9t(s.pT()),t.w9t(s.yT()),t.S9t(s.e4()),t.T9t(Math.abs(s.qDt()))}k7t(){this.df.BF(this.Gi)}ib(t){if(this.U7t){const s=this.aft.hz(),i=s.kx();if(i){const e=this.xk(),h=e.vk(),n=ru,r=(this.df.AP().Mkt()?n.set(-1/0,-1/0,1/0,1/0):h.OY()?h.l7(e.i5(),n):h.SY(e.i5(),n),t.RD(i),h.TY(e.i5()));this.R7t.b9t(h.DF()*r),this.R7t.ib(t,s.Tvt(),n,h.OY())}}}IT(){const t=this.R7t;return{r:t.x9t(),sc:t.v9t(),st:t.u9t(),isp:t.G9t(),isz:t.C9t(),io:t.I9t(),gr:t._9t(),xr:t.E9t(),yr:t.D9t(),spr:t.A9t(),szr:t.N9t(),grnd:t.L9t(),acc:t.O9t(),g:t.R9t(),lar:t.k9t(),lsr:t.P9t(),lor:t.F9t(),dm:t.j9t(),to:t.B9t(),s:t.z9t(),pcc:t.U9t(),ft:this.N7t,soc:this.P7t?this.P7t.$J():null,p:t.W9t().map(t=>t.toJSON())}}_T(t,s){const i=this.R7t;if(i.W7t(t.r),i.Q7t(t.sc),i.V7t(t.st),i.Y7t(t.isp),i.H7t(t.isz),i.q7t(t.io),i.Z7t(t.gr),i.X7t(t.xr),i.K7t(t.yr),i.$7t(t.spr),i.t9t(t.szr),i.s9t(t.grnd),i.i9t(t.acc),i.e9t(t.g),i.h9t(t.lar),i.n9t(t.lsr),i.r9t(t.lor),i.o9t(t.dm),i.a9t(t.to),i.f9t(t.s),i.Q9t(t.pcc),this.N7t=t.ft,t.hasOwnProperty("soc")){const n=this.Wk().N6(t.soc);n&&this.J7t(n)}const e=t.p,h=(i.p9t(e.length,!1),i.W9t());for(let t=0,s=h.length;t<s;++t)h[t].Va(e[t]);"state"===s&&this.P7t&&(i.V9t(),i.J9t(this))}RZ(){const t=this.R7t,i=(t.V9t(),t.J9t(this),t.W9t());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.Y9t();if(h){const n=h.xk();if(n){const r=n.Yz();if(r){const o=e.H9t(),a=r.YF();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.Wk(),u=l.Mk(o);u&&l.BF(u)}}}}}}NX(){const t=this.df.xR(this.Gi);this.l9t(),this.N7t&&"one-shot"===this.R7t.u9t()&&this.R7t.q9t(),this.R7t.NX(t),this.R7t.z9t()&&this.df.Dk(),this.xk().Zj(),this.N7t=!1}Z9t(t){for(this.N7t&&"one-shot"===this.R7t.u9t()&&this.R7t.q9t();0<t;)this.R7t.NX(1/60),t-=1/60;this.R7t.z9t()&&this.df.Dk(),this.xk().Zj(),this.N7t=!1}g9t(t,s){let i,e=(i=(i=(i="number"==typeof s?this.df.Mk(s):i)&&i.LF()!==this.P7t?null:i)||this.df.z3(this.P7t,this.xk().vk(),t.pT(),t.yT())).xk();return e.t_(t.ac(),t.ac()),e.i4(t.e4()),e.ND(t.DD()),e.c5(this.xk().u5()),e.Zj(),e.w5(this.Yz(),!0),i.tq(),t.X9t(this.F7t),t.K9t(this.B7t),i}j7t(t,s,i,e,h,n){if(!t.KU()){const r=t.xk();r.t5(s,i),r.t_(r.pm()+e,r.Cm()+e),r.i4(r.e4()+h),r.ND(r.DD()+n),r.Zj()}}z7t(t){t.KU()||this.df.BF(t)}Lnt(t){const s=this.R7t;switch(t){case 0:return s.x9t();case 1:return hu.Sn(s.v9t());case 2:return"one-shot"===s.u9t()?1:0;case 5:return s.G9t();case 6:return s.C9t();case 7:return 100*s.I9t();case 8:return s._9t();case 9:return s.E9t();case 10:return s.D9t();case 11:return s.A9t();case 12:return s.N9t();case 13:return s.L9t();case 14:return s.O9t();case 15:return s.R9t();case 16:return s.k9t();case 17:return s.P9t();case 18:return s.F9t();case 19:return s.j9t();case 20:return s.B9t()}}jnt(t,s){const i=this.R7t;switch(t){case 0:i.W7t(s);break;case 1:i.Q7t(hu.wn(s));break;case 2:i.V7t(s?"one-shot":"continuous-spray");break;case 5:i.Y7t(s);break;case 6:i.H7t(s);break;case 7:i.q7t(s/100);break;case 8:i.Z7t(s);break;case 9:i.X7t(s);break;case 10:i.K7t(s);break;case 11:i.$7t(s);break;case 12:i.t9t(s);break;case 13:i.s9t(s);break;case 14:i.i9t(s);break;case 15:i.e9t(s);break;case 16:i.h9t(s);break;case 17:i.n9t(s);break;case 18:i.r9t(s);break;case 19:i.o9t(s);break;case 20:i.a9t(s)}}hvt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.R7t;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.$9t()},{name:s+".type.name",value:[s+".type.items."+e.u9t()]},{name:i+".is-spraying",value:e.z9t(),F6t:t=>e.f9t(t)},{name:s+".rate.name",value:e.x9t(),F6t:t=>e.W7t(t)},{name:s+".spray-cone.name",value:hu.Sn(e.v9t()),F6t:t=>e.Q7t(hu.wn(t))},{name:s+".speed.name",value:e.G9t(),F6t:t=>e.Y7t(t)},{name:s+".size.name",value:e.C9t(),F6t:t=>e.H7t(t)},{name:s+".opacity.name",value:e.I9t(),F6t:t=>e.q7t(t)},{name:s+".grow-rate.name",value:e._9t(),F6t:t=>e.Z7t(t)},{name:s+".x-randomiser.name",value:e.E9t(),F6t:t=>e.X7t(t)},{name:s+".y-randomiser.name",value:e.D9t(),F6t:t=>e.K7t(t)},{name:s+".initial-speed-randomiser.name",value:e.A9t(),F6t:t=>e.$7t(t)},{name:s+".size-randomiser.name",value:e.N9t(),F6t:t=>e.t9t(t)},{name:s+".grow-rate-randomiser.name",value:e.L9t(),F6t:t=>e.s9t(t)},{name:s+".acceleration.name",value:e.O9t(),F6t:t=>e.i9t(t)},{name:s+".gravity.name",value:e.R9t(),F6t:t=>e.e9t(t)},{name:s+".angle-randomiser.name",value:e.k9t(),F6t:t=>e.h9t(t)},{name:s+".life-speed-randomiser.name",value:e.P9t(),F6t:t=>e.n9t(t)},{name:s+".opacity-randomiser.name",value:e.F9t(),F6t:t=>e.r9t(t)},{name:s+".timeout.name",value:e.B9t(),F6t:t=>e.a9t(t)}]}]}g2t(){return self.tqt}},new WeakMap);self.tqt=class extends self.pB{constructor(){super(),ou.set(this,self.AF.kF().wB())}set sqt(t){s(this).f9t(!!t)}get sqt(){return s(this).z9t()}set rate(t){nu.Se(t),ou.get(this).d9t(t)}get rate(){return s(this).x9t()}set iqt(t){nu.Se(t),s(this).Q7t(t)}get iqt(){return s(this).v9t()}set eqt(t){nu.Se(t),s(this).Y7t(t)}get eqt(){return s(this).G9t()}set hqt(t){nu.Se(t),s(this).H7t(t)}get hqt(){return s(this).C9t()}set nqt(t){nu.Se(t),s(this).q7t(t)}get nqt(){return s(this).I9t()}set rqt(t){nu.Se(t),s(this).X7t(t)}get rqt(){return s(this).E9t()}set oqt(t){nu.Se(t),s(this).K7t(t)}get oqt(){return s(this).D9t()}set aqt(t){nu.Se(t),s(this).$7t(t)}get aqt(){return s(this).A9t()}set lqt(t){nu.Se(t),s(this).t9t(t)}get lqt(){return s(this).N9t()}set uqt(t){nu.Se(t),s(this).Z7t(t)}get uqt(){return s(this)._9t()}set cqt(t){nu.Se(t),s(this).s9t(t)}get cqt(){return s(this).L9t()}set acceleration(t){nu.Se(t),s(this).i9t(t)}get acceleration(){return s(this).O9t()}set fqt(t){nu.Se(t),s(this).e9t(t)}get fqt(){return s(this).R9t()}set dqt(t){nu.Se(t),s(this).h9t(t)}get dqt(){return s(this).k9t()}set pqt(t){nu.Se(t),s(this).n9t(t)}get pqt(){return s(this).P9t()}set mqt(t){nu.Se(t),s(this).r9t(t)}get mqt(){return s(this).F9t()}set timeout(t){nu.Se(t),s(this).a9t(t)}get timeout(){return s(this).B9t()}gqt(t){nu.Se(t),ou.get(this).Z9t(t)}yqt(t){const s=ou.get(this);t?s.J7t(s.Wk().wP(t)):s.J7t(null)}}}{const au=self.Ps;au.aq.D7t.rq={z9t(){return this.R7t.z9t()}}}{const lu=self.Ps;lu.aq.D7t.qht={f9t(t){this.R7t.f9t(0!==t)},W7t(t){this.d9t(t)},Mqt(t){this.J7t(t)},wqt(){this.J7t(null)},Q7t(t){this.R7t.Q7t(lu.wn(t))},Y7t(t){this.R7t.Y7t(t)},H7t(t){this.R7t.H7t(t)},q7t(t){this.R7t.q7t(t/100)},Z7t(t){this.R7t.Z7t(t)},Sqt(t){this.R7t.X7t(t)},Tqt(t){this.R7t.K7t(t)},bqt(t){this.R7t.$7t(t)},xqt(t){this.R7t.t9t(t)},vqt(t){this.R7t.s9t(t)},Gqt(t){this.R7t.i9t(t)},e9t(t){this.R7t.e9t(t)},Cqt(t){this.R7t.h9t(t)},Iqt(t){this.R7t.n9t(t)},_qt(t){this.R7t.r9t(t)},a9t(t){this.R7t.a9t(t)},Eqt(t){this.Z9t(t)},yWt(t){this.xk().eT(t),this.df.Dk()}}}{const uu=self.Ps;uu.aq.D7t.Zht={Dqt(){return this.R7t.$9t()},Aqt(){return this.R7t.x9t()},Nqt(){return uu.Sn(this.R7t.v9t())},Lqt(){return this.R7t.G9t()},Oqt(){return this.R7t.C9t()},Rqt(){return 100*this.R7t.I9t()},kqt(){return this.R7t._9t()},Pqt(){return this.R7t.E9t()},Fqt(){return this.R7t.D9t()},jqt(){return this.R7t.N9t()},Bqt(){return this.R7t.A9t()},zqt(){return this.R7t.L9t()},Uqt(){return this.R7t.O9t()},Wqt(){return this.R7t.R9t()},Qqt(){return this.R7t.k9t()},Vqt(){return this.R7t.P9t()},Jqt(){return this.R7t.F9t()},Yqt(){return this.R7t.B9t()}}}{const cu=self.Ps,fu=[],du=new Set(["continuous-spray","one-shot"]),pu=["fade-to-invisible","timeout-expired","particle-stopped"],mu=cu.un(cu.Rect);self.L7t=class{constructor(){this.Hqt=0,this.qqt=0,this.Zqt="continuous-spray",this.Xqt=!1,this.Kqt=0,this.$qt=!1,this.tZt=0,this.sZt=0,this.iZt=0,this.eZt=0,this.hZt=0,this.nZt=1,this.rZt=0,this.oZt=0,this.aZt=0,this.lZt=0,this.uZt=0,this.cZt=0,this.fZt=0,this.dZt=0,this.pZt=0,this.mZt=0,this.gZt=0,this.yZt=0,this.MZt=0,this.u0=0,this.wZt=0,this.SZt=1,this.O7t=null,this.m9t=null,this.TZt=[],this.wDt=new cu.Rect,this.tT=new cu.Ho}cn(){this.p0(),cu.Wr(this.TZt),this.TZt=null,this.O7t=null,this.m9t=null,this.wDt=null,this.tT=null}p0(){const i=this.TZt;for(let t=0,s=i.length;t<s;++t)i[t].kbt();cu.Zh(fu,i),cu.Wr(i),1e3<fu.length&&cu.Ur(fu,1e3),this.Xqt=!1}c9t(){for(let t=0,s=this.Hqt;t<s;++t)this.bZt();this.TZt.length&&(this.Xqt=!0)}bZt(t=!0){let s=null;return fu.length?(s=fu.pop()).xZt(this):s=cu.un(self.vZt,this),this.TZt.push(s),t?s.E_t(this.m9t):s.E_t(),s}q9t(){const i=this.TZt,e=this.m9t;for(let t=0,s=i.length;t<s;++t)i[t].E_t(e)}V9t(){const i=this.TZt,e=this.m9t;for(let t=0,s=i.length;t<s;++t)i[t].GZt(e)}J9t(i){const e=this.TZt;for(let t=0,s=e.length;t<s;++t){const h=e[t],n=h.Y9t();if(n){const r=n.xk();r.mT(h.pT()),r.MT(h.yT()),r.t_(h.ac(),h.ac()),r.ND(h.DD()),r.i4(h.e4()),r.c5(i.xk().u5()),r.Zj()}}}p9t(t,s=!0){const i=this.TZt;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.kbt(),fu.push(h)}1e3<fu.length&&cu.Ur(fu,1e3)}else if(t>i.length){const n=t-i.length;for(let t=0;t<n;++t)this.bZt(s)}}W9t(){return this.TZt}$9t(){return this.TZt.length}NX(t){this.CZt(t),this.IZt(t),this._Zt()}CZt(t){if("continuous-spray"===this.Zqt&&this.Xqt){this.wZt+=t*this.Hqt;const s=Math.floor(this.wZt);this.wZt-=s;for(let t=0;t<s;++t)this.bZt()}}Q9t(t){this.wZt=t}U9t(){return this.wZt}IZt(i){let e=this.wDt,h=(e.set(this.tZt,this.sZt,this.tZt,this.sZt),this.TZt),n=0;for(let t=0,s=h.length;t<s;++t){const r=h[t];(h[n]=r).NX(i),r.nmt()?(++n,e.tu(r.h5())):(r.kbt(),fu.push(r))}cu.Ur(h,n),1e3<fu.length&&cu.Ur(fu,1e3)}_Zt(){"one-shot"===this.Zqt&&0===this.TZt.length&&this.Xqt&&(this.O7t&&this.O7t(),this.Xqt=!1)}ib(i,e,h,n){mu.set(e.er(),e.hr(),e.lr(),e.ur()),i.ZD(mu),this.tT.I(i.OD());const r=this.TZt;for(let t=0,s=r.length;t<s;++t){const o=r[t];h.Zl(o.h5())&&o.ib(i,e,n)}i.XD()}OD(){return this.tT}W7t(t){this.Hqt=+t}x9t(){return this.Hqt}Q7t(t){this.qqt=+t}v9t(){return this.qqt}V7t(t){if(!du.has(t))throw new Error("invalid spray type");this.Zqt=t}u9t(){return this.Zqt}f9t(t){this.Xqt=!!t}z9t(){return this.Xqt}y9t(t){this.Kqt=+t}EZt(){return this.Kqt}nBt(t){this.$qt=!!t}DZt(){return this.$qt}M9t(t){this.tZt=+t}AZt(){return this.tZt}w9t(t){this.sZt=+t}NZt(){return this.sZt}S9t(t){this.iZt=+t}LZt(){return this.iZt}Y7t(t){this.eZt=+t}G9t(){return this.eZt}H7t(t){this.hZt=+t}C9t(){return this.hZt}T9t(t){this.nZt=+t}OZt(){return this.nZt}q7t(t){this.rZt=+t}I9t(){return this.rZt}Z7t(t){this.oZt=+t}_9t(){return this.oZt}X7t(t){this.aZt=+t}E9t(){return this.aZt}K7t(t){this.lZt=+t}D9t(){return this.lZt}$7t(t){this.uZt=+t}A9t(){return this.uZt}t9t(t){this.cZt=+t}N9t(){return this.cZt}s9t(t){this.fZt=+t}L9t(){return this.fZt}i9t(t){this.dZt=+t}O9t(){return this.dZt}e9t(t){this.pZt=+t}R9t(){return this.pZt}h9t(t){this.mZt=+t}k9t(){return this.mZt}n9t(t){this.gZt=+t}P9t(){return this.gZt}r9t(t){this.yZt=+t}F9t(){return this.yZt}RZt(t){let s=pu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.MZt=s}o9t(t){this.RZt(pu[t])}kZt(){return pu[this.MZt]}j9t(){return this.MZt}a9t(t){this.u0=+t}B9t(){return this.u0}b9t(t){this.SZt=+t}PZt(){return this.SZt}h5(){return this.wDt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ps),l=new m.iu,u=new m.Ho,t=self.devicePixelRatio||1,c=!1;self.vZt=class{constructor(t){this.FZt=t,this.f0=!1,this.il=0,this.el=0,this.qGt=0,this.k8=0,this.jZt=1,this.BZt=0,this.zZt=0,this.xV=0,this.UZt=0,this.WZt=0,this.QZt=0,this.Fu=new m.Rect,this.VZt=null,this.JZt=NaN,this.YZt=null,this.HZt=null}xZt(t){this.FZt=t}E_t(t){const s=this.FZt;this.f0=!0,this.il=s.AZt()+p(s.E9t()),this.el=s.NZt()+p(s.D9t()),this.qGt=s.G9t()+p(s.A9t()),this.k8=s.LZt()+p(s.v9t()),this.jZt=s.I9t(),this.BZt=this.jZt,this.xV=(s.C9t()+p(s.N9t()))*s.OZt(),this.UZt=this.xV/2,this.zZt=s._9t()+p(s.L9t()),this.WZt=0,this.QZt=0,this.qZt(),t?this.VZt||(this.VZt=t(this)):(this.VZt=null,this.YZt=null,this.HZt=null)}GZt(t){t?this.VZt&&!this.VZt.KU()||(this.VZt=t(this,this.JZt)):(this.VZt=null,this.YZt=null,this.HZt=null)}X9t(t){this.YZt=t}K9t(t){this.HZt=t}kbt(){const t=this.HZt;t&&t(this.VZt),this.VZt=null,this.YZt=null,this.HZt=null}toJSON(){let t;return this.VZt&&this.VZt.xk()&&(t=this.VZt.xk().Yz().YF()),[this.il,this.el,this.qGt,this.k8,this.jZt,this.zZt,this.xV,this.WZt,this.QZt,t]}Va(t){this.il=t[0],this.el=t[1],this.qGt=t[2],this.k8=t[3],this.jZt=t[4],this.BZt=this.jZt,this.zZt=t[5],this.xV=t[6],this.WZt=t[7],this.QZt=t[8],this.JZt=t[9],this.UZt=this.xV/2,this.qZt()}NX(t){let s=this.FZt,i=this.qGt*t,e=this.k8,h=Math.cos(e)*i,n=Math.sin(e)*i+this.WZt*t,r=(this.il+=h,this.el+=n,this.zZt*t),o=(this.xV+=r,this.UZt=this.xV/2,this.qGt+=s.O9t()*t,this.WZt+=s.R9t()*t,this.QZt+=t,this.qZt(),s.k9t()),a=s.P9t(),l=s.F9t(),u=0;0!==o&&(u=p(o*t),this.k8+=u),0!==a&&(this.qGt+=p(a*t)),0!==l&&(this.jZt=m.yn(this.jZt+p(l*t),0,1));const c=1<=this.xV&&(2===s.j9t()?0<this.qGt:this.QZt<s.B9t()),f=this.YZt;if(f&&c){let t=s.EZt()*this.jZt;0===s.j9t()&&(t*=1-this.QZt/s.B9t());const d=t-this.BZt;this.BZt=t,f(this.VZt,h,n,r,u,d)}this.f0=c}nmt(){return this.f0}h5(){return this.Fu}qZt(){const t=this.il,s=this.el,i=this.UZt;this.Fu.set(t-i,s-i,t+i,s+i)}ib(h,n,r){if(!this.VZt){let i=this.FZt,e=i.EZt()*this.jZt;if(0===i.j9t()&&(e*=1-this.QZt/i.B9t()),!(e<=0)){const o=this.xV,a=o*i.PZt()*t;if(!(a<1)){let t=this.il,s=this.el;i.DZt()&&(t=t+.5|0,s=s+.5|0),h.AM()?h.KD(t,s,o,e):r||a>h.RA()||a<h.OA()?(u.I(i.OD()),u.ba(e),h.hT(u),c=!0,l.xu(this.Fu),h.VD(l,n)):(c&&(h.hT(i.OD()),c=!1),h.KD(t,s,a,e))}}}}Y9t(){return this.VZt}H9t(){return this.JZt}pT(){return this.il}yT(){return this.el}ac(){return this.xV}e4(){return this.k8}DD(){return this.jZt}}}{const gu=self.Ps;gu.aq.ZZt=class extends gu.T2t{constructor(t){super(t,"sliderbar"),this.G2t("click",(t,s)=>t.XZt(s)),this.G2t("change",(t,s)=>t.KZt(s)),this.G2t("input",(t,s)=>t.$Zt(s))}cn(){super.cn()}}}{const yu=self.Ps;yu.aq.ZZt.aIt=class extends yu.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const Mu=self.Ps,wu=self.Ys,Su=(Mu.aq.ZZt.Instance=class extends Mu.Gvt{constructor(t,s){super(t,"sliderbar"),this.Lht=0,this.Dot=0,this.Aot=100,this.hot=1,this.tXt="",this._yt=!0,this.mf="",this.sXt="",s&&(this.Lht=s[0],this.Dot=s[1],this.Aot=s[2],this.hot=s[3],this.tXt=s[4],this.xk().z4(s[5]),this._yt=s[6],this.mf=s[7],this.sXt=s[8]),this.Bvt({id:this.mf,className:this.sXt})}cn(){super.cn()}zvt(){return{value:this.Lht,min:this.Dot,max:this.Aot,step:this.hot,title:this.tXt,isEnabled:this._yt}}async XZt(t){this.L2t("click",!0),await this.bj(Mu.aq.ZZt.rq.iXt)}async KZt(t){this.Lht=t.value,this.L2t("change",!0),await this.bj(Mu.aq.ZZt.rq.eXt)}async $Zt(t){this.Lht=t.value,this.L2t("input",!0),await this.bj(Mu.aq.ZZt.rq.hXt)}ib(t){}nXt(t){this.Lht!==t&&(this.Lht=t,this.Qvt())}rXt(){return this.Lht}oXt(t){this.Aot!==t&&(this.Aot=t,this.Qvt())}aXt(){return this.Aot}lXt(t){this.Dot!==t&&(this.Dot=t,this.Qvt())}uXt(){return this.Dot}cXt(t){this.tXt!==t&&(this.tXt=t,this.Qvt())}fXt(){return this.tXt}dXt(t){this.hot!==t&&(this.hot=t,this.Qvt())}pXt(){return this.hot}xbt(t){this._yt!==(t=!!t)&&(this._yt=t,this.Qvt())}Gbt(){return this._yt}IT(){return{v:this.Lht,min:this.Dot,max:this.Aot,s:this.hot,t:this.tXt,e:this._yt,id:this.mf}}_T(t){this.Lht=t.v,this.Dot=t.min,this.Aot=t.max,this.hot=t.s,this.tXt=t.t,this._yt=t.e,this.mf=t.id,this.Qvt()}Lnt(t){switch(t){case 0:return this.rXt();case 1:return this.uXt();case 2:return this.aXt();case 3:return this.pXt();case 4:return this.fXt();case 6:return this._IsEnbled()}}jnt(t,s){switch(t){case 0:this.nXt(s);break;case 1:this.lXt(s);break;case 2:this.oXt(s);break;case 3:this.dXt(s);break;case 4:this.cXt(s);break;case 6:this.xbt(s)}}hvt(){Mu.aq.ZZt.qht;const t="plugins.sliderbar";return[{title:t+".name",properties:[{name:t+".properties.value.name",value:this.rXt(),F6t:t=>this.nXt(t)},{name:t+".properties.minimum.name",value:this.uXt(),F6t:t=>this.lXt(t)},{name:t+".properties.maximum.name",value:this.aXt(),F6t:t=>this.oXt(t)},{name:t+".properties.step.name",value:this.pXt(),F6t:t=>this.dXt(t)},{name:t+".properties.enabled.name",value:this.Gbt(),F6t:t=>this.xbt(t)}]}]}g2t(){return self.mXt}},new WeakMap);self.mXt=class extends self.gB{constructor(){super(),Su.set(this,self.AF.kF().wB())}set value(t){wu.Se(t),Su.get(this).nXt(t)}get value(){return Su.get(this).rXt()}set gXt(t){wu.Se(t),Su.get(this).oXt(t)}get gXt(){return Su.get(this).aXt()}set yXt(t){wu.Se(t),Su.get(this).lXt(t)}get yXt(){return Su.get(this).uXt()}set step(t){wu.Se(t),Su.get(this).dXt(t)}get step(){return Su.get(this).pXt()}set MXt(t){wu.Ge(t),Su.get(this).cXt(t)}get MXt(){return Su.get(this).fXt()}set isEnabled(t){Su.get(this).xbt(t)}get isEnabled(){return Su.get(this).Gbt()}}}{const Tu=self.Ps;Tu.aq.ZZt.rq={iXt(){return!0},eXt(){return!0},hXt(){return!0},wXt(t,s){return Tu.compare(this.rXt(),t,s)}}}{const bu=self.Ps;bu.aq.ZZt.qht={SXt(t){this.cXt(t)},eht(t){this.nXt(t)},TXt(t){this.oXt(t)},bXt(t){this.lXt(t)},ftt(t){this.dXt(t)}}}{const xu=self.Ps;xu.aq.ZZt.Zht={xXt(){return this.rXt()},vXt(){return this.aXt()},GXt(){return this.uXt()},pL(){return this.pXt()}}}{const vu=self.Ps;vu.aq.CXt=class extends vu.T2t{constructor(t){super(t,"progress-bar"),this.G2t("click",(t,s)=>t.XZt(s))}cn(){super.cn()}}}{const Gu=self.Ps;Gu.aq.CXt.aIt=class extends Gu.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const Cu=self.Ps,Iu=self.Ys,_u=(Cu.aq.CXt.Instance=class extends Cu.Gvt{constructor(t,s){super(t,"progress-bar"),this.Lht=0,this.Aot=100,this.tXt="",this.mf="",this.sXt="",s&&(this.Lht=s[0],this.Aot=s[1],this.tXt=s[2],this.xk().z4(s[3]),this.mf=s[4],this.sXt=s[5]),this.Bvt({id:this.mf,className:this.sXt})}cn(){super.cn()}zvt(){return{value:this.Lht,max:this.Aot,title:this.tXt}}async XZt(t){this.L2t("click"),await this.bj(Cu.aq.CXt.rq.iXt)}cXt(t){this.tXt!==t&&(this.tXt=t,this.Qvt())}fXt(){return this.tXt}IXt(t){this.Lht!==t&&(this.Lht=t,this.Qvt())}_Xt(){return this.Lht}oXt(t){this.Aot!==t&&(this.Aot=t,this.Qvt())}aXt(){return this.Aot}EXt(){this.Aot=0,this.Lht=0,this.Qvt()}ib(t){}IT(){return{v:this.Lht,m:this.Aot,t:this.tXt,id:this.mf}}_T(t){this.Lht=t.v,this.Aot=t.m,this.tXt=t.t,this.mf=t.id,this.Qvt()}Lnt(t){switch(t){case 0:return this._Xt();case 1:return this.aXt();case 2:return this.fXt()}}jnt(t,s){switch(t){case 0:this.IXt(s);break;case 1:this.oXt(s);break;case 2:this.cXt(s)}}hvt(){const t="plugins.progressbar";return[{title:t+".name",properties:[{name:t+".properties.value.name",value:this._Xt(),F6t:t=>this.IXt(t)},{name:t+".properties.maximum.name",value:this.aXt(),F6t:t=>this.oXt(t)}]}]}g2t(){return self.DXt}},new WeakMap);self.DXt=class extends self.gB{constructor(){super(),_u.set(this,self.AF.kF().wB())}set progress(t){Iu.Se(t),_u.get(this).IXt(t)}get progress(){return _u.get(this)._Xt()}set gXt(t){Iu.Se(t),_u.get(this).oXt(t)}get gXt(){return _u.get(this).aXt()}set MXt(t){Iu.Ge(t),_u.get(this).cXt(t)}get MXt(){return _u.get(this).fXt()}AXt(){_u.get(this).EXt()}}}{const Eu=self.Ps;Eu.aq.CXt.rq={iXt(){return!0},NXt(t,s){return Eu.compare(this._Xt(),t,s)}}}{const Du=self.Ps;Du.aq.CXt.qht={SXt(t){this.cXt(t)},LXt(t){this.IXt(t)},TXt(t){this.oXt(t)},OXt(){this.EXt()}}}{const Au=self.Ps;Au.aq.CXt.Zht={RXt(){return this._Xt()},vXt(){return this.aXt()}}}{const Nu=self.Ps;Nu.aq.kXt=class extends Nu.T2t{constructor(t){super(t,"text-input"),this.G2t("click",(t,s)=>t.XZt(s)),this.G2t("dblclick",(t,s)=>t.aQt(s)),this.G2t("change",(t,s)=>t.KZt(s))}cn(){super.cn()}}}{const Lu=self.Ps;Lu.aq.kXt.aIt=class extends Lu.D2t{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const Ou=self.Ps,Ru=self.Ys,ku=["text","password","email","number","tel","url","textarea","search"],Pu=(Ou.aq.kXt.Instance=class extends Ou.Gvt{constructor(t,s){super(t,"text-input"),this.pf="",this.PXt="",this.tXt="",this._yt=!0,this.FXt=!1,this.jXt=!1,this.Tf="text",this.Evt=!0,this.BXt=-1,this.mf="",this.sXt="",s&&(this.pf=s[0],this.PXt=s[1],this.tXt=s[2],this.xk().z4(s[3]),this._yt=s[4],this.FXt=s[5],this.jXt=s[6],this.Tf=ku[s[7]],this.Evt=s[8],this.mf=s[9],this.sXt=s[10]),this.Bvt({type:this.Tf,id:this.mf,className:this.sXt})}cn(){super.cn()}zvt(){return{text:this.pf,placeholder:this.PXt,title:this.tXt,isEnabled:this._yt,isReadOnly:this.FXt,spellCheck:this.jXt,maxLength:this.BXt}}async XZt(t){this.L2t("click",!0),await this.bj(Ou.aq.kXt.rq.iXt)}async aQt(t){this.L2t("dblclick",!0),await this.bj(Ou.aq.kXt.rq.zXt)}async KZt(t){this.pf=t.text,this.L2t("change",!0),await this.bj(Ou.aq.kXt.rq.UXt)}uHt(t){this.pf!==t&&(this.pf=t,this.Qvt())}WXt(){return this.pf}QXt(t){this.PXt!==t&&(this.PXt=t,this.Qvt())}VXt(){return this.PXt}cXt(t){this.tXt!==t&&(this.tXt=t,this.Qvt())}fXt(){return this.tXt}xbt(t){this._yt!==(t=!!t)&&(this._yt=t,this.Qvt())}Gbt(){return this._yt}JXt(t){this.FXt!==(t=!!t)&&(this.FXt=t,this.Qvt())}YXt(){return this.FXt}HXt(t){t=Math.max(+t,-1),this.BXt!==t&&(this.BXt=t,this.Qvt())}qXt(){return this.BXt}ZXt(){Promise.resolve().then(()=>this.Pvt("scroll-to-bottom"))}ib(t){}IT(){return{t:this.pf,p:this.PXt,ti:this.tXt,e:this._yt,r:this.FXt,sp:this.jXt,ml:this.BXt,type:this.Tf,id:this.mf}}_T(t){this.pf=t.t,this.PXt=t.p,this.tXt=t.ti,this._yt=t.e,this.FXt=t.r,this.jXt=t.sp,this.BXt=t.hasOwnProperty("ml")?t.ml:-1,this.Tf=t.type,this.mf=t.id,this.Qvt()}Lnt(t){switch(t){case 0:return this.pf;case 1:return this.PXt;case 2:return this.tXt;case 4:return this._yt;case 5:return this.FXt;case 6:return this.jXt;case 8:return this.Evt}}jnt(t,s){switch(t){case 0:this.pf!==s&&(this.pf=s,this.Qvt());break;case 1:this.PXt!==s&&(this.PXt=s,this.Qvt());break;case 2:this.tXt!==s&&(this.tXt=s,this.Qvt());break;case 4:this._yt!==!!s&&(this._yt=!!s,this.Qvt());break;case 5:this.FXt!==!!s&&(this.FXt=!!s,this.Qvt());break;case 6:this.jXt!==!!s&&(this.jXt=!!s,this.Qvt());break;case 8:this.Evt=!!s}}hvt(){const s=Ou.aq.kXt.qht,t="plugins.textbox";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.pf,F6t:t=>this.rvt(s.yf,t)},{name:t+".properties.enabled.name",value:this._yt,F6t:t=>this.rvt(s.xxt,t)},{name:t+".properties.read-only.name",value:this.FXt,F6t:t=>this.rvt(s.XXt,t)}]}]}g2t(){return self.KXt}},new WeakMap);self.KXt=class extends self.gB{constructor(){super(),Pu.set(this,self.AF.kF().wB())}set text(t){Ru.Ge(t),Pu.get(this).uHt(t)}get text(){return Pu.get(this).WXt()}set placeholder(t){Ru.Ge(t),Pu.get(this).QXt(t)}get placeholder(){return Pu.get(this).VXt()}set MXt(t){Ru.Ge(t),Pu.get(this).cXt(t)}get MXt(){return Pu.get(this).fXt()}set isEnabled(t){Pu.get(this).xbt(t)}get isEnabled(){return Pu.get(this).Gbt()}set isReadOnly(t){Pu.get(this).JXt(t)}get isReadOnly(){return Pu.get(this).YXt()}set maxLength(t){Ru.Se(t),Pu.get(this).HXt(t)}get maxLength(){return Pu.get(this).qXt()}$Xt(){Pu.get(this).ZXt()}}}{const Fu=self.Ps;Fu.aq.kXt.rq={s7t(t,s){return 0===s?Fu.gh(this.pf,t):this.pf===t},UXt(){return!0},iXt(){return!0},zXt(){return!0}}}{const ju=self.Ps;ju.aq.kXt.qht={yf(t){this.uHt(t.toString())},h7t(t){""!==t&&this.uHt(this.WXt()+t)},tKt(t){this.QXt(t)},SXt(t){this.cXt(t)},XXt(t){this.JXt(0===t)},sKt(){this.ZXt()},iKt(t){this.HXt(t)}}}{const Bu=self.Ps;Bu.aq.kXt.Zht={Text(){return this.WXt()},eKt(){return this.qXt()}}}{const zu=self.Ps;zu.zat.MGt=class extends zu.Jvt{constructor(t){super(t)}cn(){super.cn()}}}{const Uu=self.Ps;Uu.zat.MGt.aIt=class extends Uu.Xvt{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const Wu=self.Ps,Qu=self.Ys,Vu=self.vB,Ju=new Set,Yu=(Wu.zat.MGt.Instance=class extends Wu.$vt{constructor(t,s){super(t),this.xxt(!0),s&&(this.xxt(s[0]),this.Ttt(s[1]))}cn(){super.cn()}xxt(t){this.Gi.W_t(!!t)}tc(){return this.Gi.U_t()}Ttt(s){const i=this.Gi.iSt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}Fz(){return this.Gi.iSt().get("solidTags")||Ju}hKt(){return[...this.Fz()].join(" ")}IT(){return{e:this.tc()}}_T(t){this.xxt(t.e)}Lnt(t){if(0===t)return this.tc()}jnt(t,s){0===t&&this.xxt(s)}hvt(){return[{title:"$"+this.EB().ef(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.tc(),F6t:t=>this.xxt(t)},{name:"behaviors.solid.properties.tags.name",value:this.hKt(),F6t:t=>this.Ttt(t)}]}]}g2t(){return self.nKt}},new WeakMap);self.nKt=class extends Vu{constructor(){super(),Yu.set(this,Vu.kF().wB())}set isEnabled(t){Yu.get(this).xxt(!!t)}get isEnabled(){return Yu.get(this).tc()}set tags(t){Qu.Ge(t),Yu.get(this).Ttt(t)}get tags(){return Yu.get(this).hKt()}}}{const Hu=self.Ps;Hu.zat.MGt.rq={tc(){return this.tc()}}}{const qu=self.Ps;qu.zat.MGt.qht={xxt(t){this.xxt(t)},Ttt(t){this.Ttt(t)}}}{const Zu=self.Ps;Zu.zat.MGt.Zht={}}{const Xu=self.Ps;Xu.zat.rKt=class extends Xu.Jvt{constructor(t){super(t)}cn(){super.cn()}}}{const Ku=self.Ps;Ku.zat.rKt.aIt=class extends Ku.Xvt{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const $u=self.Ps,tc=self.Ys,sc=self.vB,ic=($u.zat.rKt.Instance=class extends $u.$vt{constructor(t,s){super(t);const i=this.xk(),e=(this.qGt=0,this.oKt=0,this.Zo=0,this.aKt=!1,this.lKt=!1,this.uKt=!1,this._yt=!0,this.cKt=0,this.fKt=0,this.dKt=i.pT(),this.pKt=i.yT(),this.mKt=i.e4(),this.gKt=0,this.yKt=Math.min(Math.abs(i.pm()),Math.abs(i.Cm())/2),this.MKt=!1,s&&(this.qGt=s[0],this.oKt=s[1],this.Zo=s[2],this.aKt=!!s[3],this.lKt=!!s[4],this.uKt=!!s[5],this._yt=!!s[6]),i.e4());this.cKt=Math.cos(e)*this.qGt,this.fKt=Math.sin(e)*this.qGt,this._yt&&(this.tvt(),this.aKt)&&this.nGt()}cn(){super.cn()}IT(){const t={dx:this.cKt,dy:this.fKt,lx:this.dKt,ly:this.pKt,lka:this.mKt,t:this.gKt};return 0!==this.oKt&&(t.acc=this.oKt),0!==this.Zo&&(t.g=this.Zo),this.uKt&&(t.st=this.uKt),this._yt||(t.e=this._yt),this.aKt&&(t.bos=this.aKt),this.lKt&&(t.sa=this.lKt),t}_T(t){this.cKt=t.dx,this.fKt=t.dy,this.dKt=t.lx,this.pKt=t.ly,this.mKt=t.lka,this.gKt=t.t,this.oKt=t.hasOwnProperty("acc")?t.acc:0,this.Zo=t.hasOwnProperty("g")?t.g:0,this.uKt=!!t.hasOwnProperty("st")&&t.st,this.aKt=!!t.hasOwnProperty("bos")&&t.bos,this.lKt=!!t.hasOwnProperty("sa")&&t.sa,this.xbt(!t.hasOwnProperty("e")||t.e)}NX(){if(this._yt){const h=this.df.xR(this.Gi),n=this.Gi.xk();if(n.e4()!==this.mKt){const t=n.e4();if(this.lKt){const s=$u.xn(0,0,this.cKt,this.fKt);this.cKt=Math.cos(t)*s,this.fKt=Math.sin(t)*s}this.mKt=t}let i=0,e=0;if(0!==this.oKt){let t=$u.xn(0,0,this.cKt,this.fKt),s;s=0===this.cKt&&0===this.fKt?n.e4():$u.Gn(0,0,this.cKt,this.fKt),t+=this.oKt*h,i=Math.cos(s)*this.oKt,e=Math.sin(s)*this.oKt,t<0&&(t=0,i=0,e=0),this.cKt=Math.cos(s)*t,this.fKt=Math.sin(s)*t}if(0!==this.Zo&&(this.fKt+=this.Zo*h,e+=this.Zo),this.dKt=n.pT(),this.pKt=n.yT(),0!==this.cKt||0!==this.fKt){const r=this.cKt*h+.5*i*h*h,o=this.fKt*h+.5*e*h*h,a=$u.xn(0,0,r,o);if(this.wKt(r,o,a),this.gKt+=a,this.lKt&&(0!=r||0!=o)){const l=$u.Gn(0,0,r,o);n.i4(l),this.mKt=n.e4()}n.Zj()}}}wKt(t,s,i){const e=this.xk();if(!this.uKt||i<=this.yKt)e.t5(t,s),e.Zj(),this.uKt&&this.Sj($u.zat.rKt.rq.SKt);else{this.MKt=!1;const h=e.pT(),n=e.yT(),r=h+t,o=n+s,a=$u.Gn(0,0,t,s),l=Math.cos(a)*this.yKt,u=Math.sin(a)*this.yKt,c=Math.floor(i/this.yKt);for(let t=1;t<=c;++t)if(e.Xj(h+l*t,n+u*t),e.Zj(),this.Sj($u.zat.rKt.rq.SKt),this.Gi.KU()||this.MKt)return;e.Xj(r,o),e.Zj(),this.Sj($u.zat.rKt.rq.SKt)}}hGt(){if(this._yt&&this.aKt&&(0!==this.cKt||0!==this.fKt)){const t=this.df.xR(this.Gi),s=this.Gi.xk(),i=this.df.EO(),e=i.dP(this.Gi);if(e){i.qNt(this.Gi,e);const h=$u.xn(0,0,this.cKt,this.fKt),n=i.dLt(this.Gi,this.dKt,this.pKt);this.cKt=Math.cos(n)*h,this.fKt=Math.sin(n)*h,s.t5(this.cKt*t,this.fKt*t),s.Zj(),this.lKt&&(s.i4(n),this.mKt=s.e4(),s.Zj()),i.lLt(this.Gi,this.cKt/h,this.fKt/h,Math.max(2.5*h*t,30))||i.fLt(this.Gi,100)}}}Lnt(t){switch(t){case 0:return this.TKt();case 1:return this.bKt();case 2:return this.xKt();case 4:return this.lKt;case 5:return this.uKt;case 6:return this.Gbt()}}jnt(t,s){switch(t){case 0:this.vKt(s);break;case 1:this.oKt=s;break;case 2:this.Zo=s;break;case 4:this.lKt=!!s;break;case 5:this.uKt=!!s;break;case 6:this.xbt(!!s)}}vKt(t){const s=$u.Gn(0,0,this.cKt,this.fKt);this.cKt=Math.cos(s)*t,this.fKt=Math.sin(s)*t}TKt(){return $u.Un($u.xn(0,0,this.cKt,this.fKt),6)}GKt(t){this.oKt=t}bKt(){return this.oKt}CKt(t){this.Zo=t}xKt(){return this.Zo}IKt(t){const s=$u.xn(0,0,this.cKt,this.fKt);this.cKt=Math.cos(t)*s,this.fKt=Math.sin(t)*s}_Kt(){return $u.Gn(0,0,this.cKt,this.fKt)}EKt(t){this.aKt!==(t=!!t)&&(this.aKt=t,this._yt)&&(this.aKt?this.nGt():this.sGt())}DKt(){return this.aKt}AKt(t){this.gKt=t}NKt(){return this.gKt}xbt(t){this._yt=!!t,this._yt?(this.tvt(),this.aKt&&this.nGt()):(this.F2t(),this.sGt())}Gbt(){return this._yt}hvt(){const t="behaviors.bullet";return[{title:"$"+this.EB().ef(),properties:[{name:t+".debugger.vector-x",value:this.cKt,F6t:t=>this.cKt=t},{name:t+".debugger.vector-y",value:this.fKt,F6t:t=>this.fKt=t},{name:t+".properties.speed.name",value:this.TKt(),F6t:t=>this.vKt(t)},{name:t+".debugger.angle-of-motion",value:$u.Sn(this._Kt())},{name:t+".properties.gravity.name",value:this.xKt(),F6t:t=>this.CKt(t)},{name:t+".properties.acceleration.name",value:this.bKt(),F6t:t=>this.GKt(t)},{name:t+".debugger.distance-travelled",value:this.NKt()},{name:t+".properties.enabled.name",value:this.Gbt(),F6t:t=>this.xbt(t)}]}]}g2t(){return self.LKt}},new WeakMap);self.LKt=class extends sc{constructor(){super(),ic.set(this,sc.kF().wB())}get speed(){return ic.get(this).TKt()}set speed(t){tc.Se(t),ic.get(this).vKt(t)}get acceleration(){return ic.get(this).bKt()}set acceleration(t){tc.Se(t),ic.get(this).GKt(t)}get fqt(){return ic.get(this).xKt()}set fqt(t){tc.Se(t),ic.get(this).CKt(t)}get OKt(){return ic.get(this)._Kt()}set OKt(t){tc.Se(t),ic.get(this).IKt(t)}get RKt(){return ic.get(this).DKt()}set RKt(t){ic.get(this).EKt(!!t)}get kKt(){return ic.get(this).NKt()}set kKt(t){tc.Se(t),ic.get(this).AKt(t)}get isEnabled(){return ic.get(this).Gbt()}set isEnabled(t){ic.get(this).xbt(t)}}}{const ec=self.Ps;ec.zat.rKt.rq={PKt(t,s){const i=Math.hypot(this.cKt,this.fKt);return ec.compare(i,t,s)},FKt(t,s){return ec.compare(this.NKt(),t,s)},SKt(){return!0},tc(){return this.Gbt()}}}{const hc=self.Ps;hc.zat.rKt.qht={jKt(t){this.vKt(t)},i9t(t){this.GKt(t)},e9t(t){this.CKt(t)},BKt(t){this.IKt(hc.wn(t))},mL(t){if(t){const s=t.jTt(this.Gi);if(s){const i=this.Gi.xk(),e=this.df.EO(),h=this.df.xR(this.Gi),n=hc.xn(0,0,this.cKt,this.fKt),r=e.dLt(this.Gi,this.dKt,this.pKt,s);this.cKt=Math.cos(r)*n,this.fKt=Math.sin(r)*n,i.t5(this.cKt*h,this.fKt*h),i.Zj(),this.lKt&&(i.i4(r),this.mKt=i.e4(),i.Zj()),0!==n&&(this.aKt?e.lLt(this.Gi,this.cKt/n,this.fKt/n,Math.max(2.5*n*h,30))||e.fLt(this.Gi,100):e.aLt(this.Gi,this.cKt/n,this.fKt/n,Math.max(2.5*n*h,30),s))}}},zKt(t){this.EKt(t)},UKt(t){this.AKt(t)},xxt(t){this.xbt(t)},WKt(){this.MKt=!0}}}{const nc=self.Ps;nc.zat.rKt.Zht={QKt(){return this.TKt()},VKt(){return this.bKt()},JKt(){return nc.Sn(this._Kt())},YKt(){return this.NKt()},Wqt(){return this.xKt()}}}{const rc=self.Ps;rc.zat.bound=class extends rc.Jvt{constructor(t){super(t)}cn(){super.cn()}}}{const oc=self.Ps;oc.zat.bound.aIt=class extends oc.Xvt{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const ac=self.Ps;ac.zat.bound.Instance=class extends ac.$vt{constructor(t,s){super(t),this.HKt=0,s&&(this.HKt=s[0]),this.ivt()}cn(){super.cn()}IT(){return{m:this.HKt}}_T(t){this.HKt=t.m}$2t(){let t=this.Gi.xk(),s=t.h5(),i=t.hk(),e=!1;0===this.HKt?(t.pT()<0&&(t.mT(0),e=!0),t.yT()<0&&(t.MT(0),e=!0),t.pT()>i.pm()&&(t.mT(i.pm()),e=!0),t.yT()>i.Cm()&&(t.MT(i.Cm()),e=!0)):(s.Cl()<0&&(t.Hnt(-s.Cl()),e=!0),s.Il()<0&&(t.qnt(-s.Il()),e=!0),s._l()>i.pm()&&(t.Hnt(-(s._l()-i.pm())),e=!0),s.El()>i.Cm()&&(t.qnt(-(s.El()-i.Cm())),e=!0)),e&&t.Zj()}Lnt(t){if(0===t)return this.HKt}jnt(t,s){0===t&&(this.HKt=s)}}}{const lc=self.Ps;lc.zat.bound.rq={}}{const uc=self.Ps;uc.zat.bound.qht={}}{const cc=self.Ps;cc.zat.bound.Zht={}}{const fc=self.Ps;fc.zat.qKt=class extends fc.Jvt{constructor(t){super(t)}cn(){super.cn()}}}{const dc=self.Ps;dc.zat.qKt.aIt=class extends dc.Xvt{constructor(t){super(t)}cn(){super.cn()}m2t(){}}}{const pc=self.Ps,mc=self.Ys,gc=self.vB,L=(pc.zat.qKt.Instance=class extends pc.$vt{constructor(t,s){super(t),this.ZKt=!1,this.XKt=!1,this.KKt=!1,this.$Kt=!1,this.t$t=!1,this.s$t=!1,this.i$t=!1,this.e$t=!1,this.h$t=!1,this.cKt=0,this.fKt=0,this.n$t=200,this.oKt=600,this.r$t=500,this.o$t=3,this.a$t=3,this.l$t=!1,this.u$t=!0,this._yt=!0,s&&(this.n$t=s[0],this.oKt=s[1],this.r$t=s[2],this.o$t=s[3],this.a$t=s[4],this.l$t=!!s[5],this.u$t=!!s[6],this._yt=!!s[7]),this._yt&&this.tvt(),this.u$t&&this.c$t()}c$t(){if(!this.v0){const t=this.df.Jf();this.v0=new pc.T0(pc.m0.S0(t,"keydown",t=>this.$Vt(t.data)),pc.m0.S0(t,"keyup",t=>this.t8t(t.data)),pc.m0.S0(t,"window-blur",()=>this.s8t()),pc.m0.S0(t,"keyboard-blur",()=>this.s8t()))}}f$t(){this.v0&&(this.v0.cn(),this.v0=null)}cn(){super.cn()}IT(){return{dx:this.cKt,dy:this.fKt,e:this._yt,ms:this.n$t,acc:this.oKt,dec:this.r$t,d:this.o$t,am:this.a$t,dc:this.u$t,ii:this.t$t}}_T(t){this.cKt=t.dx,this.fKt=t.dy,this.xbt(t.e),this.n$t=t.ms,this.oKt=t.acc,this.r$t=t.dec,this.o$t=t.d,this.a$t=t.am,this.u$t=t.dc,this.t$t=t.ii,this.ZKt=!1,this.XKt=!1,this.KKt=!1,this.$Kt=!1,this.s$t=!1,this.i$t=!1,this.e$t=!1,this.h$t=!1,this.u$t?this.c$t():this.f$t()}$Vt(t){switch(t.key){case"ArrowLeft":this.KKt=!0;break;case"ArrowUp":this.ZKt=!0;break;case"ArrowRight":this.$Kt=!0;break;case"ArrowDown":this.XKt=!0}}t8t(t){switch(t.key){case"ArrowLeft":this.KKt=!1;break;case"ArrowUp":this.ZKt=!1;break;case"ArrowRight":this.$Kt=!1;break;case"ArrowDown":this.XKt=!1}}s8t(){this.ZKt=!1,this.XKt=!1,this.KKt=!1,this.$Kt=!1}NX(){let m=this.df.xR(this.Gi),g=this.df.EO(),t=this.KKt||this.e$t,s=this.$Kt||this.h$t,i=this.ZKt||this.s$t,e=this.XKt||this.i$t;if(this.e$t=!1,this.h$t=!1,this.s$t=!1,this.i$t=!1,this._yt){let p=g.dP(this.Gi);if(!p||(g.qNt(this.Gi,p),g.fLt(this.Gi))){this.t$t&&(t=s=i=e=!1),0===this.o$t?t=s=!1:1===this.o$t&&(i=e=!1),(t=2===this.o$t&&(i||e)?s=!1:t)===s&&(this.cKt<0?this.cKt=Math.min(this.cKt+this.r$t*m,0):0<this.cKt&&(this.cKt=Math.max(this.cKt-this.r$t*m,0))),i===e&&(this.fKt<0?this.fKt=Math.min(this.fKt+this.r$t*m,0):0<this.fKt&&(this.fKt=Math.max(this.fKt-this.r$t*m,0)));let f=0,d=0;if(t&&!s&&(f=0<this.cKt?-(this.oKt+this.r$t):-this.oKt),s&&!t&&(f=this.cKt<0?this.oKt+this.r$t:this.oKt),i&&!e&&(d=0<this.fKt?-(this.oKt+this.r$t):-this.oKt),e&&!i&&(d=this.fKt<0?this.oKt+this.r$t:this.oKt),this.cKt+=f*m,this.fKt+=d*m,0!==this.cKt||0!==this.fKt){let e=Math.hypot(this.cKt,this.fKt),t=Math.atan2(this.fKt,this.cKt),s=this.n$t*Math.cos(t),i=this.n$t*Math.sin(t),h=(e>this.n$t&&(e=this.n$t,this.cKt=s,this.fKt=i),this.Gi.xk()),n=h.pT(),r=h.yT(),o=h.e4(),a=Math.abs(s)*m,l=Math.abs(i)*m,u=pc.yn(this.cKt*m+.5*f*m*m,-a,a),c=pc.yn(this.fKt*m+.5*d*m*m,-l,l);if(this.l$t){if(h.t5(u,c),h.Zj(),p=g.dP(this.Gi)){g.qNt(this.Gi,p);let t=Math.atan2(this.fKt,this.cKt)+Math.PI/2,s=!1,i=(h.pm()+h.Cm())/4;if(g.cLt(this.Gi,Math.cos(t),Math.sin(t),Math.max(2.5*e*m,i))){s=!0;const w=h.pT(),S=h.yT(),T=e*m,b=pc.xn(n,r,w,S);if(1.01*T<b){const x=T/b,v=pc.kt(n,w,x),G=pc.kt(r,S,x);if(h.Xj(v,G),h.Zj(),p=g.dP(this.Gi)){const C=pc.Gn(n,r,w,S)+Math.PI/2,I=Math.cos(C),_=Math.sin(C),E=(h.pm()+h.Cm())/2/10;g.cLt(this.Gi,I,_,Math.max(E,1))||(h.Xj(n,r),h.Zj(),s=!1)}}}if(!s){const D=Math.hypot(u,c),A=-u/D,N=-c/D;this.cKt=0,this.fKt=0,g.lLt(this.Gi,A,N,Math.max(2.5*e*m,i))||(h.Xj(n,r),h.Zj())}}}else h.Hnt(u),h.Zj(),(p=g.dP(this.Gi))&&(g.lLt(this.Gi,this.cKt<0?1:-1,0,Math.max(Math.abs(Math.floor(u)),1))||(h.mT(n),h.Zj()),this.cKt=0,g.qNt(this.Gi,p)),h.qnt(c),h.Zj(),(p=g.dP(this.Gi))&&(g.lLt(this.Gi,0,this.fKt<0?1:-1,Math.max(Math.abs(Math.floor(c)),1))||(h.MT(r),h.Zj()),this.fKt=0,g.qNt(this.Gi,p));const y=pc.Un(this.cKt,6),M=pc.Un(this.fKt,6);0===y&&0===M||!this.Gi.G3().e3()||(1===this.a$t?h.i4(pc.wn(90*Math.round(pc.Sn(Math.atan2(M,y))/90))):2===this.a$t?h.i4(pc.wn(45*Math.round(pc.Sn(Math.atan2(M,y))/45))):3===this.a$t&&h.i4(Math.atan2(M,y))),h.Zj(),h.e4()!=o&&(p=g.dP(this.Gi))&&(h.i4(o),h.Zj(),g.qNt(this.Gi,p))}}}}Lnt(t){switch(t){case 0:return this.d$t();case 1:return this.bKt();case 2:return this.p$t();case 3:return this.o$t;case 4:return this.a$t;case 5:return this.l$t;case 6:return this.m$t();case 7:return this.Gbt()}}jnt(t,s){switch(t){case 0:this.g$t(s);break;case 1:this.GKt(s);break;case 2:this.y$t(s);break;case 3:this.o$t=s;break;case 4:this.a$t=s;break;case 5:this.l$t=!!s;break;case 6:this.M$t(!!s);break;case 7:this.xbt(!!s)}}w$t(){this.cKt=0,this.fKt=0}S$t(){this.cKt*=-1,this.fKt*=-1}T$t(){const t=Math.hypot(this.cKt,this.fKt);t>this.n$t&&this.vKt(t)}vKt(t){t=pc.yn(t,0,this.n$t);const s=Math.atan2(this.fKt,this.cKt);this.cKt=t*Math.cos(s),this.fKt=t*Math.sin(s)}TKt(){return Math.hypot(this.cKt,this.fKt)}g$t(t){this.n$t=Math.max(t,0)}d$t(){return this.n$t}GKt(t){this.oKt=Math.max(t,0)}bKt(){return this.oKt}y$t(t){this.r$t=Math.max(t,0)}p$t(){return this.r$t}b$t(){return Math.atan2(this.fKt,this.cKt)}x$t(t){this.cKt=t,this.T$t()}v$t(){return this.cKt}G$t(t){this.fKt=t,this.T$t()}C$t(){return this.fKt}I$t(t){if(this._yt)switch(t){case 0:this.e$t=!0;break;case 1:this.h$t=!0;break;case 2:this.s$t=!0;break;case 3:this.i$t=!0}}M$t(t){this.u$t!==(t=!!t)&&(this.u$t=t,this.u$t?this.c$t():(this.f$t(),this.s8t()))}m$t(){return this.u$t}_$t(t){this.t$t=!!t}E$t(){return this.t$t}xbt(t){this._yt=!!t,this._yt?this.tvt():(this.e$t=!1,this.h$t=!1,this.s$t=!1,this.i$t=!1,this.F2t())}Gbt(){return this._yt}D$t(t){this.l$t=!!t}A$t(){return this.l$t}hvt(){const t="behaviors.eightdir";return[{title:"$"+this.EB().ef(),properties:[{name:t+".debugger.vector-x",value:this.v$t(),F6t:t=>this.x$t(t)},{name:t+".debugger.vector-y",value:this.C$t(),F6t:t=>this.G$t(t)},{name:t+".debugger.speed",value:this.TKt(),F6t:t=>this.vKt(t)},{name:t+".debugger.angle-of-motion",value:pc.Sn(this.b$t())},{name:t+".properties.max-speed.name",value:this.d$t(),F6t:t=>this.g$t(t)},{name:t+".properties.acceleration.name",value:this.bKt(),F6t:t=>this.GKt(t)},{name:t+".properties.deceleration.name",value:this.p$t(),F6t:t=>this.y$t(t)},{name:t+".properties.allow-sliding.name",value:this.A$t(),F6t:t=>this.D$t(t)},{name:t+".properties.enabled.name",value:this.Gbt(),F6t:t=>this.xbt(t)}]}]}g2t(){return self.N$t}},new WeakMap),yc=new Map([["left",0],["right",1],["up",2],["down",3]]);self.N$t=class extends gc{constructor(){super(),L.set(this,gc.kF().wB())}stop(){L.get(this).w$t()}reverse(){L.get(this).S$t()}L$t(t){mc.Ge(t);const s=yc.get(t);if("number"!=typeof s)throw new Error("invalid control");L.get(this).I$t(s)}get speed(){return L.get(this).TKt()}set speed(t){mc.Se(t),L.get(this).vKt(t)}get O$t(){return L.get(this).d$t()}set O$t(t){mc.Se(t),L.get(this).g$t(t)}get acceleration(){return L.get(this).bKt()}set acceleration(t){mc.Se(t),L.get(this).GKt(t)}get R$t(){return L.get(this).p$t()}set R$t(t){mc.Se(t),L.get(this).y$t(t)}get k$t(){return L.get(this).v$t()}set k$t(t){mc.Se(t),L.get(this).x$t(t)}get P$t(){return L.get(this).C$t()}set P$t(t){mc.Se(t),L.get(this).G$t(t)}F$t(t,s){mc.Se(t),mc.Se(s);const i=L.get(this);i.x$t(t),i.G$t(s)}j$t(){const t=L.get(this);return[t.v$t(),t.C$t()]}get B$t(){return L.get(this).m$t()}set B$t(t){L.get(this).M$t(!!t)}get z$t(){return L.get(this).E$t()}set z$t(t){L.get(this)._$t(!!t)}get U$t(){return L.get(this).A$t()}set U$t(t){L.get(this).D$t(!!t)}get isEnabled(){return L.get(this).Gbt()}set isEnabled(t){L.get(this).xbt(!!t)}}}{const Mc=self.Ps;Mc.zat.qKt.rq={W$t(){return 1e-10<this.TKt()},PKt(t,s){return Mc.compare(this.TKt(),t,s)},tc(){return this.Gbt()},Q$t(){return this.A$t()}}}{const wc=self.Ps;wc.zat.qKt.qht={Cz(){this.w$t()},V$t(){this.S$t()},J$t(t){this._$t(t)},jKt(t){this.vKt(t)},Y$t(t){this.g$t(t)},i9t(t){this.GKt(t)},H$t(t){this.y$t(t)},q$t(t){this.I$t(t)},xxt(t){this.xbt(t)},Z$t(t){this.x$t(t)},X$t(t){this.G$t(t)},K$t(t){this.M$t(!!t)},$$t(t){this.D$t(t)}}}{const Sc=self.Ps;Sc.zat.qKt.Zht={QKt(){return this.TKt()},tts(){return this.d$t()},VKt(){return this.bKt()},sts(){return this.p$t()},its(){return Sc.Sn(this.b$t())},ets(){return this.v$t()},hts(){return this.C$t()}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.UMt=[()=>"Buttons",()=>"Buttons 2",()=>"Animation 2",()=>"Default",()=>0,()=>"",()=>"Blue",()=>1,()=>"Green",()=>3,()=>"Yellow",()=>2,()=>"Red",()=>"Buttons 3",t=>{const s=t.KMt(0);return()=>s.vMt()},()=>"mysave",()=>"Maps",()=>"Controller Plug In",()=>"Custom Game Settings",()=>"0",()=>"1",t=>{const s=t.KMt(0);return()=>i("Game Time: ",s.vMt())},()=>"XP Bar",()=>"XP Requirements 2",t=>{const s=t.KMt(0).zMt();return()=>s.Tet()},()=>50,()=>5,()=>80,()=>6,()=>9,()=>100,()=>10,()=>15,()=>150,()=>16,()=>24,()=>200,()=>40,()=>300,t=>{const s=t.KMt(0).zMt();return()=>i("Level ",s.Tet())},()=>"Controller Cursor",()=>"Click on button",()=>"Keyboard Controls",t=>{const s=t.KMt(0).zMt();return()=>-s.Tet()},()=>-.5,()=>.5,()=>"Shooting/Mines/Combat",()=>500,()=>608,()=>94,()=>325,()=>"Other",t=>{const s=t.KMt(0).zMt();return()=>i("Time Left: ",s.Tet())},t=>{const s=t.KMt(0).zMt();return()=>i("P1: ",s.Tet())},t=>{const s=t.KMt(0).zMt();return()=>i("P2: ",s.Tet())},t=>{const s=t.KMt(0).zMt();return()=>i("P3: ",s.Tet())},t=>{const s=t.KMt(0).zMt();return()=>i("P4: ",s.Tet())},()=>"Controller Controls",()=>"Forcefield",()=>.66,()=>"Tank Colors",()=>"Level",()=>"Leveling Rewards",()=>"XP Requirements",()=>"Texts",t=>{const s=t.KMt(0).zMt();return()=>"MAP: "+s.Tet()},()=>1.2,()=>"PARTY MODE",()=>"DUEL MODE",()=>"Background",()=>"Greenfield",()=>"Go to",()=>25,()=>"Loading....",()=>1.5,t=>{const s=t.KMt(0).MMt();return()=>Math.floor(s(1,10))},()=>"Tankzone 1 was one of the biggest tank games on gamegen.games.",()=>"The dev of Tankzone recommends a controller for the best experience.",()=>"This game is in HD!",()=>4,()=>"Don't like your tank color? Choose between the other 4 in Tank Options.",()=>"Why are you reading this?",()=>"Currently while singleplayer won't work, survival and training range are coming in the later editions.",()=>7,()=>"Greenfield is very green.",()=>8,()=>"Dispite the game's mulitplayer roots being from the gamegen tutorial, a lot of code is unique to this game.",()=>"Press V to shoot, dummy.",()=>"The developer was only 13 when Tankzone 1 released!"]}var t=self.Ps;self.x4t=function(){return[t.aq.Nht,t.aq.LWt,t.aq.gamepad,t.aq.Keyboard,t.aq.Audio,t.zat.MGt,t.aq.Text,t.zat.rKt,t.zat.bound,t.aq.D7t,t.aq.ZZt,t.aq.CXt,t.aq.kXt,t.zat.qKt,t.aq.oq.rq.ppt,t.aq.LWt.rq.CQt,t.aq.Nht.qht.j6t,t.aq.LWt.rq.yQt,t.aq.Audio.qht.Play,t.aq.oq.qht.F5t,t.aq.Nht.rq.KTt,t.aq.oq.qht.uBt,t.aq.ZZt.Zht.xXt,t.aq.oq.qht.sBt,t.aq.gamepad.rq.cVt,t.aq.Nht.qht.z4,t.aq.oq.qht.Pr,t.aq.gamepad.rq.fVt,t.aq.Keyboard.rq.e8t,t.aq.kXt.rq.s7t,t.aq.kXt.Zht.Text,t.aq.Text.qht.z4,t.aq.kXt.qht.yf,t.aq.oq.rq.i5t,t.aq.Text.qht.yf,t.aq.oq.rq.f5t,t.aq.oq.qht.j5t,t.aq.oq.rq.c5t,t.aq.CXt.qht.LXt,t.aq.CXt.qht.TXt,t.aq.gamepad.rq.gVt,t.aq.gamepad.rq.MVt,t.aq.gamepad.rq.wVt,t.zat.qKt.qht.q$t,t.aq.oq.qht.mpt,t.aq.Keyboard.rq.VVt,t.aq.Nht.qht.lTt,t.aq.Nht.qht.GTt,t.aq.Nht.qht.vTt,t.aq.Nht.rq.Cbt,t.aq.Nht.qht.lWt,t.aq.Nht.qht.zbt,t.aq.Nht.rq.Ibt,t.aq.Nht.qht.Ubt,t.aq.Nht.rq.HTt,t.aq.Nht.qht.gWt,t.aq.Nht.qht.kbt,t.aq.gamepad.qht.IVt,t.aq.Nht.qht.nTt,t.aq.oq.rq.d5t,t.aq.oq.rq.h5t,t.aq.oq.qht.B5t,t.aq.Nht.qht.oTt,t.aq.oq.rq.nq,t.aq.Text.qht.n7t,t.aq.oq.rq.e5t,t.aq.oq.Zht.random]},self.k4t=[{nts:0},{rts:0},{ots:0},{ats:0},{lts:0},{uts:0},{cts:0},{fts:0},{dts:0},{pts:0},{gts:0},{yts:0},{Mts:0},{wts:0},{Sts:0},{LWt:0},{Gamepad:0},{Keyboard:0},{Tts:0},{Audio:0},{bts:0},{xts:0},{vts:0},{Gts:0},{Cts:0},{rKt:0},{Its:0},{_ts:0},{Ets:0},{Dts:0},{Ats:0},{Nts:0},{Lts:0},{Ots:0},{Rts:0},{kts:0},{Pts:0},{Fts:0},{jts:0},{Bts:0},{zts:0},{Uts:0},{Wts:0},{Qts:0},{Vts:0},{Jts:0},{Yts:0},{Hts:0},{qts:0},{Zts:0},{Xts:0},{Kts:0},{$ts:0},{Text:0},{tss:0},{sss:0},{iss:0},{ess:0},{hss:0},{nss:0},{rss:0},{oss:0},{ass:0},{lss:0},{uss:0},{css:0},{fss:0},{Nht:0},{dss:0},{pss:0},{mss:0},{gss:0},{yss:0},{Mss:0},{wss:0},{Sss:0},{Tss:0},{bss:0},{xss:0},{vss:0},{Gss:0},{Css:0},{Iss:0},{_ss:0},{"8Direction":0},{Ess:0},{Dss:0},{Ass:0},{Nss:0},{Lss:0},{Oss:0},{DO:0},{Map:0},{Rss:0},{kss:0},{Pss:0},{Fss:0},{jss:0},{Bss:0},{zss:0},{Uss:0},{Wss:0},{Qss:0},{Vss:0},{Jss:0},{Yss:0},{Hss:0},{qss:0},{Zss:0},{Xss:0},{Kss:0},{$ss:0}],self.tis={nts:class extends self.Q6t{},rts:class extends self.Q6t{},ots:class extends self.Q6t{},ats:class extends self.Q6t{},lts:class extends self.Q6t{},uts:class extends self.Q6t{},cts:class extends self.Q6t{},fts:class extends self.Q6t{},dts:class extends self.Q6t{},pts:class extends self.Q6t{},gts:class extends self.Q6t{},yts:class extends self.Q6t{},Mts:class extends self.Q6t{},wts:class extends self.Q6t{},Sts:class extends self.Q6t{},LWt:class extends self.AF{},Gamepad:class extends self.AF{},Keyboard:class extends self.AF{},Tts:class extends self.Q6t{},Audio:class extends self.AF{},bts:class extends self.Q6t{},vts:class extends self.Q6t{},Gts:class extends self.zHt{},Cts:class extends self.Q6t{},Its:class extends self.Q6t{},_ts:class extends self.zHt{},Ets:class extends self.zHt{},Dts:class extends self.zHt{},Ats:class extends self.zHt{},Rts:class extends self.Q6t{},kts:class extends self.Q6t{},Pts:class extends self.Q6t{},Fts:class extends self.Q6t{},jts:class extends self.Q6t{},Bts:class extends self.Q6t{},zts:class extends self.Q6t{},Uts:class extends self.Q6t{},Wts:class extends self.Q6t{},Qts:class extends self.Q6t{},Vts:class extends self.Q6t{},Jts:class extends self.Q6t{},Yts:class extends self.Q6t{},Hts:class extends self.Q6t{},qts:class extends self.tqt{},Zts:class extends self.tqt{},Xts:class extends self.Q6t{},Kts:class extends self.Q6t{},$ts:class extends self.mXt{},Text:class extends self.zHt{},tss:class extends self.Q6t{},sss:class extends self.zHt{},iss:class extends self.zHt{},ess:class extends self.Q6t{},hss:class extends self.DXt{},nss:class extends self.Q6t{},rss:class extends self.Q6t{},oss:class extends self.Q6t{},ass:class extends self.zHt{},lss:class extends self.zHt{},uss:class extends self.KXt{},css:class extends self.zHt{},fss:class extends self.Q6t{},Nht:class extends self.Q6t{},dss:class extends self.Q6t{},pss:class extends self.Q6t{},mss:class extends self.Q6t{},gss:class extends self.Q6t{},yss:class extends self.Q6t{},Mss:class extends self.Q6t{},wss:class extends self.Q6t{},Sss:class extends self.Q6t{},Tss:class extends self.zHt{},bss:class extends self.mXt{},xss:class extends self.DXt{},vss:class extends self.zHt{},Gss:class extends self.zHt{},Css:class extends self.zHt{},Iss:class extends self.zHt{},_ss:class extends self.zHt{},Ess:class extends self.Q6t{},Dss:class extends self.Q6t{},Ass:class extends self.Q6t{},Nss:class extends self.Q6t{},Lss:class extends self.zHt{},Oss:class extends self.zHt{},DO:class extends self.Q6t{}};