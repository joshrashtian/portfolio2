import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let O=function(t){vh=t},L=function(t){return t*Oh},B=function(t,s){return Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new vh(4);return vh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},U=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},H=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},X=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new vh(6);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new vh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new vh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},St=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Mt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=Mh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=Mh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=Mh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new vh(9);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Rt=function(t){var s=new vh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Et=function(t,s,i,e,h,r,n,o,a){var l=new vh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},Pt=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},kt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],S=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+S*n+i*l,t[7]=y*h+S*o+i*u,t[8]=y*r+S*a+i*s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-S*(c=c*s-d*m)+w*T+b*(u=u*s-d*p)-M*G+v*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-n*f-l*G)*d,t[2]=(n*c-o*u+l*x)*d,t[3]=(h*c-e*f-r*T)*d,t[4]=(i*f-h*u+r*G)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*v-g*M+s*b)*d,t[7]=(g*w-p*v-s*S)*d,t[8]=(p*M-m*w+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Mh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Mh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Mh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Mh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new vh(16);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new vh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new vh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,R=y*C-S*I+w*_+b*T-M*G+v*x;return R?(t[0]=(o*C-a*I+l*_)*(R=1/R),t[1]=(h*I-e*C-r*_)*R,t[2]=(m*v-g*M+s*b)*R,t[3]=(f*M-c*v-d*b)*R,t[4]=(a*T-n*C-l*G)*R,t[5]=(i*C-h*T+r*G)*R,t[6]=(g*w-p*v-s*S)*R,t[7]=(u*v-f*w+d*S)*R,t[8]=(n*I-o*T+l*x)*R,t[9]=(e*T-i*I-r*x)*R,t[10]=(p*M-m*w+s*y)*R,t[11]=(c*w-u*M-d*y)*R,t[12]=(o*G-n*_-a*x)*R,t[13]=(i*_-e*G+h*x)*R,t[14]=(m*S-p*b-g*y)*R,t[15]=(u*b-c*S+f*y)*R,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*v-g*M+s*b,t[3]=f*M-c*v-d*b,t[4]=a*T-n*C-l*G,t[5]=i*C-h*T+r*G,t[6]=g*w-p*v-s*S,t[7]=u*v-f*w+d*S,t[8]=n*I-o*T+l*x,t[9]=e*T-i*I-r*x,t[10]=p*M-m*w+s*y,t[11]=c*w-u*M-d*y,t[12]=o*G-n*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*S-p*b-g*y,t[15]=u*b-c*S+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,S=a*f-l*c;return t[7]*(s*S-i*y+e*g)-t[3]*(h*S-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],S=i[0],w=i[1],b=i[2],M=i[3];return t[0]=S*e+w*o+b*c+M*m,t[1]=S*h+w*a+b*f+M*g,t[2]=S*r+w*l+b*d+M*y,t[3]=S*n+w*u+b*p+M*s,t[4]=(S=i[4])*e+(w=i[5])*o+(b=i[6])*c+(M=i[7])*m,t[5]=S*h+w*a+b*f+M*g,t[6]=S*r+w*l+b*d+M*y,t[7]=S*n+w*u+b*p+M*s,t[8]=(S=i[8])*e+(w=i[9])*o+(b=i[10])*c+(M=i[11])*m,t[9]=S*h+w*a+b*f+M*g,t[10]=S*r+w*l+b*d+M*y,t[11]=S*n+w*u+b*p+M*s,t[12]=(S=i[12])*e+(w=i[13])*o+(b=i[14])*c+(M=i[15])*m,t[13]=S*h+w*a+b*f+M*g,t[14]=S*r+w*l+b*d+M*y,t[15]=S*n+w*u+b*p+M*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,S,w,b,M,v,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<Mh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],S=G*T*(h=1-i)-e*_,w=T*T*h+i,b=e*T*h+G*_,M=G*e*h+T*_,v=T*e*h-G*_,x=e*e*h+i,t[0]=r*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*S+l*w+d*b,t[5]=n*S+u*w+p*b,t[6]=o*S+c*w+m*b,t[7]=a*S+f*w+g*b,t[8]=r*M+l*v+d*x,t[9]=n*M+u*v+p*x,t[10]=o*M+c*v+m*x,t[11]=a*M+f*v+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Mh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vs=function(t,s){var i=new vh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new vh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,S=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=S,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(S*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Rs=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},As=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Es=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mh&&Math.abs(l-d)<Mh&&Math.abs(s-i)<Mh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Ps=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},ks=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ds=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Os=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],S=s[1],w=s[2],b=s[3],M=s[4],v=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],R=s[12],A=s[13],E=s[14],s=s[15];return Math.abs(i-y)<=Mh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-S)<=Mh*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(h-w)<=Mh*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-b)<=Mh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-M)<=Mh*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-v)<=Mh*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=Mh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=Mh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=Mh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=Mh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=Mh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-R)<=Mh*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=Mh*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-E)<=Mh*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new vh(3);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new vh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new vh(3);return e[0]=t,e[1]=s,e[2]=i,e},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},S=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(S(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*kh()*Math.PI,e=2*kh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Si=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&S(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},vi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Mh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Mh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ri=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ai=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ei=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Pi=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},ki=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Di=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Oi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Bi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ni=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},M=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},v=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ui=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Hi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*kh()-1)*i+(e=2*kh()-1)*e););for(;1<=(o=(h=2*kh()-1)*h+(r=2*kh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},A=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return A(t,s),Hh(t,t,i),R(t,t),t},E=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=kh(),i=kh(),e=kh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},P=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Mh},ue=function(){var t=new vh(8);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new vh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new vh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new vh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new vh(3));return a(e,s),F(t,i,e),t},k=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Se=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Me=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},ve=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<Mh?k(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Re=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ae=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Ee=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Pe=function(t,s,i,e){var h=1-e;return Yh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},ke=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},De=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},Oe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Be=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=Mh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Mh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Mh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Mh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},D=function(){var t=new vh(2);return vh!=Float32Array&&(t[0]=0,t[1]=0),t},Ne=function(t){var s=new vh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new vh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*kh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Sh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,S,w,b,x,G,T,_,I,C,R,A,E,P,F,k,D,Mh=1e-6,vh="undefined"!=typeof Float32Array?Float32Array:Array,kh=Math.random,Dh="zyx",Oh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:Mh,get S(){return vh},M:kh,G:Dh,T:O,_:L,equals:B},Bh=Object.freeze({__proto__:null,create:N,clone:W,I:j,identity:V,C:U,set:H,R:z,A:J,P:q,F:$,multiply:t,rotate:X,scale:Y,D:K,O:Z,L:Q,B:tt,N:st,add:it,W:s,j:et,equals:ht,V:rt,U:nt,mul:t,sub:s}),Nh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,C:ct,set:ft,A:dt,F:pt,multiply:i,rotate:mt,scale:gt,translate:yt,D:St,O:wt,H:bt,L:Mt,B:vt,add:xt,W:e,V:Gt,U:Tt,j:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,J:Ct,clone:Rt,I:At,C:Et,set:Pt,identity:Ft,R:kt,A:Dt,P:Ot,F:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,H:jt,D:Vt,O:Ut,$:Ht,X:zt,Y:Jt,K:qt,L:$t,B:Xt,add:Yt,W:n,V:Kt,U:Zt,j:Qt,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:hs,set:rs,identity:p,R:ns,A:os,P:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,tt:ps,it:ms,H:gs,O:ys,D:Ss,et:ws,ht:bs,nt:Ms,ot:f,lt:vs,ut:a,ct:d,dt:l,gt:xs,yt:Gs,St:Ts,X:_s,bt:Is,Mt:u,perspective:u,vt:Cs,xt:Rs,Gt:c,ortho:c,Tt:As,_t:Es,It:Ps,L:Fs,B:ks,add:Ds,W:Os,V:Ls,U:Bs,j:Ns,equals:Ws,mul:o,sub:Os}),Xh=Js,Zh=qs,Uh=$s,Qh=ii,tr=ei,jh=Vs,sr=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,C:g,I:Us,set:Hs,add:zs,W:Js,multiply:qs,Ct:$s,ceil:Xs,floor:Ys,min:Ks,max:Zs,round:Qs,scale:ti,Rt:si,At:ii,Et:ei,Pt:hi,Ft:ri,inverse:ni,normalize:y,kt:S,Dt:w,Ot:oi,Lt:ai,Bt:li,Nt:ui,random:ci,Wt:fi,jt:di,Vt:pi,Z:mi,tt:gi,it:yi,angle:Si,Ut:wi,L:bi,j:Mi,equals:vi,sub:Xh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:jh,qt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Xh=Ci,Zh=Ri,Uh=Ai,Qh=Bi,tr=Ni,sr=M,ir=v,Ph=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,C:Gi,I:Ti,set:_i,add:Ii,W:Ci,multiply:Ri,Ct:Ai,ceil:Ei,floor:Pi,min:Fi,max:ki,round:Di,scale:Oi,Rt:Li,At:Bi,Et:Ni,length:M,Pt:v,Ft:Wi,inverse:ji,normalize:Vi,kt:x,Dt:Ui,Ot:Hi,random:zi,Wt:Ji,Vt:qi,Ut:$i,L:Xi,j:Yi,equals:Ki,sub:Xh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:sr,qt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ph[0]=t[n],Ph[1]=t[n+1],Ph[2]=t[n+2],Ph[3]=t[n+3],h(Ph,Ph,r),t[n]=Ph[0],t[n+1]=Ph[1],t[n+2]=Ph[2],t[n+3]=Ph[3];return t}}),Xh=xi,Zh=Gi,Uh=Ti,Qh=_i,tr=Ii,sr=se,Hh=Oi,zh=x,ir=Hi,er=Jh=M,hr=qh=v,$h=Vi,rr=Yi,Rh=m(),Ah=g(1,0,0),Eh=g(0,1,0),nr=function(t,s,i){var e=S(s,i);return e<-.999999?(w(Rh,Ah,s),jh(Rh)<1e-6&&w(Rh,Eh,s),y(Rh,Rh),T(t,Rh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Rh,s,i),t[0]=Rh[0],t[1]=Rh[1],t[2]=Rh[2],t[3]=1+e,$h(t,t))},Ih=G(),Ch=G(),or=function(t,s,i,e,h,r){return E(Ih,s,h,r),E(Ch,i,e,r),E(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Xh=Object.freeze({__proto__:null,create:G,identity:Zi,$t:T,Xt:Qi,Yt:te,multiply:se,Z:_,tt:I,it:C,Kt:ie,exp:R,Zt:A,pow:ee,Lt:E,random:he,A:re,Qt:ne,ts:P,es:oe,L:ae,clone:Xh,C:Zh,I:Uh,set:Qh,add:tr,mul:sr,scale:Hh,kt:zh,Ot:ir,length:Jh,Jt:er,Pt:qh,qt:hr,normalize:$h,j:rr,equals:le,hs:nr,rs:or,ns:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],$h(t,P(t,_h))}}),Yh=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,C:fe,os:de,ot:F,H:pe,D:me,J:ge,I:k,identity:ye,set:Se,ls:Uh,us:we,ds:Uh,gs:be,ut:Me,translate:ve,Z:xe,tt:Ge,it:Te,ys:_e,Ss:Ie,ws:Ce,add:Re,multiply:Ae,mul:Ae,scale:Ee,kt:Yh,Ot:Pe,A:Fe,Qt:ke,length:Jh,Jt:Jh,Pt:Kh,qt:Zh,normalize:De,L:Oe,j:Le,equals:Be}),tr=ih,sr=He,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Th=D(),or=Object.freeze({__proto__:null,create:D,clone:Ne,C:We,I:je,set:Ve,add:Ue,W:He,multiply:ze,Ct:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ke,scale:Ze,Rt:Qe,At:th,Et:sh,length:ih,Pt:eh,Ft:hh,inverse:rh,normalize:nh,kt:oh,Dt:ah,Ot:lh,random:uh,bs:ch,Ms:fh,jt:dh,Wt:ph,rotate:mh,angle:gh,Ut:yh,L:Sh,j:wh,equals:bh,Jt:tr,sub:sr,mul:ir,div:er,Ht:hr,zt:rr,qt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Th[0]=t[n],Th[1]=t[n+1],h(Th,Th,r),t[n]=Th[0],t[n+1]=Th[1];return t}}),globalThis.vs=Lh,globalThis.vs.xs=Bh,globalThis.vs.Gs=Nh,globalThis.vs.Ts=Wh,globalThis.vs._s=xh,globalThis.vs.Is=Xh,globalThis.vs.Cs=Qh,globalThis.vs.Rs=or,globalThis.vs.As=Gh,globalThis.vs.Es=Vh}var Th,_h,Ih,Ch,Rh,Ah,Eh,Ph,Fh,Mh,vh,kh,Dh,Oh,Lh,Bh,Nh,Wh,xh,jh,Gh,Vh,Uh,Hh,zh,Jh,qh,$h,Xh,Yh,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,k,D,O,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=D,(r=k)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},R=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},A=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=O,r=L;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},E=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(A(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},P=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var M=0;M<t.length;++M)if(A(w,M)){i.push(w[M]);for(var u=c=Number.MAX_VALUE,v=0;v<t.length;++v)x(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M-1),C(w,M),C(w,v-1))&&(l=P(C(w,M-1),C(w,M),C(w,v),C(w,v-1)),T(C(w,M+1),C(w,M),l))&&(f=I(w[M],l))<c&&(c=f,a=l,m=v),x(C(w,M+1),C(w,M),C(w,v+1))&&_(C(w,M+1),C(w,M),C(w,v))&&(l=P(C(w,M+1),C(w,M),C(w,v),C(w,v+1)),x(C(w,M-1),C(w,M),l))&&(f=I(w[M],l))<u&&(u=f,o=l,p=v);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),M<p?(R(y,w,M,p+1),y.push(l),S.push(l),0!==m&&R(S,w,m,w.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,w.length),R(y,w,0,p+1),y.push(l),S.push(l),R(S,w,m,M+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(v=m;v<=p;++v)G(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M+1),C(w,M),C(w,v))&&(f=I(C(w,M),C(w,v)))<d&&E(w,M,v)&&(d=f,g=v%t.length);M<g?(R(y,w,M,g+1),0!==g&&R(S,w,g,b.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,b.length),R(y,w,0,g+1),R(S,w,g,M+1))}return y.length<S.length?(F(y,s,i,e,h,r,n),F(S,s,i,e,h,r,n)):(F(S,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,r,I,C,n,R,l,A,u,E,c,f,d,P,F,m,g,k=[],D=[],O=[],L=[],self.Ps={Fs:s,ks:F,Ds:i,Os:e,Ls:p,Bs:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Ns=class{constructor(){throw TypeError("static class can't be instantiated")}static Ws(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Vs(){t=!0}static Us(){return t}static Hs(){s=!0}static zs(){return s}static Js(t){i=t}static qs(){return i}static $s(){return"final"===i}};r.isDebug=!1,r.Xs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ys={}}{const s=self.Ns;s.Ks=class{constructor(t){this.Zs=t,this.Qs=new Map,this.ti()}ti(){let t=this.Zs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.si(i)}si(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Qs.set(i,e)}else this.Qs.set(t,null)}ei(){for(const t of this.Qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}hi(t){return this.Qs.has(t)}ri(t){const s=this.Qs.get(t);return void 0===s?null:s}ni(){history.replaceState("",document.title,location.pathname+location.search)}oi(t){this.Zs=t,this.Qs.clear(),this.ti()}},s.ai=new s.Ks(location.search),s.li=new s.Ks(location.hash),s.ai.hi("perf")&&(s.ci=!0),"dev"!==s.ai.ri("mode")&&s.Js("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ns,W="(unknown)",j=(a.fi={di:W,mi:W,gi:W,yi:W,Si:NaN,wi:W,bi:"browser",Mi:!0,vi:!1,xi:!1,Gi:!1,Ti:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=H.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.fi.gi="Chromium",a.fi.yi=h),a.fi.gi=s||W,a.fi.yi=i||W,a.fi.wi=e||W};s,a.fi.di=U.platform,a.fi.vi=U.mobile,a.fi.Mi=!a.fi.vi;const H=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.fi.Ti=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.fi.di?a.fi.mi=e(t.platformVersion):a.fi.mi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(V);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.fi.di="Windows";const s=t[1];a.fi.mi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.fi.di="macOS",a.fi.mi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.fi.di="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.fi.di="Linux"}),t(/android/i,()=>{a.fi.di="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.fi.di="Android",a.fi.mi=t[1]}),a.fi.di===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.fi.di="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.fi.di="iOS",a.fi.mi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(V),q=/chromium\//i.test(V),$=/edg\//i.test(V),X=/OPR\//.test(V),Y=/nwjs/i.test(V),K=/safari\//i.test(V),Z=/webkit/i.test(V),Q=($||X||t(/chrome\/([\d\.]+)/i,t=>{a.fi.gi="Chrome",a.fi.yi=t[1],a.fi.wi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.fi.gi="Edge",a.fi.yi=t[1],a.fi.wi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.fi.gi="Opera",a.fi.yi=t[1],a.fi.wi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.fi.gi="Chromium",a.fi.yi=t[1],a.fi.wi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.fi.gi="NW.js",a.fi.yi=t[1],a.fi.wi="Chromium",a.fi.bi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.fi.gi="Firefox",a.fi.yi=t[1],a.fi.wi="Gecko"}),!K||J||q||$||X||Y||(a.fi.gi="Safari",a.fi.wi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.fi.yi=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.fi.gi="Chrome for iOS",a.fi.yi=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.fi.gi="Firefox for iOS",a.fi.yi=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.fi.gi="Edge for iOS",a.fi.yi=t[1]})),a.fi.wi===W&&Z&&(a.fi.wi="WebKit"),"Android"===a.fi.di&&"Safari"===a.fi.gi&&(a.fi.gi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.fi.di)||"nwjs"===a.fi.bi;a.fi.Mi=tt,a.fi.vi=!tt}"Chrome"===a.fi.gi&&"browser"===a.fi.bi&&/wv\)/.test(V)&&(a.fi.bi="webview"),"nwjs"!==a.fi.bi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.fi.bi="webapp"),a.fi.Si=parseFloat(a.fi.yi);const i="macOS"===a.fi.di&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.fi.di="iOS",a.fi.mi=a.fi.yi,a.fi.Mi=!1,a.fi.vi=!0,a.fi.Gi=!0),a.fi.xi="macOS"===a.fi.di||"iOS"===a.fi.di}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),B(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self._i=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self._i,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Ii=t,this.Ci=!this.Ii,this.Ci||"undefined"!=typeof indexedDB||(this.Ci=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ri=new Map}Ai(t){if(!this.Ci)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ci=!0;break}}async Ei(t){const s=this.Ri.get(t),i=await h(s);return void 0===i?null:i}async Pi(t,s){s=await h(s),this.Ri.set(t,s)}Fi(t){this.Ri.delete(t)}ki(){this.Ri.clear()}Di(){return Array.from(this.Ri.keys())}Oi(){return this.Ci}Li(){return this.Ri}Bi(t){this.Ri=t}async getItem(s,t){if(e(t),this.Ci)return this.Ei(s);let i;try{i=await this.Ii.get(s)}catch(t){return this.Ai(t),this.Ci?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ci)await this.Pi(s,i);else try{await this.Ii.set(s,i)}catch(t){if(this.Ai(t),!this.Ci)throw t;await this.Pi(s,i)}}async removeItem(s,t){if(e(t),this.Ci)this.Fi(s);else try{await this.Ii.delete(s)}catch(t){this.Ai(t),this.Ci?this.Fi(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ci)this.ki();else try{await this.Ii.clear()}catch(t){this.Ai(t),this.Ci?this.ki():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ci)return this.Di();let s=[];try{s=await this.Ii.keys()}catch(t){if(this.Ai(t),this.Ci)return this.Di();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ci?Promise.resolve(!0):this.Ii.ready()}Ni(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Wi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}ji(t){i("localforage.defineDriver()")}Vi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ns;if(e.Ui={},e.Ui.Hi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ui.Ji="undefined"!=typeof HTMLDialogElement,e.Ui.$i=!!self.requestIdleCallback,e.Ui.ImageBitmap=!!self.createImageBitmap,e.Ui.ImageBitmapOptions=!1,e.Ui.Xi=!1,e.Ui.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ui.ImageBitmapOptions=!0}).catch(()=>{e.Ui.ImageBitmapOptions=!1})}catch(t){e.Ui.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ui.Xi=10===t.width&&10===t.height}).catch(()=>{e.Ui.Xi=!1})}catch(t){e.Ui.Xi=!1}}if(e.Ui.Yi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ui.Ki=!(!navigator.permissions||!navigator.permissions.query),e.Ui.Zi=!1,e.Ui.Ki){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ui.Zi=!0}).catch(()=>{e.Ui.Zi=!1})}e.Ui.Qi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ui.te="undefined"!=typeof Proxy,e.Ui.ie=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ui.he="function"==typeof fetch,e.Ui.ne=!!(self.isSecureContext&&"Opera"!==e.fi.gi&&navigator.storage&&navigator.storage.persist),e.Ui.oe=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ui.ae=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.fi.di)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ui.ImageDecoder=void 0!==self.ImageDecoder,e.Ui.le=!!self.VideoEncoder,e.Ui.ue=!!self.showOpenFilePicker,e.Ui.fe=!!self.queryLocalFonts,e.Ui.UserActivation=!!navigator.userActivation,e.Ui.de=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ui.de=i&&"image/webp"===i.type}catch(t){e.Ui.de=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ns;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.pe(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.me(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ns;self.assert=function(t,s){t||i(s)}}{const h=self.Ns,mt=self.Ys,gt=(h.ge=function(t){return"number"==typeof t},h.ye=function(t){return h.ge(t)&&isFinite(t)},h.Se=function(t){if(!h.ge(t))throw new TypeError("expected number")},h.we=function(t){h.Me(t)},h.ve=function(t,s,i){if(!h.ge(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.xe=function(...s){for(let t of s);},h.Ge=function(t){if(!h.ye(t))throw new TypeError("expected finite number")},h.Te=function(t){h.Me(t)},h._e=function(...s){for(let t of s);},h.Ie=function(t){return"string"==typeof t},h.Ce=function(t){if(!h.Ie(t))throw new TypeError("expected string")},h.Re=function(t){h.Me(t)},h.Ae=function(...s){for(let t of s);},h.Ee=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Pe=function(t){if(!h.Ee(t))throw new TypeError("expected simple object")},h.Fe=function(t){if(!h.Me(t)&&!h.Ee(t))throw new TypeError("expected simple object")},h.ke=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.De=function(t){if(!h.ke(t))throw new TypeError("expected object")},h.Oe=function(t){h.Me(t)},h.Le=function(...s){for(let t of s);},h.Be=function(t){return h.Ne(t,Blob)&&"string"==typeof t.name},h.We=function(t){if(!h.Be(t))throw new TypeError("expected file")},h.je=function(t){h.Me(t)},h.Ve=function(t){return Array.isArray(t)},h.Ue=function(t){if(!h.Ve(t))throw new TypeError("expected array")},h.He=function(t){h.Me(t)},h.Je=function(...s){for(let t of s);},h.qe=function(t){return!(!h.Ve(t)||t.length&&!h.Ve(t[0]))},h.$e=function(s){if(!h.qe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Ve(t))throw new TypeError("expected 2d array")},h.Xe=function(t){h.Me(t)},h.Ye=function(t){return"function"==typeof t},h.Ke=function(t,s){if(!h.Ye(t))throw new TypeError("expected function");if(!h.Me(s)&&t!==s)throw new TypeError("expected same function reference")},h.Ze=function(t){h.Me(t)},h.Qe=function(...s){for(let t of s);},h.ih=function(s,...i){if(!h.Ye(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.Me(t)&&s===t)return;throw new TypeError("expected same function reference")},h.eh=function(...s){if(!h.Me(s))for(let t of s);},h.hh=function(t,s){return t instanceof s},h.rh=function(s,...i){for(let t of i)if(h.hh(s,t))return!0;return!1},h.nh=function(t,s){if(!h.hh(t,s))throw new TypeError("unexpected type")},h.oh=function(t,s){h.Me(t)},h.ah=function(t,...s){for(let t of s);},h.uh=function(t,...s){if(!h.rh(t,...s))throw new TypeError("unexpected type")},h.fh=function(t,...s){if(!h.Me(t)&&!h.rh(t,...s))throw new TypeError("unexpected type")},h.dh=function(s,i){for(let t of s)if(!h.hh(t,i))return!1;return!0},h.ph=function(s){for(let t of s)if(!h.ye(t))return!1;return!0},h.mh=function(s,t){for(let t of s);},h.gh=function(s,t){if(!h.Me(s))for(let t of s);},h.yh=function(s,t){if(!h.Me(s))for(let t of s);},h.Sh=function(s){for(let t of s);},h.wh=function(s){if(!h.Me(s))for(let t of s);},h.bh=function(t,s){return!(h.Me(t)||!h.Ie(t.nodeName))&&(!s||h.Mh(t.nodeName,s))},h.xh=function(t,s){if(h.Me(t)||!h.Ie(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Mh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Gh=function(t,s){h.Me(t)},h.Th=function(t,s){return!(h.Me(t)||!h.Ie(t.tagName))&&(!s||h.Mh(t.tagName,s))},h._h=function(t,s){if(h.Me(t)||!h.Ie(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Mh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Ih=function(t,s){h.Me(t)},h.Ch=function(t){return h.Th(t,"img")||h.Th(t,"canvas")||h.Th(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Rh=function(t){if(!h.Ch(t))throw new TypeError("expected drawable")},h.Ah=function(t){h.Me(t)},h.Eh=function(t){return t instanceof ImageData||h.Ch(t)},h.Ph=function(t){if(!h.Eh(t))throw new TypeError("expected drawable or image data")},h.Fh=function(t){if(!h.Me(t)&&!h.Eh(t))throw new TypeError("expected drawable or image data")},h.kh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Dh},h.Oh=function(t){if(!h.kh(t))throw new TypeError("expected string-like")},h.Lh=function(t){h.Me(t)},h.Bh=function(...s){for(let t of s);},h.Nh=function(){throw new Error("must be overridden")},h.Wh=function(){throw new Error("not yet implemented")},h.jh=function(t){return t.constructor===function*(){}.constructor},h.Vh=function(t){if(!h.jh(t))throw new Error("expected generator function")},h.Uh=function(t){return"function"===t[Symbol.iterator]},h.Hh=function(t){if(!h.Uh(t))throw new Error("expected iterable")},h.zh=function(t){return!h.Me(t)},h.Me=function(t){return null==t},h.Jh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.qh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.$h=function(t){return h.hh(t,gt)},h.Xh=function(t){},h.Yh=function(t){h.Kh(t,gt)},h.Zh=function(t,...s){if(!h.Qh(t,...s))throw new TypeError("unexpected type")},h.Qh=function(t,...s){for(const i of s)if(h.Ne(t,i))return!0;return!1},h.Kh=function(t,s){if(!h.Ne(t,s))throw new TypeError("unexpected type")},h.Ne=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.Se=h.Se,mt.we=h.we,mt.Ge=h.Ge,mt.Te=h.Te,mt.Ce=h.Ce,mt.Re=h.Re,mt.De=h.De,mt.Oe=h.Oe,mt.Ue=h.Ue,mt.He=h.He,mt.Ke=h.Ke,mt.Ze=h.Ze,mt.nh=h.nh,mt.oh=h.oh,mt.Me=h.Me}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.me())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.ir(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.er(s,[...i]),s.length&&console.warn(`[Defence] '${p.ir(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Ns,yt=new Map;p.hr=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.rr=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.nr=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,lr:0,ur:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.lr.toPrecision(3)} :: calls => `+this.ur}})},p.cr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.lr=i.total/i.ur,console.log(i.toString()),i.ur++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.me=function(){return(new Error).stack},p.dr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.ir=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ge(t)?"<number>":p.Ie(t)?"<string>":p.Ve(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ye(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.mr={};const St=new Set(["then","splice"]);p.mr.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.ir(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.ir(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.mr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.ir(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.ir(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.ir(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.mr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.ir(t)}'`)},p.mr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.ir(t)}'`)},p.mr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.ir(t)}'`)};let f=-1,d=(p.Sr=class{constructor(){if(p.Xs&&p.Ui.te){let t=Object.create(new.target.prototype),s=new Proxy(t,p.mr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.br=function(s){if(p.Xs&&p.Ui.te&&s instanceof p.Sr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Mr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Xs&&n(t,i),p.br(i)},p.vr=function(t){let s=u.get(t);s&&c.set(s,p.me())},p.Gr=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.Tr=class{constructor(t){this._r="",t&&this.start(t)}start(t){p.ci&&(this._r=t,performance.mark(this._r+"-Start"))}end(){p.ci&&(performance.mark(this._r+"-End"),performance.measure(this._r,this._r+"-Start",this._r+"-End"))}next(t){p.ci&&(this.end(),this._r=t,performance.mark(this._r+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ns,wt=2*Math.PI,bt=Math.PI/180,Mt=180/Math.PI,vt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Ir=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Cr=function(t,s,i){return t<s?s:i<t?i:t},y.Rr=function(t){return(t%=wt)<0&&(t+=wt),t},y.Ar=function(t){return t*bt},y.Er=function(t){return t*Mt},y.Pr=function(t,s){return Math.sqrt(t*t+s*s)},y.Fr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.kr=function(t,s,i,e){return y.Pr(i-t,e-s)},y.Dr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Or=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Lr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Br=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.Rr(t+i):y.Rr(t-i):y.Rr(s)},y.Nr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Wr=function(t,s,i,e=0){let h=y.Lr(t,s),r=wt*e;return y.Nr(s,t)?y.Rr(t+(h+r)*i):y.Rr(t-(h+r)*i)},y.jr=function(t,s,i,e=0){const h=y.Lr(t,s),r=wt*e;return y.Nr(s,t)?y.Rr(t+(h+r)*i):y.Rr(t+(wt-h+r)*i)},y.Vr=function(t,s,i,e=0){const h=y.Lr(t,s),r=wt*e;return y.Nr(s,t)?y.Rr(t-(-wt+h-r)*i):y.Rr(t-(h+r)*i)},y.Ur=function(t,s){const i=y.Lr(t,s);return y.Nr(t,s)?y.Rr(s-i):y.Rr(s+i)},y.Ot=function(t,s,i){return t+i*(s-t)},y.Hr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.zr=function(t,s,i,e,h){return y.Ot(e,h,y.Hr(t,s,i))},y.Jr=function(t,s,i,e){return y.Ot(y.Ot(t,s,e),y.Ot(s,i,e),e)},y.qr=function(t,s,i,e,h){return y.Ot(y.Jr(t,s,i,h),y.Jr(s,i,e,h),h)},y.$r=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Xr=function(t){return 0<t&&0==(t-1&t)},y.Yr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Kr=function(t,s){return Math.round(t*s)/s},y.Zr=function(t,s){return Math.floor(t*s)/s},y.Qr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.tn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.sn=function(t,s,i){return y.Cr(t,0,255)|y.Cr(s,0,255)<<8|y.Cr(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.hn=function(t,s,i,e){return t=y.Cr(Math.floor(1024*t),-8192,Gt),s=y.Cr(Math.floor(1024*s),-8192,Gt),i=y.Cr(Math.floor(1024*i),-8192,Gt),e=y.Cr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*vt+s*xt*vt+i*vt+e)},y.rn=function(t,s,i){return y.hn(t,s,i,1)},y.nn=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*vt));return t>Gt&&(t-=xt),t/1024}},y.an=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*vt)/(xt*vt));return t>Gt&&(t-=xt),t/1024}},y.ln=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*vt)/vt);return t>Gt&&(t-=xt),t/1024}},y.un=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%vt);return s/1023}},y.cn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.dn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.cn(i,e);return[i/t,e/t]},y.pn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,S=i-t,w=e-s,b=n-h,M=o-r,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.mn=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,b=u-a,M=c-l,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.gn=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.yn(),u=h.Sn(),c=h.wn(),f=h.bn(),d=h.Mn(),p=h.vn(),m=h.xn(),g=h.Gn();return y.mn(t,s,i,e,r,n,o,a,l,u,c,f)||y.mn(t,s,i,e,r,n,o,a,c,f,d,p)||y.mn(t,s,i,e,r,n,o,a,d,p,m,g)||y.mn(t,s,i,e,r,n,o,a,m,g,l,u)},y.Tn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.mn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.mn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y._n=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.In=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y._n(t,s,i,e,h-l,r-u,n+l,o+u)},y.Cn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),b=(y*g-m*S)*w,M=(p*S-m*g)*w;return 0<=b&&0<=M&&b+M<=1},y.Rn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,b=(g*y-m*S)/w,M=(p*S-m*y)/w,v=1-b-M;return[v,b,M]},y.An=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Ns,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.En=function(){return i},l.Pn=function(){if(!s)return"";const t=s.location;return l.Fn(t.origin+t.pathname)+i},l.Fn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.kn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.Dn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.On=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Ln=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Bn=function(t){return t.replace(/\\/g,"/")},l.Nn=function(t,s){const i=t?l.Dn(t).slice(1):"";return s===i},l.Wn=function(t,s){let i,e;return l.Be(t)&&(i=l.Ln(t.name)),l.Ie(t)&&(i=l.Ln(t)),l.Be(s)&&(e=l.Ln(s.name)),l.Ie(s)&&(e=l.Ln(s)),i===e},l.jn=function(t){t=l.Bn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Vn:h,name:r,root:s,ext:n,Un:a}},l.Hn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.zn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Jn=function(){},l.Mh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.qn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.$n=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Xn=function(t,s){t.length=s},l.Yn=function(t){t&&0!==t.length&&l.Xn(t,0)},l.Kn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Xn(t,0)}l.Xn(i,0)}},l.Zn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Qn=function(t,s,i){const e=t.length;(s|=0)<e?l.Xn(t,s):e<s&&l.Zn(t,s,i)},l.eo=function(t,s){l.Yn(t),l.er(t,s)},l.er=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.ho=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Xn(i,s)}},l.ro=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.no=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.ao=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.Xn(i,r),h},l.lo=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Xn(i,h),t-h},l.uo=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.co=function(t,s){if(!l.uo(t,s))throw new RangeError("array index out of bounds")},l.fo=function(t){return t.slice()},l.do=function(t,i){let e=[];for(let s of t)if(l.ke(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ve(s)?e.push(l.do(s,i)):e.push(s);return e},l.po=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.yo=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.So=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.wo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.bo=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.Mo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.vo=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.xo=function(t){e.push(t)},l.Go=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.To=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l._o=function(t){r.delete(t)},l.Io=l.To,l.Co=function(){return new Promise(t=>l.Io(t))},new Set);l.Ro=function(s){const i=self.requestAnimationFrame(async t=>{await l.Co(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.Ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Ns;r.Eo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.Po=function(t){return!r.Eo(t)},r.Fo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.ko=function(t,s){return fetch(t,s).then(t=>(r.Fo(t),t))},r.Do=function(t){return r.ko(t).then(t=>t.text())},r.Oo=function(t){return r.ko(t).then(t=>t.json())},r.Lo=function(t){return r.ko(t).then(t=>t.blob())},r.Bo=function(t){return r.ko(t).then(t=>t.arrayBuffer())},r.No=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Wo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.jo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Vo=function(t){return r.jo(t).then(t=>JSON.parse(t))},r.Uo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.No(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Ho=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.zo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Cr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Jo=function(t,s,i){const e=r.Ho(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.zo(e,s,i)},r.qo=function(t,s,i){if(r.Ui.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Jo(t,s,i));if(r.Ui.ImageBitmap)return createImageBitmap(t).then(t=>r.Jo(t,s,i));{const e=r.Ho(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.zo(e,s,i)}},r.$o=function(t,s){t.clear();for(const i of s)t.add(i)},r.Xo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Ko=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Zo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Qo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.ta=function(t){return"object"==typeof t&&"function"==typeof t.next},r.ea=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ns,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.ra=class{constructor(t,s,i,e){this.na=NaN,this.oa=NaN,this.aa=NaN,this.la=NaN,this.na=0,this.oa=0,this.aa=0,this.la=0,t instanceof u.ra?this.set(t):this.ua(t||0,s||0,i||0,e||0)}ca(t,s,i){return this.na=+t,this.oa=+s,this.aa=+i,this.Cr(),this}ua(t,s,i,e){return this.na=+t,this.oa=+s,this.aa=+i,this.la=+e,this.Cr(),this}set(t){return this.na=t.na,this.oa=t.oa,this.aa=t.aa,this.la=t.la,this}I(t){return this.set(t)}add(t){this.na+=t.na,this.oa+=t.oa,this.aa+=t.aa,this.la+=t.la,this.Cr()}fa(t,s,i,e=0){this.na+=+t,this.oa+=+s,this.aa+=+i,this.la+=+e,this.Cr()}da(t){this.pa(Math.max(this.na,t.na)-Math.min(this.na,t.na)),this.ma(Math.max(this.oa,t.oa)-Math.min(this.oa,t.oa)),this.ya(Math.max(this.aa,t.aa)-Math.min(this.aa,t.aa)),this.Sa(Math.max(this.la,t.la)-Math.min(this.la,t.la)),this.Cr()}wa(t){this.na=t.na,this.oa=t.oa,this.aa=t.aa}pa(t){this.na=u.Cr(+t,0,1)}ba(){return this.na}ma(t){this.oa=u.Cr(+t,0,1)}Ma(){return this.oa}ya(t){this.aa=u.Cr(+t,0,1)}xa(){return this.aa}Sa(t){this.la=u.Cr(+t,0,1)}Ga(){return this.la}clone(){return u.Mr(u.ra,this.na,this.oa,this.aa,this.la)}toArray(){return[this.na,this.oa,this.aa,this.la]}Ta(){return new Float64Array(this.toArray())}_a(t,s){t[s++]=this.na,t[s++]=this.oa,t[s++]=this.aa,t[s]=this.la}Ia(t,s){t[s++]=this.na,t[s++]=this.oa,t[s]=this.aa}equals(t){return this.na===t.na&&this.oa===t.oa&&this.aa===t.aa&&this.la===t.la}Ca(t){return this.na===t.na&&this.oa===t.oa&&this.aa===t.aa}Ra(t,s,i){return this.na===t&&this.oa===s&&this.aa===i}Aa(t,s,i,e){return this.na===t&&this.oa===s&&this.aa===i&&this.la===e}Ea(t,s){return t[s]===Math.fround(this.na)&&t[s+1]===Math.fround(this.oa)&&t[s+2]===Math.fround(this.aa)&&t[s+3]===Math.fround(this.la)}Pa(t,s){return t[s]===Math.fround(this.na)&&t[s+1]===Math.fround(this.oa)&&t[s+2]===Math.fround(this.aa)}multiply(t){this.na*=t.na,this.oa*=t.oa,this.aa*=t.aa,this.la*=t.la}Fa(t){this.na*=t,this.oa*=t,this.aa*=t,this.la*=t}ka(){return this.na*=this.la,this.oa*=this.la,this.aa*=this.la,this}Da(){return this.na/=this.la,this.oa/=this.la,this.aa/=this.la,this}Cr(){return this.na=u.Cr(this.na,0,1),this.oa=u.Cr(this.oa,0,1),this.aa=u.Cr(this.aa,0,1),this.la=u.Cr(this.la,0,1),this}Oa(t){this.na=u.nn(t),this.oa=u.an(t),this.aa=u.ln(t),this.la=u.un(t)}La(t,s,i){const e=u.ye(t)?t:this.ba(),h=u.ye(s)?s:this.Ma(),r=u.ye(i)?i:this.xa();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Ba(t,s,i,e){const h=u.ye(t)?t:this.ba(),r=u.ye(s)?s:this.Ma(),n=u.ye(i)?i:this.xa(),o=u.ye(e)?e:this.Ga();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Na(){const t=Math.round(255*this.ba()),s=Math.round(255*this.Ma()),i=Math.round(255*this.xa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Wa(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.pa(s),isFinite(i)&&this.ma(i),isFinite(e)&&this.ya(e),this.Sa(1),!0}ja(){const t=Math.round(255*this.ba()),s=Math.round(255*this.Ma()),i=Math.round(255*this.xa());return t+`, ${s}, `+i}Va(){const t=Math.round(255*this.ba()),s=Math.round(255*this.Ma()),i=Math.round(255*this.xa());return[t,s,i]}Ua(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.pa(i),isFinite(e)&&this.ma(e),isFinite(h)&&this.ya(h),this.Sa(1),!0}Ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.pa(i),isFinite(e)&&this.ma(e),isFinite(h)&&this.ya(h),this.Sa(1),!0}za(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.pa(i),isFinite(e)&&this.ma(e),isFinite(h)&&this.ya(h),isFinite(r)&&this.Sa(r),!0}Ja(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.pa(i),isFinite(e)&&this.ma(e),isFinite(h)&&this.ya(h),isFinite(r)&&this.Sa(r),!0}qa(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ha(t):this.Ua(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ja(t):this.za(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.$a(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ha(t):4===s.length&&this.Ja(t):3===s.length?this.Ua(t):4===s.length&&this.za(t)}}return this.Wa(t)}toJSON(){return[this.na,this.oa,this.aa,this.la]}Xa(t,s,i,e){let h,r,n;if(t%=360,s=u.Cr(s,0,100),i=u.Cr(i,0,100),e=u.Cr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.pa(h),this.ma(r),this.ya(n),this.Sa(e),this}$a(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Xa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Xa(+i[1],+i[2],+i[3],+i[4]),0))}Ya(){const t=this.na,s=this.oa,i=this.aa,e=this.la,h=u.ra.Ka(t,s,i),r=u.ra.Za(t,s,i),n=u.ra.Qa(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}sl(){const t=this.na,s=this.oa,i=this.aa;return[u.ra.Ka(t,s,i),u.ra.Za(t,s,i),u.ra.Qa(t,s,i),this.la]}il(t){!Array.isArray(t)||t.length<3||(this.na=t[0],this.oa=t[1],this.aa=t[2],this.la=4<=t.length?t[3]:1)}set r(t){this.pa(t)}get r(){return this.ba()}set g(t){this.ma(t)}get g(){return this.Ma()}set b(t){this.ya(t)}get b(){return this.xa()}set a(t){this.Sa(t)}get a(){return this.Ga()}el(t,s){switch(t){case 0:this.pa(s);break;case 1:this.ma(s);break;case 2:this.ya(s);break;case 3:this.Sa(s);break;default:throw new RangeError("invalid color index")}}hl(t){switch(t){case 0:return this.ba();case 1:return this.Ma();case 2:return this.xa();case 3:return this.Ga();default:throw new RangeError("invalid color index")}}static rl(t,s){let i,e;if(Array.isArray(t))(i=new u.ra).il(t);else{if(!(t instanceof u.ra))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.ra).il(s);else{if(!(s instanceof u.ra))throw new Error("unexpected type");e=s}return i.equals(e)}static nl(t,s){return u.Cr(Math.max(t,s)-Math.min(t,s),0,1)}static ol(t,s){const i=new u.ra;return i.pa(Math.max(t.na,s.na)-Math.min(t.na,s.na)),i.ma(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i.ya(Math.max(t.aa,s.aa)-Math.min(t.aa,s.aa)),i.Sa(Math.max(t.la,s.la)-Math.min(t.la,s.la)),i}static al(t,s){const i=new u.ra(0,0,0,1);return i.pa(Math.max(t.na,s.na)-Math.min(t.na,s.na)),i.ma(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i.ya(Math.max(t.aa,s.aa)-Math.min(t.aa,s.aa)),i}static Ka(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Za(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.ra.ll=Object.freeze(u.Mr(u.ra,1,1,1,1)),u.ra.ul=Object.freeze(u.Mr(u.ra,0,0,0,1)),u.ra.cl=Object.freeze(u.Mr(u.ra,0,0,0,0))}{const Rt=self.Ns;Rt.fl=class{constructor(t,s){this.dl=0,this.pl=0,t instanceof Rt.fl?this.I(t):this.set(t||0,s||0)}set(t,s){this.dl=+t,this.pl=+s}I(t){this.dl=t.dl,this.pl=t.pl}equals(t){return this.dl===t.dl&&this.pl===t.pl}ml(t,s){return this.dl===t&&this.pl===s}Ea(t,s){return t[s]===Math.fround(this.dl)&&t[s+1]===Math.fround(this.pl)}gl(t){this.dl=+t}yl(){return this.dl}Sl(t){this.pl=+t}wl(){return this.pl}toArray(){return[this.dl,this.pl]}Ta(){return new Float64Array(this.toArray())}_a(t,s){t[s++]=this.dl,t[s]=this.pl}offset(t,s){this.dl+=+t,this.pl+=+s}scale(t,s){this.dl*=t,this.pl*=s}Ct(t,s){this.dl/=t,this.pl/=s}round(){this.dl=Math.round(this.dl),this.pl=Math.round(this.pl)}floor(){this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}ceil(){this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}angle(){return Rt.Or(0,0,this.dl,this.pl)}bl(){return this.dl*this.dl+this.pl*this.pl}length(){return Rt.Pr(this.dl,this.pl)}Ml(t,s){const i=this.dl*s-this.pl*t;this.pl=this.pl*s+this.dl*t,this.dl=i}rotate(t){0!==t&&this.Ml(Math.sin(t),Math.cos(t))}vl(t,s,i){0===t||s===this.dl&&i===this.pl||(this.dl-=s,this.pl-=i,this.Ml(Math.sin(t),Math.cos(t)),this.dl+=+s,this.pl+=+i)}move(t,s){0!==s&&(this.dl+=Math.cos(t)*s,this.pl+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.dl/=t,this.pl/=t)}Cr(t,s){this.dl=Rt.Cr(this.dl,t,s),this.pl=Rt.Cr(this.pl,t,s)}kt(t){return this.dl*t.dl+this.pl*t.pl}reverse(){this.dl=-this.dl,this.pl=-this.pl}xl(){let t=this.dl;return this.dl=this.pl,this.pl=-t,this}}}{const At=self.Ns;At.Rect=class{constructor(t,s,i,e){this.Gl=NaN,this.Tl=NaN,this._l=NaN,this.Il=NaN,this.Gl=0,this.Tl=0,this._l=0,this.Il=0,t instanceof At.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Gl=+t,this.Tl=+s,this._l=+i,this.Il=+e}Cl(t,s,i,e){s=+s,this.Gl=t=+t,this.Tl=s,this._l=t+ +i,this.Il=s+ +e}I(t){this.Gl=+t.Gl,this.Tl=+t.Tl,this._l=+t._l,this.Il=+t.Il}clone(){return new At.Rect(this.Gl,this.Tl,this._l,this.Il)}static Rl(t,s){const i=new At.Rect;return i.Al(Math.min(t.Gl,s.Gl)),i.El(Math.min(t.Tl,s.Tl)),i.Pl(Math.max(t._l,s._l)),i.Fl(Math.max(t.Il,s.Il)),i}static kl(t){return new At.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Gl===t.Gl&&this.Tl===t.Tl&&this._l===t._l&&this.Il===t.Il}Dl(t,s,i,e){return this.Gl===t&&this.Tl===s&&this.width()===i&&this.height()===e}Ea(t,s){return t[s]===Math.fround(this.Gl)&&t[s+1]===Math.fround(this.Tl)&&t[s+2]===Math.fround(this._l)&&t[s+3]===Math.fround(this.Il)}Al(t){this.Gl=+t}Ol(){return this.Gl}El(t){this.Tl=+t}Ll(){return this.Tl}Pl(t){this._l=+t}Bl(){return this._l}Fl(t){this.Il=+t}Nl(){return this.Il}toArray(){return[this.Gl,this.Tl,this._l,this.Il]}Ta(){return new Float64Array(this.toArray())}Wl(){return new DOMRect(this.Gl,this.Tl,this.width(),this.height())}static jl(t){return At.Mr(At.Rect,t.left,t.top,t.right,t.bottom)}_a(t,s){t[s++]=this.Gl,t[s++]=this.Tl,t[s++]=this._l,t[s]=this.Il}Vl(t,s){t[s++]=this.Gl,t[s++]=this.Tl,t[s++]=this._l,t[s++]=this.Tl,t[s++]=this._l,t[s++]=this.Il,t[s++]=this.Gl,t[s]=this.Il}Ul(t,s,i){t[s++]=this.Gl,t[s++]=this.Tl,t[s++]=i,t[s++]=this._l,t[s++]=this.Tl,t[s++]=i,t[s++]=this._l,t[s++]=this.Il,t[s++]=i,t[s++]=this.Gl,t[s++]=this.Il,t[s]=i}width(){return this._l-this.Gl}height(){return this.Il-this.Tl}Hl(){return(this.Gl+this._l)/2}zl(){return(this.Tl+this.Il)/2}offset(t,s){s=+s,this.Gl+=t=+t,this.Tl+=s,this._l+=t,this.Il+=s}offsetLeft(t){this.Gl+=+t}offsetTop(t){this.Tl+=+t}Jl(t){this._l+=+t}ql(t){this.Il+=+t}$l(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Tl<this.Il?this.Gl<this._l?this.Il=this.Tl+this.width():this.Il=this.Tl-this.width():this.Gl<this._l?this.Il=this.Tl-this.width():this.Il=this.Tl+this.width()}Xl(t,s){s=+s,this.Gl-=t=+t,this.Tl-=s,this._l+=t,this.Il+=s}Yl(t,s){s=+s,this.Gl+=t=+t,this.Tl+=s,this._l-=t,this.Il-=s}multiply(t,s){this.Gl*=t,this.Tl*=s,this._l*=t,this.Il*=s}Ct(t,s){this.Gl/=t,this.Tl/=s,this._l/=t,this.Il/=s}Kl(t){this.Gl=+t-this.Gl,this._l=+t-this._l}Zl(t){this.Tl=+t-this.Tl,this.Il=+t-this.Il}Ql(t,s){const i=this.width(),e=this.height(),h=this.Ol()+i*t,r=this.Ll()+e*s;this.Cl(h-e*s,r-i*t,e,i)}tu(){const t=this.Gl;this.Gl=this._l,this._l=t}su(){const t=this.Tl;this.Tl=this.Il,this.Il=t}iu(t){const s=this.Tl;this.Tl=+t-this.Il,this.Il=+t-s}round(){this.Gl=Math.round(this.Gl),this.Tl=Math.round(this.Tl),this._l=Math.round(this._l),this.Il=Math.round(this.Il)}eu(){this.Gl=Math.ceil(this.Gl),this.Tl=Math.ceil(this.Tl),this._l=Math.floor(this._l),this.Il=Math.floor(this.Il)}hu(){this.Gl=Math.floor(this.Gl),this.Tl=Math.floor(this.Tl),this._l=Math.ceil(this._l),this.Il=Math.ceil(this.Il)}floor(){this.Gl=Math.floor(this.Gl),this.Tl=Math.floor(this.Tl),this._l=Math.floor(this._l),this.Il=Math.floor(this.Il)}ceil(){this.Gl=Math.ceil(this.Gl),this.Tl=Math.ceil(this.Tl),this._l=Math.ceil(this._l),this.Il=Math.ceil(this.Il)}Cr(t,s,i,e){this.Gl=Math.max(this.Gl,+t),this.Tl=Math.max(this.Tl,+s),this._l=Math.min(this._l,+i),this.Il=Math.min(this.Il,+e)}ru(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Gl=At.Cr(this.Gl,t,i),this.Tl=At.Cr(this.Tl,s,e),this._l=At.Cr(this._l,t,i),this.Il=At.Cr(this.Il,s,e)}normalize(){this.Gl>this._l&&this.tu(),this.Tl>this.Il&&this.su()}nu(t){return!(t._l<this.Gl||t.Il<this.Tl||t.Gl>this._l||t.Tl>this.Il)}ou(t,s,i){return!(t._l+s<this.Gl||t.Il+i<this.Tl||t.Gl+s>this._l||t.Tl+i>this.Il)}au(t,s){return t>=this.Gl&&t<=this._l&&s>=this.Tl&&s<=this.Il}lu(t){return t.Gl>=this.Gl&&t.Tl>=this.Tl&&t._l<=this._l&&t.Il<=this.Il}uu(t){t.Gl<this.Gl&&(this.Gl=+t.Gl),t.Tl<this.Tl&&(this.Tl=+t.Tl),t._l>this._l&&(this._l=+t._l),t.Il>this.Il&&(this.Il=+t.Il)}cu(t){this.Gl=At.Ot(t.Gl,t._l,this.Gl),this.Tl=At.Ot(t.Tl,t.Il,this.Tl),this._l=At.Ot(t.Gl,t._l,this._l),this.Il=At.Ot(t.Tl,t.Il,this.Il)}}}{const Et=self.Ns;Et.fu=class{constructor(t,s,i,e,h,r,n,o){this.du=NaN,this.pu=NaN,this.mu=NaN,this.gu=NaN,this.yu=NaN,this.Su=NaN,this.wu=NaN,this.bu=NaN,this.du=0,this.pu=0,this.mu=0,this.gu=0,this.yu=0,this.Su=0,this.wu=0,this.bu=0,t instanceof Et.fu?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.du=+t,this.pu=+s,this.mu=+i,this.gu=+e,this.yu=+h,this.Su=+r,this.wu=+n,this.bu=+o}Mu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.du=t.du,this.pu=t.pu,this.mu=t.mu,this.gu=t.gu,this.yu=t.yu,this.Su=t.Su,this.wu=t.wu,this.bu=t.bu}equals(t){return this.du===t.du&&this.pu===t.pu&&this.mu===t.mu&&this.gu===t.gu&&this.yu===t.yu&&this.Su===t.Su&&this.wu===t.wu&&this.bu===t.bu}vu(t){this.du=+t}yn(){return this.du}xu(t){this.pu=+t}Sn(){return this.pu}Gu(t){this.mu=+t}wn(){return this.mu}Tu(t){this.gu=+t}bn(){return this.gu}_u(t){this.yu=+t}Mn(){return this.yu}Iu(t){this.Su=+t}vn(){return this.Su}Cu(t){this.wu=+t}xn(){return this.wu}Ru(t){this.bu=+t}Gn(){return this.bu}Au(){return new DOMQuad(new DOMPoint(this.du,this.pu),new DOMPoint(this.mu,this.gu),new DOMPoint(this.yu,this.Su),new DOMPoint(this.wu,this.bu))}static Eu(t){return Et.Mr(Et.fu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.du,this.pu,this.mu,this.gu,this.yu,this.Su,this.wu,this.bu]}Ta(){return new Float64Array(this.toArray())}_a(t,s){t[s++]=this.du,t[s++]=this.pu,t[s++]=this.mu,t[s++]=this.gu,t[s++]=this.yu,t[s++]=this.Su,t[s++]=this.wu,t[s]=this.bu}Pu(t,s,i){t[s++]=this.du,t[s++]=this.pu,t[s++]=i,t[s++]=this.mu,t[s++]=this.gu,t[s++]=i,t[s++]=this.yu,t[s++]=this.Su,t[s++]=i,t[s++]=this.wu,t[s++]=this.bu,t[s]=i}offset(t,s){s=+s,this.du+=t=+t,this.pu+=s,this.mu+=t,this.gu+=s,this.yu+=t,this.Su+=s,this.wu+=t,this.bu+=s}round(){this.du=Math.round(this.du),this.pu=Math.round(this.pu),this.mu=Math.round(this.mu),this.gu=Math.round(this.gu),this.yu=Math.round(this.yu),this.Su=Math.round(this.Su),this.wu=Math.round(this.wu),this.bu=Math.round(this.bu)}floor(){this.du=Math.floor(this.du),this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu),this.gu=Math.floor(this.gu),this.yu=Math.floor(this.yu),this.Su=Math.floor(this.Su),this.wu=Math.floor(this.wu),this.bu=Math.floor(this.bu)}ceil(){this.du=Math.ceil(this.du),this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu),this.gu=Math.ceil(this.gu),this.yu=Math.ceil(this.yu),this.Su=Math.ceil(this.Su),this.wu=Math.ceil(this.wu),this.bu=Math.ceil(this.bu)}Fu(t){this.du=t.Gl,this.pu=t.Tl,this.mu=t._l,this.gu=t.Tl,this.yu=t._l,this.Su=t.Il,this.wu=t.Gl,this.bu=t.Il}ku(t,s){0===s?this.Fu(t):this.Du(t,Math.sin(s),Math.cos(s))}Du(t,s,i){const e=t.Gl*s,h=t.Tl*s,r=t._l*s,n=t.Il*s,o=t.Gl*i,a=t.Tl*i,l=t._l*i,u=t.Il*i;this.du=o-h,this.pu=a+e,this.mu=l-h,this.gu=a+r,this.yu=l-n,this.Su=u+r,this.wu=o-n,this.bu=u+e}Ou(t){t.set(Math.min(this.du,this.mu,this.yu,this.wu),Math.min(this.pu,this.gu,this.Su,this.bu),Math.max(this.du,this.mu,this.yu,this.wu),Math.max(this.pu,this.gu,this.Su,this.bu))}au(t,s){let i=this.mu-this.du,e=this.gu-this.pu,h=this.yu-this.du,r=this.Su-this.pu,n=t-this.du,o=s-this.pu,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.wu-this.du)*i+(e=this.bu-this.pu)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Hl(){return(this.du+this.mu+this.yu+this.wu)/4}zl(){return(this.pu+this.gu+this.Su+this.bu)/4}Lu(t,s,i,e){return!(!this.au(t,s)&&!this.au(i,e))||Et.gn(t,s,i,e,this)}Bu(t){let s=t.Hl(),i=t.zl();if(this.au(s,i))return!0;if(s=this.Hl(),i=this.zl(),t.au(s,i))return!0;const e=this.du,h=this.pu,r=this.mu,n=this.gu,o=this.yu,a=this.Su,l=this.wu,u=this.bu;return Et.gn(e,h,r,n,t)||Et.gn(r,n,o,a,t)||Et.gn(o,a,l,u,t)||Et.gn(l,u,e,h,t)}Nu(){const t=this.du,s=this.pu;this.du=this.mu,this.pu=this.gu,this.mu=this.yu,this.gu=this.Su,this.yu=this.wu,this.Su=this.bu,this.wu=t,this.bu=s}Wu(){this.ju(0,2),this.ju(1,3),this.ju(6,4),this.ju(7,5)}Vu(){this.ju(0,6),this.ju(1,7),this.ju(2,4),this.ju(3,5)}Uu(){this.ju(2,6),this.ju(3,7)}ju(t,s){const i=this.Hu(t);this.zu(t,this.Hu(s)),this.zu(s,i)}Hu(t){switch(t){case 0:return this.du;case 1:return this.pu;case 2:return this.mu;case 3:return this.gu;case 4:return this.yu;case 5:return this.Su;case 6:return this.wu;case 7:return this.bu;default:throw new RangeError("invalid quad point index")}}zu(t,s){switch(s=+s,t){case 0:this.du=s;break;case 1:this.pu=s;break;case 2:this.mu=s;break;case 3:this.gu=s;break;case 4:this.yu=s;break;case 5:this.Su=s;break;case 6:this.wu=s;break;case 7:this.bu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Pt=self.Ns,Ft=[0,0,1,0,1,1,0,1],kt=Pt.Mr(Pt.fu);Pt.Ju=class extends Pt.Sr{constructor(t,s=!0){super(),t=t||Ft,this.qu=Float64Array.from(t),this.$u=new Pt.Rect,this.Xu=!0,this.Yu=s}vr(){}Ku(){return this.qu}Zu(){return this.qu.length/2}Qu(t){this.qu.length===t.length?this.qu.set(t):this.qu=Float64Array.from(t),this.Xu=!0}tc(){this.Qu(Ft)}I(t){this.Qu(t.qu)}ic(){this.Xu=!0}ec(){if(this.Xu){let i=this.qu,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.$u.set(e,h,r,n),this.Xu=!1}}Fu(t,s,i){let e=this.qu;8!==e.length&&(e=new Float64Array(8),this.qu=e),e[0]=t.Ol()-s,e[1]=t.Ll()-i,e[2]=t.Bl()-s,e[3]=t.Ll()-i,e[4]=t.Bl()-s,e[5]=t.Nl()-i,e[6]=t.Ol()-s,e[7]=t.Nl()-i,this.$u.I(t),0===s&&0===i||this.$u.offset(-s,-i),this.Xu=!1}hc(t,s,i){kt.I(t),kt.offset(s,i),this.Qu(kt.toArray()),this.Xu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.rc(t,s,e,h)}rc(i,e,h,r){const n=this.qu;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.Xu=!0}offset(i,e){const h=this.qu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}au(i,e){const h=this.qu;if(i===h[0]&&e===h[1])return!0;this.ec();let t=this.$u,r=t.Ol()-110,n=t.Ll()-101,o=t.Bl()+131,a=t.Nl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),S=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,b=h[t],M=h[t+1],v=h[w],x=h[1+w];Pt.mn(r,n,i,e,l,c,u,f,b,M,v,x)&&++y,Pt.mn(o,a,i,e,d,m,p,g,b,M,v,x)&&++S}return y%2==1||S%2==1}nc(t,c,f){const d=t.qu,p=this.qu;if(this.au(d[0]+c,d[1]+f))return!0;if(t.au(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,S=d[m]+c,w=d[1+m]+f;if(Pt.mn(i,e,h,r,n,a,o,l,g,y,S,w))return!0}}return!1}Lu(i,e,h,r,n,o){if(this.au(h-i,r-e))return!0;if(this.au(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.qu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Pt.mn(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}Wu(i){const e=this.qu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Xu=!0}Vu(i){const e=this.qu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Xu=!0}Uu(){const i=this.qu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Xu=!0}oc(){let i=this.qu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Zu()}ac(){let i=this.qu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Zu()}lc(){return this.qu}uc(){return this.Zu()}fc(){return this.Yu}}}{const Dt=self.Ns;Dt.mc=class extends Dt.Sr{constructor(t){if(super(),this.yc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}vr(){this.Sc(),this.yc=null}wc(){return 0===this.yc.size}Sc(){const t=this.yc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.yc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ri(t,s){const i=this.yc.get(t);return i&&i.get(s)}hi(t,s){const i=this.yc.get(t);return!!i&&i.has(s)}Mc(t,s){const i=this.yc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}vc(t){const s=this.yc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}xc(){let t=0;for(const s of this.yc.values())t+=s.size;return t}*values(){for(const t of this.yc.values())yield*t.values()}*Gc(){for(const[t,s]of this.yc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.yc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Ot=self.Ns;Ot.Tc=class extends Ot.Sr{constructor(){super(),this._c=new Set,this.Ic=[],this.Cc=!1}vr(){this.Sc()}Sc(){this._c.clear(),Ot.Yn(this.Ic),this.Cc=!1}Rc(t){this._c.has(t)||(this._c.add(t),this.Cc)||this.Ic.push(t)}hi(t){return this._c.has(t)}Mc(t){this._c.delete(t)&&(this.Cc=!0)}xc(){return this._c.size}wc(){return 0===this._c.size}Ac(){return this.Cc&&(this.Ec(),this.Cc=!1),this.Ic}Ec(){const t=this.Ic;Ot.Yn(t);for(const s of this._c)t.push(s)}}}{const Lt=self.Ns,Bt=new Map,Nt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ut=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Xt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Yt=(self.Pc=class hs{constructor(){}static Fc(){return"default"}static kc(){return"noease"}static Dc(t){return Xt.get(t)}static Oc(s,...i){this.Lc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.Bc(t,s)||hs.Bc(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Nt.keys()].concat(e).filter(t=>!i.includes(t))}static Nc(){this.Lc();const t=[...Vt.keys()];return t.sort(),[...Nt.keys()].concat(t)}static Wc(){this.Lc();const t=[...Vt.keys()];return t.sort(),t}static jc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of $t){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Vc(t){return this.Lc(),[...Nt.keys()].includes(t)}static Uc(t){const s=Jt.get(t);return s?Bt.get(s):hs.Vc(t)?Bt.get(t):Ht.has(t)?Ht.get(t):void 0}static Hc(t){return this.Lc(),zt.get(t)}static zc(t,s){this.Lc();const i=hs.Uc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static Bc(t,s){this.Lc();const i=jt.get(s);if(i)return i.get(t)}static Jc(t,s){this.Lc();const i=hs.Uc(t);return!!i||!!Wt.get(s).get(t)}static qc(t){this.Lc();const s=hs.Uc(t);return s||Vt.get(t)}static $c(t){return this.Lc(),Ut.get(t)}static Xc(t){this.Lc();const s=this.Nc();return s[t]}static Yc(t,s){this.Lc();const i=this.Oc(s);return i.indexOf(t)}static Kc(t){return this.Yc(t)}static Lc(){0===Bt.size&&(this.Zc("default",()=>{}),this.Zc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Zc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Zc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Zc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Zc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Zc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Zc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Zc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Zc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Zc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Zc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Zc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Zc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Zc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Zc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Zc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Zc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Zc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Zc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Zc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Zc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Zc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Zc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Zc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Qc("cubicbezier",this.tf),this.Qc("spline",this.if))}static Zc(t,s,i=!1){if("function"==typeof s)hs.ef(t,s,"predefined");else{if(!Lt.Ve(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.Mr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.ef(t,(t,s,i,e)=>h.hf(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.Mr(Lt.rf,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.nf(i),hs.ef(t,(t,s,i,e)=>r.hf(t,s,i,e),"predefined")}}}static Qc(t,s){hs.ef(t,s,"private")}static lf(t,s,i,e){this.Lc(),hs.ef(t,s,"custom",i,e)}static uf(t,s){if(!this.Vc(t)&&![...Ht.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static ef(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Nt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),jt.get(e));n.set(t,h)}else Vt.set(t,s),Ut.set(t,h);break;case"private":Bt.set(t,s),Ht.set(t,s);break;default:throw new Error("unexpected ease mode")}}static cf(t,s,i,e){return 0===e?s:i*t/e+s}static tf(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static if(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static ff(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Yt;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/(Yt-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=Yt-1;for(Yt;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Ie(t)};o;const rs=self.Ns;rs.df=class{constructor(t){this.pf=[],this._r=t||"",this.gf=0}vr(){this.Sc(),this.pf=null}yf(){return this._r}Sc(){rs.Kn(this.pf),this.gf=0}Sf(){return this.gf}wf(t=Math.random()*this.Sf()){let s=0;for(const[i,e]of this.pf)if(t<(s+=i))return e;return 0}bf(t,s){o(s),this.gf+=t,this.pf.push([t,s])}Mf(s,i){o(i);const e=0===s;for(let t=0;t<this.pf.length;t++){const h=this.pf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.pf.splice(t,1),this.gf-=h[0];break}}}vf(){return JSON.stringify(this.pf)}static xf(t,s){const i=new rs.df(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.bf(r,n)}return i}}}{let t=self.Ns,i=0;t.Gf=class{constructor(t,s){this.Tf=t,this._f=s,this.If=i++,this.Tf.Cf("runtime","screen-reader-text",{type:"create",id:this.If,text:this._f})}vr(){this.Tf.Cf("runtime","screen-reader-text",{type:"release",id:this.If}),this.Tf=null,this._f="",this.If=-1}Rf(t){this._f!==t&&(this._f=t,this.Tf.Cf("runtime","screen-reader-text",{type:"update",id:this.If,text:this._f}))}}}{const ns=self.Ns;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Af=!1,this.Ef=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Ef)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Af=!0}}}{const os=self.Ns;os.Event.Pf=class extends os.Sr{constructor(t){super(),this.Ff=t,this.kf=[],this.Df=new Set,this.Of=[],this.Lf=new Set,this.Bf=0,this.Nf=[]}vr(){0<this.Bf||(os.Yn(this.kf),this.Df.clear(),os.Yn(this.Of),this.Lf.clear(),os.Yn(this.Nf),os.vr(this))}Wf(t,s){this.jf()?this.Nf.push({Vf:"add",Uf:t,capture:s}):s?this.Df.has(t)||(this.kf.push(t),this.Df.add(t)):this.Lf.has(t)||(this.Of.push(t),this.Lf.add(t))}Hf(t,s){this.jf()?this.Nf.push({Vf:"remove",Uf:t,capture:s}):s?this.Df.has(t)&&(this.Df.delete(t),os.ro(this.kf,t)):this.Lf.has(t)&&(this.Lf.delete(t),os.ro(this.Of,t))}zf(){return!this.kf.length&&!this.Of.length}jf(){return 0<this.Bf}Jf(){const t=new Set,s=new Set;for(const i of this.Nf)if("add"===i.Vf)this.Wf(i.Uf,i.capture),(i.capture?s:t).delete(i.Uf);else{if("remove"!==i.Vf)throw new Error("invalid op");(i.capture?(this.Df.delete(i.Uf),s):(this.Lf.delete(i.Uf),t)).add(i.Uf)}os.lo(this.Of,t),os.lo(this.kf,s),os.Yn(this.Nf)}qf(i){this.$f();let e=!1;for(let t=0,s=this.kf.length;t<s;++t)if(this.kf[t](i),i.Af){e=!0;break}if(!e)for(let t=0,s=this.Of.length;t<s&&(this.Of[t](i),!i.Af);++t);return this.Xf(),!i.defaultPrevented}Yf(i){this.$f();for(let t=0,s=this.kf.length;t<s;++t)this.kf[t](i);for(let t=0,s=this.Of.length;t<s;++t)this.Of[t](i);return this.Xf(),!0}$f(){this.Bf++}Xf(){this.Bf--,0===this.Bf&&0<this.Nf.length&&this.Jf()}Kf(t){t?this.$f():this.Xf()}Zf(i){let e=[];for(let s=0,t=this.kf.length;s<t;++s){let t=this.kf[s];e.push(os.Qf(()=>t(i)))}for(let s=0,t=this.Of.length;s<t;++s){let t=this.Of[s];e.push(os.Qf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}t0(i){const e=[];this.$f();for(let t=0,s=this.kf.length;t<s;++t){const h=this.kf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Of.length;t<s;++t){const r=this.Of[t](i);r instanceof Promise&&e.push(r)}return this.Xf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async s0(t){return this.t0(t)}async i0(i){this.$f();for(let t=0,s=this.kf.length;t<s;++t){const e=this.kf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Of.length;t<s;++t){const h=this.Of[t](i);h instanceof Promise&&await h}return this.Xf(),!i.defaultPrevented}*e0(i){this.$f();for(let t=0,s=this.kf.length;t<s;++t){const e=this.kf[t](i);os.ta(e)&&(yield*e)}for(let t=0,s=this.Of.length;t<s;++t){const h=this.Of[t](i);os.ta(h)&&(yield*h)}this.Xf()}}}{const as=self.Ns;as.Event.h0=class extends as.Sr{constructor(){super(),this.r0=new Map,this.n0=!1}vr(){if(this.n0)throw new Error("already released");this.o0(),this.n0=!0,as.vr(this)}Gr(){return this.n0}o0(){if(this.r0){for(let t of this.r0.values())t.vr();this.r0.clear()}}a0(t,s){let i=this.r0.get(t);return i||(s?(i=as.Mr(as.Event.Pf,t),this.r0.set(t,i),i):null)}l0(t){return this.r0.has(t)}addEventListener(t,s,i){let e=this.a0(t,!0);e.Wf(s,!!i)}removeEventListener(t,s,i){let e=this.a0(t,!1);e&&(e.Hf(s,!!i),e.zf())&&this.r0.delete(t)}dispatchEvent(t){const s=this.a0(t.type,!1);return!s||(t.cancelable?s.qf(t):s.Yf(t))}u0(t){const s=this.a0(t.type,!1);return s?(t.Ef=!0,s.Zf(t)):Promise.resolve(!0)}async c0(t){const s=this.a0(t.type,!1);if(!s)return!0;this.r0.delete(t.type),t.Ef=!0;const i=await s.Zf(t);return s.vr(),i}async f0(t){const s=this.a0(t.type,!1);return!s||s.s0(t)}d0(t){const s=this.a0(t.type,!1);return!s||s.t0(t)}async p0(t){const s=this.a0(t.type,!1);return!s||s.i0(t)}m0(t){const s=this.a0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.e0(t)}Kf(t){for(const s of this.r0.values())s.Kf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Uf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Ns),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.ai.hi("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Qf=function(i){let e=null;return t.isDebug&&(e=t.me()),new Promise((t,s)=>{u.push({Uf:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.Qf.g0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.y0(i)){let t=s.S0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Ns),e=1e3,h=100,r=-1,n=(i.w0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.b0=class{constructor(t,s){this.M0=t,this.v0=1e3*s,this.x0=0,this.G0=!1}T0(){let t=i.w0();this.x0=t+this.v0,this.G0||(a.add(this),this.G0=!0),-1===n?(o=this.x0,n=self.setTimeout(s,this.v0+h)):this.x0<o&&o>t+e&&(self.clearTimeout(n),o=this.x0,n=self.setTimeout(s,this.v0+h))}y0(t){return!(t>=this.x0)||(this.M0()?(this.x0=t+this.v0,!0):this.G0=!1)}S0(){return this.x0}_0(){this.G0&&(a.delete(this),this.G0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}vr(){this._0(),this.M0=null}}}{const ls=self.Ns;ls.I0=class us{constructor(t){this.C0=!1,this.R0=t}A0(){this.C0||(this.C0=!0,this.R0&&(this.R0(),this.R0=null))}E0(){return this.C0}vr(){this.A0()}static vr(t){return new us(()=>t.vr())}static P0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.F0;for(let t of i)s.addEventListener(t,e,h),r.Rc(ls.Mr(ls.I0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.Mr(ls.I0,()=>s.removeEventListener(i,e,h))}},ls.k0=class extends ls.I0{D0(t){this.R0=t}},ls.F0=class extends ls.I0{constructor(...s){super(),this.O0=new Set;for(let t of s)this.Rc(t)}Rc(...s){if(this.C0)throw new Error("already disposed");for(let t of s)this.O0.add(t)}L0(t){if(this.C0)throw new Error("already disposed");this.O0.delete(t)}B0(){if(this.C0)throw new Error("already disposed");if(this.O0){for(let t of this.O0)t.A0();this.O0.clear()}}E0(){return this.C0}A0(){if(this.C0)throw new Error("already disposed");this.C0=!0;for(let t of this.O0)t.A0();this.O0.clear(),this.O0=null}vr(){this.A0()}}}{const cs=self.Ns;cs.N0=class extends cs.Sr{constructor(){super(),this.W0=0,this.pl=0,this.j0=0,this.V0=0}Rc(t){this.pl=(t=+t)-this.W0,this.j0=this.V0+this.pl,this.W0=this.j0-this.V0-this.pl,this.V0=this.j0}U0(t){this.V0-=+t}ri(){return this.V0}T0(){this.W0=0,this.pl=0,this.j0=0,this.V0=0}Set(t){this.W0=0,this.pl=0,this.j0=0,this.V0=+t}H0(t){this.W0=t.W0,this.pl=t.pl,this.j0=t.j0,this.V0=t.V0}vr(){}}}{const fs=self.Ns,n={};n.z0=function(t){this.J0=t,this.right=this.J0.q0,this.left=this.J0.q0,this.parent=null,this.color=!1,this.key=null},n.$0=function(t){this.size=0,this.q0=new n.z0(this),this.q0.color=!1,this.root=this.q0,this.root.parent=this.q0,this.compare=t||this.X0},n.$0.prototype.X0=function(t,s){return t<s?-1:s<t?1:0},n.$0.prototype.clone=function(){var t=new n.$0(this.compare);return t.Y0(this),t},n.$0.prototype.clear=function(){this.size=0,this.q0=new n.z0(this),this.q0.color=!1,this.root=this.q0,this.root.parent=this.q0},n.$0.prototype.K0=function(t){var s=t.right;t.right=s.left,s.left!=this.q0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.q0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.$0.prototype.Z0=function(t){var s=t.left;t.left=s.right,s.right!=this.q0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.q0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.$0.prototype.Q0=function(t){if(this.contains(t))this.td(t).key=t;else{for(var s=new n.z0(this),i=(s.key=t,this.q0),e=this.root;e!=this.q0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.q0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.q0,s.right=this.q0,s.color=!0,this.ed(s),this.size++}},n.$0.prototype.ed=function(t){for(;t!=this.q0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.K0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.q0&&this.Z0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.Z0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.q0&&this.K0(t.parent.parent))}this.root.color=!1},n.$0.prototype.hd=function(t){var s=t.left==this.q0||t.right==this.q0?t:this.rd(t),i=s.left!=this.q0?s.left:s.right;i.parent=s.parent,s.parent==this.q0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.nd(i),this.size--},n.$0.prototype.nd=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.K0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.Z0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.K0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.Z0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.K0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.Z0(t.parent),this.root))}t.color=!1},n.$0.prototype.remove=function(t){var s;return(t=this.td(t))!=this.q0?(s=t.key,this.hd(t),s):null},n.$0.prototype.od=function(t,s){this.remove(s)},n.$0.prototype.min=function(t){for(;t.left!=this.q0;)t=t.left;return t},n.$0.prototype.max=function(t){for(;t.right!=this.q0;)t=t.right;return t},n.$0.prototype.rd=function(t){if(t.right!=this.q0)return this.min(t.right);for(var s=t.parent;s!=this.q0&&t==s.right;)s=(t=s).parent;return s},n.$0.prototype.ud=function(t){if(t.left!=this.q0)return this.max(t.left);for(var s=t.parent;s!=this.q0&&t==s.left;)s=(t=s).parent;return s},n.$0.prototype.fd=function(t){if(0<this.size){var s=this.td(t);if(s==this.q0)return null;if(s.right!=this.q0)return this.min(s.right).key;for(var i=s.parent;i!=this.q0&&s==i.right;)i=(s=i).parent;return i!=this.q0?i.key:null}return null},n.$0.prototype.dd=function(t){if(0<this.size){var s=this.td(t);if(s==this.q0)return null;if(s.left!=this.q0)return this.max(s.left).key;for(var i=s.parent;i!=this.q0&&s==i.left;)i=(s=i).parent;return i!=this.q0?i.key:null}return null},n.$0.prototype.pd=function(){return this.min(this.root).key},n.$0.prototype.md=function(){return this.max(this.root).key},n.$0.prototype.td=function(t){for(var s=this.root;s!=this.q0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.$0.prototype.contains=function(t){return null!=this.td(t).key},n.$0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.$0.prototype.Y0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.Q0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.Q0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.Q0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.Q0(t[e])},n.$0.prototype.gd=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.od,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.$0.prototype.yd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.$0.prototype.range=function(t,s){var i=[];return this.Sd(function(t){i.push(t)},t,s),i},n.$0.prototype.wd=function(t,s){if(!this.bd())for(var i=this.min(this.root);i!=this.q0;){if(t.call(s,i.key,this))return;i=this.rd(i)}},n.$0.prototype.Md=function(t,s,i){if(!this.bd())for(var e=this.td(s);e!=this.q0;){if(t.call(i,e.key,this))return;e=this.rd(e)}},n.$0.prototype.vd=function(t,s,i){if(!this.bd())for(var e=this.min(this.root),h=this.td(s);e!=h;){if(t.call(i,e.key,this))return;e=this.rd(e)}},n.$0.prototype.Sd=function(t,s,i,e){if(!this.bd())for(var h=this.td(s),r=this.td(i);h!=r;){if(t.call(e,h.key,this))return;h=this.rd(h)}},n.$0.prototype.xd=function(t,s){if(!this.bd())for(var i=this.max(this.root);i!=this.q0;){if(t.call(s,i.key,this))return;i=this.ud(i)}},n.$0.prototype.forEach=function(t,s){if(!this.bd())for(var i=this.min(this.root);i!=this.q0;i=this.rd(i))t.call(s,i.key,i.key,this)},n.$0.prototype.some=function(t,s){if(!this.bd())for(var i=this.min(this.root);i!=this.q0;i=this.rd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.$0.prototype.every=function(t,s){if(this.bd())return!1;for(var i=this.min(this.root);i!=this.q0;i=this.rd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.$0.prototype.map=function(t,s){var i=[];if(!this.bd())for(var e=this.min(this.root);e!=this.q0;e=this.rd(e))i.push(t.call(s,e.key,e.key,this));return i},n.$0.prototype.filter=function(t,s){var i=[];if(!this.bd())for(var e=this.min(this.root);e!=this.q0;e=this.rd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.$0.prototype.getCount=function(){return this.size},n.$0.prototype.bd=function(){return 0==this.size},n.$0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.bd())return!0;for(var e=this.min(this.root);e!=this.q0;e=this.rd(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.$0.prototype.intersection=function(t){var s=new n.$0(this.compare);if(!this.bd())for(var i=this.min(this.root);i!=this.q0;i=this.rd(i))t.contains.call(t,i.key,i.key,this)&&s.Q0(i.key);return s},fs.$0=class extends fs.Sr{constructor(t){super(),this.Gd=new n.$0(t),this.Td=!1,this._d=new Set,this.Id=new Set}Rc(t){this.Td?this.Gd.contains(t)?this.Id.delete(t):this._d.add(t):this.Gd.Q0(t)}L0(t){this.Td?this.Gd.contains(t)?this.Id.add(t):this._d.delete(t):this.Gd.remove(t)}hi(t){return this.Td?!!this._d.has(t)||!this.Id.has(t)&&this.Gd.contains(t):this.Gd.contains(t)}Sc(){this.Gd.clear(),this._d.clear(),this.Id.clear()}toArray(){if(this.Td)throw new Error("cannot be used in queueing mode");return this.Gd.getValues()}xc(){return this.Gd.getCount()+this._d.size-this.Id.size}wc(){return 0===this.xc()}Cd(){if(this.wc())throw new Error("empty set");if(this.Td)throw new Error("cannot be used in queueing mode");const t=this.Gd,s=t.min(t.root);return s.key}Rd(){if(this.wc())throw new Error("empty set");if(this.Td)throw new Error("cannot be used in queueing mode");const t=this.Cd();return this.L0(t),t}Ad(t){if(this.Td!==(t=!!t)&&!(this.Td=t)){for(const s of this.Id)this.Gd.remove(s);this.Id.clear();for(const i of this._d)this.Gd.Q0(i);this._d.clear()}}Ed(t){this.Gd.forEach(t)}*values(){if(!this.wc()){const s=this.Gd;for(let t=s.min(s.root);t!=s.q0;t=s.rd(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ns;ds.Pd=class{constructor(t=ds.hardwareConcurrency){this.Fd=t,this.kd=[],this.Dd=0}Rc(i){return new Promise((t,s)=>{this.kd.push({Uf:i,resolve:t,reject:s}),this.Od()})}Ld(i){for(let t=0,s=this.kd.length;t<s;++t)if(this.kd[t].Uf===i)return t;return-1}Bd(t,s){const i=this.Ld(t);if(-1===i)throw new Error("cannot find promise to resolve");this.kd[i].resolve(s),this.kd.splice(i,1)}Nd(t,s){const i=this.Ld(t);if(-1===i)throw new Error("cannot find promise to reject");this.kd[i].reject(s),this.kd.splice(i,1)}async Od(){if(this.kd.length&&!(this.Dd>=this.Fd)){this.Dd++;const s=this.kd.shift();try{const t=await s.Uf();s.resolve(t)}catch(t){s.reject(t)}this.Dd--,this.Od()}}static async Wd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ns;ps.jd=class{constructor(t,s,i){this.M0=t,this.Vd=s,this.Ud=i||2*s,this.Hd=-1,this.zd=-1/0,this.Jd=()=>this.qd(),this.$d=!1,this.Xd=!1,this.Yd=null}Kd(t){this.Xd=!!t}Zd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Ud:this.Vd}Qd(...e){if(-1===this.Hd){this.Yd=e;let t=ps.w0(),s=t-this.zd,i=this.Zd();i<=s&&this.Xd?(this.zd=t,this.t1()):this.Hd=self.setTimeout(this.Jd,Math.max(i-s,4))}}t1(){this.$d=!0;const t=this.Yd;this.Yd=null,t?this.M0(...t):this.M0(),this.$d=!1}T0(){this.$d||(this.s1(),this.Yd=null,this.zd=ps.w0())}qd(){this.Hd=-1,this.zd=ps.w0(),this.t1()}s1(){-1!==this.Hd&&(self.clearTimeout(this.Hd),this.Hd=-1)}vr(){this.s1(),this.M0=null,this.Yd=null,this.Jd=null}}}{const ms=self.Ns;ms.i1=class{constructor(){this.e1=new Map,this.h1=!1,this.n1=null,this.o1=null,this.a1=null,this.l1=null}u1(t){this.h1=!!t}c1(){return this.h1}f1(t){this.n1=t}d1(t){if(this.n1)return this.n1(t);throw new Error("no get base size callback set")}m1(t){this.o1=t}S1(t,s,i,e,h,r){if(this.o1)return this.o1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}w1(t){this.a1=t}b1(t){if(!this.a1)throw new Error("no release result callback set");this.a1(t)}M1(t){this.l1=t}v1(){if(!this.l1)throw new Error("no redraw callback set");this.l1()}G1(t){let s=this.e1.get(t);return s||(s=ms.Mr(ms.T1,this,t),this.e1.set(t,s)),s._1(),s}I1(t){this.e1.delete(t.C1())}R1(){for(const t of this.e1.values())t.A1(),t.E1()}}}{const gs=self.Ns;gs.T1=class{constructor(t,s){this.P1=t,this.F1=s,this.D1=0,this.O1=0,this.L1=0,this.B1=this.P1.d1(s).then(t=>{this.P1&&(this.O1=t[0],this.L1=t[1],this.P1.v1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.N1=!0,this.P1&&this.P1.v1()}),this.W1=0,this.j1=0,this.V1=0,this.U1=0,this.H1=!1,this.z1=null,this.J1=!1,this.N1=!1}vr(){if(this.D1<=0)throw new Error("already released");this.D1--,0===this.D1&&this.q1()}A1(){this.z1&&(this.P1.b1(this.z1),this.z1=null)}q1(){this.A1(),this.P1.I1(this),this.P1=null}C1(){return this.F1}_1(){this.D1++}X1(){return 0<this.D1}Y1(){return this.z1}E1(){this.J1=!0}async K1(e,h,r){if(0!==h&&0!==r&&!this.N1&&!this.H1){let t=gs.Yr(Math.ceil(h)),s=gs.Yr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.P1.c1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.W1&&s<=this.j1)||this.J1){this.H1=!0,this.W1=t,this.j1=s;const l=await this.P1.S1(this.F1,e,this.W1,this.j1,h,r);this.P1&&(this.A1(),this.z1=l,this.V1=h,this.U1=r,this.H1=!1,this.J1=!1,this.P1.v1())}}}Z1(){return this.B1}Q1(){return this.O1}tp(){return this.L1}sp(){return this.V1}ip(){return this.U1}ep(){return this.N1}}}{let s=function(t){return bs.get(t)};s;const c=self.Ns,ys=(c.hp="\ufeff",new Set("0123456789")),Ss=(c.rp=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.np=function(t){return Ss.has(t)},c.op=function(t){return[...t].filter(t=>!c.np(t)).join("")},c.lp=function(t){for(const s of t)if(!c.np(s))return!1;return!0},c.up=function(t){for(const s of t)if(!c.np(s))return!1;return!0},c.cp=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.fp=function(t){return[...t].filter(t=>!c.cp(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.pp=function(t){return!c.np(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),bs=(c.mp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.gp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.rp(t))break;--i}return s.substr(0,i)},c.yp=function(t){let s=c.gp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,vs=(c.Sp=function(t){return t.replace(Ms,s)},c.wp=function(t){let s=c.bp(t,"\\","\\\\");return s=c.bp(s,'"','\\"'),s=c.bp(s,"\t","\\t"),s=c.bp(s,"\r",""),c.bp(s,"\n","\\n")},c.Mp=function(t){let s=c.bp(t,"&","&amp;");return s=c.bp(s,"<","&lt;"),s=c.bp(s,">","&gt;"),c.bp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.pe=function(t){return t.replace(vs,"\\$&")},c.vp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.xp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.bp=function(t,s,i){return t.replaceAll(s,()=>i)},c.Gp=function(t,s,i){return t.replace(new RegExp(c.pe(s),"gi"),()=>i)},c.Tp=function(t,s){"string"==typeof s?t.textContent=s:s._p()?t.textContent=s.toString():(t.innerHTML=s.Ip(),s instanceof c.Dh&&s.Cp(t))},c.Rp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Dh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Dh?s.equals(t):t===s},c.Ap=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Ep=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Pp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Fp=function(t,s){return s<t?1:t<s?-1:0},c.kp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.Dp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Op=function*(t){for(const s of xs.segment(t))yield s.segment},c.Lp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={Bp:!(c.Np=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Wp:!0,jp:!0,Vp:!0,Up:!0};c.Hp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Wp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.jp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Vp){const a=Math.floor(t/60);(0<a||i.length||!s.Up)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Up){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.Bp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.zp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Jp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.qp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Qn(i,4,"0"),c.Qn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.$p=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Xp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Yp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.bp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ns),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Dh=class{constructor(t,s){if(this.Kp=s&&s.Zp?t:f.Sp(t),this.Qp="",this.tm=!1,this.hm=[],this.rm=[],s){if(this.tm=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.hm=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.rm=s.tips}}this.nm=this.Kp.includes("["),this.lm=this.tm&&this.Kp.includes("\n"),this.um=!this.nm&&!this.lm&&!this.Kp.includes("&"),this.fm=!1,this.pm=[]}toString(){return this.Kp}valueOf(){return this.Kp}_p(){return this.um}gm(){return this.nm?this.Kp.replace(i,""):this.Kp}Ip(){if(this.um)return this.Kp;if(!this.Qp&&this.Kp){let t=this.Kp;this.nm&&(u=0,a=this.hm,l=this.rm,t=t.replace(i,s),a=null,l=null),this.lm&&(t=t.replace(e,"<br>")),this.Qp=t}return this.Qp}Cp(i){if(this.hm.length)for(let t=0,s=this.hm.length;t<s;++t){const e=this.hm[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Ip()===t.Ip():t instanceof f.Dh?this.Kp===t.Kp:this.Kp===t}ym(){if(!this.fm){let e=[],t=this.Kp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,Sm:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Sm:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),Sm:h.slice(0)});for(const c of e)c.text&&(c.text=this.wm(c.text));this.pm=e.map(t=>t.icon?f.Mr(f.Mm,{icon:t.icon,Sm:t.Sm}):f.Mr(f.vm,{xm:f.Dp(t.text),Sm:t.Sm})),this.fm=!0}return this.pm}wm(t){return t=f.bp(t,"\\[","["),f.bp(t,"\\\\","\\")}static Gm(t){return f.Mr(f.Dh,t,{Zp:!0}).gm()}static Tm(t){return t.replace(p,"")}}}{let l=function(t){return""!==t&&""!==t&&S.np(t)},a=function(t){return Is.has(t)},u=function(t){return S.pp(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const S=self.Ns,Is=new Set("");S._m=class{constructor(){this.Im=[],this.Cm=null}Rm(){return this.Im}Am(){return this.Im.length}Em(t){this.Cm=t}Pm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Fm()){const a=s(o);o.km(a.height),o.Dm(a.fontBoundingBoxAscent||0),o.Om(a.fontBoundingBoxDescent||0),o.Lm(a.Bm||0),o.Nm()?o.Wm(a.width):o.jm()&&o.Vm(this.Cm)}i+=o.Fm(),e=Math.max(e,o.Um()),h=Math.max(h,o.Hm()),r=Math.max(r,o.zm()),n=Math.max(n,o.Jm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,Bm:n}}qm(t,s,i,e,h,r){this.Im.push(S.Mr(S._m.$m,{Xm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Bm:r}))}_m(s,r,n,i,o){if("string"==typeof s&&(s=[S.Mr(S.vm,{xm:S.Dp(s)})]),S.Yn(this.Im),!(!s.length||1===s.length&&s[0].Nm()&&s[0].wc()||n<2)){if(1===s.length){const a=s[0];if(a.Nm()&&a.Ym()<=100&&!a.Km()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Bm:h}=r(a);if(t+=o,a.Wm(t),a.km(s),a.Dm(i||0),a.Om(e||0),a.Lm(h||0),t<=n)return void this.qm([a],t,s,i,e,h)}}let t;t="word"===i?this.Zm(s):"cjk"===i?this.Qm(s):this.tg(s),this.sg(t,r,n,o)}}Zm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.ig();if(h.jm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.eg())if(y(n))0<i.length&&s.push(i),s.push([S.Mr(S.vm,{xm:["\n"],Sm:r})]),i=[];else if(0===i.length)i.push(S.Mr(S.vm,{xm:[n],Sm:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.ig()===r?a.hg(n):i.push(S.Mr(S.vm,{xm:[n],Sm:r}))}else s.push(i),i=[S.Mr(S.vm,{xm:[n],Sm:r})],e=o}}return 0<i.length&&s.push(i),s}Qm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.ig();if(h.jm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.eg())if(y(n))0<i.length&&s.push(i),s.push([S.Mr(S.vm,{xm:["\n"],Sm:r})]),i=[];else{if(0===i.length)i.push(S.Mr(S.vm,{xm:[n],Sm:r}));else if(e||u(n)){const o=i.at(-1);o.ig()===r?o.hg(n):i.push(S.Mr(S.vm,{xm:[n],Sm:r}))}else s.push(i),i=[S.Mr(S.vm,{xm:[n],Sm:r})];e=a(n)}}return 0<i.length&&s.push(i),s}tg(t){const s=[];for(const i of t)if(i.Nm()){const e=i.eg();S.er(s,e.map(t=>[S.Mr(S.vm,{xm:[t],Sm:i.ig()})]))}else s.push([i]);return s}rg(t){return t.map(t=>t.ng())}og(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Nm()&&i[0].Nm()&&i[0].ig()===t.ig()&&(t.ag(i[0].eg()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.ng())}}sg(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Nm()&&1===u[0].Ym()&&y(u[0].eg()[0])){if(0===n){const c=S.Mr(S.vm,{xm:[" "],Sm:u[0].ig()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Bm||0}this.qm(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.rg(h),p=(this.og(d,u),this.Pm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.qm(h,r,n,o,a,l),h=[],u[0].Nm()&&S.up(u[0].eg()))r=0,n=0,o=0,a=0,l=0;else{this.og(h,u);const g=this.Pm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Bm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Bm}0<h.length&&this.qm(h,r,n,o,a,l),this.lg(s,e)}lg(s,i){for(const e of this.Im){const h=e.ug();if(h.length){let t=h.at(-1);if(t.Nm()){const r=t.eg(),n=r.slice(0);if(c(n),0===n.length)e.fg(-t.Fm()),h.pop();else if(n.length<r.length){t.dg(n);const o=s(t).width,a=t.Fm()-o;t.Wm(o),e.fg(-a)}0!==i&&0<h.length&&((t=h.at(-1)).fg(i),e.fg(i))}}}}Sc(){S.Yn(this.Im)}pg(){return this.Im.reduce((t,s)=>Math.max(t,s.Fm()),0)}mg(){return this.Im.reduce((t,s)=>t+s.Um(),0)}}}{const Cs=self.Ns;Cs._m.$m=class{constructor(t){this.pm=t.Xm||[],this.gg=t.width||-1,this.yg=t.height||-1,this.Sg=t.fontBoundingBoxAscent||-1,this.wg=t.fontBoundingBoxDescent||-1,this.bg=t.Bm||-1,this.Mg=0,this.vg=0}Xm(){return this.pm.values()}*xg(){const s=this.pm;for(let t=s.length-1;0<=t;--t)yield s[t]}ug(){return this.pm}fg(t){this.gg+=t}Fm(){return this.gg}Um(){return this.yg}Gg(){return this.Sg}zm(){return this.wg}Jm(){return this.bg}Tg(t){this.Mg=t}_g(){return this.Mg}Ig(t){this.vg=t}Cg(){return this.vg}}}{const Rs=self.Ns;Rs.Rg=class{constructor(t){this.Ag=t.Sm||[],this.gg=t.width||-1,this.yg=t.height||-1,this.Sg=t.fontBoundingBoxAscent||-1,this.wg=t.fontBoundingBoxDescent||-1,this.bg=t.Bm||-1,this.Mg=0,this.vg=0}Nm(){return!1}jm(){return!1}ig(){return this.Ag}Eg(s){const i=this.Ag;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Pg(t){return!!this.Eg(t)}Fg(){const t=new Map;for(const s of this.Ag)t.set(s.tag,s.param);return t}fg(t){this.gg+=t}Wm(t){this.gg=t}Fm(){return this.gg}km(t){this.yg=t}Um(){return this.yg}Dm(t){this.Sg=t}Hm(){return this.Sg}Om(t){this.wg=t}zm(){return this.wg}Lm(t){this.bg=t}Jm(){return this.bg}Tg(t){this.Mg=t}_g(){return this.Mg}Ig(t){this.vg=t}Cg(){return this.vg}}}{const As=self.Ns;As.vm=class extends As.Rg{constructor(t){super(t),this.kg=t.xm}Nm(){return!0}ag(t){As.er(this.kg,t),this.gg=-1,this.yg=-1,this.Sg=-1,this.wg=-1,this.bg=-1}hg(t){this.kg.push(t)}ng(){return As.Mr(As.vm,{xm:this.kg.slice(0),Sm:this.Ag,width:this.gg,height:this.yg,fontBoundingBoxAscent:this.Sg,fontBoundingBoxDescent:this.wg,Bm:this.bg})}eg(){return this.kg}dg(t){this.kg=t}Ym(){return this.kg.length}wc(){return 0===this.kg.length}Km(){return this.kg.includes("\n")}}}{const Es=self.Ns;Es.Mm=class extends Es.Rg{constructor(t){super(t),this.Dg=t.icon}jm(){return!0}Og(){return this.Dg}ng(){return Es.Mr(Es.Mm,{icon:this.Dg,Sm:this.Ag,width:this.gg,height:this.yg,fontBoundingBoxAscent:this.Sg,fontBoundingBoxDescent:this.wg,Bm:this.bg})}Lg(t){if(!t)return null;let s=Number(this.Dg);return String(s)===this.Dg?(s=Math.floor(s),t.Bg(s)):t.Ng(this.Dg)}Vm(t){const s=this.Lg(t);this.gg=s?this.yg*s.Fm()/s.Um():0}Wg(t){const s=this.Lg(t);return s?s.Wg():null}Ym(){return 1}}}{const Ps=self.Ns;Ps.jg=class{constructor(t){this.Vg=new Map,this.Ug=t.Hg,this.zg=t.Jg}vr(){for(const t of this.Vg.values())t.vr();this.Vg.clear()}qg(t){let s=this.Vg.get(t);if(!s){const i=this.Ug(t);s=Ps.Mr(Ps.$g,this,{source:t,Xg:i}),this.Vg.set(t,s)}return s}Yg(t){return this.Vg.has(t)}Kg(t){const s=this.Vg.get(t);s&&s.vr(),this.Vg.delete(t)}async Zg(t){return this.zg(t)}}}{const Fs=self.Ns;Fs.$g=class{constructor(t,s){this.Qg=t,this.ty=s.source,this.iy=[],this.ey=new Map,this.hy=!1,this.ny=!1,this.oy=null;const i=s.Xg.uy;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.Mr(Fs.my,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.iy.push(h),e.tag&&this.ey.set(e.tag.toLowerCase(),h)}}vr(){for(const t of this.iy)t.vr();Fs.Yn(this.iy),this.ey.clear(),this.Qg=null,this.ty=null}gy(){return this.hy}yy(){return this.ny}Sy(){return this.oy||(this.oy=this.wy()),this.oy}async wy(){if(!this.hy){this.hy=!0,this.ny=!0;const t=await this.Qg.Zg(this.ty);if(this.Qg){const i=t.uy;for(let t=0,s=Math.min(i.length,this.iy.length);t<s;++t){const e=i[t].by;this.iy[t].My(e)}this.ny=!1}}}Bg(t){return(t=Math.floor(t))<0||t>=this.iy.length?null:this.iy[t]}Ng(t){return this.ey.get(t.toLowerCase())||null}}}{const ks=self.Ns;ks.my=class{constructor(t,s){this.xy=t,this.ty=s.source||null,this.Gy=s.index,this.Ty=s.tag,this.gg=s.width,this.yg=s.height,this._y=null}vr(){this.gg=0,this.yg=0,this.xy=null}Iy(){return this.ty}Fm(){return this.gg}Um(){return this.yg}My(t){this._y=t}Wg(){return this._y}}}{let e=function(t,s,i,e){const h=Ns;Gh.W(Ls,i,s),Gh.W(Bs,t,s),Gh.Dt(h,Ls,Bs),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.kt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.Cy,f=n.Ry,d=n.Ay,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const S=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<S},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Ds=self.Ns,Os=self.vs,Gh=Os.As,Vh=Os.Es,xh=Os._s,Ls=Gh.create(),Bs=Gh.create(),Ns=Gh.create(),Ws=Vh.create(),js=xh.create(),Vs=Gh.create(),Us=Gh.create(),Hs=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),$s=Gh.create(),Xs=Gh.create(),Ys=Vh.C(0,0,1,1);Ds.Ey={Py(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Fy(t,s,i,e,h,r,n){const o=js,a=Ws;return xh.multiply(o,h,e),null!==xh.A(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},ky(t,s,i,e,h,r,n){const o=Ls,a=Bs;if(!Ds.Ey.Fy(t,s,0,e,h,r,o))return!1;if(!Ds.Ey.Fy(t,s,1,e,h,r,a))return!1;let l=Bs,u=(Gh.W(l,a,o),Ns),c=(Gh.set(u,0,0,1),-i),f=Gh.kt(u,l),d=0;if(0===f){const p=Gh.kt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.kt(o,u)+c)/f)<0)return!1;return Gh.Rt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Cy=NaN,this.Ry=NaN,this.Ay=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Cy=0<t?1:0,this.Ry=0<s?1:0,this.Ay=0<i?1:0}}Ds.Ey.Dy=class{constructor(){this.Oy=new Ks,this.Ly=new Ks,this.By=new Ks,this.Ny=new Ks,this.Wy=new Ks,this.jy=new Ks}Vy(t,s){const i=Ys;Ds.Ey.Fy(0,1,0,t,s,i,Vs),Ds.Ey.Fy(1,1,0,t,s,i,Us),Ds.Ey.Fy(0,0,0,t,s,i,Hs),Ds.Ey.Fy(1,0,0,t,s,i,zs),Ds.Ey.Fy(0,1,1,t,s,i,Js),Ds.Ey.Fy(1,1,1,t,s,i,qs),Ds.Ey.Fy(0,0,1,t,s,i,$s),Ds.Ey.Fy(1,0,1,t,s,i,Xs),e(Hs,Vs,Js,this.Oy),e(Vs,Us,qs,this.Ly),e(Us,zs,Xs,this.By),e(zs,Hs,$s,this.Ny),e($s,Js,qs,this.jy),e(zs,Us,Vs,this.Wy)}Uy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Oy)&&n(t,s,i,e,h,r,this.Ly)&&n(t,s,i,e,h,r,this.By)&&n(t,s,i,e,h,r,this.Ny)&&n(t,s,i,e,h,r,this.Wy)&&n(t,s,i,e,h,r,this.jy)}Hy(t,s,i){return!h(t,s,i,this.Wy)}}}{const Zs=self.Ns,Qs=self.vs,Gh=Qs.As,Vh=Qs.Es,xh=Qs._s,ti=xh.create(),si=Gh.C(0,0,0),ii=Gh.C(0,0,0),ei=Gh.C(0,0,0),hi=Gh.C(0,1,0),ri=(Vh.C(0,0,0,0),new Zs.fu),ni=new Zs.Rect,oi=new Zs.fu(0,0,1,0,1,1,0,1),ai={zy:1,Jy:1e4},li=xh.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Ey.qy=class{constructor(t){t=Object.assign({},ai,t),this.gg=0,this.yg=0,this.$y=Zs.Ar(45),this.Xy=Math.tan(this.$y/2),this.Yy=xh.create(),this.Ky=xh.create(),this.Zy=!1,this.Qy=t.zy,this.tS=t.Jy,this.sS=[],this.iS=new Map,this.eS=null,this.hS=null,this.rS=null,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=new Map,this.gS=null,this.yS=[],this.SS=new Map,this.wS=0,this.bS=0,this.MS=1,this.vS=[this.MS],this.xS=1,this.GS=[this.xS],this.TS=.5,this._S=[this.TS],this.IS=0,this.CS=!0,this.RS=!1}AS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}ES(){this.wS=0,this.bS=0,this.eS=null,this.hS=null,this.rS=null,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.PS()}FS(){this.ES(),this.gS=null}kS(){for(const t of this.sS)t.vr();this.ES()}Fm(){return this.gg}Um(){return this.yg}DS(t){return this.OS()?100:t/(2*this.LS())}BS(t){if(this.OS()){const s=t/(2*this.LS());return s/this.DS(t)}return 1}NS(t){this.Qy=t}WS(){return this.Qy}jS(t){this.tS=t}VS(){return this.tS}US(t){this.$y=t,this.Xy=Math.tan(this.$y/2)}HS(){return this.$y}LS(){return this.Xy}zS(){this.Zy=!1}JS(){this.Zy=!0}OS(){return!this.Zy}qS(){return this.Zy}$S(t,s,i=.5,e=.5){const h=this.WS(),r=this.VS(),n=this.HS();if(.5===i&&.5===e)this.XS()?xh.vt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.LS()*h,f=c*s;xh.bt(t,o*f,a*f,l*c,u*c,h,r),this.XS()&&xh.mul(t,li,t)}}YS(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.DS(i)*h*this.LS()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.XS()?xh.Tt(t,a,l,u,c,this.WS(),this.VS()):xh.ortho(t,a,l,u,c,this.WS(),this.VS())}KS(t,s,i,e,h,r=1){let n=1;this.OS()&&(n=200*this.LS()/h);const o=ei,a=(Gh.set(o,n,-n,1),si),l=ii;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh._t(t,a,l,e||hi),o[2]=r,xh.scale(t,t,o)}ZS(t,s,i,e,h,r,n,o){return Gh.set(si,t,s,i),Gh.set(ii,e,h,r),this.KS(ti,si,ii,hi,n,o),ti}QS(t){this.sS.push(t),this.iS.set(t.yf(),t)}iw(t){const s=this.sS.indexOf(t);-1!==s&&this.sS.splice(s,1),this.iS.delete(t.yf())}PS(){Zs.Yn(this.sS),this.iS.clear()}ew(t){return this.iS.get(t)||null}hw(){return this.eS}rw(){this.ow(this.eS)}aw(){return this.hS}lw(){this.ow(this.hS)}uw(){this.ow(this.rS)}fw(){this.ow(this.nS)}dw(){this.ow(this.oS)}pw(){this.ow(this.aS)}mw(){this.ow(this.lS)}gw(){this.ow(this.uS)}yw(){this.ow(this.cS)}Sw(){this.ow(this.fS)}ww(){this.ow(this.dS)}bw(){this.ow(this.pS)}Mw(t){this.gS=t}xw(){return this.gS}Gw(t,s,i,e){let h=Zs.Ey._w.Tw(t,s,i,e),r=this.mS.get(h);return r||(r=Zs.Mr(Zs.Ey._w,this,t,s,i,e),this.mS.set(h,r)),r.Iw(),r}Cw(t){t.Rw(),0===t.Aw()&&(this.gS===t&&(this.gS=null),this.mS.delete(t.Ew()),t.vr())}Pw(t){Zs.Yn(this.yS),this.SS.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.yS.push([h,r]),this.SS.set(e,{number:s,Fw:h,kw:r}),s++}}Dw(t){return this.yS[t]}Ow(t){return this.Dw(t)[0]}Lw(t){return this.Dw(t)[1]}Bw(t){const s=this.SS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Nw(t){const s=this.SS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Ww(t){this.wS=t}jw(){return this.wS}Vw(t){this.bS=t,this.gS=null}Uw(){return this.bS}$m(t,s,i,e){const h=Zs.Or(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.MS,a=r*o,l=n*o,u=this.xS;2===u?this.Hw(t,s,0,i,e,0,a,l):1===u?this.zw(t,s,0,i,e,0,a,l):this.Jw(t,s,0,i,e,0,a,l)}qw(t,s,i,e,h,r){const n=Zs.Or(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.MS,u=o*l,c=a*l,f=this.xS;2===f?this.Hw(t,s,i,e,h,r,u,c):1===f?this.zw(t,s,i,e,h,r,u,c):this.Jw(t,s,i,e,h,r,u,c)}Hw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,S=u+o+p,w=c+n,b=f-o,M=c-n-d,v=f+o-p;this.$w(m,g,i,w,b,r,M,v,r,y,S,i,oi)}zw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.$w(d,p,i,y,S,r,w,b,r,m,g,i,oi)}Jw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.$w(d,p,i,y,S,r,w,b,r,m,g,i,oi)}Xw(t,s,i,e,h,r){const n=Zs.Or(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.MS,u=o*l,c=a*l,f=this.xS;2===f?this.Yw(t,s,i,e,u,c,h,r):1===f?this.Kw(t,s,i,e,u,c,h,r):this.Zw(t,s,i,e,u,c,h,r)}Yw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,S=u+r+p,w=c+h,b=f-r,M=c-h-d,v=f+r-p;ri.set(m,g,w,b,M,v,y,S),ni.set(n,0,o,0),this.Qw(ri,ni)}Kw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.Qw(ri,ni)}Zw(t,s,i,e,h,r,n,o){const a=this.TS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.Qw(ri,ni)}tb(t,s,i,e){const h=.5*this.MS,r=this.xS;2===r?this.sb(t,s,i,e,h):1===r?this.ib(t,s,i,e,h):this.eb(t,s,i,e,h)}sb(t,s,i,e,h){this.Hw(t,s,0,i,s,0,0,h),this.Hw(i,s,0,i,e,0,h,0),this.Hw(i,e,0,t,e,0,0,-h),this.Hw(t,e,0,t,s,0,-h,0)}ib(t,s,i,e,h){this.zw(t,s,0,i,s,0,0,h),this.zw(i,s,0,i,e,0,h,0),this.zw(i,e,0,t,e,0,0,-h),this.zw(t,e,0,t,s,0,-h,0)}eb(t,s,i,e,h){this.Jw(t,s,0,i,s,0,0,h),this.Jw(i,s,0,i,e,0,h,0),this.Jw(i,e,0,t,e,0,0,-h),this.Jw(t,e,0,t,s,0,-h,0)}hb(t){this.tb(t.Ol(),t.Ll(),t.Bl(),t.Nl())}rb(t){const s=Zs.Or(t.yn(),t.Sn(),t.wn(),t.bn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.MS,r=i*h,n=e*h,o=this.xS;2===o?this.nb(t,r,n):1===o?this.ob(t,r,n):this.ab(t,r,n)}nb(t,s,i){this.Hw(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.Hw(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.Hw(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.Hw(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}ob(t,s,i){this.zw(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.zw(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.zw(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.zw(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}ab(t,s,i){this.Jw(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.Jw(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.Jw(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.Jw(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}lb(t){this.MS=t,this.vS[this.vS.length-1]=t}ub(){return this.MS}cb(t){if(100<=this.vS.length)throw new Error("pushed too many line widths - check push/pop pairs");this.vS.push(t),this.MS=t}fb(){if(this.vS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.vS.pop(),this.MS=this.vS.at(-1)}pb(){this.xS=0,this.GS[this.GS.length-1]=0}mb(){this.xS=1,this.GS[this.GS.length-1]=0}gb(){this.xS=2,this.GS[this.GS.length-1]=0}yb(t){if("butt"===t)this.Sb();else if("square"===t)this.wb();else{if("zag"!==t)throw new Error("invalid line cap");this.bb()}}Sb(){if(100<=this.GS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.GS.push(0),this.xS=0}wb(){if(100<=this.GS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.GS.push(1),this.xS=1}bb(){if(100<=this.GS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.GS.push(2),this.xS=2}Mb(){if(this.GS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.GS.pop(),this.xS=this.GS.at(-1)}vb(t){this.TS=t,this._S[this._S.length-1]=t}xb(){return this.TS}Gb(t){if(100<=this._S.length)throw new Error("pushed too many line offsets - check push/pop pairs");this._S.push(t),this.TS=t}Tb(){if(this._S.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this._S.pop(),this.TS=this._S.at(-1)}_b(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.Ib(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.Ib(h,r,o,a,l,u,c,f)}}}Cb(){return 3}Rb(){this.Ab(!0),this.IS++}Eb(){return this.IS}Pb(){this.IS++}Fb(t){this.CS=!!t}kb(){return this.CS}Db(t){this.RS=!!t}Ob(){return this.RS}Lb(){return!1}XS(){return!1}Bb(){}Nb(){}Wb(){}jb(){return this.Bb()+this.Nb()+this.Wb()}Vb(){return Zs.Mr(Zs.Ey.Ub,this)}}}{const ui=self.Ns;ui.Ey.Hb=class{constructor(t,s){this._r=s.name,this.zb=t,this.Jb=s.extendBoxHorizontal||0,this.qb=s.extendBoxVertical||0,this.$b=!!s.crossSampling,this.Xb=!!s.mustPreDraw,this.Yb=!!s.preservesOpaqueness,this.Kb=!!s.supports3dDirectRendering,this.Zb=!!s.animated,this.Qb=!!s.blendsBackground,this.tM=!!s.usesDepth,this.sM=!1,this.iM=this.$b||this.Qb||0!==this.Jb||0!==this.qb}vr(){this.zb=null}eM(){return this.zb}yf(){return this._r}hM(){return 0!==this.Jb||0!==this.qb}rM(){return this.Jb}nM(){return this.qb}oM(){return this.$b}aM(){return this.Xb}lM(){return this.Yb}uM(){return this.Kb}cM(){return this.Zb}fM(){return this.Qb}dM(){return this.tM}pM(){return this.sM}mM(){return this.iM}gM(){return!1}}}{const ci=self.Ns;ci.Ey._w=class{constructor(t,s,i,e,h){this.zb=t,this.D1=0,this.yM=null,this.SM="",this.wM=i,this.bM=ci.Mr(ci.ra),this.bM.set(e),this.MM=h,"string"==typeof s?this.SM=s:(this.yM=s,this.SM=this.yM.yf())}vr(){if(0<this.D1)throw new Error("releasing state group still in use");this.zb=null,this.yM=null,this.SM=""}vM(){const t=this.zb;t.ow(this.yM),t.xM(this.wM),t.GM(this.bM),t.Vw(this.MM),t.Mw(this)}Ew(){return ci.Ey._w.Tw(this.SM,this.wM,this.bM,this.MM)}Iw(){++this.D1}Rw(){--this.D1}Aw(){return this.D1}TM(){this.yM=null}_M(t){if(this.yM=t.ew(this.SM),!this.yM)throw new Error("failed to restore shader program")}static Tw(t,s,i,e){const h="string"==typeof t?t:t.yf();return h+","+s+","+i.ba()+","+i.Ma()+","+i.xa()+","+i.Ga()+","+e}}}{let e=function(t,s,i){const e=i.yn(),h=i.Sn(),r=i.wn()-e,n=i.bn()-h,o=i.xn()-e,a=i.Gn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ns,fi=_.Mr(_.fu);_.Ey.IM=class{constructor(t,s,i){this.CM=t,this.RM=s,this.AM=i,this.dl=NaN,this.pl=NaN,this.MM=NaN,this.EM=NaN,this.PM=NaN,this.dl=0,this.pl=0,this.MM=0,this.EM=0,this.PM=0}FM(t,s,i,e){this.dl=t,this.pl=s,this.EM=i,this.PM=e}kM(){return this.dl}DM(t){this.dl!==t&&(this.dl=t,this.CM.OM())}LM(){return this.pl}BM(t){this.pl!==t&&(this.pl=t,this.CM.OM())}NM(){return this.MM}WM(t){this.MM!==t&&(this.MM=Math.max(t,0),this.CM.OM())}jM(){return this.EM}VM(t){this.EM=t}UM(){return this.PM}HM(t){this.PM=t}zM(t,s,i){[this.dl,this.pl]=e(t.dl,t.pl,s),this.MM=t.MM,this.EM=_.Ot(i.Ol(),i.Bl(),t.EM),this.PM=_.Ot(i.Ll(),i.Nl(),t.PM)}JM(t,s,i){[this.dl,this.pl]=e(t.dl,t.pl,s),this.MM=t.MM,[this.EM,this.PM]=e(t.EM,t.PM,i)}qM(){return{x:this.kM(),y:this.LM(),z:this.NM(),u:this.jM(),v:this.UM()}}$M(t){this.DM(t.x),this.BM(t.y),t.hasOwnProperty("z")&&this.WM(t.z),this.VM(t.u),this.HM(t.v)}XM(){return this.CM}YM(){return this.RM}KM(){return this.AM}},_.Ey.ZM=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.QM=i,this.tv=t,this.sv=s||null,this.hv=[],this.rv=0,this.nv=0,this.ov=1,this.av=1,this.lv=0,this.uv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.Mr(_.Ey.IM,this,t,s),o=t/e,a=s/h;n.FM(o,a,o,a),r.push(n)}this.hv.push(r)}}vr(){_.Yn(this.hv)}cv(){return this.QM}dv(){return this.tv}pv(){return this.sv}gv(){return this.hv}OM(){this.uv=!0}yv(){if(this.uv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.hv)for(const n of r){const o=n.kM(),a=n.LM();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.NM())}this.rv=t,this.nv=s,this.ov=i,this.av=e,this.lv=h,this.uv=!1}}Sv(){return this.yv(),this.rv}wv(){return this.yv(),this.nv}bv(){return this.yv(),this.ov}Mv(){return this.yv(),this.av}vv(){return this.yv(),this.lv}xv(){return 0<this.vv()}Gv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.QM||s<0||s>=this.tv?null:this.hv[s][t]}Tv(t,i,e){const h=e instanceof _.Rect;if(t.cv()!==this.cv()||t.dv()!==this.dv())throw new Error("source mesh wrong size");const r=t.hv,n=this.hv;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.zM(l,i,e):u.JM(l,i,e)}}}_v(r){let n=this.hv,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.jM(),e.UM(),a.jM(),a.UM(),l.jM(),l.UM(),h.jM(),h.UM()),r.$w(e.kM(),e.LM(),e.NM(),a.kM(),a.LM(),a.NM(),l.kM(),l.LM(),l.NM(),h.kM(),h.LM(),h.NM(),fi),e=a,h=l}o=i}}Iv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.hv,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.kM(),e.LM(),e.NM()),[m,g,y]=a(u.kM(),u.LM(),u.NM()),[S,w,b]=a(c.kM(),c.LM(),c.NM()),[M,v,x]=a(h.kM(),h.LM(),h.NM());o.qw(f,d,p,m,g,y),o.qw(f,d,p,S,w,b),o.qw(f,d,p,M,v,x),t===s-1&&o.qw(m,g,y,S,w,b),r===n-1&&o.qw(M,v,x,S,w,b),e=u,h=c}l=i}}Cv(t){let i=.99999999,e=t.Ku(),h=[],r=this.cv()-1,n=this.dv()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Cr(Math.floor(c*r),0,l),p=_.Cr(Math.floor(f*n),0,u),m=!0,g=0,y=0,S=0,w=-1,b=()=>{c=_.Cr(_.Ot(c,g,S),0,1),f=_.Cr(_.Ot(f,y,S),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Cr(Math.floor(c*r),0,l),p=_.Cr(Math.floor(f*n),0,u);const M=(t+2)%s;for(g=e[M],y=e[1+M],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const v=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.Cn(c,f,v,x,G,x,G,T),0!==w&&0<=(S=_.In(c,f,g,y,v,x,G,T,-.001))&&S<=i)b(),m=!m,w=0;else if(0<p&&2!==w&&0<=(S=_.In(c,f,g,y,v,x,G,x,.001))&&S<=i)b(),p--,m=!1,w=4;else if(d<l&&3!==w&&0<=(S=_.In(c,f,g,y,G,x,G,T,.001))&&S<=i)b(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(S=_.In(c,f,g,y,v,x,v,T,.001))&&S<=i)b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&0<=(S=_.In(c,f,g,y,v,T,G,T,.001))&&S<=i))break;b(),p++,m=!0,w=2}}}return _.Mr(_.Ju,h)}Rv(t,s){const i=this.Av(t);this.Ev(i),s.Qu(i)}Av(t){const i=[],e=t.Ku();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.Pv(h,r);i.push(n,o)}return i}Pv(t,s){const i=this.cv()-1,e=this.dv()-1,h=1/i,r=1/e,n=_.Cr(Math.floor(t*i),0,i-1),o=_.Cr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.Gv(n,o),d=this.Gv(n+1,o+1),p=_.Cn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.Gv(n+(p?1:0),o+(p?0:1)),[S,w,b]=_.Rn(t,s,a,l,m,g,u,c);return _.An(S,w,b,f.kM(),f.LM(),f.NM(),y.kM(),y.LM(),y.NM(),d.kM(),d.LM(),d.NM())}Ev(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.eo(i,e)}qM(){return{cols:this.cv(),rows:this.dv(),points:this.hv.map(t=>t.map(t=>t.qM()))}}$M(t){const i=this.cv(),e=this.dv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.Gv(t,s);n.$M(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Fv:i,kv:e,format:h,type:r}};d;const di=self.Ns,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={Dv:"clamp-to-edge",Ov:"clamp-to-edge",Lv:"trilinear",Bv:0,Nv:"rgba8",Wv:!0,jv:"default",premultiplyAlpha:!0,Vv:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Ey.Uv=class{constructor(t){this.zb=t,this.Hv=null,this.gg=0,this.yg=0,this.zv=!0,this.Jv="clamp-to-edge",this.qv="clamp-to-edge",this.$v="trilinear",this.Xv=0,this.Yv="rgba8",this.Kv=!1,this.Zv="default",this.D1=0}Qv(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.Hv)throw new Error("already created texture");if(this.Jv=t.Dv,this.qv=t.Ov,this.$v=t.Lv,this.Xv=t.Bv,this.Yv=t.Nv,this.Kv=!!t.Wv&&this.zb.kb(),this.Zv=t.jv,!yi.has(this.Jv)||!yi.has(this.qv))throw new Error("invalid wrap mode");if(!mi.has(this.$v))throw new Error("invalid sampling");if(!pi.has(this.Yv))throw new Error("invalid pixel format");if(!gi.has(this.Zv))throw new Error("invalid mipmap quality");if(this.zv=!0,s instanceof ArrayBuffer||null===s||t.Vv){if(this.gg=t.width,this.yg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.gg*this.yg*4)throw new Error("ArrayBuffer wrong size")}else this.gg=s.width,this.yg=s.height;if(this.gg<=0||this.yg<=0)throw new Error("invalid texture data size");if(t.Vv){const o=di.Ho(this.gg,this.yg),a=o.getContext("2d");a.drawImage(s,0,0,this.gg,this.yg),s=o}const i=di.Xr(this.gg)&&di.Xr(this.yg),e=this.zb.t2();if(this.gg>e||this.yg>e)throw new Error("texture data exceeds maximum texture size");const h=this.zb.s2(),r=this.zb.i2(),n=(this.Hv=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.Hv),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.Yv,h));if(this.zb.e2()||i||!this.h2())if(2<=r){let t;t=this.Kv?Math.floor(Math.log2(Math.max(this.gg,this.yg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.Fv,this.gg,this.yg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.gg,this.yg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.kv,this.gg,this.yg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.kv,this.gg,this.yg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.kv,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.gg,this.yg):s)instanceof ImageData){const c=di.Ho(this.gg,this.yg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Ho(di.Yr(this.gg),di.Yr(this.yg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.$v,u.drawImage(s,0,0,this.gg,this.yg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.kv,n.format,n.type,l)}null!==s&&this.n2(h),h.bindTexture(h.TEXTURE_2D,null),this.zb.o2(),this.D1=1,bi.add(this)}a2(t,s,i){if(i=Object.assign({},Si,i),this.Hv)throw new Error("already created texture");if(this.Jv=i.Dv,this.qv=i.Ov,this.$v=i.Lv,this.Yv=i.Nv,this.Kv=!!i.Wv&&this.zb.kb(),this.Zv=i.jv,!yi.has(this.Jv)||!yi.has(this.qv))throw new Error("invalid wrap mode");if(!mi.has(this.$v))throw new Error("invalid sampling");if(!pi.has(this.Yv))throw new Error("invalid pixel format");if(!gi.has(this.Zv))throw new Error("invalid mipmap quality");this.zv=!1,this.gg=Math.floor(t),this.yg=Math.floor(s);const e=di.Xr(this.gg)&&di.Xr(this.yg),h=this.zb.t2();if(this.gg<=0||this.yg<=0)throw new Error("invalid texture size");if(this.gg>h||this.yg>h)throw new Error("texture exceeds maximum texture size");if(!this.zb.e2()&&this.h2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.zb.s2(),n=this.zb.i2(),o=(this.Hv=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.Hv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.Yv,r)),a=2<=n?o.Fv:o.kv;r.texImage2D(r.TEXTURE_2D,0,a,this.gg,this.yg,0,o.format,o.type,null),this.n2(r),r.bindTexture(r.TEXTURE_2D,null),this.zb.o2(),this.D1=1,bi.add(this)}l2(t){if("default"===this.Zv)return this.zv?t.NICEST:t.FASTEST;if("low"===this.Zv)return t.FASTEST;if("high"===this.Zv)return t.NICEST;throw new Error("invalid mipmap quality")}h2(){return"clamp-to-edge"!==this.Jv||"clamp-to-edge"!==this.qv}u2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}n2(t){const s=di.Xr(this.gg)&&di.Xr(this.yg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.u2(t,this.Jv)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.u2(t,this.qv)),"nearest"===this.$v)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Kv=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.zb.e2())&&this.Kv){t.hint(t.GENERATE_MIPMAP_HINT,this.l2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.$v&&!this.zb.Ob();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Kv=!1;const i=this.zb.c2();i&&0<this.Xv&&"nearest"!==this.$v&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Xv,this.zb.f2()))}d2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Hv||this.D1<=0)throw new Error("texture not created");if(this.zv)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.zb.i2(),r=this.zb.s2(),n=(r.bindTexture(r.TEXTURE_2D,this.Hv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.Yv,r)),o=2<=h?n.Fv:n.kv;try{if(this.gg===i&&this.yg===e){const a=di.Xr(this.gg)&&di.Xr(this.yg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.zb.e2())&&this.Kv&&(r.hint(r.GENERATE_MIPMAP_HINT,this.l2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.gg=i,this.yg=e;const l=di.Xr(this.gg)&&di.Xr(this.yg);if(!this.zb.e2()&&this.h2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.zb.e2())&&this.Kv&&(r.hint(r.GENERATE_MIPMAP_HINT,this.l2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.zb.o2()}m2(){if(0<this.D1)throw new Error("texture still has references");if(!this.Hv)throw new Error("already deleted texture");bi.delete(this);const t=this.zb.s2();t.deleteTexture(this.Hv),this.Hv=null}g2(){return!!this.Hv}S2(){return this.Hv}eM(){return this.zb}w2(){this.D1++}b2(){if(this.D1<=0)throw new Error("no more references");this.D1--}M2(){return this.D1}Fm(){return this.gg}Um(){return this.yg}v2(){return this.zv}G2(){let t=this.gg*this.yg;switch(this.Yv){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Kv&&(t+=Math.floor(t/3)),t}static TM(){bi.clear()}static T2(){return bi.values()}}}{const Mi=self.Ns,vi=self.vs,Gh=vi.As,xh=vi._s,xi=new Set(["nearest","bilinear","trilinear"]),Gi={Lv:"trilinear",alpha:!0,depth:!1,_2:!0,I2:!0,C2:0},Ti=new Set;Mi.Ey.R2=class{constructor(t){this.zb=t,this.A2=null,this.E2=null,this.Hv=null,this.P2=null,this.gg=0,this.yg=0,this.F2=!0,this.$v="trilinear",this.D2=!0,this.O2=!1,this.L2=!0,this.B2=0,this.N2=xh.create(),this.W2=0,this.j2=0,this.V2=0}U2(t,s,i){i=Object.assign({},Gi,i);const e=this.zb.i2();if(this.Hv||this.P2)throw new Error("already created render target");if(this.$v=i.Lv,this.D2=!!i.alpha,this.O2=!!i.depth,this.L2=!!i._2,this.F2=!!i.I2,this.B2=i.C2,!xi.has(this.$v))throw new Error("invalid sampling");if(0<this.B2&&(e<2||this.L2))throw new Error("invalid use of multisampling");if(e<2&&(this.L2=!0),this.gg=t,this.yg=s,this.gg<=0||this.yg<=0)throw new Error("invalid render target size");this.H2();const h=this.zb.s2();if(this.A2=h.createFramebuffer(),this.O2&&(this.E2=h.createFramebuffer()),this.L2){this.Hv=this.zb.z2(this.gg,this.yg,{Lv:this.$v,Nv:this.D2?"rgba8":"rgb8",Wv:!1});const n=this.Hv.S2();h.bindFramebuffer(h.FRAMEBUFFER,this.A2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.O2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.E2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.P2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.P2);const o=this.D2?h.RGBA8:h.RGB8;if(0<this.B2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.B2>l&&(this.B2=l)}else this.B2=0}0===this.B2?h.renderbufferStorage(h.RENDERBUFFER,o,this.gg,this.yg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.B2,o,this.gg,this.yg),h.bindFramebuffer(h.FRAMEBUFFER,this.A2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.P2),this.O2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.E2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.P2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.zb.J2();this.O2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.A2),this.zb.q2()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}X2(t,s){if(this.gg!==t||this.yg!==s){this.gg=t,this.yg=s,this.H2();const i=this.zb.s2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.A2),this.Hv?this.Hv.d2(new ImageData(this.gg,this.yg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.P2),i.renderbufferStorage(i.RENDERBUFFER,this.D2?i.RGBA8:i.RGB8,this.gg,this.yg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.zb.J2());this.O2&&e&&(this.zb.q2()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}m2(){if(!this.Hv&&!this.P2)throw new Error("already deleted render target");Ti.delete(this);const t=this.zb.s2(),s=(this.Hv?(t.bindFramebuffer(t.FRAMEBUFFER,this.A2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.O2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.E2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.zb.Y2(this.Hv),this.Hv=null):this.P2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.A2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.O2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.E2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.P2),this.P2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.zb.i2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.A2),this.O2&&t.deleteFramebuffer(this.E2),this.zb.K2());s.Z2=null,this.A2=s.Q2=null}H2(){this.zb.$S(this.N2,this.gg/this.yg),this.W2=this.zb.HS(),this.j2=this.zb.WS(),this.V2=this.zb.VS()}tx(){return this.A2}ix(){return this.E2}eM(){return this.zb}hx(){return this.Hv}nx(){return this.zb.HS()===this.W2&&this.zb.WS()===this.j2&&this.zb.VS()===this.V2||this.H2(),this.N2}ox(){return"nearest"!==this.$v}ux(){return this.D2}mx(){return this.L2}gx(){return this.O2}Fm(){return this.gg}Um(){return this.yg}yx(){return this.F2}Sx(){return this.B2}wx(){const t={Lv:this.$v,alpha:this.D2,_2:this.L2};return this.F2||(t.width=this.gg,t.height=this.yg),t}bx(t){return"nearest"!==(t=Object.assign({},Gi,t)).Lv===this.ox()&&!!t.alpha===this.ux()&&!!t.depth===this.gx()&&!(2<=this.zb.i2()&&!!t._2!==this.mx())&&("number"==typeof t.width||"number"==typeof t.height?!this.yx()&&this.Fm()===Math.floor(t.width)&&this.Um()===Math.floor(t.height):this.yx())}Mx(){return this.Hv?this.Hv.S2():null}G2(){return this.Hv?this.Hv.G2():this.gg*this.yg*(this.D2?4:3)}static async xx(t,s){const i=await t.Gx(s,!0);return Mi.qo(i)}static TM(){Ti.clear()}static Tx(){return Ti.values()}static _x(t,s){for(const i of Ti)i.yx()&&i.X2(t,s)}}}{const m=self.Ns,_i=self.vs,Gh=_i.As,xh=_i._s,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Ey.Ix=class extends m.Ey.Hb{static async Cx(t,s){const i=t.s2(),e=s.src,h=s.Rx,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Ax());if(l?await t.Ex(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Hn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.fp(i.getProgramInfoLog(a)||"").trim();return u&&!m.lp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async Px(t,s){const i=await m.Ey.Ix.Cx(t,s);return new m.Ey.Ix(t,i,s)}constructor(t,s,i){super(t,i);const e=t.s2(),h=t.K2(),r=(t.Ab(),e.useProgram(s),this.Fx=e,this.yM=s,this.kx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.Dx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Ox),e.vertexAttribPointer(r,t.Cb(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Lx),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.Dx&&(e.bindBuffer(e.ARRAY_BUFFER,t.Bx),e.vertexAttribPointer(this.Dx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Dx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Nx=new m.Ey.Wx(this,"matP","mat4"),this.jx=new m.Ey.Wx(this,"matMV","mat4"),this.Vx=new m.Ey.Wx(this,"color","vec4"),this.Ux=new m.Ey.Wx(this,"samplerFront","sampler"),this.Hx=new m.Ey.Wx(this,"pointTexStart","vec2"),this.zx=new m.Ey.Wx(this,"pointTexEnd","vec2"),this.Jx=new m.Ey.Wx(this,"zElevation","float"),this.qx=new m.Ey.Wx(this,"tileSize","vec2"),this.$x=new m.Ey.Wx(this,"tileSpacing","vec2"),this.Xx=new m.Ey.Wx(this,"color2_","vec4"),this.Yx=new m.Ey.Wx(this,"outlineThickness","float"),this.Kx=new m.Ey.Wx(this,"samplerBack","sampler"),this.Zx=new m.Ey.Wx(this,"samplerDepth","sampler"),this.Qx=new m.Ey.Wx(this,"destStart","vec2"),this.tG=new m.Ey.Wx(this,"destEnd","vec2"),this.sG=new m.Ey.Wx(this,"srcStart","vec2"),this.iG=new m.Ey.Wx(this,"srcEnd","vec2"),this.eG=new m.Ey.Wx(this,"srcOriginStart","vec2"),this.hG=new m.Ey.Wx(this,"srcOriginEnd","vec2"),this.rG=new m.Ey.Wx(this,"pixelSize","vec2"),this.nG=new m.Ey.Wx(this,"seconds","float"),this.oG=new m.Ey.Wx(this,"devicePixelRatio","float"),this.aG=new m.Ey.Wx(this,"layerScale","float"),this.lG=new m.Ey.Wx(this,"layerAngle","float"),this.uG=new m.Ey.Wx(this,"layoutStart","vec2"),this.cG=new m.Ey.Wx(this,"layoutEnd","vec2"),this.fG=new m.Ey.Wx(this,"zNear","float"),this.dG=new m.Ey.Wx(this,"zFar","float"),this.pG=!!(this.rG.mG()||this.nG.mG()||this.Kx.mG()||this.Qx.mG()||this.tG.mG()||this.sG.mG()||this.iG.mG()||this.eG.mG()||this.hG.mG()||this.oG.mG()||this.aG.mG()||this.lG.mG()||this.uG.mG()||this.cG.mG()),i.parameters||[]);this.gG=[],this.sM=this.rG.mG()||this.sG.mG()||this.iG.mG()||this.eG.mG()||this.hG.mG(),this.yG=!1,this.SG=!1,this.Vx.wG(1,1,1,1),this.Xx.wG(1,1,1,1),this.Ux.bG(0),this.Kx.bG(1),this.Zx.bG(2),this.Hx.MG(0,0),this.zx.MG(1,1),this.Jx.vG(0),this.qx.MG(0,0),this.$x.MG(0,0),this.Qx.MG(0,0),this.tG.MG(1,1),this.sG.MG(0,0),this.iG.MG(0,0),this.eG.MG(0,0),this.hG.MG(0,0),this.rG.MG(0,0),this.oG.vG(1),this.fG.vG(t.WS()),this.dG.vG(t.VS()),this.aG.vG(1),this.lG.vG(0),this.nG.vG(0),this.uG.MG(0,0),this.cG.MG(0,0),this.Yx.vG(1);for(const l of o){const u=l[0],c=l[2],f=new m.Ey.Wx(this,u,c);"color"===c?f.xG(0,0,0):f.vG(0),this.gG.push(f)}this.kx?this.GG(h.TG):(this._G(h.TG,!0),this.IG(h.CG,!0));const a=h.AG;e.useProgram(a?a.yM:null)}vr(){this.Fx.deleteProgram(this.yM),this.yM=null,this.zb.iw(this),this.Fx=null,super.vr()}EG(){return this.Fx}PG(){return this.yM}FG(){return this.gG.length}kG(t){return t<0||t>=this.gG.length?null:this.gG[t].DG()}OG(i){for(let t=0,s=i.length;t<s;++t)if(!this.gG[t].LG(i[t]))return!1;return!0}BG(i){for(let t=0,s=i.length;t<s;++t)this.gG[t].NG(i[t])}WG(t,s,i,e,h,r,n,o,a,l){return!this.Kx.mG()&&!(this.rG.mG()&&!this.rG.jG(h,r)||this.Qx.mG()&&!this.Qx.jG(t.Ol(),t.Ll())||this.tG.mG()&&!this.tG.jG(t.Bl(),t.Nl())||this.oG.mG()&&!this.oG.VG(n)||this.aG.mG()&&!this.aG.VG(o)||this.lG.mG()&&!this.lG.VG(a)||this.sG.mG()&&!this.sG.jG(s.Ol(),s.Ll())||this.iG.mG()&&!this.iG.jG(s.Bl(),s.Nl())||this.eG.mG()&&!this.eG.jG(i.Ol(),i.Ll())||this.hG.mG()&&!this.hG.jG(i.Bl(),i.Nl())||this.uG.mG()&&!this.uG.jG(e.Ol(),e.Ll())||this.cG.mG()&&!this.cG.jG(e.Ll(),e.Nl())||this.nG.mG()&&!this.nG.VG(l))}UG(t,s,i,e,h,r,n,o,a,l){this.Kx.mG()||(this.rG.mG()&&this.rG.HG(h,r),this.Qx.mG()&&this.Qx.HG(t.Ol(),t.Ll()),this.tG.mG()&&this.tG.HG(t.Bl(),t.Nl()),this.oG.mG()&&this.oG.zG(n),this.aG.mG()&&this.aG.zG(o),this.lG.mG()&&this.lG.zG(a),this.sG.mG()&&this.sG.HG(s.Ol(),s.Ll()),this.iG.mG()&&this.iG.HG(s.Bl(),s.Nl()),this.eG.mG()&&this.eG.HG(i.Ol(),i.Ll()),this.hG.mG()&&this.hG.HG(i.Bl(),i.Nl()),this.uG.mG()&&this.uG.HG(e.Ol(),e.Ll()),this.cG.mG()&&this.cG.HG(e.Ll(),e.Nl()),this.nG.mG()&&this.nG.zG(l))}_G(t,s){this.yG&&!s||this.kx||(this.Nx.mG()&&this.Nx.JG(t),this.yG=!0)}qG(){this.yG=!1}IG(t,s){this.SG&&!s||this.kx||(this.jx.mG()&&this.jx.JG(t),this.SG=!0)}$G(){this.SG=!1}GG(t){if(!this.kx)throw new Error("not device transform shader");this.Nx.JG(t);const s=this.zb,i=s.Fm()/2,e=s.Um()/2,h=s.ZS(i,e,s.DS(s.Um()),i,e,0,s.Um());this.jx.JG(h)}XG(t){this.Vx.mG()&&this.Vx.YG(t[0],t[1],t[2],t[3])}static KG(){return Ii}static ZG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static QG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static tT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static sT(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static iT(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static eT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static hT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static rT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static nT(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static oT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static aT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static lT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static uT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static cT(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static fT(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static dT(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static pT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static mT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static gT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static yT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static ST(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static wT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Ns,Ri=self.vs,xh=Ri._s,Ai=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Ey.Wx=class{constructor(t,s,i){if(!Ai.has(i))throw new Error("invalid uniform type");this.sv=t,this.Fx=this.sv.EG(),this._r=s,this.Ff=i,this.bT="color"===this.Ff,this.MT=this.Fx.getUniformLocation(this.sv.PG(),s),this.vT=!!this.MT;const e=Ai.get(i);this.xT=new Float32Array(e),this.GT=new Float32Array(e)}vr(){this.sv=null,this.Fx=null,this.MT=null}mG(){return this.vT}DG(){return this.Ff}TT(){return this.bT}vG(t){this.mG()&&(this.xT[0]=t,this.GT.set(this.xT),this.Fx.uniform1f(this.MT,t))}bG(t){this.mG()&&(this.xT[0]=t,this.GT.set(this.xT),this.Fx.uniform1i(this.MT,t))}MG(t,s){this.mG()&&(this.xT[0]=t,this.xT[1]=s,this.GT.set(this.xT),this.Fx.uniform2f(this.MT,t,s))}xG(t,s,i){this.mG()&&(this.xT[0]=t,this.xT[1]=s,this.xT[2]=i,this.GT.set(this.xT),this.Fx.uniform3f(this.MT,t,s,i))}wG(t,s,i,e){this.mG()&&(this.xT[0]=t,this.xT[1]=s,this.xT[2]=i,this.xT[3]=e,this.GT.set(this.xT),this.Fx.uniform4f(this.MT,t,s,i,e))}_T(t){t=Math.fround(t);const s=this.xT;s[0]!==t&&(s[0]=t,this.Fx.uniform1f(this.MT,t))}IT(t){const s=this.xT;s[0]!==t&&this.Fx.uniform1i(this.MT,s[0]=t)}CT(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.xT;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Fx.uniform2f(this.MT,t,s))}RT(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.xT;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Fx.uniform3f(this.MT,t,s,i))}YG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.xT;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Fx.uniform4f(this.MT,t,s,i,e))}JG(t){const s=this.xT;xh.j(s,t)||(Ci.$n(s,t,0),this.Fx.uniformMatrix4fv(this.MT,!1,t))}LG(t){const s=this.GT;return this.TT()?s[0]===Math.fround(t.ba())&&s[1]===Math.fround(t.Ma())&&s[2]===Math.fround(t.xa()):s[0]===Math.fround(t)}NG(t){const s=this.GT;this.TT()?(s[0]=t.ba(),s[1]=t.Ma(),s[2]=t.xa()):s[0]=t}VG(t){return this.GT[0]===Math.fround(t)}jG(t,s){const i=this.GT;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}zG(t){this.GT[0]=t}HG(t,s){const i=this.GT;i[0]=t,i[1]=s}}}{const Ei=self.Ns,Pi=self.vs,Vh=Pi.Es,xh=Pi._s;Ei.Ey.AT=class{constructor(t){this.renderer=t,this.CG=xh.create(),this.TG=xh.create(),this.Z2=null,this.Q2=null,this.ET=!1,this.PT=Vh.C(1,1,1,1),this.AG=null,this.FT=new Ei.Rect,this.clearColor=Ei.Mr(Ei.ra,0,0,0,0)}},Ei.Ey.kT=class{constructor(t){const s=new ArrayBuffer(96);this.Ff=0,this.DT=t,this.Fx=t.renderer.s2(),this.OT=0,this.LT=0,this.BT=null,this.NT=new Float32Array(s,0,16),this.WT=new Float32Array(s,64,4),this.jT=new Float32Array(s,80,4),this.VT=[]}UT(t,s){this.Ff=1,this.OT=t,this.LT=s}HT(){const t=this.Fx;t.drawElements(t.TRIANGLES,this.LT,t.UNSIGNED_SHORT,this.OT)}zT(t){this.Ff=2,this.BT=t}JT(){const t=this.Fx,s=this.BT;t.bindTexture(t.TEXTURE_2D,s?s.S2():null)}qT(t){this.Ff=3,t._a(this.WT,0)}$T(){const t=this.WT,s=this.DT;Vh.I(s.PT,t),s.AG.XG(t)}XT(t){this.Ff=21,t._a(this.WT,0)}YT(){const t=this.WT,s=this.DT.AG;s.Xx.mG()&&s.Xx.YG(t[0],t[1],t[2],t[3])}KT(t,s){this.Ff=4,this.OT=t,this.LT=s}ZT(){this.Fx.blendFunc(this.OT,this.LT)}QT(t,s,i,e){this.Ff=5;const h=this.WT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}t_(){const t=this.WT;this.Fx.viewport(t[0],t[1],t[2],t[3])}s_(t){this.Ff=6,xh.I(this.NT,t)}i_(){const t=this.DT,i=t.renderer.sS,e=t.AG,h=this.NT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r._G(h,!0):r.qG()}xh.I(t.TG,h)}e_(t){this.Ff=7,xh.I(this.NT,t)}h_(){const t=this.DT,i=t.renderer.sS,e=t.AG,h=this.NT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.IG(h,!0):r.$G()}xh.I(t.CG,h)}r_(t){this.Ff=8,this.BT=t}n_(){const t=this.Fx,s=this.BT,i=this.DT;s?(i.Z2=s.tx(),i.Q2=s.ix(),i.ET&&i.Q2?t.bindFramebuffer(t.FRAMEBUFFER,i.Q2):t.bindFramebuffer(t.FRAMEBUFFER,i.Z2)):(i.Z2=null,i.Q2=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}o_(t){this.Ff=9,t._a(this.NT,0)}a_(t,s,i,e){this.Ff=9;const h=this.NT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}l_(){const t=this.Fx,s=this.NT,i=this.DT,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.Aa(h,r,n,o)||(t.clearColor(h,r,n,o),e.ua(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}u_(t){this.Ff=15,t._a(this.NT,0)}c_(){const t=this.NT;this.DT.FT.set(t[0],t[1],t[2],t[3])}f_(t,s){this.Ff=10,this.OT=t,this.LT=1,this.NT[0]=s}d_(){const t=this.Fx,s=this.DT,i=s.renderer,e=i.hS,h=(t.useProgram(e.yM),e._G(s.TG,!1),e.IG(s.CG,!1),s.FT),r=(e.Hx.mG()&&e.Hx.CT(h.Ol(),h.Ll()),e.zx.mG()&&e.zx.CT(h.Bl(),h.Nl()),this.NT[0]);if(e.Jx.mG()&&e.Jx._T(r),e.Vx.mG()){const n=s.PT;e.Vx.YG(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.OT/4,this.LT),t.useProgram(s.AG.yM)}p_(t){this.Ff=11,this.BT=t}m_(){const t=this.Fx,s=this.DT,i=this.BT;if(s.AG=i,t.useProgram(i.yM),i._G(s.TG,!1),i.IG(s.CG,!1),i.Vx.mG()){const e=s.PT;i.Vx.YG(e[0],e[1],e[2],e[3])}}g_(){this.Ff=12}y_(){const t=this.DT.AG,s=this.Fx,i=this.NT,e=this.WT,h=this.jT;if(t.Kx.mG()){const r=this.DT.renderer,n=this.BT;r.S_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.S2():null),r.S_=n,s.activeTexture(s.TEXTURE0))}t.rG.mG()&&t.rG.CT(i[0],i[1]),t.Qx.mG()&&t.Qx.CT(i[2],i[3]),t.tG.mG()&&t.tG.CT(i[4],i[5]),t.oG.mG()&&t.oG._T(this.LT),t.aG.mG()&&t.aG._T(i[6]),t.lG.mG()&&t.lG._T(i[7]),t.sG.mG()&&t.sG.CT(i[12],i[13]),t.iG.mG()&&t.iG.CT(i[14],i[15]),t.eG.mG()&&t.eG.CT(h[0],h[1]),t.hG.mG()&&t.hG.CT(h[2],h[3]),t.uG.mG()&&t.uG.CT(e[0],e[1]),t.cG.mG()&&t.cG.CT(e[2],e[3]),t.nG.mG()&&t.nG._T(this.OT)}w_(){this.Ff=13}b_(){const t=this.DT.AG,i=t.gG,e=this.VT;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.TT()?h.RT(r.ba(),r.Ma(),r.xa()):h._T(r)}}M_(t){this.Ff=14,this.BT=t}v_(){const t=this.Fx,s=this.BT,i=this.DT.Z2;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}x_(t,s,i){this.Ff=17;const e=this.NT,h=this.DT.renderer,r=(e[0]=t.Fm(),e[1]=t.Um(),e[2]=(s||h).Fm(),e[3]=(s||h).Um(),e[4]=t.ox()?1:0,e[5]="stretch"===i,this.VT);Ei.Yn(r),r.push(t.tx()),r.push(s?s.tx():null)}G_(){const t=this.NT,s=this.VT,i=this.Fx,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}T_(t){this.Ff=18,this.BT=t}__(){this.BT.I_(),this.BT=null}C_(t){this.Ff=19,this.BT=t}R_(){this.BT.A_(),this.BT=null}E_(t,s,i){this.Ff=20;const e=this.NT;e[0]=t,e[1]=s,e[2]=i}P_(){const t=this.DT.AG,s=this.NT;t.rG.mG()&&t.rG.CT(s[0],s[1]),t.Yx.mG()&&t.Yx._T(s[2])}F_(t,s,i,e,h,r,n){this.Ff=16;const o=this.NT;t._a(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}k_(){const t=this.DT.AG,s=this.NT;t.sG.mG()&&t.sG.CT(s[0],s[1]),t.rG.mG()&&t.rG.CT(s[4],s[5]),t.qx.mG()&&t.qx.CT(s[6],s[7]),t.$x.mG()&&t.$x.CT(s[8],s[9])}D_(t,s,i,e,h,r,n){this.Ff=29;const o=this.NT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}O_(){const t=this.DT.AG,s=this.NT;t.rG.mG()&&t.rG.CT(s[0],s[1]),t.qx.mG()&&t.qx.CT(s[2],s[3]),t.Yx.mG()&&t.Yx._T(s[4]),t.$x.mG()&&t.$x.CT(s[5],s[6])}L_(t){this.Ff=22,this.OT=t?1:0}B_(){const t=this.Fx,s=0!==this.OT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}N_(t){this.Ff=23,this.OT=t?1:0}W_(){const t=this.Fx;0===this.OT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}j_(t){this.Ff=24,this.OT=t?1:0}V_(){const t=this.Fx,s=this.DT,i=s.renderer,e=0!==this.OT;s.ET=e,t.activeTexture(t.TEXTURE2),e?(s.Q2&&t.bindFramebuffer(t.FRAMEBUFFER,s.Q2),t.bindTexture(t.TEXTURE_2D,i.J2())):(t.bindTexture(t.TEXTURE_2D,null),s.Q2&&t.bindFramebuffer(t.FRAMEBUFFER,s.Z2)),t.activeTexture(t.TEXTURE0)}U_(){this.Ff=25}H_(){const t=this.Fx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}z_(){this.Ff=26}J_(){const t=this.Fx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}q_(){this.Ff=27}X_(){const t=this.Fx;t.disable(t.STENCIL_TEST)}Y_(t,s,i,e,h){this.Ff=28,this.OT=t?1:0;const r=this.NT;r[0]=s,r[1]=i,r[2]=e,r[3]=h}K_(){const t=this.Fx,s=this.NT;1===this.OT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}Z_(){switch(this.Ff){case 1:return void this.HT();case 2:return void this.JT();case 3:return void this.$T();case 4:return void this.ZT();case 5:return void this.t_();case 6:return void this.i_();case 7:return void this.h_();case 8:return void this.n_();case 9:return void this.l_();case 10:return void this.d_();case 11:return void this.m_();case 12:return void this.y_();case 13:return void this.b_();case 14:return void this.v_();case 15:return void this.c_();case 16:return void this.k_();case 17:return void this.G_();case 18:return void this.__();case 19:return void this.R_();case 20:return void this.P_();case 21:return void this.YT();case 22:return void this.B_();case 23:return void this.W_();case 24:return void this.V_();case 25:return void this.H_();case 26:return void this.J_();case 27:return void this.X_();case 28:return void this.K_();case 29:return void this.O_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Ns,ki=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Di={timeout:60},Oi=new Fi.ra(0,0,0,1),Li=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Ni=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.yf();for(const i of ji)(i.Q_()||Fi.Mh(i.tI(),s))&&i.sI()});let s=!1,i=!1;Fi.Ey.Ub=class{constructor(t,s){s=Object.assign({},Di,s),this.zb=t,this.iI="Arial",this.eI=16,this.hI=1,this.rI=0,this.nI=!1,this.oI=!1,this.aI="black",this.lI=!1,this.Cm=null,this.uI=!0,this.cI=null,this.fI=new Set,this.dI="left",this.pI="top",this._f="",this.mI=null,this.gI=Fi.Mr(Fi._m),this.yI="word",this.SI="ltr",this.wI=!1,this.bI=!1,this.MI=!1,this.vI=-1,this.xI=0,this.GI=0,this.TI=0,this.gg=0,this.yg=0,this._I=1,this.II=null,this.CI=null,this.RI=null,this.AI=null,this.EI=-1,this.FI=-1,this.kI="",this.DI="",this.OI="",this.LI=1,this.BI=1,this.NI=t=>this.WI(t),this.Hv=null,this.jI=new Fi.Rect,this.VI=1,this.UI=new Fi.b0(()=>{this.HI(),this.zI(8,8)},s.timeout),this.JI=null,this.qI=!1,ji.add(this)}vr(){this.cI=null,this.fI.clear(),this.Cm=null,this.mI=null,this.II=null,this.CI=null,this.RI=null,this.AI=null,this.NI=null,this.UI.vr(),this.JI=null,this.HI(),this.gI.Sc(),this.gI=null,this.zb=null,this.qI=!0,ji.delete(this)}$I(){this.MI=!0}XI(){this.$I(),this.bI=!0}sI(){this.XI(),this.wI=!0}YI(t){if(this.lI!==(t=!!t)){this.lI=t;const s=this.lI?"alphabetic":"top";this.CI&&(this.CI.textBaseline=s),this.RI&&(this.RI.textBaseline=s),this.sI()}}Q_(){return this.lI}Em(t){this.Cm!==t&&(this.Cm=t,this.gI.Em(t),this.Cm&&this.Cm.yy()&&this.Cm.Sy().then(()=>this.$I()),this.sI())}KI(t){this.uI!==(t=!!t)&&(this.uI=t,this.$I())}ZI(t){this.iI!==(t=t||"serif")&&(this.iI=t,this.sI())}tI(){return this.iI}QI(t){this.eI!==(t=t<.1?.1:t)&&(this.eI=t,this.sI())}tC(){return this.eI}sC(t){this.hI!==t&&(this.hI=t,this.sI())}iC(t){this.rI!==t&&(this.rI=t,this.XI())}eC(){return this.rI}hC(t){this.nI!==(t=!!t)&&(this.nI=t,this.sI())}rC(){return this.nI}nC(t){this.oI!==(t=!!t)&&(this.oI=t,this.sI())}oC(){return this.oI}aC(t){t=Math.floor(t),this.vI!==t&&(this.vI=t,this.$I())}lC(){return this.vI}uC(t,s){let i=[];(this.nI||s.Pg("b"))&&i.push("bold"),(this.oI||s.Pg("i"))&&i.push("italic");const e=s.Eg("size"),h=(e?parseFloat(e.param):this.eI)*this.hI;i.push(t?h+"pt":h*this.cC()+"pt");let r=this.iI,n=s.Eg("font");return n&&n.param&&(r=n.param,this.cI)&&!this.fI.has(r)&&(this.cI(r),this.fI.add(r)),r&&(ki.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}GM(t){t instanceof Fi.ra&&(t=t.La()),this.aI!==t&&(this.aI=t,this.$I())}fC(t,s,i){Oi.ca(t,s,i),this.GM(Oi)}dC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.dI!==t&&(this.dI=t,this.XI())}pC(){return this.dI}mC(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.pI!==t&&(this.pI=t,this.XI())}gC(){return this.pI}yC(t){if(!Ni.has(t))throw new Error("invalid word wrap mode");this.yI!==t&&(this.yI=t,this.sI())}SC(){return this.yI}wC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.SI!==t&&(this.SI=t,this.CI&&(this.CI.direction=this.SI),this.RI&&(this.RI.direction=this.SI),this.sI())}bC(){return this.SI}Rf(t){this._f!==t&&(this._f=t,this.sI())}MC(){return this._f}cC(){return this.VI*this._I*self.devicePixelRatio}vC(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.GI===r&&this.TI===n&&this._I===o)){let t=this.GI,s=(this.GI=r,this.TI=n,this._I=o,self.devicePixelRatio),i=(this.gg=this.GI*this._I*s,this.yg=this.TI*this._I*s,Math.max(this.gg,this.yg)),e=Math.min(this.zb.t2(),4096),h=1;e<i&&(h=e/i,this.gg=Math.min(this.gg*h,e),this.yg=Math.min(this.yg*h,e)),this.VI=h,this.GI!==t?this.sI():this.XI()}}Fm(){return this.gg}Um(){return this.yg}xC(){return this._I}GC(){return this.TC(),this.gI.pg()}_C(){return this.TC(),this.gI.mg()+this.gI.Am()*(this.rI+4)-this.rI}IC(){this.TC();let t=0;for(const s of this.gI.Rm())for(const i of s.Xm())t+=i.Ym();return t}hx(){return this.UI.T0(),this.CC(),this.Hv}RC(t,s){this.TC();const i=this.cC(),e=this.gI.Rm();for(const h of e){const r=h.zm()*i;if(s>=h.Cg()-h.Um()*i+r&&s<h.Cg()+r)for(const n of h.Xm())if(t>=n._g()&&t<n._g()+n.Fm()*i)return n}return null}*AC(t){this.TC();const s=this.gI.Rm();for(const i of s)for(const e of i.Xm()){const h=e.Eg("tag");h&&Fi.Mh(h.param,t)&&(yield e)}}EC(t,s){for(const i of this.AC(t)){if(0===s)return i;--s}return null}PC(t){let s=0;for(const i of this.AC(t))++s;return s}CC(){this.Hv&&!this.MI&&!this.bI&&!this.wI||this.qI||this.gg<=0||this.yg<=0||(this.MI=!1,this.FC())}FC(){this.qI||(this.TC(),this.zI(Math.max(Fi.Yr(Math.ceil(this.gg)),128),Math.max(Fi.Yr(Math.ceil(this.yg)),64)),this.kC(),this.DC(),this.UI.T0())}zI(t,s){this.II||(this.II=Fi.Ho(16,16));let i=!1;this.EI===t&&this.FI===s||(this.EI=t,this.FI=s,this.II.width=t,this.II.height=s,i=!0),this.CI||(this.CI=this.II.getContext("2d"),i=!0),i?(this.CI.textBaseline=this.lI?"alphabetic":"top",this.CI.direction=this.SI,this.CI.font=this.kI,this.CI.fillStyle=this.OI,this.CI.strokeStyle=this.OI,this.CI.globalAlpha=this.LI,this.CI.lineWidth=this.BI):this.CI.clearRect(0,0,t,s)}OC(){this.RI||(this.RI=Fi.Ho(16,16).getContext("2d"),this.AI=Fi.Ho(16,16).getContext("2d"),this.RI.textBaseline=this.lI?"alphabetic":"top",this.AI.textBaseline="top",this.RI.direction=this.SI,this.AI.direction=this.SI)}LC(t){this.DI!==t&&(this.DI=t,this.RI.font=t,this.AI.font=t)}BC(){if(!s){s=!0,this.OC();const t=this.RI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}TC(){this.NC(),this.WC()}NC(){this.wI&&(this.OC(),!this.lI||this.mI&&this.mI.toString()===this._f||(this.mI=new Fi.Dh(this._f,{Zp:!0})),this.gI._m(this.lI?this.mI.ym():this._f,this.NI,this.GI,this.yI,0),this.wI=!1)}WC(){this.bI&&(this.jC(),this.bI=!1)}WI(t){let s=t.Nm()?t.eg().join(""):" ",i=(this.LC(this.uC(!0,t)),t.Eg("size")),e=(i?parseFloat(i.param):this.eI)*this.hI,h=this.RI.measureText(s),r=0;if(this.lI&&this.BC()){const n=this.AI.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Bm:r}}VC(t){this.kI!==t&&(this.kI=t,this.CI.font=t)}UC(t){this.OI!==t&&(this.OI=t,this.CI.fillStyle=t,this.CI.strokeStyle=t)}HC(t){this.LI!==t&&(this.LI=t,this.CI.globalAlpha=t)}zC(t){this.BI!==t&&(this.BI=t,this.CI.lineWidth=t)}jC(){let e=this.cC(),h=(4+this.rI)*e,r=0,n=this.gI.Rm();if(0!==n.length){for(const s of n){s.Tg(NaN),s.Ig(NaN);for(const o of s.Xm())o.Tg(NaN),o.Ig(NaN)}let t=this.lI&&this.BC(),i=n[0].Um()*e;if("center"===this.pI){const a=n.reduce((t,s)=>t+s.Um()*e+h,0)-h;r=Math.max(this.yg/2-a/2,0),t&&(i=n[0].Jm()*e)}else if("bottom"===this.pI){const l=n.reduce((t,s)=>t+s.Um()*e+h,0)-this.rI*e,u=t?n.at(-1).zm()*e:0;r=this.yg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.Um()*e,d=r;if(this.lI){if(r+=0===t?i:f,0<t&&r>this.yg-4*e)break}else if(0<t&&r>=this.yg-f)break;0<=d&&this.JC(c,r,e),this.lI||(r+=f),r+=h}}}JC(t,s,i){let e=0;"center"===this.dI?e=Math.floor((this.gg-t.Fm()*i)/2):"right"===this.dI&&(e=this.gg-t.Fm()*i),t.Tg(e),t.Ig(s);for(const h of"ltr"===this.SI?t.Xm():t.xg())this.qC(h,e,s,i),e+=h.Fm()*i}qC(t,s,i,e){const h=t.Eg("offsetx"),r=(s+=h?o(h.param,t.Um())*e:0,t.Eg("offsety"));if(i+=r?o(r.param,t.Um())*e:0,t.jm()){const n=t.Eg("iconoffsety");i+=n?o(n.param,t.Um())*e:.2*t.Um()*e}t.Tg(s),t.Ig(i)}kC(){this.CI.imageSmoothingEnabled=this.uI,this.CI.imageSmoothingQuality="high",this.xI=0;const t=this.cC(),s=this.gI.Rm();for(const i of s)this.$C(i,t)}$C(t,s){const i=t._g(),e=t.Cg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.SI?t.Xm():t.xg())this.XC(h,s,t.Um())}XC(n,o,a){const l=this.CI,u=n._g(),c=n.Cg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n.Fm()*o,i=n.Um()*o,e=n.Um()/16,h=(4+this.rI)*o,r=n.Nm()?n.eg():null;if(-1!==this.vI){if(this.xI>=this.vI)return;n.Nm()&&this.xI+r.length>this.vI&&(r=r.slice(0,this.vI-this.xI),s=this.WI(n).width*o),this.xI+=n.Ym()}const f=n.Eg("background"),d=n.Pg("u"),p=n.Pg("s");if((!n.Nm()||!Fi.up(r)||f||d||p)&&!n.Pg("hide")){const m=n.Eg("color"),g=n.Eg("opacity"),y=(this.HC(g?parseFloat(g.param)/100:1),f&&(this.UC(f.param),l.fillRect(u,c-i,s,i+h)),n.Eg("linethickness")),S=y?parseFloat(y.param):1,w=n.Pg("stroke");if(w&&this.zC(.5*e*S*this.cC()),n.Nm()){const b=r.join("");if(this.VC(this.uC(!1,n)),!w){this.zC(.5*e*S*this.cC());const M=n.Eg("outlineback");M&&(this.UC(M.param),this.YC(!0,b,u,c,s))}if(this.UC(m?m.param:this.aI),this.YC(w,b,u,c,s),!w){this.zC(.5*e*S*this.cC());const v=n.Eg("outline");v&&(this.UC(v.param),this.YC(!0,b,u,c,s))}}else if(n.jm()&&0<n.Fm()){const x=n.Wg(this.Cm);x&&l.drawImage(x,u,c-i,s,i)}if(this.UC(m?m.param:this.aI),d&&I(l,w,u,c+o*t,s,o*t*S),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*S/2,s,T*S)}}}}YC(t,s,i,e,h){"rtl"===this.SI&&(i+=h),t?"Gecko"===Fi.fi.wi?this.CI.strokeText(s,i,e,h):this.CI.strokeText(s,i,e):"Gecko"===Fi.fi.wi?this.CI.fillText(s,i,e,h):this.CI.fillText(s,i,e)}DC(){this.zb.KC()||(this.Hv||(this.Hv=this.zb.z2(this.II.width,this.II.height,{Wv:!0,jv:"high"})),this.zb.ZC(this.II,this.Hv),this.jI.set(0,0,this.gg/this.Hv.Fm(),this.yg/this.Hv.Um()),this.JI&&this.JI())}QC(){return this.jI}HI(){this.Hv&&(this.zb.KC()||this.zb.Y2(this.Hv),this.Hv=null)}static TM(){for(const t of ji)t.HI()}static tR(){return ji.values()}}}{const Vi=self.Ns;class Ui{constructor(t){this.Fx=t.s2(),this.sR=t.i2(),this.iR=t.eR(),this.hR=null,this.G0=!1,this.rR=!1,this.nR=0,1===this.sR?this.hR=this.iR.createQueryEXT():this.hR=this.Fx.createQuery()}vr(){this.oR(),this.Fx=null,this.iR=null,this.rR=!1}oR(){this.hR&&(1===this.sR?this.iR.deleteQueryEXT(this.hR):this.Fx.deleteQuery(this.hR),this.hR=null)}I_(){if(this.G0)throw new Error("query already active");1===this.sR?this.iR.beginQueryEXT(this.iR.TIME_ELAPSED_EXT,this.hR):this.Fx.beginQuery(this.iR.TIME_ELAPSED_EXT,this.hR),this.G0=!0}A_(){if(!this.G0)throw new Error("query not active");1===this.sR?this.iR.endQueryEXT(this.iR.TIME_ELAPSED_EXT):this.Fx.endQuery(this.iR.TIME_ELAPSED_EXT),this.G0=!1}aR(){if(this.hR&&!this.rR&&!this.G0){let t;t=1===this.sR?this.iR.getQueryObjectEXT(this.hR,this.iR.QUERY_RESULT_AVAILABLE_EXT):this.Fx.getQueryParameter(this.hR,this.Fx.QUERY_RESULT_AVAILABLE);const s=this.Fx.getParameter(this.iR.GPU_DISJOINT_EXT);t&&!s&&(1===this.sR?this.nR=this.iR.getQueryObjectEXT(this.hR,this.iR.QUERY_RESULT_EXT):this.nR=this.Fx.getQueryParameter(this.hR,this.Fx.QUERY_RESULT),this.nR/=1e9,this.rR=!0),(t||s)&&this.oR()}}lR(){return this.rR}uR(){if(this.rR)return this.nR;throw new Error("no result available")}}Vi.Ey.cR=class{constructor(t){this.zb=t,this.IS=t.Eb(),this.G0=!1,this.fR=null,this.dR=!1,this.pR=null,this.mR=[]}vr(){for(const t of this.mR)t instanceof Ui&&t.vr();Vi.Yn(this.mR),this.fR=null,this.pR=null,this.zb=null}I_(){if(this.G0)throw new Error("query already active");const t=this.zb.gR();0<t.length?(this.dR=!0,this.fR=t.at(-1),this.fR.yR(),this.fR.mR.push(this)):(this.dR=!1,this.fR=null),this.G0=!0,t.push(this),this.SR()}A_(){if(!this.G0)throw new Error("query not active");const t=this.zb.gR().pop();if(t!==this)throw new Error("can only end most nested query");this.G0=!1,this.yR(),this.fR&&(this.fR.SR(),this.fR=null)}SR(){this.pR=Vi.Mr(Ui,this.zb),this.mR.push(this.pR),this.pR.I_()}yR(){this.pR.A_(),this.pR=null}aR(){for(const t of this.mR)t.aR()}wR(){return this.dR}lR(){return this.mR.every(t=>t.lR())}uR(){return this.mR.reduce((t,s)=>t+s.uR(),0)}Eb(){return this.IS}}}{const Hi=self.Ns;Hi.Ey.bR=class{constructor(t,s=1e3){this.zb=t,this.MR=s,this.vR=[],this.zb.xR(this)}vr(){this.Sc(),this.zb.GR(this),this.zb=null}Sc(){for(const t of this.vR)t.vr();Hi.Yn(this.vR)}TR(){const t=new Hi.Ey.cR(this.zb);if(this.vR.push(t),this.vR.length>this.MR){const s=this.vR.shift();s.vr()}return t}_R(t){for(const s of this.vR){if(s.Eb()>=t)return;if(s.wR())return;s.aR()}}IR(t,s){if(s<=t)return NaN;let i=0;for(const e of this.vR){if(e.Eb()>=s)break;if(!(e.Eb()<t)){if(!e.lR())return NaN;i+=e.uR()}}return i}CR(i){for(let t=0,s=this.vR.length;t<s;++t){const e=this.vR[t];if(!(e.Eb()<i))return void(0<t&&this.vR.splice(0,t));e.vr()}}}}{let i=function(){h=-1;for(const t of e)t.RR()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ns),t=self.vs,M=(t.As,t.Es),y=t._s,r={powerPreference:"default",AR:!0,alpha:!1,depth:!1,ER:!1,PR:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.fu(0,0,1,0,1,1,0,1),S=y.create(),w=y.create(),v=new b.fu,x=new b.Rect,G=null,e=(b.isDebug&&(self.FR=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.kR=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Ey.DR=class extends b.Ey.qy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.PR&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Fx=e,this.OR=e.getContextAttributes(),this.LR=e.getParameter(e.VERSION),this.sR=h,this.BR=M.create(),this.NR=!1,this.WR=y.create(),this.jR=!!s.depth,this.VR=!(!s.depth||!s.ER),this.UR=this.jR,this.HR=!1,this.zR=null,this.JR=!0,this.qR=0,this.$R=0,this.Ox=null,this.Lx=null,this.YR=null,this.Bx=null,this.KR=new Float32Array(8e3*this.Cb()),this.ZR=new Uint16Array(12e3),this.QR=new Float32Array(16e3),this.tA=new Float32Array(32e3),this.sA=0,this.iA=0,this.eA=0,this.hA=0,this.rA=null,this.nA=null,this.oA=[],this.aA=0,this.lA=0,this.uA=null,this.cA=0,this.DT=b.Mr(b.Ey.AT,this),this.fA=b.Mr(b.ra,1,1,1,1),this.dA=null,this.S_=null,this.pA=0,this.mA=0,this.gA=new b.Rect,this.yA=b.Mr(b.Rect,0,0,-1,-1),this.SA=0,this.wA=-1,this.bA=0,this.MA=0,this.vA=0,this.xA="(unavailable)",this.GA="(unavailable)",this.TA=[],this._A=!1,this.IA=null,this.CA=null,this.RA=null,this.AA=null,this.EA=null,this.PA=null,this.FA=0,this.kA=!!s.AR,this.iR=null,this.DA=new Set,this.OA=[],this.AS(this.ZR)}Lb(){return!0}async FS(){super.FS();const t=this.Fx,s=this.Cb(),i=(this.fA.ua(1,1,1,1),this.dA=null,this.S_=null,this.sA=0,this.eA=0,this.hA=8e3*s-4*s,b.Yn(this.oA),this.aA=0,this.lA=0,this.rA=null,this.uA=null,this.gA.set(0,0,1,1),this.cA=0,this.DT),e=(i.AG=null,i.Z2=null,i.Q2=null,M.set(i.PT,1,1,1,1),i.clearColor.ua(0,0,0,0),i.FT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.pA=t.ONE,this.mA=t.ONE_MINUS_SRC_ALPHA,this.LA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.jR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.UR=this.jR,this.HR=!1,this.Bx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Bx),t.bufferData(t.ARRAY_BUFFER,this.tA.byteLength,t.DYNAMIC_DRAW),this.Ox=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ox),t.bufferData(t.ARRAY_BUFFER,this.KR.byteLength,t.DYNAMIC_DRAW),this.Lx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Lx),t.bufferData(t.ARRAY_BUFFER,this.QR.byteLength,t.DYNAMIC_DRAW),this.YR=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.YR),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.ZR,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.wA=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.bA=e[0],this.MA=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.vA=h&&r?Math.min(h.precision,r.precision):0,2048<this.MA&&(this.MA=2048),this.TA=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.xA=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.GA=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.IA=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.kA&&(1===this.i2()?this.iR=t.getExtension("EXT_disjoint_timer_query"):this.iR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.CA=t.getExtension("EXT_texture_filter_anisotropic"),this.CA?this.FA=t.getParameter(this.CA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.FA=0,this.i2()<2&&this.jR&&this.VR&&(this.RA=t.getExtension("WEBGL_depth_texture"),!this.RA))throw new Error("no depth texture support");this.i2()<2&&(this.AA=t.getExtension("EXT_frag_depth"),this.EA=t.getExtension("OES_standard_derivatives"),this.PA=t.getExtension("EXT_shader_texture_lod"));let o=b.Ey.Ix,a=o.ZG(!1),l=o.tT(),u=a,c=o.lT(),f=o.oT(),d=o.eT(),p=o.ZG(!0),m=!1;this.jR&&(this.i2()<2?this.AA&&(l=o.sT(),c=o.uT(),d=o.hT(),m=!0):(u=o.QG(),l=o.iT(),c=o.cT(),f=o.aT(),d=o.rT(),p=o.QG(!0)));const g=o.nT(this.i2(),m,this.EA&&this.PA),y=2<=this.i2()?o.QG():a,S=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.fT(),a,"<fill>"],[o.dT(),a,"<lineargradient>"],[o.pT(),a,"<penumbra>"],[o.gT(),a,"<hardellipse>"],[o.yT(),a,"<hardellipseoutline>"],[o.ST(),a,"<smoothellipse>"],[o.wT(),a,"<smoothellipseoutline>"],[o.mT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(S.map(t=>this.BA({src:t[0],Rx:t[1],name:t[2]})));this.eS=w[0],this.nA=w[1],this.hS=w[2],this.oS=w[3],this.aS=w[4],this.lS=w[5],this.uS=w[6],this.cS=w[7],this.fS=w[8],this.dS=w[9],this.pS=w[10],this.rS=w[11],this.nS=w[12],this.rw()}async BA(t){const s=await b.Ey.Ix.Px(this,t);return this.QS(s),s}NA(){this.rA=null}vC(t,s,i){if(this.gg!==t||this.yg!==s||i){this.Ab();const e=this.Fx,h=this.DT;this.gg=t,this.yg=s,this.WA(0,0,t,s),this.$S(this.WR,t/s),this.jA(this.WR),this.nA&&(e.useProgram(this.nA.PG()),this.nA.GG(this.Yy),this.rA=this.nA,this.DT.AG=this.nA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.dA=null,this.S_=null,this.jR&&this.JR&&this.VA(this.gg,this.yg),this.uA&&this.uA.X2(this.gg,this.yg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.uA=null,h.Z2=null,h.Q2=null}}VA(t,s){const i=this.Fx;this.zR&&this.qR===t&&this.$R===s||(this.VR?(this.zR&&i.deleteTexture(this.zR),this.zR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.zR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.i2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.RA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.RA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.zR&&i.deleteRenderbuffer(this.zR),this.zR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.zR),i.renderbufferStorage(i.RENDERBUFFER,2<=this.sR?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.qR=t,this.$R=s)}UA(t,s){this.jR&&(this.JR=!1,this.VA(t,s))}HA(){this.jR&&(this.JR=!0,this.VA(this.gg,this.yg))}WA(t,s,i,e){const h=this.BR;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.zA();r.QT(t,s,i,e),M.set(h,t,s,i,e),this.lA=0}}US(t){super.US(t),this.$S(this.WR,this.gg/this.yg)}NS(t){super.NS(t),this.$S(this.WR,this.gg/this.yg)}jS(t){super.jS(t),this.$S(this.WR,this.gg/this.yg)}jA(t){if(!y.j(this.Yy,t)){const s=this.zA();s.s_(t),y.I(this.Yy,t),this.lA=0,this.NR=!0}}JA(){let t,s,i,e=this.uA;i=(null===e?(t=this.WR,s=this.Fm(),this):(t=e.nx(),s=e.Fm(),e)).Um(),this.jA(t),this.WA(0,0,s,i)}qA(t){if(!y.j(this.Ky,t)){const s=this.zA();s.e_(t),y.I(this.Ky,t),this.lA=0,this.NR=!0}}$A(){this.NR=!1}XA(){return this.NR}K2(){return this.DT}zA(){const t=this.oA;return this.aA===t.length&&t.push(new b.Ey.kT(this.DT)),t[this.aA++]}Ab(){0===this.aA||this.KC()||(this.YA(),this.KA(),this.aA=0,this.sA=0,this.iA=0,this.eA=0,this.lA=0)}YA(){const t=this.Fx;0<this.eA&&(t.bindBuffer(t.ARRAY_BUFFER,this.Bx),t.bufferSubData(t.ARRAY_BUFFER,0,this.tA.subarray(0,this.eA))),0<this.sA&&(t.bindBuffer(t.ARRAY_BUFFER,this.Ox),t.bufferSubData(t.ARRAY_BUFFER,0,this.KR.subarray(0,this.sA)),t.bindBuffer(t.ARRAY_BUFFER,this.Lx),t.bufferSubData(t.ARRAY_BUFFER,0,this.QR.subarray(0,this.iA)))}KA(){const i=this.oA;for(let t=0,s=this.aA;t<s;++t)i[t].Z_()}ZA(){return this.fA.Ga()}QA(t,s,i,e){const h=this.fA;if(!h.Aa(t,s,i,e)){h.ua(t,s,i,e);const r=this.zA();r.qT(h),this.lA=0,this.gS=null}}tE(t){const s=this.fA;if(s.Ga()!==t){s.Sa(t);const i=this.zA();i.qT(s),this.lA=0,this.gS=null}}GM(t){const s=this.fA;if(!s.equals(t)){s.set(t);const i=this.zA();i.qT(s),this.lA=0,this.gS=null}}sE(){this.QA(1,1,1,1)}iE(){return this.fA}eE(t){if(t!==this.dA){const s=this.zA();s.zT(t),this.dA=t,this.lA=0}}o2(){this.dA=null}xM(t){const s=this.Dw(t);this.hE(s[0],s[1])}rE(t){const s=this.Bw(t);this.hE(s.Fw,s.kw)}hE(t,s){if(t!==this.pA||s!==this.mA){const i=this.zA();i.KT(t,s),this.pA=t,this.mA=s,this.lA=0,this.gS=null}}nE(){return this.pA===this.Fx.ONE&&this.mA===this.Fx.ONE_MINUS_SRC_ALPHA}oE(){this.hE(this.Fx.ONE,this.Fx.ONE_MINUS_SRC_ALPHA)}aE(){this.hE(this.Fx.SRC_ALPHA,this.Fx.ONE_MINUS_SRC_ALPHA)}lE(){this.hE(this.Fx.ONE,this.Fx.ZERO)}Rect(t){this.uE(t.Ol(),t.Ll(),t.Bl(),t.Nl())}uE(t,s,i,e){this.Ib(t,s,i,s,i,e,t,e)}cE(){let t=this.sA;if(t>=this.hA&&(this.Ab(),t=0),1===this.lA)this.oA[this.aA-1].LT+=6;else{const s=this.zA();s.UT(t,6),this.lA=1}}fE(t){t.Pu(this.KR,this.sA,this.wS+this.bS),this.sA+=12}fu(t){this.cE(),this.fE(t),c._a(this.QR,this.iA),this.iA+=8}Ib(t,s,i,e,h,r,n,o){this.cE();let a=this.KR,l=this.sA,u=this.wS+this.bS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.sA=l,c._a(this.QR,this.iA),this.iA+=8}Qw(t,s){this.cE(),this.fE(t),s.Vl(this.QR,this.iA),this.iA+=8}dE(t,s){this.cE(),this.fE(t),s._a(this.QR,this.iA),this.iA+=8}pE(t,s,i,e,h,r,n,o,a,l,u,c,f){this.cE();let d=this.KR,p=this.sA,m=this.wS+this.bS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.sA=p,f.Vl(this.QR,this.iA),this.iA+=8}$w(t,s,i,e,h,r,n,o,a,l,u,c,f){this.cE();let d=this.KR,p=this.sA,m=this.wS+this.bS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.sA=p,f._a(this.QR,this.iA),this.iA+=8}mE(e,h,r){const n=this.KR,o=this.QR;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.cE();let t=this.sA,s=this.iA;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.sA=t,this.iA=s}}gE(t,s){this.Vw(0),y.I(S,this.Yy),y.I(w,this.Ky),this.JA();const[i,e]=this.yE(this.uA),h=this.ZS(0,0,this.DS(e),0,0,0,e);if(this.qA(h),"crop"===t&&this.uA&&s){const r=this.gg/2,n=this.yg/2,o=s.Fm(),a=s.Um(),l=this.uA.Fm(),u=this.uA.Um(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,n-p,-r+c,n-f-p),v.Fu(x),x.set(0,d,c,f+d),x.Ct(o,a),this.Qw(v,x)}else{const m=i/2,g=e/2;this.uE(-m,g,m,-g)}this.jA(S),this.qA(w)}SE(t){if(!this.gA.equals(t)){this.gA.I(t);const s=this.zA();s.u_(t),this.lA=0}}wE(){}bE(t,s,i,e){7996<=this.eA&&this.Ab();let h=this.eA,r=this.wS+this.bS;if(2===this.lA&&this.cA===r)this.oA[this.aA-1].LT++;else{const o=this.zA();o.f_(h,r),this.lA=2,this.cA=r}const n=this.tA;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.eA=h}ow(t){if(this.rA!==t){const s=this.zA();s.p_(t),this.rA=t,this.lA=0,this.gS=null}}ME(){return this.rA}vE(){this.ow(this.nA)}xE(t){const s=this.zA();s.XT(t),this.lA=0}GE(t,s,i=1){const e=this.zA();e.E_(t,s,i),this.lA=0}TE(t,s,i,e,h,r,n){if(this.rA!==this.rS)throw new Error("must set tilemap fill mode first");const o=this.zA();o.F_(t,s,i,e,h,r,n),this.lA=0}_E(t,s,i,e,h,r,n){if(this.rA!==this.nS)throw new Error("must set tile randomization mode first");const o=this.zA();o.D_(t,s,i,e,h,r,n),this.lA=0}IE(t,s,i,e,h,r,n,o,a,l,u){const c=this.rA;if(u%=10800,c.pG&&!c.WG(s,i,e,h,r,n,o,a,l,u)){const f=this.zA(),d=(f.g_(),c.UG(s,i,e,h,r,n,o,a,l,u),f.NT),p=(d[0]=r,d[1]=n,s._a(d,2),d[6]=a,d[7]=l,i._a(d,12),f.WT),m=(h._a(p,0),p[1]);p[1]=p[3],p[3]=m,e._a(f.jT,0),f.OT=u,f.LT=o,c.Kx.mG()?f.BT=t?t.hx():null:f.BT=null,this.lA=0}}CE(t){const s=this.rA;if(0!==t.length&&!s.OG(t)){const i=this.zA();i.w_(),s.BG(t),b.eo(i.VT,t),this.lA=0}}RE(t,s,i,e){const h=this.zA();h.a_(t,s,i,e),this.lA=0}Sc(t){const s=this.zA();s.o_(t),this.lA=0}AE(){}Rb(){super.Rb(),this.Fx.flush()}EE(){if(this.jR&&this.uA&&this.uA.gx()){const t=this.zA();t.L_(this.UR),this.lA=0}}PE(t){if(this.UR!==(t=!!t)&&this.jR){this.UR=t;const s=this.zA();s.N_(t),this.lA=0}}FE(){return this.UR}J2(){return this.zR}q2(){return this.VR}kE(t){if(t=!!t,this.VR&&this.HR!==t){if(t&&this.FE())throw new Error("depth still enabled");this.HR=t;const s=this.zA();s.j_(t),this.lA=0}}DE(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.yA.Dl(t,s,i,e)){this.yA.Cl(t,s,i,e);const r=h||this.yE(this.OE())[1],n=(s=r-s-e,this.zA());n.Y_(!0,t,s,i,e),this.lA=0}}LE(){if(-1!==this.yA.Bl()){this.yA.set(0,0,-1,-1);const t=this.zA();t.Y_(!1,0,0,0,0),this.lA=0}}BE(){for(const t of this.DA)t._R(this.IS)}KC(){return!this.Fx||this.Fx.isContextLost()||this._A}TM(){super.kS(),b.Ey.Uv.TM(),b.Ey.R2.TM(),b.Ey.Ub.TM();for(const t of this.DA)t.Sc();this.TA=[],this.iR=null,this.IA=null,this.CA=null,this.RA=null,this.AA=null,this.EA=null,this.PA=null,this.FA=0,this.xA="(unavailable)",this.GA="(unavailable)",this.rA=null,this.nA=null,this.zR=null;for(const s of this.mS.values())s.TM()}async _M(){this._A=!0,await this.FS(),this._A=!1;for(const t of this.mS.values())t._M(this);this.vC(this.gg,this.yg,!0)}NE(t,s){if(this.KC())throw new Error("context lost");this.Ab();const i=b.Mr(b.Ey.Uv,this);return i.Qv(t,s),i}async WE(e,h){if(this.KC())throw new Error("context lost");if(h=Object.assign({},h),b.Ui.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.Dv&&"clamp-to-edge"!==h.Dv||h.Ov&&"clamp-to-edge"!==h.Ov,i=b.Xr(t.width)&&b.Xr(t.height);return this.e2()||i||!s?h.premultiplyAlpha=!1:b.Ui.Xi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Yr(t.width),resizeHeight:b.Yr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Qf(()=>this.NE(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Uo(e);e=t}return b.Qf(()=>this.NE(e,h))}z2(t,s,i){this.Ab();const e=b.Mr(b.Ey.Uv,this);return e.a2(t,s,i),e}ZC(t,s,i){this.Ab(),s.d2(t,i)}Y2(t){t&&(t.b2(),0<t.M2()||(this.Ab(),t===this.dA&&(this.Fx.bindTexture(this.Fx.TEXTURE_2D,null),this.dA=null),t===this.S_&&(this.Fx.activeTexture(this.Fx.TEXTURE1),this.Fx.bindTexture(this.Fx.TEXTURE_2D,null),this.Fx.activeTexture(this.Fx.TEXTURE0),this.S_=null),t.m2()))}jE(t){let s=this.gg,i=this.yg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Ab();const h=b.Mr(b.Ey.R2,this);return h.U2(s,i,Object.assign({I2:e},t)),this.uA=null,this.DT.Z2=null,this.DT.Q2=null,h}VE(t,s=!0){if(t!==this.uA){t&&t.yx()&&t.X2(this.gg,this.yg);const i=this.zA();i.r_(t),this.uA=t,this.lA=0,s&&this.JA()}}OE(){return this.uA}yE(t){return t?[t.Fm(),t.Um()]:[this.gg,this.yg]}UE(t,s="stretch"){if(this.sR<2||this.uA&&0<this.uA.Sx())this.lE(),this.sE(),this.HE(t,s);else{const i=this.zA();i.x_(t,this.uA,s),this.lA=0}}HE(t,s="stretch"){const i=t.hx();if(!i)throw new Error("not a texture-backed render target");this.eE(i),this.gE(s,i)}zE(t){if(!(this.sR<2)){const s=this.zA();s.M_(t.tx()),this.lA=0}}JE(t){this.VE(null),this.Ab();const s=t.hx();s===this.dA&&(this.Fx.bindTexture(this.Fx.TEXTURE_2D,null),this.dA=null),s===this.S_&&(this.Fx.activeTexture(this.Fx.TEXTURE1),this.Fx.bindTexture(this.Fx.TEXTURE_2D,null),this.Fx.activeTexture(this.Fx.TEXTURE0),this.S_=null),t.m2()}async Gx(t,s,i){this.Ab();let e=this.uA,h,r,n,o=(n=t?(h=t.Fm(),r=t.Um(),t.tx()):(h=this.Fm(),r=this.Um(),null),0),a=0,l=h,u=r;if(i){o=b.Cr(Math.floor(i.Ol()),0,h-1),a=b.Cr(Math.floor(i.Ll()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Cr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Cr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.Fx,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.uA=null,this.DT.Z2=null,this.DT.Q2=null,this.VE(e)}),d;if(!s&&2<=this.i2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Ex(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}qE(){this.PE(!0);const t=this.zA();t.U_(),this.lA=0,this.SA=1}$E(){this.PE(!1);const t=this.zA();t.z_(),this.lA=0,this.SA=2}XE(){return 2===this.SA}YE(){this.PE(!0);const t=this.zA();t.q_(),this.lA=0,this.SA=0}KE(t){if(this.ZE()){const s=this.zA();s.T_(t),this.lA=0}}QE(t){if(this.ZE()){const s=this.zA();s.C_(t),this.lA=0}}Ex(s){const t=new Promise(t=>e.add({resolve:t,RR:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Bb(){return this.gg*this.yg*(this.OR.alpha?4:3)}Nb(){let t=0;for(const s of b.Ey.R2.Tx())s.hx()||(t+=s.G2());return t}Wb(){let t=0;for(const s of b.Ey.Uv.T2())t+=s.G2();return t}tP(){return this.LR}i2(){return this.sR}sP(){return"webgl"+this.i2()}e2(){return 2<=this.i2()}t2(){return this.wA}iP(){return this.bA}eP(){return this.MA}hP(){return 0!==this.vA}rP(){return this.vA}nP(){return this.xA}oP(){return this.GA}aP(){if(2<=this.i2())return"webgl2";{const t=[];return this.AA&&t.push("EXT_frag_depth"),this.EA&&t.push("OES_standard_derivatives"),this.PA&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}lP(){return this.TA}ZE(){return!!this.iR}eR(){return this.iR}Ax(){return this.IA}c2(){return this.CA}f2(){return this.FA}xR(t){this.DA.add(t)}GR(t){this.DA.delete(t)}gR(){return this.OA}s2(){return this.Fx}LA(t){this.Pw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}uP(){return this.Vb()}}}{const zi=self.Ns,Ji={cP:null,fP:null,dP:null,getTime:null,pP:null};zi.Ey.mP=class{constructor(t){t=Object.assign({},Ji,t),this.gP=t.cP,this.yP=t.fP,this.SP=t.dP,this.wP=t.getTime,this.bP=t.pP,this.MP=null,this.vP=new Set}xP(t){this.vP.add(t)}GP(t){this.vP.delete(t)}TM(){this.MP=null;for(const t of this.vP)t.TM()}TP(t){return this.gP?this.gP(t):[t.Fm(),t.Um()]}OE(t){return this.yP(t)}_P(t,s){this.SP(t,s)}IP(){return this.wP()}v1(t){this.bP(t)}CP(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.MP||this.MP.Fm()===s&&this.MP.Um()===i||(t.Y2(this.MP),this.MP=null),null===this.MP&&(this.MP=t.NE(null,{width:s,height:i,Lv:"nearest",Wv:!1})),this.MP}}}{const o=self.Ns,qi=self.vs,xh=qi._s,$i=o.Mr(o.Rect),Xi=o.Mr(o.Rect),Yi=o.Mr(o.Rect),Ki=o.Mr(o.Rect),Zi=xh.create(),Qi=xh.create(),te={RP:null,AP:null,EP:null,PP:!1},se={FP:null,kP:!1,DP:!1,OP:!1,LP:!1,BP:!1,NP:!1};o.Ey.WP=class{constructor(t,s){s=Object.assign({},te,s),this.P1=t,this.jP=s.RP,this.VP=s.AP,this.UP=s.EP,this.HP=null,this.zP=[],this.JP=[],this.qP=[],this.$P=!1,this.wM=0,this.XP=!1,this.YP=!1,this.KP=!1,this.ZP=!1,this.QP=!1,this.t3=!1,this.NR=!1,this.s3=!1,this.i3=!1,this.e3=!1,this.h3=!1,this.r3=!1,this.n3=0,this.o3=[null,null,null],this.a3=!!s.PP,this.l3=0,this.u3=0,this.f3=0,this.d3=0,this.m3=null,this.g3=null,this.y3=o.Mr(o.Rect),this.S3=o.Mr(o.Rect),this.w3=o.Mr(o.Rect),this.b3=o.Mr(o.Rect),this.M3=o.Mr(o.Rect),this.v3=1,this.x3=1,this.G3=0,this.T3=0,this._3=null,this.I3=null,this.C3=0,this.R3=0,this.A3=!1,this.N2=xh.create(),this.E3=xh.create(),this.P1.xP(this)}vr(){this.P1.GP(this),o.Yn(this.qP),o.Yn(this.zP),o.Yn(this.JP),this.m3=null,this.g3=null,this.jP=null,this.VP=null,this.UP=null}TM(){this.$P=!0,o.Yn(this.qP),o.Yn(this.zP),o.Yn(this.JP)}P3(){return this.$P}F3(h,t){if(t=Object.assign({},se,t),o.Yn(this.qP),this.l3=0,this.u3=0,this.XP=!1,this.YP=!1,this.KP=!1,this.ZP=!1,this.QP=!1,this.t3=!1,this.n3=0,this.r3=!!t.LP,this.h3=!!t.NP,this.$P=!1,o.eo(this.zP,h),0!==h.length){if(t.FP){if(t.FP.length!==h.length)throw new Error("incorrect indexMap length");o.eo(this.JP,t.FP)}else{o.Yn(this.JP);for(let t=0,s=h.length;t<s;++t)this.JP.push(t)}for(const s of h)this.l3+=s.rM(),this.u3+=s.nM(),s.cM()&&(this.XP=!0),s.dM()&&(this.YP=!0),s.fM()&&(this.KP=!0),s.oM()&&(this.ZP=!0),s.gM()&&(this.QP=!0);this.t3=this.D3(h[0].eM());const r=this.O3(h[0],t),n=this.L3(h.at(-1),t);if(1!==h.length||r||n){this.e3=!1;let e=0;r&&(this.n3=1,this.qP.push(o.Mr(o.Ey.WP.Step.B3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.n3=Math.max(this.n3,t),this.qP.push(o.Mr(o.Ey.WP.Step.N3,this,e,t,s)),e=t}else this.n3=1,this.qP.push(o.Mr(o.Ey.WP.Step.W3,this,-1,1,s)),e=1;n&&this.qP.push(o.Mr(o.Ey.WP.Step.j3,this,e,0))}else this.e3=!0}}O3(t,s){return!!(s.kP||t.aM()||s.OP&&!t.uM()||t.dM()&&!this.h3||0!==this.l3||0!==this.u3)||(t.eM().Lb()?t.fM()&&(s.BP||s.LP)||t.pM()&&s.LP:t.fM()&&!this.t3&&s.BP)}L3(t,s){return!!s.DP||(t.eM().Lb()?t.fM()||t.oM():(t.fM()||t.oM())&&this.V3())}D3(t){return t.XS()&&this.KP&&!this.ZP}U3(t,s,i){t.XS()&&null===s&&(s=t.GetBackbufferRenderTarget()),this._3=s,this.m3=i.H3||null,this.g3=i.contextObject||null,this.wM=i.z3||0,this.v3=i.devicePixelRatio||1,this.x3=i.J3||1,this.G3=i.q3||0,this.T3="number"==typeof i.time?i.time:this.P1.IP(),this.NR=!1,t.$A(),this.XP&&this.X3();let e=!1;if(this.Y3()&&(this.K3(t,i),e=!0,this.I3=this.P1.CP(t,this.f3,this.d3),$i.I(this.S3),$i.hu(),t.XS()&&t._MaybeDoPendingClearRenderPass(this._3),t.CopyTextureToTexture(this._3.hx(),this.I3,$i.Ol(),$i.Ll(),$i.width(),$i.height())),this.e3)this.Z3(t,i);else if(e||this.K3(t,i),0!==this.w3.width()||0!==this.w3.height()){t.oE(),t.sE(),t.Ww(0),t.Vw(0),this.HP=i.Q3||null,this.C3=i.tF||0,this.R3=i.sF||0,this.A3=!!i.iF,this.eF(t),this.o3[0]=s,this.o3[1]=1<=this.n3?this.hF():null,this.o3[2]=2===this.n3?this.hF():null;for(const h of this.qP){const r=this.rF(h.nF()),n=this.rF(h.oF());t.XS()?h.aF(t,r,n):h.lF(t,r,n)}t.eE(null),this.o3[1]&&this.uF(this.o3[1]),this.o3[2]&&this.uF(this.o3[2]),this.o3.fill(null),this.cF(t),this._3=null,this.I3=null,this.m3=null,this.g3=null,this.HP=null}}K3(t,s){const[i,e]=this.P1.TP(t);this.fF(t,i,e),this.dF(s)}fF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.f3===s&&this.d3===i||this.pF(t,s,i,0,0,this.N2,this.E3),this.f3=s,this.d3=i}pF(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.$S(r,s/i),t.ZS(o,a,t.DS(i),o,a,0,i));xh.I(n,l)}dF(t){this.y3.I(t.mF),t.gF?this.S3.I(t.gF):this.S3.set(0,0,this.f3,this.d3),this.w3.I(this.S3),this.w3.Ct(this.f3,this.d3);const s=this.x3*this.v3;this.S3.Xl(this.l3*s,this.u3*s),this.M3.I(this.S3),this.M3.Ct(this.f3,this.d3),this.S3.ru(0,0,this.f3,this.d3),this.b3.I(this.S3),this.b3.Ct(this.f3,this.d3)}eF(t){if(this.s3=t.FE(),this.i3=t.XE(),this.h3)t.PE(!1),this.YP&&t.kE(!0);else{if($i.I(this.S3),t.Lb()){const s=this.x3*this.v3;$i.Xl(Math.max(this.l3,1)*s,Math.max(this.u3,1)*s),$i.hu(),$i.Cr(0,0,this.f3,this.d3)}else $i.hu();t.DE($i.Ol(),$i.Ll(),$i.width(),$i.height(),this.d3)}}yF(t){t.sE(),this.h3||(this.i3&&t.YE(),t.PE(!1),this.YP&&t.kE(!0)),t.XS()&&t.SetNormalizedCoordsProgramVariant(!0)}cF(t){t.kE(!1),this.i3&&t.$E(),t.PE(this.s3),this.h3||t.LE(),t.XS()&&t.SetNormalizedCoordsProgramVariant(!1),this.NR=t.XA()}SF(){this.M3.Cr(0,0,1,1)}rF(t){return t<0?null:this.o3[t]}hF(){return this.P1.OE(this)}wF(){return this._3}uF(t){this.P1._P(t,this)}bF(t){return this.zP[t]}MF(t){this.HP?this.HP(this,t,()=>this.jP(t,this)):this.jP(t,this),this.e3||this.yF(t)}vF(t){if(this.h3)return!0;if(0!==this.C3||0!==this.R3)return!1;const[s,i]=t.yE(t.OE());return s===this.f3&&i===this.d3}xF(t,s){let i=this.N2,e=this.E3;if(s&&!this.vF(t)){i=Zi,e=Qi;const[h,r]=t.yE(t.OE());this.pF(t,h,r,this.C3,this.R3,i,e),this.h3||t.LE()}t.jA(i),t.qA(e)}X3(){this.P1.v1(this)}GF(t,s){return this.UP(this.JP[t],s)}TF(t,s){let i=this.M3,e=this.b3,h=this.w3;t.Lb()&&(Xi.I(i),Xi.Zl(1),i=Xi,Yi.I(e),Yi.Zl(1),e=Yi,Ki.I(h),Ki.Zl(1),h=Ki),this._F(t,s,e,h,i,1/this.f3,1/this.d3)}IF(t,s){let e=this.b3,h=this.w3,r=1/this.f3,n=1/this.d3;if(this.VP){let{CF:t,RF:s,AF:i}=this.VP(this.m3);t||($i.set(0,0,0,0),t=$i),s=s||this.f3,i=i||this.d3,e=t,h=t,r=1/s,n=1/i}else t.Lb()&&(Yi.I(e),Yi.Zl(1),e=Yi,Ki.I(h),Ki.Zl(1),h=Ki);let i=this.M3;t.Lb()&&((i=Xi).I(this.M3),i.Zl(1)),this._F(t,s,e,h,i,r,n),t.XS()&&this.QP&&t.SetProgramParameter_IsSrcTexRotated(this.r3)}EF(t){return this.KP?t.XS()?this.Y3()?this.I3:this._3.hx():this._3:null}_F(t,s,i,e,h,r,n){t.IE(this.EF(t),h,i,e,this.y3,r,n,this.v3,this.x3,this.G3,this.T3),t.CE(this.GF(s,t))}Z3(t,s){const i=this.zP[0],e=t.FE(),h=i.dM();h&&(t.PE(!1),t.kE(!0),this.M3.set(0,0,1,1),this.w3.set(0,0,1,1)),t.ow(i),t.xM(this.wM),t.VE(this._3);let r=0,n=1;if(this.w3.set(0,0,1,1),i.pM()&&this.VP){const{CF:o,RF:a,AF:l}=this.VP(this.m3);o&&this.w3.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.P1.TP(t);r=1/u,n=1/c}s.mF?this.y3.I(s.mF):this.y3.set(0,0,0,0),t.IE(this.EF(t),this.M3,this.w3,this.w3,this.y3,r,n,this.v3,this.x3,this.G3,this.T3),t.CE(this.GF(0,t)),t.XS()&&this.QP&&t.SetProgramParameter_IsSrcTexRotated(this.r3),t.Ww(0),this.MF(t),h&&(t.kE(!1),t.PE(e))}Y3(){return this.t3}V3(){return!this.t3}PF(){return this.KP}FF(){return!!this.e3&&!this.Y3()}kF(){return this.h3}DF(){return this.m3}OF(){return this.g3}LF(){return this.wM}BF(){return this.A3}XA(){return this.NR}NF(){return this.S3}WF(){return this.b3}jF(){return this.a3}async VF(t,s,i){}}}{const ie=self.Ns;ie.Ey.WP.Step=class{constructor(t,s,i,e=-1){this.UF=t,this.HF=s,this.zF=i,this.Gy=e}JF(){return this.UF}nF(){return this.HF}oF(){return this.zF}qF(){return this.Gy}PG(){return this.JF().bF(this.qF())}lF(t,s,i){}aF(t,s,i){}}}{const ee=self.Ns;ee.Ey.WP.Step.B3=class extends ee.Ey.WP.Step{constructor(t,s,i,e){super(t,s,i,e)}lF(t,s,i){const e=this.JF();t.oE(),t.rw(),t.VE(i,e.BF()),t.RE(0,0,0,0),e.MF(t),e.SF()}aF(t,s,i){const e=this.JF();t.oE(),t.rw(),t.VE(i,!1),t.RE(0,0,0,0),e.MF(t),e.SF()}}}{const he=self.Ns,re=he.Mr(he.Rect),ne=he.Mr(he.fu);he.Ey.WP.Step.j3=class extends he.Ey.WP.Step{constructor(t,s,i,e){super(t,s,i,e)}lF(t,s,i){const e=this.JF();t.rw(),t.VE(i),e.xF(t,!0),t.xM(e.LF()),t.eE(s.hx()),ne.Fu(e.NF()),re.I(e.WF()),re.Zl(1),t.Qw(ne,re),e.jF()&&t.zE(s)}aF(t,s,i){const e=this.JF();t.rw(),t.VE(i,!1),e.vF(t)?ne.Fu(e.WF()):(t.SetNormalizedCoordsProgramVariant(!1),e.xF(t,!0),ne.Fu(e.NF())),t.SetBackTexture(null),t.xM(e.LF()),t.eE(s.hx()),e.kF()?t.gE():t.Qw(ne,e.WF())}}}{const oe=self.Ns;oe.Ey.WP.Step.W3=class extends oe.Ey.WP.Step{constructor(t,s,i,e){super(t,s,i,e)}lF(t,s,i){const e=this.JF();t.VE(i,e.BF()),t.RE(0,0,0,0),t.lE(),t.ow(this.PG()),e.IF(t,this.qF()),e.MF(t),e.SF()}aF(t,s,i){const e=this.JF();t.VE(i,!1),t.RE(0,0,0,0),t.lE(),t.ow(this.PG()),e.IF(t,this.qF()),e.MF(t),e.SF()}}}{const ae=self.Ns,le=ae.Mr(ae.Rect),ue=ae.Mr(ae.fu);ae.Ey.WP.Step.N3=class extends ae.Ey.WP.Step{constructor(t,s,i,e){super(t,s,i,e)}lF(t,s,i){const e=this.JF(),h=(t.VE(i),0===this.oF());h?t.xM(e.LF()):(t.RE(0,0,0,0),t.lE()),t.ow(this.PG()),e.TF(t,this.qF()),t.eE(s.hx()),e.xF(t,h),ue.Fu(e.NF()),le.I(e.WF()),le.Zl(1),t.Qw(ue,le),e.jF()&&t.zE(s)}aF(t,s,i){const e=this.JF(),h=(t.VE(i,!1),0===this.oF());h?(t.xM(e.LF()),t.SetBackTexture(null),e.vF(t)?ue.Fu(e.WF()):(t.SetNormalizedCoordsProgramVariant(!1),e.xF(t,!0),ue.Fu(e.NF()))):(t.RE(0,0,0,0),t.lE(),ue.Fu(e.WF())),t.ow(this.PG()),e.TF(t,this.qF()),t.eE(s.hx()),e.kF()?t.gE():t.Qw(ue,e.WF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Ns),f=self.Ys,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.$F=class{constructor(t){d=t,Object.defineProperties(this,{XF:{value:d.KF().YF(),writable:!1},ZF:{value:d.sk().QF(),writable:!1},ik:{value:{},writable:!1},ek:{value:{},writable:!1},hk:{value:d.rk(),writable:!1},nk:{value:d.ak(),writable:!1},lk:{value:new Date(d.uk()),writable:!1},storage:{value:new self.ck(d),writable:!1},isInWorker:{value:d.fk(),writable:!1},dk:{value:d.pk(),writable:!1},mk:{value:d.gk(),writable:!1},Lv:{value:d.yk(),writable:!1},Sk:{value:d.wk(),writable:!1},bk:{value:new self.Mk(t),writable:!1},vk:{value:new self.xk(t),writable:!1}}),d.Gk().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.Gk().addEventListener("keyup",t=>s.delete(t.key)),d.h0().addEventListener("window-blur",()=>s.clear()),d.fk()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}Tk(t){Object.defineProperties(this.ik,t)}_k(t){Object.defineProperties(this.ek,t)}addEventListener(t,s){d.Gk().addEventListener(t,s)}removeEventListener(t,s){d.Gk().removeEventListener(t,s)}Ik(t,...s){f.Ce(t);const i=d.Ck(),e=i.Rk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.fc())return e.Ak();if(s.length<e.Ek())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.Ek()} expected)`);let h=e.Pk(),r=h.Fk(),n=i.kk();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.Fk())a.has(l)||(r.push(l),a.add(l));for(const u of i.Dk())a.has(u)||(r.push(u),a.add(u))}const o=h.Ok(r,e.Lk(),e.Bk(),e.Ak(),...s);return o}Nk(t){const s=d.jk().Wk();if(!s)throw new Error("not in a function which returns a value");switch(s.Vk()){case 1:"number"==typeof t&&s.Uk(t);break;case 2:"string"==typeof t&&s.Uk(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.Uk(t)}}signal(t){f.Ce(t),d.Ck().Hk(t)}zk(t){return f.Ce(t),d.Ck().Jk(t)}qk(){return[d.pk(),d.gk()]}get isSuspended(){return d.$k()}get Xk(){return d.Yk()}get Kk(){return d.Zk()}get gameTime(){return d.Qk()}get tD(){return d.sD()}get timeScale(){return d.iD()}set timeScale(t){f.Ge(t),d.eD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.hD()}get framesPerSecond(){return d.hD()}get rD(){return d.nD()}get oD(){return d.aD()}get lD(){return d.uD()}get cD(){return d.fD()}set cD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.dD(t)}get pD(){return d.mD()}set pD(t){f.Ge(t),d.gD(t)}get yD(){return d.SD()}set yD(t){d.wD(t)}get bD(){return d.KF().MD()}get vD(){return d.KF().xD()}random(){return d.GD()}get layout(){const t=d.TD();if(t)return t._D();throw new Error("no layout is running - make sure a layout is loaded before accessing")}ID(t){let s=d.CD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.RD(t))return i._D();throw new Error("invalid layout")}AD(){return d.CD().ED().map(t=>t._D())}PD(t){let s=d.CD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.RD(t)))throw new Error("invalid layout");s.FD()||s.kD(i)}get keyboard(){const t=d.DD().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get OD(){const t=d.DD().OD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get LD(){const t=d.DD().LD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get BD(){const t=d.DD().BD;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}ND(t,s){f.Ce(t),f.Ce(s),d.WD(t,s)}jD(t){f.Ge(t);const s=d.VD(t);return s?s.UD():null}HD(t,e){f.Ke(e);const h=d.zD();for(const s of t){const i=d.JD(s),r=i.qD();p.push([r.$D().qF(),r.XD()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.UD(),s.UD()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.YD(p[t][0]),a=p[t][1],l=o.KD();l[a]!==n&&((l[a]=n).qD().ZD(o,!0),o.QD(n),i=!0)}i&&d.tO(),c.Yn(p),c.Yn(m)}}async sO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.iO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.iO("runtime","alert",{message:t+(d.fk()?" [via Web Worker]":"")})}eO(t){return f.Ge(t),d.hO(t)}rO(t){d.nO(t)}}}{let s=self.Ns,i=null;self.oO=class{constructor(t){i=t,Object.defineProperties(this,{aO:{value:!0,writable:!1}})}lO(t){const s=self.cO.uO(t);if(!s)throw new Error("invalid IImageInfo");s.fO(i.dO())}pO(t){return i.Do(t)}mO(t){return i.Oo(t)}gO(t){return i.Lo(t)}yO(t){return i.Bo(t)}SO(t){return i.wO(t)}bO(t){return"flat"===i.MO()&&s.Po(t)&&(t=t.toLowerCase()),i.vO(t)}get xO(){return i.GO()}async TO(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}_O(...t){return i.IO(...t)}CO(t){return i.RO(t)}AO(t){return i.EO(t)}}}{let n=self.Ns,i=self.Ys,o=null;self.PO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.dO(),writable:!1}})}FO(t,s){const i=o.dO(),e=i.JD(t),h=i.JD(s);return o.kO(e,h)}DO(t,s){const i=o.dO(),e=i.JD(t);for(const h of s){const r=i.JD(h);if(o.kO(e,r))return h}return null}OO(t){const s=o.dO().JD(t),i=o.LO(s);return i?i.UD():null}BO(t,s){if(i.Ge(t),i.Ge(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.NO(t,s)}WO(){return o.jO()}VO(t,s){let i=o.dO(),e;e=Array.isArray(t)?t.map(t=>i.UO(t)):[i.UO(t)];const h=n.Rect.kl(s),r=[];return o.HO(null,e,h,r),r.map(t=>t.UD())}}}{let s=self.Ns,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Mk=class{constructor(t){i=t,Object.defineProperties(this,{zO:{value:s.fi.vi,writable:!1},JO:{value:e.get(s.fi.di)||"unknown",writable:!1},qO:{value:s.fi.mi,writable:!1},$O:{value:h.get(s.fi.gi)||"unknown",writable:!1},XO:{value:s.fi.yi,writable:!1},YO:{value:r.get(s.fi.wi)||"unknown",writable:!1}})}get exportType(){let t=i.KO();return i.ZO()?t="nwjs":i.QO()?t="windows-webview2":"cordova"===t?t="Android"===s.fi.di?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.sL().tL()}get iL(){return i.sL().eL()}get hL(){return i.sL().rL()}get nL(){return i.sL().oL()}get aL(){return i.sL().lL()}get uL(){return i.sL().cL()}get devicePixelRatio(){return i.fL()}}}{const ce=self.Ys;self.ck=class{constructor(t){this.dL=t.pL()}getItem(t){return ce.Ce(t),this.dL.getItem(t)}setItem(t,s){return ce.Ce(t),this.dL.setItem(t,s)}removeItem(t){return ce.Ce(t),this.dL.removeItem(t)}clear(){return this.dL.clear()}keys(){return this.dL.keys()}}}{const fe=self.Ns,de=fe.Ws();self.mL=class{#gL;constructor(){const t=fe.SL.yL(de);this.#gL=t,Object.defineProperties(this,{runtime:{value:t.dO().wL(),writable:!1},bL:{value:t.ML(),writable:!1},vL:{value:t.xL(),writable:!1},GL:{value:t.TL(),writable:!1},_L:{value:t.IL(),writable:!1},CL:{value:t.RL(),writable:!1},AL:{value:t.EL(),writable:!1},PL:{value:t.FL(),writable:!1},kL:{value:t.DL(),writable:!1}}),t.dO().OL(this,t)}static LL(t){if(!t)return null;const s=fe.SL.BL(t);return s?s.NL():null}WL(){return this.#gL.VL().jL()}UL(){return this.#gL.HL().UD()}}}{const pe=self.Ns,me=self.Ys,ge=pe.Ws();self.zL=class{#gL;constructor(){const t=pe.SL.yL(ge);this.#gL=t,Object.defineProperties(this,{name:{value:t.yf(),writable:!1},runtime:{value:t.dO().wL(),writable:!1},JL:{value:t.qL().NL(),writable:!1}}),t.dO().OL(this,t)}addEventListener(t,s){me.Ce(t),me.Ke(s),this.#gL.Gk().addEventListener(t,s)}removeEventListener(t,s){me.Ce(t),me.Ke(s),this.#gL.Gk().removeEventListener(t,s)}$L(){return[...this.instances()]}XL(){return pe.first(this.instances())}YL(){return[...this.KL()]}ZL(){return pe.first(this.KL())}QL(t){const s=this.#gL,i=s.dO().t5(t),e=s.s5(i);return e?e.UD():null}*instances(){for(const t of this.#gL.i5())yield t.UD()}*KL(){for(const t of this.#gL.h5().e5())yield t.UD()}r5(t){me.Ke(t);const s=this.#gL;if(0<s.n5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.o5(t)}Ni(t,s,i,e,h){if(me.Se(s),me.Se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#gL,n=r.dO(),o=n.TD().$D(t);if(!o)throw new Error("invalid layer");const a=n.a5(r,o,s,i,e,h),l=(e&&o.l5(a),n.Ck());return l.u5(!0),a.c5(),l.u5(!1),l.f5()||n.CD().d5()||n.p5(),a.UD()}}}{const ye=self.Ys,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.m5=class{constructor(t){l.set(this,t);const s=[],i=t.g5(),e=i.y5().length;for(let t=0;t<e;++t)s.push(new self.S5(i,t));Object.defineProperties(this,{name:{value:t.yf(),writable:!1},index:{value:t.qF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ce(t),ye.Ke(s),l.get(this).Gk().addEventListener(t,s)}removeEventListener(t,s){ye.Ce(t),ye.Ke(s),l.get(this).Gk().removeEventListener(t,s)}get width(){return l.get(this).Fm()}set width(t){ye.Ge(t),l.get(this).Wm(t)}get height(){return l.get(this).Um()}set height(t){ye.Ge(t),l.get(this).km(t)}w5(t,s){ye.Ge(t),ye.Ge(s);const i=l.get(this);i.Wm(t),i.km(s)}getSize(){const t=l.get(this);return[t.Fm(),t.Um()]}set scale(t){ye.Ge(t),l.get(this).b5(t)}get scale(){return l.get(this).M5()}set angle(t){ye.Ge(t),l.get(this).v5(t)}get angle(){return l.get(this).GetAngle()}set scrollX(t){ye.Se(t),l.get(this).x5(t)}get scrollX(){return l.get(this).G5()}set scrollY(t){ye.Se(t),l.get(this).T5(t)}get scrollY(){return l.get(this)._5()}scrollTo(t,s){ye.Se(t),ye.Se(s);const i=l.get(this);i.x5(t),i.T5(s)}I5(){const t=l.get(this);return[t.G5(),t._5()]}C5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.$D(t))?i.R5():null}A5(){return l.get(this).E5().map(t=>t.R5())}*P5(){for(const t of l.get(this).P5())yield t.R5()}F5(t,s,i){const e=l.get(this),h=self.k5,r=(ye.Ce(t),ye.oh(s,h),s?e.dO().D5(s):null),n=Se.indexOf(i);if(n<0)throw new Error("invalid location");e.O5(t,r,n)}L5(t,s,i){const e=l.get(this),h=e.dO(),r=self.k5,n=(ye.nh(t,r),h.D5(t));if(!n)throw new Error("invalid layer");ye.oh(s,r);const o=s?h.D5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.B5(n,o,a)}N5(t){const s=l.get(this),i=self.k5,e=(ye.nh(t,i),s.dO().D5(t));if(!e)throw new Error("invalid layer");const h=e.dO();s.W5(e),h.Ck().f5()||h.p5()}j5(){const t=l.get(this),s=t.dO();t.V5(),s.Ck().f5()||s.p5()}U5(t,s){ye.Ge(t),ye.Ge(s),l.get(this).H5(t,s)}z5(){return l.get(this).J5()}set K(t){ye.Ce(t);const s=l.get(this);if("perspective"===t)s.q5();else{if("orthographic"!==t)throw new Error("invalid projection");s.X5()}}get K(){return l.get(this).Y5()?"orthographic":"perspective"}}}{const we=self.Ns,be=self.Ys,f=new WeakMap,Me=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...Me.entries()].map(t=>[t[1],t[0]])),xe=we.Mr(we.ra);self.k5=class{constructor(t){f.set(this,t);const s=[],i=t.g5(),e=i.y5().length;for(let t=0;t<e;++t)s.push(new self.S5(i,t));Object.defineProperties(this,{name:{value:t.yf(),writable:!1},layout:{value:t.RD()._D(),writable:!1},effects:{value:s,writable:!1}}),t.dO().OL(this,t)}get K5(){const t=f.get(this).Z5();return t?t.R5():null}*Q5(){for(const t of f.get(this).Q5())yield t.R5()}*tB(){for(const t of f.get(this).sB())yield t.R5()}*iB(){for(const t of f.get(this).sB())for(const s of t.eB())yield s.R5()}get index(){return f.get(this).qF()}get isVisible(){return f.get(this).hB()}set isVisible(t){f.get(this).rB(t)}get nB(){return f.get(this).oB()}get isInteractive(){return f.get(this).aB()}set isInteractive(t){f.get(this).lB(t)}get uB(){return f.get(this).cB()}set uB(t){f.get(this).fB(!!t)}get dB(){return f.get(this).pB()}get opacity(){return f.get(this).ZA()}set opacity(t){t=we.Cr(+t,0,1),isNaN(t)||f.get(this).tE(t)}set scale(t){be.Ge(t),f.get(this).mB(t)}get scale(){return f.get(this).gB()}set scaleRate(t){be.Ge(t),f.get(this).yB(t)}get scaleRate(){return f.get(this).SB()}set angle(t){be.Ge(t),f.get(this).v5(t)}get angle(){return f.get(this).wB()}set parallaxX(t){be.Ge(t),f.get(this).bB(t)}get parallaxX(){return f.get(this).MB()}set parallaxY(t){be.Ge(t),f.get(this).vB(t)}get parallaxY(){return f.get(this).xB()}set GB(t){be.Ge(t),f.get(this).WM(t)}get GB(){return f.get(this).NM()}set TB(t){f.get(this)._B(t)}get TB(){return f.get(this).IB()}set CB(t){f.get(this).RB(t)}get CB(){return f.get(this).AB()}set z3(t){be.Ce(t);const s=Me.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).xM(s)}get z3(){return ve.get(f.get(this).EB())}set backgroundColor(t){if(be.Ue(t),t.length<3)throw new Error("expected 3 elements");xe.ca(t[0],t[1],t[2]);const s=f.get(this),i=s.PB();i.Ca(xe)||(i.wa(xe),s.dO().tO())}get backgroundColor(){const t=f.get(this).PB();return[t.ba(),t.Ma(),t.xa()]}set scrollX(t){be.Se(t);const s=f.get(this);s.kB(!0),s.x5(t)}get scrollX(){return f.get(this).G5()}set scrollY(t){be.Se(t);const s=f.get(this);s.kB(!0),s.T5(t)}get scrollY(){return f.get(this)._5()}scrollTo(t,s){be.Se(t),be.Se(s);const i=f.get(this);i.kB(!0),i.x5(t),i.T5(s)}I5(){const t=f.get(this);return[t.G5(),t._5()]}DB(){f.get(this).kB(!1)}getViewport(){return f.get(this).OB().Wl()}LB(t,s,i=0){be.Se(t),be.Se(s),be.Se(i);const e=f.get(this),h=e.dO();return e.BB(t-h.NB(),s-h.WB(),i)}jB(t,s,i=0){be.Se(t),be.Se(s),be.Se(i);const e=f.get(this),h=e.dO(),[r,n]=e.VB(t,s,i);return[r+h.NB(),n+h.WB()]}UB(t,s,i=0){return be.Se(t),be.Se(s),be.Se(i),f.get(this).HB(t,s,i)}zB(t,s,i=0){return be.Se(t),be.Se(s),be.Se(i),f.get(this).JB(t,s,i)}get qB(){return f.get(this).$B()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.Mr(Ge.Event.h0),_e.set(t,s)),s};e;const Ge=self.Ns,Te=self.Ys,_e=new WeakMap,Ie=Ge.Ws();self.XB=class{#gL;constructor(){const t=Ge.SL.yL(Ie),s={runtime:{value:(this.#gL=t).dO().wL(),writable:!1},YB:{value:t.KB().jL(),writable:!1},JL:{value:t.qL().NL(),writable:!1}};t.ZB(s),t.QB(s),Object.defineProperties(this,s),t.dO().OL(this,t)}static t4(){return Ge.SL.s4()}i4(){const t=_e.get(this);t&&(t.vr(),_e.delete(this))}addEventListener(t,s,i){Te.Ce(t),Te.Ke(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Ce(t),Te.Ke(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}destroy(){const t=this.#gL,s=t.dO();s.e4(t),s.Ck().f5()||s.CD().d5()||s.Ck().h4()||s.p5()}r4(){const t=this.#gL.n4();return t?t.map(t=>t.UD()):[]}*o4(){const t=this.#gL;if(t.a4())for(const s of t.l4())yield s.UD()}get uid(){return this.#gL.u4()}get c4(){return this.#gL.f4()}get d4(){return this.#gL.m4()}set timeScale(t){Te.Ge(t),this.#gL.eD(t)}get timeScale(){return this.#gL.g4()}y4(){this.#gL.S4()}get Xk(){const t=this.#gL;return t.dO().Yk(t)}w4(...t){Te.Ue(t);const s=new Set(t),i=this.#gL.b4();return s.isSubsetOf(i)}M4(t){Te.nh(t,Set),this.#gL.v4(t)}x4(){return new Set(this.#gL.b4())}signal(t){Te.Ce(t);const s=this.#gL;s.dO().Ck().G4(s,t)}zk(t){Te.Ce(t);const s=this.#gL;return s.dO().Ck().T4(s,t)}}}{const Ce=self.Ns,Re=self.Ys,Ae=Ce.Ws();self._4=class extends self.XB{#gL;#I4=!1;#C4=null;#R4=!1;#A4=null;#E4;#P4;constructor(t){super(),this.#gL=Ce.SL.yL(Ae),this.#I4=!1,this.#C4=null,this.#R4=!1,this.#A4=null,this.#E4=t?.domComponentId,this.#P4=t?.wrapperComponentId}i4(){this.F4(!1),this.D4(!1),super.i4()}O4(){return Ce.SL.L4()}B4(t){const s=this.#gL;s.dO().N4(t,s)}W4(t){const s=this.#gL;return s.dO().j4(t,s)}V4(t,s){if(Re.Ce(t),Re.Ke(s),!this.#E4)throw new Error("no DOM component id set");const i=this.#gL.dO();i.U4(this.#E4,t,s)}H4(t){Re.Ue(t);for(const[s,i]of t)this.V4(s,i)}z4(t,s){if(Re.Ce(t),!this.#E4)throw new Error("no DOM component id set");const i=this.#gL.dO();i.Cf(this.#E4,t,s)}J4(t,s){if(Re.Ce(t),!this.#E4)throw new Error("no DOM component id set");const i=this.#gL.dO();return i.iO(this.#E4,t,s)}q4(t,s){const i=this.#gL.dO();if(!i.fk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#E4,handler:t,data:s,responseId:null});this.z4(t,s)}F4(t){if(this.#I4!==(t=!!t)){this.#I4=t;const s=this.#gL.dO();if(t){if(!this.#C4)if(this.#gL.dO().X4()){const i=globalThis.C3Debugger,e=this.JL;this.#C4=()=>{const t=performance.now();this.Y4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#C4=()=>this.Y4();s.h0().addEventListener("tick",this.#C4)}else s.h0().removeEventListener("tick",this.#C4)}}K4(){return this.#I4}Y4(){}D4(t){if(this.#R4!==(t=!!t)){this.#R4=t;const s=this.#gL.dO();if(t){if(!this.#A4)if(this.#gL.dO().X4()){const i=globalThis.C3Debugger,e=this.JL;this.#A4=()=>{const t=performance.now();this.Z4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#A4=()=>this.Z4();s.h0().addEventListener("tick2",this.#A4)}else s.h0().removeEventListener("tick2",this.#A4)}}Q4(){return this.#R4}Z4(){}tN(){return[]}sN(){return null}iN(t){}eN(){if(!this.#P4)throw new Error("no wrapper component id set");const t=this.#gL.dO();return t.hN(this.#P4)}rN(t,s){if(Re.Ce(t),Re.Ke(s),!this.#P4)throw new Error("no wrapper component id set");const i=this.#gL.dO();i.nN(this.#P4,t,s)}oN(t){Re.Ue(t);for(const[s,i]of t)this.rN(s,i)}aN(t,s){if(!this.#P4)throw new Error("no wrapper component id set");this.runtime.vk.lN(this.#P4,t,s)}uN(t,s){if(this.#P4)return this.runtime.vk.cN(this.#P4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#fN;#dN;constructor(t){super(t);const s=Ee.SL.yL(De),i=s.qD(),e=(this.#fN=s,this.#dN=i,ke.set(this,s),[]),h=i.pN();if(h){const n=i.KB().g5().y5().length;for(let t=0;t<n;++t)e.push(new self.S5(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#dN.RD()._D()}get mN(){return this.#dN.$D().R5()}get x(){return this.#dN.kM()}set x(t){t=+t;const s=this.#dN;isNaN(t)||s.kM()===t||(s.DM(t),s.gN())}get y(){return this.#dN.LM()}set y(t){t=+t;const s=this.#dN;isNaN(t)||s.LM()===t||(s.BM(t),s.gN())}setPosition(t,s){t=+t,s=+s;const i=this.#dN;isNaN(t)||isNaN(s)||i.kM()===t&&i.LM()===s||(i.yN(t,s),i.gN())}SN(){const t=this.#dN;return[t.kM(),t.LM()]}wN(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#dN;i.bN(t,s),i.gN()}}get GB(){return this.#dN.NM()}set GB(t){t=+t;const s=this.#fN,i=this.#dN;isNaN(t)||i.NM()===t||(i.WM(t),s.dO().tO())}get MN(){return this.#dN.vN()}get width(){return this.#dN.Fm()}set width(t){t=+t;const s=this.#dN;isNaN(t)||s.Fm()===t||(s.Wm(t),s.gN())}get height(){return this.#dN.Um()}set height(t){t=+t;const s=this.#dN;isNaN(t)||s.Um()===t||(s.km(t),s.gN())}w5(t,s){t=+t,s=+s;const i=this.#dN;isNaN(t)||isNaN(s)||i.Fm()===t&&i.Um()===s||(i.vC(t,s),i.gN())}getSize(){const t=this.#dN;return[t.Fm(),t.Um()]}get angle(){return this.#dN.GetAngle()}set angle(t){t=Ee.Rr(+t);const s=this.#dN;isNaN(t)||s.GetAngle()===t||(s.v5(t),s.gN())}get xN(){return Ee.Er(this.angle)}set xN(t){this.angle=Ee.Ar(t)}Ou(){return this.#dN.GN().Wl()}TN(){return this.#dN._N().Au()}IN(){return this.#dN.CN()}get isVisible(){return this.#dN.oB()}set isVisible(t){t=!!t;const s=this.#fN,i=this.#dN;i.oB()!==t&&(i.rB(t),s.dO().tO())}get opacity(){return this.#dN.ZA()}set opacity(t){t=Ee.Cr(+t,0,1);const s=this.#fN,i=this.#dN;isNaN(t)||i.ZA()===t||(i.tE(t),s.dO().tO())}set RN(t){if(Pe.Ue(t),t.length<3)throw new Error("expected 3 elements");Be.ca(t[0],t[1],t[2]);const s=this.#fN,i=this.#dN;i.AN().Ca(Be)||(i.EN(Be),s.dO().tO())}get RN(){const t=this.#dN.AN();return[t.ba(),t.Ma(),t.xa()]}set z3(t){Pe.Ce(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#fN,e=this.#dN;e.xM(s),i.dO().tO()}get z3(){return Le.get(this.#dN.EB())}PN(){this.#dN.FN()}kN(){this.#dN.DN()}ON(t){Pe.nh(t,Fe);const s=this.#fN,i=s.dO().D5(t);if(!i)throw new Error("invalid layer");s.qD().LN(i)}BN(t,s){Pe.nh(t,h),this.#dN.NN(ke.get(t),s)}get zIndex(){return this.#dN.XD()}get WN(){return this.#dN.jN()}set WN(t){this.#dN.VN(!!t)}au(t,s){return Pe.Se(t),Pe.Se(s),this.#dN.UN(+t,+s)}FO(t){Pe.nh(t,h);const s=this.#fN,i=ke.get(t);return s.dO().sk().kO(s,i)}OO(){const t=this.#fN,s=t.dO().sk().LO(t);return s?s.UD():null}getParent(){const t=this.#fN.HN();return t?t.UD():null}zN(){const t=this.#fN.JN();return t?t.UD():null}*qN(){for(const t of this.#fN.qN())yield t.UD()}$N(){return this.#fN.XN()}YN(t){const s=this.#fN.KN(t);return s?s.UD():null}*children(){for(const t of this.#fN.children())yield t.UD()}*ZN(){for(const t of this.#fN.ZN())yield t.UD()}QN(t,s){Pe.nh(t,h),Pe.Oe(s),s=s||{};const i=this.#fN,e=ke.get(t);i.t6(e,s)}removeChild(t){Pe.nh(t,h);const s=this.#fN,i=ke.get(t);s.s6(i)}i6(){const t=this.#fN;if(t.e6()){const s=t.HN();s.s6(t)}}h6(){const t=this.#dN;return{r6:t.n6(),o6:t.a6(),l6:t.u6(),c6:t.f6(),d6:t.p6(),m6:t.g6(),y6:t.S6(),w6:t.b6(),M6:t.v6()}}x6(t,s){Pe.Ge(t),Pe.Ge(s),this.#dN.G6(t,s)}T6(){const t=this.#dN;t._6(),t.gN()}I6(t,s,i){Pe.Ge(t),Pe.Ge(s),Pe.De(i);const e=this.#dN;e.C6(t,s,i)&&e.gN()}R6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#dN;if(o.A6()){const a=o.E6(),l=a.Gv(t,s);null!==l&&(i=l.kM(),e=l.LM(),h=l.NM(),r=l.jM(),n=l.UM())}return{x:i,y:e,GB:h,u:r,v:n}}P6(){const t=this.#dN;if(!t.A6())return[0,0];const s=t.E6();return[s.cv(),s.dv()]}}};0;const Ee=self.Ns,Pe=self.Ys,Fe=self.k5,ke=new WeakMap,De=Ee.Ws(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Be=Ee.Mr(Ee.ra);self.F6=t(self.XB),self.k6=t(self._4)}{const Ne=self.Ys;self.D6=class extends self.F6{#gL;constructor(){super(),this.#gL=self.XB.t4()}O6(){return this.#gL.B6().L6()}focus(){this.#gL.B6().N6()}blur(){this.#gL.B6().W6()}j6(t,s){Ne.Ce(t),this.#gL.B6().V6(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=We.Mr(We.Event.h0),Ve.set(t,s)),s};e;const We=self.Ns,je=self.Ys,Ve=new WeakMap,Ue=We.Ws();self.U6=class{#gL;constructor(){const t=We.SL.yL(Ue),s={runtime:{value:(this.#gL=t).dO().wL(),writable:!1},behavior:{value:t.z6().H6(),writable:!1},J6:{value:t.X6().q6(),writable:!1}};Object.defineProperties(this,s),t.dO().OL(this,t)}static t4(){return We.SL.s4()}get Y6(){return this.#gL.K6().UD()}i4(){const t=Ve.get(this);t&&(t.vr(),Ve.delete(this))}addEventListener(t,s,i){je.Ce(t),je.Ke(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.Ce(t),je.Ke(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Ns,ze=He.Ws();self.Z6=class{constructor(){const t=He.SL.yL(ze),s={runtime:{value:t.dO().wL(),writable:!1},behavior:{value:t.z6().H6(),writable:!1},name:{value:t.yf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ns,qe=Je.Ws();self.Q6=class{#gL;constructor(){const t=Je.SL.yL(qe),s={runtime:{value:(this.#gL=t).dO().wL(),writable:!1}};Object.defineProperties(this,s),t.dO().OL(this,t)}$L(){return this.#gL.e5().map(t=>t.UD())}static LL(t){if(!t)return null;const s=Je.SL.tW(t);return s?s.H6():null}}}{const $e=self.Ns,Xe=self.Ys,Ye=$e.Mr($e.ra);self.S5=class{#gL;constructor(t,s){this.#gL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#gL.y5();return t[this.index].yf()}get isActive(){return this.#gL.sW(this.index)}set isActive(t){t=!!t;const s=this.#gL;s.sW(this.index)!==t&&(s.iW(this.index,t),s.eW(),s.dO().tO())}setParameter(t,s){Xe.Ge(t),t=Math.floor(+t);const i=this.#gL,e=i.hW(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof $e.ra){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ye.ca(s[0],s[1],s[2]),s=Ye}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.rW(this.index,t,s);h&&i.sW(this.index)&&i.dO().tO()}getParameter(t){Xe.Ge(t),t=Math.floor(+t);const s=this.#gL,i=s.hW(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof $e.ra?[i.ba(),i.Ma(),i.xa()]:i}}}self.nW=class{#gL;constructor(t){this.#gL=t,Object.defineProperties(this,{name:{value:t.yf(),writable:!1}})}get speed(){return this.#gL.oW()}get isLooping(){return this.#gL.aW()}get repeatCount(){return this.#gL.lW()}get uW(){return this.#gL.cW()}get fW(){return this.#gL.dW()}get frameCount(){return this.#gL.pW()}mW(){return this.#gL.gW().map(t=>t.yW())}*frames(){for(const t of this.#gL.gW())yield t.yW()}};self.cO=class{#gL;constructor(t){this.#gL=t}static uO(t){return t.#gL}get width(){return this.#gL.Fm()}get height(){return this.#gL.Um()}getSize(){const t=this.#gL;return[t.Fm(),t.Um()]}SW(t){return t.wW(this)}bW(){return this.#gL.QC().Wl()}};{const Ke=self.Ys;self.MW=class extends self.cO{#gL;constructor(t){super(t.vW()),this.#gL=t,Object.defineProperties(this,{duration:{value:t.xW(),writable:!1},GW:{value:t.TW(),writable:!1},_W:{value:t.IW(),writable:!1}})}RW(){const t=this.#gL;return[t.TW(),t.IW()]}AW(){return this.#gL.EW()}PW(t){return this.FW(t)[0]}kW(t){return this.FW(t)[1]}FW(t){let s=this.#gL,i=null;if("number"==typeof t)i=s.DW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.OW(t)}return i?[i.kM(),i.LM()]:this.RW()}LW(){const t=this.#gL.BW();return t?t.Zu():0}NW(t){return this.WW(t)[0]}jW(t){return this.WW(t)[1]}WW(t){Ke.Ge(t),t=Math.floor(t);const s=this.#gL.BW();if(!s||t<0||t>=s.Zu())return[0,0];const i=s.Ku(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#gL.VW()}}}{let s=function(t){const s=Qe.get(t);if(s.UW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Ys,Qe=new WeakMap;self.HW=class{constructor(t){Qe.set(this,t),t.dO().OL(this,t)}pause(){s(this).zW()}resume(){s(this).JW()}stop(){s(this).T0()}w4(t){return s(this).qW(t)}set time(t){Ze.Ge(t),s(this).$W(t)}get time(){return s(this).IP()}set totalTime(t){Ze.Ge(t),s(this).XW(t)}get totalTime(){return s(this).YW()}set isLooping(t){s(this).KW(!!t)}get isLooping(){return s(this).ZW()}set fW(t){s(this).QW(!!t)}get fW(){return s(this).t8()}set playbackRate(t){Ze.Ge(t),s(this).s8(t)}get playbackRate(){return s(this).i8()}get progress(){const t=s(this);return t.IP()/t.YW()}get tags(){return s(this).e8()}get finished(){return s(this).h8()}get isPlaying(){return s(this).IsPlaying()}get r8(){return s(this).n8()}get o8(){return Qe.get(this).UW()}}}{let i=new WeakMap;self.a8=class extends self.HW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.yf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.UW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ys),h=new WeakMap,r=new WeakMap,n=null;self.l8=class extends self.HW{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}u8(t){e.Ce(t);const s=self.Pc.Xc(n(t));i(this).c8(s)}get Y6(){const t=i(this).f8();return t?t.UD():null}get d8(){return i(this).p8()}set d8(t){i(this).m8(!!t)}get value(){const t=i(this);if("value"!==t.g8())throw new Error("not a value tween");return t.S8("value").y8()}}}self.w8=class extends self.mL{constructor(){super()}};{const th=self.Ns,sh=self.Ys,ih=th.Ws();self.b8=class extends self.w8{#gL;#E4;#M8=0;#v8=new Map;constructor(t){if(super(),this.#gL=th.SL.yL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#E4=t.domComponentId,this.x8("elem-focused",t=>t.G8()),this.x8("elem-blurred",t=>{t&&t.T8()})}_8(t){const s=this.#M8++;return this.#v8.set(s,t),s}I8(t){this.#v8.delete(t)}x8(t,i){const s=this.#gL.dO();s.U4(this.#E4,t,t=>{const s=this.#v8.get(t.elementId);i(s,t)})}C8(t){sh.Ue(t);for(const[s,i]of t)this.C8(s,i)}}}{const eh=self.Ns,hh=(new WeakMap,eh.Ws());self.A8=class extends self.zL{#gL;constructor(){super(),this.#gL=eh.SL.yL(hh)}E8(){}P8(){return this.#gL.vW().F8()}k8(t){}D8(t){}O8(){}L8(t){}}}{const rh=self.Ns,nh=(new WeakMap,rh.Ws());self.B8=class extends self.k6{#gL;#N8=null;#W8=null;constructor(t){super(t),this.#gL=rh.SL.yL(nh)}i4(){if(super.i4(),this.#N8){const t=this.#gL.dO().h0();t.removeEventListener("renderercontextlost",this.#N8),t.removeEventListener("renderercontextrestored",this.#W8),this.#N8=null,this.#W8=null}}j8(){if(!this.#N8){this.#N8=()=>this.V8(),this.#W8=()=>this.U8();const t=this.#gL.dO().h0();t.addEventListener("renderercontextlost",this.#N8),t.addEventListener("renderercontextrestored",this.#W8)}}V8(){}U8(){}H8(t){}}}{const oh=self.Ns,ah=oh.Mr(oh.Rect),lh=new WeakMap,uh=oh.Ws();self.z8=class extends self.B8{#J8=-1;#q8=!0;#X8=!1;#Y8=!1;#K8=-.2;#Z8=oh.Mr(oh.Rect,0,0,-1,-1);#Q8=0;#tj=0;#sj=-1;#ij=-1;#ej=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.SL.yL(uh),i=(lh.set(this,s),this.#J8=this.JL._8(this),s.dO().sL());this.#Q8=i.hj(),this.#tj=i.rj(),this.F4(!0)}i4(){super.i4(),this.JL.I8(this.#J8),this.nj("destroy"),this.#J8=-1,lh.delete(this)}oj(){const t=lh.get(this).dO();if(t.fk())throw new Error("not valid in worker mode");return this.aj("get-element")}nj(t,s){(s=s||{}).elementId=this.#J8,this.z4(t,s)}aj(t,s){return(s=s||{}).elementId=this.#J8,this.q4(t,s)}lj(t,s){return(s=s||{}).elementId=this.#J8,this.J4(t,s)}uj(t){t=t||{};const s=lh.get(this).qD();t.elementId=this.#J8,t.isVisible=s.oB(),t.htmlIndex=s.$D().cj(),t.htmlZIndex=s.fj(),Object.assign(t,this.pj()),this.#q8=!!t.isVisible,this.q4("create",t),this.mj(!0)}gj(t){this.#q8!==(t=!!t)&&(this.#q8=t,this.nj("set-visible",{isVisible:t}))}Y4(){this.mj(!1)}yj(){const t=lh.get(this).dO(),s=t.sL().Sj();return"Android"===oh.fi.di&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}mj(u){const c=lh.get(this);if(!c.wj()){let t=c.qD(),s=t.$D(),i=t.GN(),[e,h]=s.VB(i.Ol(),i.Ll()),[r,n]=s.VB(i.Bl(),i.Nl()),o=c.dO().sL(),a=o.rL(),l=o.oL();if(t.oB()&&s.oB())if(!this.yj()&&(r<=0||n<=0||a<=e||l<=h))this.gj(!1);else{ah.set(e,h,r,n);const f=o.hj(),d=o.rj(),p=s.cj(),m=t.fj();if(!u&&ah.equals(this.#Z8)&&this.#Q8===f&&this.#tj===d&&this.#sj===p&&this.#ij===m)this.gj(!0);else{this.#Z8.I(ah),this.#Q8=f,this.#tj=d,this.#sj=p,this.#ij=m,this.gj(!0);let t=null;this.#Y8&&(t=s.bj()+this.#K8),this.nj("update-position",{left:Math.round(this.#Z8.Ol()),top:Math.round(this.#Z8.Ll()),width:Math.round(this.#Z8.width()),height:Math.round(this.#Z8.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.gj(!1)}}Mj(){this.aj("focus",{focus:!0})}vj(){this.aj("focus",{focus:!1})}G8(){this.#X8=!0}T8(){this.#X8=!1}xj(){return this.#X8}Gj(t,s){this.postToDOMElement("set-css-style",{prop:oh.Qo(t),val:s})}Tj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}_j(t){this.postToDOMElement("remove-attribute",{name:t})}Ij(){this.#ej||(this.#ej=!0,Promise.resolve().then(()=>{this.#ej=!1,this.nj("update-state",this.pj())}))}pj(){}Cj(){return this.#J8}}}self.Rj=class extends self.Q6{constructor(){super()}};self.Aj=class extends globalThis.Z6{constructor(){super()}E8(){}};{const ch=self.Ns,fh=new WeakMap,dh=ch.Ws();self.Ej=class extends self.U6{#I4=!1;#R4=!1;#Pj=!1;constructor(){super(),fh.set(this,ch.SL.yL(dh))}i4(){super.i4(),this.F4(!1),this.D4(!1),this.Fj(!1),fh.delete(this)}O4(){return ch.SL.L4()}kj(){}B4(t){const s=fh.get(this);s.dO().N4(t,s.K6(),s.X6())}W4(t){const s=fh.get(this);return s.dO().j4(t,s.K6(),s.X6())}F4(t){if(this.#I4!==(t=!!t)){this.#I4=t;const s=fh.get(this).dO();t?s.Dj(this):s.Oj(this)}}K4(){return this.#I4}Y4(){}D4(t){if(this.#R4!==(t=!!t)){this.#R4=t;const s=fh.get(this).dO();t?s.Lj(this):s.Bj(this)}}Q4(){return this.#R4}Z4(){}Fj(t){if(this.#Pj!==(t=!!t)){this.#Pj=t;const s=fh.get(this).dO();t?s.Nj(this):s.Wj(this)}}jj(){return this.#Pj}Vj(){}tN(){return[]}sN(){return null}iN(t){}}}{let e=self.Ys,h=null;self.xk=class{constructor(t){h=t}rO(t){h.nO(t)}lN(t,s,i){e.Ce(t),e.Ce(s),e.He(i),h.Uj(t,s,i)}cN(t,s,i){return e.Ce(t),e.Ce(s),e.He(i),h.Hj(t,s,i)}zj(t){return e.Re(t),new self.Jj(h,t)}set qj(t){h.$j(!!t)}get qj(){return h.Xj()}Yj(t){h.Kj(!!t)}Zj(t){e.Se(t);const s=h.Qj(t);return s?s.jL():null}}}self.Jj=class{#tV;#sV;#iV;#eV;#hV;#rV;constructor(t,s){const i=(this.#tV=t).Ck(),e=t.kk(),h=(this.#sV=e,this.#iV=e.nV(),t.jk()),r=(this.#eV=h.oV(),this.#hV=h.aV(e),i.lV()),n=r.aV();this.#rV=n,s&&n.uV(s),t.cV(!1)}fV(){const t=this.#tV.Ck(),s=this.#iV,i=this.#rV;t.dV(s),this.#sV.pV(this.#eV,this.#hV),t.mV(s),i.gV(i.qF()+1)}get yV(){return this.#rV.SV()}release(){const t=this.#tV,s=t.jk(),i=t.Ck().lV();t.cV(!0),i.wV(),s.wV()}};{let d=self.Ns,h=self.Ys,p=null,r=null;self.bV=class{constructor(t,s){r=t,p=s}MV(){p.oE()}vV(t){p.rE(t)}xV(){p.dw()}GV(){p.rw()}TV(){p.bw()}setColor(t){p.QA(t[0],t[1],t[2],t[3])}_V(t,s,i,e){p.QA(t,s,i,e)}IV(){p.sE()}CV(t){p.tE(t)}RV(t){p.Vw(t)}AV(){p.Uw()}rect(t){p.uE(t.left,t.top,t.right,t.bottom)}EV(t,s,i,e){p.uE(t,s,i,e)}PV(t){p.fu(d.fu.Eu(t))}FV(t,s,i,e,h,r,n,o){p.Ib(t,s,i,e,h,r,n,o)}kV(t,s){p.Qw(d.fu.Eu(t),d.Rect.jl(s))}DV(t,s){p.dE(d.fu.Eu(t),d.fu.Eu(s))}OV(t,s,i,e,h,r,n,o,a,l,u,c,f){p.pE(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.jl(f))}LV(t,s,i,e,h,r,n,o,a,l,u,c,f){p.$w(t,s,i,e,h,r,n,o,a,l,u,c,d.fu.Eu(f))}BV(t,s,i){p.mE(t,s,i)}NV(t){p._b(t)}line(t,s,i,e){p.$m(t,s,i,e)}WV(t,s,i,e,h,r){p.Xw(t,s,i,e,h,r)}jV(t,s,i,e){p.tb(t,s,i,e)}VV(t){p.hb(d.Rect.jl(t))}UV(t){p.rb(d.fu.Eu(t))}HV(t){p.cb(t)}zV(){p.fb()}JV(t){p.yb(t)}qV(){p.Mb()}$V(t){h.oh(t,self.XV);const s=t?r.D5(t):null;p.eE(s)}YV(t,s){const i=self.cO.uO(t);if(i)return i.KV(p,{Dv:s?.Dv??"clamp-to-edge",Ov:s?.Ov??"clamp-to-edge",Lv:s?.Lv??"trilinear",Wv:s?.Wv??!0});throw new Error("invalid IImageInfo")}ZV(t){const s=self.cO.uO(t);if(!s)throw new Error("invalid IImageInfo");s.HI()}wW(t){const s=self.cO.uO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.hx();return self.XV.QV(r,i)}tU(t,s,i){h.Ge(t),h.Ge(s);const e=p.z2(t,s,{Dv:i?.Dv??"clamp-to-edge",Ov:i?.Ov??"clamp-to-edge",Lv:i?.Lv??"trilinear",Wv:i?.Wv??!0});return self.XV.QV(r,e)}sU(t,s,i){h.nh(s,self.XV);const e=r.D5(s);p.ZC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.nh(t,self.XV);const s=r.D5(t);p.Y2(s)}iU(){const t=p.Vb();return new self.eU(r,t)}hU(){r.sL().rU(p)}nU(t){h.nh(t,globalThis.k5);const s=r.D5(t);s.oU(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.XV=class{constructor(t,s){ph.set(this,{runtime:t,aU:s}),mh.set(s,this),t.OL(this,s),Object.defineProperties(this,{width:{value:s.Fm(),writable:!1},height:{value:s.Um(),writable:!1}})}static QV(t,s){if(!s)return null;const i=mh.get(s);return i||new self.XV(t,s)}}}{let e=function(t){return yh.get(t).lU};e;const gh=self.Ys,yh=new WeakMap;self.eU=class{constructor(t,s){yh.set(this,{runtime:t,lU:s}),t.OL(this,s)}release(){e(this).vr()}set uU(t){gh.Ce(t),e(this).ZI(t)}get uU(){return e(this).tI()}set cU(t){gh.Ge(t),e(this).QI(t)}get cU(){return e(this).tC()}set lineHeight(t){gh.Ge(t),e(this).iC(t)}get lineHeight(){return e(this).eC()}set fU(t){e(this).hC(t)}get fU(){return e(this).rC()}set dU(t){e(this).nC(t)}get dU(){return e(this).oC()}setColor(t){gh.Ue(t),this.pU(t[0],t[1],t[2])}pU(t,s,i){e(this).fC(t,s,i)}mU(t){gh.Ce(t),e(this).GM(t)}set gU(t){e(this).dC(t)}get gU(){return e(this).pC()}set verticalAlign(t){e(this).mC(t)}get verticalAlign(){return e(this).gC()}set yU(t){e(this).yC(t)}get yU(){return e(this).SC()}set SU(t){e(this).wC(t)}get SU(){return e(this).bC()}set text(t){gh.Ce(t),e(this).Rf(t)}get text(){return e(this).MC()}w5(t,s,i){gh.Ge(t),gh.Ge(s),gh.Ge(i),e(this).vC(t,s,i)}SW(){const{runtime:t,lU:s}=yh.get(this),i=s.hx();return self.XV.QV(t,i)}bW(){return e(this).QC().Wl()}wU(t){gh.Ke(t),e(this).JI=t}bU(){e(this).HI()}get MU(){return e(this).GC()}get vU(){return e(this)._C()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Ns,Sh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.xU=class extends d.Sr{constructor(t,s){super();const i=s.exportType,e=(this.Tf=t,this.GU="folders",this.TU=new Map,this._U="cordova"===i,this.IU=!!s.isiOSCordova,this.CU=!!s.isFileProtocol,this.RU=s.swClientId,this.AU=s.supportedAudioFormats||{},this.EU=new Map,this.PU=!1,this.FU=s.scriptFolder,this.kU="",this.DU="",this.OU="",this.LU=s.fileMap||new Map,this.BU=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.NU=e?"remote":"local",this.WU=new Map,this.jU=[],this.VU=[],this.UU=!1,this.HU=0,this.zU=0,this.JU=0,this.qU=!1,this.$U=d.Mr(d.jd,()=>this.XU(),50),this.YU=d.Mr(d.Pd,Math.max(d.hardwareConcurrency,8)),this.KU=d.Mr(d.Pd,20),this.ZU=new self.oO(this)}vr(){for(const t of this.WU.values())t.vr();this.WU.clear(),d.Yn(this.VU),this.Tf=null}dO(){return this.Tf}QU(t){this.GU=t}MO(){return this.GU}t7(){return this.FU}s7(t){this.kU=t}GO(){return this.kU}i7(t){this.DU=t}e7(){return this.DU}h7(t){this.OU=t}r7(){return this.OU}n7(){return this.CU}Lo(t,s){return s=s||this.NU,d.Po(t)?("flat"===this.GU&&(t=t.toLowerCase()),this._U&&this.CU?this.o7(t):"playable-ad-single-file"===this.Tf.KO()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.YU:this.KU).Rc(()=>d.Lo(t))):d.Lo(t)}Bo(t){return d.Po(t)?("flat"===this.GU&&(t=t.toLowerCase()),this._U&&this.CU?this.a7(t):"playable-ad-single-file"===this.Tf.KO()?d.Wo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.NU?this.YU:this.KU).Rc(()=>d.Bo(t))):d.Bo(t)}Do(t){return d.Po(t)?("flat"===this.GU&&(t=t.toLowerCase()),this._U&&this.CU?this.l7(t):"playable-ad-single-file"===this.Tf.KO()?d.jo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.NU?this.YU:this.KU).Rc(()=>d.Do(t))):d.Do(t)}async Oo(t){const s=await this.Do(t);return JSON.parse(s)}u7(t,s){return"flat"===this.GU&&(t=t.toLowerCase()),this.Tf.iO("runtime","cordova-fetch-local-file",{filename:t,as:s})}l7(t){return this.u7(t,"text")}async o7(t){const s=await this.u7(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async c7(t){"flat"===this.GU&&(t=t.toLowerCase());let s=this.TU.get(t);if(!s){const i=await this.o7(t);s=URL.createObjectURL(i),this.TU.set(t,s)}return s}a7(t){return this.u7(t,"buffer")}vO(t){"flat"===this.GU&&(t=t.toLowerCase());let s=this.kU+t;return"Gecko"===d.fi.wi&&"preview"===this.Tf.KO()?this.f7(s):s}wO(t){return d.Eo(t)?Promise.resolve(t):this._U&&this.CU?this.c7(t):"playable-ad-single-file"===this.Tf.KO()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.GU&&(t=t.toLowerCase()),Promise.resolve(t))}d7(s){if(d.Eo(s)||"preview"!==this.Tf.KO()||!this.RU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.RU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}p7(t){return this.wO(t)}m7(t){if(t.g7&&!Sh.has(t.g7))throw new Error("invalid load policy");let s=this.WU.get(t.url);return s||(s=d.Mr(d.y7,this,{url:t.url,size:t.size||0,g7:t.g7||this.NU}),this.WU.set(s.S7(),s),this.UU)||(this.HU+=s.xc(),this.VU.push(s.w7().then(()=>this.b7(s.xc())))),s}M7(t){this.WU.delete(t.S7())}async v7(){try{await Promise.all(this.VU),this.JU=1}catch(t){console.error("Error loading: ",t),this.qU=!0,this.XU()}}x7(){this.UU=!0}G7(){return this.qU}b7(t){this.zU+=t,this.$U.Qd()}XU(){const t=d.Mr(d.Event,"loadingprogress");this.JU=d.Cr(this.zU/this.HU,0,1),t.progress=this.JU,this.Tf.h0().dispatchEvent(t)}MD(){return this.JU}xD(){return this.Tf._7().T7()}I7(t){d.eo(this.jU,t),this.jU.length&&this.VU.push(this.C7())}async C7(){const t=[],s=[];for(const[i,e,h]of this.jU)this.HU+=h,t.push(this.R7(i,e,s).then(()=>this.b7(h)));await Promise.all(t),this.Tf.fk()&&0<s.length&&await this.Tf.iO("runtime","load-webfonts",{webfonts:s})}async R7(s,i,e){try{let t=await this.wO(i);"Gecko"===d.fi.wi&&(s=`'${s}'`),("Gecko"===d.fi.wi&&"preview"===this.Tf.KO()||"playable-ad-single-file"===this.Tf.KO())&&(t=this.f7(t));const h=new FontFace(s,`url('${t}')`);(this.Tf.fk()?self:document).fonts.add(h),await h.load(),this.Tf.fk()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}A7(t){return!!this.AU[t]}E7(t,s){this.PU=!!s;for(const[i,e,h]of t)this.EU.set(i,{fileName:i,P7:e.map(t=>({type:t[0],F7:t[1],k7:i+t[1],fileSize:t[2]})),isMusic:h})}D7(t){"flat"===this.GU&&(t=t.toLowerCase());const s=this.EU.get(t);if(!s)return null;let i=null;for(const e of s.P7)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.A7(e.type))return e;return i}O7(t){const s=this.D7(t);return s?{url:this.vO(s.k7),type:s.type}:null}L7(){if(this.PU){const t=[];for(const s of this.EU.values())if(!s.isMusic){const i=this.D7(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.vO(i.k7),type:i.type,fileSize:i.fileSize})}return t}return[]}B7(t){return"preview"===this.Tf.KO()&&(t=new URL(t,location.href).toString()),this.LU.get(t)||null}f7(t){let s=this.BU.get(t);if(!s){const i=this.B7(t);if(!i)return t;s=URL.createObjectURL(i),this.BU.set(t,s)}return s}YF(){return this.ZU}async IO(...t){const s=await Promise.all(t.map(t=>this.wO(t)));if(this.Tf.fk())if(1===t.length){const i=t[0];await import((d.Po(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.Po(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async RO(t){if(WebAssembly.compileStreaming){const s=await this.wO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Bo(t);return WebAssembly.compile(i)}}async EO(t){const s=await this.wO(t);return this.Tf.iO("runtime","add-stylesheet",{url:s})}}}{const bh=self.Ns;bh.N7=class extends bh.Sr{constructor(t,s){super(),this.W7=t,this.Tf=t.dO(),this.j7=s.url||"",this.V7=s.size,this.U7=s.g7,this.H7=s.blob||null,this.z7=!!this.H7,this.oy=null}vr(){this.oy=null,this.W7=null,this.Tf=null,this.H7=null}S7(){return this.j7}xc(){return this.V7}w7(){return"local"===this.U7||this.H7?(this.z7=!0,Promise.resolve()):(this.oy||(this.oy=this.W7.Lo(this.j7,this.U7).then(t=>(this.z7=!0,this.oy=null,this.H7=t)).catch(t=>{console.error("Error loading resource: ",t),this.oy=null})),this.oy)}J7(){return this.z7}q7(){return this.H7?Promise.resolve(this.H7):this.oy||this.W7.Lo(this.j7,this.U7)}}}{const ar=self.Ns,lr=new ar.Pd,ur=new Set;ar.y7=class extends ar.N7{constructor(t,s){super(t,s),this.X7=null,this.Y7=null,this.D1=0,this.K7=-1,this.Z7=-1,ur.add(this)}vr(){if(0!==this.D1)throw new Error("released image asset which still has texture references");this.W7.M7(this),this.X7=null,ur.delete(this),super.vr()}static Q7(){for(const t of ur)t.X7=null,t.Y7=null,t.D1=0}KV(t,s){return s=s||{},this.D1++,this.Y7?Promise.resolve(this.Y7):(this.X7||(s.Bv=this.Tf.sL().tH(),this.X7=this.sH(t,s)),this.X7)}async sH(s,i){try{const e=await this.q7();return 0===this.D1?this.X7=null:await lr.Rc(async()=>{const t=await s.WE(e,i);return this.X7=null,0===this.D1?(s.Y2(t),null):(this.Y7=t,this.K7=t.Fm(),this.Z7=t.Um(),this.Y7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}HI(){if(this.D1<=0)throw new Error("texture released too many times");if(this.D1--,0===this.D1&&this.Y7){const t=this.Y7.eM();t.Y2(this.Y7),this.Y7=null}}iH(){return this.D1}hx(){return this.Y7}Fm(){return this.K7}Um(){return this.Z7}async eH(){const t=await this.q7();return ar.Ui.ImageBitmap?createImageBitmap(t):ar.Uo(t)}}}{let t=function(t,s){return t.qD().hH()-s.qD().hH()};t;const cr=self.Ns;cr.rH=class extends cr.Sr{constructor(t,s,i){super(),this.nH=t,this.dl=s,this.pl=i,this.oH=[],this.aH=!0,this.lH=new Set,this.uH=!1}vr(){cr.Yn(this.oH),this.lH.clear(),this.nH=null}T0(){cr.Yn(this.oH),this.aH=!0,this.lH.clear(),this.uH=!1}cH(){this.aH=!1}wc(){if(this.oH.length){if(this.oH.length>this.lH.size)return!1;this.fH()}return!0}dH(t){this.lH.has(t)?(this.lH.delete(t),0===this.lH.size&&(this.uH=!1)):(this.oH.push(t),this.aH=1===this.oH.length)}L0(t){this.lH.add(t),this.uH=!0,50<=this.lH.size&&this.fH()}fH(){this.uH&&(this.oH.length===this.lH.size?this.T0():(cr.lo(this.oH,this.lH),this.lH.clear(),this.uH=!1))}pH(){this.aH||(this.oH.sort(t),this.aH=!0)}mH(t){this.fH(),this.pH(),this.oH.length&&t.push(this.oH)}}}{const fr=self.Ns;fr.gH=class extends fr.Sr{constructor(t,s){super(),this.yH=t,this.SH=s,this.wH=fr.Mr(fr.mc)}vr(){this.wH.vr(),this.wH=null}bH(t,s,i){let e=this.wH.ri(t,s);return e||(i?(e=fr.Mr(fr.rH,this,t,s),this.wH.Set(t,s,e),e):null)}MH(t){return Math.floor(t/this.yH)}vH(t){return Math.floor(t/this.SH)}xH(e,h,r){if(h)for(let i=h.Ol(),t=h.Bl();i<=t;++i)for(let t=h.Ll(),s=h.Nl();t<=s;++t)if(!r||!r.au(i,t)){const n=this.bH(i,t,!1);n&&(n.L0(e),n.wc())&&this.wH.Mc(i,t)}if(r)for(let i=r.Ol(),t=r.Bl();i<=t;++i)for(let t=r.Ll(),s=r.Nl();t<=s;++t)h&&h.au(i,t)||this.bH(i,t,!0).dH(e)}GH(t,s){let i=this.MH(t.Ol()),e=this.vH(t.Ll()),h=this.MH(t.Bl()),r=this.vH(t.Nl());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.bH(i,t,!1);n&&n.mH(s)}}TH(t){let s=t.Ol(),i=t.Ll(),e=t.Bl(),h=t.Nl();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.bH(s,t,!1);r&&r.cH()}}}}{let n=function(t,s){return t.qD().hH()-s.qD().hH()},t=function(t,s){return t.qD().NM()-s.qD().NM()};n,t;const w=self.Ns,dr=new w.Rect,pr=new w.fu,mr=[],gr=(new w.Rect,new w.Rect,self.vs),Gh=gr.As,Vh=gr.Es,xh=gr._s,yr=xh.create(),Sr=Gh.create(),wr=Vh.create(),br=Gh.create(),Mr=Gh.create(),vr=Gh.create(),xr=w.Mr(w.fl),Gr=(w.Mr(w.Rect),[]),Tr=[],_r=[],Ir={name:"",sid:-1,_H:!1,isVisible:!0,isInteractive:!0,uB:!1,backgroundColor:[1,1,1,1],TB:!0,IH:[1,1],opacity:1,CB:!1,CH:!1,RH:!1,AH:!1,scaleRate:1,z3:0,GB:0,EH:[],PH:[],FH:[]};w.kH=class extends w.Sr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.DH=t,this.Tf=t.dO(),this.OH=s,this._r=i.name,this.Gy=-1,this.LH=!!i.uB,this.BH=-1,this.NH=i.sid,this.WH=!!i._H,this.jH=!!i.isVisible,this.VH=!!i.isInteractive,this.UH=w.Mr(w.ra),this.UH.il(i.backgroundColor),this.HH=!!i.TB,this.zH=i.IH[0],this.JH=i.IH[1],this.bM=w.Mr(w.ra,1,1,1,i.opacity),this.qH=w.Mr(w.ra),this.$H=!!i.CB,this.XH=!!i.CH,this.YH=!!i.RH,this.KH=!!i.AH,this.ZH=i.scaleRate,this.wM=i.z3,this.QH=null,this.sz=1,this.MM=i.GB,this.iz=0,this.ez=0,this.hz=0,this.rz=!1,this.BR=w.Mr(w.Rect),this.nz=w.Mr(w.Rect),this.oz=w.Mr(w.Rect),this.az=!0,this.N2=xh.create(),this.lz=!0,this.E3=xh.create(),this.uz=!0,this.cz=w.Mr(w.Ey.Dy),this.fz=!0,this.dz=[],this.pz=i.EH,this.mz=[],this.gz=[],this.yz=new Map,this.oH=[],this.Sz=!1,this.wz=!1,this.bz=!1;const h=this.Tf.sL();this.Mz=w.Mr(w.vz,this,i.PH),this.UF=w.Mr(w.Ey.WP,h.xz(),{RP:(t,s)=>{const i=s.DF(),e=i.OE();t.GM(i.Gz()),t.HE(e),t.zE(e),h.Tz(e)},EP:t=>this.g5()._z(t)}),this.Iz=!0,this.Cz=!0,this.Rz=null,this.Az=[],this.Ez=!1,this.Pz=w.Mr(w.Rect,0,0,-1,-1),this.Fz=w.Mr(w.Rect,0,0,-1,-1),this.kz=new self.k5(this),this.Dz(),this.Oz()&&(this.Rz=w.Mr(w.gH,this.Tf.pk(),this.Tf.gk())),this.Lz=i.FH.map(t=>w.kH.Bz(this.DH,this,t))}Nz(){for(const t of this.pz){const s=this.Tf.Wz(t[1]);this.DH.jz(s),s.Vz()||(s.Uz(t),s.zz(this.Gy)),this.mz.push(t),this.yz.set(t[2],t)}w.eo(this.dz,this.mz),this.pz=null}static Bz(t,s,i){return w.Mr(w.kH,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],uB:i[19],backgroundColor:i[4].map(t=>t/255),TB:i[5],IH:[i[6],i[7]],opacity:i[8],CB:i[9],CH:i[17],RH:i[18],AH:i[10],scaleRate:i[11],z3:i[12],GB:i[16],EH:i[14],PH:i[15],FH:i[20]})}vr(){for(const t of this.Lz)t.vr();w.Yn(this.Lz);for(const s of this.oH)this.Tf.e4(s);w.Yn(this.oH),this.Mz.vr(),this.Mz=null,this.UF.vr(),this.UF=null,this.kz=null,this.OH=null,this.DH=null,this.Tf=null}Jz(t){return this.yz.get(t)}qz(h){let r=this.DH.$z(),n=0,o=this.mz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Tf.Wz(t[1]),i=!0;if(!s.Xz()||r){const a=this.Tf.Yz(t,this,!0);h.push(a),s.Kz()&&(i=!1,this.gz.push(a.u4()))}i&&(o[n]=o[e],++n)}w.Xn(o,n),this.Tf.p5(),this.QD()}Zz(t,s){if(!t.qL().xL())throw new Error("instance is not of world type");const i=t.qD();if(i.$D()!==this)throw new Error("instance added to wrong layer");this.oH.push(t),0!==i.NM()&&(this.bz=!0),s&&this.Oz()&&t.qD().gN(),this.QD(t)}Qz(t){this.oH.includes(t)||(this.oH.push(t),0!==t.qD().NM()&&(this.bz=!0),this.QD(t))}tJ(t,s){const i=t.qD();if(i.$D()!==this)throw new Error("instance added to wrong layer");this.oH.unshift(t),0!==i.NM()&&(this.bz=!0),this.QD(t),s&&this.Oz()&&t.qD().gN()}sJ(t,s){const i=this.oH.indexOf(t);i<0||(s&&this.Oz()&&t.qD().iJ(),this.oH.splice(i,1),this.QD(t),this.eJ())}hJ(){this.bz=!0}eJ(){0===this.oH.length&&(this.bz=!1)}rJ(t){if(t){const s=new Set;for(const i of this.oH){const e=i.qD().hH();0<=e&&s.add(e)}let t=-1;for(const h of this.oH){const r=h.qD();if(!(0<=r.hH())){for(++t;s.has(t);)++t;r.nJ(t)}}}this.oH.sort(n)}oJ(){}aJ(){for(const t of this.oH)t.KB().Kz()||this.Tf.e4(t);this.Tf.p5(),w.Yn(this.oH),this.bz=!1,this.QD()}lJ(s,t,i,e,h,r){const n=this.Tf.Ck(),o=this.Tf.uJ(),a=s.cJ(),l=[];for(const u of this.mz){const c=u[0],f=c[0],d=c[1];if(t.au(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.fJ(p))continue}let t=h;if(!t){const y=this.Tf.zD();t=this.RD()===y?this:(t=y.dJ(this.yf()))||y.YD(this.qF())}const m=this.Tf.Yz(u,t,!1,void 0,void 0,!1,r),g=(t.l5(m),m.qD());g.bN(i,e),g.gN(),n.u5(!0),m.c5(),n.u5(!1),l.push(m)}}return l}n5(){return this.oH.length}RD(){return this.DH}yf(){return this._r}pJ(t){this.Gy=t}qF(){return this.Gy}mJ(t){this.BH=t}cj(){return this.BH}cB(){return this.LH}fB(t){this.LH!==(t=!!t)&&(this.LH=t,this.DH.gJ(),this.Tf.tO())}yJ(){let t=this.Z5();return(t?t.sB():this.RD().SJ()).indexOf(this)}wJ(){return this.NH}dO(){return this.Tf}bJ(){return this.WH}MJ(){for(const t of this.Q5())if(t.bJ())return!0;return!1}fL(){return this.Tf.fL()}g5(){return this.Mz}JF(){return this.vJ(),this.UF}vJ(){const t=this.xJ();if(this.Iz||t!==this.Cz||this.UF.P3()){const s=this.g5().GJ();this.UF.F3(s.map(t=>t.PG()),{FP:s.map(t=>t.qF()),kP:!t,NP:!0}),this.Iz=!1,this.Cz=t}}eW(){this.g5().eW(),this.Iz=!0}Oz(){return this.KH&&!this.YH}TJ(){return this.Rz}_J(){this.Ez=!1}oB(){for(const t of this.IJ())if(!t.hB())return!1;return!0}hB(){return this.jH}rB(t){this.jH!==(t=!!t)&&(this.jH=t,this.Tf.tO())}lB(t){this.VH=!!t}aB(){return this.VH}pB(){for(const t of this.IJ())if(!t.aB())return!1;return!0}kB(t){if(this.rz!==(t=!!t)){if(this.rz=t){const s=this.RD();this.ez=s.G5(),this.hz=s._5()}this.CJ(),this.Tf.tO()}}RJ(){return this.rz}x5(t){const s=this.RD(),i=s.AJ(),e=s.EJ();this.ez!==(t=(t=e<t?e:t)<i?i:t)&&(this.ez=t,this.RJ())&&(this.CJ(),this.Tf.tO())}T5(t){const s=this.RD(),i=s.PJ(),e=s.FJ();this.hz!==(t=(t=e<t?e:t)<i?i:t)&&(this.hz=t,this.RJ())&&(this.CJ(),this.Tf.tO())}G5(){return this.RJ()?this.ez:this.RD().G5()}_5(){return this.RJ()?this.hz:this.RD()._5()}OB(){return this.kJ(),this.BR}DJ(){return this.kJ(),this.nz}OJ(){return this.kJ(),this.oz}J5(){const t=this.RD();return[t.LJ(),t.BJ()]}DS(t){return this.Tf.DS(t)}NJ(c,e){const h=this.DJ();if(0===c)e.I(h);else{let o=h.Hl(),a=h.zl(),t=this.WJ(c),s=h.width()/t,i=h.height()/t,[l,u]=this.J5();if(.5!==l||.5!==u){let t=this.jJ(),s=this.Tf,i=this.DS()/t,e=(l-.5)*s.VJ()/i,h=(u-.5)*s.UJ()/i,r=this.GetAngle(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.yl(),h=xr.wl()),w.Hr(t,0,c));o+=w.Ot(e,0,n),a+=w.Ot(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}ZA(){return this.bM.Ga()}tE(t){t=w.Cr(t,0,1),this.bM.Ga()!==t&&(this.bM.Sa(t),this.Dz(),this.Tf.tO())}Dz(){this.qH.I(this.bM),this.qH.ka()}Gz(){return this.qH}xJ(){return this.bM.Aa(1,1,1,1)}SB(){return this.ZH}yB(t){this.ZH!==t&&(this.ZH=t,this.CJ(),this.Tf.tO())}MB(){return this.zH}xB(){return this.JH}HJ(t,s){this.zH===t&&this.JH===s||(this.zH=t,this.JH=s,this.CJ(),this.Tf.tO())}bB(t){this.HJ(t,this.xB())}vB(t){this.HJ(this.MB(),t)}WM(t){this.MM!==t&&(this.MM=t,this.Tf.tO())}NM(){return this.MM}v5(t){t=w.Rr(t),this.iz!==t&&(this.iz=t,this.CJ(),this.Tf.tO())}GetAngle(){return w.Rr(this.DH.GetAngle()+this.iz)}wB(){return this.iz}zJ(){return 0<this.oH.length}KD(){return this.oH}JJ(){return this.qJ()&&this.YH?(w.eo(_r,this.KD()),_r.sort((t,s)=>this.$J(t,s)),_r):this.KD()}XJ(t){w.er(t,this.JJ());for(const s of this.Lz)s.oB()&&0<s.ZA()&&s.XJ(t)}$J(t,s){const i=this.RD().YJ(),e=i[0],h=i[1],r=i[2],n=t.qD(),o=s.qD(),a=n.kM()-e,l=n.LM()-h,u=n.NM()-r,c=o.kM()-e,f=o.LM()-h,d=o.NM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}PB(){return this.UH}IB(){return this.HH}_B(t){this.HH!==(t=!!t)&&(this.HH=t,this.Tf.tO())}AB(){return this.$H}RB(t){this.$H!==(t=!!t)&&(this.$H=t,this.Tf.tO())}KJ(){return!this.dO().ZJ()||!this.XH}qJ(){return!this.KJ()}QJ(){return this.qJ()&&this.RD().t9()}s9(){if(!this.QJ())return!1;for(const t of this.Lz)if(!t.s9())return!1;return!0}xM(t){this.wM!==t&&(this.wM=t,this.Tf.tO())}EB(){return this.wM}i9(){return!this.OH}Z5(){return this.OH}e9(t){this.OH=t}sB(){return this.Lz}h9(){return 0<this.Lz.length}r9(t,s=!0){s?this.Lz.push(t):this.Lz.unshift(t)}n9(t,s,i){let e=this.Lz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Lz.splice(e,0,t)}o9(t){const s=this.Lz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Lz.splice(s,1)}a9(){for(const t of this.Lz)if(t.l9())return!0;return!1}*eB(){for(const t of this.Lz)yield*t.eB();yield this}*Q5(){let t=this.Z5();for(;t;)yield t,t=t.Z5()}*IJ(){yield this,yield*this.Q5()}u9(t){for(const s of this.Q5())if(s===t)return!0;return!1}c9(t){return this===t||this.zH===t.zH&&this.JH===t.JH&&this.sz===t.sz&&this.ZH===t.ZH&&this.iz===t.iz&&this.G5()===t.G5()&&this._5()===t._5()}f9(){return{parallaxX:this.MB(),parallaxY:this.xB(),scale:this.gB(),scaleRate:this.SB(),angle:this.wB(),hasOwnScroll:this.RJ(),scrollX:this.G5(),scrollY:this._5()}}d9(t){this.HJ(t.parallaxX,t.parallaxY),this.mB(t.scale),this.yB(t.scaleRate),this.v5(t.angle),this.kB(t.hasOwnScroll),this.x5(t.scrollX),this.T5(t.scrollY),this.kJ()}p9(t){if(0!==t.size){const s=w.lo(this.oH,t);0<s&&(this.eJ(),this.QD())}}QD(t){this.Sz=!1,this.Ez=!1,t&&!t.KB().qL().TL()||(this.wz=!1)}m9(){if(!this.Sz){if(this.oH.sort(t),this.Oz())for(let t=0,s=this.oH.length;t<s;++t){const i=this.oH[t].qD();i.nJ(t),this.Rz.TH(i.g9())}else for(let t=0,s=this.oH.length;t<s;++t)this.oH[t].qD().nJ(t);this.Sz=!0}}y9(){if(!this.wz){let t=this.DH.S9(this.cj()),s=t.map(t=>[...t.eB()]).flat(),i=0;for(const e of s){for(const h of e.KD())h.KB().qL().TL()&&h.qD().w9(i++);e.b9()}}}b9(){this.wz=!0}M9(){return{isVisible:this.oB(),opacity:this.ZA(),isInteractive:this.aB()}}v9(t,s,i){const e=t.qD(),h=s.qD();if(e.$D()!==this||h.$D()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.XD(),n=h.XD();return r!==n+(i?1:-1)&&(w.ho(this.oH,r),r<n&&n--,i&&n++,n===this.oH.length?this.oH.push(t):this.oH.splice(n,0,t),this.QD(t),!0)}x9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.qD().hH()<a.qD().hH()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}G9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.x9(h,r))}return e%2==1&&i.push(s[e-1]),i}T9(t){for(;1<t.length;)t=this.G9(t);return t[0]}_9(){return this.m9(),w.Yn(mr),this.Rz.GH(this.OB(),mr),mr.length?1===mr.length?mr[0]:this.T9(mr):[]}l9(){return this.oB()&&0<this.ZA()&&this.I9()}I9(){if(this.zJ()||!this.IB())return!0;for(const t of this.Lz)if(t.I9())return!0;return!1}C9(){return this.AB()||!this.xJ()||0!==this.EB()||this.Mz.R9()}A9(){if(this.C9())return!0;for(const t of this.Lz)if(t.A9())return!0;return!1}OE(){return this.QH}WJ(t){if(this.DH.Y5())return 1;{const s=this.E9();return s/(s-t)}}P9(t){const s=this.Tf.$B();if(this.DH.Y5())return s;{const i=this.E9(),e=this.DS();return e/Math.abs(i-t)*s}}CJ(){this.uz=!0,this.fz=!0,this.az=!0}F9(t){return this.uz&&(this.k9(t,this.E3,0,0,null),this.uz=!1),this.E3}jJ(t){return this.DS(t)/this.D9()}E9(){return this.QJ()?this.RD().YJ()[2]:this.jJ()}O9(){if(this.QJ()){const t=this.RD().YJ();return[t[0],t[1],t[2]]}return this.L9()}L9(t=0,s=0,h=0){let r=this.Tf,i=this.RD(),e=r.B9(),n=r.N9(),o=(this.G5()-e)*this.zH+e,a=(this._5()-n)*this.JH+n,l=(r.wk()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.Y5()?this.DS(h):this.jJ(h),[f,d]=this.J5();if(.5!==f||.5!==d){let t=this.DS(h)/c,s=(f-.5)*r.VJ()/t,i=(d-.5)*r.UJ()/t,e=this.GetAngle();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.yl(),i=xr.wl()),l+=s,u+=i}return[l,u,c]}k9(t,s,i,e,h){const r=this.Tf,n=this.RD();if(this.QJ()){Gh.I(br,n.YJ()),Gh.I(Mr,n.W9()),Gh.I(vr,n.j9());const o=r.B9(),a=r.N9(),l=Mr[0]-br[0],u=Mr[1]-br[1],c=Mr[2]-br[2];br[0]=(br[0]-o)*this.zH+o,br[1]=(br[1]-a)*this.JH+a,br[2]*=Math.max(this.zH,this.JH),Mr[0]=br[0]+l,Mr[1]=br[1]+u,Mr[2]=br[2]+c}else{const[f,d,p]=this.L9(i,e,h),m=(Gh.set(br,f,d,p),Gh.set(Mr,f,d,p-100),this.GetAngle());0===m?Gh.set(vr,0,1,0):Gh.set(vr,Math.sin(m),Math.cos(m),0)}t.KS(s,br,Mr,vr,h||r.UJ())}V9(){this.lz=!0,this.fz=!0,this.az=!0}U9(t){return this.lz&&(this.H9(t),this.lz=!1),this.N2}H9(t){const s=this.Tf.sL(),[i,e]=this.J5();if(this.DH.Y5())t.YS(this.N2,s.z9(),s.J9());else if(.5===i&&.5===e)xh.I(this.N2,s.q9());else{const h=s.z9(),r=s.J9();t.$S(this.N2,h/r,i,e)}}oU(t,s=!0,i=0,e=0,h=0){s&&t.jA(this.U9(t));let r;r=0===i&&0===e&&0===h?this.F9(t):(this.k9(t,yr,i,e,h),yr),t.qA(r)}X9(t){this.oU(t),t.Ww(this.NM())}Y9(t){let s=null;if(t.Lb()&&this.Tf.K9()){const i=this.Tf.sL().Z9(this);i&&(s=i.TR(),t.KE(s))}return s}Q9(t){if(t.XS()&&this.Tf.K9()){const s=2*(this.qF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}_v(t,s,i){let e=this.Tf.sL(),h=this.C9(),r=null,n=this.Y9(t);if(this.Q9(t),h){const o={Lv:this.Tf.yk(),_2:!0,tq:!!t.XS()&&this.Tf.sq()};"low"===e.iq()&&(o.width=e.z9(),o.height=e.J9()),r=this.Tf.eq(o),this.QH=r,t.VE(r),this.IB()&&t.RE(0,0,0,0)}else this.QH=s,t.VE(s);if(this.IB()||t.Sc(this.UH),this.DH.hq(t,this.QH,this.Lz,h&&this.IB()),this.Q9(t),this.oU(t),t.Ww(this.NM()),t.PE(this.qJ()),this.D9()>Number.EPSILON){this.m9();const a=this.Oz()&&0===this.NM()&&!this.bz;this.QJ()?this.rq(t):a?this.nq(t):this.oq(t,this.JJ())}t.Ww(0),t.Vw(0),h&&(t.PE(!1),this.aq(t,r,s,i)),n&&t.QE(n),this.QH=null}oq(i,e){let h=this.OB(),r=this.QH,n=this.RD().Y5(),o=this.RD().lq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).qD();u.oB()&&u.uq(h,o,n)&&this.cq(l,u,i,r)}}}rq(e){const h=this.QH,r=this.fq(),n=Gr,o=Tr,a=this.JJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.qD();if(u.oB()&&u.pq(r)){(!l.mq()||0<u.gq())&&o.push(l);const c=l.qD().vN();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.qD();if(d.oB()&&d.pq(r)){if(d.vN()!==c)break;(f.mq()?(0<d.gq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].yq()){this.Sq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.qD();m.wq(!0),this.cq(p,m,e,h),m.wq(!1)}}else{this.cq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.qD(),S=y.$D();S.cq(g,y,e,h)}}}s=t,w.Yn(n),w.Yn(o)}else++s}}Sq(i,e){const h=this.QH;i.qE();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.qD();n.bq(!0),this.Mq(r,n,i)}i.$E();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.qD();this.cq(o,a,i,h),a.bq(!1)}i.YE()}nq(t){let s=this.Rz,i=this.Fz,e=this.Pz,h=this.OB(),r;i.set(s.MH(h.Ol()),s.vH(h.Ll()),s.MH(h.Bl()),s.vH(h.Nl())),this.Ez&&i.equals(e)?r=this.Az:(r=this._9(),this.Ez=!0,e.I(i)),this.oq(t,r),r!==this.Az&&w.eo(this.Az,r)}cq(t,s,i,e){s.R9()?this.vq(t,s,i,e):this.Mq(t,s,i)}Mq(t,s,i){const e=s.xq();i.xw()!==e&&e.vM(),t._v(i)}vq(t,s,i,e){this.Gq(t,s,i,e,null)&&this.oU(i)}Gq(t,s,i,e,h){const r=s.pN().JF();return r.U3(i,e,{H3:t,z3:s.EB(),devicePixelRatio:this.Tf.Tq(),time:t._q(),J3:this.Tf.Iq()*this.D9(),q3:this.GetAngle(),mF:s.GN(),gF:r.FF()?null:this.Cq(s),Q3:h&&h.Q3,tF:h&&h.tF,sF:h&&h.sF,iF:h&&h.iF}),i.Ww(this.NM()),r.XA()}aq(t,s,i,e){const h=this.Mz.GJ(),r=this.Tf;0===h.length?(t.VE(i),t.rw(),e&&0===this.wM&&this.xJ()?t.UE(s):(t.xM(this.wM),t.GM(this.qH),t.HE(s)),t.zE(s),r.Tz(s)):this.JF().U3(t,i,{H3:this,z3:this.EB(),devicePixelRatio:r.Tq(),J3:r.Iq()*this.D9(),q3:this.GetAngle(),mF:this.OB(),gF:null,PP:!0})}gB(){return this.sz}mB(t){this.sz!==t&&(this.sz=t,this.DH.Rq(),this.CJ(),this.Tf.tO())}$B(){return this.D9()*this.Tf.$B()}bj(){return this.D9()*this.Tf.bj()}D9(){return(this.sz*this.DH.M5()-1)*this.ZH+1}kJ(){if(this.az){this.az=!1;let t=this.Tf.B9(),s=this.Tf.N9(),i=(this.G5()-t)*this.zH+t,e=(this._5()-s)*this.JH+s,h=this.D9(),r=this.Tf.VJ()/h,n=this.Tf.UJ()/h,o=i-r/2,a=e-n/2;this.Tf.wk()&&(o=Math.round(o),a=Math.round(a));const l=this.nz,u=(l.set(o,a,o+r,a+n),this.GetAngle()),c=(0!==u&&(dr.I(l),dr.offset(-l.Hl(),-l.zl()),pr.ku(dr,u),pr.Ou(dr),dr.offset(l.Hl(),l.zl()),l.I(dr)),this.MM);this.NJ(c,this.BR),this.QJ()?this.Aq(c,this.oz):this.oz.I(this.BR)}}Aq(t,s){let i=this.Tf.sL(),e=i.rL(),h=i.oL(),[r,n]=this.BB(0,0,t),[o,a]=this.BB(e,0,t),[l,u]=this.BB(e,h,t),[c,f]=this.BB(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}BB(t,s,i=0){return this.Eq(t,s,i,this.bj())}HB(t,s,i=0){return this.Eq(t,s,i,this.$B()*this.fL())}Eq(t,s,i,e){const h=this.Tf,r=h.eM(),n=this.D9(),o=h.VJ()/n,a=h.UJ()/n,l=wr,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.U9(r)),c=this.F9(r),f=Sr,d=w.Ey.ky(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}Pq(t,s){const i=this.sz,e=this.ZH,h=this.zH,r=this.JH,n=this.iz,o=(this.sz=1,this.ZH=1,this.zH=1,this.JH=1,this.iz=0,this.CJ(),this.BB(t,s));return this.sz=i,this.ZH=e,this.zH=h,this.JH=r,this.iz=n,this.CJ(),o}VB(t,s,i=0){return this.Fq(t,s,i,this.bj())}JB(t,s,i=0){return this.Fq(t,s,i,this.$B()*this.fL())}Fq(t,s,i,e){const h=this.Tf,r=h.eM(),n=this.D9(),o=h.VJ()/n,a=h.UJ()/n,l=wr,u=(Vh.set(l,0,0,o,a),this.U9(r)),c=this.F9(r),f=Sr,d=w.Ey.Py(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}kq(t,s){return t*=this.$B()*this.fL(),0!==s&&(t*=this.WJ(s)),t}Cq(t){const s=t.GN(),i=t.vN(),e=t.gq(),l=i+e,u=s.Ol(),c=s.Ll(),f=s.Bl(),d=s.Nl();if(this.QJ()){if(this.Dq(u,c,i)||this.Dq(f,c,i)||this.Dq(f,d,i)||this.Dq(u,d,i))return null;if(0<e&&(this.Dq(u,c,l)||this.Dq(f,c,l)||this.Dq(f,d,l)||this.Dq(u,d,l)))return null}else if(l>=this.jJ())return null;let[p,m]=this.JB(u,c,i),[g,y]=this.JB(f,d,i);if(0!==this.GetAngle()||0<e||this.QJ()){const[S,w]=this.JB(f,c,i),[b,M]=this.JB(u,d,i);if(0<e){let[t,s]=this.JB(u,c,l),[i,e]=this.JB(f,c,l),[h,r]=this.JB(f,d,l),[n,o]=this.JB(u,d,l),a=Math.min(p,g,S,b,t,i,h,n);g=Math.max(p,g,S,b,t,i,h,n),p=a,a=Math.min(m,y,w,M,s,e,r,o),y=Math.max(m,y,w,M,s,e,r,o),m=a}else{let t=Math.min(p,g,S,b);g=Math.max(p,g,S,b),p=t,t=Math.min(m,y,w,M),y=Math.max(m,y,w,M),m=t}}return dr.set(p,m,g,y),dr}fq(){return this.fz&&(this.Oq(),this.fz=!1),this.cz}Oq(){const t=this.Tf.eM(),s=this.U9(t),i=this.F9(t);this.cz.Vy(i,s)}Dq(t,s,i){return this.fq().Hy(t,s,i)}Lq(){const t={d:this.bJ(),s:this.gB(),a:this.wB(),v:this.hB(),i:this.aB(),html:this.cB(),bc:this.UH.toJSON(),t:this.IB(),sx:this.ez,sy:this.hz,hosp:this.rz,px:this.MB(),py:this.xB(),c:this.bM.toJSON(),sr:this.SB(),fx:this.Mz.qM(),cg:this.gz};return t}Bq(t){this.WH=!!t.d,this.sz=t.s,this.iz=t.a,this.jH=!!t.v,this.VH=!t.hasOwnProperty("i")||t.i,this.LH=!!t.html,this.UH.il(t.bc),this.HH=!!t.t,t.hasOwnProperty("sx")&&(this.ez=t.sx),t.hasOwnProperty("sy")&&(this.hz=t.sy),t.hasOwnProperty("hosp")&&(this.rz=!!t.hosp),this.zH=t.px,this.JH=t.py,this.bM.il(t.c),this.Dz(),this.ZH=t.sr,w.eo(this.gz,t.cg),w.eo(this.mz,this.dz);let i=new Set(this.gz),e=0;for(let t=0,s=this.mz.length;t<s;++t)i.has(this.mz[t][2])||(this.mz[e]=this.mz[t],++e);w.Xn(this.mz,e),this.Mz.$M(t.fx),this.Iz=!0}Nq(){this.rJ(!1),this.QD(),this.CJ(),this.V9()}R5(){return this.kz}l5(t,s=!1){if(this.oH.includes(t))s&&this.oH.sort((t,s)=>{const i=t.qD().Wq(),e=s.qD().Wq();return i-e});else if(t.jq()){const i=[...t.ZN()];i.push(t),i.sort((t,s)=>{const i=t.qD().Wq(),e=s.qD().Wq();return i-e});for(const e of i)if(e.a4())for(const h of e.l4())if(!i.includes(h)){const r=[...h.ZN()];r.push(h),r.sort((t,s)=>{const i=t.qD().Wq(),e=s.qD().Wq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.qL().xL()&&this.Zz(n,!0)}else if(t.qL().xL()&&this.Zz(t,!0),t.a4())for(const o of t.l4()){const a=[...o.ZN()];if(a.push(o),a.sort((t,s)=>{const i=t.qD().Wq(),e=s.qD().Wq();return i-e}),a&&a.length)for(const l of a)l.qL().xL()&&this.Zz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},M=function(t,s){I!==t&&(t.X9(s),I=t)},v=(l,M,self.Ns),e=self.C3Debugger,h=(v.Mr(v.Rect),v.Mr(v.Rect),v.Mr(v.Rect)),x=v.Mr(v.ra),t=self.vs,u=t.As,a=[],G=[],T=[],_=[],I=null;v.Vq=class extends v.Sr{constructor(t,s,i){super(),this.Uq=t,this.Tf=t.dO(),this._r=i[0],this.Hq=i[1],this.zq=i[2],this.gg=i[1],this.yg=i[2],this.Jq=!!i[3],this.qq=!!i[4],this.$q=i[5],this.Xq=i[6],this.Yq=i[7],this.Kq=null,this.NH=i[8],this.Gy=s,this.ez=0,this.hz=0,this.sz=1,this.iz=0,this.Zq=new Set,this.Qq=new Set,this.t$=new Set,this.s$=[],this.i$=[],this.e$=new Map,this.h$=new Map,this.r$=[],this.n$=!1,this.o$=u.create(),this.a$=u.create(),this.l$=u.create(),this.u$=[],this.c$=[],this.f$=new Map,this.d$=new Map,this.p$=-1;const h=this.Tf.sL();this.Mz=v.Mr(v.vz,this,i[11]),this.UF=v.Mr(v.Ey.WP,h.xz(),{RP:(t,s)=>{const i=s.DF(),e=i.OE();t.sE(),t.HE(e),t.zE(e),h.Tz(e)},EP:t=>this.g5()._z(t)}),this.Iz=!0,this.m$=!1,this.QH=null,this.g$={},this.y$=new Map,this.S$=!0,this.w$=new self.m5(this),this.b$=v.Mr(v.Event.h0);for(const e of i[9])this.u$.push(v.kH.Bz(this,null,e));this.M$();for(const r of this.P5())r.Nz();for(const n of i[10]){const o=this.Tf.Wz(n[1]);if(!o)throw new Error("missing nonworld object class");o.Vz()||o.Uz(n),this.r$.push(n),this.jz(o)}}vr(){for(const t of this.c$)t.vr();v.Yn(this.c$),this.t$.clear(),this.Kq=null,this.Uq=null,this.Tf=null}dO(){return this.Tf}yf(){return this._r}wJ(){return this.NH}qF(){return this.Gy}g5(){return this.Mz}JF(){return this.vJ(),this.UF}vJ(){const t="low"===this.Tf.sL().iq();if(this.Iz||this.m$!==t||this.UF.P3()){const s=this.g5().GJ();this.UF.F3(s.map(t=>t.PG()),{FP:s.map(t=>t.qF()),DP:t,NP:!0}),this.Iz=!1,this.m$=t}}eW(){this.g5().eW(),this.Iz=!0}v$(){let i=this.c$[0].D9();for(let t=1,s=this.c$.length;t<s;++t){const e=this.c$[t];0===e.MB()&&0===e.xB()||(i=Math.min(i,e.D9()))}return i}x$(){return.5*this.Tf.VJ()/this.v$()}G$(){return.5*this.Tf.UJ()/this.v$()}AJ(){return this.T$()?-1/0:this.x$()}EJ(){return this.T$()?1/0:this.Fm()-this.x$()}PJ(){return this.T$()?-1/0:this.G$()}FJ(){return this.T$()?1/0:this.Um()-this.G$()}x5(t){const s=this.AJ(),i=this.EJ();this.ez!==(t=(t=i<t?i:t)<s?s:t)&&(this.ez=t,this._$(),this.Tf.tO())}G5(){return this.ez}T5(t){const s=this.PJ(),i=this.FJ();this.hz!==(t=(t=i<t?i:t)<s?s:t)&&(this.hz=t,this._$(),this.Tf.tO())}_5(){return this.hz}T$(){return this.Jq}Rq(){this.x5(this.G5()),this.T5(this._5());for(const t of this.c$)t.RJ()&&(t.x5(t.G5()),t.T5(t._5()))}H5(t,s){this.$q===t&&this.Xq===s||(this.$q=t,this.Xq=s,this.I$()&&(this.C$(),this._$(),this.Tf.tO()))}LJ(){return this.Y5()?.5:this.$q}BJ(){return this.Y5()?.5:this.Xq}lq(){const t=this.LJ(),s=this.BJ();return t<0||1<t||s<0||1<s}q5(){this.qq&&(this.qq=!1,this.C$(),this._$(),this.Tf.tO())}X5(){this.qq||(this.qq=!0,this.C$(),this._$(),this.Tf.tO())}Y5(){return this.qq}I$(){return!this.Y5()}R$(t){this.n$!==(t=!!t)&&(this.n$=t,this._$(),this.Tf.tO())}t9(){return this.n$}A$(t,s,i,e,h,r,n,o,a){l(this.o$,t,s,i)&&l(this.a$,e,h,r)&&l(this.l$,n,o,a)||(u.set(this.o$,t,s,i),u.set(this.a$,e,h,r),u.set(this.l$,n,o,a),this.E$())}E$(){this._$(),this.Tf.tO()}YJ(){return this.o$}W9(){return this.a$}j9(){return this.l$}M5(){return this.sz}b5(t){this.sz!==t&&(this.sz=t,this._$(),this.Rq(),this.Tf.tO())}v5(t){t=v.Rr(t),this.iz!==t&&(this.iz=t,this._$(),this.Tf.tO())}GetAngle(){return this.iz}Fm(){return this.gg}Wm(t){!isFinite(t)||t<1||(this.gg=t)}Um(){return this.yg}km(t){!isFinite(t)||t<1||(this.yg=t)}P$(){return this.Kq}SJ(){return this.u$}*P5(){for(const t of this.u$)yield*t.eB()}E5(){return this.c$}F$(){return this.c$.length}$D(t){return"number"==typeof t?this.YD(t):this.dJ(t.toString())}YD(t){return t=v.Cr(Math.floor(t),0,this.c$.length-1),this.c$[t]}dJ(t){return this.f$.get(t.toLowerCase())||null}k$(t){return!!this.dJ(t)}D$(t){return this.d$.get(t)||null}C$(){for(const t of this.c$)t.V9()}_$(){for(const t of this.c$)t.CJ()}O5(t,s,i){if(this.k$(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.Z5(),h=v.Mr(v.kH,this,e,{name:t,sid:Math.floor(1e15*Math.random()),_H:!0});this.O$(h,s,i),this.dO().tO(),this.gJ()}B5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.L$(t),this.O$(t,s,i),this.dO().tO(),this.gJ())}W5(t){if(this.L$(t)){const s=this.Tf.Ck();s.u5(!0),t.vr(),s.u5(!1),this.dO().tO(),this.gJ()}}V5(){const t=new Set;for(const s of this.P5())s.bJ()&&!s.MJ()&&t.add(s);if(0!==t.size){const i=this.Tf.Ck();i.u5(!0);for(const e of t)this.L$(e),e.vr();i.u5(!1),this.dO().tO(),this.gJ()}}O$(s,i,e){if(2<=e)if(i){if(i===s||i.u9(s))throw new Error(`cannot move layer '${s.yf()}' to sub-layer of itself`);i.r9(s,2===e),s.e9(i)}else 2===e?this.u$.push(s):this.u$.unshift(s),s.e9(null);else{const t=i.Z5();if(t){if(i.u9(s))throw new Error(`cannot move layer '${s.yf()}' to sub-layer of itself`);t.n9(s,i,0===e),s.e9(t)}else{let t=this.u$.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.u$.splice(t,0,s),s.e9(null)}}}L$(t){const s=t.Z5();if(s)return s.o9(t),!0;if(1<this.u$.length){const i=this.u$.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.u$.splice(i,1),!0}return!1}M$(){this.c$=[...this.P5()],this.f$.clear(),this.d$.clear();for(let t=0,s=this.c$.length;t<s;++t){const i=this.c$[t];i.pJ(t),this.f$.set(i.yf().toLowerCase(),i),this.d$.set(i.wJ(),i)}}B$(){let t=0;for(const s of this.u$){for(const i of s.eB())i.mJ(t);s.cB()&&t++}}N$(){return this.u$.at(-1).cj()+1}async gJ(){this.M$(),this.B$(),this.p$=this.N$()}W$(){return this.p$}j$(){this.p$=-1}S9(t){const s=[];for(const i of this.u$){const e=i.cj();if(e===t)s.push(i);else if(t<e)break}return s}f9(){return{scrollX:this.G5(),scrollY:this._5(),scale:this.M5(),angle:this.GetAngle(),vpX:this.LJ(),vpY:this.BJ()}}d9(t){this.x5(t.scrollX),this.T5(t.scrollY),this.b5(t.scale),this.v5(t.angle),this.H5(t.vpX,t.vpY)}V$(){let t=this.u$.filter(t=>t.l9())[0];for(;t;){if(!t.IB())return x.wa(t.PB()),x.Sa(1),x;if(t.C9())return x.ua(0,0,0,0),x;t=t.sB().filter(t=>t.l9())[0]}return x.ua(0,0,0,0),x}$z(){return this.S$}U$(){return[...this.Zq]}jz(t){if(t.a4())for(const s of t.z$().H$())this.Zq.add(s);else this.Zq.add(t)}J$(){return[...this.Qq]}q$(t,s){if(t===this||!s)return Promise.resolve();t&&(v.$o(this.Qq,t.Qq),t.Qq.clear());const i=[];for(const e of this.Zq)this.Qq.has(e)||(i.push(e.$$(s)),this.Qq.add(e));return Promise.all(i)}async X$(t){if(t.cJ())throw new Error("cannot load textures for family");const s=this.Tf.eM();if(s&&!s.KC()&&!this.Qq.has(t)){this.Qq.add(t);const i=t.$$(s);this.Y$(i),await i,t.K$(),this.Tf.tO()}}Y$(t){this.t$.add(t),t.then(()=>this.t$.delete(t)).catch(()=>this.t$.delete(t))}Z$(){return Promise.all([...this.t$])}Q$(t){if(t.cJ()||0<t.n5())throw new Error("cannot unload textures");const s=this.Tf.eM();s&&this.Qq.has(t)&&(this.Qq.delete(t),t.tX(s))}sX(t,s){if(t!==this&&s)for(const i of this.Qq)i.Kz()||t.Zq.has(i)||(i.tX(),this.Qq.delete(i))}iX(){this.Qq.clear()}async eX(t){const s=this.Tf,i=this.Uq,e=s.Ck(),h=(this.Yq&&(this.Kq=e.hX(this.Yq),this.Kq.rX()),i.nX(this),this.gg=this.Hq,this.yg=this.zq,this.ez=s.pk()/2,this.hz=s.gk()/2,this.Rq(),this.C$(),this._$(),this.B$(),await this.Tf.sL().aX(this.N$(),!0),this.lX(t),this.Tf.uX(!0),this.cX(),this.S$||this.fX(),this.dX(this.s$),this.dX(this.i$),this.pX(),i.mX(),s.p5(),this.Tf.uX(!1),this.Tf.gX());if(await Promise.all(h),v.Yn(h),!s.yX()){for(const r of this.s$)r.SX();for(const n of this.i$)n.wX(this.e$,this.h$);for(const[o,a]of Object.entries(this.g$)){const l=this.Tf.Qj(parseInt(o,10));l&&!l.cJ()&&l.Xz()&&v.Yn(a)}for(const u of this.s$)u.bX();for(const c of this.i$)c.bX();for(const f of this.s$)f.e6()||f.MX();for(const d of this.i$)d.e6()||d.MX()}v.Yn(this.s$),v.Yn(this.i$),this.e$.clear(),this.h$.clear(),await Promise.all([...this.Zq].map(t=>t.vX(this.Tf.eM()))),t&&(s.h0().dispatchEvent(new v.Event("beforefirstlayoutstart")),await s.xX(new v.Event("beforeprojectstart"))),await this.GX(new v.Event("beforeanylayoutstart")),s.h0().dispatchEvent(new v.Event("beforelayoutstart")),await this.xX(new v.Event("beforelayoutstart")),s.yX()||await s.j4(v.CX.IX._X.TX,null,null),s.h0().dispatchEvent(new v.Event("afterlayoutstart")),await this.xX(new v.Event("afterlayoutstart")),await this.GX(new v.Event("afteranylayoutstart")),t&&(s.h0().dispatchEvent(new v.Event("afterfirstlayoutstart")),await s.xX(new v.Event("afterprojectstart"))),e.RX(i),await this.Z$(),this.S$=!1}lX(t){for(const s of this.Tf.uJ())if(!s.cJ()&&s.xL())for(const i of s.e5()){const e=i.qD(),h=e.$D(),r=v.Cr(h.qF(),0,this.c$.length-1),n=this.c$[r];e.ZD(n,!0),n.Qz(i)}if(!t)for(const o of this.c$)o.rJ(!1)}cX(){for(const t of this.c$)t.qz(this.s$),t.oJ()}fX(){let s=!1;for(const[t,i]of Object.entries(this.g$)){const e=this.Tf.Qj(parseInt(t,10));if(e&&!e.cJ()&&e.Xz())for(const h of i){let t=null;if(!e.xL()||(t=h.hasOwnProperty("instJson")?this.D$(h.instJson.w.l):this.D$(h.w.l))){const r=this.Tf.Yz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.$M(h.instJson):r.$M(h),s=!0,this.i$.push(r),h.hasOwnProperty("instJson")&&(this.e$.set(r,h),this.h$.set(h.index,r))}}}for(const n of this.c$)n.rJ(!0),n.QD();s&&(this.Tf.p5(),this.Tf.AX())}dX(s){for(const i of s)if(i.a4()){const e=i.qD(),t=i.f4();for(const h of i.KB().z$().EX())if(h!==i.KB()){const r=h.e5();if(r.length>t)i.PX(r[t]);else{let t;t=e?this.Tf.Yz(h,e.$D(),!0,e.kM(),e.LM(),!0):this.Tf.Yz(h,null,!0,0,0,!0),this.Tf.p5(),h.FX(),i.PX(t),s.push(t)}}}}pX(){for(const t of this.r$){const s=this.Tf.Wz(t[1]);s.a4()||this.Tf.Yz(t,null,!0)}}kX(){let i=[],e=this.r$,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.Tf.Wz(r[1]);n.Kz()?n.a4()&&n.z$().DX()||i.push(this.Tf.Yz(r,null,!0)):(e[h]=r,++h)}v.Xn(e,h),this.Tf.p5(),this.dX(i)}lJ(t,s,i,e,h,r,n){if(i)return i.lJ(t,s,h,r,e,n);{const o=[];for(const a of this.c$)o.push(a.lJ(t,s,h,r,e,n));return o.flat()}}async OX(){const t=this.Uq;this.Tf.yX()||(await this.GX(new v.Event("beforeanylayoutend")),await this.xX(new v.Event("beforelayoutend")),await this.Tf.j4(v.CX.IX._X.LX,null,null),await this.xX(new v.Event("afterlayoutend")),await this.GX(new v.Event("afteranylayoutend"))),t.BX(!0),this.Tf.Ck().NX(),this.S$||this.WX();for(const s of this.c$)s.aJ();for(const i of this.Tf.uJ())if(!(i.Kz()||i.xL()||i.qL().ML()||i.cJ())){for(const e of i.e5())this.Tf.e4(e);this.Tf.p5()}t.BX(!1),t.TD()===this&&t.nX(null)}jX(t,s){const i=t.KB().wJ().toString(),e=(this.g$.hasOwnProperty(i)||(this.g$[i]=[]),this.g$[i]),h={index:s,instJson:t.qM(),sceneGraphJson:{children:[]}};e.push(h),this.y$.set(t,h)}VX(t){const s=this.y$.get(t);for(const i of t.UX()){const e=this.y$.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:v.zX.HX(i.qD())})}}WX(){this.y$.clear();let t=0;for(const s of this.c$){s.m9();for(const i of s.KD()){const e=i.KB();!e.Kz()&&e.Xz()&&(this.jX(i,t),t++)}}for(const h of this.c$)for(const r of h.KD()){const n=r.KB();!n.Kz()&&n.Xz()&&this.VX(r)}this.y$.clear()}JX(){this.g$={},this.S$=!0}OE(){return this.QH}C9(){const t=this.Tf,s=t.eM().Lb();return"low"===t.sL().iq()||s&&t.sq()||this.Mz.R9()||s&&t.ZJ()}qX(t){const s=this.Tf.sL();if(this.C9()){t.VE(null),t.RE(0,0,0,0);const i={Lv:this.Tf.yk(),_2:t.XS()||this.Tf.sq()||this.Mz.R9(),tq:!!t.XS()&&this.Tf.sq()};"low"===s.iq()&&(i.width=s.z9(),i.height=s.J9()),this.QH=this.Tf.eq(i)}else this.QH=null}$X(t){this.Tf.XX(t)&&(t.PE(!1),t.VE(null),t.rw(),t.UE(this.QH))}YX(t){this.C9()&&(t.PE(!1),this.KX(t,this.QH))}ZX(t){t.VE(this.QH),t.Sc(this.V$()),this.Tf.ZJ()&&t.EE();const s=this.S9(0);this.hq(t,this.QH,s,!0),t.XS()&&t.StartMeasuringRenderPassTime(0,1),this.YX(t),this.QH=null}QX(t,s){let i=null;this.Tf.XX(t)&&(i=this.QH),t.VE(i),t.RE(0,0,0,0),this.Tf.ZJ()&&t.EE();const e=this.S9(s);this.hq(t,i,e,!0),this.$X(t),t.Ab(),this.Tf.sL().tY(s)}hq(t,e,s,h){const r=s.filter(t=>t.l9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.s9()&&!n.A9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.s9()||o.A9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].a9()){this.sY(t,e,a),s+=a.length,v.Yn(a);continue}v.Yn(a)}n._v(t,e,h&&0===s),++s}}KX(t,s){const i=this.Mz.GJ(),e=this.Tf;0===i.length?(t.VE(null),t.rw(),t.UE(s),t.zE(s),e.Tz(s)):(h.set(0,0,e.VJ(),e.UJ()),this.JF().U3(t,null,{H3:this,z3:3,devicePixelRatio:this.Tf.Tq(),J3:this.Tf.Iq()*this.M5(),q3:this.GetAngle(),mF:h,gF:null,PP:!0}))}sY(e,h,t){t[0].IB()||(x.wa(t[0].PB()),x.Sa(1),e.Sc(x)),this.Tf.sL(),e.PE(!0);const r=G,n=T,o=_;for(const a of t)a.m9(),a.XJ(r);const s=t[0],i=s.Y9(e);s.Q9(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.qD(),c=u.$D();if(u.oB()&&u.pq(c.fq())){(!l.mq()||0<u.gq())&&o.push(l);const f=l.qD().vN();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.qD();if(p.oB()&&p.pq(p.$D().fq())){if(p.vN()!==f)break;(d.mq()?(0<p.gq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].yq()){this.iY(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.qD(),y=g.$D();g.wq(!0),M(y,e),y.cq(m,g,e,h),g.wq(!1)}}else{M(c,e),c.cq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const S=o[t];if(S!==l){const w=S.qD(),b=w.$D();M(b,e),b.cq(S,w,e,h)}}}s=t,v.Yn(n),v.Yn(o)}else++s}i&&e.QE(i),v.Yn(r),I=null}iY(i,e,h){i.qE();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.qD(),o=n.$D();n.bq(!0),M(o,i),o.Mq(r,n,i)}i.$E();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.qD(),u=l.$D();M(u,i),u.cq(a,l,i,e),l.bq(!1)}i.YE()}Lq(){const t={sx:this.G5(),sy:this._5(),s:this.M5(),a:this.GetAngle(),w:this.Fm(),h:this.Um(),ortho:this.Y5(),vpX:this.LJ(),vpY:this.BJ(),fv:this.S$,persist:this.g$,fx:this.Mz.qM(),layers:{},dynamicLayers:[]};for(const s of this.c$)if(s.bJ()){const i=s.Z5();t.dynamicLayers.push({sid:s.wJ(),name:s.yf(),parentSid:i?i.wJ():null,siblingIndex:s.yJ(),data:s.Lq()})}else t.layers[s.wJ().toString()]=s.Lq();return t}Bq(t){this.ez=t.sx,this.hz=t.sy,this.sz=t.s,this.iz=t.a,this.gg=t.w,this.yg=t.h,this.qq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.$q=t.vpX),t.hasOwnProperty("vpY")&&(this.Xq=t.vpY),this.S$=!!t.fv,this.g$=t.persist,this.Mz.$M(t.fx),this.Iz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.D$(e);h&&h.Bq(i)}if(t.hasOwnProperty("dynamicLayers")){this.V5(),this.Tf.p5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.M$(),!this.k$(l)&&!this.D$(a)){let t,s;if(null===u)t=null,s=this.u$;else{if(!(t=this.D$(u)))continue;s=t.sB()}const d=v.Mr(v.kH,this,t,{name:l,sid:a,_H:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({mN:d,siblingIndex:c}),d.Bq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.mN,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.gJ(),this.C$(),this._$()}_D(){return this.w$}Gk(){return this.b$}eY(t){t.layout=this._D();const s=this.Tf,i=s.X4()&&!s.Ck().f5();i&&e.StartMeasuringScriptTime(),this.b$.dispatchEvent(t),i&&e.AddScriptTime()}xX(t){return t.layout=this._D(),this.b$.f0(t)}GX(t){return t.layout=this._D(),this.Tf.xX(t)}hY(){this.rY(this.u$)}rY(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.yf()),this.rY(e.sB(),s+1)}}}{const Cr=self.Ns;Cr.nY=class extends Cr.Sr{#tV;#aY=[];#lY=new Map;#uY=new Map;#cY=null;#fY=[];#dY=null;#pY=0;#mY=null;constructor(t){super(),this.#tV=t}vr(){this.#tV=null,this.#cY=null,this.#dY=null,this.#mY=null,Cr.Yn(this.#aY),this.#lY.clear(),this.#uY.clear(),Cr.Yn(this.#fY)}Px(t){const s=Cr.Mr(Cr.Vq,this,this.#aY.length,t);this.#aY.push(s),this.#lY.set(s.yf().toLowerCase(),s),this.#uY.set(s.wJ(),s)}dO(){return this.#tV}gY(t){this.#dY=t}yY(){if(this.#dY)return this.#dY;if(this.#aY.length)return this.#aY[0];throw new Error("no first layout")}SY(t){return this.#lY.get(t.toLowerCase())||null}wY(t){return this.#uY.get(t)||null}bY(t){return t=Cr.Cr(Math.floor(t),0,this.#aY.length-1),this.#aY[t]}RD(t){return"number"==typeof t?this.bY(t):this.SY(t.toString())}ED(){return this.#aY}nX(t){this.#cY=t}TD(){return this.#cY}MY(t){if(this.#fY.includes(t))throw new Error("layout already running");this.#fY.push(t)}vY(t){const s=this.#fY.indexOf(t);if(-1===s)throw new Error("layout not running");this.#fY.splice(s,1)}*xY(){this.#cY&&(yield this.#cY),this.#fY.length&&(yield*this.#fY)}GY(t){return this.#cY===t||this.#fY.includes(t)}BX(t){if(t)this.#pY++;else{if(this.#pY<=0)throw new Error("already unset");this.#pY--}}d5(){return 0<this.#pY}kD(t){this.#mY=t}mX(){this.#mY=null}FD(){return!!this.#mY}TY(){return this.#mY}_Y(){const t=this.TD();t&&t.C$()}IY(){const t=this.TD();t&&t._$()}}}{const Rr=self.Ns,Ar=new RegExp("<(.+?)>","g");Rr.CY=class extends Rr.Sr{constructor(t){super(),this.Tf=t,this.RY=Rr.Mr(Rr.AY),this.EY=null,this.PY=[],this.FY=new Map,this.kY=new Map,this.DY=new Map,this.OY=[],this.LY=[],this.BY=[],this.NY=!1,this.WY=!1,this.jY=!1,this.VY=()=>this.UY(),this.HY=()=>this.zY(),this.JY=()=>this.qY(),this.$Y=()=>this.XY(),this.YY=t=>this.KY(t.Y6),this.ZY=t=>this.QY(),this.tK=t=>this.sK(),this.iK=t=>this.eK(),this.hK=[],this.rK=0}vr(){this.nK(),this.VY=null,this.HY=null,this.JY=null,this.$Y=null,this.YY=null,this.tK=null;for(const t of this.PY)t.zW(),t.vr();Rr.Yn(this.PY),this.PY=null,this.RY.vr(),this.RY=null,Rr.Yn(this.OY),this.OY=null,Rr.Yn(this.LY),this.LY=null,Rr.Yn(this.BY),this.BY=null,this.FY.clear(),this.FY=null,this.kY.clear(),this.kY=null,this.DY.clear(),this.DY=null,Rr.Yn(this.hK),this.hK=null,this.Tf=null}oK(){const t=this.Tf.h0();t.addEventListener("pretick",this.VY),t.addEventListener("tick2",this.HY),t.addEventListener("beforelayoutchange",this.JY),t.addEventListener("layoutchange",this.$Y),t.addEventListener("instancedestroy",this.YY),t.addEventListener("beforeload",this.ZY),t.addEventListener("afterload",this.tK),t.addEventListener("afterlayoutstart",this.iK)}nK(){const t=this.Tf.h0();t.removeEventListener("pretick",this.VY),t.removeEventListener("tick2",this.HY),t.removeEventListener("beforelayoutchange",this.JY),t.removeEventListener("layoutchange",this.$Y),t.removeEventListener("instancedestroy",this.YY),t.removeEventListener("beforeload",this.ZY),t.removeEventListener("afterload",this.tK),t.removeEventListener("afterlayoutstart",this.iK)}Px(t){this.RY.Rc(t);const s=Rr.lK.aK(t,this);this.Rc(s),this.uK(s),this.DY.set(s.yf(),0)}cK(t){const s=this.fK(),i=t.m4(),e=s.ri(i),h=Rr.lK.cK(i+":"+this.DY.get(i),e,this);return this.dK(i),this.Rc(h),h}dK(t){this.DY.set(t,this.DY.get(t)+1)}pK(){for(const t of this.PY)if(!t.mK()){const s=t.m4();this.dK(s)}}gK(){for(const t of this.DY.keys())this.DY.set(t,0)}Rc(t){this.PY.push(t),this.FY.set(t.yf().toLowerCase(),t)}L0(t){t.yK(),t.mK()||(Rr.ro(this.PY,t),Rr.ro(this.OY,t),Rr.ro(this.LY,t),Rr.ro(this.BY,t),this.FY.delete(t.yf().toLowerCase()),this.SK(t),t.UW())||t.vr()}N4(t){this.Tf.N4(t,this.EY,null)}dO(){return this.Tf}fK(){return this.RY}wK(t){this.EY=t}bK(){return this.EY}*MK(){for(const t of this.PY)yield t}*vK(){for(const t of this.LY)yield t}xK(t,s){this.kY.has(t)||this.kY.set(t,new Set),this.kY.get(t).add(s)}uK(t){for(const s of t.GK())this.xK(s,t)}SK(t){for(const[s,i]of this.kY.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.kY.delete(s)}TK(t){if(this.kY.has(t))return this.kY.get(t)}_K(t,s){if(s)for(const i of this.PY){const e=s.every(t=>i.IK(t.Y6,t.trackId));if(e&&i.yf().includes(t.yf()))return i}}CK(t){return this.FY.get(t.toLowerCase())||null}RK(t){for(const s of this.OY)if(s.yf()===t)return s;for(const i of this.LY)if(i.yf()===t)return i;return null}*AK(i){if(Ar.test(i)){Ar.lastIndex=0;let t,s=new Set;do{if(t=Ar.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.CK(r);n&&(yield n)}s.clear()}else{const t=this.CK(i);t&&(yield t)}}*EK(t){for(const s of this.PY)s.qW(t)&&(yield s)}PK(t){this.OY.includes(t)||this.OY.push(t),this.FK()}kK(t){Rr.ro(this.LY,t),this.DK()}LK(t){this.LY.includes(t)?(t.BK(!0),t.NK(!1),t.WK(!1)):(t.BK(!1),t.NK(!0),t.WK(!1),this.OY.includes(t)||this.OY.push(t)),this.FK()}jK(t){t.BK(!1),t.NK(!1),t.VK(),Rr.ro(this.OY,t),this.DK()}UK(t){t.BK(!1),t.NK(!1),this.LY.includes(t)&&(t.WK(!0),this.BY.push(t),Rr.ro(this.LY,t)),this.OY.includes(t)&&t.WK(!0)}HK(t){t.BK(!1),t.NK(!1),t.WK(!1),t.s8(1),Rr.ro(this.LY,t)}zK(t){this.UK(t),t.VK()}UY(){if(!this.dO().yX()&&this.NY&&!this.WY){for(this.jY=!0;this.OY.length;){const t=this.OY.pop();(t.JK()?(t.qK(),this.BY):(t.$K(),this.LY)).push(t),0!==t.XK()&&(this.rK=1)}const s=this.Tf.YK(),i=this.Tf.KK(),e=this.Tf.iD();for(let t=this.LY.length-1;0<=t;t--){const h=this.LY[t];h&&h.ZK(s,e,i)}this.jY=!1,0!==this.rK&&this.dO().tO()}}zY(){if(!this.dO().yX()&&this.NY&&!this.WY){let i;for(let t=0,s=this.BY.length;t<s;t++){const e=this.BY[t];i=i||new Set,e.yK(),this.QK(e),i.add(e)}if(i){Rr.lo(this.BY,i);for(let t=this.rK=0,s=this.LY.length;t<s;t++)if(0!==this.LY[t].XK()){this.rK=1;break}}this.DK()}}QK(t){t.UW()||t.tZ()&&t.sZ()&&t.iZ()&&t.eZ()}FK(){this.NY||(this.NY=!0)}DK(){this.BY.length||this.LY.length||this.OY.length||this.jY||(this.NY=!1)}qY(){for(this.WY=!0;this.OY.length;)this.jK(this.OY.pop());const t=new Set;for(const s of this.LY){const i=s.qY();i&&(s.yK(),t.add(s))}Rr.lo(this.LY,t),t.clear();for(const e of this.BY){const h=e.qY();h&&(e.yK(),t.add(e))}Rr.lo(this.BY,t),this.DK();for(const r of this.PY)r.hZ()}XY(){this.WY=!1}KY(t){const s=t.KB(),i=this.TK(s);if(i)if(this.Tf.yX())this.hK.push(t);else for(const e of i)e.mK()||(e.UW()?this.L0(e):e.tZ()||(this.QK(e),this.L0(e)))}QY(){for(const t of this.OY.map(t=>t))this.QK(t),this.L0(t);for(const s of this.LY.map(t=>t))this.QK(s),this.L0(s)}sK(){for(const t of this.hK)this.KY(t);Rr.Yn(this.hK);for(const s of this.PY)s.sK()}eK(){const t=this.Tf.CD(),s=t.TD();if(s)for(const i of this.PY){const e=i.rZ();e&&s.yf()===e&&this.LK(i)}}Lq(){return{timelinesJson:this.nZ(),scheduledTimelinesJson:this.oZ(),playingTimelinesJson:this.aZ(),markedForRemovalTimelinesJson:this.lZ(),hasRuntimeListeners:this.NY,changingLayout:this.WY,isTickingTimelines:this.jY}}Bq(t){t&&(this.gK(),this.uZ(t.timelinesJson),this.cZ(t.scheduledTimelinesJson),this.fZ(t.playingTimelinesJson),this.dZ(t.markedForRemovalTimelinesJson),this.NY=!t.hasRuntimeListeners,this.WY=!!t.changingLayout,this.jY=!!t.isTickingTimelines,this.pK(),this.FK(),this.DK())}nZ(){return this.PY.map(t=>t.Lq())}uZ(t){for(const s of t){let t=this.CK(s.name);if(t)t.Bq(s);else{const i=this.pZ(s);if(!i)continue;const e=this.CK(i);(t=this.cK(e)).Bq(s)}t.mZ()||this.L0(t)}}pZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}oZ(){return this.gZ(this.OY)}cZ(t){this.yZ(t,this.OY)}aZ(){return this.gZ(this.LY)}fZ(t){this.yZ(t,this.LY)}lZ(){return this.gZ(this.BY)}dZ(t){this.yZ(t,this.BY)}SZ(t,s){if(s)for(const i of s)if(i===t.yf())return!0;return!1}gZ(t){return t.map(t=>t.yf())}yZ(t,s){const i=new Set;for(const e of s)this.SZ(e,t)||i.add(e);if(Rr.lo(s,i),t)for(const h of t){const r=this.CK(h);if(r){const n=s.find((s=>t=>t.yf()===s)(h));n||s.push(r)}}}}}{const Er=self.Ns,Pr=[0,0],Fr=[0,0],kr=[0,0],Dr=[0,0,0,0,0],Or=new Array(4),Lr=[{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0}],Br={x:0,y:0,t:0,At:0};Er.wZ=class{constructor(t,s){this.bZ=!1,this.MZ=t,this.vZ=[];let i=null;if(i=s?this.MZ.xZ(s):Er.first(this.MZ.GZ())){const e=i.S8("offsetX"),h=i.S8("offsetY");if(e&&h){this.TZ=e,this._Z=h;const r=e.IZ(),n=h.IZ();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.CZ(),o.RZ()),l=n[t],u=(l.CZ(),l.RZ());a&&"cubic-bezier"===a.AZ()&&u&&"cubic-bezier"===u.AZ()?this.vZ.push(Er.Mr(Er.EZ,a,u,o,l,this.vZ.length)):(a&&"line"===a.AZ()&&u&&u.AZ(),this.vZ.push(Er.Mr(Er.PZ,o,l,this.vZ.length)))}this.bZ=!0}}}vr(){for(const t of this.vZ)t.vr();Er.Yn(this.vZ),this.vZ=null,this.MZ=null,this.TZ=null,this._Z=null}FZ(){return this.bZ}kZ(){return this.vZ}DZ(t){const s="relative"===this.TZ.OZ()?t.kM():0,i="relative"===this._Z.OZ()?t.LM():0;for(const e of this.vZ)e.DZ(s,i)}Py(s,i,t){let e=NaN,h=this.vZ.length;for(let t=0;t<h;t++){const r=this.vZ[t];if("cubic-bezier"===r.DG()){const n=r.Py(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],kr[0]=n[2],kr[1]=r.qF())}}return kr}LZ(s,i,t){const e=t.tRange;Er.ye(e[0])||(e[0]=0),Er.ye(e[1])||(e[1]=1);let h=NaN,r=this.vZ.length;for(let t=0;t<r;t++){const n=this.vZ[t];if("cubic-bezier"===n.DG()){const o=n.BZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],kr[0]=o[2],kr[1]=n.qF())}}return kr}NZ(t,s){return this.vZ[s].NZ(t)}WZ(t,s){return this.vZ[s].WZ(t)}},Er.EZ=class{constructor(t,s,i,e,h){this.Gy=h;const r=t.jZ("cubic-bezier"),n=i.jZ("cubic-bezier"),o=s.jZ("cubic-bezier"),a=e.jZ("cubic-bezier");this.VZ=t.UZ(),this.HZ=s.UZ(),this.zZ=t.UZ()+r.JZ(),this.qZ=s.UZ()+o.JZ(),this.$Z=i.UZ()+n.XZ(),this.YZ=e.UZ()+a.XZ(),this.KZ=i.UZ(),this.ZZ=e.UZ(),this.QZ=0,this.tQ=0,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=0,this.rQ=0,this.nQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=0,this.gQ=0,this.yQ=0,this.SQ=0,this.wQ=NaN,this.bZ=!1,this.bQ=100,this.MQ=new Array(this.bQ+1),this.MQ[0]=0,this.vQ=0,this.xQ=[],this.GQ=[];for(let t=0;t<100;t++)this.GQ.push({x:0,y:0,t:0,At:0});this.TQ()}vr(){Er.Yn(this.MQ),this.MQ=null,Er.Yn(this.xQ),this.xQ=null,Er.Yn(this.GQ),this.GQ=null}DG(){return"cubic-bezier"}qF(){return this.Gy}_Q(){return Math.floor(this.vQ/25)}IQ(){return 1/this._Q()}DZ(t,s){this.CQ=t,this.RQ=s,this.MQ=new Array(this.bQ+1),this.MQ[0]=0,this.TQ(),this.QZ=this.VZ+this.CQ,this.tQ=this.HZ+this.RQ,this.sQ=this.zZ+this.CQ,this.iQ=this.qZ+this.RQ,this.eQ=this.$Z+this.CQ,this.hQ=this.YZ+this.RQ,this.rQ=this.KZ+this.CQ,this.nQ=this.ZZ+this.RQ,this.oQ=3*(this.sQ-this.QZ),this.aQ=3*(this.iQ-this.tQ),this.lQ=3*(this.eQ-this.sQ),this.uQ=3*(this.hQ-this.iQ),this.cQ=3*(this.rQ-this.eQ),this.fQ=3*(this.nQ-this.hQ),this.dQ=3*(this.sQ-this.QZ),this.pQ=3*(this.QZ+this.eQ-2*this.sQ),this.mQ=this.rQ-this.QZ+3*(this.sQ-this.eQ),this.gQ=3*(this.iQ-this.tQ),this.yQ=3*(this.tQ+this.hQ-2*this.iQ),this.SQ=this.nQ-this.tQ+3*(this.iQ-this.hQ)}Map(t){if(!this.bZ)return NaN;const s=this.AQ(t);return Fr[0]=this.EQ(s),Fr[1]=this.PQ(s),Fr}Py(t,s){const i=this.FQ(100),e=this.kQ(t,s,i),h=this.DQ(t,s,i,e);return Dr[0]=h.x,Dr[1]=h.y,Dr[2]=h.t,Dr[3]=h.At,Dr}BZ(t,s,i){const e=this.FQ(100),h=this.OQ(t,s,e,i),r=this.DQ(t,s,e,h);return Dr[0]=r.x,Dr[1]=r.y,Dr[2]=r.t,Dr[3]=r.At,Dr}NZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.oQ+e*this.lQ+h*this.cQ,n=i*this.aQ+e*this.uQ+h*this.fQ,o=Er.Pr(r,n);return Pr[0]=r/o,Pr[1]=n/o,Pr}WZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.oQ+e*this.lQ+h*this.cQ,n=i*this.aQ+e*this.uQ+h*this.fQ;return Math.atan2(n,r)}AQ(h){if(this.bZ){let t=h*this.MQ[this.bQ],s=0,i=this.bQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.MQ[e]<t?s=e+1:i=e;this.MQ[e]>t&&e--;const r=this.MQ[e];return r===t?e/this.bQ:(e+(t-r)/(this.MQ[e+1]-r))/this.bQ}}EQ(t){return this.bZ?self.Pc.qc("cubicbezier")(t,this.VZ+this.CQ,this.zZ+this.CQ,this.$Z+this.CQ,this.KZ+this.CQ):NaN}PQ(t){return this.bZ?self.Pc.qc("cubicbezier")(t,this.HZ+this.RQ,this.qZ+this.RQ,this.YZ+this.RQ,this.ZZ+this.RQ):NaN}FQ(s){if(!(this.xQ.length>=(s=s||100))){this.xQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.dQ*i,n=this.pQ*e,o=this.mQ*h,a=this.gQ*i,l=this.yQ*e,u=this.SQ*h,c=this.QZ+r+n+o,f=this.tQ+a+l+u;this.GQ[t].x=c,this.GQ[t].y=f,this.GQ[t].t=i,this.GQ[t].At=0,this.xQ[t]=this.GQ[t]}}return this.xQ}kQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.wQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.At=o*o+a*a,n.At<h&&(h=n.At,r=t)}else{for(let t=this.wQ;t<this.wQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.At=u*u+c*c,l.At<h&&(h=l.At,r=t)}for(let t=this.wQ;t>this.wQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.At=d*d+p*p,f.At<h&&(h=f.At,r=t)}}return this.wQ=r}OQ(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.wQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.At=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.At<r&&(r=o.At,n=t)}else{for(let t=this.wQ;t<this.wQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.At=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.At<r&&(r=u.At,n=t)}for(let t=this.wQ;t>this.wQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.At=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.At<r&&(r=d.At,n=t)}}return this.wQ=n}DQ(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.dQ*f,g=this.pQ*d,y=this.mQ*p,S=this.gQ*f,w=this.yQ*d,b=this.SQ*p,M=this.QZ+m+g+y,v=this.tQ+S+w+b,x=M-n,G=v-o,T=x*x+G*G;if(T<c){c=T,l=t,Br.x=M,Br.y=v,Br.t=f,Br.At=T,u=Br;break t}const _=Lr[t-1];_.x=M,_.y=v,_.t=f,_.At=T,Or[t]=_}Or[3]=a[i],a=Or}while(t++<20);return u}TQ(){this.bZ=!0;let s=this.EQ(0),i=this.PQ(0),e=0;for(let t=1;t<=this.bQ;t++){const h=this.EQ(.01*t),r=this.PQ(.01*t),n=s-h,o=i-r;e+=Er.Pr(n,o),this.MQ[t]=e,s=h,i=r}this.vQ=e}},Er.PZ=class{constructor(t,s,i){this.Gy=i,this.LQ=t.UZ(),this.BQ=s.UZ(),this.CQ=0,this.RQ=0}vr(){}DG(){return"line"}qF(){return this.Gy}DZ(t,s){this.CQ=t,this.RQ=s}kM(){return this.LQ+this.CQ}LM(){return this.BQ+this.RQ}}}{const b=self.Ns;b.lK=class extends b.Sr{constructor(t,s,i){super(),this.Tf=i.dO(),this.NQ=i,this.WQ=s,this._r=t,this.jQ=[],this.VQ=0,this.UQ=null,this.HQ=0,this.zQ(),this.JQ=null,this.qQ=null,this.$Q=0,this.XQ=0,this.YQ=1,this.KQ=0,this.ZQ=1,this.QQ=!1,this.ttt=!1,this.stt=!1,this.itt=!0,this.ett=!1,this.htt=!1,this.ntt=-1,this.ott=!1,this.att=!1,this.ltt=!1,this.utt=!1,this.ctt=NaN,this.ftt=[""],this.dtt="",this.ptt=!1,this.rK=0,this.mtt=0,this.gtt=null}static aK(t,s){const i=s.fK(),e=i.ytt(),h=i.ri(t[e]),r=b.Mr(b.lK,t[e],h,s);return r.Stt(!0),r}static cK(t,s,i){return b.Mr(b.lK,t,s,i)}vr(){if(!this.UW()){const t=this.Tf.h0();this.NQ.jK(this),this.NQ.zK(this);for(const s of this.jQ)s.vr();b.Yn(this.jQ),this.jQ=null,this.Tf=null,this.NQ=null,this.WQ=null,this.ett=!0,this.JQ=null,this.qQ=null,this.wtt(t)}}wtt(t){const s=b.Mr(b.Event,"timelinestatereleased");s.btt=this,t.dispatchEvent(s)}DG(){return 0}zQ(){for(const t of this.WQ.vtt().Mtt())this.VQ=this.jQ.push(b.xtt.Px(this,t))}Gtt(){return this.NQ}dO(){return this.Tf}GZ(){return this.jQ}Ttt(e,h,r,n){if(this.mtt){let i;for(let s=0;s<this.jQ.length;s++){let t=this.jQ[s];if(e===t.f8()){const o=t.S8(r);o&&h.constructor===o._tt().constructor&&o.OZ()===n.OZ()&&(i=i||[]).push(o)}}return i}}mZ(){return!!this.jQ.length}xZ(t){for(const s of this.jQ)if(b.Mh(s.g8(),t))return s;return null}Itt(t){for(const s of this.jQ)if(!s.Ctt()&&b.Mh(s.yf(),t))return s;return null}uV(t){this._r=t}yf(){return this._r}Rtt(){return this.WQ}m4(){return this.WQ.yf()}YW(){return this.WQ.YW()}XW(t){this.WQ.XW(t)}Att(){return this.WQ.Att()}Ett(t){this.WQ.Ett(t)}Ptt(){return this.WQ.Ptt()}Ftt(t){this.WQ.Ftt(t)}OZ(){return this.WQ.OZ()}ktt(t){this.WQ.OZ(t)}c8(t){for(const s of this.GZ())s.c8(t)}ZW(){return this.WQ.ZW()}KW(t){return this.WQ.KW(t)}t8(){return this.WQ.t8()}QW(t){return this.WQ.QW(t)}lW(){return this.WQ.lW()}Dtt(t){return this.WQ.Dtt(t)}s8(t){return this.YQ=t}i8(){return this.YQ}rZ(){return this.WQ.rZ()}Ott(){return this.WQ.Ott()}Ltt(){return this.WQ.Ltt()}Btt(){return this.KQ}Ntt(){return!this.IsPlaying()||0<this.YQ}h8(){return this.JQ||(this.JQ=new Promise(t=>{this.qQ=t})),this.JQ}VK(){this.JQ&&(this.qQ(),this.JQ=null,this.qQ=null)}Wtt(t){this.ftt=b.lK.jtt(t),this.ptt=!0}e8(){return this.ftt}Vtt(){return this.ptt&&(this.dtt=this.ftt.join(" ")),this.ptt=!1,this.dtt}qW(t){if(!this.ftt)return!1;if(!this.ftt.length)return!1;const s=b.lK.jtt(t);return!!s&&!!s.length&&s.every(b.lK.Utt,this)}Htt(){b.CX.Timeline&&this.constructor===b.lK&&(b.CX.Timeline._X.PushTriggerTimeline(this),this.NQ.N4(b.CX.Timeline._X.OnTimelineStarted),this.NQ.N4(b.CX.Timeline._X.OnTimelineStartedByName),this.NQ.N4(b.CX.Timeline._X.OnTimelineStartedByTags),this.NQ.N4(b.CX.Timeline._X.OnAnyTimelineStarted),b.CX.Timeline._X.PopTriggerTimeline())}ztt(){this.ntt=this.Tf.Jtt()}eZ(){this.ltt||(this.ltt=!0,b.CX.Timeline&&this.constructor===b.lK&&(b.CX.Timeline._X.PushTriggerTimeline(this),this.NQ.N4(b.CX.Timeline._X.OnTimelineFinished),this.NQ.N4(b.CX.Timeline._X.OnTimelineFinishedByName),this.NQ.N4(b.CX.Timeline._X.OnTimelineFinishedByTags),this.NQ.N4(b.CX.Timeline._X.OnAnyTimelineFinished),b.CX.Timeline._X.PopTriggerTimeline()))}BK(t){this.QQ=t}qtt(){return this.ntt===this.Tf.Jtt()}IsPlaying(t=!1){return!!this.qtt()||!(!this.$tt()||t)||this.QQ}Xtt(){return this.IsPlaying(!0)}n8(){return this.Ytt()}Ytt(){return!(this.UW()||this.$tt()||this.Xtt()||this.sZ())}NK(t){this.ttt=t}$tt(){return this.ttt}Ktt(t){this.itt=t;const s=this.IP();(s<=0||s>=this.YW())&&(this.itt=!0)}sZ(){return this.itt}UW(){return this.ett}WK(t){this.htt=t}JK(){return this.htt}Ztt(t){this.ott=t}Qtt(){return this.ott}Stt(t){this.att=!!t}mK(){return this.att}iZ(){return this.stt}IP(){return this.$Q}$W(t){const s=this.IP();this.tst(t),this.Ktt(!1),this.sZ()||this.Ztt(!0),!this.Xtt()&&!this.$tt()&&this.stt||(this.Xtt()||this.$tt()||this.stt?this.Xtt()?this.zW():this.$tt()&&(this.NQ.jK(this),this.sst()):this.sst()),this.ist(),this.est(this.IP(),!1,!0,!0,s),this.hst(),this.rK&&this.dO().tO(),this.rst()}tst(t){(t=b.ye(t)?t:this.YW())<0?this.$Q=0:t>=this.YW()?this.$Q=this.YW():this.$Q=t}nst(t){(t=b.ye(t)?t:this.YW())<0?this.$Q=0:t>=this.YW()?this.$Q=this.YW():this.$Q=t;for(const s of this.jQ)s.ost()}rst(){b.CX.Timeline&&this.constructor===b.lK&&(b.CX.Timeline._X.PushTriggerTimeline(this),this.NQ.N4(b.CX.Timeline._X.OnTimeSet),this.NQ.N4(b.CX.Timeline._X.OnTimeSetByName),this.NQ.N4(b.CX.Timeline._X.OnTimeSetByTags),b.CX.Timeline._X.PopTriggerTimeline())}ast(){if(!this.ZW())if(this.t8()&&1===this.KQ){if(this.Ntt()){if(this.IP()>=this.YW())return!1}else if(this.IP()<=0)return!1}else if(!this.ZW()&&!this.t8())if(this.Ntt()){if(this.IP()>=this.YW())return!1}else if(this.IP()<=0)return!1;return!0}JW(){this.UW()||this.ast()&&this.Play(!0)}Play(t=!1){return!this.UW()&&!this.$tt()&&(this.Xtt()&&this.qtt()?this.lst():!this.Xtt()&&!!(this.sZ()||t||this.Qtt())&&this.ust())}lst(){return this.Ztt(!1),this.NQ.kK(this),this.NQ.LK(this),this.h8(),!0}ust(){return this.Ztt(!1),this.NQ.LK(this),this.h8(),!0}zW(t=!1){this.UW()||(this.Ktt(t),this.NQ.UK(this),this.sZ()&&this.VK())}T0(t=!0,s=!1){if(!this.UW()){if(!this.Xtt()&&this.$tt())return this.NQ.jK(this);if(!this.sZ()){this.zW(!0),this.Ntt()?this.tst(0):this.tst(this.YW());const i=this.IP();this.ist(),s?this.cst(i):this.est(i,!1,!1,!0),t&&this.rst(),this.hst(),this.rK&&t&&this.dO().tO()}}}fst(){this.T0(!1,!0)}cst(t){this.est(t,!1,!1,!0,NaN,!1,!0)}qY(){if(!this.UW()){if(!this.dO().yX()&&this.dst())return!1;this.NQ.HK(this),this.dO().yX()||this.fst()}return!0}sst(){this.$K(!0)}qK(){this.$K(!1,!0),this.BK(!1),this.NK(!1)}$K(t=!1,s=!1){if(!this.JK()||s){if(t){this.ltt=!1,this.stt=!0,this.utt=!0,this.ist();for(const i of this.jQ)i.$K()}else if(this.BK(!0),this.NK(!1),this.Htt(),this.sZ()){this.ntt=-1,0!==this.KQ&&(this.YQ=Math.abs(this.YQ)),this.KQ=0,this.ZQ=1,this.itt=!1,this.ltt=!1,this.stt=!0,this.utt=!0,this.Ntt()?this.tst(0):this.tst(this.YW()),this.ist();for(const e of this.jQ)e.$K()}else{this.utt=!0,this.ltt=!1,this.ist();for(const h of this.jQ)h.pst()}this.hst()}}XK(){return this.rK}ist(){this.mtt=0;for(const t of this.jQ)t.wR()&&(this.mtt=1)}hst(){this.rK=0;for(const t of this.jQ)t.mst(),0===this.rK&&1===t.XK()&&(this.rK=1),this.UQ||1!==t.gst()||(this.UQ||(this.UQ=[]),this.HQ=this.UQ.push(t))}ZK(t,s,i){if(this.Ltt()){if(0===t&&0===this.ctt)return;this.ctt=t,t=i}else{if(0===i&&0===this.ctt)return;t=this.ctt=i,s=1}const e=this.$Q+this.XQ,h=t*s*this.YQ,r=e+h,n=this.WQ.yst;r<0?(this.$Q=0,this.XQ=-r):n<=r?(this.$Q=n,this.XQ=this.$Q-r):(this.$Q=r,this.XQ=0);let o=!1,a=!1,l=this.ZW(),u=this.t8();l||u?l&&!u?0<this.YQ?this.$Q>=n&&(this.nst(0),a=!0):this.$Q<=0&&(this.nst(n),a=!0):!l&&u?0<this.YQ?this.$Q>=n&&(this.tst(n),this.s8(-1*this.i8()),a=!0,1===this.KQ?this.ZQ<this.lW()?(this.ZQ++,this.KQ=0):o=!0:0===this.KQ&&(this.KQ=1)):this.$Q<=0&&(this.tst(0),this.s8(-1*this.i8()),a=!0,1===this.KQ?this.ZQ<this.lW()?(this.ZQ++,this.KQ=0):o=!0:0===this.KQ&&(this.KQ=1)):l&&u&&(0<this.YQ?this.$Q>=n&&(this.tst(n),this.s8(-1*this.i8()),a=!0,this.KQ++,b.wrap(this.KQ,0,2)):this.$Q<=0&&(this.tst(0),this.s8(-1*this.i8()),a=!0,this.KQ++,b.wrap(this.KQ,0,2))):0<this.YQ?this.$Q>=n&&(this.ZQ<this.lW()?(this.ZQ++,this.nst(0),a=!0):(this.tst(n),o=!0)):this.$Q<=0&&(this.ZQ<this.lW()?(this.ZQ++,this.nst(n),a=!0):(this.tst(0),o=!0));let c,f=this.VQ;if(o){for(c=0;c<f;c++)this.jQ[c].Sst();this.zW(!0),this.ztt()}else{const d=this.HQ;for(c=0;c<d;c++)this.UQ[c].wst();if(1===this.mtt)for(c=0;c<f;c++){const p=this.jQ[c],m=p.bst(),g=this.$Q-m,y=e-m;g<0&&0<y?(this.$Q=m<0?0:n<=m?n:m,p.hf(m,!0,!1,a,this.utt,!1)):p.hf(this.$Q,!0,!1,a,this.utt,!1)}else for(c=0;c<f;c++)this.jQ[c].hf(this.$Q,!0,!1,a,this.utt,!1);for(c=0;c<d;c++)this.UQ[c].Mst();this.utt&&(this.utt=!1)}}est(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.jQ)o.wst();for(const a of this.jQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.IP(),u=l-a.bst(),c=r-a.bst();u<0&&0<c&&(t=a.bst(),this.tst(t))}a.hf(t,i,e,h,this.utt,n)}for(const f of this.jQ)f.Mst();this.utt&&t&&(this.utt=!1)}vst(){const t=this.WQ.vtt().xst(),s=b.xtt.Px(this,t);return this.VQ=this.jQ.push(s),s}yK(){if(!this.UW())for(const t of this.jQ)t.Gst()}hZ(){for(const t of this.jQ)t.hZ()}Tst(){for(const t of this.jQ)t._st()}Ist(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.jQ[i];return e?(e.Cst(s),void this.NQ.xK(s.KB(),this)):void 0}for(const h of this.jQ)if(h.Ctt())if(t){if(h.g8()===t){h.Cst(s),this.NQ.xK(s.KB(),this);break}}else if(!h.Rst()){h.Cst(s),this.NQ.xK(s.KB(),this);break}}}IK(t,s){for(const i of this.jQ)if(i.Ctt())if(s){if(s===i.g8()&&t===i.f8())return!0}else if(t===i.f8())return!0;return!1}tZ(){return this.jQ.some(t=>!t.Ctt()||t.Ast())}dst(){return this.jQ.some(t=>{if(t.Ctt()){if(!t.Ast())return!1;const s=t.KB();return!!s&&s.Kz()}return!1})}S8(t){for(const s of this.GZ())for(const i of s.Est())if(i.Pst()===t)return i}Fst(t){for(const s of this.jQ)if(t===s.f8())return s;return null}kst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.GZ())for(const h of e.Dst()){const r=s.every(t=>h.Ost(t));if(r)return h}}GK(){const t=[];for(const s of this.GZ())t.push(s.KB());return t.filter(t=>t)}sK(){for(const t of this.GZ())t.sK()}Lq(){return{tracksJson:this.Lst(),name:this._r,playheadTime:this.IP(),playbackRate:this.YQ,pingPongState:this.KQ,currentRepeatCount:this.ZQ,isPlaying:this.QQ,isScheduled:this.ttt,initialStateSet:this.stt,finishedTriggers:this.ltt,complete:this.itt,released:this.ett,markedForRemoval:this.htt,completedTick:this.ntt,implicitPause:this.ott,isTemplate:this.att,tags:this.ftt.join(" "),stringTags:this.dtt,tagsChanged:this.ptt,firstTick:this.utt}}Bq(t){t&&(this.Bst(t.tracksJson),this._r=t.name,this.$Q=t.playheadTime,this.YQ=t.playbackRate,this.KQ=t.pingPongState,this.ZQ=t.currentRepeatCount,this.QQ=!!t.isPlaying,this.ttt=!!t.isScheduled,this.stt=!!t.initialStateSet,this.ltt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.itt=!!t.complete,this.ett=!!t.released,this.htt=!!t.markedForRemoval,this.ntt=t.completedTick,this.ott=!!t.implicitPause,this.att=!!t.isTemplate,this.ftt=t.tags.split(" "),this.dtt=t.stringTags,this.ptt=!!t.tagsChanged,this.utt=!!t.firstTick)}Lst(){return this.jQ.map(t=>t.Lq())}Bst(t){this.Tst(),t.forEach((t,s)=>{const i=this.jQ[s];i.Bq(t)}),this.jQ.filter(t=>t.Ast())}static Utt(t){const s=this.e8();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static jtt(t){if(b.Ve(t))return t.slice(0);if(b.Ie(t))return t.split(" ");throw new Error("invalid tags")}Nst(){return this.gtt||(this.gtt=b.Mr(self.a8,this)),this.gtt}}}{const Nr=self.Ns;Nr.xtt=class extends Nr.Sr{constructor(t,s){super(),this.MZ=t,this.Wst=s,this.jst=s.vtt(),this.Vst=NaN,this.Ust=NaN,this.Hst=null,this.zst=null,this.Jst=!1,this.dR=0<s.bst(),this.qst=!1,this.$st=!1,this.Xst=NaN,this.Yst=null,this.Kst=this.Wst.Qst().Zst(),this.tit=[],this.sit(),this.iit=0,this.rK=0,this.eit=0}static Px(t,s){return Nr.Mr(Nr.xtt,t,s)}vr(){this.Kst=null;for(const t of this.tit)t.vr();Nr.Yn(this.tit),this.tit=null,this.MZ=null,this.Hst=null,this.zst=null,this.Wst=null,this.Yst=null}sit(){for(const t of this.Wst.rit().hit())this.tit.push(Nr.nit.Px(this,t))}Gst(){for(const t of this.tit)t.Gst()}hZ(){for(const t of this.tit)t.hZ();this.Hst=null,this.zst=null}oit(){return this.MZ}dO(){return this.MZ.dO()}Dst(){return this.Kst||(this.Kst=this.Wst.Qst().Zst()),this.Kst}Est(){return this.tit}S8(s){for(let t=0;t<this.tit.length;t++){const i=this.tit[t];if(i.Pst()===s)return i}}ait(){this.Hst||this.f8()}lit(){return!!this.Hst&&!this.Hst.wj()}Ast(){if(!this.Ctt())return!1;const t=this.uit(),s=this.dO().VD(t);return!!s&&!s.wj()}KB(){if(this.Ctt()){const t=this.cit();if(-1!==t)return this.dO().Wz(t)}}dit(){return this.MZ.GZ().indexOf(this)}_st(){this.Hst=null,this.Vst=NaN,this.zst=null,this.Ust=NaN,this.Jst=!0}Rst(){return!!this.Hst}f8(){if(!this.Jst){if(!this.Hst||!this.lit()){const t=this.uit();this.Hst=this.dO().VD(t)}return this.Hst}}Cst(t){if(this.Jst=!1,this.Hst!==t){this.hZ(),this.Hst=t,this.Ust=t.KB().qF(),this.Vst=t.u4(),this.zst=t.qD();for(const s of this.pit()){const i=s.mit,e=s.git,h=i.yit();switch(h){case"instance-variable":{e.Sit();const r=t.KB(),n=r.wit(s.name),o=r.bit(n),a=r.Mit(n);o===s.name&&a===s.type&&e.vit(n);break}case"behavior":{const l=s.J6,u=this.KB(),c=t.KB(),f=e.X6(c);if(l&&f){const d=l.yf();u.xit(d),c.xit(d),e.Sit(),e.Git(f.wJ())}break}}}}}*pit(){for(const t of this.tit){const s=t._tt(),i=this.KB(),e={mit:t,git:s};switch(t.yit()){case"world-instance":e.property=t.Pst();break;case"instance-variable":{const h=s.Sit();e.name=i.bit(h),e.type=i.Mit(h);break}case"effect":{const r=i.g5(),n=s.Tit(r);e._it=n;break}case"behavior":{const o=s.X6(i);e.J6=o;break}case"plugin":e.JL=i.qL()}yield e}}qD(){if(!this.zst||!this.lit()){const t=this.f8();t&&(this.zst=t.qD())}return this.zst}Iit(){return this.Wst}uit(){return isNaN(this.Vst)?this.Wst.uit():this.Vst}Cit(t){this.Wst.Cit(t)}Ptt(){return this.Wst.Ptt()}Ftt(t){this.Wst.Ftt(t)}OZ(){return this.Wst.OZ()}g8(){return this.Wst.g8()}bst(){return this.Wst.bst()}Rit(){return this.Wst.Rit()}Ait(t){this.Wst.Ait(t)}ktt(t){this.Wst.ktt(t)}c8(t){for(const s of this.Dst())s.c8(t);for(const i of this.Est())i.c8(t)}Eit(){return this.Wst.Eit()}Pit(t){this.Wst.Pit(t)}cit(){return isNaN(this.Ust)?this.Wst.cit():this.Ust}Fit(t){this.Wst.Fit(t)}kit(t){this.Wst.kit(t)}Dit(){const t=this.f8();if(t){const s=t.B6();if(s.Oit())return t.B6().Dit()}return this.Wst.Dit()}Lit(t){this.Wst.Lit(t)}Bit(){const t=this.f8();if(t){const s=t.B6();if(s.Oit())return t.B6().Bit()}return this.Wst.Bit()}DG(){return this.Wst.DG()}yf(){return this.Wst.yf()}Ctt(){return 0===this.DG()}Nit(){return 1===this.DG()}Wit(){return 2===this.DG()}jit(){return this.iit}XK(){return this.rK}gst(){return this.eit}wR(){return this.dR}ost(){for(const t of this.tit)t.ost()}$K(){if(this.ait(),this.lit()||!this.Ctt()){const t=this.oit(),s=t.Ntt(),i=s?0:this.Rit();for(const h of this.tit)h.$K(i),0===this.iit&&1===h.jit()&&(this.iit=1),0===this.rK&&1===h.XK()&&(this.rK=1);this.eit=0;const e=this.tit.some(t=>t.gst());e&&(this.eit=1),this.Yst=this.Vit(i),this.qst=!1,this.$st=!1,this.hf(i),this.Uit(this.Vit(i))}}pst(){if(this.ait(),this.lit()||!this.Ctt()){this.MZ.Ntt();const t=this.MZ.IP()-this.bst();this.Yst=this.Vit(t);for(const s of this.tit)s.pst(t)}}Sst(){if(!this.oit().sZ()&&(this.ait(),this.lit()||!this.Ctt())&&!this.dR){const t=this.MZ.IP(),s=this.bst()+this.Rit();s<=t?this.hf(this.Rit(),!0,!1,!0,!1,!1,!0):t<=0&&this.hf(0,!0,!1,!0,!1,!1,!0)}}mst(){for(let t=0,s=this.tit.length;t<s;t++){const i=this.tit[t];i.mst(),0===this.iit&&1===i.jit()&&(this.iit=1),0===this.rK&&1===i.XK()&&(this.rK=1)}}wst(){const s=this.tit.length;for(let t=0;t<s;t++)this.tit[t].wst()}hf(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.Hst||this.f8();const o=this.Hst&&!this.Hst.wj(),a=0===this.Wst.Ff;if((o||!a)&&!(r&&a&&this.KB().Kz()||(i-=this.bst())<0)){this.Hit(i,t),this.zit(i,t,s);for(let t=0,s=this.tit.length;t<s;t++)this.tit[t].hf(i,e,h,n);this.Jit(i,t),0!==this.iit&&(this.zst||(this.zst=this.Hst.qD()),this.zst)&&this.zst.gN()}}Mst(){const s=this.tit.length;for(let t=0;t<s;t++)this.tit[t].Mst()}Hit(t,s){if(s&&this.dR&&!this.qst){const i=this.oit();if(i.Ntt()){if(t<0)return}else if(t>this.Rit())return;for(const e of this.tit)e.$K();this.qst=!0}}Jit(t,s){if(s&&this.dR&&!this.$st){const i=this.oit();if(i.Ntt()){if(t>=this.Rit()){for(const e of this.tit)e.hf(this.Rit(),!1,!0);this.$st=!0}}else if(t<=0){for(const h of this.tit)h.hf(0,!1,!0);this.$st=!0}}}zit(t,s,i){if(!i&&s&&Nr.CX.Timeline){const e=this.oit(),h=this.Yst.CZ(),r=this.Yst.IP(),n=h?h.IP():e.YW();if(t<=r||n<=t)if(this.Yst=this.jst.qit(t,this.Wst),e.Ntt())h&&this.Uit(this.Yst);else{const o=this.Yst.CZ();o&&this.Uit(o)}}}Vit(t){const s=this.jst.$it(t,this.Wst);return s||this.jst.qit(t,this.Wst)}Uit(t){if(Nr.CX.Timeline){const s=this.oit(),i=s.Gtt();Nr.CX.Timeline._X.PushTriggerTimeline(s),Nr.CX.Timeline._X.PushTriggerKeyframe(t),i.N4(Nr.CX.Timeline._X.OnAnyKeyframeReached),i.N4(Nr.CX.Timeline._X.Uit),Nr.CX.Timeline._X.PopTriggerTimeline(s),Nr.CX.Timeline._X.PopTriggerKeyframe(t)}}Xit(){const t=this.Wst.Qst(),s=t.Yit();return s}Kit(){const t=this.Wst.rit(),s=t.Zit(),i=Nr.nit.Px(this,s);return this.tit.push(i),i}Qit(t){const s=this.Wst.Qst();s.tet(t)}iet(t){for(const s of this.tit)s.iet(t)}eet(){for(const t of this.tit)t.eet()}het(){if(this.ait(),this.lit()||!this.Ctt())for(const t of this.tit)t.het()}ret(){if(this.ait(),this.lit()||!this.Ctt()){let t=!1;for(const s of this.tit){const i=s.ret();!t&&i&&(t=!0)}if(t){const e=this.Xit();e.$W(this.oit().IP()),e.c8("noease"),e.Pit(!0),e.Wtt("")}}}sK(){isNaN(this.Xst)||this.net(this.Xst),this.Xst=NaN}Lq(){const t=this.f8(),s=t?t.u4():this.uit();return{propertyTracksJson:this.oet(),lastKeyframeDataItemJson:this.aet(),initialStateOfNestedSet:this.qst,endStateOfNestedSet:this.$st,instanceUid:s,cleared:this.Jst}}Bq(t){if(t){this.let(t.propertyTracksJson),this.uet(t.lastKeyframeDataItemJson),this.Xst=t.instanceUid,this.qst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.qst=t.initialStateOfNestedSet),this.$st=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.$st=t.endStateOfNestedSet),this.Jst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.tit)0===this.iit&&1===s.jit()&&(this.iit=1),0===this.rK&&1===s.XK()&&(this.rK=1);this.eit=0,this.tit.some(t=>t.gst())&&(this.eit=1)}}aet(){const t=this.Wst.Qst();return t.cet(this.Yst)}oet(){return this.tit.map(t=>t.Lq())}let(t){t.forEach((t,s)=>{const i=this.tit[s];i.Bq(t)})}net(t){if(Nr.ye(t)){const s=this.dO().VD(t);if(s){const i=this.oit();i.Ist(this.Wst.g8(),s,this.dit())}}}uet(t){const s=this.Wst.Qst();this.Yst=s.fet(t)}}}{const Wr=self.Ns;Wr.nit=class extends Wr.Sr{constructor(t,s){super(),this.det=t,this.pet=s,this.met=s.rit(),this.iit=0,this.rK=0,this.eit=0,this.yet=this._tt(),this.wet=this.pet.Met().bet(),this.vet=null,this.xet=null}static Px(t,s){return Wr.Mr(Wr.nit,t,s)}vr(){this.det=null,this.yet&&(this.yet.vr(),this.yet=null),this.wet=null,this.pet=null,this.met=null}jit(){return this.iit}XK(){return this.rK}gst(){return this.eit}Get(){return!!this.xet}Tet(t){this.xet=t}_et(){return this.xet}Iet(){return this.det}Cet(){return this.pet}rit(){return this.met}oit(){return this.det.oit()}dO(){return this.det.dO()}f8(){return this.det.f8()}_tt(){if(!this.yet){let t=this.pet.yit(),s;switch(t){case"behavior":s=new Wr.nit.Ret(this);break;case"effect":s=new Wr.nit.Aet(this),this.rK=1;break;case"instance-variable":s=new Wr.nit.Eet(this);break;case"plugin":s=new Wr.nit.Pet(this),this.rK=1;break;case"world-instance":s=new Wr.nit.Fet(this),this.rK=1,this.iit=1;break;case"value":s=new Wr.nit.ket(this);break;case"audio":s=new Wr.nit.Det(this)}this.yet=s}return this.yet}yit(){return this.pet.yit()}Oet(t){this.pet.Oet(t)}Let(){return this.pet.Bet()}Net(t){this.pet.Wet(t)}y8(){return this._tt().jet()}Pst(){return this.pet.Vet()}Uet(t){this.pet.Het(t)}zet(){return this.pet.DG()}Jet(t){this.pet.SetType(t)}qet(){return this.rit().$et(this.pet).DG()}Xet(){return this.pet.Xet()}Yet(t){this.pet.Yet(t)}Ket(){return this.pet.Ket()}Zet(t){this.pet.Zet(t)}Eit(){return this.pet.Eit()}Pit(t){this.pet.Pit(t)}Ptt(){return this.pet.Ptt()}Ftt(t){this.pet.Ftt(t)}OZ(){return this.pet.OZ()}ktt(t){this.pet.ktt(t)}c8(t){for(const s of this.Qet())s.c8(t)}tht(){return this.pet.tht()}Qet(){return this.wet||(this.wet=this.pet.Met().bet()),this.wet}IZ(){return this.pet.Met().IZ()}sht(t){return this.met.sht(t,this.pet)}iht(t){return this.met.iht(t,this.pet)}eht(t){let s=this.met.sht(t,this.pet),i;return i=s?this.met.hht(t,this.pet):(s=this.met.iht(t,this.pet),this.met.rht(t,this.pet)),{start:s,end:i}}*nht(){for(const t of this.Qet())yield t.UZ()}*oht(){for(const t of this.Qet())yield t.IP()}Gst(){this._tt().Gst()}hZ(){this._tt().hZ()}aht(){return this._tt().aht()}ost(){this._tt().ost()}$K(t){this._tt().$K(),this.vet=this.lht(t),this.mst()}pst(t){this._tt().pst(),this.vet=this.lht(t)}mst(){const t=this.Iet();if(this.eit=0,t.Ctt()){const s=this.oit(),i=t.f8(),e=this._tt(),h=this.Pst(),r=e.uht();if(r){const n=s.Ttt(i,e,h,this);n&&n.length&&(this.eit=1)}else this.eit=0}}lht(t){const s=this.oit(),i=this.met.sht(t,this.pet);return i||(s.Ntt()?this.met.iht(t,this.pet):this.met.rht(t,this.pet))}wst(){this.yet.wst()}hf(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.met.iht(t,this.pet);else{if(this.vet){const o=this.oit(),a=this.vet.CZ(),l=this.vet.IP(),u=a?a.IP():o.YW();(t<=l||u<=t)&&(this.vet=this.met.iht(t,this.pet),n=!0)}else this.vet=this.met.iht(t,this.pet),n=!0;h=this.vet}h&&(r=h.CZ()),this.yet.hf(t,h,r,s,i,e,n)}cht(t){if(this.vet){const e=this.oit(),h=this.vet.CZ(),r=this.vet.IP(),n=h?h.IP():e.YW();(t<=r||n<=t)&&(this.vet=this.met.iht(t,this.pet))}else this.vet=this.met.iht(t,this.pet);const s=this.vet,i=s.CZ();return this.yet.cht(t,s,i)}fht(t,s,i){return this.yet.cht(t,s,i)}Mst(){this.yet.Mst()}static dht(t,s){const i=s.Cet(),e=s.met;return e.iht(t,i)}static pht(t,s){const i=s.Cet(),e=s.met;return e.rht(t,i)}mht(){const t=this.pet.Met(),s=t.ght();return this.vet=null,s}iet(t){this.vet=null;const s=this.pet.Met();s.yht(t)}eet(){this._tt().eet()}het(){const t=this._tt().het();if(t){const s=this.met.$et(this.pet),i=this._tt().aht();s.Sht(i)}}ret(){const t=this._tt().ret();return t&&this.wht(),this._tt().bht(),t}wht(){const t=this.oit().IP(),s=this._tt(),i=Wr.nit.dht(t,this),e=this.mht();e.SetType(i.DG()),e.$W(t),e.c8(i.Mht()),e.Pit(!0),e.vht(s.xht()),e.Sht(s.aht())}Lq(){return{sourceAdapterJson:this._tt().Lq()}}Bq(t){t&&this._tt().Bq(t.sourceAdapterJson)}}}{const jr=self.Ns,Vr=jr.nit;Vr.Fet=class{constructor(t){this.Ght=t,this.Tht=null,this._ht()}vr(){this.Tht&&(this.Tht.vr(),this.Tht=null),this.Ght=null}uht(){return this.Tht.uht()}S8(){return this.Ght}Gst(){this.Tht&&this.Tht.Gst()}hZ(){this.Tht&&this.Tht.hZ()}_ht(){return this.Tht||(this.Tht=this.Iht()),this.Tht}Sit(){}qF(){return this.Sit()}Cht(){}ost(){this._ht().ost()}$K(){this._ht().$K()}pst(){this._ht().pst()}wst(){this.Tht.Rht()}hf(t,s,i,e,h,r,n){let o=this.Ght.qet(),a;switch(o){case"numeric":a=Vr.Aht.hf(t,s,i,this.Ght);break;case"angle":a=Vr.Eht.hf(t,s,i,this.Ght);break;case"boolean":a=Vr.Pht.hf(t,s,i,this.Ght);break;case"color":a=Vr.Fht.hf(t,s,i,this.Ght);break;case"text":a=Vr.kht.hf(t,s,i,this.Ght)}this.Tht.Dht(t,a,s,i,e,h,r,n)}cht(t,s,i){switch(this.Ght.qet()){case"numeric":return Vr.Aht.hf(t,s,i,this.Ght);case"angle":return Vr.Eht.hf(t,s,i,this.Ght);case"boolean":return Vr.Pht.hf(t,s,i,this.Ght);case"color":return Vr.Fht.hf(t,s,i,this.Ght);case"text":return Vr.kht.hf(t,s,i,this.Ght)}}Mst(){this.Tht.Oht()}eet(){this._ht().Lht()}bht(){this._ht().bht()}aht(){return this._ht().aht()}het(){return this._ht().het()}ret(){return this._ht().ret()}xht(){const t=this.Ght,s=t.Iet(),i=s.oit().IP(),e=Vr.dht(i,t),h=e.CZ(),r=t.qet();switch(r){case"numeric":return Vr.Aht.hf(i,e,h,t);case"angle":return Vr.Eht.hf(i,e,h,t);case"boolean":return Vr.Pht.hf(i,e,h,t);case"color":return Vr.Fht.hf(i,e,h,t);case"text":return Vr.kht.hf(i,e,h,t)}}Iht(){const t=this.Ght,s=t.tht()?t.qet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Vr.Nht.Bht(this);case"numeric":case"number":case"angle":return new("combo"===this.Ght.zet()?Vr.Nht.Bht:Vr.Nht.Wht)(this);case"color":case"offsetColor":return new Vr.Nht.jht(this);default:return new Vr.Nht.Wht(this)}}Lq(){return{propertyAdapterJson:this._ht().Lq()}}Bq(t){t&&this._ht().Bq(t.propertyAdapterJson)}}}{const Ur=self.Ns;class Hr extends Ur.nit.Fet{constructor(t){super(t),this.Vht=NaN}Sit(){return this.Ght.Cet().Bet()[0]}qF(){return this.Vht||super.qF()}Cht(){return this.Ght.Iet().f8()}vit(t){const s=this.Ght.Cet().Bet()[0];s!==t&&(this.Vht=t)}hf(t,s,i,e,h,r,n){this._ht().Uht(s.jet())&&super.hf(t,s,i,e,h,r,n)}cht(t,s,i){if(this._ht().Uht(s.jet()))return super.cht(t,s,i)}Lq(){return Object.assign(super.Lq(),{index:this.Vht})}Bq(t){t&&(super.Bq(t),this.Vht=t.index)}}Ur.nit.Eet=Hr}{const zr=self.Ns;class Jr extends zr.nit.Fet{constructor(t){super(t),this.NH=NaN}Sit(){const t=this.Ght.Cet();return t.Bet()[1]}Cht(){const t=this.Ght.Cet(),s=this.Ght.Iet(),i=this.NH||t.Bet()[0],e=s.f8(),h=e.Hht(i),r=e.zht()[h];return r.B6()}X6(t){const s=this.Ght.Cet(),i=s.Bet()[2];return t.Jht(i)}Git(t){const s=this.Ght.Cet();s.Bet()[0]!==t&&(this.NH=t)}hf(t,s,i,e,h,r,n){const o=this.Ght.Iet(),a=o.f8();this.X6(a.KB())&&super.hf(t,s,i,e,h,r,n)}cht(t,s,i){const e=this.Ght.Iet(),h=e.f8();if(this.X6(h.KB()))return super.cht(t,s,i)}Lq(){return Object.assign(super.Lq(),{sid:this.NH})}Bq(t){t&&(super.Bq(t),this.NH=t.sid)}}zr.nit.Ret=Jr}{const qr=self.Ns;class $r extends qr.nit.Fet{constructor(t){super(t)}Sit(){return this.Ght.Cet().Bet()[1]}Cht(){const t=this.Ght,s=t.Iet(),i=s.qD(),e=i.pN(),h=e.g5(),r=this.Tit(h),n=r.qF();return e.sW(n)?e.qht(n):null}Tit(t){const s=this.Ght,i=s.Cet().Bet()[0];return t.$ht(i)}hf(t,s,i,e,h,r,n){this.Xht()&&super.hf(t,s,i,e,h,r,n)}cht(t,s,i){if(this.Xht())return super.cht(t,s,i)}Xht(){const t=this.Ght,s=t.Iet(),i=s.qD(),e=i.pN(),h=e.g5(),r=this.Tit(h);if(r){const n=r.qF();return e.sW(n)}}}qr.nit.Aet=$r}{const Xr=self.Ns;class Yr extends Xr.nit.Fet{constructor(t){super(t)}Sit(){return this.Ght.Cet().Bet()[0]}Cht(){return this.Ght.Iet().f8().B6()}hf(t,s,i,e,h,r,n){const o=this.Ght.Iet(),a=o.KB().qL(),l=o.f8().KB().qL();a===l&&super.hf(t,s,i,e,h,r,n)}cht(t,s,i){const e=this.Ght.Iet(),h=e.KB().qL(),r=e.f8().KB().qL();if(h===r)return super.cht(t,s,i)}Yht(){const t=this.Ght.Iet(),s=t.KB().qL();if(Xr.CX.Kht&&s instanceof Xr.CX.Kht&&("initial-frame"===this.Ght.Pst()||"initial-animation"===this.Ght.Pst()))switch(this.Ght.OZ()){case"relative":case"absolute":return null}}}Xr.nit.Pet=Yr}{const Kr=self.Ns;class Zr extends Kr.nit.Fet{constructor(t){super(t),this.Zht=0,this.Qht=!1}uht(){return!1}$K(){let t=this.Ght.rit(),s=this.Ght.Cet();s=t.$et(s),this.Zht=s.UZ()}pst(){}jet(){return this.Qht||this.Ght.hf(0),this.Zht}hf(t,s,i,e,h,r,n){this.Zht=Kr.nit.Aht.hf(t,s,i,this.Ght),this.Qht=!0}eet(){}bht(){}aht(){return this.Zht}het(){return!1}ret(){return!1}Lq(){return{value:this.Zht,init:this.Qht}}Bq(t){t&&(this.Zht=t.value,this.Qht=!t.hasOwnProperty("init")||t.init)}}Kr.nit.ket=Zr}{const Qr=self.Ns;class tn extends Qr.nit.Fet{constructor(t){super(t),this.trt=!1,this.srt=null,this.irt=null,this.ert=null,this.MZ=this.Ght.oit(),this.det=this.Ght.Iet(),this.hrt=this.Ght.Let(),this.rrt=this.hrt[0],this.nrt=this.hrt[1],this.hrt[3]?this.ort=this.hrt[3]:this.ort=Math.random().toString(36).slice(2),this.art=NaN,this.lrt=NaN,this.urt=NaN,this.crt=null,this.frt()}vr(){super.vr(),this.srt=null,this.irt=null,this.ert=null,this.MZ=null,this.det=null,this.hrt=null,this.rrt=null,this.crt=null}frt(){if(self.Ns.CX.Audio){const t=this.Ght.dO(),s=t.drt(self.Ns.CX.Audio);s&&(this.srt=s.HL().B6()),this.irt=self.Ns.CX.Audio.prt,this.ert=self.Ns.CX.Audio.mrt}}grt(){if(!this.crt){const t=this.Ght.Iet(),s=t.S8("audioSource");s&&(this.crt=s._tt())}}yrt(){const t=this.Ght.Iet(),s=t.S8("volume");return(s?s._tt():this).lrt}Gst(){super.Gst(),this.trt=!1,this.srt&&(this.ert&&(this.art=this.ert.Srt.call(this.srt,this.ort),this.lrt=this.ert.wrt.call(this.srt,this.ort)),this.irt)&&this.irt.zW.call(this.srt,this.ort)}brt(){return this.ort}Mrt(){return this.urt}vrt(t){this.urt=t}$K(){super.$K(),this.art=NaN,this.trt=!1}pst(){super.pst();const t=this.Ght.oit(),s=t.IP();switch(this.art=s-this.nrt,this.Ght.Pst()){case"audioSource":break;case"volume":this.lrt=this.Ght.cht(s)}this.trt=!1}hf(t,s,i,e,h,r,n){if(this.srt)switch(this.Ght.Pst()){case"audioSource":{if(!this.MZ.Ntt())return;if(e)return void(this.irt&&this.irt.zW.call(this.srt,this.ort));if(t<this.nrt)return void(this.trt=!1);const o=this.ert.xrt.call(this.srt,this.ort),a=this.MZ.i8();if(a!==o&&this.irt.s8.call(this.srt,this.ort,a),this.trt)return;if(!this.Ght.oit().IsPlaying())return;if(this.trt=!0,isNaN(this.art)){const l=self.performance.now(),u=t-this.nrt,c=this.srt.Grt();if("suspended"===c)return void(this.trt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.irt){let t=this.Mrt();isNaN(t)?(this.vrt(0),t=0):this.vrt(t),this.irt.Trt.call(this.srt,this.rrt,t,this.ort,p)}}else{const m=this.art,g=(this.art=NaN,this.yrt()),y=(this.lrt=NaN,this.srt.Grt());if("suspended"===y)return void(this.trt=!1);this.irt&&(this.vrt(g),this.irt.Trt.call(this.srt,this.rrt,g,this.ort,m))}break}case"volume":this.grt(),super.hf(t,s,i,e,h,r,n)}}cht(t,s,i){if(this.srt)switch(this.Ght.Pst()){case"audioSource":return;case"volume":return this.grt(),super.cht(t,s,i)}}_rt(t,s){return this.crt?this.crt.Mrt():0}Irt(t,s,i,e){this.crt&&this.crt.vrt(this._rt()+s),this.irt&&this.crt&&this.irt.vrt.call(this.srt,this.crt.brt(),this.crt.Mrt())}Crt(t,s,i){this.crt&&this.crt.vrt(s),this.irt&&this.crt&&this.irt.vrt.call(this.srt,this.crt.brt(),this.crt.Mrt())}Rrt(){return!0}Lq(){return{audioPlaybackStarted:this.trt,audioTag:this.ort,pauseTime:this.art,pauseVolume:this.lrt,volume:this.urt}}Bq(t){t&&(this.trt=t.audioPlaybackStarted,this.ort=t.audioTag,this.art=t.pauseTime,this.lrt=t.pauseVolume,this.urt=t.volume,this.frt())}}Qr.nit.Det=tn}{const sn=self.Ns;sn.nit.Nht=class{constructor(t){this.yet=t,this.Ght=t.S8(),this.zst=this.Ght.Iet().qD(),this.Art=this.Ght.Pst(),this.Ert=!1,this.Prt=null,this.Frt=null}vr(){this.yet=null,this.Ght=null,this.zst=null,this.Prt=null,this.Frt=null}uht(){return!1}Gst(){}hZ(){this.zst=null,this.Prt=null,this.Frt=null}_tt(){return this.yet}S8(){return this.Ght}qD(){return this.zst||(this.zst=this.Ght.Iet().qD()),this.zst}krt(t){this.Ert=!!t}Drt(){return this.Ert}ost(){}$K(){}pst(){}Lht(){this.Prt=this.aht()}bht(){this.Prt=null}aht(){}het(){}ret(){}Uht(t){const s=typeof this.Ort(),i=typeof t;return s==i}Rht(){}Dht(t,s,i,e,h,r,n,o){}Oht(){}Lrt(){const t=this.Brt(()=>{const t=this.Ght.Cet(),s=this.Ght.rit();return s.$et(t)},()=>{const t=this.Ght.Cet(),s=this.Ght.rit();return s.Nrt(t)});return t.Wrt()}jrt(){const t=this.Ght.oit(),e=t.IP()-this.Ght.Iet().bst(),s=this.Brt(()=>{const t=this.Ght.Cet(),s=this.Ght.rit();return s.iht(e,t)},()=>{const t=this.Ght.Cet(),s=this.Ght.rit(),i=s.rht(e,t);return i||s.Nrt(t)});return s.Wrt()}Brt(t,s){const i=this.Ght.oit();return(i.Ntt()?t:s)()}Vrt(t,s){const i=this.Ght.OZ();return("relative"===i?t:s)()}Urt(t,s){return(this.Drt()?(this.krt(!1),t):s)()}Hrt(t){}zrt(){return this.yet.qF()}Jrt(){return this.Frt||(this.Frt=this.yet.Cht()),this.Frt}qrt(t,s,i,e,h,r){const n=this.Ght.yit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}Lq(){return{firstAbsoluteUpdate:this.Ert,saveState:this.Prt}}Bq(t){t&&(this.Ert=t.firstAbsoluteUpdate,this.Prt=t.saveState)}$rt(t,s=!1){const i=[];for(const e of t){const h=e.Iet().bst();for(const r of e.Qet())(s&&0===r.IP()||!s)&&i.push({time:h+r.IP(),value:r.Wrt()})}return i.sort((t,s)=>t.time-s.time)}Xrt(t,s,i){return this.Yrt(s,i)}Yrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Ns,hn=new Map,rn=[0,0,0];class nn extends en.nit.Nht{constructor(t){super(t)}ost(){}$K(){}pst(){}aht(){const t=this.Ght.yit(),s=this.Jrt(),i=this.zrt();switch(t){case"behavior":return this.Krt(s.Zrt(i));case"effect":return this.Krt(s[i]);case"plugin":return this.Krt(s.Zrt(i));case"world-instance":return this.Krt(this.Ort())}}het(){const t=this.Lrt();return!this.Qrt(t,this.Ort())}ret(){return!en.Me(this.Prt)&&!this.Qrt(this.Prt,this.Ort())}Qrt(t,s){return t=this.tnt(t),s=this.tnt(s),t.Ca(s)}Lrt(){const t=super.Lrt();return this.tnt(t)}jrt(){const t=super.jrt();return this.tnt(t)}Hrt(t){}Krt(t){return(en.hh(t,en.ra)?t.toArray():t).slice(0,3)}tnt(t){return en.hh(t,en.ra)?t:new en.ra(t[0],t[1],t[2],1)}Uht(t){return!0}uht(){return!0}Rht(){const t=this.Ght.oit(),s=this.Ght.f8(),i=this.Ght._tt(),e=t.Ttt(s,i,this.Art,this.Ght);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.Ght.yit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Art)||n.set(this.Art,{snt:!1,color:new en.ra(0,0,0,1)})}}int(t,s,i){const e=hn.get(t).get(s).get(i);return e.snt=!0,e.color}Dht(t,s,i,e,h,r,n,o){const a=this.Ght.oit(),l=this.Ght.Iet(),u=this.Ght.f8(),c=this.Ght._tt(),f=this.Ght.yit(),d=this.Art,p=a.Ttt(u,c,d,this.Ght);if(p&&1<p.length){const m=this.$rt(p,!0),g=this.Xrt(a,a.IP(),m);if(g){const y=l.bst(),S=g.time-y;if(0==S)this.int(u,f,this.Art).fa(s[0],s[1],s[2]);else if(!(S<0)){const w=s[0],b=s[1],M=s[2],v=this.Ght.hf(S,!1,!0),x=en.ra.nl(w,v[0]),G=en.ra.nl(b,v[1]),T=en.ra.nl(M,v[2]);this.int(u,f,this.Art).fa(x,G,T)}}}else this.ent(s[0],s[1],s[2])}Oht(){const t=this.Ght.f8();if(hn.has(t)){const s=hn.get(t),i=this.Ght.yit();if(s.has(i)){const e=s.get(i);if(e.has(this.Art)){const h=e.get(this.Art),r=h.snt,n=h.color;r&&this.ent(n.ba(),n.Ma(),n.xa()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Ort(){const t=this.Ght.yit(),s=this.Jrt(),i=this.zrt();switch(t){case"behavior":return this.tnt(s.Zrt(i));case"effect":return s[i].clone();case"plugin":return this.tnt(s.Zrt(i));case"world-instance":return this.qD().AN().clone()}}ent(t,s,i){const e=this.Ght.yit(),h=this.Jrt(),r=this.zrt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.hnt(r,rn);break;case"effect":h[r].ca(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.hnt(r,rn);break;case"world-instance":this.qD().rnt(t,s,i)}}Lq(){}Bq(t){}}en.nit.Nht.jht=nn}{const on=self.Ns,an=on.nit;class ln extends on.nit.Nht{constructor(t){super(t)}ost(){}$K(){}pst(){}aht(){return this.Ort()}het(){const t=this.Lrt();return t!==this.aht()}ret(){return!on.Me(this.Prt)&&this.Prt!==this.aht()}uht(){return!1}Dht(t,s,i,e,h,r,n,o){const a=this.Ght,l=a.Iet(),u=a.yit(),c=a.oit(),f=l.f8(),d=a._tt(),p=this.Art,m=c.Ttt(f,d,p,a);if(m&&1<m.length){const y=this.$rt(m),S=t+l.bst(),w=this.Xrt(c,S,y);w&&(s=w.value)}const g=a.qet();switch(g){case"numeric":if(an.Aht.nnt(this.zrt(),this.Jrt(),s,u))break;return;case"angle":if(an.Eht.nnt(this.zrt(),this.Jrt(),s,u))break;return;case"boolean":if(an.Pht.nnt(this.zrt(),this.Jrt(),s,u))break;return;case"color":if(an.Fht.nnt(this.zrt(),this.Jrt(),s,u))break;return;case"text":if(!an.kht.nnt(this.zrt(),this.Jrt(),s,u))return}this.ent(s)}Ort(){const t=this.Ght.yit(),s=this.Jrt(),i=this.zrt();switch(t){case"behavior":return s.Zrt(i);case"effect":return s[i];case"instance-variable":return s.ont(i);case"plugin":return s.Zrt(i)}}ent(t){const s=this.Ght.yit(),i=this.Jrt(),e=this.zrt();switch(s){case"behavior":i.hnt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.ant(e,t);break;case"plugin":i.hnt(e,t)}}}on.nit.Nht.Bht=ln}{const un=self.Ns,cn=(un.nit.Nht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{lnt:s,unt:i,cnt:e,round:h,fnt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.Ght.OZ()?t.dnt(s,i.oit().Ott()):t.dnt(s)},(t,s)=>t.DM(s),t=>t.kM(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.Ght.OZ()?t.pnt(s,i.oit().Ott()):t.pnt(s)},(t,s)=>t.BM(s),t=>t.LM(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Ght.OZ(),l=1===i.mnt.DG();if((h||l)&&s.e6()&&s.u6()){if(isNaN(i.gnt)){let e=[],t=s.HN();for(;t;)e.push(t),t=t.HN();e.reverse();let a=(t,s)=>s.oit().Fst(t.f8()),h=(t,s)=>{const i=a(t,s);if(i)return i.Dit();const e=t.f8().B6();return e.Oit()?e.Dit():t.Snt().ynt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.S8(i);if(!r)return e;const n=r.Cet().Met();if(!n)return e;const o=n.Nrt();return o?o.jet():e},n;if(l){let t=e[e.length-1];n=t.Fm()}else{let s=e[0],t=s.Snt().ynt(),i=s.Snt().wnt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Snt().wnt();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.gnt=0===n?Number.EPSILON:n}e||s.fg(t/i.gnt,!0)}else s.fg(t)}},(t,s)=>t.Wm(s),t=>t.Fm(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Ght.OZ(),a=1===i.mnt.DG();if((h||a)&&s.e6()&&s.f6()){if(isNaN(i.gnt)){let e=[],t=s.HN();for(;t;)e.push(t),t=t.HN();e.reverse();let h=(t,s)=>{e=t;const i=s.oit().Fst(e.f8());var e;if(i)return i.Bit();const h=t.f8().B6();return h.Oit()?h.Bit():t.Snt().bnt()},r=(t,s,i,e=0)=>{const h=s.oit().Fst(t.f8());if(!h)return e;const r=h.S8(i);if(!r)return e;const n=r.Cet().Met();if(!n)return e;const o=n.Nrt();return o?o.jet():e},n;if(a){let t=e[e.length-1];n=t.Um()}else{let s=e[0],t=s.Snt().bnt(),i=s.Snt().Mnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Snt().Mnt();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.gnt=0===n?Number.EPSILON:n}e||s.vnt(t/i.gnt,!0)}else s.vnt(t)}},(t,s)=>t.km(s),t=>t.Um(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.xnt(s)},(t,s)=>t.v5(s),t=>t.GetAngle(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.Gnt||1,n=(s/=r,t.ZA()),o=n+s;if(0===e.Tnt)1<o?e.Tnt+=o-1:o<0&&(e.Tnt+=o),t._nt(s);else{const a=t.ZA()+s;0<s&&0<e.Tnt?1<a&&(e.Tnt+=a-1):0<s&&e.Tnt<0?(e.Tnt+=s,0<e.Tnt&&(t._nt(e.Tnt),e.Tnt=0)):s<0&&0<e.Tnt?(e.Tnt+=s,e.Tnt<0&&(t._nt(e.Tnt),e.Tnt=0)):s<0&&e.Tnt<0&&a<0&&(e.Tnt+=a)}},(t,s)=>{t.tE(s)},t=>t.ZA(),!1,!0,(r,h,n)=>{switch(r.Tnt=0,r.Ght.OZ()){case"relative":{r.Ght.rit();let t=r.Ght.Cet(),s=t.Met(),i=s.bet(),e=r.qD().ZA(),h=e;for(const o of i){const a=o.IP(),l=r.Ght.cht(a);h=e+l,h=un.Cr(h,0,1)}r.Int=e-h,r.Int=Math.round(100*(r.Int+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].IP(),c=r.Ght.cht(u);h-=c,h=un.Cr(h,0,1)}r.Cnt=h,r.Cnt=Math.round(100*(r.Cnt+Number.EPSILON))/100;break}}const t="relative"===r.Ght.OZ(),s=1===r.mnt.DG();if((t||s)&&h.e6()&&h.S6()){let s=[],t=h.HN();for(;t;)s.push(t),t=t.HN();s.reverse();let i=(t,s,i)=>{const e=s.oit().Fst(t.f8());if(!e)return 0;const h=e.S8(i);if(!h)return 0;const r=h.Cet().Met();if(!r)return 0;const n=r.Nrt();return n?n.jet():0},e=s[0].Snt().Rnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.Gnt=0===e?1:e}},i=>{switch(i.Ght.OZ()){case"relative":{i.Tnt=0;let t=i.qD(),s=t.ZA();s=Math.round(100*(s+Number.EPSILON))/100,i.Ght.oit().Ntt()?(t.tE(s+i.Int),i.xT=0):(t.tE(s-i.Cnt),i.xT=i._tt().xht());break}}}),fn("offsetOriginX",(t,s)=>t.Ant(s),(t,s)=>t.Ent(s),t=>t.TW(),!1),fn("offsetOriginY",(t,s)=>t.Pnt(s),(t,s)=>t.Fnt(s),t=>t.IW(),!1),fn("offsetZElevation",(t,s)=>t.knt(s),(t,s)=>t.WM(s),t=>t.NM(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Fm()<0?-1:1;if("relative"===e.Ght.OZ()&&t.e6()&&t.u6()){const r=i.Dit()*h*s;isNaN(e.gnt)&&cn.get("offsetWidth").lnt(t,1,i,e,!0),t.fg(r/e.gnt,!0)}else t.fg(i.Dit()*h*s)}},(t,s,i)=>{t.Wm(i.Dit()*s)},(e,h)=>{const r=e.Fm()<0?-1:1;if(e.u6()){let t=e.HN(),s=h.oit().Fst(t.f8()),i=NaN;if(s)i=t.Fm()/s.Dit();else{const n=t.f8().B6();i=n.Oit()?t.Fm()/n.Dit():1}return e.Fm()*r/(h.Dit()*i)}return e.Fm()*r/h.Dit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Um()<0?-1:1;if("relative"===e.Ght.OZ()&&t.e6()&&t.f6()){const r=i.Bit()*h*s;isNaN(e.gnt)&&cn.get("offsetHeight").lnt(t,1,i,e,!0),t.vnt(r/e.gnt,!0)}else t.vnt(i.Bit()*h*s)}},(t,s,i)=>{t.km(i.Bit()*s)},(e,h)=>{const r=e.Um()<0?-1:1;if(e.f6()){let t=e.HN(),s=h.oit().Fst(t.f8()),i=NaN;if(s)i=t.Um()/s.Bit();else{const n=t.f8().B6();i=n.Oit()?t.Um()/n.Bit():1}return e.Um()*r/(h.Bit()*i)}return e.Um()*r/h.Bit()},!1);class dn extends un.nit.Nht{constructor(t){super(t),this.xT=0,this.Tnt=0,this.Int=0,this.Cnt=0,this.Gnt=NaN,this.gnt=NaN,this.Dnt=void 0,this.Ont=void 0,this.Lnt=null,this.Bnt=null,this.Nnt=null,this.Wnt=null,this.jnt=null,this.Vnt=null,this.Unt=null,this.Hnt=null,this.znt=!1,this.Jnt=!1,un.hh(this.Ght.oit(),un.qnt)?this.mnt=new un.nit.Nht.$nt(this):this.mnt=new un.nit.Nht.Xnt(this);const s=this.Ght.Pst();switch(this.Ght.yit()){case"world-instance":{const i=cn.get(s);this.Lnt=i.cnt,this.Bnt=i.lnt,this.Nnt=i.unt,this.znt=i.round,this.Jnt=i.fnt,this.jnt=i.init,this.Wnt=i.reset;break}case"audio":this.Vnt=t._rt,this.Unt=t.Irt,this.Hnt=t.Crt,this.znt=!!t.Rrt(),this.Jnt=!1}}vr(){this.mnt=null,this.Lnt=null,this.Bnt=null,this.Nnt=null,this.Wnt=null,this.jnt=null,this.Vnt=null,this.Unt=null,this.Hnt=null,super.vr()}uht(){return this.mnt.uht()}Ynt(){return this.xT}Knt(t){this.xT=t}ost(){this.Wnt&&this.Wnt(this)}$K(){const t=this.mnt.$K();if("number"==typeof t&&(this.xT=t),this.jnt){const s=this.qD(),i=this.Ght.Iet();this.jnt(this,s,i)}}pst(){const t=this.mnt.pst();"number"==typeof t&&(this.xT=t)}aht(){return this.Ort()}het(){const t=this.Lrt();return t!==this.aht()}ret(){return!un.Me(this.Prt)&&this.Prt!==this.aht()}Rht(){this.mnt.Rht()}Dht(t,s,i,e,h,r,n,o){return this.mnt.Dht(t,s,i,e,h,r,n,o)}Oht(){this.mnt.Oht()}Ort(){const t=this.Jrt(),s=this.zrt(),i=this.qD(),e=this.Ght.Iet(),h=this.Ght.yit();switch(h){case"behavior":return t.Zrt(s);case"effect":return t[s];case"instance-variable":return t.ont(s);case"plugin":return t.Zrt(s);case"world-instance":return this.Lnt(i,e);case"audio":return this.Vnt.call(this._tt(),i,e)}}ent(t,s,i){const e=this.Jrt(),h=this.zrt(),r=this.qD(),n=this.Ght.Iet(),o=this.Ght.yit();switch(o){case"behavior":e.Znt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Qnt(h,t);break;case"plugin":e.Znt(h,t,this._tt().Yht());break;case"world-instance":this.Bnt(r,t,n,this);break;case"audio":this.Unt.call(this._tt(),r,t,n,this)}}tot(t,s,i){let e=this.Ght.Ptt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Ght.oit(),u=l.IP(),c=this.Ght.sht(u);if(!c)return}const h=this.Jrt(),r=this.zrt(),n=this.qD(),o=this.Ght.Iet(),a=this.Ght.yit();switch(a){case"behavior":h.hnt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.ant(r,t);break;case"plugin":h.hnt(r,t,this._tt().Yht());break;case"world-instance":this.Nnt(n,t,o);break;case"audio":this.Hnt.call(this._tt(),n,t,o)}}}sot(t,s,i,e,h,r,n,o){this.mnt.sot(t,s,i,e,h,r,n,o)}iot(t,s,i,e,h){let r=(t="angle"===this.Ght.zet()?un.Er(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Ort(),l;switch(l=0===o?this.znt?Math.round(a):this.Jnt?"angle"===this.Ght.zet()?un.Ar(Math.round(un.Er(a))):Number(un.toFixed(a,2)):a:this.znt?Number(un.toFixed(a,o)):(this.Jnt,a),this.ent(l-a,s,i),this.Ght.Pst()){case"offsetWidth":case"offsetScaleX":{const u=this.qD(),c=u.Fm(),f=Number(un.toFixed(c,2));u.fg(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.qD(),p=d.Um(),m=Number(un.toFixed(p,2));d.vnt(m-p);break}}}Lq(){return Object.assign(super.Lq(),{v:this.xT,a:this.Tnt,fod:this.Int,bod:this.Cnt,of:this.Gnt,sf:this.gnt,armorf:this.Dnt,armandf:this.Ont})}Bq(t){t&&(super.Bq(t),this.xT=t.v,this.Tnt=t.a,this.Int=un.ye(t.fod)?t.fod:0,this.Cnt=un.ye(t.bod)?t.bod:0,this.Gnt=un.ye(t.of)?t.of:NaN,this.gnt=un.ye(t.sf)?t.sf:NaN,this.Dnt=un.ye(t.armorf)?t.armorf:void 0,this.Ont=un.ye(t.armandf)?t.armandf:void 0)}}un.nit.Nht.Wht=dn}{const pn=self.Ns;class mn{constructor(t){this.eot=!1,this.Zht=0,this.hot=!1,this.rot=!1,this.tit=t;for(let t=0,s=this.tit.length;t<s;t++)this.tit[t].Tet(this)}Est(){return this.tit}not(){this.eot=!0}oot(){return this.eot}vht(t){this.Zht=t}jet(){return this.Zht}aot(t){this.hot=t}lot(){return this.hot}Sst(t){this.rot=t}uot(){return this.rot}T0(){this.eot=!1,this.Zht=0,this.hot=!1,this.rot=!1}}class gn{constructor(t){this.cot=t}vr(){this.cot=null}DG(){return 0}$K(){const t=this.cot;return this.cot.S8(),t.Vrt(()=>t.Brt(()=>0,()=>t._tt().xht()),()=>{})}pst(){}uht(){this.cot;const t=this.cot.S8();switch(t.OZ()){case"relative":return!1;case"absolute":return!0}}Rht(){this.cot;const t=this.cot.S8(),s=t.Pst();switch(t.OZ()){case"relative":break;case"absolute":if(t.Get()){const i=t._et();i.T0()}else{const e=t.oit(),h=t.f8(),r=t._tt(),n=e.Ttt(h,r,s,t);n&&1<n.length&&new mn(n)}}}Dht(t,s,i,e,h,r,n,o){const a=this.cot,l=this.cot.S8();switch(l.OZ()){case"relative":{const u=a.Ynt();a.ent(s-u,i,e),r&&this.sot(t,i,e,h,u,s),a.Knt(s);break}case"absolute":{const c=l.oit(),f=l.Iet();if(l.f8(),l._tt(),l.Get()){const d=l._et(),p=d.Est(),m=a.$rt(p,!0),g=a.Xrt(c,c.IP(),m);if(g){const y=f.bst(),S=g.time-y;if(0==S)d.Sst(n),d.aot(o),d.not(),d.vht(d.jet()+s);else{if(S<0)return;const w=l.cht(S);d.Sst(n),d.aot(o),d.not(),d.vht(d.jet()+(s-w))}}}else a.tot(s,o,n);break}}}Oht(){const t=this.cot,s=this.cot.S8();switch(s.OZ()){case"relative":break;case"absolute":if(s.Get()){const i=s._et();i.oot()&&t.tot(i.jet(),i.lot(),i.uot())}}}sot(t,s,i,e,h,r){const n=this.cot;e||(s&&t===s.IP()?n.iot(s.UZ(),s,i):i&&t===i.IP()?n.iot(i.UZ(),s,i):r-h==0&&n.iot(s.UZ(),s,i))}}pn.nit.Nht.Xnt=gn}{const yn=self.Ns;class Sn{constructor(t){this.cot=t}vr(){this.cot=null}DG(){return 1}$K(){const t=this.cot;return t.krt(!0),this.Hrt(t.Lrt())}pst(){const t=this.cot;if(t.Lrt()!==t.jrt())return t.krt(!0),this.Hrt(t.jrt())}uht(){return!1}Rht(){}Dht(t,s,i,e,h,r,n,o){const a=this.cot,l=a.Ynt();switch(a.S8().OZ()){case"relative":a.ent(s-l,i,e),r&&this.sot(t,i,e,h,l,s,!1,n);break;case"absolute":a.Drt()?(a.krt(!1),a.ent(l,i,e)):0===t&&0===a.S8().oit().YW()?a.tot(s,!0,!1):(a.ent(s-l,i,e),r&&this.sot(t,i,e,h,l,s,this.dot(),n))}a.Knt(s)}Oht(){}Hrt(t){const s=this.cot;return t-s.aht()}dot(){let t=this.cot,s=t.qD().f8(),i=t.S8().dO(),e=i.Gtt(),h=0;for(const r of e.vK())0===r.DG()?r.IK(s)&&h++:1===r.DG()&&r.f8()===s&&h++;return h<=1}sot(t,s,i,e,h,r,n,o){const a=this.cot;e?s&&t===s.IP()?a.iot(s.UZ(),s,i,n,o):i&&t===i.IP()?a.iot(i.UZ(),s,i,n,o):i||a.iot(s.UZ(),s,i,n,o):s&&t===s.IP()?a.iot(s.UZ(),s,i,n,o):i&&t===i.IP()?a.iot(i.UZ(),s,i,n,o):r-h==0&&a.iot(s.UZ(),s,i,n,o)}}yn.nit.Nht.$nt=Sn}{const wn=self.Ns,bn=self.Pc;wn.nit.Aht=class{constructor(){}static nnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.ont(t);break;case"plugin":h=s.Zrt(t)}return h!==i}static hf(r,n,o,a){if(!o){let t=a.Cet(),s=a.rit();return(t=s.Nrt(t)).UZ()}let l=a.Ptt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.zet()?"discrete":l))return n.UZ();if("continuous"===l||"step"===l){const u=a.oit().Att();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.UZ(),f=o.UZ(),d=n.jZ("cubic-bezier"),p=o.jZ("cubic-bezier"),m=d&&d.pot()&&p&&p.mot();if(!m&&c===f)return c;let t=n.IP(),s=o.IP(),i=("step"===l&&0!==u&&(r=wn.Cr(r,t,s)),wn.normalize(r,t,s)),e=n.Mht(),h;if(m){const y=s-t;h=bn.qc(e)(y*i,0,1,y),h=bn.qc("cubicbezier")(h,c,c+d.JZ(),f+p.XZ(),f)}else h=bn.qc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.zet()?Math.floor(h):h}}}}{const Mn=self.Ns;Mn.nit.Eht=class{constructor(){}static nnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.ont(t);break;case"plugin":h=s.Zrt(t)}return h!==i}static hf(t,s,i,e){if(!i){let t=e.Cet(),s=e.rit();return(t=s.Nrt(t)).UZ()}let h=e.Ptt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.zet()?"discrete":h))return s.UZ();if("continuous"===h||"step"===h){const r=e.oit().Att();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.IP(),o=i.IP(),a=s.UZ(),l=i.UZ(),u=("step"===h&&0!==r&&(t=Mn.Cr(t,n,o)),s.jZ("angle"));if(!u){if(a===l)return a;const f=Mn.normalize(t,n,o),d=self.Pc.qc(s.Mht());return Mn.Wr(a,l,d(f,0,1,1))}{const p=u.got();if(a===l&&0===p)return a;const m=Mn.normalize(t,n,o),g=self.Pc.qc(s.Mht()),y=g(m,0,1,1);switch(u.yot()){case"closest":return Mn.Wr(a,l,y,p);case"clockwise":return Mn.jr(a,l,y,p);case"anti-clockwise":return Mn.Vr(a,l,y,p)}}}}}}{const vn=self.Ns;vn.nit.Pht=class{constructor(){}static nnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.ont(t);break;case"plugin":h=s.Zrt(t)}return!!h!=!!i}static hf(t,s,i,e){if(i)return s.UZ()?1:0;{let t=e.Cet(),s=e.rit();return(t=s.Nrt(t)).UZ()?1:0}}}}{const xn=self.Ns,Gn=[0,0,0],Tn=[0,0,0],_n=[0,0,0];xn.nit.Fht=class{constructor(){}static nnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.ont(t);break;case"plugin":h=s.Zrt(t)}return Array.isArray(i)?(Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2]):(_n.Ua(i),Gn[0]=Math.floor(255*_n.ba()),Gn[1]=Math.floor(255*_n.Ma()),Gn[2]=Math.floor(255*_n.xa())),Array.isArray(h)?(Tn[0]=h[0],Tn[1]=h[1],Tn[2]=h[2]):(_n.Ua(h),Tn[0]=Math.floor(255*_n.ba()),Tn[1]=Math.floor(255*_n.Ma()),Tn[2]=Math.floor(255*_n.xa())),Gn[0]!==Tn[0]||Gn[1]!==Tn[1]||Gn[2]!==Tn[2]}static hf(t,s,i,e){if(!i){let t=e.Cet(),s=e.rit(),i=(t=s.Nrt(t)).UZ();return Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2],Gn}let h=e.Ptt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.UZ();return Gn[0]=r[0],Gn[1]=r[1],Gn[2]=r[2],Gn}if("continuous"===h||"step"===h){const n=e.oit().Att();if("step"===h&&0!==n){const v=1/n;t=Math.floor(t*v)/v}const o=s.IP(),a=i.IP(),l=s.UZ(),u=i.UZ(),c=("step"===h&&0!==n&&(t=xn.Cr(t,o,a)),xn.normalize(t,o,a)),f=s.Mht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],S=u[2],w=self.Pc.qc(f),b=a-o,M=b*c;return Gn[0]=d===g?d:w(M,d,g-d,b),Gn[1]=p===y?p:w(M,p,y-p,b),Gn[2]=m===S?m:w(M,m,S-m,b),Gn}}}}{const In=self.Ns;In.nit.kht=class{constructor(){}static nnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.ont(t);break;case"plugin":h=s.Zrt(t)}return h!==i}static hf(t,s,i,e){if(i)return s.UZ();{let t=e.Cet(),s=e.rit();return(t=s.Nrt(t)).UZ()}}}}{const Cn=self.Ns;Cn.AY=class{constructor(){this.Sot=new Map}vr(){for(const t of this.Sot.values())t.vr();this.Sot.clear(),this.Sot=null}Rc(t){const s=new Cn.wot(t),i=s.yf();this.Sot.set(i,s)}ri(t){return this.Sot.get(t)}ytt(){return 0}static bot(t,s,i,e){if(s)for(const h of s)Cn.AY.Mot("create",h,t,i,e)}static vot(t,s,i,e){if(s)for(const h of s)Cn.AY.Mot("create-including-disabled",h,t,i,e)}static xot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Bq(t)}):t.forEach(t=>{Cn.AY.Mot("load",t,i,s,e)})}static Mot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.Bq(s),i.push(r);break;case"create":if("function"==typeof r.Eit&&!r.Eit())return r.vr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Rn=self.Ns;Rn.wot=class{constructor(t){this._r="",this.yst=NaN,this.Got=0,this.Tot="default",this._ot="default",this.Iot=!1,this.Cot=!1,this.Rot=1,this.jst=null,this.Aot="",this.Eot=!1,this.Pot=!0,t&&(this._r=t[0],this.yst=t[1],this.Got=t[2],this.Tot=t[3],this._ot=t[4],this.Iot=!!t[6],this.Cot=!!t[7],this.Rot=t[8],this.Aot=t[9],this.Eot=!!t[10],this.Pot=!!t[11],this.jst=new Rn.Fot(t[5],this))}vr(){this.jst.vr(),this.jst=null}vtt(){return this.jst||(this.jst=new Rn.Fot(null,this)),this.jst}yf(){return this._r}uV(t){this._r=t}YW(){return this.yst}XW(t){this.yst=t}Att(){return this.Got}Ett(t){this.Got=t}Ptt(){return this.Tot}Ftt(t){this.Tot=t}OZ(){return this._ot}ktt(t){this._ot=t}ZW(){return this.Iot}KW(t){this.Iot=t}t8(){return this.Cot}QW(t){this.Cot=t}lW(){return this.Rot}Dtt(t){this.Rot=t}rZ(){return this.Aot}Ott(){return this.Eot}Ltt(){return this.Pot}Lq(){return{trackDataJson:this.jst.Lq(),name:this._r,totalTime:this.yst,step:this.Got,interpolationMode:this.Tot,resultMode:this._ot,loop:this.Iot,pingPong:this.Cot,repeatCount:this.Rot,startOnLayout:this.Aot,transformWithSceneGraph:!!this.Eot,useSystemTimescale:this.Pot}}Bq(t){t&&(this.vtt().Bq(t.trackDataJson),this._r=t.name,this.yst=t.totalTime,this.Got=t.step,this.Tot=t.interpolationMode,this._ot=t.resultMode,this.Iot=t.loop,this.Cot=t.pingPong,this.Rot=t.repeatCount,this.Aot=t.startOnLayout,this.Eot=!!t.transformWithSceneGraph,this.Pot=!!t.useSystemTimescale)}}}{const An=self.Ns;class En{constructor(t,s){this.jst=s,this.kot=null,this.Dot=null,this.Vst=NaN,this.Ust=NaN,this.Tot="default",this._ot="default",this.Yu=!1,this.Oot=null,this.met=null,this.If="",this.Lot=null,this.Bot=0,this.Not=this.jst.Rtt().YW(),this.Ff=0,this._r="",t&&(t[0]&&(this.kot=t[0],this.Vst=t[0][2],this.Ust=t[0][1]),this.Tot=t[1],this._ot=t[2],this.Yu=!!t[3],t[6]&&(this.If=t[6]),t[7]&&(this.Lot=t[7],this.Bot=t[7][0],this.Not=t[7][1]),t[8]&&(this.Dot=t[8]),t[8]&&(this.Dot=t[8]),t[9]&&(this.Ff=t[9]),t[10]&&(this._r=t[10]),this.Oot=new An.Wot(t[4],this),this.met=new An.jot(t[5],this))}vr(){this.kot=null,this.jst=null,this.Oot&&(this.Oot.vr(),this.Oot=null),this.met&&(this.met.vr(),this.met=null),this.Lot=null}vtt(){return this.jst}Qst(){return this.Oot||(this.Oot=new An.Wot(null,this)),this.Oot}rit(){return this.met||(this.met=new An.jot(null,this)),this.met}Vot(){return this.kot}cit(){return this.Ust}Fit(t){this.Ust=t}uit(){return this.Vst}Cit(t){this.Vst=t}Ptt(){return this.Tot}Ftt(t){this.Tot=t}OZ(){return this._ot}ktt(t){this._ot=t}Eit(){return this.Yu}Pit(t){this.Yu=!!t}g8(){return this.If}bst(){return this.Bot}Rit(){return this.Not}Ait(t){this.Not=t}Dit(){return this.Dot[0]}kit(t){this.Dot||(this.Dot=[]),this.Dot[0]=t}Bit(){return this.Dot||(this.Dot=[]),this.Dot[1]}Lit(t){this.Dot||(this.Dot=[]),this.Dot[1]=t}DG(){return this.Ff}yf(){return this._r}Lq(){return{keyframeDataJson:this.Oot.Lq(),propertyTrackDataJson:this.met.Lq(),instanceData:this.kot,additionalInstanceData:this.Dot,instanceUid:this.Vst,objectClassIndex:this.Ust,interpolationMode:this.Tot,resultMode:this._ot,enabled:this.Yu,id:this.If,nestedData:this.Lot,type:this.Ff,name:this._r}}Bq(t){t&&(this.kot=t.instanceData,this.Vst=t.instanceUid,this.Ust=t.objectClassIndex,this.Tot=t.interpolationMode,this._ot=t.resultMode,this.Yu=t.enabled,this.If=t.id,this.Ff=t.type||0,this._r=t.name||"",this.Not=this.jst.Rtt().YW(),t.nestedData&&(this.Lot=t.nestedData,this.Bot=this.Lot[0],this.Not=this.Lot[1]),t.additionalInstanceData&&(this.Dot=t.additionalInstanceData),this.Qst().Bq(t.keyframeDataJson),this.rit().Bq(t.propertyTrackDataJson))}}An.Fot=class{constructor(t,s){this.WQ=s,this.Uot=[],An.AY.bot(this.Uot,t,En,this)}vr(){this.WQ=null;for(const t of this.Uot)t.vr();An.Yn(this.Uot),this.Uot=null}Rtt(){return this.WQ}xst(){const t=new En(null,this);return this.Uot.push(t),t}Hot(t){return t.Qst().Zst()[0]}zot(t){const s=t.Qst().Zst();return s.at(-1)}$it(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.IP()===s)return h}}Jot(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.IP()>s)return h}}qot(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.IP()>=s)return h}}qit(s,t){const i=t.Qst().Zst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.IP()<=s)return e}}*Mtt(){for(const t of this.Uot)yield t}Lq(){return{trackDataItemsJson:this.Uot.map(t=>t.Lq())}}Bq(t){t&&An.AY.xot(this.Uot,t.trackDataItemsJson,En,this)}}}{const Pn=self.Ns;class Fn{constructor(t,s){this.met=s,this.$ot="",this.Xot=null,this.Art=null,this.Ff=null,this.Yot=NaN,this.Kot=NaN,this.Tot="default",this._ot="default",this.Yu=!1,this.Zot=null,this.Qot=!0,t&&(this.$ot=t[0][0],this.Xot=t[0].slice(1),this.Art=t[1],this.Ff=t[2],this.Yot=t[3],this.Kot=t[4],this.Tot=t[5],this._ot=t[6],this.Yu=!!t[7],this.Zot=new Pn.tat(t[8],this),this.Qot=t[9])}vr(){this.Zot.vr(),this.Zot=null,this.met=null,this.Xot=null}rit(){return this.met}Met(){return this.Zot||(this.Zot=new Pn.tat(null,this)),this.Zot}yit(){return this.$ot}Oet(t){this.$ot=t}Bet(){return this.Xot}Wet(t){this.Xot=t}Vet(){return this.Art}Het(t){this.Art=t}DG(){return this.Ff}SetType(t){this.Ff=t}Xet(){return this.Yot}Yet(t){this.Yot=t}Ket(){return this.Kot}Zet(t){this.Kot=t}Ptt(){return this.Tot}Ftt(t){this.Tot=t}OZ(){return this._ot}ktt(t){this._ot=t}Eit(){return this.Yu}Pit(t){this.Yu=!!t}tht(){return!!this.Qot}Lq(){return{propertyKeyframeDataJson:this.Zot.Lq(),sourceAdapterId:this.$ot,sourceAdapterArguments:this.Xot,property:this.Art,type:this.Ff,min:this.Yot,max:this.Kot,interpolationMode:this.Tot,resultMode:this._ot,enabled:this.Yu,canHavePropertyKeyframes:this.Qot}}Bq(t){t&&(this.$ot=t.sourceAdapterId,this.Xot=t.sourceAdapterArguments,this.Art=t.property,this.Ff=t.type,this.Yot=t.min,this.Kot=t.max,this.Tot=t.interpolationMode,this._ot=t.resultMode,this.Yu=t.enabled,this.Qot=t.canHavePropertyKeyframes,this.Met().Bq(t.propertyKeyframeDataJson))}}Pn.jot=class{constructor(t,s){this.Wst=s,this.sat=[],Pn.AY.bot(this.sat,t,Fn,this)}vr(){this.Wst=null;for(const t of this.sat)t.vr();Pn.Yn(this.sat),this.sat=null}Iit(){return this.Wst}Zit(){const t=new Fn(null,this);return this.sat.push(t),t}$et(t){const s=t.Met();return s.bet()[0]}Nrt(t){const s=t.Met(),i=s.bet();return i.at(-1)}sht(s,t){const i=t.Met(),e=i.bet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.IP()===s)return r}}hht(s,t){const i=t.Met(),e=i.bet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.IP()>s)return r}}rht(s,t){const i=t.Met(),e=i.bet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.IP()>=s)return r}}iht(s,t){const i=t.Met(),e=i.bet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.IP()<=s)return h}}*hit(){for(const t of this.sat)yield t}Lq(){return{propertyTrackDataItemsJson:this.sat.map(t=>t.Lq())}}Bq(t){t&&Pn.AY.xot(this.sat,t.propertyTrackDataItemsJson,Fn,this)}}}{const kn=self.Ns;class Dn{constructor(t,s){if(this.Oot=s,this.T3=-1,this.iat="noease",this.eat=!1,this.ftt=null,this.hat=null,t){this.T3=t[0],this.iat=t[1],this.eat=!!t[2];const i=t[3];this.ftt=i?i.split(" "):[],this.hat=new Set(this.ftt.map(t=>t.toLowerCase())),this.rat=null}}vr(){this.Oot=null,kn.Yn(this.ftt),this.ftt=null,this.hat.clear(),this.hat=null,this.rat=null}Qst(){return this.Oot}CZ(){return this.rat}nat(t){this.rat=t}IP(){return this.T3}$W(t){this.T3=t,this.Oot.oat()}Mht(){return this.iat}c8(t){this.iat=t}Eit(){return this.eat}Pit(t){this.eat=!!t}e8(){return this.ftt}Wtt(t){this.ftt=t?t.split(" "):[],this.hat=new Set(this.ftt.map(t=>t.toLowerCase()))}aat(){return this.hat}Ost(t){return this.hat.has(t.toLowerCase())}Lq(){return{time:this.T3,ease:this.iat,enable:this.eat,tags:this.ftt}}Bq(t){t&&(this.T3=t.time,this.iat=t.ease,this.eat=t.enable,this.ftt=t.tags,this.hat=new Set(this.ftt.map(t=>t.toLowerCase())))}}kn.Wot=class{constructor(t,s){this.Wst=s,this.Kst=[],kn.AY.bot(this.Kst,t,Dn,this),this.oat()}vr(){this.Wst=null;for(const t of this.Kst)t.vr();kn.Yn(this.Kst),this.Kst=null}oat(){this.Kst.sort((t,s)=>t.IP()-s.IP());for(let t=0;t<this.Kst.length;t++){const s=this.Kst[t];s.nat(this.Kst[t+1])}}Iit(){return this.Wst}lat(){return this.Kst.length}Zst(){return this.Kst}Yit(){const t=new Dn(null,this);return this.Kst.push(t),this.oat(),t}tet(t){for(const s of this.Kst)if(t(s)){const i=this.Kst.indexOf(s);-1!==i&&(s.vr(),this.Kst.splice(i,1))}this.uat(),this.oat()}uat(){this.Kst.sort((t,s)=>t.IP()-s.IP())}cet(t){return this.Kst.indexOf(t)}fet(t){return this.Kst[t]}*cat(){for(const t of this.Kst)yield t}*fat(){for(let t=this.Kst.length-1;0<=t;t--)yield this.Kst[t]}Lq(){return{keyframeDataItemsJson:this.Kst.map(t=>t.Lq())}}Bq(t){t&&(kn.AY.xot(this.Kst,t.keyframeDataItemsJson,Dn,this),this.oat())}}}{const On=self.Ns;class Ln{constructor(t,s){this.Zot=s,this.Zht=null,this.dat=null,this.Ff="",this.T3=NaN,this.iat="noease",this.eat=!1,this.pat=null,this.mat=void 0,this.gat="line",t&&(this.Zht=t[0][0],this.dat=t[0][1],this.Ff=t[0][2],this.T3=t[1],this.iat=t[2],this.eat=!!t[3],this.gat=t[5],this.pat=null,t[4]&&(this.pat=new On.yat(t[4],this)),this.rat=null,this.Sat=null)}vr(){this.Zot=null,this.pat&&(this.pat.vr(),this.pat=null),this.rat=null,this.Sat=null}wat(){return this.pat}nat(t){this.rat=t}CZ(){return this.rat}bat(t){this.Sat=t}RZ(){return this.Sat}jet(){return this.Zht}vht(t){"color"===this.Ff&&On.ye(t)?(this.Zht[0]=On.nn(t),this.Zht[1]=On.an(t),this.Zht[2]=On.ln(t)):this.Zht=t}Wrt(){return this.dat}Sht(t){"color"===this.Ff&&On.ye(t)?(this.dat[0]=On.nn(t),this.dat[1]=On.an(t),this.dat[2]=On.ln(t)):this.dat=t}UZ(){const t=this.Zot.Cet().OZ();return"relative"===t?this.jet():"absolute"===t?this.Wrt():void 0}DG(){return this.Ff}SetType(t){this.Ff=t}IP(){return this.T3}$W(t){this.T3=t,this.Zot.Mat()}Mht(){return this.iat}c8(t){this.iat=t}Eit(){return this.eat}Pit(t){this.eat=!!t}AZ(){return this.gat}jZ(s){if(this.pat){if(!this.mat&&null!==this.mat){const i=this.pat.vat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.g8()===s)return this.mat=h,this.mat}}this.mat=null}return this.mat}}Lq(){const t=this.pat;return{addonDataJson:t&&t.Lq(),value:this.Zht,aValue:this.dat,type:this.Ff,time:this.T3,ease:this.iat,enable:this.eat}}Bq(t){t&&(t.addonDataJson&&this.pat._SetFromJson(t.addonDataJson),this.Zht=t.value,this.dat=t.aValue,this.Ff=t.type,this.T3=t.time,this.iat=t.ease,this.eat=t.enable)}}On.tat=class{constructor(t,s){this.pet=s,this.wet=[],this.xat=[],On.AY.bot(this.wet,t,Ln,this),On.AY.vot(this.xat,t,Ln,this),this.Mat()}vr(){this.pet=null;for(const t of this.wet)t.vr();On.Yn(this.wet),this.wet=null;for(const s of this.xat)s.vr();On.Yn(this.xat),this.xat=null}Mat(){let s=this.wet;s.sort((t,s)=>t.IP()-s.IP());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.nat(s[t+1]),0<=t-1&&i.bat(s[t-1])}(s=this.xat).sort((t,s)=>t.IP()-s.IP());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.nat(s[t+1]),0<=t-1&&e.bat(s[t-1])}}ght(){const t=new Ln(null,this);return this.wet.push(t),this.Mat(),t}yht(t){for(const s of this.wet)if(t(s)){const i=this.wet.indexOf(s);-1!==i&&(s.vr(),this.wet.splice(i,1))}this.Gat(),this.Mat()}Gat(){this.wet.sort((t,s)=>t.IP()-s.IP())}Cet(){return this.pet}Tat(){return this.wet.length}Nrt(){return this.wet[this.wet.length-1]}bet(){return this.wet}IZ(){return this.xat}*_at(){for(const t of this.wet)yield t}*Iat(){for(let t=this.wet.length-1;0<=t;t--)yield this.wet[t]}Lq(){const t=this.wet,s=this.xat;return{propertyKeyframeDataItemsJson:t.map(t=>t.Lq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Lq())}}Bq(t){t&&(On.AY.xot(this.wet,t.propertyKeyframeDataItemsJson,Ln,this),On.AY.xot(this.xat,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.Mat())}}}{const Bn=self.Ns;class Nn{constructor(t,s){this.pat=s,this.If=t[0],this.Cat=t[1]}vr(){this.pat=null,this.Cat=null}wat(){return this.pat}g8(){return this.If}Lq(){return{id:this.If,data:this.Cat}}Bq(t){t&&(this.If=t.id,this.Cat=t.data)}}class Wn extends Nn{constructor(t,s){super(t,s),this.Rat=this.Cat[0],this.Aat=!!this.Cat[1],this.Eat=this.Cat[2],this.Pat=!!this.Cat[3]}vr(){super.vr()}JZ(){return this.Rat}pot(){return this.Aat}XZ(){return this.Eat}mot(){return this.Pat}Lq(){return Object.assign(super.Lq(),{startAnchor:this.Rat,startEnable:!!this.Aat,endAnchor:this.Eat,endEnable:!!this.Pat})}Bq(t){t&&(super.Bq(t),this.Rat=t.startAnchor,this.Aat=!!t.startEnable,this.Eat=t.endAnchor,this.Pat=!!t.endEnable)}}class jn extends Nn{constructor(t,s){super(t,s),this.Fat=this.Cat[0],this.kat=this.Cat[1]}vr(){super.vr()}yot(){return this.Fat}got(){return this.kat}Lq(){return Object.assign(super.Lq(),{direction:this.Fat,revolutions:this.kat})}Bq(t){t&&(super.Bq(t),this.Fat=t.direction,this.kat=t.revolutions)}}Bn.yat=class{constructor(t,s){this.Dat=s,this.Oat=[],Bn.AY.bot(this.Oat,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}vr(){this.Dat=null;for(const t of this.Oat)t.vr();Bn.Yn(this.Oat),this.Oat=null}Lat(){return this.Dat}vat(){return this.Oat}*Bat(){for(const t of this.Oat)yield t}Lq(){return{addonDataItemsJson:this.Oat.map(t=>t.Lq())}}Bq(t){t&&Bn.AY.xot(this.Oat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}}}{let m=self.Ns,i=0;m.qnt=class extends m.lK{constructor(t,s){super("tween-"+i++,t,s),this.If="",this.Nat=!1,this.Wat="start-value",this.Hst=null,this.jat=null,this.Vat=null,this.det=null,this.Uat=null}wtt(t){const s=m.Mr(m.Event,"tweenstatereleased");s.Hat=this,t.dispatchEvent(s)}DG(){return 1}zQ(){for(const t of this.WQ.vtt().Mtt())this.jQ.push(m.zat.Px(this,t));this.det=this.jQ[0]}vst(){const t=this.WQ.vtt().xst(),s=m.zat.Px(this,t);return this.jQ.push(s),this.Jat(),s}Jat(){this.det=this.jQ[0]}S8(t){return this.det.Est()[0]}Jet(t){this.qat=t}f8(){const t=this.GZ();if(t&&t.length){const s=t[0];if(this.det=s){const i=s.f8();return s.lit()?i:void 0}}}$at(t){this.Vat||(this.Vat=[]),this.Vat.push(t)}Xat(t){this.jat||(this.jat=[]),this.jat.push(t)}Yat(t){if(this.Vat){const s=this.Vat.indexOf(t);-1!==s&&this.Vat.splice(s,1)}}Kat(t){if(this.jat){const s=this.jat.indexOf(t);-1!==s&&this.jat.splice(s,1)}}Zat(t,s){for(const i of this.jQ)for(const e of i.tit)if(e.Pst()===s){const h=e.rit(),r=e.Cet(),n=h.$et(r);n.vht(t),n.Sht(t)}}Qat(t){for(const s of this.jQ)for(const i of s.tit)if(i.Pst()===t)return i}tlt(t){for(const s of t){const i=this.Qat(s);this.Zat(i.aht(),s)}if(this.Ntt()){const e=this.YW()-this.IP();this.XW(e);for(const h of this.jQ)h.Ait(e);this.tst(0)}else{const r=this.IP();this.XW(r);for(const n of this.jQ)n.Ait(r);this.tst(r)}this.sst()}slt(t,s){const i=this.Qat(s),e=i.rit(),h=i.Cet(),r=e.Nrt(h);r.$W(this.YW()),r.vht(t),r.Sht(t)}ilt(t){this.If=t}g8(){return this.If}elt(t){this.Wat=t}hlt(){return this.Wat}m8(t){this.Nat=t}p8(){return this.Nat}Htt(){if(this.Vat)for(const t of this.Vat)t(this);if(!this.sZ())for(const s of this.jQ)s.ret()}ztt(){this.ntt=this.Tf.Jtt()}eZ(){if(!this.ltt&&(this.ltt=!0,this.jat))for(const t of this.jat)t(this)}$W(t){this.rlt(),super.$W(t)}nst(t){(t=m.ye(t)?t:this.YW())<0?this.$Q=0:t>=this.YW()?this.$Q=this.YW():this.$Q=t,this.det.ost()}$K(t){if(!this.iZ()&&"current-state"===this.hlt())for(const s of this.jQ)s.het();super.$K(t)}zW(t=!1){if(super.zW(t),!this.sZ())for(const s of this.jQ)s.eet()}T0(t=!0,s=!1){this.rlt(),super.T0(t,s)}rlt(){for(const t of this.jQ){const s=t=>{const s=t.IP(),i=this.YW();return 0!==s&&s!==i};t.Qit(s),t.iet(s)}}qY(){if(!this.UW()){const t=this.f8();if(t&&t.KB().Kz())return!1;this.NQ.HK(this),this.fst()}return!0}ZK(h,t,s){if(this.Hst||(this.Hst=this.f8()),!this.Hst||this.Hst.wj())this.zW(!0),this.ztt();else{const i=this.Hst.iD();if(0!==(h=-1!==i?s*i:h)||0!==this.ctt){this.ctt=h;const r=this.$Q+this.XQ,n=h*this.YQ,o=r+n,a=this.WQ.yst;o<0?(this.$Q=0,this.XQ=-o):a<=o?(this.$Q=a,this.XQ=this.$Q-o):(this.$Q=o,this.XQ=0);let t=!1,s=!1,i=this.ZW(),e=this.t8();i||e?i&&!e?0<this.YQ?this.$Q>=a&&(this.nst(0),this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),s=!0):this.$Q<=0&&(this.nst(a),this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),s=!0):!i&&e?0<this.YQ?this.$Q>=a&&(this.tst(a),this.s8(-1*this.i8()),s=!0,1===this.KQ?this.ZQ<this.lW()?(this.ZQ++,this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong),this.KQ=0):(this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong),t=!0):0===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong),this.KQ=1)):this.$Q<=0&&(this.tst(0),this.s8(-1*this.i8()),s=!0,1===this.KQ?this.ZQ<this.lW()?(this.ZQ++,this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong),this.KQ=0):(t=!0,this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong)):0===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong),this.KQ=1)):i&&e&&(0<this.YQ?this.$Q>=a&&(this.tst(a),this.s8(-1*this.i8()),s=!0,0===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong)),1===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong)),this.KQ++,this.KQ=m.wrap(this.KQ,0,2)):this.$Q<=0&&(this.tst(0),this.s8(-1*this.i8()),s=!0,0===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong)),1===this.KQ&&(this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),this.nlt(m.olt.Tween._X.OnAnyTweenPingPong),this.nlt(m.olt.Tween._X.OnTweensPingPong)),this.KQ++,this.KQ=m.wrap(this.KQ,0,2))):0<this.YQ?this.$Q>=a&&(this.ZQ<this.lW()?(this.ZQ++,this.nst(0),this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),s=!0):(this.tst(a),t=!0)):this.$Q<=0&&(this.ZQ<this.lW()?(this.ZQ++,this.nst(a),this.nlt(m.olt.Tween._X.OnAnyTweenLoop),this.nlt(m.olt.Tween._X.OnTweensLoop),s=!0):(this.tst(0),t=!0)),t?(this.det.Sst(),this.zW(!0),this.ztt()):(this.det.hf(this.$Q,!0,!1,s,this.utt,!1),this.utt&&(this.utt=!1))}}}nlt(t){const s=this.f8(),i=s.llt(m.olt.Tween);i.PushTriggerTween(this),this.Tf.N4(t,s,i.X6()),i.PopTriggerTween()}Lq(){const t=super.Lq(),s=this.Rtt();return Object.assign(t,{tweenDataItemJson:s.Lq(),id:this.If,destroyInstanceOnComplete:this.Nat,initialValueMode:this.Wat})}Bq(t){if(t){const s=this.Rtt();s.Bq(t.tweenDataItemJson),super.Bq(t),this.If=t.id,this.Nat=t.destroyInstanceOnComplete,this.Wat=t.initialValueMode,this.Jat()}}static IsPlaying(t){return t.IsPlaying()}static n8(t){return t.n8()}static ult(t){return!!t.t8()&&0===t.Btt()}static clt(t){return!!t.t8()&&1===t.Btt()}static flt(t){const s=t.runtime.Gtt(),i=new m.wot;if(t.json){i.Bq(t.json.tweenDataItemJson);const e=new m.qnt(i,s);return e.Bq(t.json),e}{const h=new m.qnt(i,s),r=(m.Ve(t.dlt)||(t.dlt=[t.dlt]),h.ilt(t.id),h.Wtt(t.tags),h.elt(t.initialValueMode),h.m8(t.releaseOnComplete),h.KW(t.loop),h.QW(t.pingPong),h.XW(t.time),h.Ett(0),h.Ftt("default"),h.ktt(t.dlt[0].resultMode),h.Dtt(t.repeatCount),h.vst()),n=(r.Cit(t.Y6.u4()),r.Ftt("default"),r.ktt(t.dlt[0].resultMode),r.Pit(!0),r.Fit(t.Y6.KB().qF()),t.Y6.B6()),o=n.Oit()?n.Dit():t.Y6.qD().Fm(),a=n.Oit()?n.Bit():t.Y6.qD().Um(),l=(r.kit(o),r.Lit(a),r.Xit()),u=(l.$W(0),l.c8("noease"),l.Pit(!0),l.Wtt(""),r.Xit());u.$W(t.time),u.c8("noease"),u.Pit(!0),u.Wtt("");for(const c of t.dlt){const f=r.Kit(),d=(f.Oet(c.sourceId),f.Net(c.sourceArgs),f.Uet(c.property),f.Jet(c.type),f.Yet(NaN),f.Zet(NaN),f.Ftt("default"),f.ktt(c.resultMode),f.Pit(!0),f.mht()),p=(d.SetType(c.valueType),d.$W(0),d.c8(c.ease),d.Pit(!0),d.vht(c.startValue),d.Sht(c.startValue),f.mht());p.SetType(c.valueType),p.$W(t.time),p.c8(c.ease),p.Pit(!0),p.vht(c.endValue),p.Sht(c.endValue),f._tt()}return h}}static Cit(t,s){if(!isNaN(s))for(const i of t.GZ())i.Cit(s)}plt(t,s){return this.Uat||(this.Uat=m.Mr(self.l8,this,t,s)),this.Uat}}}{const Vn=self.Ns;Vn.zat=class extends Vn.xtt{constructor(t,s){super(t,s),this.mlt=null,this.glt=null}static Px(t,s){return Vn.Mr(Vn.zat,t,s)}ylt(){1===this.tit.length?this.mlt=this.tit[0]:(this.mlt=this.tit[0],this.glt=this.tit[1])}sit(){for(const t of this.Wst.rit().hit())this.tit.push(Vn.Slt.Px(this,t));this.ylt()}Kit(){const t=this.Wst.rit(),s=t.Zit(),i=Vn.Slt.Px(this,s);return this.tit.push(i),this.ylt(),i}$K(){if(this.ait(),this.lit()||!this.Ctt()){const t=this.oit(),s=t.Ntt(),i=s?0:this.Rit();for(const h of this.tit)h.$K(i),0===this.iit&&1===h.jit()&&(this.iit=1),0===this.rK&&1===h.XK()&&(this.rK=1);this.eit=0;const e=this.tit.some(t=>t.gst());e&&(this.eit=1),this.Yst=this.Vit(i),this.qst=!1,this.$st=!1,this.hf(i)}}wst(){}hf(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.Hst||this.f8(),this.Hst){const o=!this.Hst.wj();return o&&(!r||!this.KB().Kz())&&((this.glt?(this.mlt.hf(t,i,e,n),this.glt):this.mlt).hf(t,i,e,n),void(0!==this.mlt.jit()&&(this.zst||(this.zst=this.Hst.qD()),this.zst)&&this.zst.gN()))}}Mst(){}Bq(t){super.Bq(t),this.ylt()}}}{const Un=self.Ns;Un.Slt=class extends Un.nit{constructor(t,s){super(t,s),this.wlt=!1}static Px(t,s){return Un.Mr(Un.Slt,t,s)}hf(t,s=!1,i=!1,e=!1){let h,r;if(this.wlt)h=this.wet[0],r=this.wet[1];else{if(s)h=this.met.iht(t,this.pet);else{if(this.vet){const n=this.oit(),o=this.vet.CZ(),a=this.vet.IP(),l=o?o.IP():n.YW();(t<=a||l<=t)&&(this.vet=this.met.iht(t,this.pet))}else this.vet=this.met.iht(t,this.pet);h=this.vet}r=h.CZ()}this.yet.hf(t,h,r,s,i,e)}mht(){const t=this.pet.Met(),s=t.ght();return this.vet=null,this.wlt=this.Qet().length<=2,s}iet(t){this.vet=null;const s=this.pet.Met();s.yht(t),this.wlt=this.Qet().length<=2}Lq(){return{sourceAdapterJson:this._tt().Lq(),basic:this.wlt}}Bq(t){t&&(this._tt().Bq(t.sourceAdapterJson),this.wlt=t.basic)}}}{const Hn=self.Ns,zn=self.Pc;Hn.rf=class extends Hn.Sr{constructor(t,s=!0){super(),this._r=t[0],this.blt=t[2],this.Mlt=[];for(const i of t[1]){const e=Hn.vlt.Px(this,i);this.Mlt.push(e)}for(let t=0;t<this.Mlt.length;t++){const h=this.Mlt[t],r=this.Mlt[t+1],n=this.Mlt[t-1];h.nat(r),h.bat(n)}this.xlt=new Map,this.Glt=new Map,this.Tlt(),s&&zn.lf(this._r,(t,s,i,e)=>this.hf(t,s,i,e),null,{transition:this})}static Px(t){return Hn.Mr(Hn.rf,t)}vr(){for(const t of this.Mlt)t.vr();Hn.Yn(this.Mlt),this.Mlt=null,this.xlt.clear(),this.xlt=null,this.Glt.clear(),this.Glt=null}nf(t){this.blt=!!t}_lt(t){const s=this.Glt.get(t);if(s)return s;for(const i of this.Mlt)if(i.Ilt()===t)return this.Glt.set(t,i),i}Clt(s){for(let t=this.Mlt.length-1;0<=t;t--){const i=this.Mlt[t],e=i.Ilt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.RZ();if(!h)break;if(h.Ilt()!==t.Ilt())break;t=h}return t}}}}hf(t,s,i,e){let h=t/e;if(this.blt){const S=this._lt(0),w=this._lt(1),b=s+(s+i)*S.Rlt(),M=(s+i)*w.Rlt(),v=M-b;return 0===e?b+v:zn.cf(t,b,v,e)}0===e&&(h=1);let r=this.Clt(h),n=r.CZ();if(!n){const x=r.RZ(),G=r;r=x,n=G}const o=n.Ilt()-r.Ilt(),a=Hn.Ir(h,r.Ilt(),n.Ilt(),0,o);if(r.Alt()||0==o){const T=s+(s+i)*r.Rlt(),_=(s+i)*n.Rlt(),I=_-T;return 0==o?1===a?T+I:T:zn.cf(a,T,I,o)}let l=r.Ilt(),u=r.Rlt(),c=r.Ilt()+r.Elt(),f=r.Rlt()+r.Plt(),d=n.Ilt()+n.Flt(),p=n.Rlt()+n.klt(),m=n.Ilt(),g=n.Rlt(),y=zn.qc("spline")(a,l,u,c,f,d,p,m,g,this.xlt.get(r));return(1-(y+=r.Rlt()))*s+y*(s+i)}Tlt(){this.xlt.clear();for(let t=0;t<this.Mlt.length-1;t++){const s=this.Mlt[t];if(s.pot()){const i=s,e=this.Mlt[t+1];if(e.mot()){const h=i.Ilt(),r=i.Ilt()+i.Elt(),n=e.Ilt()+e.Flt(),o=e.Ilt();this.xlt.set(i,zn.ff(h,r,n,o))}}}}}}{const Jn=self.Ns;Jn.vlt=class extends Jn.Sr{constructor(t,s){super(),this.Dlt=t,this.Olt=s[0],this.Llt=s[1],this.Blt=s[2],this.Nlt=s[3],this.Wlt=s[4],this.jlt=s[5],this.Aat=s[6],this.Pat=s[7],this.Vlt=s[8],this.rat=null,this.Sat=null}vr(){this.Dlt=null}static Px(t,s){return Jn.Mr(Jn.vlt,t,s)}nat(t){this.rat=t}CZ(){return this.rat}bat(t){this.Sat=t}RZ(){return this.Sat}Ilt(){return this.Olt}Rlt(){return this.Llt}Elt(){return this.Blt}Plt(){return this.Nlt}Flt(){return this.Wlt}klt(){return this.jlt}pot(){return this.Aat}mot(){return this.Pat}Alt(){return"linear"===this.Vlt}Ult(){return"cubic"===this.Vlt}}}{const qn=self.Ns;qn.Hlt=class extends qn.Sr{constructor(t){super(),this.Tf=t,this.zlt=[]}vr(){for(const t of this.zlt)t.vr();qn.Yn(this.zlt),this.zlt=null}Px(t){this.zlt.push(qn.rf.Px(t))}}}{const $n=self.Ns;$n.Jlt=class extends $n.Sr{constructor(t){super(),this.Tf=t,this.qlt=null,this.$lt=null,this.YY=t=>this.KY(t.Y6)}vr(){if(this.nK(),this.qlt){for(const t of this.qlt.values())t.clear();this.qlt.clear()}this.qlt=null,this.Tf=null}Px(t){if(this.qlt||(this.qlt=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.qlt.has(e)||this.qlt.set(e,new Map),this.qlt.get(e));h.set(i,t)}}oK(){const t=this.Tf.h0();t&&t.addEventListener("instancedestroy",this.YY)}nK(){const t=this.Tf.h0();t&&t.removeEventListener("instancedestroy",this.YY)}Xlt(){return!!this.qlt&&0!==this.qlt.size}Ylt(t,s){let i;if(i=t instanceof $n.Klt?t.qF():t,this.qlt.has(i)){const e=this.qlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}Zlt(t,s){this.$lt||(this.$lt=new WeakMap),this.$lt.has(t)||this.$lt.set(t,s)}Qlt(t){if(!this.$lt)return"";const s=this.$lt.get(t);return s||""}KY(t){this.$lt&&this.$lt.has(t)&&this.$lt.delete(t)}}}{const Xn=self.Ns;Xn.tut=class{constructor(t){this.Tf=t,this.sut=new Xn.iut}vr(){this.sut.vr(),this.sut=null,this.Tf=null}dO(){return this.Tf}Px(t){this.sut.Rc(t)}eut(t){return this.sut.ri(t)}hut(){return this.sut.hut()}}}{const Yn=self.Ns;Yn.rut=class{constructor(t,s,i,e,h,r,n){this.Tf=h.dO(),this.nut=h,this.out=t,this.aut=i,this.lut=e,this.Ty=s,this.EY=r,this.uut=n??r.f8().u4(),this.cut(),this.fut=this.mut?.dut()??-1,this.gut=[],this.yut=null,this.Sut=NaN,this.wut=null,this.but=null,this.Mut=null,this.vut="",this.xut=null,this.Gut="",this.Tut="",this._ut=0,this.Iut=!1,this.ett=!1}vr(){this.ett||(Yn.Yn(this.gut),this.gut=null,this.Tf=null,this.nut=null,this.lut=null,this.EY=null,this.yut=null,this.Sut=NaN,this.wut&&this.wut.clear(),this.wut=null,this.but=null,this.Mut=null,this.vut="",this.xut=null,this.Gut="",this.Tut="",this.ett=!0)}Gr(){return this.ett}Cut(){return this.nut}dO(){return this.Tf}yf(){return this.out}Rut(){return this.lut}VW(){return this.Ty}bK(){return this.EY||(this.EY=this.Tf.VD(this.uut).B6()),this.EY}Aut(){return this.Eut(this.fut)}Put(){const t=this.Aut();return t?t.VW():""}Fut(){const t=this.Aut();return t?t.e8():[]}kut(t){const s=this.Fut();if(!s)return!1;if(!s.length)return!1;const i=Yn.rut.jtt(t);return!(!i||!i.length)&&i.every(Yn.rut.Utt,s)}Dut(t,s){const i=this.Fut();if(!i)return!1;if(!i.length)return!1;const e=Yn.rut.jtt(t);return!(!e||!e.length)&&e.every(t=>Yn.rut.Out.call(i,t,s))}static Utt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static jtt(t){return t.trim().split(" ")}static Out(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>Yn.compare(t.trim(),i,s.trim()))}Lut(t){const s=this.Aut();if(s){if(Yn.ye(t)){const i=s.But(),e=i?i[t]:void 0;if(Yn.ye(e))return this.Eut(e)}if("string"==typeof t)for(const h of s.But()){const r=this.Eut(h);if(r.qW(t))return this.Eut(r.dut())}}}Nut(t){const s=this.Lut(t);return s?s.VW():""}Wut(t){const s=this.Lut(t);return s?s.e8():""}jut(t){const s=this.Aut();if(!s)return-1;const i=s.But();if(!i)return-1;const e=this.Lut(t);return e?i.indexOf(e.dut()):-1}Vut(){const t=this.Aut();if(!t)return 0;const s=t.But();return s?s.length:0}Eut(t){return this.lut.Eut(t)}T0(){const t=this.Uut();t.Hut(!0)}Hut(t){if(this.zut()){for(const[s,i]of this.zut().entries())i.Hut(!1);this.zut().clear()}if(this.wut=null,this.yut=null,this.Jut=null,this.but=null,this.vut="",this.xut=null,this.Gut="",this.Tut="",this.gut=[],t){this.nut.qut(this);const e=this.mut.dut();e!==this.fut&&this.$ut(e)}else this.fut=this.mut.dut()}Xut(){const t=this.lut.Eut(this.fut);return t?t.Kut().Yut():0}Zut(t){const s=this.Qut(t);return s?s.yf():""}tct(t){let s;return Yn.ye(t)&&(s=this.Qut(t)),"string"==typeof t&&(s=this.sct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.jet():""}ict(t){let s;if(Yn.ye(t)&&(s=this.Qut(t)),s="string"==typeof t?this.sct(t):s){const i=s.ect();Yn.ye(i)&&(this.gut.push(this.fut),this.$ut(i))}}hct(t){const s=this.lut.rct(t);if(s){const i=this.lut.Eut(s.dut());i&&(this.gut.push(this.fut),this.$ut(i.dut()))}}nct(){const t=this.gut.pop();Yn.ye(t)?this.$ut(t):this.oct()&&(this.nut.qut(this.oct(),!0,!1,!1),this.oct().$ut(this.lct()),this.Uut().uct(this.oct()))}cct(t){const s=this.Aut();if(s){s.dut();const i=this.Lut(t);i&&(this.gut.push(this.fut),this.$ut(i.dut()))}}fct(s){if(Yn.ye(s)){const t=this.lut.Eut(this.fut),i=t.Kut().dct();return!!i[s]}if("string"==typeof s){const e=this.lut.Eut(this.fut),h=e.Kut().dct();for(let t=0;t<h.length;t++)if(h[t].yf()===s)return!0}return!1}pct(){this.Iut=!0}mct(){return 0<this._ut}gct(){this._ut++}yct(){this._ut--,0===this._ut&&this.Iut&&this.nut.Sct(this)}$ut(t){const i=this.fut,s=this.bK().f8();if(this.gct(),this.nut.wct(this),this.Tf.N4(Yn.CX.Flowchart._X.OnBeforeAnyNodeChange,s),this.Tf.N4(Yn.CX.Flowchart._X.OnBeforeTaggedNodeChange,s),this.Tf.N4(Yn.CX.Flowchart._X.OnBeforeAnyNodeChangeInFlowchart,s),this.Tf.N4(Yn.CX.Flowchart._X.OnBeforeTaggedNodeChangeInFlowchart,s),this.fut=t,this.Tf.N4(Yn.CX.Flowchart._X.OnAnyNodeChange,s),this.Tf.N4(Yn.CX.Flowchart._X.OnTaggedNodeChange,s),this.Tf.N4(Yn.CX.Flowchart._X.OnAnyNodeChangeInFlowchart,s),this.Tf.N4(Yn.CX.Flowchart._X.OnTaggedNodeChangeInFlowchart,s),this.nut.bct(),this.yct(),!this.Gr()){const e=this.Eut(this.fut);if("reference"===e.DG()){const h=e.Mct();if(this.vct(e)){this.gut.pop();const r=this.xct(e),n=(this.nut.qut(r,!0,!0,!1),r.Gct(this,i),this.Uut());n.uct(r)}else{const o=e.Tct();if(h){this.gut.pop();let s=e._ct();if(s){let t=this.nut.Ict(s);for(;t;)s=Yn.yp(s),t=this.nut.Ict(s)}else{s=h+"-ref";let t=this.nut.Ict(s);for(;t;)s=Yn.yp(s),t=this.nut.Ict(s)}const a=this.nut.Cct(h,o,s,this.EY,!0),l=(a.Gct(this,i),this.Rct(e,a),this.Uut());a.Act(l),l.uct(a)}}}}}Qut(t){const s=this.lut.Eut(this.fut);if(!s)return null;const i=s.Kut().dct();if(!i)return null;const e=i[t];return e||null}sct(t){const s=this.lut.Eut(this.fut);if(!s)return null;const i=s.Kut().Ect(t);return i||null}cut(s){if("number"==typeof s){let t=this.Eut(s);t=t||this.lut.Pct(),this.mut=t}else{let t=this.lut.rct(this.aut);t=t||this.lut.Pct(),this.mut=t}}Lq(){return this.Iut?null:{flowchartName:this.out,flowchartTag:this.Ty,startNodeTag:this.aut,currentNodeId:this.fut,previousNodeIds:this.gut,pluginUID:this.EY.f8().u4(),reference:{previousFlowchartTag:this.oct()?this.oct().VW():"",previousStartNodeId:Yn.ye(this.lct())?this.lct():NaN,referencesJson:this.Fct(),currentReferenceFlowchartTag:this.kct()?this.kct().VW():"",rootFlowchartTag:this.Uut()?this.Uut().VW():""}}}Fct(){if(!this.Dct())return null;const t=[];for(const[s,i]of this.zut().entries())t.push({flowchartElementId:s.dut(),flowchartStateTag:i.VW()});return t.length?t:null}Bq(t){if(t){if(this.out=t.flowchartName,this.Ty=t.flowchartTag,this.aut=t.startNodeTag,this.fut=t.currentNodeId,this.gut=t.previousNodeIds,this.uut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.vut=s.previousFlowchartTag,this.Sut=s.previousStartNodeId,this.xut=s.referencesJson,this.Gut=s.currentReferenceFlowchartTag,this.Tut=s.rootFlowchartTag}this.cut()}}oct(){return"string"==typeof this.vut&&this.vut&&(this.yut=this.nut.Ict(this.vut),this.vut=""),this.yut}lct(){return this.Sut}Gct(t,s){this.yut=t,this.Sut=s}kct(){return"string"==typeof this.Gut&&this.Gut&&(this.but=this.nut.Ict(this.Gut),this.Gut=""),this.but}uct(t){this.but=t,this.but===this&&(this.but=null)}Uut(){return"string"==typeof this.Tut&&this.Tut&&(this.Mut=this.nut.Ict(this.Tut),this.Tut=""),this.Mut||this}Act(t){this.Mut=t}Dct(){return this.Oct(),!!this.wut}vct(t){return this.Oct(),this.wut&&this.wut.has(t)}Oct(){if(this.xut){this.wut&&this.wut.clear(),this.wut||(this.wut=new Map);for(const t of this.xut){const s=this.nut.Ict(t.flowchartStateTag),i=s.Eut(t.flowchartElementId);this.wut.set(i,s)}this.xut=null}}zut(){return this.Oct(),this.wut}xct(t){return this.Oct(),this.wut.get(t)}Rct(t,s){this.wut||(this.wut=new Map),this.wut.set(t,s)}}}{const Kn=self.Ns;Kn.Lct=class{constructor(t){this.Tf=t,this.Bct=new Map,this.Nct=null,this.Wct=[],this.jct=()=>this.sK(),this.Vct=null}vr(){Kn.Yn(this.Wct),this.Wct=null,this.Bct.clear(),this.Bct=null,this.Nct=null,this.Tf=null,this.Vct=null}dO(){return this.Tf}Cct(t,s,i,e,h,r){const n=this.Tf.Cut().eut(t);if(n){if(!this.Bct.has(i)){const o=new Kn.rut(t,i,s,n,this,e,r);return this.Bct.set(i,o),h&&this.qut(o,!0),o}{const a=this.Bct.get(i);a&&this.Sct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Sct(t){if(t.pct(),!t.mct()){const s=t.VW();this.Bct.delete(s),t.vr(),this.Nct===t&&(this.Nct=null)}}Uct(t){t.T0()}Ict(t){return this.Bct.get(t)}wct(t){this.Wct.push(t)}bct(){this.Wct.pop()}qut(t,s=!1,i=!1,e=!0){if(e){const h=t.kct();t=h||t}t!==this.Nct&&(this.Hct(),this.zct(t,s,i))}Jct(t){return"string"==typeof t?this.Ict(t):this.Wct.length?this.Wct[this.Wct.length-1]:this.Nct}Hct(){if(this.Nct&&!this.Nct.Gr()){const t=this.Nct.bK().f8();this.Nct.gct(),this.wct(this.Nct),this.Tf.N4(Kn.CX.Flowchart._X.OnBeforeFlowchartChange,t),this.bct(),this.Nct.yct()}}zct(t,s=!1,i=!1){if(this.Nct=t,this.Nct&&!this.Nct.Gr()){const e=this.Nct.bK().f8();this.Nct.gct(),this.wct(this.Nct),this.Tf.N4(Kn.CX.Flowchart._X.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Nct.cut(i),s&&(this.Tf.N4(Kn.CX.Flowchart._X.OnAnyNodeChange,e),this.Tf.N4(Kn.CX.Flowchart._X.OnTaggedNodeChange,e)),this.bct(),this.Nct.yct()}}Lq(){return{flowchartJsonObjects:[...this.Bct.values()].map(t=>t.Lq()),currentFlowchartTag:this.Nct?this.Nct.VW():null}}Bq(t){if(t){this.Vct=t;const s=new Map;for(const i of this.Vct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Bct.has(e)){const h=this.Bct.get(e);h.Bq(i),s.set(e,h)}else{const r=this.Cct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.Bq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Bct.entries())s.has(n)||o.vr();this.Bct.clear(),this.Bct=s,this.Tf.yX()?this.Tf.h0().addEventListener("afterload",this.jct):this.sK()}}sK(){this.Tf.h0().removeEventListener("afterload",this.jct);const t=this.Bct.get(this.Vct.currentFlowchartTag);t&&this.qut(t,!0),this.Vct=null}}}{const Zn=self.Ns;Zn.iut=class{constructor(){this.qct=new Map}vr(){for(const t of this.qct.values())t.vr();this.qct.clear(),this.qct=null}Rc(t){const s=new Zn.$ct(t),i=s.yf();this.qct.set(i,s)}ri(t){return this.qct.get(t)}hut(){return!!this.qct.size}static Xct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Qn=self.Ns;Qn.$ct=class{constructor(t){this._r=t[0],this.Yct=new Qn.Kct(t[1],this)}vr(){this.Yct.vr(),this.Yct=null}Zct(){return this.Yct}Eut(t){return this.Yct.Eut(t)}rct(t){return this.Yct.rct(t)}Pct(){return this.Yct.Pct()}yf(){return this._r}}}{const to=self.Ns;class so{constructor(t,s){this.Yct=s,this.Ff=t[7],this.Qct=t[0],this.Ty=t[1],this.Ty?this.ftt=this.Ty.trim().split(" ").map(t=>t.trim()):this.ftt=[],this.tft=t[2],this.ift=null,this.eft=null,"dictionary"===this.Ff&&(this.ift=t[3],this.eft=t[4]),this.hft=t[6],this.rft=null,this.nft=null,this.oft=null,"reference"===this.Ff&&(this.rft=t[8],this.nft=t[9],this.oft=t[10]),this.aft=new to.lft(t[5],this)}vr(){this.Yct=null}Zct(){return this.Yct}Kut(){return this.aft}dut(){return this.Qct}VW(){return this.Ty}e8(){return this.ftt}qW(t){if(!this.ftt)return!1;if(!this.ftt.length)return!1;const s=to.rut.jtt(t);return!(!s||!s.length)&&s.every(to.rut.Utt,this.ftt)}uft(){return this.hft}cft(t){this.hft=!!t}fft(){if("dictionary"===this.Ff)return!0;if("reference"===this.Ff)return!1;throw new Error("unexpected flowchart node type: "+this.Ff)}But(){return this.tft}dft(){return this.ift}pft(){return this.eft}DG(){return this.Ff}Mct(){return this.rft}Tct(){return this.nft}_ct(){return this.oft}}to.Kct=class{constructor(t,s){this.lut=s,this.mft=[],this.gft=new Map,this.yft=new Map,this.Sft=null,to.iut.Xct(this.mft,t,so,this);for(const i of this.mft){const e=i.dut(),h=i.VW(),r=i.e8(),n=i.uft();if(this.gft.set(e,i),h)for(const a of r)this.yft.has(a)||this.yft.set(a,new Set),this.yft.get(a).add(i);n&&(this.Sft=i);const o=i.Kut();for(const l of o.wft()){const u=l.dut();this.gft.set(u,l)}}this.Sft||this.bft()}vr(){this.lut=null;for(const t of this.mft)t.vr();to.Yn(this.mft),this.mft=null}Rut(){return this.lut}Eut(t){return this.gft.get(t)}rct(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.yft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Pct(){return this.Sft}*Mft(){for(const t of this.mft)yield t}bft(){let t=0;for(const s of this.Mft())s.uft()&&t++;if(0===t){for(const i of this.Mft())if(i.fft()&&!i.uft())return void i.cft(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.Mft())e.fft()&&(e.uft()&&t?t=!1:e.uft()&&!t&&e.cft(!1))}}for(const h of this.Mft())if(h.fft()&&h.uft())return void(this.Sft=h)}}}{const io=self.Ns;class eo{constructor(t,s){this.aft=s,this.Qct=t[0],this._r=t[1],this.Zht=t[2],this.vft=t[3]}vr(){this.aft=null}Kut(){return this.aft}dut(){return this.Qct}yf(){return this._r}jet(){return this.Zht}ect(){return this.vft}}io.lft=class{constructor(t,s){this.xft=s,this.Gft=[],this.Tft=new Map,io.iut.Xct(this.Gft,t,eo,this);for(const i of this.Gft)this.Tft.set(i.yf(),i)}vr(){this.xft=null;for(const t of this.Gft)t.vr();io.Yn(this.Gft),this.Gft=null}_ft(){return this.xft}Yut(){return this.Gft.length}dct(){return this.Gft}Ect(t){return this.Tft.get(t)}*wft(){for(const t of this.Gft)yield t}}}{const ho=self.Ns;ho.Ift=class extends ho.Sr{constructor(t){super(),this.Cft=t,this.Rft=[],this.Rft.push(ho.Mr(ho.Aft,this)),this.Gy=0,this.Eft=this.Rft[0]}vr(){for(const t of this.Rft)t.vr();ho.Yn(this.Rft),this.Eft=null,this.Cft=null}KB(){return this.Cft}h5(){return this.Eft}Pft(){return this.Rft[this.Gy-1]}Sc(){this.h5().Sc()}Fft(){const t=this.Rft,s=++this.Gy;if(s===t.length){const i=ho.Mr(ho.Aft,this);t.push(i),this.Eft=i}else{const e=t[s];e.T0(),this.Eft=e}}kft(){const t=this.Rft,s=++this.Gy,i=(s===t.length&&t.push(ho.Mr(ho.Aft,this)),t[s]);i.H0(t[s-1]),this.Eft=i}wV(){this.Eft=this.Rft[--this.Gy]}Dft(i){const e=this.Rft;for(let t=0,s=e.length;t<s;++t)e[t].Dft(i)}}}{const ro=self.Ns;ro.Aft=class extends ro.Sr{constructor(t){super(),this.Rft=t,this.Cft=this.Rft.KB(),this.Oft=this.Cft.dO().jk(),this.Lft=!0,this.oH=[],this.Bft=[]}vr(){this.Nft(),this.Rft=null,this.Cft=null,this.Oft=null}Nft(){ro.Yn(this.oH),ro.Yn(this.Bft)}KB(){return this.Cft}Wft(){return this.Lft}jft(){return this.Lft?!!this.Cft.n5():!!this.oH.length}e5(){return this.Lft?this.Cft.e5():this.oH}Vft(){return!!this.Bft.length}Uft(){return this.Bft}Hft(){const t=this.e5();return t.length?t:this.Bft}T0(){this.Lft=!0,ro.Yn(this.Bft)}Sc(){this.Lft=!0}H0(t){t.Wft()?this.T0():(this.Lft=!1,ro.eo(this.oH,t.oH),ro.Yn(this.Bft))}zft(t){this.oH.push(t)}Jft(t){this.Bft.push(t)}qft(t){this.Lft=!!t}$ft(){return this.oH}Xft(){return this.Bft}Yft(t){this.Lft=!1,ro.Yn(this.oH),this.oH.push(t)}Kft(t){this.Lft=!1,ro.eo(this.oH,t)}Zft(t){this.Lft=!1,ro.Yn(this.oH);for(const s of t)this.oH.push(s)}Qft(t,s){for(const i of s)t.has(i)||this.Bft.push(i)}t0t(t){for(const s of t)this.oH.push(s);ro.lo(this.Bft,t)}s0t(){ro.Yn(this.Bft)}i0t(t){if(t)if(this.Oft.oV().kk().e0t()){this.Wft()&&(ro.Yn(this.oH),ro.eo(this.Bft,t.KB().e5()),this.Lft=!1);const s=this.Bft.indexOf(t);-1!==s&&(this.oH.push(this.Bft[s]),this.Bft.splice(s,1))}else this.Yft(t)}Dft(t){ro.lo(this.oH,t),ro.lo(this.Bft,t)}}}{const no=self.Ns;no.h0t=class extends no.Sr{constructor(t){super(),this.r0t=t,this.Tf=this.r0t.dO(),this.Rft=[],this.Rft.push(no.Mr(no.n0t,this,null)),this.Gy=0,this.o0t=[]}vr(){for(const t of this.Rft)t.vr();no.Yn(this.Rft),no.Yn(this.o0t),this.r0t=null,this.Tf=null}Ck(){return this.r0t}dO(){return this.Tf}oV(){return this.Rft[this.Gy]}a0t(){return this.Rft}l0t(){return this.Gy}aV(t){const s=this.Rft,i=++this.Gy;if(i===s.length){const e=no.Mr(no.n0t,this,t);return s.push(e),e}{const h=s[i];return h.T0(t),h}}wV(){--this.Gy}u0t(t){this.o0t.push(t)}c0t(){this.o0t.pop()}Wk(){const t=this.o0t;return 0===t.length?null:t.at(-1)}}}{const oo=self.Ns;oo.n0t=class extends oo.Sr{constructor(t,s){super(),this.Rft=t,this.Tf=this.Rft.dO(),this.f0t=s,this.d0t=0,this.p0t=0,this.m0t=!1,this.g0t=!1,this.y0t=null,this.S0t=0,this.w0t=0,this.b0t=null}vr(){this.T0(null),this.Rft=null,this.Tf=null}T0(t){this.f0t=t,this.d0t=0,this.p0t=0,this.m0t=!1,this.g0t=!1,this.b0t=null}M0t(t,s){this.f0t=t,this.d0t=0,this.p0t=s}v0t(){this.d0t=0,this.p0t=0}kk(){return this.f0t}x0t(t){this.f0t=t}G0t(){return this.d0t}T0t(t){this.d0t=t}_0t(){return this.p0t}I0t(t){this.p0t=t}C0t(t){this.m0t=!!t}R0t(){return this.m0t}A0t(t){this.g0t=!!t}E0t(){return this.g0t}P0t(t){this.y0t=t}F0t(){return this.y0t}k0t(t,s){this.S0t=t,this.w0t=s}Vk(){return this.S0t}Uk(t){this.w0t=t}D0t(){return this.w0t}O0t(){const t=this.f0t;return!!t.L0t()||this.d0t<t.B0t()-1&&!!t.nV().length}N0t(t){this.b0t=t}W0t(){return this.b0t}}}{const ao=self.Ns;ao.j0t=class extends ao.Sr{constructor(t){super(),this.r0t=t,this.Tf=this.r0t.dO(),this.Rft=[],this.Gy=-1,this.Eft=null,this.V0t=[]}vr(){ao.Yn(this.Rft),this.r0t=null,this.Tf=null}U0t(t){this.V0t=t;const s=this.V0t.slice(0);this.Rft.push(s),this.Gy=0,this.Eft=s}Ck(){return this.r0t}dO(){return this.Tf}H0t(){return this.Eft}aV(){const t=++this.Gy,s=this.Rft;t===s.length?s.push(this.V0t.slice(0)):ao.eo(s[t],this.V0t),this.Eft=s[t]}wV(){this.Eft=this.Rft[--this.Gy]}}}{const lo=self.Ns;lo.z0t=class extends lo.Sr{constructor(t){super(),this.r0t=t,this.Tf=this.r0t.dO(),this.Rft=[],this.Gy=-1}vr(){lo.Yn(this.Rft),this.r0t=null,this.Tf=null}Ck(){return this.r0t}dO(){return this.Tf}J0t(){return 0<=this.Gy}H0t(){return this.Rft[this.Gy]}aV(){if(++this.Gy,this.Gy===this.Rft.length){const t=lo.Mr(lo.q0t,this);return this.Rft.push(t),t}{const s=this.Rft[this.Gy];return s.T0(),s}}wV(){--this.Gy}$0t(s){const i=this.Rft;for(let t=this.Gy;0<=t;--t){const e=i[t];if(e.yf()===s)return e}return null}X0t(){return this.Rft.slice(0,this.Gy+1)}}}{const uo=self.Ns;uo.q0t=class extends uo.Sr{constructor(t){super(),this.Y0t=t,this._r="",this.Gy=0,this.K0t=!1,this.Z0t=NaN}T0(){this._r="",this.Gy=0,this.K0t=!1,this.Z0t=NaN}uV(t){this._r=t}yf(){return this._r}gV(t){this.Gy=t}qF(){return this.Gy}zW(){this.K0t=!0}SV(){return this.K0t}Q0t(t){this.Z0t=t}tdt(){return this.Z0t}}}{const co=self.Ns;co.sdt=class extends co.Sr{constructor(){super(),this.Rft=[],this.Gy=-1}vr(){co.Yn(this.Rft)}H0t(){return this.Rft[this.Gy]}aV(){if(++this.Gy,this.Gy!==this.Rft.length)return this.Rft[this.Gy];{const t=[];return this.Rft.push(t),t}}wV(){--this.Gy}}}{let t=function(t,s){return t.qF()-s.qF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const fo=self.Ns;fo.idt=class extends fo.Sr{constructor(t){super(),this.Tf=t,this.edt=[],this.hdt=new Map,this.rdt=[],this.ndt=new Map,this.odt=new Map,this.adt=new Map,this.ldt=new Map,this.udt=new Map,this.cdt=new Map,this.fdt=0,this.ddt=[],this.pdt=[],this.mdt=[],this.gdt=new Map,this.ydt=new Map,this.Oft=fo.Mr(fo.h0t,this),this.Sdt=fo.Mr(fo.j0t,this),this.Y0t=fo.Mr(fo.z0t,this),this.wdt=[],this.bdt=[],this.Mdt=[],this.vdt=0,this.xdt=0,this.Gdt=0,this.Tdt=[],this._dt=[],this.Idt=[],this.Cdt=new Map,this.Rdt=new Map,self.c3_callFunction=(t,s)=>this.Adt(t,s)}vr(){this.NX(),this.Oft.vr(),this.Oft=null,this.Sdt.vr(),this.Sdt=null,fo.Yn(this.bdt),fo.Yn(this.Mdt),this.Tf=null,fo.Yn(this.edt),this.hdt.clear()}Px(t){const s=fo.Mr(fo.Edt,this,t);this.edt.push(s),this.hdt.set(s.yf().toLowerCase(),s)}Pdt(t){this.wdt.push(t)}Fdt(){for(const t of this.ydt.values())t.kdt();for(const s of this.gdt.values())s.Fdt();for(const i of this.ydt.values())i.Fdt();for(const e of this.edt)e.Fdt();for(const h of this.edt)h.rX();for(const r of this.wdt)r.Fdt(!1);fo.Yn(this.wdt),this.Sdt.U0t(this.mdt)}dO(){return this.Tf}hX(t){return this.hdt.get(t.toLowerCase())||null}Ddt(t){this.rdt.push(t),this.ndt.set(t.Odt(),t)}Ldt(t){this.odt.set(t.wJ(),t)}Bdt(t){this.adt.set(t.wJ(),t)}Ndt(t){this.ldt.set(t.wJ(),t)}Wdt(t){switch(t.jdt()){case 0:this.gdt.set(t.Vdt().toLowerCase(),t);break;case 1:this.ydt.set(t.Vdt().toLowerCase(),t)}}Udt(t){this.cdt.set(t.wJ(),t),(t.Kz()?this.ddt:this.pdt).push(t)}Hdt(i){2<=i.length&&i.sort(t);let e=this.udt.get(i.length);e||(e=[],this.udt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}zdt(t){return this.mdt.push(t.Jdt()),this.fdt++}jk(){return this.Oft}qdt(){return this.jk().oV()}kk(){return this.qdt().kk()}$dt(){const t=this.qdt(),s=t.kk();return s.Xdt(t.G0t())}Ydt(){const t=this.qdt(),s=t.kk();return s.Kdt(t._0t())}Zdt(){return this.Sdt}lV(){return this.Y0t}Qdt(t){const s=[];for(t=t.t1t();t;)fo.er(s,t.s1t()),t=t.t1t();return s}i1t(t){const s={};for(const i of this.Qdt(t))s[i.e1t()]=i.h1t();return Object.create(Object.prototype,s)}r1t(t){return this.cdt.get(t)||null}n1t(t){return this.odt.get(t)||null}o1t(t){return this.adt.get(t)||null}a1t(t){return this.ldt.get(t)||null}Rk(t){return this.gdt.get(t.toLowerCase())||null}l1t(t,s){let i=this.ydt.get((t.yf()+"."+s).toLowerCase());if(i)return i;if(!t.cJ())for(const e of t.u1t())if(i=this.ydt.get((e.yf()+"."+s).toLowerCase()))return i;return null}c1t(){return this.ddt}f1t(){return this.pdt}d1t(t){for(const s of this.ddt)s.p1t();if(t)for(const i of this.pdt)i.v2()&&i.p1t()}m1t(t){return this.ndt.get(t.toLowerCase())||null}g1t(t){const s=this.odt.get(t);return s&&s.y1t()?s:null}S1t(){return this.rdt}w1t(){for(const t of this.rdt)t.b1t()}M1t(){for(const t of this.edt)t.v1t()}x1t(t){this.M1t(),this.vdt++;for(const s of t.xY()){const i=s.P$();i&&(this.Tf.G1t(s),i.Z_(),this.Tf.T1t())}this.vdt--}async _1t(t){this.M1t(),this.vdt++;for(const s of this.I1t(t))await this.Tf.C1t(s);this.vdt--}*I1t(t){for(const s of t.xY()){const i=s.P$();i&&(this.Tf.G1t(s),yield*i.R1t(),this.Tf.T1t())}}A1t(t,s,i,e){let h=!1;if(!t.TD())return this.E1t(s,i,e);this.xdt++;for(const r of t.xY()){const n=r.P$();if(n){this.Tf.G1t(r);for(const a of n.P1t()){const l=a.A1t(s,i,e);h=h||l}const o=n.A1t(s,i,e);h=h||o,this.Tf.T1t()}}return this.xdt--,h}*F1t(t,s,i,e){let h=!1;if(!t.TD())return this.E1t(s,i,e);this.xdt++;for(const r of t.xY()){const n=r.P$();if(n){this.Tf.G1t(r);for(const a of n.P1t()){const l=yield*a.F1t(s,i,e);h=h||l}const o=yield*n.F1t(s,i,e);h=h||o,this.Tf.T1t()}}return this.xdt--,h}E1t(t,s,i){return this.bdt.push([t,s,i]),!1}k1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.Mdt.push([t,s,i,e]),h}*D1t(){if(this.Tf.O1t())throw new Error("should not be in breakpoint");const t=this.Tf.CD();for(;this.Mdt.length;){const[s,i,e,h]=this.Mdt.shift(),r=yield*this.F1t(t,s,i,e);h(r)}}async L1t(){for(const t of this.D1t())await this.Tf.C1t(t)}B1t(t,i,e,h){let r=!1,s=t.TD(),n=s.P$();if(n){this.xdt++,this.Tf.G1t(s);const o=n.P1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].B1t(i,e,h);r=r||l}const a=n.B1t(i,e,h);return r=r||a,this.Tf.T1t(),this.xdt--,r}}*N1t(t,i,e,h){let r=!1,s=t.TD(),n=s.P$();if(n){this.xdt++,this.Tf.G1t(s);const o=n.P1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].N1t(i,e,h);r=r||l}const a=yield*n.N1t(i,e,h);return r=r||a,this.Tf.T1t(),this.xdt--,r}}W1t(){return this.xdt}j1t(){return 0<this.W1t()}V1t(){return++this.xdt}U1t(){--this.xdt}H1t(){return 0<this.vdt}f5(){return this.H1t()||this.j1t()}RX(t){for(const[s,i,e]of this.bdt)this.A1t(t,s,i,e);fo.Yn(this.bdt)}u5(t){t?this.Gdt++:this.Gdt--}h4(){return 0<this.Gdt}z1t(i){for(let t=0,s=i.length;t<s;++t)i[t].J1t().Sc()}q1t(i){for(let t=0,s=i.length;t<s;++t)i[t].J1t().Fft()}dV(i){for(let t=0,s=i.length;t<s;++t)i[t].J1t().kft()}mV(i){for(let t=0,s=i.length;t<s;++t)i[t].J1t().wV()}Dk(s){const i=new Set,e=this.Oft.a0t(),h=this.Oft.l0t();for(let t=0;t<=h;++t){const r=e[t].W0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}$1t(t){const s=new Set([...t]),i=this.Dk(s);if(0<i.size){for(const e of i)e.J1t().Fft();return[...i]}return null}X1t(){const t=fo.Mr(fo.Y1t,this);return this.Tdt.push(t),t}K1t(){return this.Tdt}Z1t(){if(this.Tdt.length){let i=this.qdt(),e=!1;this.vdt++;for(let t=0,s=this.Tdt.length;t<s;++t){const h=this.Tdt[t];h.Q1t()&&h.tpt(i),h.spt()&&(e=!0)}e&&(this.ipt(),i.T0(null)),this.vdt--}}async ept(){if(this.Tdt.length){let i=this.qdt(),e=!1;this.vdt++;for(let t=0,s=this.Tdt.length;t<s;++t){const h=this.Tdt[t];h.Q1t()&&await h.hpt(i),h.spt()&&(e=!0)}e&&(this.ipt(),i.T0(null)),this.vdt--}}ipt(){const t=fo.ao(this.Tdt,t=>t.spt());for(const s of t)s.vr()}NX(){for(const t of this.Tdt)t.vr();fo.Yn(this.Tdt)}rpt(t){for(const s of this.Tdt)s.Dft(t);for(const i of t){const e=this.Rdt.get(i);if(this.Rdt.delete(i),e)for(const{resolve:h}of e.npt.values())h(!0)}}opt(t){this._dt.push({promise:t,apt:this.W1t()})}lpt(){fo.Yn(this._dt)}upt(){const s=this.W1t();this._dt=this._dt.filter(t=>t.apt<=s)}cpt(){const t=Promise.all(this._dt.map(t=>t.promise));return this._dt=[],t}Hk(t){const s=t.toLowerCase();this.Idt.push(s),this.Tf.N4(fo.CX.IX._X.fpt,null),this.Idt.pop();for(const e of this.Tf.Ck().K1t())e.dpt()&&e.ppt()===s&&e.mpt();const i=this.Cdt.get(s);i&&(i.resolve(),this.Cdt.delete(s))}Jk(t){const i=t.toLowerCase(),s=this.Cdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.Cdt.set(i,{promise:t,resolve:s}),t}}gpt(){if(0===this.Idt.length)throw new Error("not in a signal");return this.Idt.at(-1)}ypt(t){let s=this.Rdt.get(t);return s||(s={Spt:[],npt:new Map},this.Rdt.set(t,s)),s}G4(t,s){const i=this.ypt(t),e=s.toLowerCase();i.Spt.push(e),this.Tf.N4(t.qL().bpt()._X.wpt,t),i.Spt.pop();for(const r of this.Tf.Ck().K1t())r.Mpt()&&r.ppt()===e&&r.vpt(t);const h=i.npt.get(e);h&&(h.resolve(!1),i.npt.delete(e)),0===i.Spt.length&&0===i.npt.size&&this.Rdt.delete(t)}T4(t,s){const i=this.ypt(t),e=s.toLowerCase(),h=i.npt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.npt.set(e,{promise:t,resolve:s}),t}}xpt(t){const s=this.ypt(t);if(s&&0!==s.Spt.length)return s.Spt.at(-1);throw new Error("not in a signal")}Lq(){return{groups:this.Gpt(),cnds:this.Tpt(),acts:this._pt(),vars:this.Ipt(),waits:this.Cpt()}}Bq(t){this.Rpt(t.groups),this.Apt(t.cnds),this.Ept(t.acts),this.Ppt(t.vars),this.Fpt(t.waits)}Gpt(){const t={};for(const s of this.S1t())t[s.wJ().toString()]=s.kpt();return t}Rpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.g1t(e);h&&h.Dpt(i)}}Tpt(){const t={};for(const[s,i]of this.adt){const e=i.Lq();e&&(t[s.toString()]=e)}return t}Apt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.adt)r.Bq(s.get(h)||null)}_pt(){const t={};for(const[s,i]of this.ldt){const e=i.Lq();e&&(t[s.toString()]=e)}return t}Ept(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.ldt)r.Bq(s.get(h)||null)}Ipt(){const t={};for(const[s,i]of this.cdt)i.Opt()||!i.Kz()&&!i.v2()||(t[s.toString()]=i.jet());return t}Ppt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.r1t(e);h&&h.vht(i)}}Cpt(){return this.Tdt.filter(t=>!t.Lpt()).map(t=>t.Lq())}Fpt(t){this.NX();for(const s of t){const i=fo.Y1t.Bpt(this,s);i&&this.Tdt.push(i)}}Npt(){return[...this.Tf.CD().xY()].map(t=>t.P$()).filter(t=>t).map(t=>t.Wpt())}jpt(t){for(;t;){const s=t.t1t();if(s instanceof fo.Vpt)return s;t=s}return null}Adt(t,s){Array.isArray(s)||(s=[]);const i=this.Rk(t.toLowerCase());if(!i)return null;if(!i.fc())return i.Ak();const e=i.Upt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Jdt()),s.length<e.length;);const h=i.Pk();return h.Ok(h.Fk(),!1,i.Bk(),i.Ak(),...s)}}}{const po=self.Ns;po.Edt=class extends po.Sr{constructor(t,s){super(),this.r0t=t,this.Tf=t.dO(),this._r=s[0],this.Hpt=[],this.zpt=new Map,this.Jpt=new Map,this.qpt=new Map,this.$pt=!1,this.Xpt=[],this.Ypt=[],this.Kpt=new Set;for(const i of s[1])this.Zpt(i,null,this.Hpt);this.Qpt=this.Tf.X4()?{type:"sheet",name:this._r,tmt:0,children:[]}:null}vr(){this.r0t=null,this.Tf=null}Zpt(t,s,i){switch(t[0]){case 0:case 3:this.smt(t,s,i);break;case 1:this.imt(t,s,i);break;case 2:this.emt(t,s,i);break;case 4:this.hmt(t,s);break;case 5:this.rmt(t,s,i);break;case 6:this.nmt(t,s);break;default:throw new Error("invalid event type")}}smt(t,s,i){const e=po.omt.Px(this,s,t);if(e.e0t()){i.push(e);const h=e.amt();for(let t=0,s=h.length;t<s;++t)h[t].lmt()&&this.umt(e,t)}else e.lmt()?this.umt(e,0):i.push(e)}hmt(t,s){const i=po.Vpt.cmt(this,s,t);this.r0t.Wdt(i)}nmt(t,s){const i=po.Vpt.fmt(this,s,t);this.r0t.Wdt(i)}imt(t,s,i){const e=po.dmt.Px(this,s,t);i.push(e)}emt(t,s,i){const e=po.pmt.Px(this,s,t);i.push(e)}rmt(t,s,i){const e=po.mmt.Px(this,s,t);i.push(e)}umt(h,r){h.e0t()||this.r0t.Pdt(h);const n=h.Xdt(r),o=n.gmt(),a=n.KB();if(n.ymt()){let t=this.Jpt.get(a),s=(t||(t=new Map,this.Jpt.set(a,t)),n.Smt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.zpt.get(a),s=(t||(t={wmt:new Map,bmt:new Map},this.zpt.set(a,t)),n.X6()),i,e=(s?(i=t.bmt.get(s))||(i=new Map,t.bmt.set(s,i)):i=t.wmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Fdt(){const i=this.Hpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.omt&&i[t+1].Mmt();i[t].Fdt(e)}}vmt(t){this.Xpt.push(t)}rX(){po.Yn(this.Ypt),this.xmt(this),this.Kpt.clear()}xmt(t){const s=t.Ypt,i=t.Kpt;for(const e of this.Xpt){const h=e.Gmt();e.Tmt()&&t!==h&&!i.has(h)&&(i.add(h),h.xmt(t),s.push(h))}}P1t(){return this.Ypt}Ck(){return this.r0t}dO(){return this.Tf}yf(){return this._r}_mt(t,s){this.qpt.set(s,t)}Imt(t){return this.qpt.get(t)||null}v1t(){this.$pt=!1}Z_(){if(!this.$pt){const t=this.Tf,s=t.Cmt(),i=s?performance.now():0,e=(this.$pt=!0,this.Ck()),h=e.qdt();for(const r of this.Hpt)r.Z_(h),e.z1t(r.nV()),e.lpt(),t.p5();h.T0(null),s&&(this.Qpt.tmt+=performance.now()-i)}}*R1t(){if(!this.$pt){this.$pt=!0;const t=this.Tf,s=this.Ck(),i=s.qdt();for(const e of this.Hpt)yield*e.R1t(i),s.z1t(e.nV()),s.lpt(),t.p5();i.T0(null)}}A1t(e,h,r){if(!h)return this.Rmt(e,h,null,null);{let t=h.KB(),s=!1,i=this.Rmt(e,h,t,r);s=s||i;for(const n of t.u1t())i=this.Rmt(e,h,n,r),s=s||i}}Rmt(t,s,i,e){const h=this.zpt.get(i);if(!h)return!1;const r=e?h.bmt.get(e):h.wmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Amt(s,a,l);o=o||u}return o}*F1t(e,h,r){if(!h)return yield*this.Emt(e,h,null,null);{let t=h.KB(),s=!1,i=yield*this.Emt(e,h,t,r);s=s||i;for(const n of t.u1t())i=yield*this.Emt(e,h,n,r),s=s||i}}*Emt(t,s,i,e){const h=this.zpt.get(i);if(!h)return!1;const r=e?h.bmt.get(e):h.wmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Pmt()?this.Amt(s,a,l):yield*this.Fmt(s,a,l),o=o||t}return o}B1t(t,s,i){const e=s.KB(),h=this.Jpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Amt(null,a[0],a[1]);o=o||l}return o}*N1t(t,s,i){const e=s.KB(),h=this.Jpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Pmt()?this.Amt(null,s,i):yield*this.Fmt(null,s,i),o=o||e}return o}Amt(t,s,i){let e=this.Tf,h=this.r0t,r=h.kk(),n=h.jk(),o=h.W1t(),a=!1;r&&h.q1t(r.Fk()),h.q1t(s.Fk());const l=1<o,u=(l&&h.Zdt().aV(),n.aV(s));if(t){const f=s.amt()[i].KB(),d=f.h5();d.Yft(t),t.a4()&&t.kmt()}let c=!0;if(s.HN()){const p=s.Dmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Omt(u)){c=!1;break}}return c&&(s.e0t()?s.Lmt(u,i):s.Z_(u),a=u.R0t()),n.wV(),l&&h.Zdt().wV(),h.mV(s.Fk()),r&&h.mV(r.Fk()),r||1!==o||(h.lpt(),h.h4())||e.p5(),a}*Fmt(t,s,i){let e=this.Tf,h=this.r0t,r=h.kk(),n=h.jk(),o=h.W1t(),a=!1;r&&h.q1t(r.Fk()),h.q1t(s.Fk());const l=1<o,u=(l&&h.Zdt().aV(),n.aV(s));if(t){const f=s.amt()[i].KB(),d=f.h5();d.Yft(t),t.a4()&&t.kmt()}let c=!0;if(s.HN()){const p=s.Dmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Bmt(u))){c=!1;break}}return c&&(s.e0t()?yield*s.Nmt(u,i):yield*s.R1t(u),a=u.R0t()),n.wV(),l&&h.Zdt().wV(),h.mV(s.Fk()),r&&h.mV(r.Fk()),r||1!==o||(h.lpt(),h.h4())||e.p5(),a}Wpt(){return this.Qpt}}}{let u=function(t,s){return!0};u;const mo=self.Ns,go=[];function*N(t,s){return!0}mo.omt=class extends mo.Sr{constructor(t,s,i){super(),this.Kq=t,this.Tf=t.dO(),this.Wmt=s,this.jmt=null,this.Oft=this.Tf.Ck().jk(),this.Vmt=[],this.Umt=[],this.Hmt=!1,this.zmt=!1,this.Jmt=!1,this.qmt=!1,this.$mt=!!i[2],this.Xmt=!1,this.Ymt=null,this.Kmt=[],this.irt=[],this.Zmt=[],this.Qmt=u,this.tgt=N,this.sgt=!1,this.igt=!1,this.egt="",this.hgt=!1,this.rgt=null,this.Qpt=null,this.NH=i[4],this.ngt=i[5],this.Kq._mt(this,this.ngt),this.ogt=this.Tf.X4()?{agt:i[3][0],lgt:i[3][1],ugt:!1,cgt:!1,fgt:!1,dgt:!1}:null,this.Ck().Ldt(this),3===i[0]&&this.pgt(i[1]);let e=0;for(const h of i[6]){const r=mo.mgt.Px(this,h,e++);this.Kmt.push(r),this.ggt(r.KB())}e=0;for(const n of i[7]){const o=mo.ygt.Px(this,n,e++);this.irt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Kq.Zpt(l,this,this.Zmt)}this.Kmt.length&&(this.Xmt=null===this.Kmt[0].KB()&&this.Kmt[0].gmt()===mo.CX.IX._X.Sgt),0===this.Kmt.length&&(this.Kmt=go),0===this.irt.length&&(this.irt=go),0===this.Zmt.length&&(this.Zmt=go)}static Px(t,s,i){return mo.Mr(mo.omt,t,s,i)}pgt(t){this.sgt=!0,this.igt=!!t[0],this.hgt=this.igt,this.egt=t[1].toLowerCase(),this.rgt=[],this.Ck().Ddt(this),this.Tf.X4()&&(this.Qpt={type:"group",name:t[1],tmt:0,children:[]})}wgt(t){this.rgt.push(t)}bgt(t,s){for(const i of t.z$().EX())s.includes(i)||s.push(i)}Mgt(t,s){if(t)if(s.includes(t)||s.push(t),t.cJ())for(const i of t.vgt())i.a4()&&this.bgt(i,s);else t.a4()&&this.bgt(t,s)}ggt(t){this.Mgt(t,this.Vmt)}xgt(t){this.Mgt(t,this.Umt)}Ggt(){this.Vmt=this.Tf.uJ()}Fdt(t){this.qmt=!!t,this.Tgt(),this._gt();for(const s of this.Kmt)s.Fdt();if(0<this.irt.length){let t=!1;for(const e of this.irt)e.Fdt(),e.Igt()&&(t=!0);t?(this.Qmt=this.Cgt,this.tgt=this.Rgt):(this.Qmt=this.Agt,this.tgt=this.Egt)}const i=this.Zmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.omt&&i[t+1].Mmt();i[t].Fdt(h)}this.ogt&&this.Pgt(),this.Qpt&&this.Fgt().Wpt().children.push(this.Qpt)}Wpt(){return this.Qpt}Fgt(){let t=this.HN();for(;t;){if(t.y1t())return t;t=t.HN()}return this.Kq}Pgt(){const t=this.ogt;t.ugt=this.Kmt.every(t=>t.Pmt()),t.cgt=this.irt.every(t=>t.Pmt()),t.fgt=this.Zmt.every(t=>t.Pmt()),t.dgt=t.ugt&&t.cgt&&t.fgt}kgt(){let t=this;for(;t.Pgt(),t=t.HN(););}Tgt(){if(this.y1t()){let t=this.HN();for(this.Jmt=!0;t;){if(!t.y1t()){this.Jmt=!1;break}t=t.HN()}}}Dgt(){const t=this.Tf.uJ();if(this.Vmt===t)this.Umt=t;else{this.Umt=mo.fo(this.Vmt);let t=this.HN();for(;t;){for(const i of t.Vmt)this.xgt(i);t=t.HN()}const s=this.Ck();this.Vmt=s.Hdt(this.Vmt),this.Umt=s.Hdt(this.Umt)}}_gt(){if(this.Ogt()){this.Ymt=[];let t=this.HN();for(;t;)this.Ymt.push(t),t=t.HN();this.Ymt.reverse()}}Lgt(){this.zmt=!0,this.Wmt&&this.Wmt.Lgt()}L0t(){return this.zmt}nV(){return this.Vmt}Fk(){return this.Hmt||(this.Hmt=!0,this.Dgt()),this.Umt}Bgt(t){return this.Vmt.includes(t)}Dmt(){return this.Ymt}P$(){return this.Kq}Ck(){return this.Kq.Ck()}dO(){return this.Tf}HN(){return this.Wmt}Ngt(t){this.jmt=t}t1t(){return this.jmt||this.Wmt}Wgt(){return this.ngt}jgt(){return this.ogt&&this.ogt.lgt}Vgt(){return this.jgt()&&this.ogt.agt}Ugt(t){this.ogt.agt=!!t,this.kgt()}y1t(){return this.sgt}Hgt(){return this.Jmt}Mmt(){return this.Xmt}zgt(){return this.qmt}Odt(){return this.egt}kpt(){return this.hgt}b1t(){this.Dpt(this.igt)}Dpt(t){if(t=!!t,!this.sgt)throw new Error("not a group");if(this.hgt!==t){this.hgt=t;for(const s of this.rgt)s.Jgt();if(this.rgt.length){const i=this.Tf.zD(),e=i.P$();e&&e.rX()}}}wJ(){return this.NH}e0t(){return this.$mt}lmt(){return this.Kmt.length&&this.Kmt[0].lmt()}qgt(){return this.jmt&&this.jmt instanceof mo.Vpt}Ogt(){return this.qgt()||this.Kmt.some(t=>t.lmt())}amt(){return this.Kmt}B0t(){return this.Kmt.length}Xdt(t){if((t=Math.floor(t))<0||t>=this.Kmt.length)throw new RangeError("invalid condition index");return this.Kmt[t]}$gt(t){return this.Xdt(t)}Xgt(t){let s=t.qF();if(0!==s){--s;const i=t.Ygt()?t.Kgt():t.KB();for(;0<=s;--s){const e=this.Kmt[s];if(i===e.KB()||e.Ygt()&&e.Kgt()===i)return!1}}return!0}Zgt(){return this.irt}Qgt(){return this.irt.length}Kdt(t){if((t=Math.floor(t))<0||t>=this.irt.length)throw new RangeError("invalid action index");return this.irt[t]}tyt(s){s=Math.floor(s);const t=this.irt.find(t=>t.syt()===s);if(t)return t;throw new RangeError("invalid action debug index")}iyt(t){return 0<=(t=Math.floor(t))&&t<this.irt.length}eyt(){return this.Zmt}s1t(){return this.Zmt.filter(t=>t instanceof mo.dmt)}Omt(i){i.x0t(this);let e=this.Kmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.T0t(t),r.aW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Z_())h=!0;else if(!this.$mt)return!1}return!this.$mt||h}Lmt(t,s){t.x0t(this),t.T0t(s),this.Kmt[s].Z_()&&(this.Qmt(t,0)&&this.hyt(t),t.C0t(!0))}*Bmt(i){i.x0t(this);let e=this.Kmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.T0t(t),r.aW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Pmt()?r.Z_():yield*r.R1t())h=!0;else if(!this.$mt)return!1}return!this.$mt||h}*Nmt(t,s){t.x0t(this),t.T0t(s);let i=this.Kmt[s];if(i.Pmt()?i.Z_():yield*i.R1t())(this.ryt()?this.Qmt(t,0):yield*this.tgt(t,0))&&(this.nyt()?this.hyt():yield*this.oyt()),t.C0t(!0)}Z_(t){t.x0t(this),this.Xmt||t.A0t(!1),this.$mt?this.ayt(t):this.lyt(t)}*R1t(t){(this.Vgt()||this.Tf.uyt())&&(yield this),t.x0t(this),this.Xmt||t.A0t(!1),this.$mt?yield*this.cyt(t):yield*this.fyt(t)}ayt(i){let e=this.Kmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.lmt()){i.T0t(t);const n=r.Z_();h=h||n}}i.C0t(h),h&&(this.Qmt(i,0)&&this.hyt(i),this.qmt)&&i.A0t(!0)}*cyt(i){let e=this.Kmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.lmt()){i.T0t(s);let t;t=r.Pmt()?r.Z_():yield*r.R1t(),h=h||t}}if(i.C0t(h),h)(this.ryt()?this.Qmt(i,0):yield*this.tgt(i,0))&&(this.nyt()?this.hyt():yield*this.oyt()),this.qmt&&i.A0t(!0)}lyt(i){const e=this.Kmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.T0t(t),h.Z_());if(!r)return void i.C0t(!1)}i.C0t(!0),this.Qmt(i,0)&&this.hyt(i),i.R0t()&&this.qmt&&i.A0t(!0)}*fyt(i){const e=this.Kmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.T0t(t);if(!(h.Pmt()?h.Z_():yield*h.R1t()))return void i.C0t(!1)}i.C0t(!0);(this.ryt()?this.Qmt(i,0):yield*this.tgt(i,0))&&(this.nyt()?this.hyt():yield*this.oyt()),i.R0t()&&this.qmt&&i.A0t(!0)}Agt(i,e){const h=this.irt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.I0t(t),r.Z_()}return!0}*Egt(i,e){const h=this.irt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.I0t(t),r.Pmt()?r.Z_():yield*r.R1t()}return!0}Cgt(i,e){const h=this.Ck(),r=this.irt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.I0t(t),n.Z_());if(n.dyt()&&!0===o)return!1;n.pyt()&&o instanceof Promise&&h.opt(o)}return!0}*Rgt(i,e){const h=this.Ck(),r=this.irt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.I0t(s);let t;if(t=n.Pmt()?n.Z_():yield*n.R1t(),n.dyt()&&!0===t)return!1;n.pyt()&&t instanceof Promise&&h.opt(t)}return!0}myt(t){this.Qmt(t,t._0t())&&this.hyt()}*gyt(t){(yield*this.tgt(t,t._0t()))&&(yield*this.oyt())}hyt(){if(this.Zmt.length){const t=this.y1t()&&this.Tf.Cmt(),s=t?performance.now():0,i=this.Oft,e=i.aV(this);this.zmt?this.yyt(e):this.Syt(e),i.wV(),t&&(this.Qpt.tmt+=performance.now()-s)}}yyt(e){const h=this.sgt,r=this.Jmt,n=this.Ck(),o=this.Zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.nV(),u=!r||!h&&t<i;u&&n.dV(l),a.Z_(e),u?n.mV(l):n.z1t(l)}}Syt(i){const e=this.Zmt;for(let t=0,s=e.length;t<s;++t)e[t].Z_(i)}*oyt(){if(this.Zmt.length){const t=this.Oft,s=t.aV(this);this.zmt?yield*this.wyt(s):yield*this.byt(s),t.wV()}}*wyt(e){const h=this.sgt,r=this.Jmt,n=this.Ck(),o=this.Zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.nV(),u=!r||!h&&t<i;u&&n.dV(l),yield*a.R1t(e),u?n.mV(l):n.z1t(l)}}*byt(i){const e=this.Zmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].R1t(i)}pV(i,e){e.v0t();const h=this.Kmt;if(!this.e0t())for(let t=i.G0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.T0t(t),r.Z_());if(!n)return!1}return this.Qmt(e,0)&&this.hyt(e),!0}*Myt(i,e){e.v0t();const h=this.Kmt;if(!this.e0t())for(let t=i.G0t()+1,s=h.length;t<s;++t){const r=h[t];e.T0t(t);if(!(r.Pmt()?r.Z_():yield*r.R1t()))return!1}return(this.ryt()?this.Qmt(e,0):yield*this.tgt(e,0))&&(this.nyt()?this.hyt():yield*this.oyt()),!0}Pmt(){return!this.Vgt()&&!this.Tf.uyt()&&this.ogt.dgt}ryt(){return!this.Tf.uyt()&&this.ogt.cgt}nyt(){return!this.Tf.uyt()&&this.ogt.fgt}vyt(i){if(this.HN()){const e=this.Dmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Omt(i))return!1}return!0}*xyt(i){if(this.HN()){const e=this.Dmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Bmt(i)))return!1}return!0}Gyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ri(0));t.Zdt().aV(),this.jmt.Tyt(e)}else this.jmt._yt(s);else i&&t.Zdt().aV()}Iyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.Tf,l=this.Oft,u=a.Ck(),c=this.jmt,f=c.pyt(),d=u.V1t(),p=1<d;if(this.Gyt(u,s,p),n&&(i?u.dV(t):u.q1t(t)),null!==e){if(e.Cyt){const g=i?e.Cyt.h5():e.Cyt.J1t().Pft(),y=e.Ryt.h5();y.Kft(g.e5()),y.s0t(),i||e.Ryt.Ayt()}else if(e.Eyt){const S=e.Eyt.h5();S.Kft(e.Pyt),S.s0t()}e.Fyt&&(o=u.$1t(t))}const m=l.aV(this);return i&&m.N0t(t),this.vyt(m)&&(m.x0t(this),f&&([r,h]=c.kyt()),this.lyt(m),f)&&c.Dyt(r),l.wV(),p&&u.Zdt().wV(),null!==o&&u.mV(o),n&&u.mV(t),u.U1t(),f||u.upt(),h}*Oyt(t,s,i,e){let h,r,n=((this.Vgt()||this.Tf.uyt())&&(yield this),0<t.length),o=null,a=this.Tf,l=this.Oft,u=a.Ck(),c=this.jmt,f=c.pyt(),d=u.V1t(),p=1<d;if(this.Gyt(u,s,p),n&&(i?u.dV(t):u.q1t(t)),null!==e){if(e.Cyt){const g=i?e.Cyt.h5():e.Cyt.J1t().Pft(),y=e.Ryt.h5();y.Kft(g.e5()),y.s0t(),i||e.Ryt.Ayt()}else if(e.Eyt){const S=e.Eyt.h5();S.Kft(e.Pyt),S.s0t()}e.Fyt&&(o=u.$1t(t))}const m=l.aV(this);return i&&m.N0t(t),(yield*this.xyt(m))&&(m.x0t(this),f&&([r,h]=c.kyt()),yield*this.fyt(m),f)&&c.Dyt(r),l.wV(),p&&u.Zdt().wV(),null!==o&&u.mV(o),n&&u.mV(t),u.U1t(),f||u.upt(),h}Lyt(t,s){const i=this.Fk(),e=0<i.length,h=this.Tf,r=this.Oft,n=h.Ck(),o=n.V1t(),a=1<o,l=(a&&n.Zdt().aV(),this.jmt.Tyt(t),e&&(s?n.dV(i):n.q1t(i)),r.aV(this));this.vyt(l)&&(l.x0t(this),this.lyt(l)),r.wV(),a&&n.Zdt().wV(),e&&n.mV(i),n.U1t(),n.upt()}*Byt(t,s){(this.Vgt()||this.Tf.uyt())&&(yield this);const i=this.Fk(),e=0<i.length,h=this.Tf,r=this.Oft,n=h.Ck(),o=n.V1t(),a=1<o,l=(a&&n.Zdt().aV(),this.jmt.Tyt(t),e&&(s?n.dV(i):n.q1t(i)),r.aV(this));(yield*this.xyt(l))&&(l.x0t(this),yield*this.fyt(l)),r.wV(),a&&n.Zdt().wV(),e&&n.mV(i),n.U1t(),n.upt()}Ok(t,s,i,e,...h){let r,n,o=0<t.length,a=this.Tf,l=this.Oft,u=a.Ck(),c=this.jmt,f=c.pyt(),d=u.V1t(),p=1<d,m=(p&&u.Zdt().aV(),0<h.length&&this.jmt.Tyt(h),o&&(s?u.dV(t):u.q1t(t)),l.aV(this));return m.k0t(i,e),l.u0t(m),a.cV(!1),this.vyt(m)&&(m.x0t(this),f&&([n,r]=c.kyt()),this.lyt(m),f)&&c.Dyt(n),a.cV(!0),l.wV(),l.c0t(),p&&u.Zdt().wV(),o&&u.mV(t),u.U1t(),f||u.upt(),r||m.D0t()}}}{let e=self.Ns,t=[],s=!1;e.mmt=class extends e.Sr{constructor(t,s,i){super();const e=t.dO(),h=t.Ck(),r=(this.Kq=t,this.r0t=h,this.Tf=t.dO(),this.Wmt=s,e.Nyt(i[1]));this.Wyt=r,this.ngt=i[2],this.Kq._mt(this,this.ngt),this.ogt=e.X4()?{agt:i[3][0],lgt:i[3][1]}:null}static Px(t,s,i){return e.Mr(e.mmt,t,s,i)}Fdt(){const t=this.Wyt,s=this.Tf.Ck().i1t(this);this.Wyt=t.bind(null,this.Tf.wL(),s)}HN(){return this.Wmt}t1t(){return this.Wmt}P$(){return this.Kq}Wgt(){return this.ngt}jgt(){return this.ogt&&this.ogt.lgt}Vgt(){return this.jgt()&&this.ogt.agt}Ugt(t){this.ogt.agt=!!t}Mmt(){return!1}nV(){return t}Fk(){return this.Wmt?this.Wmt.Fk():t}Z_(t){t.x0t(this),this.r0t.opt(this.jyt())}async jyt(){try{await this.Wyt()}catch(t){console.error(`Unhandled exception running script %c${this.P$().yf()}, event ${this.Wgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*R1t(t){t.x0t(this),(this.Vgt()||this.Tf.uyt())&&(yield this),this.Z_(t)}Pmt(){return!this.Vgt()&&!this.Tf.uyt()}static Vyt(){return s}static Uyt(){s=!0}}}{const yo=self.Ns;yo.Vpt=class extends yo.Sr{constructor(t,s,i){super(),this.Kq=t,this.Tf=t.dO(),this.Wmt=s,this.Hyt=0,this.zyt="",this.Jyt=0,this.qyt=[],this.$yt=!0,this.Xyt="",this.Cft=null,this.Yyt=!1,this.Kyt=[],this.Zyt=!1,this.Qyt=!1,this.tSt=0,this.sSt=-1,this.iSt=new Map,this.eSt=yo.omt.Px(t,s,i),this.eSt.Ngt(this)}hSt(t){this.Hyt=0,this.zyt=t[0],this.Jyt=t[1],this.qyt=t[2].map(t=>yo.dmt.Px(this.Kq,this,t)),this.$yt=t[3],this.Qyt=t[4],this.Zyt=t[5]}rSt(t){this.Hyt=1,this.Xyt=t[1],this.Cft=this.Tf.Wz(t[2]),this.eSt.ggt(this.Cft),this.zyt=this.Cft.yf()+"."+this.Xyt,this.Jyt=t[3],this.qyt=t[4].map(t=>yo.dmt.Px(this.Kq,this,t)),this.$yt=t[5],this.Qyt=t[6],this.Zyt=t[7],this.Cft.nSt(this)}static cmt(t,s,i){const e=yo.Mr(yo.Vpt,t,s,i),h=i[1];return e.hSt(h),e}static fmt(t,s,i){const e=yo.Mr(yo.Vpt,t,s,i),h=i[1];return e.rSt(h),e}kdt(){if(this.Cft&&this.Cft.cJ())for(const t of this.Cft.vgt())if(t.oSt(this.Xyt)){this.Yyt=!0;break}}Fdt(){for(const t of this.qyt)t.Fdt();this.eSt.Fdt(!1)}jdt(){return this.Hyt}s1t(){return this.qyt}Upt(){return this.qyt}Ek(){return this.qyt.length}aSt(t){this.Kyt.push(t)}lSt(){return this.Kyt}_yt(i){const e=this.qyt;for(let t=0,s=e.length;t<s;++t)e[t].vht(i[t].ri(0))}Tyt(i){const e=this.qyt;for(let t=0,s=e.length;t<s;++t)e[t].vht(i[t])}uSt(){return this.qyt.map(t=>t.jet())}HN(){return this.Wmt}t1t(){return this.Wmt}Vdt(){return this.zyt}cSt(){return this.Xyt}fSt(){return this.Yyt}Bk(){return this.Jyt}KB(){return this.Cft}fc(){return this.$yt}Ak(){switch(this.Jyt){case 0:return null;case 2:return"";default:return 0}}Pk(){return this.eSt}Lk(){return this.Zyt}pyt(){return this.Qyt}kyt(){const t=this.tSt++;this.sSt=t;let s,i=new Promise(t=>s=t);return this.iSt.set(t,{resolve:s,dSt:0}),[t,i]}Dyt(t){const s=this.iSt.get(t);0===s.dSt&&(s.resolve(),this.iSt.delete(t)),this.sSt=-1}pSt(){const t=this.iSt.get(this.sSt);return t.dSt++,this.sSt}mSt(t){this.sSt=t;const s=this.iSt.get(t);s.dSt--}gSt(t,s){const i=new Map,e=[];for(const h of this.Cft.h5().e5()){const r=h.KB();if(r.oSt(this.Xyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.eSt.Iyt(t,s,this.Zyt,{Eyt:this.Cft,Pyt:e}),0<i.size)for(const[o,a]of i){const l=o.ySt(this.Xyt).Pk(),u=[...new Set([...t,...l.nV()])];l.Iyt(u,s,this.Zyt,{Eyt:o,Pyt:a})}}*SSt(t,s){const i=new Map,e=[];for(const h of this.Cft.h5().e5()){const r=h.KB();if(r.oSt(this.Xyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.eSt.Oyt(t,s,this.Zyt,{Eyt:this.Cft,Pyt:e})),0<i.size)for(const[o,a]of i){const l=o.ySt(this.Xyt).Pk(),u=[...new Set([...t,...l.nV()])];yield*l.Oyt(u,s,this.Zyt,{Eyt:o,Pyt:a})}}}}{const So=self.Ns,wo=[];So.dmt=class extends So.Sr{constructor(t,s,i){super();const e=t.Ck();this.Kq=t,this.r0t=e,this.Tf=t.dO(),this.Wmt=s,this.Sdt=e.Zdt(),this._r=i[1],this.Ff=i[2],this.wSt=i[3],this.zv=!!i[4],this.bSt=!!i[5],this.MSt=s instanceof So.Vpt,this.NH=i[6],this.vSt=this.Tf.e1t(i[8]),this.xSt=t=>this.vht(t),this.GSt=()=>this.jet(),this.TSt=!this.Wmt||this.zv||this.bSt,this.Zht=this.wSt,this._St=-1,this.ISt()&&(this.Zht=this.Zht?1:0),!this.CSt()||this.v2()||this.Opt()||(this._St=e.zdt(this)),e.Udt(this)}static Px(t,s,i){return So.Mr(So.dmt,t,s,i)}Fdt(){if(this.CSt()&&!this.v2()&&!this.Opt()&&!this.RSt()){const t=this.r0t.jpt(this);t&&t.aSt(this)}}yf(){return this._r}e1t(){return this.vSt}HN(){return this.Wmt}t1t(){return this.HN()}Kz(){return!this.HN()}CSt(){return!this.Kz()}RSt(){return this.MSt}v2(){return this.zv}Opt(){return this.bSt}ge(){return 0===this.Ff}Ie(){return 1===this.Ff}ISt(){return 2===this.Ff}Mmt(){return!1}wJ(){return this.NH}Jdt(){return this.wSt}nV(){return wo}Z_(t){!this.CSt()||this.v2()||this.Opt()||this.vht(this.Jdt())}Pmt(){return!0}*R1t(t){this.Z_(t)}vht(t){this.ge()?"number"!=typeof t&&(t=parseFloat(t)):this.Ie()?"string"!=typeof t&&(t=t.toString()):this.ISt()&&(t=t?1:0),this.TSt?this.Zht=t:this.Sdt.H0t()[this._St]=t}jet(){return this.TSt?this.Zht:this.Sdt.H0t()[this._St]}ASt(){let t=this.jet();return this.ISt()?!!t:t}p1t(){this.Zht=this.wSt}h1t(){return{configurable:!1,enumerable:!0,get:this.GSt,set:this.xSt}}}}{const bo=self.Ns,Mo=[];bo.pmt=class extends bo.Sr{constructor(t,s,i){super();const e=t.Ck();this.Kq=t,this.r0t=e,this.Tf=t.dO(),this.Wmt=s,this.ESt=null,this.PSt=i[1],this.G0=!0}static Px(t,s,i){return bo.Mr(bo.pmt,t,s,i)}Fdt(){this.ESt=this.r0t.hX(this.PSt),this.Kq.vmt(this);let t=this.HN();for(;t;)t instanceof bo.omt&&t.y1t()&&t.wgt(this),t=t.HN();this.Jgt(),this.Tf.X4()&&this.Kq.Wpt().children.push(this.ESt.Wpt())}HN(){return this.Wmt}nV(){return Mo}Gmt(){return this.ESt}Z_(t){const s=!!this.HN(),i=this.Tf.uJ();s&&this.r0t.q1t(i),this.ESt.Z_(),s&&this.r0t.mV(i)}*R1t(t){const s=!!this.HN(),i=this.Tf.uJ();s&&this.r0t.q1t(i),yield*this.ESt.R1t(),s&&this.r0t.mV(i)}Pmt(){return!1}Tmt(){return this.G0}Jgt(){let t=this.HN();for(;t;){if(t instanceof bo.omt&&t.y1t()&&!t.kpt())return void(this.G0=!1);t=t.HN()}this.G0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Ns;vo.FSt=class extends vo.Sr{constructor(t){super(),this.sv=t,this.Tf=t.dO()}Fdt(){}static kSt(t,s){const i=s[0],e=[Io,To,_o,Co,xo,Go];return vo.Mr(e[i],t,s)}};class xo extends vo.FSt{constructor(t,s){super(t),this.DSt=this.Tf._7(),this.Wyt=this.Tf.Nyt(s[1]),this.Wyt!==vo.CX.IX.mrt.random&&this.Wyt!==vo.CX.IX.mrt.OSt||this.sv.LSt()}BSt(){return this.DSt.NSt(this.Wyt,this.DSt)}}class Go extends vo.FSt{constructor(t,s){super(t),this.WSt=null,this.zyt=s[1],this.sv.LSt()}Fdt(){const t=this.Tf.Ck(),s=(this.WSt=t.Rk(this.zyt),this.zyt=null,this.sv.Pk()),i=this.WSt.Pk();this.jSt=[...new Set([...s.Fk(),...i.Fk()])],this.jSt=t.Hdt(this.jSt)}BSt(){const t=this.WSt;if(t.fc()){const s=t.Pk();return vo.omt.prototype.Ok.bind(s,this.jSt,t.Lk(),t.Bk(),t.Ak())}{const i=t.Ak();return()=>i}}}class To extends vo.FSt{constructor(t,s){super(t),this.Cft=this.Tf.Wz(s[1]),this.Wyt=this.Tf.Nyt(s[2]),this.VSt=!!s[3],this.Oft=this.Tf.Ck().jk(),this.sv.USt(this.Cft)}BSt(){return this.Cft.qL().NSt(this.Wyt,this.Cft.HL().B6())}HSt(...t){const s=this.Cft,i=s.h5().Hft(),e=i.length;if(0===e)return this.VSt?"":0;const h=a(this.sv.zSt(),e);return this.Oft.oV().P0t(s),this.Wyt.apply(i[h].B6(),t)}JSt(t,...s){const i=this.Cft,e=i.e5(),h=e.length;if(0===h||"number"!=typeof t)return this.VSt?"":0;const r=a(t,h);return this.Oft.oV().P0t(i),this.Wyt.apply(e[r].B6(),s)}}class _o extends vo.FSt{constructor(t,s){super(t),this.Cft=this.Tf.Wz(s[1]),this.qSt=s[3],this.VSt=!!s[2],this.sv.USt(this.Cft)}$St(){const t=this.Cft.h5().Hft(),s=t.length;if(0===s)return this.VSt?"":0;const i=a(this.sv.zSt(),s);return t[i].XSt(this.qSt)}YSt(){const t=this.Cft,s=t.h5().Hft(),i=s.length;if(0===i)return this.VSt?"":0;const e=a(this.sv.zSt(),i),h=s[e],r=h.KB().KSt(t.ZSt());return h.XSt(this.qSt+r)}QSt(t){const s=this.Cft,i=s.e5(),e=i.length;if(0===e||"number"!=typeof t)return this.VSt?"":0;let h=a(t,e),r=i[h],n=0;return s.cJ()&&(n=r.KB().KSt(s.ZSt())),r.XSt(this.qSt+n)}}class Io extends vo.FSt{constructor(t,s){super(t),this.Cft=this.Tf.Wz(s[1]),this.twt=this.Cft.Jht(s[2]),this.swt=this.Cft.xit(s[2]),this.Wyt=this.Tf.Nyt(s[3]),this.VSt=!!s[4],this.Oft=this.Tf.Ck().jk(),this.sv.USt(this.Cft)}iwt(...t){const s=this.Cft,i=s.h5().Hft(),e=i.length;if(0===e)return this.VSt?"":0;let h=a(this.sv.zSt(),e),r=(this.Oft.oV().P0t(s),i[h]),n=0;return s.cJ()&&(n=r.KB().ewt(s.ZSt())),this.Wyt.apply(r.zht()[this.swt+n].B6(),t)}hwt(t,...s){const i=this.Cft,e=i.e5(),h=e.length;if(0===h||"number"!=typeof t)return this.VSt?"":0;let r=a(t,h),n=(this.Oft.oV().P0t(i),e[r]),o=0;return i.cJ()&&(o=n.KB().ewt(i.ZSt())),this.Wyt.apply(n.zht()[this.swt+o].B6(),s)}}class Co extends vo.FSt{constructor(t,s){super(t),this.rwt=null,this.nwt=s[1]}Fdt(){this.rwt=this.Tf.Ck().r1t(this.nwt)}owt(){return this.rwt}}}{let r=function(t){const s=self.awt[t];if(s)return s;throw new Error("invalid expression number")};r;const Ro=self.Ns;Ro.lwt=class extends Ro.Sr{constructor(t,s,i){super(),this.sv=t,this.Gy=i,this.Ff=s,this.ri=null,this.uwt=!1,this.bSt=!1}static Px(t,s,i){const e=s[0],h=[Ao,Eo,Bo,Fo,Do,Po,Oo,Ao,Fo,Fo,No,Wo,Bo,Vo,Eo,Lo,ko,jo,Uo,Ho,zo,Jo];return Ro.Mr(h[e],t,e,i,s)}Fdt(){}LSt(){this.uwt=!0}USt(t){this.uwt||!t||t.qL().ML()||(this.uwt=!0)}cwt(){return this.uwt}qF(){return this.Gy}dO(){return this.sv.dO()}Pk(){return this.sv.Pk()}Opt(){return this.bSt}fwt(){return 4===this.Ff}};class Ao extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.dwt=0;const h=e[1];this.pwt=h[0],this.mwt=[],this.gwt=null;for(let t=1,s=h.length;t<s;++t)this.mwt.push(Ro.FSt.kSt(this,h[t]));this.mwt.length?this.ri=this.ywt:(this.ri=r(this.pwt),this.bSt=!0)}Swt(t){if(t<0||t>=this.mwt.length)throw new RangeError("invalid numbered node");return this.mwt[t]}Fdt(){for(const s of this.mwt)s.Fdt();const t=r(this.pwt);this.mwt.length?this.gwt=t(this):this.gwt=t}zSt(){return this.dwt}ywt(t){return this.dwt=t,this.gwt()}}class Eo extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ri=this.wwt,14===s&&(this.Pk().Ggt(),this.sv instanceof Ro.ygt)&&this.Pk().Lgt()}wwt(t){this.dwt=t;const s=this.gwt();return"string"==typeof s?s:""}bwt(){return r(this.pwt)()}}class Po extends Ao{constructor(t,s,i,e){super(t,s,i,e),2<=t.Mwt()?this.ri=this.R5:this.ri=this.$D,this.bSt=!1}$D(t){this.dwt=t;const s=this.gwt(),i=this.dO().zD();return i.$D(s)}R5(t){const s=this.$D(t);return s?s.R5():null}}class Fo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.vwt=e[1],this.ri=this.xwt,this.bSt=!0}xwt(){return this.vwt}}class ko extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Gwt=e[1],this.ri=this.Twt,this.bSt=!0}Twt(){return this.Gwt}}class Do extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Cft=this.dO().Wz(e[1]),2<=t.Mwt()?this.ri=this.jL:this.ri=this.KB;const h=this.Pk();h.ggt(this.Cft),this.sv instanceof Ro.ygt?h.Lgt():h.HN()&&h.HN().Lgt(),this.bSt=!0}KB(){return this.Cft}jL(){return this.Cft?this.Cft.jL():null}}class Oo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.DH=this.dO().CD().SY(e[1]),2<=t.Mwt()?this.ri=this._D:this.ri=this.RD,this.bSt=!0}RD(){return this.DH}_D(){return this.DH?this.DH._D():null}}class Lo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.MZ=this.dO().Gtt().CK(e[1]),2<=t.Mwt()?this.ri=this.Nst:this.ri=this.oit,this.bSt=!0}oit(){return this.MZ}Nst(){return this.MZ?this.MZ.Nst():null}}class Bo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this._wt=e[1],this.ri=this.Iwt,this.bSt=!0}Iwt(){return this._wt}}class No extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Cwt=e[1];const h=this.sv.KB();this.sv instanceof Ro.mgt&&this.sv.v2()||!h||!h.cJ()?(this.ri=this.Rwt,this.bSt=!0):(this.ri=this.Awt,this.LSt())}Rwt(){return this.Cwt}Awt(t){t=t||0;let s=this.sv.KB(),i=s.h5(),e=i.e5(),h=null;if(e.length)h=e[t%e.length].KB();else if(i.Vft()){const r=i.Uft();h=r[t%r.length].KB()}else{if(!(0<s.n5()))return 0;{const n=s.e5();h=n[t%n.length].KB()}}return this.Cwt+h.KSt(s.ZSt())}}class Wo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.nwt=e[1],this.rwt=null,2<=t.Mwt()?this.ri=this.Ewt:this.ri=this.Pwt,this.bSt=!0}Fdt(){this.rwt=this.dO().Ck().r1t(this.nwt)}Pwt(){return this.rwt}Ewt(){return null}}class jo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Fwt=e[1],this.WSt=null,2<=t.Mwt()?this.ri=this.kwt:this.ri=this.Dwt,this.bSt=!0}Fdt(){this.WSt=this.dO().Ck().Rk(this.Fwt),this.Fwt=null}Dwt(){return this.WSt}kwt(){return null}}class Vo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Owt=[],this.Lwt=[],this.bSt=!0;for(let t=1,s=e.length;t<s;++t){const h=Ro.lwt.Px(this.sv,e[t],0);this.Owt.push(h),this.Lwt.push(0),h.Opt()||(this.bSt=!1)}this.ri=this.Bwt}Fdt(){for(const t of this.Owt)t.Fdt()}Bwt(){const i=this.Owt,e=this.Lwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0);return e}}class Uo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Nwt=e[1],this.ri=this.Mht,this.bSt=!0}Mht(){return this.Nwt}}class Ho extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.Wwt=e[1],this.ri=this.jwt,this.bSt=!0}jwt(){return this.Wwt}}class zo extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ri=this.m4,this.bSt=!1}m4(){return this.gwt()}}class Jo extends Ro.lwt{constructor(t,s,i,e){super(t,s,i),this.lut=this.dO().Cut().eut(e[1]),this.ri=this.Vwt,this.bSt=!0}Vwt(){return this.lut.yf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0)};e;const qo=self.Ns,$o=[],Xo=function(){};qo.mgt=class extends qo.Sr{constructor(t,i,s){if(super(),this.eSt=t,this.Tf=t.dO(),this.Gy=s,this.Wyt=this.Tf.Nyt(i[1]),this.Uwt=0<i[3],this.Hwt=2===i[3],this.zwt=!!i[4],this.Jwt=!!i[5],this.zv=!!i[6],this.NH=i[7],this.qwt=this.eSt.e0t(),this.Cft=null,this.twt=null,this.swt=-1,this.DSt=null,this.Z_=Xo,this.R1t=Xo,this.Qs=[],this.$wt=[],this.Xwt=!1,this.Ywt=null,this.Kwt=null,this.ogt=this.Tf.X4()?{agt:i[8][0],Zwt:i[8][1]}:null,-1===i[0]?this.DSt=this.Tf._7():(this.Cft=this.Tf.Wz(i[0]),i[2]&&(this.twt=this.Cft.Jht(i[2]),this.swt=this.Cft.xit(i[2])),this.eSt.HN()&&this.eSt.HN().Lgt()),10===i.length){let s=i[9];for(let t of s)this.Qs.push(qo.lwt.Px(this,t,this.Qs.length)),this.$wt.push(0)}0===this.Qs.length&&(this.Qs=$o,this.$wt=$o),this.eSt.Ck().Bdt(this)}static Px(t,s,i){return qo.Mr(qo.mgt,t,s,i)}Fdt(){for(const t of this.Qs)t.Fdt(),t.cwt()&&(this.Xwt=!0);this.Hwt?(this.Z_=this.Qwt,this.R1t=this.tbt):this.DSt?(this.sbt(),this.R1t=this.ibt):this.Cft.qL().ML()?(this.ebt(),this.R1t=this.hbt):this.zv?(this.Z_=this.rbt,this.R1t=this.nbt):(this.Z_=this.obt,this.R1t=this.abt)}sbt(){const t=this.DSt,s=this.DSt;this.lbt(t,s,this.ubt)}ebt(){const t=this.Cft.qL(),s=this.Cft.HL().B6();this.lbt(t,s,this.cbt)}lbt(t,s,i){const e=this.Wyt,h=this.Jwt,r=this.Qs;if(0===r.length){const n=t.NSt(e,s);h?this.Z_=function(){return qo.xor(n(),h)}:this.Z_=n}else if(1===r.length){const o=r[0];if(!h&&o.Opt())this.Z_=t.fbt(e,s,o.ri(0));else{const a=t.NSt(e,s);this.Z_=function(){return qo.xor(a(o.ri(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.Opt()&&u.Opt())this.Z_=t.dbt(e,s,l.ri(0),u.ri(0));else{const c=t.NSt(e,s);this.Z_=function(){return qo.xor(c(l.ri(0),u.ri(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Opt()&&d.Opt()&&p.Opt())this.Z_=t.pbt(e,s,f.ri(0),d.ri(0),p.ri(0));else{const m=t.NSt(e,s);this.Z_=function(){return qo.xor(m(f.ri(0),d.ri(0),p.ri(0)),h)}}}else this.Z_=i}wJ(){return this.NH}gmt(){return this.Wyt}KB(){return this.Cft}X6(){return this.twt}mbt(){return this.twt?this.twt.z6():this.Cft?this.Cft.qL():null}Mwt(){const t=this.mbt();return t?t.gbt():1}Pk(){return this.eSt}dO(){return this.Tf}qF(){return this.Gy}syt(){return this.qF()}lmt(){return this.Uwt}ymt(){return this.Hwt}ybt(){return this.Jwt}aW(){return this.zwt}v2(){return this.zv}Sbt(){return this.ogt.agt}wbt(){return!!this.DSt}Ygt(){return this.wbt()||this.Cft.qL().ML()}Kgt(){for(const t of this.Qs)if(t.fwt())return t.KB();return null}bbt(t){this.ogt.agt=!!t,this.eSt.kgt()}Mbt(){return this.ogt.Zwt}Pmt(){return!this.Sbt()&&!this.Tf.uyt()&&!this.Mbt()}vbt(){return this.Ywt||(this.Ywt=new Map),this.Ywt}xbt(){return this.Kwt||(this.Kwt=new Map),this.Kwt}ubt(){const t=this.$wt;return e(this.Qs,t),qo.xor(this.Wyt.apply(this.DSt,t),this.Jwt)}*ibt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const s=this.$wt;e(this.Qs,s);let t=this.Wyt.apply(this.DSt,s);return qo.ta(t)&&(t=yield*t),qo.xor(t,this.Jwt)}return this.Z_()}cbt(){const t=this.$wt,s=(e(this.Qs,t),this.Cft.HL().B6());return qo.xor(this.Wyt.apply(s,t),this.Jwt)}*hbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){let t=this.$wt,s=(e(this.Qs,t),this.Cft.HL().B6()),i=this.Wyt.apply(s,t);return qo.ta(i)&&(i=yield*i),qo.xor(i,this.Jwt)}return this.Z_()}Qwt(){return!0}*tbt(){return(this.Sbt()||this.Tf.uyt())&&(yield this),!0}Gbt(){return this.twt?2<=this.twt.z6().gbt()?this.twt.q6():this.twt:2<=this.Cft.qL().gbt()?this.Cft.jL():this.Cft}rbt(){const t=this.$wt,s=(e(this.Qs,t),this.Wyt.apply(this.Gbt(),t));return this.Cft.Ayt(),s}*nbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const s=this.$wt;e(this.Qs,s);let t=this.Wyt.apply(this.Gbt(),s);return qo.ta(t)&&(t=yield*t),this.Cft.Ayt(),t}return this.Z_()}obt(){const i=this.Qs,e=this.$wt,t=this.Cft.h5();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.cwt()||(e[t]=h.ri(0))}return t.Wft()?this.Tbt(t):this._bt(t)}*abt(){return(this.Sbt()||this.Tf.uyt())&&(yield this),this.obt()}Ibt(i){const e=this.Qs,h=this.$wt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.cwt()&&(h[t]=r.ri(i))}}Tbt(i){const t=this.Cft,e=t.cJ(),h=t.ZSt(),r=this.swt,n=0<=r,o=t.e5(),a=this.Xwt,l=this.$wt,u=this.Wyt,c=this.Jwt,f=this.qwt&&!this.Uwt;i.Nft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Ibt(s);let t;if(n){const p=e?d.KB().ewt(h):0;t=u.apply(d.zht()[r+p].B6(),l)}else t=u.apply(d.B6(),l);qo.xor(t,c)?i.zft(d):f&&i.Jft(d)}return t.Cbt(!0),i.qft(!1),t.Ayt(),i.jft()}_bt(t){let s=this.Cft,i=s.cJ(),e=s.ZSt(),h=s.a4(),r=this.swt,n=0<=r,o=this.Xwt,a=this.$wt,l=this.Wyt,u=this.Jwt,c=this.qwt&&!this.Uwt,f=t.$ft(),d=t.Xft(),p=c&&!this.eSt.Xgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.Ibt(s);let t;if(n){const b=i?w.KB().ewt(e):0;t=l.apply(w.zht()[r+b].B6(),a)}else t=l.apply(w.B6(),a);qo.xor(t,u)?(y=!0,p?(f.push(w),h&&w.Rbt()):(m[g]=w,h&&w.Abt(g),++g)):p?(m[g]=w,h&&w.Ebt(g),++g):c&&(d.push(w),h)&&w.Pbt()}qo.Xn(m,g),h&&s.Fbt(p,g);const S=y;return p&&!y&&(y=this.kbt(f)),s.Cbt(S||c),c?y:t.jft()}kbt(i){const t=this.Cft,e=t.cJ(),h=t.ZSt(),r=this.Xwt,n=this.swt,o=0<=n,a=this.$wt,l=this.Wyt,u=this.Jwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Ibt(s);let t;if(o){const f=e?c.KB().ewt(h):0;t=l.apply(c.zht()[n+f].B6(),a)}else t=l.apply(c.B6(),a);if(qo.xor(t,u))return!0}return!1}Dbt(t,s){return this.Qs[t].ri(s)}Smt(){const t=this.Qs;if(t.length)return t[0].bwt();throw new Error("no parameters")}Lq(){if(!this.Ywt||!this.Ywt.size)return null;const s={};for(const[i,e]of this.Ywt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].u4(),t[1].u4(),t[2]])),s[i]=t}return{ex:s}}Bq(t){if(this.Ywt&&(this.Ywt.clear(),this.Ywt=null),t){const s=this.Tf,i=t.ex;if(i){const e=this.vbt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=qo.Mr(qo.mc,r.map(t=>[s.VD(t[0]),s.VD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ri(0)};h;const Yo=self.Ns,Ko=[],Zo=function(){},Qo=function*(){};Yo.ygt=class extends Yo.Sr{constructor(t,s,i){super();const e=(this.eSt=t).dO(),h=(this.Tf=e,this.Gy=i,this.NH=4<=s.length?s[3]:-1,this.Obt=5<=s.length?255&s[4]:0,this.Lbt=5<=s.length?s[4]>>8:0,this.Wyt=null,this.Cft=null,this.twt=null,this.swt=-1,this.DSt=null,this.Bbt="",this.Nbt=null,this.Wbt=null,this.Z_=Zo,this.R1t=Zo,this.Qs=[],this.$wt=[],this.Xwt=!1,this.Ywt=null,this.Kwt=null,-3===s[0]),r=h?s[2]:s[5];if(this.ogt=e.X4()||h?{agt:r[0],Zwt:r[1],index:r[2]}:null,-1===s[0])this.DSt=e._7(),this.Wyt=e.Nyt(s[1]);else if(-2===s[0])this.Bbt=s[1];else if(h){const n=e.Nyt(s[1]);this.Wyt=n,this.Z_=this.jbt,this.R1t=this.Vbt,this.Lbt|=8}else this.Cft=e.Wz(s[0]),4&this.Lbt?(this.Bbt=s[1],this.Nbt=e.Wz(s[2])):(s[2]&&(this.twt=this.Cft.Jht(s[2]),this.swt=this.Cft.xit(s[2])),this.Wyt=e.Nyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Qs.push(Yo.lwt.Px(this,a,this.Qs.length)),this.$wt.push(0)}0===this.Qs.length&&(this.Qs=Ko,this.$wt=Ko),this.Ubt()&&(this.eSt.Ggt(),this.eSt.Lgt()),this.eSt.Ck().Ndt(this)}static Px(t,s,i){return Yo.Mr(Yo.ygt,t,s,i)}Fdt(){for(const t of this.Qs)t.Fdt(),t.cwt()&&(this.Xwt=!0);if(this.DSt)this.sbt(),this.R1t=this.ibt;else if(this.Bbt)4&this.Lbt?this.Hbt():this.zbt(),this.Bbt="",this.Nbt=null;else if(this.Z_===this.jbt){const s=this.Wyt,i=this.Tf.Ck().i1t(this.eSt);this.Wyt=s.bind(null,this.Tf.wL(),i)}else this.twt?this.pyt()?(this.Z_=this.Jbt,this.R1t=this.qbt):(this.Z_=this.$bt,this.R1t=this.Xbt):this.Cft.qL().ML()?(this.ebt(),this.R1t=this.hbt):this.v2()?(this.Z_=this.Ybt,this.R1t=this.Kbt):this.pyt()?(this.Z_=this.Zbt,this.R1t=this.Qbt):this.tMt()?(this.Z_=this.sMt,this.R1t=this.iMt):this.Qs.length?this.Qs.every(t=>t.cwt())?(this.Z_=this.eMt,this.R1t=this.hMt):this.Xwt?(this.Z_=this.rMt,this.R1t=this.nMt):this.Qs.every(t=>t.Opt())?(h(this.Qs,this.$wt),this.Z_=this.oMt,this.R1t=this.aMt):(this.Z_=this.lMt,this.R1t=this.uMt):(this.Z_=this.oMt,this.R1t=this.aMt)}sbt(){const t=this.DSt,s=this.DSt;this.lbt(t,s,this.ubt)}ebt(){const t=this.Cft.qL(),s=this.Cft.HL().B6();this.lbt(t,s,this.cbt)}zbt(){const t=this.eSt.Ck(),i=t.Rk(this.Bbt);if(i.fc()){const e=0!=(2&this.Lbt);this.Wbt=i.Pk();let s=[...new Set([...this.eSt.Fk(),...this.Wbt.Fk()])];s=t.Hdt(s);const h=!i.Lk()&&this.cMt()?{Fyt:!0}:null;if(this.Z_=Yo.omt.prototype.Iyt.bind(this.Wbt,s,this.Qs,e,h),this.Tf.X4()){const r=this;this.R1t=function*(){(r.Sbt()||r.Tf.uyt())&&(yield r);const t=yield*r.Wbt.Oyt(s,r.Qs,e,h);return t}}else this.R1t=Qo}else this.Z_=Zo,this.R1t=Qo}Hbt(){const r=this.eSt.Ck(),n=r.l1t(this.Nbt,this.Bbt);if(n.fc()){const o=0!=(2&this.Lbt);this.Wbt=n.Pk();let s=[...new Set([...this.eSt.Fk(),...this.Wbt.Fk(),this.Cft,n.KB()])],t=(s=r.Hdt(s),!this.Cft.cJ()&&!n.KB().cJ()),i=!this.Cft.cJ()&&n.KB().cJ(),e=this.Cft.cJ(),h=null;if(!n.Lk()&&this.cMt()&&((h=h||{}).Fyt=!0),!i&&o||((h=h||{}).Cyt=this.Cft,h.Ryt=n.KB()),t||i||e&&!n.fSt()?this.Z_=Yo.omt.prototype.Iyt.bind(this.Wbt,s,this.Qs,o,h):e&&(this.Z_=Yo.Vpt.prototype.gSt.bind(n,s,this.Qs)),this.Tf.X4()){const a=this;t||i||e&&!n.fSt()?this.R1t=function*(){(a.Sbt()||a.Tf.uyt())&&(yield a);const t=yield*a.Wbt.Oyt(s,a.Qs,o,h);return t}:e&&(this.R1t=function*(){(a.Sbt()||a.Tf.uyt())&&(yield a);const t=yield*n.SSt(s,a.Qs);return t})}else this.R1t=Qo}else this.Z_=Zo,this.R1t=Qo}lbt(t,s,i){const e=this.Wyt,h=this.Qs;if(0===h.length)this.Z_=t.NSt(e,s);else if(1===h.length){const r=h[0];if(r.Opt())this.Z_=t.fbt(e,s,r.ri(0));else{const n=t.NSt(e,s);this.Z_=function(){return n(r.ri(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Opt()&&a.Opt())this.Z_=t.dbt(e,s,o.ri(0),a.ri(0));else{const l=t.NSt(e,s);this.Z_=function(){return l(o.ri(0),a.ri(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Opt()&&c.Opt()&&f.Opt())this.Z_=t.pbt(e,s,u.ri(0),c.ri(0),f.ri(0));else{const d=t.NSt(e,s);this.Z_=function(){return d(u.ri(0),c.ri(0),f.ri(0))}}}else this.Z_=i}wJ(){return this.NH}pyt(){return 0!=(8&this.Lbt)}dyt(){return 0!=(16&this.Lbt)}tMt(){return 1===this.Obt}v2(){return 2===this.Obt}Ubt(){return 0!=(1&this.Lbt)}Igt(){return this.pyt()||this.dyt()}KB(){return this.Cft}mbt(){return this.twt?this.twt.z6():this.Cft?this.Cft.qL():null}Mwt(){const t=this.mbt();return t?t.gbt():1}Pk(){return this.eSt}cMt(){let t=this.eSt;do{if(t instanceof Yo.Vpt&&t.Lk())return!0}while(t=t.t1t());return!1}dO(){return this.Tf}qF(){return this.Gy}syt(){return this.ogt.index}Sbt(){return this.ogt.agt}bbt(t){this.ogt.agt=!!t,this.eSt.kgt()}Mbt(){return this.ogt.Zwt}Pmt(){return!this.Sbt()&&!this.Tf.uyt()&&!this.Mbt()}vbt(){return this.Ywt||(this.Ywt=new Map),this.Ywt}xbt(){return this.Kwt||(this.Kwt=new Map),this.Kwt}ubt(){const t=this.$wt;return h(this.Qs,t),this.Wyt.apply(this.DSt,t)}*ibt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const t=this.$wt,s=(h(this.Qs,t),yield*this.Wyt.apply(this.DSt,t));return s}return this.Z_()}cbt(){const t=this.$wt;return h(this.Qs,t),this.Wyt.apply(this.Cft.HL().B6(),t)}*hbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const t=this.$wt,s=(h(this.Qs,t),yield*this.Wyt.apply(this.Cft.HL().B6(),t));return s}return this.Z_()}oMt(){const i=this.$wt,e=this.Cft.h5().e5();for(let t=0,s=e.length;t<s;++t)this.Wyt.apply(e[t].B6(),i)}*aMt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const i=this.$wt,e=this.Cft.h5().e5();for(let t=0,s=e.length;t<s;++t)yield*this.Wyt.apply(e[t].B6(),i)}else this.oMt()}lMt(){const i=this.$wt,e=(h(this.Qs,i),this.Cft.h5().e5());for(let t=0,s=e.length;t<s;++t)this.Wyt.apply(e[t].B6(),i)}*uMt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const i=this.$wt,e=(h(this.Qs,i),this.Cft.h5().e5());for(let t=0,s=e.length;t<s;++t)yield*this.Wyt.apply(e[t].B6(),i)}else this.lMt()}eMt(){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);s.apply(n.B6(),h)}}*hMt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);yield*s.apply(n.B6(),h)}}else this.eMt()}rMt(){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.cwt()||(h[t]=i.ri(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.cwt()&&(h[t]=o.ri(i))}s.apply(n.B6(),h)}}*nMt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.cwt()||(h[t]=i.ri(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.cwt()&&(h[t]=o.ri(i))}yield*s.apply(n.B6(),h)}}else this.rMt()}sMt(){const e=this.Qs,h=this.$wt,s=this.Wyt,t=this.Cft,i=t.fMt(),r=t.h5().e5();i.dMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);s.apply(n.B6(),h)}i.pMt(s)}*iMt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const e=this.Qs,h=this.$wt,s=this.Wyt,t=this.Cft,i=t.fMt(),r=t.h5().e5();i.dMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);yield*s.apply(n.B6(),h)}i.pMt(s)}else this.sMt()}mMt(){return this.twt?2<=this.twt.z6().gbt()?this.twt.q6():this.twt:2<=this.Cft.qL().gbt()?this.Cft.jL():this.Cft}Ybt(){const t=this.$wt;return h(this.Qs,t),this.Wyt.apply(this.mMt(),t)}*Kbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const s=this.$wt;h(this.Qs,s);let t=this.Wyt.apply(this.mMt(),s);return Yo.ta(t)?yield*t:t}return this.Ybt()}$bt(){const t=this.Cft,s=t.cJ(),e=t.ZSt(),h=this.Qs,r=this.Xwt,n=this.$wt,o=this.Wyt,a=this.swt,l=t.h5().e5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.cwt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.cwt()&&(n[t]=f.ri(i))}const c=s?u.KB().ewt(e):0;o.apply(u.zht()[a+c].B6(),n)}}*Xbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const t=this.Cft,s=t.cJ(),e=t.ZSt(),h=this.Qs,r=this.Xwt,n=this.$wt,o=this.Wyt,a=this.swt,l=t.h5().e5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.cwt()||(n[t]=i.ri(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.cwt()&&(n[t]=f.ri(i))}const c=s?u.KB().ewt(e):0;yield*o.apply(u.zht()[a+c].B6(),n)}}else this.$bt()}Zbt(){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);n.push(s.apply(o.B6(),h))}return Promise.all(n)}*Qbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const e=this.Qs,h=this.$wt,s=this.Wyt,r=this.Cft.h5().e5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ri(i);n.push(yield*s.apply(o.B6(),h))}return Promise.all(n)}return this.Zbt()}Jbt(){const t=this.Cft,s=t.cJ(),e=t.ZSt(),h=this.Qs,r=this.$wt,n=this.Wyt,o=this.swt,a=t.h5().e5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ri(i);const c=s?u.KB().ewt(e):0;l.push(n.apply(u.zht()[o+c].B6(),r))}return Promise.all(l)}*qbt(){if((this.Sbt()||this.Tf.uyt())&&(yield this),this.Mbt()){const t=this.Cft,s=t.cJ(),e=t.ZSt(),h=this.Qs,r=this.$wt,n=this.Wyt,o=this.swt,a=t.h5().e5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ri(i);const c=s?u.KB().ewt(e):0;l.push(yield*n.apply(u.zht()[o+c].B6(),r))}return Promise.all(l)}return this.Jbt()}async jbt(){try{await this.Wyt()}catch(t){console.error(`Unhandled exception running script %c${this.eSt.P$().yf()}, event ${this.eSt.Wgt()}, action ${this.syt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Yo.mmt.Vyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Yo.mmt.Uyt())}}*Vbt(){return(this.Sbt()||this.Tf.uyt())&&(yield this),this.jbt()}Lq(){return this.Ywt&&this.Ywt.size?{ex:Yo.Ko(this.Ywt)}:null}Bq(t){if(this.Ywt&&(this.Ywt.clear(),this.Ywt=null),t){const s=t.ex;s&&(this.Ywt=Yo.Zo(s))}}}}{let d=function(t){return t instanceof o?S.D5(t):t.f8()},u=function(t){return d(t).qD()},h=function(t){return S.D5(t)},m=function(t){return t instanceof a?S.D5(t):t},s=function(t){return t instanceof c?S.D5(t):t},C=function(t,s,i,e){const h=s.u4(),r=i.u4();h<r?t.Set(s,i,e):t.Set(i,s,e)},R=function(t,s,i){const e=s.u4(),h=i.u4();e<h?t.Mc(s,i):t.Mc(i,s)},A=function(t,s){t.vc(s)},E=function(t,s,i){const e=s.u4(),h=i.u4();return e<h?t.ri(s,i):t.ri(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.qD(),n=S.sk(),o=S.$dt(),a=o.Pk().e0t(),l=o.KB(),u=o.ybt(),c=s.h5(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.Wft()?(w.I(r.GN()),w.offset(i,e),n.gMt(r.$D(),s,w,b),d=b):!a||S.yMt()&&!c.Xft().length&&c.$ft().length?d=c.$ft():(d=c.Xft(),I=!0),h&&(p=r.kM(),m=r.LM(),r.bN(i,e),r.gN());for(const y of d)if(n.kO(t,y)){if(g=!0,u)break;f&&k.add(y)}return h&&(r.yN(p,m),r.gN()),P.Yn(b),g},i=function(t){const s=S.kk().e0t(),i=_.h5(),e=i.$ft(),h=i.Xft();i.Wft()?(i.Zft(k),s&&(P.Yn(h),i.Qft(k,_.e5()))):s?I?i.t0t(k):(i.Qft(k,e),i.Zft(k)):i.Zft(k),_.Ayt()},M=function(t,s){T&&(s&&i(),k.clear(),_=null,T=!1)},r=function(t,s){const i=S.VD(s);if(i){const e=t.h5();if(e.Wft()||e.$ft().includes(i))if(t.cJ()){if(i.KB().SMt(t))return e.i0t(i),t.Ayt(),!0}else if(i.KB()===t)return e.i0t(i),t.Ayt(),!0}return!1},n=function(t,h){const r=t.h5();if(r.Wft()){r.qft(!1),r.Nft();const i=t.e5();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.u4()===h?r.Jft(e):r.zft(e)}return t.Ayt(),!!r.$ft().length}{let i=r.$ft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).u4()===h?r.Jft(n):++e}return P.Xn(i,e),t.Ayt(),!!i.length}},P=(d,u,h,m,s,C,R,A,E,e,i,M,r,n,self.Ns),l=new P.ra,v={},x={},G={},S=null,o=(P.wMt=function(t){S=t},self.XB),a=self.zL,c=self.k5,w=(x.bMt=function(t,s){return P.compare(this.qD().kM(),t,s)},G.bMt=function(t,s){return P.compare(this.x,t,s)},x.MMt=function(t,s){return P.compare(this.qD().LM(),t,s)},G.MMt=function(t,s){return P.compare(this.y,t,s)},x.vMt=function(){return this.qD().CN()},G.vMt=function(){return this.IN()},v.xMt=function(){const t=u(this),s=t.RD(),i=t.GN();return i.Bl()<0||i.Nl()<0||i.Ol()>s.Fm()||i.Ll()>s.Um()},v.GMt=function(i,e,h){const t=m(this),s=t.h5(),r=s.e5();if(!r.length)return!1;let n=r[0],o=n.qD(),a=n,l=P.Dr(o.kM(),o.LM(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.qD();const u=P.Dr(o.kM(),o.LM(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return s.i0t(a),!0},x.DM=function(t){const s=this.qD();s.kM()!==t&&(s.DM(t),s.gN())},G.DM=function(t){this.x=+t},x.BM=function(t){const s=this.qD();s.LM()!==t&&(s.BM(t),s.gN())},G.BM=function(t){this.y=+t},x.TMt=function(t,s){const i=this.qD();i._Mt(t,s)||(i.yN(t,s),i.gN())},G.TMt=function(t,s){this.setPosition(t,s)},v.IMt=function(t,s){if(t=m(t)){const i=d(this),e=t.s5(i);if(e){const[h,r]=e.CMt(s),n=i.qD();n.kM()===h&&n.LM()===r||(n.yN(h,r),n.gN())}}},v.RMt=function(t){if(0!==t){const s=u(this);s.bN(s.AMt()*t,s.EMt()*t),s.gN()}},x.PMt=function(t,s){if(0!==s){const i=this.qD();t=P.Ar(t),i.bN(Math.cos(t)*s,Math.sin(t)*s),i.gN()}},G.PMt=function(t,s){0!==s&&(t=P.Ar(t),this.wN(Math.cos(t)*s,Math.sin(t)*s))},x.kM=function(){return this.qD().kM()},G.kM=function(){return this.x},x.LM=function(){return this.qD().LM()},G.LM=function(){return this.y},v.Yk=function(){return S.Yk(d(this))},x.FMt=function(t,s){return P.compare(this.qD().Fm(),t,s)},G.FMt=function(t,s){return P.compare(this.width,t,s)},x.kMt=function(t,s){return P.compare(this.qD().Um(),t,s)},G.kMt=function(t,s){return P.compare(this.height,t,s)},x.Wm=function(t){const s=this.qD();s.Fm()!==t&&(s.Wm(t),s.gN())},G.Wm=function(t){this.width=t},x.km=function(t){const s=this.qD();s.Um()!==t&&(s.km(t),s.gN())},G.km=function(t){this.height=t},x.vC=function(t,s){const i=u(this);i.Fm()===t&&i.Um()===s||(i.vC(t,s),i.gN())},G.vC=function(t,s){this.w5(t,s)},x.Fm=function(){return this.qD().Fm()},G.Fm=function(){return this.width},x.Um=function(){return this.qD().Um()},G.Um=function(){return this.height},v.DMt=function(){return u(this).GN().Ol()},v.OMt=function(){return u(this).GN().Ll()},v.LMt=function(){return u(this).GN().Bl()},v.BMt=function(){return u(this).GN().Nl()},v.NMt=function(){const t=u(this).GN();return(t.Ol()+t.Bl())/2},v.WMt=function(){const t=u(this).GN();return(t.Ll()+t.Nl())/2},v.jMt=function(t,s){return P.Lr(u(this).GetAngle(),P.Ar(s))<=P.Ar(t)},v.VMt=function(t){return P.Nr(u(this).GetAngle(),P.Ar(t))},v.UMt=function(t,s){const i=P.Ar(t),e=P.Ar(s),h=u(this).GetAngle(),r=!P.Nr(e,i);return r?!(!P.Nr(h,i)&&P.Nr(h,e)):P.Nr(h,i)&&!P.Nr(h,e)},x.v5=function(t){const s=this.qD(),i=P.Rr(P.Ar(t));isNaN(i)||s.GetAngle()===i||(s.v5(i),s.gN())},G.v5=function(t){this.xN=t},v.HMt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.v5(s.GetAngle()+P.Ar(t)),s.gN()}},v.zMt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.v5(s.GetAngle()-P.Ar(t)),s.gN()}},v.JMt=function(t,s){const i=u(this),e=i.GetAngle(),h=P.Br(e,P.Ar(s),P.Ar(t));isNaN(h)||e===h||(i.v5(h),i.gN())},v.qMt=function(t,s,i){const e=u(this),h=e.GetAngle(),r=s-e.kM(),n=i-e.LM(),o=Math.atan2(n,r),a=P.Br(h,o,P.Ar(t));isNaN(a)||h===a||(e.v5(a),e.gN())},v.$Mt=function(t,s){const i=u(this),e=i.GetAngle(),h=t-i.kM(),r=s-i.LM(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.v5(n),i.gN())},x.GetAngle=function(){return P.Er(this.qD().GetAngle())},G.GetAngle=function(){return this.xN},v.XMt=function(t,s){return P.compare(P.Qr(100*u(this).ZA(),6),t,s)},x.oB=function(){return this.qD().oB()},G.oB=function(){return this.isVisible},v.rB=function(t){const s=u(this);t=2===t?!s.oB():0!==t,s.oB()!==t&&(s.rB(t),S.tO())},v.tE=function(t){const s=P.Cr(t/100,0,1),i=u(this);if(i.S6()){if(i.Snt().YMt()===s)return}else if(i.ZA()===s)return;i.tE(s),S.tO()},v.KMt=function(t){l.Oa(t);const s=u(this);s.AN().Ca(l)||(s.EN(l),S.tO())},v.iE=function(){const t=u(this).AN();return P.hn(t.ba(),t.Ma(),t.xa(),t.Ga())},v.ZA=function(){return P.Qr(100*u(this).ZA(),6)},v.ZMt=function(t){return!!(t=s(t))&&u(this).$D()===t},v.QMt=function(i){const t=m(this),s=t.h5(),e=s.e5();if(!e.length)return!1;let h=e[0],r=h;for(let t=1,s=e.length;t<s;++t){const n=e[t],o=n.qD(),a=r.qD(),l=o.$D().qF(),u=a.$D().qF();0===i?(u<l||l===u&&o.XD()>a.XD())&&(r=n):(l<u||l===u&&o.XD()<a.XD())&&(r=n)}return s.i0t(r),!0},x.tvt=function(t,s,i){const e=this.qD(),h=0===t?e.NM():e.vN();return P.compare(h,s,i)},G.tvt=function(t,s,i){const e=0===t?this.GB:this.MN;return P.compare(e,s,i)},x.svt=function(){this.qD().FN()},G.svt=function(){this.PN()},x.ivt=function(){this.qD().DN()},G.ivt=function(){this.kN()},v.evt=function(t){(t=s(t))&&u(this).LN(t)},v.hvt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.rvt(e);h&&e.qD().NN(h,i)}},x.WM=function(t){const s=this.qD();s.NM()!==t&&(s.WM(t),S.tO())},G.WM=function(t){this.GB=t},v.nvt=function(){return u(this).$D().qF()},v.ovt=function(){return u(this).$D().yf()},x.avt=function(){return this.qD().XD()},G.avt=function(){return this.zIndex},x.lvt=function(){return this.qD().NM()},G.lvt=function(){return this.GB},x.uvt=function(){return this.qD().vN()},G.uvt=function(){return this.MN},v.cvt=function(t){const s=d(this),i=s.KB().g5().$ht(t);if(i){const e=i.qF(),h=s.qD().pN();return h.sW(e)}},v.fvt=function(t,s){const i=d(this),e=i.KB().g5().$ht(s);if(e){const h=e.qF(),r=1===t,n=i.qD().pN();n.sW(h)!==r&&(n.iW(h,r),n.eW(),S.tO())}},v.dvt=function(t,s,i){const e=d(this),h=e.KB().g5().$ht(t);if(h){s=Math.floor(s);const r=h.PG().kG(s);if(r){"color"===r?(l.Oa(i),i=l):"percent"===r&&(i/=100);const n=h.qF(),o=e.qD().pN(),a=o.rW(n,s,i);a&&o.sW(n)&&S.tO()}}},P.Mr(P.Rect)),F=[],b=[],T=!1,_=null,I=!1,k=new Set;v.pvt=function(y){const t=m(this),S=(y=m(y),t.dO());if(S.mvt())return function*(S){if(S){let t=this.dO(),s=t.sk(),e=t.Ck(),i=e.jk(),h=e.$dt(),r=h.KB(),n=h.vbt(),o=h.xbt(),a=i.oV(),l=t.Jtt(),u=l-1,c=a.kk(),f=i.aV(c),d=n.get("collmemory"),p=(d||(d=P.Mr(P.mc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.h0().addEventListener("instancedestroy",t=>A(d,t.Y6))),r.h5()),m=S.h5(),g=p.e5(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Wft()?(s.gMt(w.qD().$D(),S,w.qD().GN(),F),y=F,s.gvt(w,S,y)):y=m.e5();for(let t=0;t<y.length;++t){const b=y[t];if(s.kO(w,b)||s.yvt(w,b)){let t=E(d,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<u;if(C(d,w,b,l),M){const v=c.nV(),x=(e.dV(v),r.h5()),G=S.h5();if(x.qft(!1),G.qft(!1),r===S){const T=x.$ft();P.Yn(T),T.push(w),T.push(b),r.Ayt()}else{const _=x.$ft(),I=G.$ft();P.Yn(_),P.Yn(I),_.push(w),I.push(b),r.Ayt(),S.Ayt()}yield*c.Myt(a,f),e.mV(v)}}else R(d,w,b)}P.Yn(F)}i.wV()}return!1}.call(t,y);if(y){let s=S.sk(),e=S.Ck(),t=e.jk(),i=e.$dt(),h=i.KB(),r=i.vbt(),n=i.xbt(),o=t.oV(),a=S.Jtt(),l=a-1,u=o.kk(),c=t.aV(u),f=r.get("collmemory"),d=(f||(f=P.Mr(P.mc),r.set("collmemory",f)),n.get("collisionCreatedDestroyCallback")||(n.set("collisionCreatedDestroyCallback",!0),S.h0().addEventListener("instancedestroy",t=>A(f,t.Y6))),h.h5()),p=y.h5(),m=d.e5(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.Wft()?(s.gMt(w.qD().$D(),y,w.qD().GN(),F),g=F,s.gvt(w,y,g)):g=p.e5();for(let t=0;t<g.length;++t){const b=g[t];if(s.kO(w,b)||s.yvt(w,b)){let t=E(f,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<l;if(C(f,w,b,a),M){const v=u.nV(),x=(e.dV(v),h.h5()),G=y.h5();if(x.qft(!1),G.qft(!1),h===y){const T=x.$ft();P.Yn(T),T.push(w),T.push(b),h.Ayt()}else{const _=x.$ft(),I=G.$ft();P.Yn(_),P.Yn(I),_.push(w),I.push(b),h.Ayt(),y.Ayt()}u.pV(o,c),e.mV(v)}}else R(f,w,b)}P.Yn(F)}t.wV()}return!1},v.Svt=function(t){return t=m(t),e(d(this),t,0,0)},v.wvt=function(t,s,i){return t=m(t),e(d(this),t,s,i)},v.bvt=function(){return!0},v.e6=function(){return u(this).e6()},v.jq=function(){return u(this).jq()},v.Mvt=function(i,e){const t=m(this),s=(i=m(i),t.dO()),h=this.h5(),r=h.e5();if(0===r.length)return!1;let n=i.h5(),o=n.e5();if(n.Wft()){const u=[...s.vvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.Wft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.qN())f.xvt(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.HN()))continue}else t=c.JN();t.xvt(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(n.Zft(l),i.Ayt(),!0)},v.Gvt=function(i,e){const t=m(this),s=(i=m(i),t.dO()),h=t.h5(),r=h.e5();if(0===r.length)return!1;let n=i.h5(),o=n.e5();if(n.Wft()){const u=[...s.vvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.Wft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.jq()||!c.xvt(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.ZN())2===e&&f.jq()||f.xvt(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(n.Zft(l),i.Ayt(),!0)},v.Tvt=function(i,e,h){const t=m(this),s=(i=m(i),t.dO()),r=t.h5(),n=r.e5();if(0===n.length)return!1;let o=i.h5(),a=o.e5();if(o.Wft()){const c=[...s.vvt(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.Wft()?null:new Set(a),u=[];for(let t=0,s=n.length;t<s;++t){const f=n[t];if(0===e){const d=f.KN(h);null!==d&&d.xvt(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.xvt(i)){if(0===h){null!==l&&!l.has(p)||u.push(p);break}--h}}return 0!==u.length&&(o.Kft(u),i.Ayt(),!0)},v._vt=function(t,s,i){const e=d(this);switch(t){case 0:default:return P.compare(e.XN(),s,i);case 1:return P.compare(e.Ivt(),s,i)}},v.t6=function(t,s,i,e,h,r,n,o,a,l){t=m(t);const u=d(this),c=S.Ydt().KB();for(const f of t.Cvt(u,c)){if(!f.qL().FL())return;u.t6(f,{r6:s,o6:i,l6:e,c6:h,d6:r,y6:n,m6:o,w6:a,M6:l})}},v.s6=function(t){t=m(t);const s=d(this),i=S.Ydt().KB();for(const e of t.Cvt(s,i))s.s6(e)},v.Rvt=function(){const t=d(this);if(t.e6()){const s=t.HN();s.s6(t)}},v.Avt=function(){const t=d(this).HN();return t?t.u4():-1},v.Evt=function(){return d(this).XN()},v.Pvt=function(){return d(this).Ivt()},v.Fvt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i._6(),i.gN()):i.G6(t,s)},v.C6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.C6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,GB:r,u:n,v:o});l&&a.gN()},v.kvt=function(){const t=u(this);return t.A6()?t.E6().cv():0},v.Dvt=function(){const t=u(this);return t.A6()?t.E6().dv():0},v.Ovt=function(t){const s=u(this);t=2===t?!s.oB():0!==t,s.oB()!==t&&s.rB(t)},v.V6=function(t,s){this instanceof self.XB?this.Gj(t,s):this.V6(t,s)},v.Lvt=function(t,s){this instanceof self.XB?this.Tj(t,""+s):this.Lvt(t,""+s)},v.Bvt=function(t){this instanceof self.XB?this._j(t):this.Bvt(t)},v.Nvt=function(){this instanceof self.XB?this.Mj():this.N6()},v.Wvt=function(){this instanceof self.XB?this.vj():this.W6()},v.jvt=function(){return this instanceof self.XB?this.xj():this.jvt()},v.Vvt=function(t){this instanceof self.XB?this._setEnabled(0!==t):this.Uvt(0!==t)},v.Hvt=function(){return this instanceof self.XB?this.$yt():this.zvt()},x.Jvt=function(t,s,i){return P.compare(this.f8().ont(t),s,i)},G.Jvt=function(t,s,i){return P.compare(h(this).ont(t),s,i)},x.qvt=function(t){return!!this.f8().ont(t)},G.qvt=function(t){return!!h(this).ont(t)},v.$vt=function(i,e){const h=m(this),t=h.h5(),r=t.e5();if(!r.length)return!1;let n=h.cJ(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t],u=n?l.KB().KSt(h.ZSt()):0,c=l.ont(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.i0t(o),!0},v.Xvt=function(t){const s=m(this);return(s.dO().$dt().ybt()?n:r)(s,t)},v.qW=function(t){const s=new Set(P.yo(t)),i=d(this).b4();return s.isSubsetOf(i)},v.Yvt=function(){return d(this).Kvt()},v.Zvt=function(){return d(this).b4().size},v.Qvt=function(t){return d(this).t2t(t)},v.s2t=function(t,s){const i=P.yo(s);if(0!==i.length){const e=d(this),h=new Set(e.b4());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.v4(h)}},v.i2t=function(){S.e4(d(this))},v.e2t=function(){return!0},v.h2t=function(){return!0},x.r2t=function(t,s){this.f8().ant(t,s)},G.r2t=function(t,s){h(this).ant(t,s)},x.n2t=function(t,s){const i=this.f8(),e=i.ont(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ant(t,e+s)},G.n2t=function(t,s){const i=h(this),e=i.ont(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ant(t,e+s)},x.o2t=function(t,s){const i=this.f8(),e=i.ont(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ant(t,e-s))},G.o2t=function(t,s){const i=h(this),e=i.ont(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ant(t,e-s))},x.a2t=function(t,s){this.f8().ant(t,s?1:0)},G.a2t=function(t,s){h(this).ant(t,s?1:0)},x.l2t=function(t){const s=this.f8();s.ant(t,0===s.ont(t)?1:0)},G.l2t=function(t){const s=h(this);s.ant(t,0===s.ont(t)?1:0)},v.u2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);S.c2t(),i.QY("state"),i.$M(s,"state"),S.f2t("state",{d2t:!0})},v.p2t=function(){return JSON.stringify(d(this).qM("state"))},v.m2t=function(){return d(this).KB().yf()},v.g2t=function(){let t=S.qdt().F0t(),s=t.n5();for(const i of S.vvt(t))++s;return s},v.y2t=function(){return S.qdt().F0t().h5().e5().length},x.f4=function(){return this.f8().f4()},G.f4=function(){return h(this).f4()},x.u4=function(){return this.f8().u4()},G.u4=function(){return h(this).u4()},v.wpt=function(t){const s=d(this);return t.toLowerCase()===S.Ck().xpt(s)},v.G4=function(t){const s=d(this);S.Ck().G4(s,t)},v.S2t=function(t){const s=m(this);return S.Ck().X1t().w2t(s.h5().e5(),t),!0},v.b2t=function(){return d(this).m4()},P.M2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s._X,S=s.prt,w=s.mrt,b=Object.assign({},v,2<=i?G:x);h&&(y.bMt=b.bMt,y.MMt=b.MMt,y.vMt=b.vMt,y.xMt=b.xMt,y.GMt=b.GMt,S.DM=b.DM,S.BM=b.BM,S.TMt=b.TMt,S.IMt=b.IMt,S.RMt=b.RMt,S.PMt=b.PMt,w.v2t=b.kM,w.x2t=b.LM,w.Xk=b.Yk),r&&(y.FMt=b.FMt,y.kMt=b.kMt,S.Wm=b.Wm,S.km=b.km,S.vC=b.vC,w.G2t=b.Fm,w.T2t=b.Um,w._2t=b.DMt,w.I2t=b.OMt,w.C2t=b.LMt,w.R2t=b.BMt,w.A2t=b.NMt,w.E2t=b.WMt),n&&(y.P2t=b.jMt,y.F2t=b.VMt,y.UMt=b.UMt,S.v5=b.v5,S.HMt=b.HMt,S.zMt=b.zMt,S.JMt=b.JMt,S.qMt=b.qMt,S.$Mt=b.$Mt,w.k2t=b.GetAngle),o&&(y.oB=b.oB,y.XMt=b.XMt,S.rB=b.rB,S.tE=b.tE,S.KMt=b.KMt,w.Opacity=b.ZA,w.D2t=b.iE),a&&(y.ZMt=b.ZMt,y.QMt=b.QMt,y.tvt=b.tvt,S.svt=b.svt,S.ivt=b.ivt,S.evt=b.evt,S.hvt=b.hvt,S.WM=b.WM,w.nvt=b.nvt,w.ovt=b.ovt,w.avt=b.avt,w.lvt=b.lvt,w.uvt=b.uvt),l&&(y.cvt=b.cvt,S.fvt=b.fvt,S.dvt=b.dvt),d&&(y.bvt=b.bvt,y.e6=b.e6,y.jq=b.jq,y.Mvt=b.Mvt,y.Gvt=b.Gvt,y.Tvt=b.Tvt,y._vt=b._vt,S.t6=b.t6,S.s6=b.s6,S.Rvt=b.Rvt,w.Avt=b.Avt,w.Evt=b.Evt,w.Pvt=b.Pvt),p&&(S.Fvt=b.Fvt,S.C6=b.C6,w.kvt=b.kvt,w.Dvt=b.Dvt),u&&(y.oB=b.oB,S.rB=b.Ovt,S.O2t=b.V6,S.L2t=b.Lvt,S.B2t=b.Bvt),c&&(y.N2t=b.jvt,S.W2t=b.Nvt,S.j2t=b.Wvt),f&&(y.fc=b.Hvt,S.V2t=b.Vvt),m&&(y.pvt=b.pvt,y.Svt=b.Svt,y.wvt=b.wvt,s.U2t=M),e||(y.Jvt=b.Jvt,y.qvt=b.qvt,y.$vt=b.$vt,y.Xvt=b.Xvt,y.qW=b.qW,S.r2t=b.r2t,S.n2t=b.n2t,S.o2t=b.o2t,S.a2t=b.a2t,S.l2t=b.l2t,S.s2t=b.s2t,y.e2t=b.e2t,y.h2t=b.h2t,S.i2t=b.i2t,S.u2t||(S.u2t=b.u2t),w.p2t||(w.p2t=b.p2t),w.g2t=b.g2t,w.y2t=b.y2t,w.H2t=b.f4,w.z2t=b.u4,w.m2t=b.m2t,w.Yvt=b.Yvt,w.Zvt=b.Zvt,w.Qvt=b.Qvt,y.wpt=b.wpt,S.G4=b.G4,S.S2t=b.S2t),g&&(w.b2t=b.b2t)}}{const ta=self.Ns;ta.Y1t=class extends ta.Sr{constructor(t){super(),this.r0t=t,this.Ff="",this.T3=-1,this.J2t="",this.q2t=!1,this.$2t=null,this.p0t=0,this.Vmt=[],this.b0t=null,this.X2t=new Map,this.Y2t=null,this.K2t=null,this.Z2t=-1,this.qyt=null,this.Q2t=null,this.txt=!1}vr(){this.Ff="",this.T3=-1,this.J2t="",this.$2t=null,this.K2t=null,this.qyt=null,this.Q2t=null,this.Z2t=-1,ta.Yn(this.Vmt),this.b0t&&(this.b0t.clear(),this.b0t=null);for(const t of this.X2t.values())t.vr();this.X2t.clear(),this.Y2t=null}FM(){const t=this.r0t,s=t.dO().uJ(),i=t.qdt(),e=(this.$2t=i.kk(),this.p0t=i._0t()+1,t.jpt(this.$2t));e&&(this.K2t=e,this.qyt=e.uSt(),this.Q2t=e.lSt().map(t=>t.jet()),e.pyt())&&(this.Z2t=e.pSt());for(const r of s){const n=r.h5();n.Wft()&&!this.$2t.Bgt(r)||(this.Vmt.push(r),this.X2t.set(r,ta.Mr(ta.sxt,n)))}const h=t.Dk();this.b0t=0<h.size?h:null}ixt(t){this.Ff="timer",this.FM(),this.T3=this.r0t.dO().Qk()+t}hxt(t){this.Ff="walltimer",this.FM(),this.T3=this.r0t.dO().sD()+t}rxt(t){this.Ff="signal",this.FM(),this.J2t=t.toLowerCase()}w2t(t,s){this.Ff="instance-signals",this.FM(),this.J2t=s.toLowerCase(),this.Y2t=new Set(t)}nxt(t){this.Ff="promise",this.FM(),t.then(()=>this.mpt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.mpt()})}oxt(){return"timer"===this.Ff}axt(){return"walltimer"===this.Ff}dpt(){return"signal"===this.Ff}Mpt(){return"instance-signals"===this.Ff}Lpt(){return"promise"===this.Ff}ppt(){return this.J2t}lxt(){return this.q2t}mpt(){this.q2t=!0}vpt(t){this.Y2t.delete(t),0===this.Y2t.size&&this.mpt()}Q1t(){return this.oxt()?this.T3<=this.r0t.dO().Qk():this.axt()?this.T3<=this.r0t.dO().sD():this.lxt()}uxt(t){t.M0t(this.$2t,this.p0t);for(const[i,e]of this.X2t.entries()){const h=i.h5();e.M0t(h)}this.b0t&&t.N0t([...this.b0t]);const s=this.K2t;s&&(s.Tyt(this.qyt),s.lSt().map((t,s)=>t.vht(this.Q2t[s])),s.pyt())&&s.mSt(this.Z2t)}tpt(t){this.uxt(t),this.$2t.myt(t),this.K2t&&this.K2t.pyt()&&this.K2t.Dyt(this.Z2t),this.r0t.z1t(this.Vmt),this.txt=!0}async hpt(t){this.uxt(t);for(const s of this.$2t.gyt(t))await this.r0t.dO().C1t(s);this.K2t&&this.K2t.pyt()&&this.K2t.Dyt(this.Z2t),this.r0t.z1t(this.Vmt),this.txt=!0}spt(){return this.txt}Dft(t){for(const s of this.X2t.values())s.Dft(t);if("instance-signals"===this.Ff){for(const i of t)this.Y2t.delete(i);0===this.Y2t.size&&this.mpt()}}Lq(){const t={},s={wt:this.Ff,t:this.T3,st:this.J2t,s:this.q2t,ev:this.$2t.wJ(),sm:this.Vmt.map(t=>t.wJ()),dsm:this.b0t?[...this.b0t].map(t=>t.wJ()):null,sols:t};this.$2t.iyt(this.p0t)&&(s.act=this.$2t.Kdt(this.p0t).wJ());for(const[i,e]of this.X2t)t[i.wJ().toString()]=e.Lq();return"instance-signals"===this.Ff&&(s.pi=[...this.Y2t].map(t=>t.u4())),s}static Bpt(t,s){const i=t.dO(),e=t.n1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.a1t(s.act);if(!n)return null;h=n.qF()}const r=ta.Mr(ta.Y1t,t);r.T3=s.t,s.hasOwnProperty("wt")?r.Ff=s.wt:r.Ff=-1===r.T3?"signal":"timer",r.J2t=s.st,r.q2t=s.s,r.$2t=e,r.p0t=h;for(const o of s.sm){const a=i.Qj(o);a&&r.Vmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.Qj(l);u&&(r.b0t||(r.b0t=new Set),r.b0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.Qj(d);if(p){const m=ta.Mr(ta.sxt,null);m.Bq(t,f),r.X2t.set(p,m)}}if("instance-signals"===r.Ff){r.Y2t=new Set;for(const g of s.pi){const y=i.VD(g);y&&r.Y2t.add(y)}}return r}}}{const sa=self.Ns;sa.sxt=class extends sa.Sr{constructor(t){super(),this.Cft=null,this.cxt=!0,this.oH=[],t&&(this.Cft=t.KB(),this.cxt=t.Wft(),sa.eo(this.oH,t.$ft()))}vr(){this.Cft=null,sa.Yn(this.oH)}M0t(t){t.qft(this.cxt),sa.eo(t.$ft(),this.oH)}Dft(t){sa.lo(this.oH,t)}Lq(){return{sa:this.cxt,insts:this.oH.map(t=>t.u4())}}Bq(t,s){const i=t.dO();this.cxt=!!s.sa,sa.Yn(this.oH);for(const e of s.insts){const h=i.VD(e);h&&this.oH.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Ns;ia.fxt=class extends ia.Sr{constructor(t){super(),this.Tf=t.runtime,this._r=t.name??"",this.dxt=!!t.bL,this.pxt=!!t.mxt,this.gxt=!!t._L,this.yxt=!!t.Sxt,this.wxt=!!t.CL,this.bxt=!!t.Mxt,this.vxt=!!t.kL,this.xxt=!!t.GL,this.Gxt=!!t.AL,this.Txt=t._xt,this.Ixt=null,this.Cxt=new Map,this.Rxt=new Map,this.Axt=new Map,this.Ext=new Map,this.Pxt=t.Fxt,this.kxt=null}vr(){this.Tf=null}dO(){return this.Tf}yf(){return this._r}Dxt(){}bpt(){return(2<=this.gbt()?this.kxt:this).constructor}gbt(){return this.Txt}Oxt(t=!1){let s=this.Pxt;return t&&"function"!=typeof s&&2<=this.gbt()?globalThis.w8:s}ML(){return this.dxt}xL(){return this.pxt}TL(){return this.xxt}EL(){return this.Gxt}IL(){return this.gxt}aM(){return this.yxt}RL(){return this.wxt}FL(){return this.bxt}DL(){return this.vxt}NSt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Cxt.get(t);return i||(i=t.bind(s),this.Cxt.set(t,i)),i}fbt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.Rxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}dbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Axt,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}pbt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this.Ext,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Lxt(t){if(!this.ML())throw new Error("must be single-global plugin");this.Ixt=t}VL(){if(this.ML())return this.Ixt;throw new Error("must be single-global plugin")}HL(){if(this.ML())return this.Ixt.HL();throw new Error("must be single-global plugin")}Bxt(){const t=this.gbt(),s=(ia.SL.Nxt(this,t),this.Oxt(!0));if(s){if(this.kxt=new s,!(this.kxt instanceof self.mL))throw new TypeError("plugin class must derive from IPlugin")}else this.kxt=new self.mL;ia.SL.Wxt(t)}NL(){return this.kxt}}}{const ea=self.Ns;ea.jxt=class extends ea.fxt{constructor(t,s){super(t),this.Vxt=s,this.Uxt=0,this.Hxt=new Map,this.zxt("elem-focused",t=>t.Jxt()),this.zxt("elem-blurred",t=>{t&&t.qxt()})}vr(){super.vr()}$xt(t){const s=this.Uxt++;return this.Hxt.set(s,t),s}Xxt(t){this.Hxt.delete(t)}zxt(t,i){this.Tf.U4(this.Vxt,t,t=>{const s=this.Hxt.get(t.elementId);i(s,t)})}}}{const ha=self.Ns;ha.Yxt=class extends ha.Sr{constructor(t){super(),this.Cft=t,this.Tf=t.dO(),this.Kxt=t.qL()}vr(){this.Cft=null,this.Tf=null,this.Kxt=null}KB(){return this.Cft}dO(){return this.Tf}qL(){return this.Kxt}vW(){return this.Cft.vW()}Dxt(){}Cbt(t){}dMt(t){}pMt(t){}$$(t){}tX(){}K$(){}vX(t){}Zxt(){}Oxt(){return null}Qxt(t,s,i){const e=ha.Mr(ha.Event,t,s);e.tGt=this,i&&Object.assign(e,i),this.KB().eY(e)}}}{const ra=self.Ns;ra.sGt=class extends ra.Sr{constructor(t,s){super(),this.Ii=t,this.Vxt=s,this.iGt=null,this.Tf=t.dO(),this.Cft=this.Ii.KB(),this.eGt=this.Cft.fMt(),this.VY=null,this.HY=null,this.K4=!1,this.Q4=!1,this.O0=null,this.qI=!1}vr(){this.qI=!0,this.hGt(),this.rGt(),this.VY=null,this.HY=null,this.O0&&(this.O0.vr(),this.O0=null),this.Ii=null,this.Tf=null,this.Cft=null,this.eGt=null}Gr(){return this.qI}f8(){return this.Ii}dO(){return this.Tf}KB(){return this.Cft}qL(){return this.eGt.qL()}fMt(){return this.eGt}nGt(){return this.Ii.UD()}N4(t){return this.Tf.N4(t,this.Ii,null)}oGt(t){return this.Tf.oGt(t,this.Ii,null)}j4(t){return this.Tf.j4(t,this.Ii,null)}aGt(t,s){return this.Tf.aGt(t,this.Ii,s)}lGt(t,s){return this.Tf.lGt(t,this.Ii,s)}uGt(t){return this.Tf.uGt(t)}cGt(t,s){this.Tf.U4(this.Vxt,t,s)}fGt(t){for(const[s,i]of t)this.cGt(s,i)}dGt(t,s){this.Tf.Cf(this.Vxt,t,s)}pGt(t,s){return this.Tf.iO(this.Vxt,t,s)}mGt(t,s){if(!this.Tf.fk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Vxt,handler:t,data:s,responseId:null});this.dGt(t,s)}gGt(t){if(!t)throw new Error("cannot set empty component id");this.iGt=t}yGt(){if(this.iGt)return this.Tf.hN(this.iGt);throw new Error("wrapper extension component id not set")}nN(t,s){if(!this.iGt)throw new Error("wrapper extension component id not set");this.Tf.nN(this.iGt,t,s)}SGt(t){for(const[s,i]of t)this.nN(s,i)}Uj(t,s){if(!this.iGt)throw new Error("wrapper extension component id not set");this.Tf.Uj(this.iGt,t,s)}Hj(t,s){if(this.iGt)return this.Tf.Hj(this.iGt,t,s);throw new Error("wrapper extension component id not set")}ZK(){}wGt(){}bGt(){if(!this.K4){if(!this.VY)if(this.Tf.X4()){const s=globalThis.C3Debugger,i=this.qL();this.VY=()=>{const t=performance.now();this.ZK(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.VY=()=>this.ZK();this.Tf.h0().addEventListener("tick",this.VY),this.K4=!0}}hGt(){this.K4&&(this.Tf.h0().removeEventListener("tick",this.VY),this.K4=!1)}MGt(){return this.K4}vGt(){if(!this.Q4){if(!this.HY)if(this.Tf.X4()){const s=globalThis.C3Debugger,i=this.qL();this.HY=()=>{const t=performance.now();this.wGt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.HY=()=>this.wGt();this.Tf.h0().addEventListener("tick2",this.HY),this.Q4=!0}}rGt(){this.Q4&&(this.Tf.h0().removeEventListener("tick2",this.HY),this.Q4=!1)}xGt(){return this.Q4}GGt(){return[]}qM(){return null}$M(t){}Zrt(t){}hnt(t,s){}Znt(t,s,i){if(0!==s){const e=this.Zrt(t);if("number"!=typeof e)throw new Error("expected number");this.hnt(t,e+s,i)}}TGt(t,s,i,e){}_Gt(t,...s){t.call(this,...s)}IGt(t,...s){return t.call(this,...s)}Oxt(){return null}Qxt(t,s,i){if(this.Ii.CGt()){const e=this.nGt(),h=ra.Mr(ra.Event,t,s);h.Y6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}aM(){return!1}}}{const na=self.Ns;na.RGt=class extends na.sGt{constructor(t,s){super(t,s),this.zst=t.qD(),this.AGt=null,this.EGt=null}vr(){if(this.AGt){const t=this.Tf.h0();t.removeEventListener("renderercontextlost",this.AGt),t.removeEventListener("renderercontextrestored",this.EGt),this.AGt=null,this.EGt=null}this.zst=null,super.vr()}PGt(){this.FGt()}kGt(){}DGt(){}FGt(){if(!this.AGt){this.AGt=()=>this.Q7(),this.EGt=()=>this.OGt();const t=this.Tf.h0();t.addEventListener("renderercontextlost",this.AGt),t.addEventListener("renderercontextrestored",this.EGt)}}Q7(){this.kGt()}OGt(){this.DGt()}qD(){return this.zst}Oit(){return!1}Dit(){if(!this.Oit())throw new Error("original size not known");const t=this.LGt();if(t)return t.Fm()}Bit(){if(!this.Oit())throw new Error("original size not known");const t=this.LGt();if(t)return t.Um()}LGt(){return null}BGt(){const t=this.LGt();if(t){const s=t.hx();if(s)return[s.Fm(),s.Um()]}return[100,100]}NGt(){const t=this.LGt();return t?t.QC():null}WGt(){const t=this.LGt();return t?t.jGt():null}VGt(){const t=this.LGt();return!!t&&t.UGt()}CMt(t){const s=this.Ii.qD();return[s.kM(),s.LM(),s.vN()]}Zxt(t,s,i){}HGt(t,s){}mq(){return!0}}}{const oa=self.Ns,aa=oa.Mr(oa.Rect);oa.zGt=class extends oa.RGt{constructor(t,s){super(t,s),this.JGt=this.qL().$xt(this),this.qGt=!0,this.$Gt=!1,this.XGt=!1,this.YGt=-.2,this.KGt=oa.Mr(oa.Rect,0,0,-1,-1);const i=this.Tf.sL();this.ZGt=i.hj(),this.QGt=i.rj(),this.tTt=-1,this.sTt=-1,this.iTt=!1,this.bGt()}vr(){this.qL().Xxt(this.JGt),this.eTt("destroy"),this.JGt=-1,super.vr()}L6(){if(this.Tf.fk())throw new Error("not valid in worker mode");return this.hTt("get-element")}eTt(t,s){(s=s||{}).elementId=this.JGt,this.dGt(t,s)}hTt(t,s){return(s=s||{}).elementId=this.JGt,this.mGt(t,s)}rTt(t,s){return(s=s||{}).elementId=this.JGt,this.pGt(t,s)}nTt(t){t=t||{};const s=this.qD();t.elementId=this.JGt,t.isVisible=s.oB(),t.htmlIndex=s.$D().cj(),t.htmlZIndex=s.fj(),Object.assign(t,this.oTt()),this.qGt=!!t.isVisible,this.mGt("create",t),this.aTt(!0)}Ovt(t){this.qGt!==(t=!!t)&&(this.qGt=t,this.eTt("set-visible",{isVisible:t}))}ZK(){this.aTt(!1)}lTt(){const t=this.Tf.sL().Sj();return"Android"===oa.fi.di&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}aTt(u){if(!this.f8().wj()){let t=this.qD(),s=t.$D(),i=t.GN(),[e,h]=s.VB(i.Ol(),i.Ll()),[r,n]=s.VB(i.Bl(),i.Nl()),o=this.Tf.sL(),a=o.rL(),l=o.oL();if(t.oB()&&s.oB())if(!this.lTt()&&(r<=0||n<=0||a<=e||l<=h))this.Ovt(!1);else{aa.set(e,h,r,n);const c=o.hj(),f=o.rj(),d=s.cj(),p=t.fj();if(!u&&aa.equals(this.KGt)&&this.ZGt===c&&this.QGt===f&&this.tTt===d&&this.sTt===p)this.Ovt(!0);else{this.KGt.I(aa),this.ZGt=c,this.QGt=f,this.tTt=d,this.sTt=p,this.Ovt(!0);let t=null;this.XGt&&(t=s.bj()+this.YGt),this.eTt("update-position",{left:Math.round(this.KGt.Ol()),top:Math.round(this.KGt.Ll()),width:Math.round(this.KGt.width()),height:Math.round(this.KGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Ovt(!1)}}N6(){this.hTt("focus",{focus:!0})}W6(){this.hTt("focus",{focus:!1})}Jxt(){this.$Gt=!0}qxt(){this.$Gt=!1}jvt(){return this.$Gt}V6(t,s){this.eTt("set-css-style",{prop:oa.Qo(t),val:s})}Lvt(t,s){this.eTt("set-attribute",{name:t,val:s})}Bvt(t){this.eTt("remove-attribute",{name:t})}uTt(){this.iTt||(this.iTt=!0,Promise.resolve().then(()=>{this.iTt=!1,this.eTt("update-state",this.oTt())}))}oTt(){}cTt(){return this.JGt}}}{const la=self.Ns,ua=self.Q6;la.fTt=class extends la.Sr{constructor(t){super(),this.Tf=t.runtime,this._r=t.name??"",this.dTt=la.Mr(la.Tc),this.pTt=la.Mr(la.Tc),this.Txt=t._xt,this.Pxt=t.Fxt,this.mTt=null}vr(){this.pTt.vr(),this.dTt.vr(),this.Tf=null}dO(){return this.Tf}yf(){return this._r}Dxt(){}gbt(){return this.Txt}Oxt(t=!1){let s=this.Pxt;return t&&"function"!=typeof s&&2<=this.gbt()?globalThis.Rj:s}gTt(t){this.dTt.Rc(t)}GK(){return this.dTt.Ac()}Zz(t){this.pTt.Rc(t)}sJ(t){this.pTt.Mc(t)}e5(){return this.pTt.Ac()}Bxt(){const t=this.gbt(),s=(la.SL.Nxt(this,t),this.Oxt(!0));if(s){if(this.mTt=new s,!(this.mTt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.mTt=new ua;la.SL.Wxt(t)}H6(){return this.mTt}}}{const ca=self.Ns;ca.yTt=class extends ca.Sr{constructor(t){super(),this.Tf=t.dO(),this.twt=t,this.Cft=t.KB(),this.STt=t.z6(),this.STt.gTt(this.Cft)}vr(){this.Tf=null,this.twt=null,this.Cft=null,this.STt=null}Dxt(){}X6(){return this.twt}KB(){return this.Cft}dO(){return this.Tf}z6(){return this.STt}}}{const fa=self.Ns;fa.wTt=class extends fa.Sr{constructor(t,s){super(),this.bTt=t,this.Vxt=s,this.Ii=t.K6(),this.Tf=t.dO(),this.twt=t.X6(),this.eGt=this.twt.fMt(),this.K4=!1,this.Q4=!1,this.jj=!1,this.O0=null}vr(){this.hGt(),this.rGt(),this.MTt(),this.O0&&(this.O0.vr(),this.O0=null),this.bTt=null,this.Ii=null,this.Tf=null,this.twt=null,this.eGt=null}z6(){return this.twt.z6()}vTt(){return this.bTt}K6(){return this.Ii}KB(){return this.Ii.KB()}qD(){return this.Ii.qD()}dO(){return this.Tf}X6(){return this.twt}fMt(){return this.eGt}nGt(){return this.bTt.nGt()}N4(t){return this.Tf.N4(t,this.Ii,this.twt)}oGt(t){return this.Tf.oGt(t,this.Ii,this.twt)}j4(t){return this.Tf.j4(t,this.Ii,this.twt)}xTt(){}ZK(){}wGt(){}GTt(){}bGt(){this.K4||(this.Tf.Dj(this),this.K4=!0)}hGt(){this.K4&&(this.Tf.Oj(this),this.K4=!1)}MGt(){return this.K4}vGt(){this.Q4||(this.Tf.Lj(this),this.Q4=!0)}rGt(){this.Q4&&(this.Tf.Bj(this),this.Q4=!1)}xGt(){return this.Q4}TTt(){this.jj||(this.Tf.Nj(this),this.jj=!0)}MTt(){this.jj&&(this.Tf.Wj(this),this.jj=!1)}_Tt(){return this.jj}GGt(){return[]}cGt(t,s){this.Tf.U4(this.Vxt,t,s)}ITt(t,s){}qM(){return null}$M(t){}Zrt(t){}hnt(t,s){}Znt(t,s){if(0!==s){const i=this.Zrt(t);if("number"!=typeof i)throw new Error("expected number");this.hnt(t,i+s)}}TGt(t,s,i,e){}_Gt(t,...s){t.call(this,...s)}IGt(t,...s){return t.call(this,...s)}Oxt(){return null}Qxt(t,s,i){if(this.bTt.CGt()){const e=this.nGt(),h=fa.Mr(fa.Event,t,s);h.CTt=e,h.Y6=e.Y6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Ns),i=(r.CX={},r.olt={},r.Ws()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.SL=class extends r.Sr{constructor(t,s){super(),this.Tf=t,this.RTt=[],this.DSt=null,this.ATt=[],this.ETt=new Map,this.PTt=null,this.FTt=null,this.kTt=new Set(s)}DTt(t){const s=t[19],i=this.Tf.Nyt(t[0]);if(!i)throw new Error("missing plugin");r.M2t(t,i,s);const e=2<=s?r.fxt:i,h=r.Mr(e,{runtime:this.Tf,bL:t[1],mxt:t[2],_L:t[5],CL:t[8],Sxt:t[9],Mxt:t[13],kL:t[14],GL:t[17],AL:t[18],_xt:s,name:t[20],Fxt:2<=s?i:null});h.Dxt(),this.RTt.push(h),u.set(i,h)}OTt(){this.DSt=r.Mr(r.CX.IX,{runtime:this.Tf,bL:!0}),this.DSt.Dxt()}LTt(t){const i=t[1],e=t[2],h=this.Tf.Nyt(t[0]);if(!h)throw new Error("missing behavior");this.ETt.set(h,()=>{const t=2<=i?r.fTt:h,s=r.Mr(t,{runtime:this.Tf,name:e,_xt:i,Fxt:2<=i?h:null});s.Dxt(),this.ATt.push(s),c.set(h,s),!this.PTt&&r.olt.BTt&&s instanceof r.olt.BTt?this.PTt=s:!this.FTt&&r.olt.NTt&&s instanceof r.olt.NTt&&(this.FTt=s),s.Bxt()})}WTt(t){const s=this.ETt.get(t);s&&(s(),this.ETt.delete(t))}static Nxt(t,s=1){if(r.SL.Nxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Wxt(t=1){if(r.SL.Wxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static s4(){if(r.SL.s4!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static yL(t){if(r.SL.yL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static jTt(t){n.push(t)}static VTt(){n.pop()}static L4(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}UTt(){for(const t of this.RTt)t.Bxt()}static BL(t){return u.get(t)||null}static tW(t){return c.get(t)||null}_7(){return this.DSt}HTt(){return this.PTt}zTt(){return this.FTt}hN(t){return this.kTt.has(t)}},o=r.SL.Nxt,a=r.SL.Wxt,t=r.SL.s4,l=r.SL.yL}{const da=self.Ns,pa=new Set;da.JTt=class extends da.Sr{constructor(){super(),this.qTt=0,this.j7="",this.V7=0,this.$Tt=0,this.XTt=0,this.gg=0,this.yg=0,this.YTt=!1,this.KTt=!1,this.ZTt=null,this.QTt="",this.jI=da.Mr(da.Rect),this.t_t=da.Mr(da.fu),this.s_t="",this.i_t=new self.cO(this),pa.add(this)}vr(){this.HI(),this.ZTt&&0===this.ZTt.iH()&&this.ZTt.vr(),this.ZTt=null,pa.delete(this),this.e_t()}static Q7(){for(const t of pa)t.QTt="",t.jI.set(0,0,0,0),t.t_t.Fu(t.jI)}h_t(t){this.j7=t[0],this.V7=t[1],this.$Tt=t[2],this.XTt=t[3],this.gg=t[4],this.yg=t[5],this.YTt=t[6],this.KTt=!0}r_t(t,s){if(this.ZTt)throw new Error("already loaded asset");this.j7=s;const i={};return da.Eo(s)&&(i.g7="remote"),this.fO(t,i),this.ZTt.w7()}n_t(t,s){if(this.ZTt)throw new Error("already loaded asset");this.j7="",this.V7=s.size,this.ZTt=da.Mr(da.y7,t.KF(),{blob:s,size:this.V7,g7:"local"})}o_t(t){if(t===this)throw new Error("cannot replace with self");this.qTt++,this.HI(),this.j7=t.j7,this.V7=t.V7,this.$Tt=t.$Tt,this.XTt=t.XTt,this.gg=t.gg,this.yg=t.yg,this.YTt=t.YTt,this.KTt=t.KTt,this.ZTt=t.ZTt,this.QTt=t.QTt,this.jI=t.jI,this.t_t=t.t_t,this.e_t()}S7(){return this.j7}xc(){return this.V7}a_t(){return this.$Tt}l_t(){return this.XTt}UGt(){return this.YTt}Fm(){return this.gg}Um(){return this.yg}u_t(){return this.ZTt.Fm()}c_t(){return this.ZTt.Um()}fO(t,s){if(this.ZTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.S7(),size:this.xc()}),this.ZTt=t.m7(s)}J7(){return this.ZTt&&this.ZTt.J7()}async KV(t,s){if(!this.ZTt)throw new Error("no asset");if(this.QTt)throw new Error("already loaded texture");const i=this.qTt,e=(this.QTt="loading",await this.ZTt.KV(t,s));if(this.qTt!==i)return null;if(!e)return this.QTt="",null;this.QTt="loaded",this.KTt||(this.gg=e.Fm(),this.yg=e.Um(),this.KTt=!0);const h=this.YTt?this.yg:this.gg,r=this.YTt?this.gg:this.yg;return this.jI.set(this.$Tt,this.XTt,this.$Tt+h,this.XTt+r),this.jI.Ct(e.Fm(),e.Um()),this.t_t.Fu(this.jI),this.YTt&&this.t_t.Nu(),e}HI(){this.QTt&&(this.ZTt&&this.ZTt.HI(),this.QTt="",this.jI.set(0,0,0,0),this.t_t.Fu(this.jI))}hx(){return this.ZTt&&"loaded"===this.QTt?this.ZTt.hx():null}QC(){return this.jI}jGt(){return this.t_t}F8(){return this.i_t}f_t(){return this.ZTt}async d_t(t){t=t||await this.ZTt.eH();const s=da.Ho(this.gg,this.yg),i=s.getContext("2d");return this.YTt?(i.rotate(Math.PI/-2),i.translate(-this.yg,0),i.drawImage(t,this.$Tt,this.XTt,this.yg,this.gg,0,0,this.yg,this.gg)):i.drawImage(t,this.$Tt,this.XTt,this.gg,this.yg,0,0,this.gg,this.yg),s}async p_t(t){if(!this.s_t){const s=await this.d_t(t),i=await da.zo(s);this.s_t=URL.createObjectURL(i)}return this.s_t}e_t(){this.s_t&&(URL.revokeObjectURL(this.s_t),this.s_t="")}}}{const ma=self.Ns;ma.m_t=class extends ma.Sr{constructor(t){super(),this._r=t[0],this.g_t=t[1],this.zwt=!!t[2],this.Rot=t[3],this.y_t=t[4],this.S_t=!!t[5],this.NH=t[6],this.w_t=t[7].map(t=>ma.Mr(ma.b_t,t)),this.M_t=new self.nW(this)}static v_t(t,s){const i=ma.Mr(ma.m_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.w_t.push(ma.b_t.v_t(t)),i}vr(){for(const t of this.w_t)t.vr();ma.Yn(this.w_t)}x_t(t){for(const s of this.w_t)s.vW().fO(t)}G_t(s,i){return Promise.all(this.w_t.map(t=>t.vW().KV(s,i)))}T_t(){for(const t of this.w_t)t.vW().HI()}yf(){return this._r}wJ(){return this.NH}pW(){return this.w_t.length}gW(){return this.w_t}__t(t){if((t=Math.floor(t))<0||t>=this.w_t.length)throw new RangeError("invalid frame");return this.w_t[t]}I_t(t,s){(s=Math.floor(s))<0?this.w_t.unshift(t):s>=this.w_t.length?this.w_t.push(t):this.w_t.splice(s,0,t)}C_t(t){if((t=Math.floor(t))<0||t>=this.w_t.length)throw new RangeError("invalid frame");this.w_t[t].vr(),this.w_t.splice(t,1)}R_t(i){for(let t=0,s=this.w_t.length;t<s;++t)if(ma.Mh(this.w_t[t].VW(),i))return t;return-1}A_t(t){if("string"!=typeof t)return t;{const s=this.R_t(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}oW(){return this.g_t}aW(){return this.zwt}lW(){return this.Rot}cW(){return this.y_t}dW(){return this.S_t}E_t(){return this.M_t}}}{const ga=self.Ns,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.b_t=class extends ga.Sr{constructor(t){super(),this.P_t=ga.Mr(ga.JTt),this.P_t.h_t(t),this.F_t=t[7],this.k_t=ga.Mr(ga.fl,t[8],t[9]),this.D_t=t[10].map(t=>ga.Mr(ga.O_t,this,t)),this.L_t=new Map;for(const i of this.D_t)this.L_t.set(i.yf().toLowerCase(),i);this.B_t=null;const s=t[11];6<=s.length&&(this.B_t=ga.Mr(ga.Ju,s)),this.Ty=t[12]||"",this.N_t=new self.MW(this)}static v_t(t){const s=ga.Mr(ga.b_t,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.P_t.n_t(t,ya),s}vr(){this.B_t&&(this.B_t.vr(),this.B_t=null),this.P_t.vr(),this.P_t=null}vW(){return this.P_t}xW(){return this.F_t}TW(){return this.k_t.yl()}IW(){return this.k_t.wl()}BW(){return this.B_t}OW(t){return this.L_t.get(t.toLowerCase())||null}DW(t){return(t=Math.floor(t))<0||t>=this.D_t.length?null:this.D_t[t]}EW(){return this.D_t.length}VW(){return this.Ty}yW(){return this.N_t}}}{const Sa=self.Ns;Sa.O_t=class extends Sa.Sr{constructor(t,s){super(),this.W_t=t,this._r=s[0],this.j_t=Sa.Mr(Sa.fl,s[1],s[2])}vr(){}yf(){return this._r}kM(){return this.j_t.yl()}LM(){return this.j_t.wl()}V_t(){return this.j_t}}}{const g=self.Ns,wa=self.C3Debugger,ba=self.zL;g.Klt=class extends g.Sr{constructor(s,t,i){super();const e=s.Nyt(i[1]),[h,r]=(this.Tf=s,this.Kxt=g.SL.BL(e),this.eGt=null,this.U_t=e.Instance,this.Gy=t,this.NH=i[11],this._r=i[0],this.vSt=this.Tf.e1t(i[14]),this.H_t=!!i[9],this.z_t=!!i[2],this.J_t=!!i[10],this.q_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],$_t:s.e1t(t[3])})),this.X_t=i[4],this.Y_t=i[5],this.pxt=this.Kxt.xL(),this.K_t=g.Mr(g.Event.h0),this.Mz=null,s.sk().jO());if(this.Z_t=g.Mr(g.Q_t,h,r),this.tIt=!0,this.sIt=null,this.iIt=null,this.eIt=-1,this.hIt=null,this.rIt=null,this.nIt=null,this.oIt=null,this.aIt=null,this.lIt=!1,this.uIt=null,this.cIt=i[8].map(t=>g.fIt.Px(this,t)),this.dIt=[],this.pIt=new Map,this.mIt=new Map,this.gIt=new Set,this.yIt=new Map,this.SIt=g.Mr(g.Ift,this),this.wIt=null,this.bIt=0,this.MIt=!1,this.uIt=null,this.P_t=null,this.vIt=null,this.xIt=null,this.GIt=null,this.TIt=0,this.Ywt=new Map,this.Kwt=new Map,this.oH=[],this._It=new Map,this.IIt=!0,this.Kxt.RL()&&(this.Mz=g.Mr(g.vz,this,i[12])),i[6]&&(this.P_t=g.Mr(g.JTt),this.P_t.h_t(i[6])),i[7]){this.vIt=i[7].map(t=>g.Mr(g.m_t,t)),this.xIt=new Map,this.GIt=new Map;for(const a of this.vIt)this.xIt.set(a.yf().toLowerCase(),a),this.GIt.set(a.wJ(),a)}this.z_t?(this.sIt=[],this.iIt=new Set,this.eIt=this.Tf.CIt()):(this.hIt=[],this.rIt=new Set,this.nIt=[],this.oIt=[],this.aIt=[]);const n=this.Kxt.gbt();if(n<2&&(this.eGt=g.Mr(e.RIt,this,i[15]),!(this.eGt instanceof g.Yxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.AIt=null,this.EIt=null,this.b$=g.Mr(g.Event.h0),g.SL.Nxt(this,n);let o;if(o=2<=n?(o=e.RIt)||globalThis.A8:this.eGt.Oxt()){if(this.AIt=new o(n<2?this:null),n<2&&!(this.AIt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.AIt instanceof globalThis.A8))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.AIt=new ba;if(g.SL.Wxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.eGt.Zxt(u,c,f)}}this.Tf.PIt()&&!this.z_t&&!this.J_t&&this.pxt||this.Dxt(),this.Kxt.ML()&&(this.Kxt.Lxt(this),this.FIt(i)),this.kIt=null}static Px(t,s,i){return g.Mr(g.Klt,t,s,i)}vr(){if(this.K_t.vr(),this.K_t=null,this.P_t&&(this.P_t.vr(),this.P_t=null),this.vIt){for(const t of this.vIt)t.vr();g.Yn(this.vIt),this.xIt.clear(),this.GIt.clear()}this.kIt=null,this.SIt.vr(),this.SIt=null,this.Ywt.clear(),this.Kwt.clear(),this.uIt=null,this.Tf=null}DIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Tf.Wz(i[t]);this.sIt.push(e),this.iIt.add(e),e.hIt.push(this),e.rIt.add(this)}}OIt(t){this.lIt=!0,this.uIt=t}a4(){return this.lIt}z$(){return this.uIt}LIt(){let t=0;if(!this.z_t)for(const s of this.hIt)for(const i of s.BIt()){const e=i.yf().toLowerCase();this.pIt.set(e,i),this.mIt.set(e,t),this.dIt.push(i),++t}for(const h of this.BIt()){const r=h.yf().toLowerCase();this.pIt.set(r,h),this.mIt.set(r,t),this.dIt.push(h),++t}for(const n of this.dIt)this.gIt.add(n.z6().constructor);if(!this.z_t&&this.hIt.length){let t=this.Tf.NIt(),s=(g.Zn(this.nIt,t,0),g.Zn(this.oIt,t,0),g.Zn(this.aIt,t,0),[]),i=0,e=0,h=0;for(const o of this.hIt){const a=o.ZSt(),l=(this.nIt[a]=i,i+=o.WIt(),this.oIt[a]=e,e+=o.jIt(),this.aIt[a]=h,h+=o.VIt(),o.g5());if(l&&this.Mz)for(const u of l.y5())s.push(u.UIt(this.Mz))}this.Mz&&this.Mz.HIt(s)}}FIt(t){const s=this.Tf.zIt(),i=g.Mr(g.Instance,{runtime:this.Tf,YB:this,uid:s});i.JIt(t[16],[]),this.Tf.qIt(s,i),this.oH.push(i)}fMt(){return this.eGt}$It(){return this.J_t}h0(){return this.K_t}Dxt(){this.z_t||(this.eGt?this.eGt.Dxt():this.AIt.E8())}XIt(){return 0<this.TIt}async $$(t){this.z_t||(this.TIt++,1===this.TIt&&(this.eGt?await this.eGt.$$(t):await this.AIt.k8(this.Tf.sL().YIt())))}tX(){if(!this.z_t){if(this.TIt--,this.TIt<0)throw new Error("released textures too many times");0===this.TIt&&(this.eGt?this.eGt.tX():this.AIt.D8(this.Tf.sL().YIt()))}}K$(){if(this.z_t)throw new Error("not applicable to family");this.eGt?this.eGt.K$():this.AIt.O8()}async vX(t){this.z_t||(this.eGt?await this.eGt.vX(t):await this.AIt.L8(this.Tf.sL().YIt()))}dO(){return this.Tf}qL(){return this.Kxt}KIt(){return this.U_t}yf(){return this._r}e1t(){return this.vSt}qF(){return this.Gy}wJ(){return this.NH}cJ(){return this.z_t}Kz(){return this.H_t}xL(){return this.pxt}ZSt(){return this.eIt}BIt(){return this.cIt}jIt(){return this.X_t}ZIt(t){return t&&this.gIt.has(t)}WIt(){return this.q_t.length}QIt(){return this.q_t.map(t=>t.sid)}tCt(s){return this.q_t.findIndex(t=>t.sid===s)}wit(s){return this.q_t.findIndex(t=>t.name===s)}sCt(){return this.q_t.map(t=>t.name)}iCt(){return this.q_t.map(t=>t.$_t)}Mit(t){if((t=Math.floor(t))<0||t>=this.q_t.length)throw new RangeError("invalid instance variable index");return this.q_t[t].type}bit(t){if((t=Math.floor(t))<0||t>=this.q_t.length)throw new RangeError("invalid instance variable index");return this.q_t[t].name}VIt(){return this.Y_t}eCt(){return this.dIt}Jht(t){return this.pIt.get(t.toLowerCase())||null}xit(t){const s=this.mIt.get(t.toLowerCase());return void 0===s?-1:s}g5(){return this.Mz}RL(){return this.Kxt.RL()}hCt(){return this.Mz&&this.Mz.rCt()}J1t(){return this.SIt}h5(){return this.SIt.h5()}vW(){return this.P_t}Uz(t){this.wIt=t}Vz(){return this.wIt}zz(t){this.bIt=t}nCt(){return this.bIt}oCt(){return this.vIt}aCt(){return this.vIt.length}u1t(){return this.hIt}SMt(t){return this.rIt.has(t)}vgt(){return this.sIt}fJ(t){return this.iIt.has(t)}ewt(t){return this.oIt[t]}KSt(t){return this.nIt[t]}nSt(t){this.yIt.set(t.cSt().toLowerCase(),t)}oSt(t){return!!this.ySt(t)}ySt(t){const s=this.yIt.get(t.toLowerCase());return s&&s.fc()?s:null}lCt(){return this.vIt}uCt(t){if(this.vIt)return this.xIt.get(t.toLowerCase())||null;throw new Error("no animations")}cCt(t){if(this.vIt)return this.GIt.get(t)||null;throw new Error("no animations")}fCt(t){if(this.uCt(t))throw new Error(`animation name '${t}' already exists`);const s=g.m_t.v_t(this.dO(),t);return this.vIt.push(s),this.xIt.set(s.yf().toLowerCase(),s),this.GIt.set(s.wJ(),s),s}dCt(t){const s=this.uCt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.vIt.length)throw new Error("cannot remove last animation");const i=this.vIt.indexOf(s);this.vIt.splice(i,1),this.xIt.delete(s.yf().toLowerCase()),this.GIt.delete(s.wJ()),s.vr()}pCt(){if(this.vIt)return this.vIt[0];throw new Error("no animations")}mCt(){return this.pCt().__t(0)}gCt(){if(this.vIt){const t=this.mCt().vW();return[t.Fm(),t.Um()]}return this.P_t?[this.P_t.Fm(),this.P_t.Um()]:[100,100]}HL(){if(this.Kxt.ML())return this.oH[0];throw new Error("not a single-global plugin")}e5(){return this.oH}*instances(){yield*this.oH}*i5(){yield*this.oH,yield*this.Tf.vvt(this)}n5(){return this.oH.length}Zz(t){this.oH.push(t)}yCt(){this.IIt=!0}FX(){if(this.IIt&&!this.z_t){let s=this.oH,i=0;for(let t=s.length;i<t;++i)s[i].SCt(i);const t=this.Tf.wCt();for(const e of t)e.KB()===this&&e.SCt(i++);this.IIt=!1}}bCt(t){const s=this.oH;if(t<s.length)return s[t];t-=s.length;const i=this.Tf.wCt();for(const e of i)if(e.KB()===this){if(0===t)return e;--t}return null}rvt(t){if(t&&t.a4()&&t.KB()!==this)for(const i of t.l4())if(i.KB()===this)return i;const s=this.h5().e5();return s.length?s[0]:null}s5(t){const s=this.h5().e5();return 0<s.length?s[t.f4()%s.length]:null}*Cvt(t,s){let i=this.h5().e5(),e=i.length,h=s.h5(),r=s.h5().e5(),n=r.length,o=t.f4(),a=(!s.cJ()&&h.Wft()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Cbt(t){this.eGt?.Cbt(t)}Ayt(){if(this.lIt&&!this.z_t){this.FX();const t=this.h5(),s=t.$ft(),i=t.Wft(),e=this.Tf.qdt(),h=e&&e.kk()&&e.kk().e0t();for(const r of this.uIt.EX())if(r!==this){r.FX();const n=r.h5();if(n.qft(i),!i){const o=n.$ft();g.Yn(o);for(const a of s)o.push(r.bCt(a.f4()));if(h){const l=t.Xft(),u=n.Xft();g.Yn(u);for(const c of l)u.push(r.bCt(c.f4()))}}}}}Fbt(t,s){for(const i of this.z$().EX()){const e=i.h5();t?g.Xn(e.Xft(),s):g.Xn(e.$ft(),s)}}MCt(){return this.Z_t}vCt(t){this.tIt=!!t}xCt(){if(this.tIt&&this.pxt){for(const t of this.oH)t.qD().GCt();for(const s of this.Tf.wCt())s.KB()===this&&s.qD().GCt();this.tIt=!1}}TCt(s,t,i){if(t){const e=this._It.get(t);e&&(e.delete(s),0===e.size)&&this._It.delete(t)}if(i){let t=this._It.get(i);t||(t=new Set,this._It.set(i,t)),t.add(s)}}_Ct(){if(this.cJ()){const t=new Set;for(const s of this.sIt)for(const i of s._Ct())t.add(i);return t.values()}return this._It.keys()}vbt(){return this.Ywt||(this.Ywt=new Map),this.Ywt}xbt(){return this.Kwt||(this.Kwt=new Map),this.Kwt}ICt(){return this.ZIt(g.olt.BTt)}CCt(){return this.ZIt(g.olt.NTt)}RCt(){return this.ZIt(g.olt.NoSave)}Xz(){return this.ZIt(g.olt.Persist)}Lq(){const t={instances:this.oH.map(t=>t.qM())};return this.Ywt&&this.Ywt.size&&(t.ex=g.Ko(this.Ywt)),t}Bq(t,e){this.Ywt&&(this.Ywt.clear(),this.Ywt=null);const s=t.ex,h=(s&&(this.Ywt=g.Zo(s)),this.oH),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].$M(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.Tf.e4(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.xL()||(s=this.Tf.TD().D$(t.w.l))){const n=this.Tf.Yz(this.wIt||this,s,!1,0,0,!0);n.$M(t),e&&e.add(n)}}this.kIt=r,this.yCt()}ACt(){return this.kIt}ECt(){this.kIt=null}PCt(){for(let t=0,s=this.oH;t<s;++t)this.oH[t].PCt()}jL(){return this.AIt}Gk(){return this.b$}FCt(){return this.EIt}o5(t){this.EIt=t}eY(t){const s=this.Tf,i=s.X4()&&!s.Ck().f5();i&&wa.StartMeasuringScriptTime(),this.b$.dispatchEvent(t),i&&wa.AddScriptTime()}}}{const Ma=self.Ns;Ma.kCt=class extends Ma.Sr{constructor(t,s){super(),this.Tf=t,this.DCt=s;for(const i of this.DCt)i.OIt(this)}vr(){this.Tf=null}dO(){return this.Tf}H$(){return this.DCt}EX(){return this.DCt}DX(){return this.DCt.some(t=>t.xL())}}}{let w=self.Ns,h=self.C3Debugger,n=w.SL,o=[],a=0,b=new WeakMap,e=new WeakMap;w.Instance=class extends w.Sr{constructor(t){if(w.SL!==n)throw new Error("invalid addon manager");super(),this.Tf=t.runtime,this.OCt=t.YB,this.zst=null,this.LCt=null,this.BCt=null,this.NCt=0,this.WCt=t.uid,this.jCt=a++,this.Lbt=0,this.VCt=null;const s=w.yo(t.tags),i=(0<s.length&&(this.VCt=new Set(s)),this.UCt=o,this.HCt=o,this.OCt.eCt()),e=(0<i.length&&(this.HCt=i.map((t,s)=>w.Mr(w.zCt,{runtime:this.Tf,J6:t,Y6:this,index:s}))),this.JCt=this.OCt.a4()?[]:null,this.qCt=-1,this.K_t=null,this.qL());if(e.aM()&&(this.Lbt|=4),e.xL())if(this.zst=w.Mr(w.$Ct,this,t.mN),t.XCt)this.zst.YCt(t.XCt);else{this.zst.KCt();const[h,r]=this.OCt.gCt();this.zst.vC(h,r),this.KB().hCt()&&this.zst.pN().ZCt()}t.QCt?this.tRt(t.QCt):this.sRt()}vr(){if(this.BCt&&(this.BCt.i4(),this.BCt=null),0<this.HCt.length){for(const i of this.HCt)i.vr();w.Yn(this.HCt)}this.LCt&&(this.LCt.vr(),this.LCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.JCt&&w.Yn(this.JCt),this.K_t&&(this.K_t.vr(),this.K_t=null),this.VCt&&this.VCt.clear(),this.VCt=null,this.Tf=null,this.OCt=null,0<this.UCt.length&&w.Yn(this.UCt),this.zst&&(this.zst.vr(),this.zst=null)}tRt(t){0<t.length&&(this.UCt=[],w.eo(this.UCt,t))}sRt(){const s=this.OCt.WIt();if(0!==s){this.UCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.UCt.push(i[this.OCt.Mit(t)])}}JIt(t,i){if(this.LCt)throw new Error("already got sdk instance");for(let t=0,s=this.HCt.length;t<s;++t){const e=this.HCt[t];e.JIt(i?i[t]:null)}const s=this.qL().gbt();if(s<2){if(this.LCt=w.Mr(this.OCt.KIt(),this,t),!(this.LCt instanceof w.sGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.qL().xL()&&this.OCt.FCt()&&this.UD()}else{const h=this.qL().Oxt();this.iRt(h.Instance,t)}}B6(){return this.LCt??this.BCt}qD(){return this.zst}dO(){return this.Tf}iD(){return this.qCt}g4(){const t=this.qCt;return-1===t?this.dO().iD():t}eD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.qCt=t,this.KB().hCt()&&this.Tf.eRt(this,!0)}S4(){this.qCt=-1,this.KB().hCt()&&this.Tf.eRt(this,!1)}_q(){return this.Tf.hRt(this)}h0(){return this.K_t||(this.K_t=w.Mr(w.Event.h0)),this.K_t}_v(t){this.LCt?this.LCt._v(t):this.BCt.H8(this.Tf.sL().YIt())}Dxt(t){this.LCt.Dxt(t)}rRt(){this.Lbt|=2}nRt(){return 0!=(2&this.Lbt)}oRt(){this.Lbt|=1}wj(){return 0!=(1&this.Lbt)}aM(){return 0!=(4&this.Lbt)||this.LCt.aM()}aRt(){this.Lbt|=32}yq(){return 0!=(32&this.Lbt)}lRt(){return 0!=(8&this.Lbt)}uRt(t){t?this.Lbt|=8:this.Lbt&=-9}cRt(){return 0!=(16&this.Lbt)}fRt(t){t?this.Lbt|=16:this.Lbt&=-17}dRt(){return 0!=(64&this.Lbt)}pRt(t){t?this.Lbt|=64:this.Lbt&=-65}mRt(t,s){t<<=16,s?this.Lbt|=t:this.Lbt&=~t}gRt(t){return 0!=(this.Lbt&t<<16)}LGt(){return this.LCt.LGt()}BGt(){return this.LCt.BGt()}NGt(){return this.LCt.NGt()}WGt(){return this.LCt.WGt()}VGt(){return this.LCt.VGt()}CMt(t){return this.LCt.CMt(t)}KB(){return this.OCt}mq(){return this.LCt.mq()}xvt(t){return t.cJ()?t.fJ(this.KB()):this.KB()===t}yRt(h,t,s){const i=(t,s)=>{const i=s||t.KB(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.a4())for(const e of this.l4())i(e);if(s)for(const r of this.ZN())i(r)}SRt(){if(!this.qL().FL())throw new Error("object does not support scene graph")}e6(){return null!==this.HN()}HN(){const t=this.qD();if(!t)return null;const s=t.HN();return s?s.f8():null}JN(){const t=this.qD();if(!t)return null;const s=t.JN();return s?s.f8():null}*qN(){const t=this.qD();if(t)for(const s of t.qN())yield s.f8()}wRt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}jq(){const t=this.qD();return!!t&&t.jq()}bRt(t){const s=this.qD();if(!s)return[];const i=t.yf();return s.UX().map(t=>t.f8()).filter(t=>t.KB().yf()===i)}UX(){const t=this.qD();return t?t.UX().map(t=>t.f8()):[]}*children(){const t=this.qD();if(t)for(const s of t.children())yield s.f8()}*ZN(){const t=this.qD();if(t)for(const s of t.ZN())yield s.f8()}XN(){const t=this.qD();return t?t.XN():0}MRt(){return[...this.qN()].length}Ivt(){const t=this.qD();return t?t.Ivt():0}KN(t){const s=this.qD();if(!s)return null;const i=s.KN(t);return i?i.f8():null}vRt(){const t=this.qD();if(!t)return NaN;const s=t.HN();return s?s.xRt(t):NaN}GRt(t){for(const s of this.qD().UX())if(s.f8().u4()===t)return!0;return!1}t6(t,s){this.SRt(),t.SRt(),this.qD().t6(t.qD(),s||{})}s6(t){const s=this.qD();s&&s.s6(t.qD())}v6(){const t=this.qD();return!!t&&t.v6()}SX(){const t=this.qD();if(t){const s=t.TRt();if(s)for(const i of s){const e=this.Tf.VD(i[2]);if(e){const h=i[3];this.t6(e,{r6:!!(h>>0&1),o6:!!(h>>1&1),l6:!!(h>>2&1),c6:!!(h>>3&1),d6:!!(h>>4&1),M6:!!(h>>5&1),m6:!!(h>>6&1),y6:!!(h>>7&1),w6:!!(h>>8&1)})}}}}wX(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.t6(h,{r6:!!(r>>0&1),o6:!!(r>>1&1),l6:!!(r>>2&1),c6:!!(r>>3&1),d6:!!(r>>4&1),M6:!!(r>>5&1),m6:!!(r>>6&1),y6:!!(r>>7&1),w6:!!(r>>8&1)})}}}m4(){const t=this.Tf._Rt();return t?t.Qlt(this):""}a4(){return null!==this.JCt}PX(t){this.JCt.push(t)}n4(){return this.JCt}IRt(t){return!!this.CRt(t)}CRt(t){const s=this.l4();if(null===s||0===s.length)return!1;for(const i of s)if(i.KB()===t)return i;return null}l4(){return this.JCt}kmt(){for(const t of this.l4())t.KB().h5().Yft(t)}Rbt(){for(const t of this.l4())t.KB().h5().zft(t)}Abt(t){for(const s of this.l4())s.KB().h5().$ft()[t]=s}Pbt(){for(const t of this.l4())t.KB().h5().Jft(t)}Ebt(t){for(const s of this.l4())s.KB().h5().Xft()[t]=s}qL(){return this.OCt.qL()}SCt(t){this.NCt=t}f4(){return this.OCt.FX(),this.NCt}u4(){return this.WCt}RRt(){return this.jCt}ARt(t){t?this.v4(new Set(t)):this.VCt=null}v4(t){if(0===t.size)this.VCt=null;else{this.VCt?this.VCt.clear():this.VCt=new Set;for(const s of t)this.VCt.add(s)}}b4(){return this.VCt??new Set}Kvt(){return Array.from(this.b4()).join(" ")}t2t(t){t=Math.floor(t);for(const s of this.b4()){if(0===t)return s;--t}return""}zht(){return this.HCt}ERt(t){if(t)for(const s of this.HCt)if(s.z6()instanceof t)return s;return null}llt(t){if(!t)return null;const s=this.ERt(t);return s?s.B6():null}Hht(i){const e=this.HCt;for(let t=0,s=e.length;t<s;++t)if(e[t].X6().wJ()===i)return t;return-1}PRt(){return this.UCt}sCt(){return this.OCt.sCt()}FRt(){return this.UCt.length}ont(t){const s=this.UCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}XSt(t){return this.UCt[t]}kRt(t){const s=this.UCt[t];return 0===this.OCt.Mit(t)?!!s:s}ant(t,s){const i=this.UCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.OCt.Mit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Qnt(t,s){if(0!==s){const i=this.UCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}vbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}xbt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}DRt(t){const s=this.KB();if(s.Gk().l0(t))return!0;for(const i of s.u1t())if(i.Gk().l0(t))return!0;return!!this.Tf.Gk().l0(t)}c5(){const t=new Set,s=(t.add(this),this.qD());if(s&&s.jq())for(const i of this.ZN())if(t.add(i),i.a4())for(const e of i.l4())t.add(e);if(this.a4())for(const h of this.l4())t.add(h);for(const r of t.values())r.bX();this.MX()}ORt(){this.OCt.FCt()&&this.UD();for(const t of this.HCt)t.xTt()}LRt(){this.ORt()}bX(){if(this.ORt(),this.DRt("instancecreate")){const t=this.KB(),s=new w.Event("instancecreate");s.Y6=this.UD(),t.eY(s);for(const i of t.u1t())i.eY(s);this.Tf.eY(s)}this.Tf.N4(this.qL().bpt()._X.e2t,this,null)}MX(){if(this.qL().FL()){if(this.eY(new w.Event("hierarchyready")),this.DRt("hierarchyready")){const t=this.KB(),s=new w.Event("hierarchyready");s.Y6=this.UD(),t.eY(s);for(const i of t.u1t())i.eY(s);this.Tf.eY(s)}this.Tf.N4(this.qL().bpt()._X.bvt,this,null)}}BRt(){this.Tf.N4(this.qL().bpt()._X.h2t,this,null)}NRt(t){if(this.BCt){const s=new w.Event("destroy");s.WRt=t,this.eY(s)}if(this.DRt("instancedestroy")){const i=this.KB(),e=new w.Event("instancedestroy");e.Y6=this.UD(),e.WRt=t,i.eY(e);for(const h of i.u1t())h.eY(e);this.Tf.eY(e)}}jRt(){return this.LCt?this.LCt.GGt():this.BCt.tN()}qM(t="full",s=null){const i={},e=("full"===t?i.uid=this.u4():i.c3=!0,this.b4());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=w.Ko(r)),-1!==this.iD()&&(i.mts=this.iD()),0<this.OCt.WIt()){const n={},o=this.OCt.QIt();for(let t=0,s=this.UCt.length;t<s;++t)n[o[t].toString()]=this.UCt[t];i.ivs=n}if(this.HCt.length){const a={};for(const l of this.HCt){const u=l.qM(t);u&&(a[l.X6().wJ().toString()]=u)}i.behs=a}}this.zst&&(i.w=this.zst.Lq(t,s));const h=this.LCt?this.LCt.qM():this.BCt.sN();return h&&(i.data=h),i}QY(t="full",s){this.zst&&this.zst.QY(t)}sK(t,s="full",i=null){this.zst&&this.zst.sK(t,s,i)}VRt(t,s="full",i=null){this.zst&&this.zst.VRt(t,s,i)}PCt(){this.qL().xL()&&this.zst.PCt()}$M(s,t="full",i){if("full"===t)this.WCt=s.uid;else if(!s.c3)return;if(this.ARt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=w.Zo(h),b.set(this,t)),this.qCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.OCt.tCt(a);if(!(l<0||l>=this.UCt.length)){let t=o;null===t&&(t=NaN),this.UCt[l]=t}}}if(this.qL().xL()){const u=s.w;if(u){const c=u.l;if(this.zst.$D().wJ()!==c){const f=this.zst.$D(),d=f.RD().D$(c);d?(this.zst.ZD(d),f.sJ(this,!0),d.Zz(this,!0),d.QD(this),this.zst.gN()):"full"===t&&this.Tf.e4(this)}this.zst.Bq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),S=this.Hht(y);S<0||S>=this.HCt.length||this.HCt[S].$M(g,t)}}const e=s.data;e&&(this.LCt?this.LCt.$M(e,t):this.BCt.iN(e))}UD(){return this.BCt||this.iRt()}CGt(){return!!this.BCt}iRt(t,s){const i=this.zst?t?self.B8:self.F6:t?self._4:self.XB,e=t||this.LCt.Oxt(),h=this.OCt.FCt(),r=h||e||i,n=this.qL().gbt();if(w.SL.Nxt(this,n),w.SL.jTt(s),this.BCt=new r,w.SL.VTt(),w.SL.Wxt(n),e&&!(this.BCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.BCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.BCt}ZB(t){if(0!==this.UCt.length){const i={},e=this.OCt.iCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.kRt.bind(this,t),set:w.Instance.prototype.ant.bind(this,t)};const s=Object.create(Object.prototype,i);t.URt={value:s,writable:!1}}}QB(t){const s=this.HCt;if(0!==s.length){const i={};for(const h of s)i[h.X6().e1t()]={value:h.nGt(),writable:!1};const e=Object.create(Object.prototype,i);t.bmt={value:e,writable:!1}}}eY(t){if(this.CGt()){const s=this.UD(),i=(t.Y6=s,this.Tf),e=i.X4()&&!i.Ck().f5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const va=self.Ns;va.zX=class extends va.Sr{constructor(e){super(),this.sv=e,this.Wmt=null,this.HRt=[],this.zRt=e.Fm(),this.JRt=e.Um(),this.qRt=1,this.$Rt=1,this.XRt=0,this.YRt=1,this.KRt=e.ZA(),this.ZRt=null,this.QRt=null,this.tAt=NaN,this.sAt=!1,this.Hq=NaN,this.zq=NaN,this.iAt=t=>{if(t.Y6===this.Wmt.f8()){const s=e.dO(),i=(s.h0().removeEventListener("instancecreate",this.iAt),this.Wmt.f8().B6());this.sAt=!!i.Oit(),this.Hq=this.sAt?i.Dit():NaN,this.zq=this.sAt?i.Bit():NaN}}}vr(){this.Wmt=null,this.ZRt=null,this.QRt=null,this.tAt=NaN,this.sAt=!1,this.Hq=NaN,this.zq=NaN,va.Yn(this.HRt)}eAt(t){if(this.YRt=this.sv.ZA(),this.KRt=this.YRt,this.Wmt=t,this.XRt=t?t.GetAngle():0,this.Wmt){const s=this.sv,i=s.dO(),e=this.Wmt.f8().qL().gbt();if(e<2){const h=this.Wmt.f8().B6();h?(this.sAt=!!h.Oit(),this.Hq=this.sAt?h.Dit():NaN,this.zq=this.sAt?h.Bit():NaN):this.Wmt.f8().wj()||i.h0().addEventListener("instancecreate",this.iAt)}else this.sAt=!1,this.Hq=NaN,this.zq=NaN}else this.sAt=!1,this.Hq=NaN,this.zq=NaN}HN(){return this.Wmt}jq(){return 0<this.HRt.length}UX(){return this.HRt}hAt(){this.jq()&&1!==this.HRt.length&&(this.QRt?this.HRt.sort((t,s)=>{const i=this.QRt.get(t.f8()),e=this.QRt.get(s.f8());return va.ye(i)&&va.ye(e)?i-e:0}):this.HRt.sort((t,s)=>{const i=t.Snt().rAt(),e=s.Snt().rAt();return va.ye(i)&&va.ye(e)?i-e:0}))}rAt(){return this.tAt}wnt(){return this.qRt}nAt(t){this.qRt=t}Mnt(){return this.$Rt}oAt(t){this.$Rt=t}Rnt(){return this.KRt}YMt(){return this.YRt}aAt(t){this.YRt=t}ynt(){return 0===this.zRt?Number.EPSILON:this.zRt}bnt(){return 0===this.JRt?Number.EPSILON:this.JRt}lAt(){if(this.sv.u6()){let t=this.Wmt,s=t.Fm(),i=t.Snt().ynt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.sAt?1+s/this.Hq:s/i}return 1}uAt(){if(this.sv.f6()){let t=this.Wmt,s=t.Um(),i=t.Snt().bnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.sAt?1+s/this.zq:s/i}return 1}cAt(){return 0}fAt(){return{sw:this.zRt,sh:this.JRt,sx:this.qRt,sy:this.$Rt,psa:this.XRt,oo:this.YRt,so:this.KRt,pi:this.sv.f8().vRt()}}Lq(t,s=null){const i=this.fAt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.dAt(t),c:this.pAt(t)})}mAt(t){let s="";return t.n6()&&(s+="x"),t.a6()&&(s+="y"),t.u6()&&(s+="w"),t.f6()&&(s+="h"),t.p6()&&(s+="a"),t.g6()&&(s+="z"),t.v6()&&(s+="d"),t.S6()&&(s+="o"),t.b6()&&(s+="v"),s}dAt(t){return this.Wmt&&this.Wmt.f8()&&!this.Wmt.f8().wj()?this.gAt(this.Wmt,this.sv,t):null}pAt(s){return this.HRt.map(t=>this.gAt(t,t,s)).filter(t=>t)}gAt(t,s,i){const e=t.f8();if(e&&e.wj())return null;const h={};return h.uid=e.u4(),h.f=this.mAt(s),h.offsets=s.yAt(),h.data=va.zX.SAt(e),h.oci=e.KB().qF(),"state"===i?(h.inst=e.qM("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.KB().e5().indexOf(e),h.inst=null),h}Bq(t){this.zRt=t.sw,this.JRt=t.sh,this.qRt=t.sx,this.$Rt=t.sy,this.XRt=t.psa,this.YRt=t.oo,this.KRt=t.so,this.tAt=va.ye(t.pi)?t.pi:NaN}wAt(t,s){if(!t&&!s&&this.ZRt)for(const i of this.ZRt)i.wj()||i.e6()||i.dO().e4(i);this.ZRt=t,this.QRt=s}sK(t,s){const i=this.sv,e=i.dO(),h=new Set;if(t.p&&!this.Wmt){const o=t.p.uid,a=e.VD(o);if(s?.d2t,a){const l=a.qD();if(a.wRt(i.f8()))this.Wmt=l;else{a.GRt(i.f8().u4())?e.e4(i.f8()):a.t6(i.f8(),this.bAt(t.p.f)),h.has(i)||(i.MAt(t.p.offsets),this.vAt(a,t.p,s)),h.add(i);const u=a.qD();u.Snt().hAt()}}else if(va.ye(t.p.oci)){const c=e.Wz(t.p.oci),f=(e._7(),e.a5(c,i.$D(),0,0,!0));if(s?.d2t,f){const d=this.xAt(t.p,e),p=(d&&f.$M(d),f.qD()),m=(p.$D().l5(f),f.t6(i.f8(),this.bAt(t.p.f)),f.qD());m.Snt().hAt()}}}const r=[];for(const g of t.c){const y=g.uid,S=e.VD(y);S&&r.push(S)}let n=0;for(const w of t.c){const b=w.uid,M=e.VD(b);if(s?.d2t,M){if(this.ZRt){if(this.ZRt.includes(M)){const T=M;if(T.KB()!==M.KB()){n++;continue}if(T.wj()){n++;continue}const _=t.c[n];if(!s?.d2t&&this.GAt(T,r,i)){this.TAt(n,_,i,h,s),n++;continue}if(T.e6()&&T.HN()!==i.f8()){const I=this._At(_,s);this.IAt(I,_,h,s),n++;continue}this.IAt(T.qD(),_,h,s,!0),n++;continue}if(this.ZRt[n]){const C=this.ZRt[n];if(C.KB()!==M.KB()){n++;continue}if(C.wj()){n++;continue}const R=t.c[n];if(!s?.d2t&&this.GAt(C,r,i)){this.TAt(n,R,i,h,s),n++;continue}if(C.e6()&&C.HN()!==i.f8()){const A=this._At(R,s);this.IAt(A,R,h,s),n++;continue}this.IAt(C.qD(),R,h,s,!0),n++;continue}}const v=M.KB(),x=this.CAt(r,v),G=i.f8().bRt(v).length;if(x===G){const E=i.f8().KN(n);if(E){const P=E.qD();P&&(h.has(P)||(P.MAt(w.offsets),this.vAt(E,w,s)),h.add(P))}n++;continue}if(M.e6()&&M.HN()!==i.f8()){const F=this._At(w,s);this.IAt(F,w,h,s),n++;continue}this.IAt(M.qD(),w,h,s)}else if(this.ZRt&&this.ZRt[n]){const k=this.ZRt[n],O=e.Wz(this.RAt(w));if(k.KB()!==O){n++;continue}if(k.wj()){n++;continue}const D=t.c[n];if(!s?.d2t&&this.GAt(k,r,i)){this.TAt(n,D,i,h,s),n++;continue}if(k.e6()&&k.HN()!==i.f8()){const L=this._At(D,s);this.IAt(L,D,h,s),n++;continue}this.IAt(k.qD(),D,h,s)}else{const B=this._At(w,s);this.IAt(B,w,h,s)}n++}}GAt(t,s,i){const e=t.KB(),h=this.CAt(s,e),r=i.f8().bRt(e).length;return h===r}TAt(t,s,i,e,h){const r=i.f8().KN(t,s);if(r){const n=r.qD();n&&(e.has(n)||(n.MAt(s.offsets),this.vAt(r,s,h)),e.add(n))}}bAt(t){const s={};return s.r6=t.includes("x"),s.o6=t.includes("y"),s.l6=t.includes("w"),s.c6=t.includes("h"),s.d6=t.includes("a"),s.m6=t.includes("z"),s.M6=t.includes("d"),s.y6=t.includes("o"),s.w6=t.includes("v"),s}RAt(t){return va.ye(t.oci)?t.oci:t[1]}_At(e,h){if(va.ye(e.oci)){let t=this.sv,s=t.dO(),i;if(e.data)i=s.Yz(e.data,t.$D(),!1,0,0,!1,!0);else{const r=s.Wz(e.oci);i=s.a5(r,t.$D(),0,0,!0)}if(h?.d2t,i){const n=this.xAt(e,s),o=(n&&i.$M(n),i.qD());return o.$D().l5(i,!0),o}}}IAt(t,s,i,e,h=!0){const r=this.sv,n=r.t6(t,this.bAt(s.f));n&&h&&(i.has(t)||(t.MAt(s.offsets),this.vAt(t.f8(),s,e)),i.add(t)),this.hAt()}vAt(t,s,i){let e=this.xAt(s,this.sv.dO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.$M(e))}CAt(t,s){return t.filter(t=>t.KB().yf()===s.yf()).length}xAt(t,s){if(va.ye(t.instIndex)){const i=s.Wz(t.oci),e=i.ACt();return e?e[t.instIndex]:null}return va.Ie(t.inst)?JSON.parse(t.inst):t.inst||void 0}static SAt(t){let s=t.qD().$D().Jz(t.u4());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.UX()]){const h=e.qD();i.push([h.RD().wJ(),h.$D().qF(),e.u4(),va.zX.HX(h),e.KB().a4()?1:0,h.XD(),va.zX.SAt(e)])}return va.Ve(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.zX.AAt(),s[0][14][1]=i,s[0][14][2]=t.qD().XD()),s}static HX(t){let s=0;return(s|=Number(t.b6())<<8)|Number(t.S6())<<7|Number(t.g6())<<6|Number(t.v6())<<5|Number(t.p6())<<4|Number(t.f6())<<3|Number(t.u6())<<2|Number(t.a6())<<1|Number(t.n6())<<0}static AAt(t){let s=0;return s,511}}}{let d=self.Ns,t=self.vs,r=(t.As,d.Mr(d.Rect)),n=d.Mr(d.fu),s=d.Mr(d.Event,"bboxchange",!1),f=d.Mr(d.ra,0,0,0,0),u=d.Mr(d.Ju),i=d.Mr(d.ra,1,1,1,1),o=d.Mr(d.Rect,0,0,-1,-1),h=d.Mr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.$Ct=class extends d.Sr{constructor(t,s){super(),this.Ii=t,this.Cft=t.KB(),this.Tf=t.dO(),this.EAt=s,this.Cft.TCt(this,null,s),this.PAt=-1,this.FAt=-1,this.Lbt=196635,this.Cft.qL().IL()&&(this.Lbt|=128),this.dl=NaN,this.pl=NaN,this.MM=NaN,this.kAt=NaN,this.DAt=NaN,this.O2=NaN,this.la=NaN,this.OAt=NaN,this.LAt=NaN,this.BAt=NaN,this.NAt=NaN,this.WAt=d.Mr(d.Rect),this.jAt=d.Mr(d.fu),this.VAt=h,this.UAt=o,this.HAt=null,this.zAt=null,this.JAt=null,this.bM=i,this.qAt=i,this.$At=null,this.XAt=null,this.Ii.KB().hCt()&&(this.XAt=d.Mr(d.YAt,this.Ii,this)),this.KAt=null,this.ZRt=null,this.QRt=null,this.ZAt=-1,this.QAt=null}oRt(){this.Lbt|=256}vr(){if(this.Cft.TCt(this,this.EAt,null),this.$At&&(this.Tf.eM().Cw(this.$At),this.$At=null),this.HAt=null,this.zAt&&(this.zAt.tEt.vr(),this.zAt=null),this.JAt&&(this.JAt.clear(),this.JAt=null),this._6(),this.XAt&&this.XAt.vr(),this.e6()&&this.HN().s6(this),this.jq()){const t=[...this.UX()];for(const s of t)this.s6(s)}this.sEt(),this.iEt(),g.delete(this),a.delete(this),this.Ii=null,this.Cft=null,this.Tf=null,this.EAt=null}YCt(t){if(m=!1,this.yN(t[0],t[1]),this.WM(t[2]),this.vC(t[3],t[4]),this.O2=0,this.IL()?this.v5(t[6]):this.la=0,f.il(t[7]),this.eEt(f),this.Ent(t[8]),this.Fnt(t[9]),this.xM(t[10]),this.XAt&&this.XAt.hEt(t[12]),t[14]&&g.set(this,{rEt:t[14][1],nEt:t[14][2]}),t[15]){const s=t[15],e=(this.G6(s[0],s[1]),this.E6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.Gv(t,i);o.DM(n[0]),o.BM(n[1]),o.WM(n[2]),o.VM(n[3]),o.HM(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.Tf._Rt();l&&c&&c.Zlt(this.f8(),a),u&&c&&c.Zlt(this.f8(),i)}m=!0,this.oEt()}KCt(){this.dl=0,this.pl=0,this.MM=0,this.kAt=0,this.DAt=0,this.O2=0,this.la=0,this.OAt=0,this.LAt=1,this.BAt=0,this.NAt=0,this.oEt()}dO(){return this.Tf}KB(){return this.Cft}f8(){return this.Ii}aEt(){return this.p6()?this.lEt(this.HN().uEt()-this.KAt.cAt()):0}DM(t){if(t=+t,this.n6()){const s=this.KAt,i=t-this.kM(),e=-this.aEt();0==e?this.dl+=i/s.lAt():(this.dl+=Math.cos(e)*i/s.lAt(),this.a6()&&(this.pl+=Math.sin(e)*i/s.uAt()))}else this.dl=t}dnt(t,s=!1){t=+t,!s&&this.n6()?this.DM(this.kM()+t):this.dl+=t}kM(){if(this.n6()){let t=this.dl,s=this.KAt,i=this.HN(),e=this.aEt();return 0===e?t*=s.lAt():(t=t*s.lAt()*Math.cos(e),this.a6()&&(t-=this.pl*s.uAt()*Math.sin(e))),i.kM()+t}return this.dl}BM(t){if(t=+t,this.a6()){const s=this.KAt,i=t-this.LM(),e=-this.aEt();0==e?this.pl+=i/s.uAt():(this.n6()&&(this.dl-=Math.sin(e)*i/s.lAt()),this.pl+=Math.cos(e)*i/s.uAt())}else this.pl=t}pnt(t,s=!1){t=+t,!s&&this.a6()?this.BM(this.LM()+t):this.pl+=t}LM(){if(this.a6()){let t=this.pl,s=this.KAt,i=this.HN(),e=this.aEt();return 0===e?t*=s.uAt():(t=t*s.uAt()*Math.cos(e),this.n6()&&(t+=this.dl*s.lAt()*Math.sin(e))),i.LM()+t}return this.pl}yN(t,s){if(t=+t,s=+s,this.cEt()){const i=this.n6(),e=this.a6(),h=this.KAt,r=t-this.kM(),n=s-this.LM(),o=-this.aEt();if(0==o)i?this.dl+=r/h.lAt():this.dl=t,e?this.pl+=n/h.uAt():this.pl=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.dl+=e?(l*r-a*n)/h.lAt():l*r/h.lAt():this.dl=t,e?this.pl+=i?(a*r+l*n)/h.uAt():l*n/h.uAt():this.pl=s}}else this.dl=t,this.pl=s}fEt(){return[this.kM(),this.LM()]}bN(t,s){t=+t,s=+s,this.cEt()?this.yN(this.kM()+t,this.LM()+s):(this.dl+=t,this.pl+=s)}_Mt(t,s){return this.kM()===t&&this.LM()===s}WM(t){if(t=+t,this.g6()&&(t-=this.HN().NM()),this.MM!==t){this.MM=t,this.dEt();const s=this.$D();0!==this.MM&&s.hJ(),s.QD(this)}}dEt(){if(this.oEt(),this.jq()){const i=this.UX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.g6()&&e.dEt()}}}knt(t){this.WM(this.NM()+t)}NM(){return this.g6()?this.HN().NM()+this.MM:this.MM}vN(){return this.$D().NM()+this.NM()}Oit(){const t=this.f8().qL().gbt();return t<2&&this.f8().B6().Oit()}Wm(t){if(t=+t,this.u6()){const s=this.Fm();0===s?this.kAt=Number.EPSILON:this.kAt*=t/s}else this.kAt=t;this.pEt()}fg(t,s){t=+t,!s&&this.u6()?this.Wm(this.Fm()+t):this.kAt+=t,this.pEt()}Fm(){if(this.u6()){const t=this.HN(),s=t.Fm(),i=t.Snt().ynt();return i===Number.EPSILON?(this.Snt().ynt()+s)*this.kAt:s*this.kAt}return this.kAt}km(t){if(t=+t,this.f6()){const s=this.Um();0===s?this.DAt=Number.EPSILON:this.DAt*=t/s}else this.DAt=t;this.pEt()}vnt(t,s){t=+t,!s&&this.f6()?this.km(this.Um()+t):this.DAt+=t,this.pEt()}Um(){if(this.f6()){const t=this.HN(),s=t.Um(),i=t.Snt().bnt();return i===Number.EPSILON?(this.Snt().bnt()+s)*this.DAt:s*this.DAt}return this.DAt}vC(t,s){if(t=+t,s=+s,this.u6()){const i=this.Fm();0===i?this.kAt=Number.EPSILON:this.kAt*=t/i}else this.kAt=t;if(this.f6()){const e=this.Um();0===e?this.DAt=Number.EPSILON:this.DAt*=s/e}else this.DAt=s;this.pEt()}xc(){return[this.Fm(),this.Um()]}gq(){return this.O2}mEt(t){if(t<0)throw new RangeError("invalid depth");this.O2=t}gEt(){if(this.e6()){const t=this.KAt;return Math.min(t.lAt(),t.uAt())}return 1}IL(){return 0!=(128&this.Lbt)}v5(t){t=+t,this.IL()&&(this.p6()&&(t-=this.HN().GetAngle()),t=d.Rr(t),this.la!==t)&&(this.la=t,this.pEt())}xnt(t){0!=(t=+t)&&this.IL()&&(this.la=d.Rr(this.la+t),this.pEt())}pEt(){if(this.Lbt|=1<<18,this.jq()){const i=this.UX();for(let t=0,s=i.length;t<s;t++)i[t].pEt()}}GetAngle(){return this.p6()&&this.IL()?this.lEt(d.Rr(this.HN().uEt()+this.la)):this.la}uEt(){return this.p6()&&this.IL()?d.Rr(this.HN().uEt()+this.la):this.la}lEt(t){return this.u6()&&this.JN().Fm()<0&&(t=d.Rr(d.Ur(t,this.JN().GetAngle()+Math.PI))),this.f6()&&this.JN().Um()<0?d.Ur(t,this.JN().GetAngle()):t}yEt(){const t=this.HN();return!!(this.u6()&&t.Fm()<0)||!!(this.f6()&&t.Um()<0)}SEt(){const t=this.HN();return!!(this.u6()&&t.Fm()<0&&this.f6()&&t.Um()<0)}wEt(){const t=this.Lbt;if(0!=(t&1<<18)){const s=this.GetAngle();this.OAt=Math.sin(s),this.LAt=Math.cos(s),this.Lbt=-262145&t}}EMt(){return this.wEt(),this.OAt}AMt(){return this.wEt(),this.LAt}Ent(t){this.BAt=+t}Ant(t){this.BAt+=+t}TW(){return this.BAt}Fnt(t){this.NAt=+t}Pnt(t){this.NAt+=+t}IW(){return this.NAt}eEt(t){this.bM.equals(t)||(this.bM===i?(this.bM=d.Mr(d.ra,t),this.qAt=d.Mr(d.ra,t),this.qAt.ka()):t.Aa(1,1,1,1)?(this.bM=i,this.qAt=i):(this.bM.set(t),this.qAt.set(t),this.qAt.ka()),this.oEt())}tE(t){if(t=d.Cr(+t,0,1),this.S6()){if(this.Snt().YMt()===t)return;this.Snt().aAt(t),t=this.ZA()}else if(this.bM.a===t)return;this.bEt(t)}MEt(){if(this.jq()){const i=this.UX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.bEt(e.ZA())}}}bEt(t){f.wa(this.bM),f.a=t,this.eEt(f),this.MEt()}_nt(t){this.S6()?this.tE(this.Snt().YMt()+t):this.tE(this.ZA()+t)}ZA(){return this.S6()?this.HN().ZA()*this.Snt().YMt():this.bM.a}EN(t){this.bM.Ca(t)||(f.wa(t),f.a=this.ZA(),this.eEt(f))}rnt(t,s,i){f.ca(t,s,i),this.EN(f)}vEt(t,s,i){0===t&&0===s&&0===i||(f.wa(this.bM),f.r+=t,f.g+=s,f.b+=i,this.EN(f))}AN(){return this.bM}Gz(){return this.qAt}v6(){return 0!=(512&this.Lbt)}xEt(t){this.GEt(512,t)}n6(){return 0!=(1024&this.Lbt)}TEt(t){this.GEt(1024,t)}a6(){return 0!=(2048&this.Lbt)}cEt(){return 0!=(3072&this.Lbt)}_Et(t){this.GEt(2048,t)}u6(){return 0!=(4096&this.Lbt)}IEt(t){this.GEt(4096,t)}f6(){return 0!=(8192&this.Lbt)}CEt(t){this.GEt(8192,t)}p6(){return 0!=(16384&this.Lbt)}REt(t){this.GEt(16384,t)}g6(){return 0!=(32768&this.Lbt)}AEt(t){this.GEt(32768,t)}S6(){return 0!=(this.Lbt&1<<22)}EEt(t){this.GEt(1<<22,t)}b6(){return 0!=(this.Lbt&1<<23)}PEt(t){this.GEt(1<<23,t)}FEt(){this.Lbt&=-12647937}t6(t,s){if(t===this)return!1;if(t.e6())return!1;if(this.kEt(t))return!1;if(this.DEt(t))return!1;const i=t.kM(),e=t.LM(),h=t.Fm(),r=t.Um(),n=t.GetAngle(),o=t.NM(),a=t.ZA(),l=(t.OEt(this),t.TEt(s.r6),t._Et(s.o6),t.IEt(s.l6),t.CEt(s.c6),t.REt(s.d6),t.AEt(s.m6),t.EEt(s.y6),t.PEt(s.w6),t.xEt(s.M6),i-this.kM()),u=e-this.LM(),c=-this.GetAngle(),f=Math.cos(c),d=Math.sin(c);if(s.r6&&(s.d6?t.dl=l*f-u*d:t.dl=l,s.l6)){const p=this.Fm()/this.KAt.ynt();0!=p&&(t.dl/=p)}if(s.o6&&(s.d6?t.pl=l*d+u*f:t.pl=u,s.c6)){const m=this.Um()/this.KAt.bnt();0!=m&&(t.pl/=m)}if(s.l6){const g=this.Fm();0===g||g===Number.EPSILON?(t.kAt=1,t.KAt.nAt(1)):(t.kAt=h/this.Fm(),t.KAt.nAt(t.kAt))}if(s.c6){const y=this.Um();0===y||y===Number.EPSILON?(t.DAt=1,t.KAt.oAt(1)):(t.DAt=r/this.Um(),t.KAt.oAt(t.DAt))}return s.d6&&(t.la=n-this.GetAngle()),s.m6&&(t.MM=o-this.NM()),s.y6&&t.KAt.aAt(a),s.w6&&t.rB(this.oB()),this.LEt(t),this.gN(),this.MEt(),!0}s6(t){if(t.HN()===this){const s=t.kM(),i=t.LM(),e=t.Fm(),h=t.Um(),r=t.GetAngle(),n=t.NM(),o=t.ZA();t.OEt(null),t.FEt(),t.yN(s,i),t.vC(e,h),t.v5(r),t.WM(n),t.tE(o),this.BEt(t),this.gN()}}NEt(){return this.ZAt}WEt(){this.jEt();const t=[...this.children()];for(const i of t)this.s6(i);const s=this.HN();s&&s.s6(this),this.FEt()}jEt(){if(this.VEt(),!this.ZRt){const s=[...this.children()];s.length&&(this.ZRt=[],this.QRt=new WeakMap);let t=0;for(const i of s){const e=i.f8();this.ZRt.push(e),this.QRt.set(e,t),t++}}const t=this.HN();t&&t.jEt()}VEt(){if(-1===this.ZAt){const t=[...this.qN()];this.ZAt=t.length;for(const i of t)i.VEt();const s=[...this.children()];for(const e of s)e.VEt()}}iEt(){this.ZRt&&(this.ZRt.length=0),this.ZRt=null,this.QRt=null;const t=this.HN();t&&t.iEt(),this.ZAt=-1}e6(){return null!==this.HN()}HN(){const t=this.KAt;return null!==t?t.HN():null}JN(){let t=this;for(;t.e6();)t=t.HN();return t}*qN(){let t=this.HN();for(;t;)yield t,t=t.HN()}wRt(t){return this.UX().includes(t)}jq(){const t=this.KAt;return null!==t&&t.jq()}UX(){const t=this.KAt;return null!==t?t.UX():e}children(){return this.UX()}*ZN(){for(const t of this.children())yield t,yield*t.ZN()}XN(){return this.UX().length}Ivt(){return[...this.ZN()].length}KN(t){const s=this.UX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}xRt(s){if(s){const i=this.UX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}UEt(t){this.KAt||(this.KAt=d.Mr(d.zX,this)),t&&this.KAt.eAt(t)}Snt(){return this.KAt}sEt(){this.KAt&&(this.KAt.vr(),this.KAt=null)}OEt(t){t?(t.UEt(null),this.UEt(t)):(this.KAt&&this.KAt.eAt(null),this.jq()||this.sEt())}DEt(t){if(!this.e6())return!1;const s=this.HN();return s===t||s.DEt(t)}kEt(t){if(this.wRt(t))return!0;for(const s of this.UX())if(s.kEt(t))return!0;return!1}LEt(t){this.KAt.UX().push(t)}BEt(t){const s=this.KAt.UX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.e6()||this.sEt(),t.jq()||t.sEt()}TRt(){const t=g.get(this);return t?t.rEt:null}HEt(){const t=g.get(this);return t?t.nEt:NaN}Wq(){const t=a.get(this);return d.ye(t)?t:NaN}zEt(t){a.set(this,t)}JEt(){this.GEt(1<<19,!0),this.oEt()}oEt(){if(m){const s=this.Tf.eM();this.$At&&s.Cw(this.$At);let t;t=0!=(this.Lbt&1<<19)?s.aw()||"<point>":s.hw()||"<default>",this.$At=s.Gw(t,this.EB(),this.qAt,this.NM())}}xq(){return this.$At}xJ(){return this.bM===i}xM(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.EB()!==t&&(this.Lbt=this.Lbt&~(31<<26)|t<<26,this.oEt())}EB(){return(this.Lbt&31<<26)>>26}ZD(t,s){const i=s&&this.EAt!==t;i&&this.iJ(),this.Cft.TCt(this,this.EAt,t),this.EAt=t,i&&this.qEt(),0!==this.NM()&&this.EAt.hJ()}$D(){return this.EAt}RD(){return this.$D().RD()}nJ(t){this.PAt=0|t}XD(){return this.EAt.m9(),this.PAt}w9(t){this.FAt=0|t}fj(){return this.EAt.y9(),this.FAt}hH(){return this.PAt}GEt(t,s){s?this.Lbt|=t:this.Lbt&=~t}oB(){return 0!=(1&this.Lbt)}rB(t){if(this.GEt(1,t),this.jq())for(const s of this.UX())s.b6()&&s.rB(t)}jN(){return 0!=(8&this.Lbt)}VN(t){t=!!t,this.jN()!==t&&(this.GEt(8,t),t?this.gN():this.$Et())}XEt(t,s){if(this.GEt(32,t),this.JAt&&this.JAt.clear(),s.trim()){this.JAt||(this.JAt=new Set);for(const i of s.split(" "))i&&this.JAt.add(i.toLowerCase())}else this.JAt=null}YEt(t){const s=0!=(32&this.Lbt),i=this.JAt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}gN(){if(this.Lbt|=65554,this.Cft.vCt(!0),this.Tf.tO(),this.EAt.Oz()&&(this.KEt(this.WAt,this.jAt,!0),this.Lbt&=-3,this.qEt()),0!=(4&this.Lbt)&&this.Ii.h0().dispatchEvent(s),null!==this.KAt){const i=this.KAt.UX();for(let t=0,s=i.length;t<s;++t)i[t].gN()}}KEt(t,s,i){const e=this.kM(),h=this.LM(),r=this.Fm(),n=this.Um(),o=this.GetAngle();t.Cl(e-this.BAt*r,h-this.NAt*n,r,n),i&&this.A6()&&this.ZEt(t),0===o?s.Fu(t):(t.offset(-e,-h),s.Du(t,this.EMt(),this.AMt()),s.offset(e,h),s.Ou(t)),t.normalize()}QEt(){const t=this.Lbt;0!=(2&t)&&(this.KEt(this.WAt,this.jAt,!0),this.Lbt=-3&t)}GN(){return this.QEt(),this.WAt}_N(){return this.QEt(),this.jAt}tPt(t){const s=this.kM(),i=this.LM(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}sPt(t){this.WAt.I(t),this.jAt.Fu(this.WAt),this.Lbt&=-3,this.GCt(),this.qEt()}iPt(t){this.GEt(4,t)}ePt(){return 0!=(4&this.Lbt)}uq(t,s,i){return s&&0!==this.gq()?this.pq(this.$D().fq()):0===this.NM()||i?t.nu(this.GN()):this.hPt()}hPt(){const t=this.$D(),s=this.vN();return!(s>=t.jJ())&&(t.NJ(s,r),r.nu(this.GN()))}pq(t){const s=this.GN(),i=s.Ol(),e=s.Bl(),h=s.Ll(),r=s.Nl(),n=this.vN(),o=n+this.gq();return t.Uy(i,h,n,e,r,o)}CN(){const t=this.$D();if(t.QJ())return this.pq(t.fq());{const s=t.RD();return this.uq(t.OB(),s.lq(),s.Y5())}}bq(t){this.GEt(1<<20,t)}wq(t){this.GEt(1<<21,t)}rPt(){return 0!=(this.Lbt&1<<20)}nPt(){return 0!=(this.Lbt&1<<21)}oPt(t){this.HAt=t,this.aPt(),this.A6()&&(this.QAt.lPt=null)}uPt(){return this.HAt}cPt(){return null!==this.HAt||this.A6()}fPt(){return this.dPt(this.Fm(),this.Um(),this.GetAngle(),this.EMt(),this.AMt())}pPt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.dPt(t,s,i,e,h)}dPt(h,r,t,n,o){let s=this.zAt;null===s&&(s={tEt:d.Mr(d.Ju),width:NaN,height:NaN,angle:NaN},this.zAt=s);const a=s.tEt;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.HAt;if(this.A6()){let t=this.TW(),s=this.IW(),i=this.E6(),e=this.QAt.lPt;e||(l?(u.I(l),u.offset(t,s)):u.tc(),e=i.Cv(u),this.QAt.lPt=e),i.Rv(e,a),a.offset(-t,-s),a.rc(h,r,n,o)}else l?(a.I(l),a.rc(h,r,n,o)):a.hc(this._N(),-this.kM(),-this.LM());s.width=h,s.height=r,s.angle=t}return a}aPt(){this.mPt(!0);const t=this.zAt;null!==t&&(t.width=NaN)}G6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.f8().qL().DL())throw new Error("object does not support mesh");this._6(),this.QAt={gPt:d.Mr(d.Ey.ZM,t,s),yPt:d.Mr(d.Ey.ZM,t,s),lPt:null}}A6(){return null!==this.QAt}E6(){if(this.A6())return this.QAt.gPt;throw new Error("no mesh")}SPt(){if(this.A6())return this.QAt.yPt;throw new Error("no mesh")}wPt(t){this.GEt(65536,t)}bPt(){return 0!=(65536&this.Lbt)}mPt(t){this.GEt(1<<17,t)}MPt(){return 0!=(this.Lbt&1<<17)}ZEt(t){const s=this.QAt.gPt,i=Math.min(s.Sv(),0),e=Math.min(s.wv(),0),h=Math.max(s.bv(),1),r=Math.max(s.Mv(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Jl((h-1)*n),t.ql((r-1)*o),this.O2=s.vv()}_6(){this.QAt&&(this.QAt.gPt.vr(),this.QAt.yPt.vr(),this.QAt=null,this.aPt())}C6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.GB,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.A6())return!1;const u=this.E6(),c=u.Gv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.NM()!==o&&(c.WM(o),f=!0),h&&(r+=t/(u.cv()-1),n+=s/(u.dv()-1)),a=-1!==a||h?(h&&(a+=t/(u.cv()-1)),d.Cr(a,0,1)):c.jM(),l=-1!==l||h?(h&&(l+=s/(u.dv()-1)),d.Cr(l,0,1)):c.UM(),c.kM()===r&&c.LM()===n&&c.jM()===a&&c.UM()===l?f:(c.DM(r),c.BM(n),c.VM(a),c.HM(l),this.aPt(),!0)}nRt(){return this.Ii.nRt()}UN(t,s){return!!this.GN().au(t,s)&&!!this._N().au(t,s)&&(this.nRt()?this.Ii.B6().HGt(t,s):!this.cPt()||this.fPt().au(t-this.kM(),s-this.LM()))}vPt(){return 0!=(16&this.Lbt)}GCt(){if(this.vPt()&&this.jN()&&0==(256&this.Lbt)){const t=this.GN(),s=this.Cft.MCt(),i=this.VAt;if(r.set(s.MH(t.Ol()),s.vH(t.Ll()),s.MH(t.Bl()),s.vH(t.Nl())),!i.equals(r)){const e=this.Ii;i===h?(s.xH(e,null,r),this.VAt=d.Mr(d.Rect,r)):(s.xH(e,i,r),i.I(r)),this.Lbt&=-17}}}xPt(){this.Lbt|=16}$Et(){const t=this.VAt;t!==h&&(this.Cft.MCt().xH(this.Ii,t,null),this.VAt=h)}qEt(){const t=this.$D();if(t.Oz()&&0==(256&this.Lbt)){const s=t.TJ(),i=this.GN(),e=this.UAt;if(r.set(s.MH(i.Ol()),s.vH(i.Ll()),s.MH(i.Bl()),s.vH(i.Nl())),!e.equals(r)){const h=this.Ii;e===o?(s.xH(h,null,r),this.UAt=d.Mr(d.Rect,r)):(s.xH(h,e,r),e.I(r)),t._J()}}}iJ(){const t=this.UAt;t!==o&&(this.$D().TJ().xH(this.Ii,t,null),this.UAt=o)}g9(){return this.UAt}FN(){const t=this.Ii,s=this.EAt,i=s.KD();i.length&&i.at(-1)===t||(s.sJ(t,!1),s.Zz(t,!1),this.Tf.tO())}DN(){const t=this.Ii,s=this.EAt,i=s.KD();i.length&&i[0]===t||(s.sJ(t,!1),s.tJ(t,!1),this.Tf.tO())}LN(t){const s=this.Ii,i=this.EAt;if(i.RD()!==t.RD())throw new Error("layer from different layout");t!==i&&(i.sJ(s,!0),this.ZD(t),t.Zz(s,!0),this.Tf.tO())}NN(t,s){let i=this.Ii,e=!1,h=this.EAt;if(t.u4()!==i.u4()){const r=t.qD();if(!r)throw new Error("expected world instance");const n=r.$D(),o=(h.qF()!==n.qF()&&(h.sJ(i,!0),this.ZD(n),n.Zz(i,!0),e=!0),n.v9(i,t,!!s));(e||o)&&this.Tf.tO()}}pN(){return this.XAt}GPt(t){this.GEt(64,t)}R9(){return 0!=(64&this.Lbt)}Lq(t,s=null){const i={x:this.kM(),y:this.LM(),w:this.Fm(),h:this.Um(),l:this.$D().wJ(),zi:this.XD()},e=(0!==this.NM()&&(i.ze=this.NM()),0!==this.GetAngle()&&(i.a=this.uEt()),this.xJ()||(i.c=this.bM.toJSON()),.5!==this.TW()&&(i.oX=this.TW()),.5!==this.IW()&&(i.oY=this.IW()),0!==this.EB()&&(i.bm=this.EB()),this.oB()||(i.v=this.oB()),this.jN()||(i.ce=this.jN()),this.ePt()&&(i.be=this.ePt()),this.XAt&&(i.fx=this.XAt.Lq()),0!=(32&this.Lbt));return e&&(i.sfi=e),this.JAt&&(i.sft=[...this.JAt].join(" ")),this.KAt&&"visual-state"!==t&&(i.sgi=this.KAt.Lq(t,s),g.has(this))&&(i.sgcd=g.get(this).rEt,i.sgzid=g.get(this).nEt),this.A6()&&(i.mesh=this.E6().qM()),i}yAt(){return{x:this.dl,y:this.pl,z:this.MM,w:this.kAt,h:this.DAt,a:this.la,sgi:this.Snt()?this.Snt().fAt():null}}MAt(t){t&&(this.dl=t.x,this.pl=t.y,this.MM=t.z,this.kAt=t.w,this.DAt=t.h,this.la=t.a,t.sgi&&this.Snt()&&this.Snt().Bq(t.sgi),this.pEt(),this.gN())}PCt(){this.iEt(),this.WEt(),this.UEt(null),this.KAt&&this.KAt.wAt(this.ZRt,this.QRt)}QY(t){"visual-state"!==t&&this.WEt()}sK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Lbt)&&this.KAt.sK(t.sgi,i)}VRt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Lbt)&&(this.KAt.wAt(null,null),this.iEt(),this.gN())}Bq(t,s){if(m=!1,this.DM(t.x),this.BM(t.y),this.Wm(t.w),this.km(t.h),this.nJ(t.zi),this.WM(t.hasOwnProperty("ze")?t.ze:0),this.v5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.il(t.c):t.hasOwnProperty("o")?(f.wa(this.bM),f.a=t.o):f.ua(1,1,1,1),this.eEt(f),this.Ent(t.hasOwnProperty("oX")?t.oX:.5),this.Fnt(t.hasOwnProperty("oY")?t.oY:.5),this.xM(t.hasOwnProperty("bm")?t.bm:0),this.rB(!t.hasOwnProperty("v")||t.v),this.VN(!t.hasOwnProperty("ce")||t.ce),this.iPt(!!t.hasOwnProperty("be")&&t.be),this.XEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.XAt&&t.hasOwnProperty("fx")&&this.XAt.Bq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.ZRt)for(const i of this.ZRt)i.wj()||this.Tf.e4(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.UEt(null);const e=this.KAt,h=t.sgi;e.Bq(h),e.wAt(this.ZRt,this.QRt),t.sgcd&&d.ye(t.sgzid)&&g.set(this,{rEt:t.sgcd,nEt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.G6(r.cols,r.rows),this.E6().$M(r)}else this._6();this.gN(),m=!0,this.oEt(),"visual-state"!==s&&this.Tf.TPt(this.f8(),t)}}}{const xa=self.Ns;xa.fIt=class extends xa.Sr{constructor(t,s){super();const i=t.dO(),e=i.Nyt(s[1]),h=(i._Pt().WTt(e),this.Tf=i,this.Cft=t,this.STt=xa.SL.tW(e),this.eGt=null,this.IPt=null,this.U_t=e.Instance,this.NH=s[2],this._r=s[0],this.vSt=this.Tf.e1t(s[3]),this.STt.gbt());if(h<2&&(this.eGt=xa.Mr(e.RIt,this),!(this.eGt instanceof xa.yTt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xa.SL.Nxt(this,h),2<=h){const r=e.RIt??globalThis.Aj;if(this.IPt=new r,!(this.IPt instanceof globalThis.Aj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.IPt=new globalThis.Z6;xa.SL.Wxt(h),this.Dxt()}static Px(t,s){return xa.Mr(xa.fIt,t,s)}vr(){this.Tf=null,this.STt=null,this.eGt&&(this.eGt.vr(),this.eGt=null),this.U_t=null}fMt(){return this.eGt}Dxt(){this.eGt?this.eGt.Dxt():this.IPt&&this.IPt.E8()}dO(){return this.Tf}KB(){return this.Cft}z6(){return this.STt}KIt(){return this.U_t}yf(){return this._r}wJ(){return this.NH}q6(){return this.IPt}e1t(){return this.vSt}}}{const Ga=self.Ns,Ta=self.U6;Ga.zCt=class extends Ga.Sr{constructor(t){super(),this.Tf=t.runtime,this.twt=t.J6,this.STt=this.twt.z6(),this.Ii=t.Y6,this.Gy=t.index,this.LCt=null,this.BCt=null,this.STt.Zz(this.Ii)}vr(){this.BCt&&(this.BCt.i4(),this.BCt=null),this.STt.sJ(this.Ii),this.LCt&&(this.LCt.vr(),this.LCt=null),this.Tf=null,this.twt=null,this.STt=null,this.Ii=null}JIt(t){if(this.LCt)throw new Error("already got sdk instance");const s=this.z6().gbt();if(s<2){if(this.LCt=Ga.Mr(this.twt.KIt(),this,t),!(this.LCt instanceof Ga.wTt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.z6().Oxt();this.Bxt(i.Instance,t)}}B6(){return this.LCt??this.BCt}K6(){return this.Ii}dO(){return this.Tf}X6(){return this.twt}z6(){return this.STt}zrt(){return this.Gy}xTt(){this.LCt?this.LCt.xTt():this.BCt.kj()}ITt(t,s){this.LCt&&this.LCt.ITt(t,s)}jRt(){return this.LCt?this.LCt.GGt():this.BCt.tN()}qM(t="full"){return this.LCt?this.LCt.qM(t):this.BCt.sN(t)}$M(t,s="full"){if(this.LCt)return this.LCt.$M(t,s);this.BCt.iN(t,s)}static CPt(t,s,i){let e=globalThis.Ej,h,r;h=s instanceof e?t.D5(s):s.vTt(),r=i instanceof e?t.D5(i):i.vTt();const n=h.K6(),o=r.K6(),a=n.KB().qF(),l=o.KB().qF();if(a!==l)return a-l;const u=n.RRt(),c=o.RRt();return u!==c?u-c:h.zrt()-r.zrt()}Bxt(t,s){const i=Ta,e=t??this.LCt.Oxt(),h=e||i,r=this.z6().gbt();if(Ga.SL.Nxt(this,r),Ga.SL.jTt(s),this.BCt=new h,Ga.SL.VTt(),Ga.SL.Wxt(r),!e||this.BCt instanceof i)return this.BCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}nGt(){return this.BCt||this.Bxt()}CGt(){return!!this.BCt}}}{const _a=self.Ns;_a.vz=class extends _a.Sr{constructor(t,s){super(),this.sv=t,this.RPt=[],this.APt=[],this.EPt=new Map,this.PPt=[],this.FPt=[],this.kPt=new Set,this.Yb=!0;for(const i of s){const e=_a.Mr(_a.DPt,this,i,this.RPt.length);this.RPt.push(e),this.EPt.set(e.yf().toLowerCase(),e),3<=i.length&&this.PPt.push(this.OPt(e,i[2]))}this.dO().LPt(this)}vr(){this.dO().BPt(this);for(const t of this.FPt)t.vr();_a.Yn(this.FPt),_a.Yn(this.RPt),_a.Yn(this.APt),this.EPt.clear(),_a.Yn(this.PPt),this.sv=null}NPt(t){this.kPt.add(t)}WPt(t){this.kPt.delete(t)}jPt(t){t.XS()&&(this.FPt=this.RPt.map(t=>{const s=t.PG();return 0<s.GetCustomParametersByteSize()?_a.Mr(_a.Ey.WebGPUEffectCustomParamsBuffer,s):null}),this.VPt());for(const s of this.kPt)s.jPt(t)}HIt(t){if(t.length){this.RPt=t.concat(this.RPt);for(const s of t)this.EPt.set(s.yf().toLowerCase(),s);for(let t=0,s=this.RPt.length;t<s;++t)this.RPt[t].pJ(t)}}OPt(t,s){t.UPt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=_a.Mr(_a.ra);h.il(e),i[t]=h}}return i}pv(){return this.sv}dO(){return this.sv.dO()}eW(){_a.Yn(this.APt);let t=!0;for(const s of this.RPt)s.Tmt()&&(this.APt.push(s),s.PG().lM()||(t=!1));this.Yb=t}y5(){return this.RPt}rCt(){return 0<this.RPt.length}$ht(t){return this.EPt.get(t.toLowerCase())||null}HPt(t){if((t=Math.floor(+t))<0||t>=this.RPt.length)throw new RangeError("invalid effect type index");return this.RPt[t]}sW(t){return this.HPt(t).Tmt()}iW(t,s){this.HPt(t).UPt(s)}GJ(){return this.APt}R9(){return 0<this.APt.length}lM(){return this.Yb}qht(t){return this.PPt[t]}_z(t){return(t<this.FPt.length?this.FPt:this.PPt)[t]}hW(t,s){if(t<0||t>=this.PPt.length)return null;const i=this.PPt[t];return s<0||s>=i.length?null:i[s]}rW(t,s,i){if(t<0||t>=this.PPt.length)return!1;const e=this.PPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof _a.ra){if(h.Ca(i))return!1;h.wa(i)}else{if(h===i)return!1;e[s]=i}return t<this.FPt.length&&this.FPt[t].SetParameterValue(s,i),!0}VPt(){const i=this.PPt,e=this.FPt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static zPt(t){return t&&t instanceof _a.ra?{t:"color",v:t.toJSON()}:t}static JPt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=_a.Mr(_a.ra);return i.il(t.v),i}}}static qPt(t){return t.map(_a.vz.zPt)}static $Pt(t){return t.map(_a.vz.JPt)}qM(){return this.RPt.map(t=>({name:t.yf(),active:t.Tmt(),params:_a.vz.qPt(this.PPt[t.qF()])}))}$M(t){for(const s of t){const i=this.$ht(s.name);i&&(i.UPt(s.active),this.PPt[i.qF()]=_a.vz.$Pt(s.params))}this.eW(),this.VPt()}}}{const Ia=self.Ns;Ia.DPt=class extends Ia.Sr{constructor(t,s,i){super(),this.Mz=t,this.If=s[0],this._r=s[1],this.Gy=i,this.yM=null,this.G0=!0}vr(){this.Mz=null,this.yM=null}UIt(t){const s=Ia.Mr(Ia.DPt,t,[this.If,this._r],-1);return s.yM=this.yM,s.G0=this.G0,s}jPt(t){const s=t.ew(this.If);if(!s)throw new Error("failed to find shader program '"+this.If+"'");this.yM=s}g5(){return this.Mz}yf(){return this._r}pJ(t){this.Gy=t}qF(){return this.Gy}pv(){return this.Mz.pv()}dO(){return this.Mz.dO()}UPt(t){this.G0=!!t}Tmt(){return this.G0}PG(){return this.yM}XPt(){const i=[];for(let t=0,s=this.yM.FG();t<s;++t){const e=this.yM.kG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.Mr(Ia.ra,1,1,1,1))}}return i}}}{const Ca=self.Ns;Ca.YAt=class extends Ca.Sr{constructor(t,s){super(),this.Ii=t,this.YPt=s,this.Mz=t.KB().g5(),this.KPt=!0,this.Cz=!0,this.ZPt=!1,this.QPt=!1,this.t3t=!1,this.s3t=!1,this.UF=Ca.Mr(Ca.Ey.WP,t.dO().sL().xz(),{RP:(t,s)=>{const i=s.DF(),e=i.qD();t.GM(e.Gz()),t.Vw(e.vN()),i._v(t),t.Vw(0)},AP:t=>{const s=t.NGt(),[i,e]=t.BGt();return{CF:s,RF:i,AF:e}},EP:t=>this._z(t)}),this.i3t=[],this.APt=[],this.Yb=!0,this.PPt=[],this.FPt=[],this.jPt(t.dO().eM());for(let t=0,s=this.Mz.y5().length;t<s;++t)this.i3t.push(!0);this.eW(),this.Mz.NPt(this)}vr(){this.Mz.WPt(this);for(const t of this.FPt)t&&t.vr();Ca.Yn(this.FPt),this.UF.vr(),this.UF=null,Ca.Yn(this.i3t),Ca.Yn(this.APt),Ca.Yn(this.PPt),this.Ii=null,this.Mz=null}jPt(t){t.XS()&&(this.FPt=this.Mz.y5().map(t=>{const s=t.PG();return 0<s.GetCustomParametersByteSize()?Ca.Mr(Ca.Ey.WebGPUEffectCustomParamsBuffer,s):null}))}hEt(t){let s=0;for(const i of t)this.PPt.push(this.OPt(s,i)),++s;this.VPt(),this.eW()}OPt(t,s){this.i3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.Mr(Ca.ra);h.il(e),i[t]=h}}return i}ZCt(){for(const t of this.Mz.y5())this.PPt.push(t.XPt());this.VPt()}pv(){return this.sv}g5(){return this.Mz}JF(){return this.vJ(),this.UF}dO(){return this.Ii.dO()}eW(){Ca.Yn(this.APt);let t=this.YPt,i=this.Mz.y5(),e=this.APt,h=this.i3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.PG().lM()||(r=!1)}this.Yb=r,t.GPt(!!e.length),this.KPt=!0}vJ(){const t=this.Ii,s=this.YPt,i=s.xJ(),e=t.qL().EL(),h=0!==s.GetAngle()||0!==s.$D().GetAngle()||s.Fm()<0||s.Um()<0,r=t.VGt(),n=t.aM();(this.KPt||i!==this.Cz||e!==this.ZPt||h!==this.QPt||r!==this.t3t||n!==this.s3t||this.UF.P3())&&(this.UF.F3(this.APt.map(t=>t.PG()),{FP:this.APt.map(t=>t.qF()),kP:!i||n,OP:e,LP:r,BP:h}),this.KPt=!1,this.Cz=i,this.ZPt=e,this.QPt=h,this.t3t=r,this.s3t=n)}GJ(){return this.APt}qht(t){return this.PPt[t]}_z(t){return(t<this.FPt.length?this.FPt:this.PPt)[t]}hW(t,s){if(t<0||t>=this.PPt.length)return null;const i=this.PPt[t];return s<0||s>=i.length?null:i[s]}rW(t,s,i){if(t<0||t>=this.PPt.length)return!1;const e=this.PPt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.ra){if(h.Ca(i))return!1;h.wa(i)}else{if(h===i)return!1;e[s]=i}return t<this.FPt.length&&this.FPt[t].SetParameterValue(s,i),!0}VPt(){const i=this.PPt,e=this.FPt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}lM(){return this.Yb}e3t(){return this.APt.some(t=>t.PG().fM())}sW(t){return this.i3t[t]}iW(t,s){this.i3t[t]=!!s}y5(){return this.Mz.y5()}Lq(){return this.Mz.y5().map(t=>({name:t.yf(),active:this.i3t[t.qF()],params:Ca.vz.qPt(this.PPt[t.qF()])}))}Bq(t){for(const s of t){const i=this.Mz.$ht(s.name);i&&(this.i3t[i.qF()]=s.active,this.PPt[i.qF()]=Ca.vz.$Pt(s.params))}this.eW(),this.VPt()}}}{let _=self.Ns,r=[],b=[],n=[],M=_.Mr(_.Ju),S=_.Mr(_.Ju),v=_.Mr(_.fu),d=_.Mr(_.Rect),p=_.Mr(_.Rect),m=null,g=null,y=null;_.h3t=class extends _.Sr{constructor(t){super(),this.Tf=t,this.r3t=0,this.n3t=0,this.o3t=[],this.a3t=0,this.l3t=0,this.u3t=0,this.c3t=0,this.f3t=new self.PO(this)}vr(){this.Tf=null}dO(){return this.Tf}QF(){return this.f3t}d3t(){this.l3t=this.a3t,this.a3t=0,this.c3t=this.u3t,this.u3t=0}p3t(){return this.l3t}m3t(){return this.c3t}g3t(t,s){const i=t.qD(),e=s.qD();i&&e&&i.jN()&&e.jN()&&this.o3t.push([t,s])}gvt(s,i,e){for(const[h,r]of this.o3t){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.xvt(i)&&!e.includes(t)&&e.push(t)}}yvt(t,s){if(this.o3t.length)for(const[i,e]of this.o3t)if(t===i&&s===e||t===e&&s===i)return!0;return!1}y3t(){_.Yn(this.o3t)}kO(t,s){if(!t||!s||t===s)return!1;const i=t.qD(),e=s.qD();if(!i.jN()||!e.jN())return!1;this.a3t++;const h=i.$D(),r=e.$D(),n=h.c9(r);return n?this.S3t(i,e):this.w3t(i,e)}S3t(t,s){if(!t.GN().nu(s.GN()))return!1;if(this.u3t++,!t._N().Bu(s._N()))return!1;if(t.nRt()&&s.nRt())return!1;if(t.nRt())return this.b3t(t,s);if(s.nRt())return this.b3t(s,t);if(!t.cPt()&&!s.cPt())return!0;const i=t.fPt(),e=s.fPt();return i.nc(e,s.kM()-t.kM(),s.LM()-t.LM())}w3t(i,e){const t=i.nRt(),s=e.nRt();if(t&&!s)return this.M3t(i,e);if(s&&!t)return this.M3t(e,i);if(s||t)return!1;{const h=i.$D(),r=e.$D(),n=(M.I(i.fPt()),S.I(e.fPt()),M.Ku());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.VB(l+i.kM(),u+i.LM());n[t]=c,n[a]=f}const o=S.Ku();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.VB(p+e.kM(),m+e.LM());o[t]=g,o[d]=y}return M.ic(),S.ic(),this.u3t++,M.nc(S,0,0)}}M3t(t,s){const i=t.$D(),e=s.$D(),h=(m=m||_.Mr(_.Ju),g=g||_.Mr(_.Rect),y=y||_.Mr(_.fu),s.kM()),r=s.LM(),[n,o]=e.VB(h,r),[a,l]=i.BB(n,o),u=a-h,c=l-r;if(g.I(s.GN()),g.offset(u,c),!t.GN().nu(g))return!1;if(y.I(s._N()),y.offset(u,c),this.u3t++,!t._N().Bu(y))return!1;m.I(s.fPt());const f=m.Ku();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.ic(),this.b3t(t,s,a,l,m,g,y)}b3t(t,e,s,i,h,r,n){const o=void 0!==r?r:e.GN(),a=t.kM(),l=t.LM(),u=t.f8().B6(),c=void 0!==s?s:e.kM(),f=void 0!==i?i:e.LM(),d=e.cPt(),p=void 0!==n?n:e._N(),m=b;u.v3t(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.x3t();if(this.a3t++,o.ou(y,a,l)&&(v.Fu(y),v.offset(a,l),v.Bu(p)))if(d){let t=void 0!==h?h:e.fPt(),s=c,i=f;void 0!==h&&(s=e.kM(),i=e.LM());const S=g.G3t();if(S){if(this.u3t++,S.nc(t,s-(a+y.Ol()),i-(l+y.Ll())))return _.Yn(m),!0}else if(M.hc(v,0,0),M.nc(t,s,i))return _.Yn(m),!0}else{const w=g.G3t();if(!w)return _.Yn(m),!0;if(M.hc(p,0,0),w.nc(M,-(a+y.Ol()),-(l+y.Ll())))return _.Yn(m),!0}}return _.Yn(m),!1}T3t(t,o,a){const l=t.h5(),s=this.Tf.kk();if(!s)throw new Error("cannot call outside event");const u=s.e0t(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.pB(),i.set(t,s)),s};if(l.Wft()){a||(l.qft(!1),_.Yn(l.$ft())),u&&_.Yn(l.Xft());for(const e of t.e5()){let h=e.qD(),r=h.$D();if(!(!c(r)||!h.CN())&&o.some(([t,s])=>{const[i,e]=r.BB(t,s,h.vN());return h.UN(i,e)})){if(a)return!1;l.zft(e)}else u&&l.Jft(e)}}else{let i,e=!1,n=(!u||s.Xgt(this.Tf.$dt())||this.Tf.yMt()&&!l.Xft().length&&l.$ft().length?i=l.$ft():(i=l.Xft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.qD(),r=h.$D();if(!(!c(r)||!h.CN())&&o.some(([t,s])=>{const[i,e]=r.BB(t,s,h.vN());return h.UN(i,e)})){if(a)return!1;e?l.zft(t):i[n++]=t}else e?i[n++]=t:u&&l.Jft(t)}a||(i.length=n)}return t.Ayt(),i.clear(),!!a||l.jft()}_3t(t,s){if(t)for(const i of s._Ct())if(!t.c9(i))return!1;return!0}gMt(t,s,i,e){if(s.cJ())for(const h of s.vgt())this._3t(t,h)?(h.xCt(),h.MCt().GH(i,e)):_.er(e,h.e5());else this._3t(t,s)?(s.xCt(),s.MCt().GH(i,e)):_.er(e,s.e5())}HO(t,s,i,e){for(const h of s)this.gMt(t,h,i,e)}I3t(t,s,i){const e=this.Tf.HTt();e&&this.HO(t,e.GK(),s,i)}C3t(t,s,i){const e=this.Tf.zTt();e&&this.HO(t,e.GK(),s,i)}YEt(t,s){return t.lRt()&&(!s||s.qD().YEt(t.vbt().get("solidTags")))}LO(t){const s=t.qD();this.I3t(s.$D(),s.GN(),r);for(const i of r)if(this.YEt(i,t)&&this.kO(t,i))return _.Yn(r),i;return _.Yn(r),null}R3t(t,s){this.I3t(null,t,r);for(const i of r)if(this.YEt(i,s)&&this.A3t(t,i))return _.Yn(r),i;return _.Yn(r),null}E3t(t,s){let i=null;s&&(i=n,_.Yn(i));const e=t.qD();this.C3t(e.$D(),e.GN(),r);for(const h of r)if(h.cRt()&&this.kO(t,h)){if(!s)return _.Yn(r),h;i.push(h)}return _.Yn(r),i}P3t(s,i,e,h,r){h=h||50;const n=s.qD(),o=n.kM(),a=n.LM();for(let t=0;t<h;++t)if(n.yN(o+i*t,a+e*t),n.gN(),!this.kO(s,r))return!0;return n.yN(o,a),n.gN(),!1}F3t(s,i,e,h,r,n){h=h||50;let o=s.qD(),a=o.kM(),l=o.LM(),u=null,c=null;for(let t=0;t<h;++t)if(o.yN(a+i*t,l+e*t),o.gN(),!this.kO(s,u))if(u=this.LO(s))c=u;else if(r&&(u=n?this.kO(s,n)?n:null:this.E3t(s))&&(c=u),!u)return c&&this.k3t(s,i,e,c,16,!0),!0;return o.yN(a,l),o.gN(),!1}D3t(i,e,h,t){t=t||50;let r=i.qD(),n=r.kM(),o=r.LM(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.yN(n+e*s*u,o+h*s*u),r.gN(),!this.kO(i,a)){if(!(a=this.LO(i)))return l&&this.k3t(i,e*u,h*u,l,16,!0),!0;l=a}}return r.yN(n,o),r.gN(),!1}k3t(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.qD(),u=l.kM(),c=l.LM();for(;n<=h;){const f=1/n;n*=2,l.bN(s*f*(o?1:-1),i*f*(o?1:-1)),l.gN(),this.kO(t,e)||r&&this.LO(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.kM(),c=l.LM())}a&&(l.yN(u,c),l.gN())}O3t(i,t=100){let e=0,h=i.qD(),r=h.kM(),n=h.LM(),o=0,a=this.LO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.yN(Math.floor(r+t*e),Math.floor(n+s*e)),h.gN(),!this.kO(i,a)&&!(a=this.LO(i)))return!0}return h.yN(r,n),h.gN(),!1}L3t(t,s,i,e){const h=t.qD(),r=h.kM(),n=h.LM(),o=Math.max(10,_.kr(s,i,r,n)),a=_.Or(s,i,r,n),l=e||this.LO(t);if(!l)return _.Rr(a+Math.PI);let u=l,c=0,f=0,d=_.Ar(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.yN(s+Math.cos(G)*o,i+Math.sin(G)*o),h.gN(),!this.kO(t,u)&&!(u=e?null:this.LO(t))){c=G;break}}for(36===p&&(c=_.Rr(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.yN(s+Math.cos(T)*o,i+Math.sin(T)*o),h.gN(),!this.kO(t,u)&&!(u=e?null:this.LO(t))){f=T;break}}if(36===p&&(f=_.Rr(a+Math.PI)),h.yN(r,n),h.gN(),f===c)return f;let m=_.Lr(f,c)/2,g;g=_.Nr(f,c)?_.Rr(c+m+Math.PI):_.Rr(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),b=Math.sin(g),M=y*w+S*b,v=y-2*M*w,x=S-2*M*b;return _.Or(0,0,v,x)}B3t(t,s,i,e,h){if(!h)return!1;const r=h.qD();if(!r.jN())return!1;if(this.a3t++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.GN().nu(d))return!1;if(h.nRt())return this.N3t(t,s,i,e,h,r);if(this.u3t++,!r._N().Lu(t,s,i,e))return!1;if(!r.cPt())return!0;const n=r.fPt();return n.Lu(r.kM(),r.LM(),t,s,i,e)}N3t(i,e,h,r,t,s){const n=s.kM(),o=s.LM(),a=t.B6(),l=b;p.set(i,e,h,r),p.normalize(),a.v3t(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.x3t();if(this.a3t++,d.ou(c,n,o)&&(v.Fu(c),v.offset(n,o),v.Lu(i,e,h,r))){const f=u.G3t();if(!f)return _.Yn(l),!0;if(this.u3t++,f.Lu(n+c.Ol(),o+c.Ll(),i,e,h,r))return _.Yn(l),!0}}return _.Yn(l),!1}A3t(t,s){if(!s)return!1;const i=s.qD();if(!i.jN())return!1;if(this.a3t++,!i.GN().nu(t))return!1;if(s.nRt())return this.W3t(t,s,i);if(this.u3t++,v.Fu(t),!i._N().Bu(v))return!1;if(!i.cPt())return!0;const e=M,h=(e.Fu(t,i.kM(),i.LM()),i.fPt());return e.nc(h,0,0)}W3t(i,t,s){const e=s.kM(),h=s.LM(),r=t.B6(),n=b;r.v3t(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.x3t();if(this.a3t++,i.ou(a,e,h)){const l=o.G3t();if(!l)return _.Yn(n),!0;if(this.u3t++,M.Fu(i,0,0),l.nc(M,-(e+a.Ol()),-(h+a.Ll())))return _.Yn(n),!0}}return _.Yn(n),!1}j3t(t,s){if(t){const i=t.qD();i.jN()&&(this.a3t++,i.GN().nu(s.rect))&&(t.nRt()?this.V3t(t,i,s):(this.u3t++,i.cPt()?s.U3t(t,i.kM(),i.LM(),i.fPt()):s.H3t(t,i._N())))}}V3t(i,e,h){const r=e.kM(),n=e.LM(),o=b;i.B6().v3t(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.x3t();if(this.a3t++,h.rect.ou(l,r,n)){const u=a.G3t();this.u3t++,u?h.U3t(i,r+l.Ol(),n+l.Ll(),u):h.z3t(i,e.kM(),e.LM(),l)}}_.Yn(o)}NO(t,s){if(t!==this.r3t||s!==this.n3t){this.r3t=t,this.n3t=s;const i=this.Tf.uJ();for(const e of i)if(e.xL()){for(const h of e.i5())h.qD().$Et();e.MCt().J3t(t,s),e.vCt();for(const r of e.i5()){const n=r.qD();n.xPt(),n.GCt()}}}}jO(){return[this.r3t,this.n3t]}q3t(t,s){this.r3t=t,this.n3t=s}}}{const Ra=self.Ns;Ra.Q_t=class extends Ra.Sr{constructor(t,s){super(),this.yH=t,this.SH=s,this.wH=Ra.Mr(Ra.mc)}vr(){this.wH.vr(),this.wH=null}J3t(t,s){if(!this.wH.wc())throw new Error("grid not empty");this.yH=t,this.SH=s}bH(t,s,i){let e=this.wH.ri(t,s);return e||(i?(e=Ra.Mr(Ra.$3t,this,t,s),this.wH.Set(t,s,e),e):null)}MH(t){const s=Math.floor(t/this.yH);return isFinite(s)?s:0}vH(t){const s=Math.floor(t/this.SH);return isFinite(s)?s:0}xH(e,h,r){if(h)for(let i=h.Ol(),t=h.Bl();i<=t;++i)for(let t=h.Ll(),s=h.Nl();t<=s;++t)if(!r||!r.au(i,t)){const n=this.bH(i,t,!1);n&&(n.L0(e),n.wc())&&this.wH.Mc(i,t)}if(r)for(let i=r.Ol(),t=r.Bl();i<=t;++i)for(let t=r.Ll(),s=r.Nl();t<=s;++t)h&&h.au(i,t)||this.bH(i,t,!0).dH(e)}GH(t,s){let i=this.MH(t.Ol()),e=this.vH(t.Ll()),h=this.MH(t.Bl()),r=this.vH(t.Nl());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.bH(i,t,!1);n&&n.mH(s)}}}}{const Aa=self.Ns;Aa.$3t=class extends Aa.Sr{constructor(t,s,i){super(),this.nH=t,this.dl=s,this.pl=i,this.oH=Aa.Mr(Aa.Tc)}vr(){this.oH.vr(),this.oH=null,this.nH=null}wc(){return this.oH.wc()}dH(t){this.oH.Rc(t)}L0(t){this.oH.Mc(t)}mH(t){Aa.er(t,this.oH.Ac())}}}{const Ea=self.Ns;Ea.X3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ea.Rect,this.Y3t=2,this.K3t=null,this.Z3t=0,this.Q3t=0,this.tFt=0,this.sFt=0,this.iFt=0,this.At=0,this.eFt=1,this.hFt=0,this.rFt=1,this.nFt=0}oFt(){return this.Y3t<1+1e-6}T0(){this.Y3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.Y3t=2,this.K3t=null,this.Z3t=0,this.Q3t=0,this.tFt=0,this.sFt=0,this.iFt=0,this.At=0,this.eFt=1,this.hFt=0,this.rFt=1,this.nFt=0,this}aFt(){if(!1!==this.oFt()){const t=this.dx*this.Y3t,s=this.dy*this.Y3t,i=Ea.Pr(t,s),e=t/i,h=s/i,r=(this.At=i-1e-6,this.sFt=this.x1+e*this.At,this.iFt=this.y1+h*this.At,this.Z3t=Math.atan2(this.tFt,this.Q3t)+Math.PI/2,this.eFt=Math.cos(this.Z3t),this.hFt=Math.sin(this.Z3t),e*this.eFt+h*this.hFt);if(this.rFt=e-2*this.eFt*r,this.nFt=h-2*this.hFt*r,0<r){const n=Math.PI;this.Z3t=Ea.Rr(this.Z3t+n),this.eFt=-this.eFt,this.hFt=-this.hFt}}}lFt(t,s,i,e,h){const r=Ea._n(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.Y3t&&(this.Y3t=r,this.K3t=t.u4(),this.Q3t=s-e,this.tFt=i-h)}z3t(t,s,i,e){const h=s+e.Ol(),r=s+e.Bl(),n=i+e.Ll(),o=i+e.Nl();this.lFt(t,h,n,r,n),this.lFt(t,r,n,r,o),this.lFt(t,r,o,h,o),this.lFt(t,h,o,h,n)}H3t(t,s){const i=s.yn(),e=s.Sn(),h=s.wn(),r=s.bn(),n=s.Mn(),o=s.vn(),a=s.xn(),l=s.Gn();this.lFt(t,i,e,h,r),this.lFt(t,h,r,n,o),this.lFt(t,n,o,a,l),this.lFt(t,a,l,i,e)}U3t(i,e,h,t){const r=t.Ku();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.lFt(i,o,a,l,u)}}}}{const M=self.Ns,Pa=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),ka=self.vs,xh=ka._s,Gh=ka.As,Da=xh.create(),Oa=M.Mr(M.fu),v=M.Mr(M.Rect);M.uFt=class extends M.Sr{constructor(t){super(),this.Tf=t,this.cFt=[],this.fFt=!1,this.dFt=null,this.pFt=null,this.mFt=null,this.gFt="high-performance",this.yFt=!1,this.SFt="auto",this.wFt=0,this.bFt=0,this.MFt="",this.vFt=0,this.xFt=0,this.GFt=0,this.TFt=0,this._Ft=0,this.IFt=0,this.Zy="normalized",this.CFt=0,this.RFt=1,this.AFt=1e4,this.CS=!0,this.EFt=0,this.f3=0,this.d3=0,this.PFt="letterbox-scale",this.FFt="letterbox-scale",this.kFt=0,this.DFt=0,this.OFt=xh.create(),this.LFt="high",this.BFt=this.LFt,this.NFt=!1,this.WFt=[],this.jFt=new Set,this.VFt=self.C3_Shaders,this.UFt=M.Mr(M.Ey.mP,{cP:()=>[this.z9(),this.J9()],fP:()=>this.HFt(),dP:t=>this.zFt(t),getTime:()=>this.dO().Qk(),pP:()=>this.dO().tO()}),this.JFt=0,this.qFt=0,this.$Ft=NaN,this.XFt=null,this.YFt=new Map,this.KFt=NaN,this.ZFt=new Map,this.QFt="",this.tkt=1,this.skt=M.Mr(M.Rect),this.ikt="",this.ekt=null,this.hkt=null,this.rkt=0,this.nkt=0,this.okt=-1,this.akt=0,this.lkt=t=>this.akt=t.progress,this.ukt=null,this.ckt={fkt:null,dkt:null,pkt:null},this.mkt=0,this.gkt=0,this.ykt=0,this.Skt="fade-in",this.wkt=null,this.bkt=new Promise(t=>this.wkt=t)}Mkt(t){this.gFt=t}vkt(t){this.fFt=!!t}xkt(t){this.Zy=t}Gkt(){return this.Zy}Tkt(t){this.CFt=t}_kt(t,s){this.RFt=t,this.AFt=s}Ikt(t){this.yFt=!!t}Ckt(t){this.SFt=t}async Ho(t){let s=t.canvas,i=(this.cFt.push({canvas:s,Rkt:null}),this.Tf.U4("runtime","window-resize",t=>this.Akt(t)),this.Tf.U4("runtime","fullscreenchange",t=>this.Ekt(t)),this.Tf.U4("runtime","fullscreenerror",t=>this.Pkt(t)),s.addEventListener("webglcontextlost",t=>this.Fkt(t)),s.addEventListener("webglcontextrestored",t=>this.kkt(t)),this.NFt=!!t.isFullscreen,this.MFt=t.cssDisplayMode,navigator.gpu&&this.fFt),e=!1;if(i)try{await this.Dkt(!0)}catch(t){this.Okt("WebGPU",t),this.pFt=null}if(!this.eM())try{await this.Lkt(!0)}catch(t){this.Okt("WebGL",t),this.dFt=null}if(this.eM()||(e=!0),!this.eM()&&i)try{await this.Dkt(!1)}catch(t){this.Okt("WebGPU",t),this.pFt=null}if(!this.eM())try{await this.Lkt(!1)}catch(t){this.Okt("WebGL",t),this.dFt=null}const h=this.eM();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Db(e),this.pFt&&(this.pFt.Bkt=()=>this.Nkt(),this.pFt.Wkt=()=>this.jkt()),"normalized"===this.Zy?h.zS():(h.JS(),h.US(this.CFt)),this.vC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.jPt()}Okt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async Dkt(t){let s={zy:this.RFt,Jy:this.AFt},i=!0;"no"===this.SFt?i=!1:"auto"===this.SFt&&(i=M.fi.Mi);const e={powerPreference:this.gFt,depth:this.Tf.ZJ(),failIfMajorPerformanceCaveat:t,Vkt:this.Tf.sq(),Ukt:this.Tf.Hkt(),ER:this.Tf.zkt(),Jkt:i};this.pFt=M.Mr(M.Ey.WebGPURenderer,s),await this.pFt.Px(this.cFt[0].canvas,e)}async Lkt(t){const s={alpha:!0,powerPreference:this.gFt,AR:"xbox-uwp-webview2"!==this.Tf.KO(),depth:this.Tf.ZJ(),ER:this.Tf.zkt(),failIfMajorPerformanceCaveat:t,zy:this.RFt,Jy:this.AFt};this.yFt&&(s.PR=1),this.dFt=M.Mr(M.Ey.DR,this.cFt[0].canvas,s),await this.dFt.FS()}async qkt(){if(this.VFt){const t=[];for(const[s,i]of Object.entries(this.VFt)){i.src=i.wgsl;const e=M.Ey.WebGPUShaderProgram.ZG();t.push(this.pFt.BA(Object.assign({Rx:e,name:s},i)))}await Promise.all(t)}}async $kt(){if(this.VFt){const s=[];for(const[i,e]of Object.entries(this.VFt)){let t;if(e.glslWebGL2&&2<=this.dFt.i2())e.src=e.glslWebGL2,t=M.Ey.Ix.QG();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=M.Ey.Ix.ZG()}s.push(this.dFt.BA(Object.assign({Rx:t,name:i},e)))}await Promise.all(s),this.dFt.NA(),this.dFt.rw()}this.dFt.ZE()&&(this.XFt=M.Mr(M.Ey.bR,this.dFt))}async jPt(){this.pFt?await this.qkt():this.dFt&&await this.$kt();const t=this.eM();t.Fb(this.CS),t.ZE()&&(this.$Ft=0);for(const s of this.Tf.Xkt()){for(const i of s.y5())i.jPt(t);s.jPt(t),s.eW()}this.mFt=new self.bV(this.Tf,t)}vr(){this.Tf=null,this.dFt=null,this.cFt.length=0}fk(){return this.Tf.fk()}Akt(t){const s=this.Tf;if(!s.Ykt()){const i=t.devicePixelRatio,e=(this.fk()&&(self.devicePixelRatio=i),s.Kkt(i),this.NFt=!!t.isFullscreen,this.MFt=t.cssDisplayMode,this.vC(t.innerWidth,t.innerHeight),s.tO(),new M.Event("window-resize")),h=(e.data=t,s.h0().p0(e),new M.Event("resize"));h.Zkt=this.rL(),h.Qkt=this.oL(),h.tDt=this.lL(),h.sDt=this.cL(),s.eY(h),s.X4()&&(s.O1t()||self.C3Debugger.IsDebuggerPaused())&&s.U3()}}Ekt(t){this.NFt=!!t.isFullscreen,this.vC(t.innerWidth,t.innerHeight,!0),this.Tf.tO()}Pkt(t){this.NFt=!!t.isFullscreen,this.vC(t.innerWidth,t.innerHeight,!0),this.Tf.tO()}vC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.wFt!==t||this.bFt!==s||i){this.wFt=t,this.bFt=s;const e=this.iDt();"letterbox-scale"===e?this.eDt(t,s):"letterbox-integer-scale"===e?this.hDt(t,s):"off"===e?this.rDt(t,s):this.nDt(t,s),this.oDt(e);for(const{canvas:n}of this.cFt)n.width=this.GFt,n.height=this.TFt;this.Tf.Cf("canvas","update-size",{marginLeft:this._Ft,marginTop:this.IFt,styleWidth:this.vFt,styleHeight:this.xFt,displayScale:this.bj()});const h=this.eM();h.vC(this.GFt,this.TFt,!0);for(const o of this.WFt)h.JE(o);M.Yn(this.WFt),this.aDt();const r=this.Tf.CD();r._Y(),r.IY()}}aDt(){this.eM().$S(this.OFt,this.z9()/this.J9())}q9(){return this.OFt}eDt(t,s){const i=this.Tf.fL(),e=this.Tf.pk(),h=this.Tf.gk(),r=e/h,n=t/s;if(r<n){const o=s*r;this.vFt=Math.round(o),this.xFt=s,this._Ft=Math.floor((t-this.vFt)/2),this.IFt=0}else{const a=t/r;this.vFt=t,this.xFt=Math.round(a),this._Ft=0,this.IFt=Math.floor((s-this.xFt)/2)}this.GFt=Math.round(this.vFt*i),this.TFt=Math.round(this.xFt*i),this.Tf.lDt(e,h)}hDt(t,s){let i=this.Tf.fL(),e=(1!==i&&(t+=1,s+=1),this.Tf.pk()),h=this.Tf.gk(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.GFt=Math.round(e*o),this.TFt=Math.round(h*o),this.vFt=this.GFt/i,this.xFt=this.TFt/i,this._Ft=Math.max(Math.floor((t-this.vFt)/2),0),this.IFt=Math.max(Math.floor((s-this.xFt)/2),0),this.Tf.lDt(e,h)}nDt(t,s){const i=this.Tf.fL(),e=(this.vFt=t,this.xFt=s,this.GFt=Math.round(this.vFt*i),this.TFt=Math.round(this.xFt*i),this._Ft=0,this.IFt=0,this.bj());this.Tf.lDt(this.vFt/e,this.xFt/e)}rDt(t,s){const i=this.Tf.fL();this.vFt=this.Tf.VJ(),this.xFt=this.Tf.UJ(),this.GFt=Math.round(this.vFt*i),this.TFt=Math.round(this.xFt*i),this.uDt()?(this._Ft=Math.floor((t-this.vFt)/2),this.IFt=Math.floor((s-this.xFt)/2)):(this._Ft=0,this.IFt=0),this.Tf.lDt(this.Tf.VJ(),this.Tf.UJ())}oDt(i){if("high"===this.LFt)this.f3=this.GFt,this.d3=this.TFt,this.BFt="high";else{let t,s;if(s="off"===this.iDt()?(t=this.Tf.VJ(),this.Tf.UJ()):(t=this.Tf.pk(),this.Tf.gk()),this.GFt<t||this.TFt<s)this.f3=this.GFt,this.d3=this.TFt,this.BFt="high";else if(this.f3=t,this.d3=s,this.BFt="low","scale-inner"===i){const e=t/s,h=this.wFt/this.bFt;h<e?this.f3=this.d3*h:e<h&&(this.d3=this.f3/h)}else if("scale-outer"===i){const r=t/s,n=this.wFt/this.bFt;r<n?this.f3=this.d3*n:n<r&&(this.d3=this.f3/n)}}}dO(){return this.Tf}cDt(){return this.cFt[0].canvas}xz(){return this.UFt}uDt(){return this.NFt}fDt(){return this.MFt}dDt(t){if(!Pa.has(t))throw new Error("invalid fullscreen mode");this.PFt=t;const s=this.Tf.CD();s._Y(),s.IY()}Sj(){return this.PFt}pDt(t){if(!Pa.has(t))throw new Error("invalid fullscreen mode");this.FFt=t;const s=this.Tf.CD();s._Y(),s.IY()}mDt(){return this.FFt}iDt(){return this.uDt()?this.mDt():this.Sj()}gDt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.LFt=t,this.Tf.CD()._Y()}yDt(){return this.LFt}iq(){return this.BFt}static SDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}hj(){return this.wFt}rj(){return this.bFt}z9(){return this.f3}J9(){return this.d3}Fb(t){this.CS=!!t}wDt(t){this.EFt=t}tH(){return this.EFt}bDt(){return this.eM().KC()}Fkt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.WFt=[],this.jFt.clear(),this.UFt.TM(),this.dFt.TM(),this.Tf.iX()}Nkt(){console.log("[Construct] WebGPU device lost"),this.WFt=[],this.jFt.clear(),this.UFt.TM(),this.Tf.iX()}async kkt(t){await this.dFt._M(),await this.jPt(),await this.Tf.MDt(),console.log("[Construct] WebGL context restored")}async jkt(){await this.jPt(),await this.Tf.MDt(),console.log("[Construct] WebGPU device restored")}vDt(){return this.dFt}xDt(){return this.pFt}eM(){return this.pFt||this.dFt}YIt(){return this.mFt}tL(){let t="";return t=this.Tf.xDt()?"webgpu":"webgl"+this.Tf.vDt().i2(),this.Tf.eM().Ob()&&(t+="-software"),t}eL(){return this.Tf.xDt()?this.Tf.xDt().GetAdapterInfoString():this.Tf.vDt().oP()}$B(){return"low"===this.BFt?1/this.Tf.fL():this.bj()}bj(){const t=this.iDt();if("off"===t||"crop"===t)return 1;const s=this.Tf.pk(),i=this.Tf.gk(),e=s/i,h=this.GFt/this.TFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.xFt/i:this.vFt/s}Iq(){return"low"===this.iq()?1:this.bj()}Tq(){return"low"===this.iq()?1:this.Tf.fL()}GDt(t,s){this.kFt=t,this.DFt=s}rU(s,i,e,t=!0){i=i||this.f3,e=e||this.d3;const h=i/2+this.kFt,r=e/2+this.DFt;if(t){let t=this.q9();i===this.f3&&e===this.d3||(s.$S(Da,i/e),t=Da),s.jA(t)}const n=s.ZS(h,r,s.DS(e),h,r,0,e);s.qA(n)}TDt(t,s=!0){const i=this.rL(),e=this.oL(),h=i/2,r=e/2,n=(s&&t.jA(this.q9()),t.ZS(h,r,t.DS(e),h,r,0,e));t.qA(n)}lL(){return this.GFt}cL(){return this.TFt}rL(){return this.vFt}oL(){return this.xFt}NB(){return this._Ft}WB(){return this.IFt}N$(){return this.cFt.length}_Dt(){return"undefined"!=typeof OffscreenCanvas&&this.cDt()instanceof OffscreenCanvas&&("Chromium"!==M.fi.wi||124<=M.fi.Si)}async aX(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.cFt.length!==e){let t=this.Tf.CD().TD(),s={count:e,layersDomState:t.SJ().filter(t=>t.cB()).map(t=>t.M9()),immediate:h,marginLeft:this._Ft,marginTop:this.IFt,styleWidth:this.vFt,styleHeight:this.xFt},i;if(i=this.fk()?await this.Tf.iO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.cFt.length)this.cFt.length=e;else for(const r of i.addedCanvases){r.width=this.GFt,r.height=this.TFt;const n=this._Dt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.cFt.push({canvas:r,Rkt:o})}this.Tf.tO()}}tY(t){if(!(t>=this.cFt.length)){const s=this.cDt(),i=this.cFt[t].Rkt;this._Dt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}eq(s){s.depth=this.Tf.ZJ();let t=this.WFt,i=t.findIndex(t=>t.bx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.eM().jE(s),this.jFt.add(e),e}Tz(t){if(!this.jFt.has(t))throw new Error("render target not in use");this.jFt.delete(t),this.WFt.push(t)}HFt(){const t={Lv:this.Tf.yk()};return"low"===this.iq()&&(t.width=this.z9(),t.height=this.J9()),this.eq(t)}zFt(t){this.Tz(t)}*IDt(){for(const t of this.Tf.CD().xY())for(const s of t.E5()){const i=this.YFt.get(s);i&&(yield i)}}Z9(t){if(!this.eM().ZE())return null;let s=this.YFt.get(t);return s||(s={mN:t,name:t.yf(),CDt:M.Mr(M.Ey.bR,this.dFt),RDt:0,ADt:0,EDt:0},this.YFt.set(t,s)),s.CDt}PDt(){const t=this.eM();if(t.ZE()&&0===this.qFt){this.qFt=t.Eb(),this.KFt=NaN;for(const s of this.IDt())s.RDt=NaN}}FDt(){this.dFt&&this.dFt.ZE()&&this.kDt(),this.pFt&&this.pFt.ZE()&&this.DDt()}kDt(){if(isNaN(this.KFt)&&(this.KFt=this.XFt.IR(this.JFt,this.qFt),!isNaN(this.KFt))){if(this.Tf.X4())for(const t of this.IDt())if(t.RDt=t.CDt.IR(this.JFt,this.qFt),isNaN(t.RDt))return;if(this.XFt.CR(this.qFt),this.$Ft=Math.min(this.KFt,1),this.Tf.X4()){const i=new Map;for(const h of this.IDt())h.CDt.CR(this.qFt),h.ADt=Math.min(h.RDt,1),i.set(h.mN,h.ADt);for(const r of this.IDt()){const n=r.mN,o=i.get(n)||0,a=o-n.sB().reduce((t,s)=>t+(i.get(s)||0),0);r.EDt=M.Cr(a,0,1)}const s=this.Tf.TD(),e=this.$Ft-s.SJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Cr(e,0,1),this.$Ft,[...this.IDt()])}this.JFt=this.qFt,this.qFt=0}}ODt(){return this.XFt}DDt(){if(0!==this.qFt){for(let t=this.JFt;t<this.qFt;++t){const i=this.ZFt.get(t);if(i&&!i.lR())return}let t=this.Tf.TD(),n=M.ea(t.F$()+1,0),s=0;for(let t=this.JFt;t<this.qFt;++t){const o=this.ZFt.get(t);if(o){let i=o.uR(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.$Ft=M.Cr(s,0,1),this.Tf.X4()){const e=t.E5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,S]of h){const w=[...y.eB()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.yf(),EDt:M.Cr(S,0,1),ADt:M.Cr(w,0,1)})}const m=this.$Ft-t.SJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Cr(m,0,1),this.$Ft,r)}for(let t=this.JFt;t<this.qFt;++t)this.ZFt.delete(t);this.JFt=this.qFt,this.qFt=0}}LDt(t){this.ZFt.set(this.pFt.Eb(),t)}uD(){return this.$Ft}BDt(t,s,i,e,h,r){return this.QFt=t,this.tkt=s,this.skt.Cl(i,e,h,r),this.ekt||(this.ekt=new Promise(t=>{this.hkt=t})),this.ekt}NDt(){if(this.QFt){let t=this.cDt(),s=this.skt,i=M.Cr(Math.floor(s.Ol()),0,t.width),e=M.Cr(Math.floor(s.Ll()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:M.Cr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:M.Cr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=M.Ho(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}M.zo(t,this.QFt,this.tkt).then(t=>{this.ikt&&URL.revokeObjectURL(this.ikt),this.ikt=URL.createObjectURL(t),this.ekt=null,this.hkt(this.ikt)}),this.QFt="",this.tkt=1}}WDt(){return this.ikt}jDt(t){t?this.rkt++:this.rkt--}VDt(){return 0<this.rkt}UDt(t){const s=this.eM();if(2===t)this.ukt=M.Mr(M.Ey.Ub,this.eM()),this.ukt.ZI("Arial"),this.ukt.QI(16),this.ukt.dC("center"),this.ukt.mC("center"),this.ukt.vC(300,200);else if(0===t){const i=this.Tf.HDt();i&&i.KV(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.zDt("splash-images/splash-logo.svg").then(t=>{"done"===this.Skt?s.Y2(t):this.ckt.fkt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.JDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.Skt?s.Y2(t):this.ckt.dkt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.JDt("splash-images/splash-website-512.png").then(t=>{"done"===this.Skt?s.Y2(t):this.ckt.pkt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async zDt(t){t=new URL(t,this.Tf.qDt()).toString();const s=await M.Lo(t),i=await this.Tf.$Dt(s,2048,2048);return this.eM().WE(i,{jv:"high"})}async JDt(t){t=new URL(t,this.Tf.qDt()).toString();const s=await M.Lo(t);return this.eM().WE(s,{jv:"high"})}XDt(){this.Tf.Cf("runtime","hide-cordova-splash")}YDt(){this.nkt=Date.now(),this.Tf.h0().addEventListener("loadingprogress",this.lkt),this.okt=requestAnimationFrame(()=>this.KDt());const t=this.Tf.ZDt();3!==t&&this.XDt()}async QDt(){const t=this.eM(),s=(this.akt=1,this.Tf.ZDt());4===s&&await this.bkt,this.wkt=null,this.bkt=null,-1!==this.okt&&(cancelAnimationFrame(this.okt),this.okt=-1),this.Tf.h0().removeEventListener("loadingprogress",this.lkt),this.lkt=null,this.ukt&&(this.ukt.vr(),this.ukt=null),this.Tf.tOt(),t.AE(),this.ckt.fkt&&(t.Y2(this.ckt.fkt),this.ckt.fkt=null),this.ckt.dkt&&(t.Y2(this.ckt.dkt),this.ckt.dkt=null),this.ckt.pkt&&(t.Y2(this.ckt.pkt),this.ckt.pkt=null),t.RE(0,0,0,0),t.Rb(),this.Skt="done",this.JFt=t.Eb(),3===s&&this.XDt()}KDt(){if(-1!==this.okt){const t=this.eM(),s=(t.AE(),this.okt=-1,this.Tf.KF().G7()),i=this.Tf.ZDt();if(3!==i&&(this.TDt(t),t.RE(0,0,0,0),t.sE(),t.rw(),t.eE(null)),0===i)this.sOt(s);else if(1===i)this.iOt(s,120,0);else if(2===i)this.eOt(s);else if(3===i)M.Jn();else{if(4!==i)throw new Error("invalid loader style");this.hOt(s)}t.Rb(),this.okt=requestAnimationFrame(()=>this.KDt())}}eOt(t){t?this.ukt.fC(1,0,0):this.ukt.fC(.6,.6,.6),this.ukt.Rf(Math.round(100*this.akt)+"%");const s=this.vFt/2,i=this.xFt/2,e=(Oa.Mu(s-150,i-100,150+s,100+i),this.eM());e.eE(this.ukt.hx()),e.Qw(Oa,this.ukt.QC())}iOt(t,s,i){const e=this.eM(),h=(e.dw(),t?e.QA(1,0,0,1):e.QA(.118,.565,1,1),this.vFt/2),r=this.xFt/2,n=s/2;v.Cl(h-n,r-4+i,Math.floor(s*this.akt),8),e.Rect(v),v.Cl(h-n,r-4+i,s,8),v.offset(-.5,-.5),v.Xl(.5,.5),e.QA(0,0,0,1),e.hb(v),v.Xl(1,1),e.QA(1,1,1,1),e.hb(v)}sOt(t){const s=this.eM(),i=this.Tf.HDt();if(i){const e=i.hx();if(e){const h=e.Fm(),r=e.Um(),n=this.vFt/2,o=this.xFt/2,a=h/2,l=r/2;Oa.Mu(n-a,o-l,n+a,o+l),s.eE(e),s.fu(Oa),this.iOt(t,h,16+l)}else this.iOt(t,120,0)}else this.iOt(t,120,0)}hOt(t){let s=this.eM(),i=this.ckt.fkt,e=this.ckt.dkt,h=this.ckt.pkt,r=Date.now(),n=(0===this.mkt&&(this.nkt=r),this.Tf.rOt()||this.Tf.nOt()&&!this.Tf.oOt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.Skt?l=Math.min((r-this.nkt)/300,1):"fade-out"===this.Skt&&(l=Math.max(1-(r-this.ykt)/300,0)),s.dw(),s.QA(.231*l,.251*l,.271*l,l),v.set(0,0,this.vFt,this.xFt),s.Rect(v),Math.ceil(this.vFt)),c=Math.ceil(this.xFt),f,d;256<this.xFt?(s.QA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.Cl(0,.8*c-d/2,f,d),s.Rect(v),t?s.QA(l,0,0,l):s.QA(.161*l,.953*l,.816*l,l),f=u*this.akt,v.Cl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(v),s.QA(l,l,l,l),s.rw(),e&&(f=1.5*M.Cr(.22*c,105,.6*u),d=f/8,v.Cl(.5*u-f/2,.2*c-d/2,f,d),s.eE(e),s.Rect(v)),i&&(f=Math.min(.395*c,.95*u),d=f,v.Cl(.5*u-f/2,.485*c-d/2,f,d),s.eE(i),s.Rect(v)),h&&(f=1.5*M.Cr(.22*c,105,.6*u),d=f/8,v.Cl(.5*u-f/2,.868*c-d/2,f,d),s.eE(h),s.Rect(v))):(s.QA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.Cl(0,.85*c-d/2,f,d),s.Rect(v),t?s.QA(l,0,0,l):s.QA(.161*l,.953*l,.816*l,l),f=u*this.akt,v.Cl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(v),s.QA(l,l,l,l),s.rw(),i&&(f=.55*c,d=f,v.Cl(.5*u-f/2,.45*c-d/2,f,d),s.eE(i),s.Rect(v))),this.mkt++,"fade-in"===this.Skt&&300<=r-this.nkt&&2<=this.mkt&&(this.Skt="wait",this.gkt=r),"wait"===this.Skt&&r-this.gkt>=a&&1<=this.akt&&(this.Skt="fade-out",this.ykt=r),("fade-out"===this.Skt&&r-this.ykt>=300+o||n&&1<=this.akt&&r-this.nkt<500)&&this.wkt()}}}{let V=self.Ns,U=self.C3Debugger,h=self.Ej,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;V.aOt=class extends V.Sr{constructor(t){t=Object.assign({},i,t),super(),this.lOt=t.messagePort,this.uOt=t.runtimeBaseUrl,this.cOt=t.previewUrl,this.fOt=!!t.headless,this.dOt=!!t.hasDom,this.pOt=!!t.isInWorker,n=t.ife,this.mOt=!!t.useAudio,this.gOt=t.exportType,this.yOt=t.isNWjs,this.IU=!!t.isiOSCordova,this.SOt=!!t.isiOSWebView,this.wOt=!!t.isWindowsWebView2,this.bOt=!!t.isAnyWebView2Wrapper,this.MOt=!!t.isFBInstantAvailable,this.vOt=!("preview"!==this.gOt||!t.isDebug),this.xOt=this.vOt,this.GOt=this.vOt,this.TOt=0,this._Ot=[],this.IOt=[],this.COt=!1,this.ROt="",this.AOt="",this.EOt="",this.POt="",this.FOt=0,this.kOt=0,this.DOt=0,this.v3=self.devicePixelRatio,this.OOt=0,this.LOt=0,this.BOt=0,this.NOt=0,this.WOt=0,this.jOt=!1,this.ny=!0,this.VOt=!1,this.UOt=!1,this.HOt=!1,this.zOt=null,this.W7=V.Mr(V.xU,this,t),this.Uq=V.Mr(V.nY,this),this.r0t=V.Mr(V.idt,this),this.JOt=V.Mr(V.SL,this,t.wrapperComponentIds),this.qOt=V.Mr(V.h3t,this),this.NQ=V.Mr(V.CY,this),this.$Ot=V.Mr(V.Hlt,this),this.XOt=V.Mr(V.Jlt,this),this.nut=V.Mr(V.tut,this),this.Qg=V.Mr(V.jg,{Hg:t=>this.YOt(t),Jg:t=>this.KOt(t)}),this.ZOt=new Map,this.QOt=[],this.tLt=new Map,this.sLt=new Map,this.iLt=0,this.eLt=[],this.hLt=new Set,this.rLt=[],this.nLt=[],this.oLt=new Map,this.aLt=!1,this.lLt=!1,this.uLt=0,this.cLt=0,this.fLt=new Map,this.dLt=new Set,this.pLt=new Set,this.mLt=[],this.gLt=[],this.yLt=null,this.SLt=!1,this.wLt="vsync",this.$v="trilinear",this.bLt=!1,this.MLt=!0,this.vLt=!1,this.xLt=!1,this.GLt=null,this.TLt={_Lt:t=>{this.okt=-1,this.ILt=-1,this.ZK(t)},CLt:t=>{this.ILt=-1,this.ZK(t,!1,"skip-render")},RLt:()=>{this.okt=-1,this.U3()}},this.okt=-1,this.ILt=-1,this.ALt=0,this.ELt=0,this.PLt=!1,this.FLt=!1,this.kLt=!1,this.DLt=!0,this.OLt=!0,this.LLt=!1,this.BLt=0,this.NLt=new V.Pd(1),this.WLt=()=>Math.random(),this.jLt=0,this.VLt=0,this.ULt=0,this.HLt=0,this.zLt=0,this.qCt=1,this.JLt=1/30,this.qLt=0,this.$Lt=V.Mr(V.N0),this.XLt=V.Mr(V.N0),this.YLt=V.Mr(V.N0),this.KLt=new Map,this.ZLt=-1,this.QLt=0,this.t5t=0,this.s5t=-1,this.i5t=0,this.e5t=0,this.h5t=0,this.r5t=!1,this.n5t="",this.o5t=!1,this.a5t="",this.iN=null,this.l5t="",this.u5t=null,this.c5t=null,this.K_t=V.Mr(V.Event.h0),this.f5t=new Map,this.d5t=new Map,this.p5t=0,this.m5t=!1,this.g5t=!1,this.y5t=!1,this.S5t=[],this.w5t={pretick:V.Mr(V.Event,"pretick",!1),tick:V.Mr(V.Event,"tick",!1),tick2:V.Mr(V.Event,"tick2",!1),instancecreate:V.Mr(V.Event,"instancecreate",!1),instancedestroy:V.Mr(V.Event,"instancedestroy",!1),beforelayoutchange:V.Mr(V.Event,"beforelayoutchange",!1),layoutchange:V.Mr(V.Event,"layoutchange",!1)},this.w5t.instancecreate.Y6=null,this.w5t.instancedestroy.Y6=null,this.b$=V.Mr(V.Event.h0),this.b5t=null;const s=(t,s)=>V.zCt.CPt(this,t,s);this.M5t=V.Mr(V.$0,s),this.v5t=V.Mr(V.$0,s),this.x5t=V.Mr(V.$0,s),this.G5t=V.Mr(V.T5t,this,t.jobScheduler),t.canvas&&(this.yLt=V.Mr(V.uFt,this)),this.lOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.U4("runtime","visibilitychange",t=>this._5t(t)),this.U4("runtime","wrapper-extension-message",t=>this.I5t(t)),this.U4("runtime","get-remote-preview-status-info",()=>this.C5t()),this.U4("runtime","js-invoke-function",t=>this.Adt(t)),this.U4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.U4("runtime","offline-audio-render-completed",t=>this.R5t(t)),this.K_t.addEventListener("window-blur",t=>this.A5t(t)),this.K_t.addEventListener("window-focus",()=>this.E5t()),this.NQ.oK(),this.XOt.oK(),this.P5t=null,this.F5t=new WeakMap,this.k5t={keyboard:null,OD:null,LD:null,BD:null},this.D5t=new WeakMap,this.O5t=[]}static Px(t){return V.Mr(V.aOt,t)}vr(){V.Yn(this.QOt),this.tLt.clear(),this.sLt.clear(),this.Uq.vr(),this.Uq=null,this.r0t.vr(),this.r0t=null,this.JOt.vr(),this.JOt=null,this.W7.vr(),this.W7=null,this.qOt.vr(),this.qOt=null,this.NQ.vr(),this.NQ=null,this.$Ot.vr(),this.$Ot=null,this.XOt.vr(),this.XOt=null,this.nut.vr(),this.nut=null,this.Qg.vr(),this.Qg=null,this.yLt&&(this.yLt.vr(),this.yLt=null),this.K_t.vr(),this.K_t=null,this.L5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.B5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.N5t(t)}}B5t(t){if(this.y5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new V.Event(i);l.data=e,this.K_t.p0(l)}if(n){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.eY(u)}}const a=this.f5t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.W5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.W5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.W5t(o,!1,""+t)}):this.W5t(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.S5t.push(t)}W5t(t,s,i){this.lOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}N5t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.d5t.get(s);i?h.resolve(e):h.reject(e),this.d5t.delete(s)}U4(t,s,i){let e=this.f5t.get(t);if(e||(e=new Map,this.f5t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Cf(t,s,i,e){this.lOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}iO(t,s,i,e){const h=this.p5t++,r=new Promise((t,s)=>{this.d5t.set(h,{resolve:t,reject:s})});return this.lOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}Uj(t,s,i,e=-1){this.Cf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}Hj(t,s,i){const e=this.p5t++,h=new Promise((t,s)=>{this.d5t.set(e,{resolve:t,reject:s})});return this.Uj(t,s,i,e),h}I5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.d5t.get(s);i.resolve(t.params),this.d5t.delete(s)}else this.B5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}nN(t,s,i){this.U4("wrapper-extension:"+t,s,i)}hN(t){return this.JOt.hN(t)}j5t(t){if(!this.X4())throw new Error("not in debug mode");this.Cf("runtime","post-to-debugger",t)}async YCt(t){V.wMt(this),this.X4()?await U.YCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.W7.Oo("data.json");if(await this.V5t(s),await this.U5t(t),this.rOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.vDt()){const i=this.vDt();console.info(`[C3 runtime] Hosted in ${this.fk()?"worker":"DOM"}, rendering with WebGL ${i.i2()} [${i.oP()}]`)}else this.xDt()&&console.info(`[C3 runtime] Hosted in ${this.fk()?"worker":"DOM"}, rendering with WebGPU [${this.xDt().GetAdapterInfoString()}]`);this.eM().Ob()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.y5t=!0;for(const e of this.S5t)this.B5t(e);V.Yn(this.S5t),this.yLt&&this.yLt.YDt();for(const h of t.runOnStartupFunctions)this._Ot.push(this.H5t(h));if(await Promise.all([this.W7.v7(),...this._Ot]),V.Yn(this._Ot),!this.W7.G7())return this.yLt&&await this.yLt.QDt(),await this.K_t.f0(new V.Event("beforeruntimestart")),await this.AE(),this.lOt.postMessage({type:"runtime-ready"}),this;this.yLt&&this.yLt.XDt()}async H5t(t){try{await t(this.P5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async V5t(t){const s=t.project,i=(this.ROt=s[0],this.AOt=s[16],this.EOt=s[31],this.POt=s[38],this.FOt=s[36],s[39]||"loading-logo.png"),e=(this.bLt=!!s[9],this.kOt=this.BOt=s[10],this.DOt=this.NOt=s[11],this.qOt.q3t(this.kOt,this.DOt),this.OOt=this.kOt/2,this.LOt=this.DOt/2,this.wLt=s[37],this.SLt=!!s[40],this.$v=s[14],this.VOt=s[15],this.UOt=s[42],this.HOt=s[17],this.jOt=!!s[18],this.WOt=s[19],this.cLt=s[21],this.vLt=s[22],this.W7);if(e.QU(s[45]),e.E7(s[7],s[25]),e.s7(s[8]),e.i7(s[32]),e.h7(s[28]),e.I7(s[29]),0===this.WOt){let t;(t="flat"===e.MO()?e.r7()+i:i)&&(this.zOt=e.m7({url:t}))}this.yLt&&(this.yLt.dDt(V.uFt.SDt(s[12])),this.yLt.gDt(s[23]?"high":"low"),this.yLt.Fb(0!==s[24]),this.yLt.Mkt(s[34]),this.yLt.wDt(s[41]),this.yLt.vkt(s[13]),this.yLt.xkt(s[30]),this.yLt._kt(s[46],s[47]),this.yLt.Tkt(s[26]),this.yLt.Ikt(s[48]),this.yLt.Ckt(s[50]));const h=s[43],r=(h&&await this.z5t(h),this.J5t(),this.JOt.OTt(),this.mLt=self.q5t(),s[2]);for(const l of r[1])this.JOt.LTt(l);for(const u of r[0])this.JOt.DTt(u);this.mLt=self.q5t(),this.$5t(),this.JOt.UTt();for(const c of s[3]){const f=V.Klt.Px(this,this.QOt.length,c);this.QOt.push(f),this.tLt.set(f.yf().toLowerCase(),f),this.sLt.set(f.wJ(),f)}for(const d of s[4]){const p=this.QOt[d[0]];p.DIt(d)}for(const m of s[27]){const g=m.map(t=>this.QOt[t]);this.eLt.push(V.Mr(V.kCt,this,g))}this.X5t();for(const y of this.QOt)y.LIt();for(const S of s[5])this.Uq.Px(S);const n=s[1];if(n){const w=this.Uq.SY(n);w&&this.Uq.gY(w)}for(const b of s[35])this.$Ot.Px(b);for(const M of s[33])this.NQ.Px(M);for(const v of s[44])this.XOt.Px(v);this.XOt.Xlt()||(this.XOt.vr(),this.XOt=null);for(const x of s[49])this.nut.Px(x);this.nut.hut()||(this.nut.vr(),this.nut=null);for(const G of s[6])this.r0t.Px(G);this.r0t.Fdt(),this.Y5t(),V.Yn(this.mLt),this.p5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Cf("runtime","set-target-orientation",{targetOrientation:o})}async z5t(t){const s=t.format;"image-sequence"===s?this.GLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.GLt=new self.C3ExportToGIF(this,t):"webm"===s?this.GLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.GLt=new self.C3ExportToMP4Video(this,t)),this.wLt="unlimited-frame",this.yLt.dDt("off"),this.v3=1,self.devicePixelRatio=1,await this.iO("runtime","set-exporting-to-video",{message:this.GLt.GetExportingMessageForPercent(0),duration:this.GLt.xW()})}ZDt(){return this.WOt}Ykt(){return null!==this.GLt}K5t(){return this.GLt.xW()}Z5t(){return this.GLt.GetFramerate()}Q5t(){return this.GLt.YCt({width:this.yLt.lL(),height:this.yLt.cL()})}tBt(){const t=this.ALt/this.Z5t();return this.GLt.AddFrame(this.yLt.cDt(),t)}sBt(){this.GLt&&this.GLt.Xit()}R5t(t){this.GLt.OnOfflineAudioRenderCompleted(t)}iBt(){return this.GLt.Rb()}nOt(){return this.MOt}yy(){return this.ny}nO(t){this._Ot.push(t)}uX(t){this.COt=!!t}eBt(t){this.COt&&this.IOt.push(t)}gX(){return this.IOt}CIt(){return this.iLt++}NIt(){return this.iLt}LPt(t){this.hLt.add(t)}BPt(t){this.hLt.delete(t)}Xkt(){return this.hLt}async U5t(t){this.yLt&&(await this.yLt.Ho(t),this.yLt.UDt(this.WOt))}async AE(){this.PLt=!0,this.jLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.jOt){for(const h of this.QOt)h.cJ()||h.$It()||!h.xL()||h.Dxt();(async()=>{await this.W7.v7(),await t,this.ny=!1,this.hBt()})()}else this.ny=!1;this.W7.x7(),this.X4()&&U.RuntimeInit(n);for(const r of this.Uq.ED())r.kX();this.Ykt()&&await this.Q5t();const i=this.Uq.yY(),e=(await i.q$(null,this.eM()),await i.eX(!0),this.QLt=performance.now(),s(),this.jOt||this.hBt(),await this.iO("runtime","before-start-ticking"));e.isSuspended&&!this.Ykt()?(this.BLt++,this.LLt=!0):this.ZK()}hBt(){this.N4(V.CX.IX._X.rBt,null,null),this.Cf("runtime","register-sw")}Nyt(t){t=Math.floor(t);const s=this.mLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}$5t(){for(const t of self.nBt){const s=V.first(Object.keys(t));this.gLt.push(s)}}e1t(t){t=Math.floor(t);const s=this.gLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}oBt(){return this.dOt}aBt(){return this.fOt}fk(){return this.pOt}qDt(){return this.uOt}lBt(){return this.cOt}Ck(){return this.r0t}jk(){return this.r0t.jk()}qdt(){return this.r0t.qdt()}kk(){return this.r0t.kk()}$dt(){return this.r0t.$dt()}yMt(){return 0===this.qdt().G0t()}Ydt(){return this.r0t.Ydt()}_Pt(){return this.JOt}_7(){return this.JOt._7()}Wz(t){if((t=Math.floor(t))<0||t>=this.QOt.length)throw new RangeError("invalid index");return this.QOt[t]}uBt(t){return this.tLt.get(t.toLowerCase())||null}Qj(t){return this.sLt.get(t)||null}drt(t){const s=V.SL.BL(t);return s?s.VL():null}uJ(){return this.QOt}*cBt(){for(const t of this.QOt)t.cJ()||(yield*t.instances())}h0(){return this.K_t}Gk(){return this.b$}eY(t){t.runtime=this.wL();const s=this.X4()&&!this.r0t.f5();s&&U.StartMeasuringScriptTime(),this.b$.dispatchEvent(t),s&&U.AddScriptTime()}xX(t){return t.runtime=this.wL(),this.b$.f0(t)}pk(){return this.kOt}gk(){return this.DOt}fBt(t,s){if(this.kOt!==t||this.DOt!==s){this.kOt=t,this.DOt=s;const i=this.CD();i._Y(),i.IY()}}VJ(){return this.BOt}UJ(){return this.NOt}lDt(t,s){if(this.BOt!==t||this.NOt!==s){this.BOt=t,this.NOt=s;const i=this.CD();i._Y(),i.IY()}}Kkt(t){this.Ykt()||(this.v3=t)}fL(){return this.v3}B9(){return this.OOt}N9(){return this.LOt}sL(){return this.yLt}z9(){return this.yLt?this.yLt.z9():this.BOt}J9(){return this.yLt?this.yLt.J9():this.NOt}$B(){return this.yLt?this.yLt.$B():1}bj(){return this.yLt?this.yLt.bj():1}Iq(){return this.yLt?this.yLt.Iq():1}Tq(){return this.yLt?this.yLt.Tq():1}NB(){return this.yLt?this.yLt.NB():0}WB(){return this.yLt?this.yLt.WB():0}dBt(){return this.yLt?this.yLt.rL():0}pBt(){return this.yLt?this.yLt.oL():0}Sj(){return this.yLt?this.yLt.Sj():"off"}eq(t){return this.yLt?this.yLt.eq(t):null}Tz(t){this.yLt&&this.yLt.Tz(t)}sq(){return this.VOt}Hkt(){return this.UOt}zkt(){return this.HOt}uD(){return this.yLt?this.yLt.uD():NaN}ox(){return"nearest"!==this.yk()}fD(){return this.wLt}dD(t){this.wLt!==t&&(this.wLt=t,-1!==this.okt||-1!==this.ILt)&&(this.mBt(),this.gBt())}yk(){return this.$v}PIt(){return this.jOt}HDt(){return this.zOt}tOt(){this.zOt&&(this.zOt.HI(),this.zOt.vr(),this.zOt=null)}CD(){return this.Uq}TD(){return this.Uq.TD()}Gtt(){return this.NQ}yBt(){return this.$Ot}_Rt(){return this.XOt}Cut(){return this.nut}KF(){return this.W7}m7(t){return this.W7.m7(t)}a5(t,s,i,e,h,r){if(r&&this.XOt){if(t instanceof V.Klt&&t.cJ()){const o=t.vgt(),a=Math.floor(this.GD()*o.length);return this.a5(o[a],s,i,e,h,r)}const n=this.XOt.Ylt(t,r);if(n){const l=this.Yz(n,s,!1,i,e,!1,h,void 0,h);return this.XOt.Zlt(l,r),l}}return this.Yz(t,s,!1,i,e,!1,h,void 0,h)}Yz(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof V.Klt){if((u=t).cJ()){const b=u.vgt(),M=Math.floor(this.GD()*b.length);u=b[M]}l=u.Vz()}else l=t,u=this.Wz(l[1]);const c=u.qL().xL();if(this.ny&&c&&!u.$It())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.fLt.has(l[2])?l[2]:this.cLt++;const p=l?l[0]:null,m=V.Mr(V.Instance,{runtime:this,YB:u,mN:s,XCt:p,QCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.fLt.set(d,m);let g=null,y=(c&&(g=m.qD(),void 0!==e&&void 0!==h&&(g.DM(e),g.BM(h)),u.vCt(!0)),s&&(a||s.Zz(m,!0),s.RD().X$(u)),this.uLt++,!0);if(o){const v=o.KB();if(v.a4()&&u.a4()){const x=u.z$(),G=v.z$();x===G&&(y=!1)}}if(u.a4()&&!i&&!r&&y){const T=new Set;for(const _ of u.z$().EX())if(_!==u){const I=this.SBt(_,g,T);if(I){const C=this.Yz(I,f,!1,g?g.kM():e,g?g.LM():h,!0,!1,void 0,a);m.PX(C)}else{const B=this.Yz(_,f,!1,g?g.kM():e,g?g.LM():h,!0,!1,void 0,a);m.PX(B)}}for(const R of m.l4()){R.PX(m);for(const A of m.l4())R!==A&&R.PX(A)}}if(c&&!i&&n&&this.wBt(m,p,g,s,e,h,a),u.a4()&&!i&&!r&&n)for(const E of m.l4()){const P=E.qD();if(P){const N=E.qL(),F=E.KB().Vz()[0];N.xL()?this.wBt(E,F,P,s,P.kM(),P.LM(),a):this.wBt(E,F,P,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const k=g.JN(),W=e-g.kM()+k.kM(),j=h-g.LM()+k.LM();k.yN(W,j)}u.yCt();const O=l?V.fo(l[5]):null,L=l?l[4].map(t=>V.fo(t)):null,S=c&&p&&p[13];if(S&&m.rRt(),m.JIt(O,L),S){const D=p[13];m.B6().Zxt(D[2],D[0],D[1])}this.nLt.push(m),this.aLt=!0,this.X4()&&U.InstanceCreated(m);const w=this.w5t.instancecreate;return w.Y6=m,this.K_t.dispatchEvent(w),m}xAt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.Uq.wY(s),n=r.$D(i);return n.Jz(e)}SBt(t,s,i){const e=s?.TRt()??[];for(const h of e){const r=this.xAt(h),n=!!h[4],o=this.Wz(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}wBt(a,t,s,l,u,c,f){const i=s.HEt(),e=s.TRt();if(a.qD().zEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.Uq.wY(t),M=b.$D(s);o=M.Jz(i)}const y=this.Wz(o[1]),S=a.IRt(y),w=d.has(y);if(S&&!w&&h){const v=a.CRt(y),x=(v.qD().YCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;v.qD().yN(x,G),v.qD().zEt(r),a.t6(v,{r6:!!(e>>0&1),o6:!!(e>>1&1),l6:!!(e>>2&1),c6:!!(e>>3&1),d6:!!(e>>4&1),M6:!!(e>>5&1),m6:!!(e>>6&1),y6:!!(e>>7&1),w6:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.Yz(o,l,!1,T,_,!1,!0,a,f);I.qD().zEt(r),a.t6(I,{r6:!!(e>>0&1),o6:!!(e>>1&1),l6:!!(e>>2&1),c6:!!(e>>3&1),d6:!!(e>>4&1),M6:!!(e>>5&1),m6:!!(e>>6&1),y6:!!(e>>7&1),w6:!!(e>>8&1)})}}}}e4(i){if(!this.dLt.has(i)){let t=i.KB(),s=this.oLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.oLt.set(t,s);if(this.X4()&&U.InstanceDestroyed(i),i.oRt(),this.aLt=!0,i.a4())for(const e of i.l4())this.e4(e);for(const h of i.children())h.v6()&&this.e4(h);if(!this.Uq.d5()&&!this.r5t){const r=this.Ck();r.u5(!0),i.BRt(),r.u5(!1)}i.NRt(this.Uq.d5())}}p5(){this.aLt&&(this.lLt=!0,this.bBt(),this.MBt(),this.lLt=!1,this.aLt=!1,this.tO())}bBt(){for(const t of this.nLt){const s=t.KB();s.Zz(t);for(const i of s.u1t())i.Zz(t),i.yCt()}V.Yn(this.nLt)}MBt(){this.K_t.Kf(!0);for(const[t,s]of this.oLt.entries())this.vBt(t,s),s.clear();this.oLt.clear(),this.K_t.Kf(!1)}vBt(t,s){for(const i of s){const e=this.w5t.instancedestroy,h=(e.Y6=i,this.K_t.dispatchEvent(e),this.fLt.delete(i.u4()),this.KLt.delete(i),i.qD());h&&(h.$Et(),h.iJ(),h.oRt()),this.dLt.add(i),this.uLt--}V.lo(t.e5(),s),t.yCt(),this.pLt.add(t);for(const r of t.u1t())V.lo(r.e5(),s),r.yCt(),this.pLt.add(r);if(t.qL().xL()){const n=new Set([...s].map(t=>t.qD().$D()));for(const o of n)o.p9(s)}}wCt(){return this.nLt}*vvt(t){for(const s of this.wCt())t.cJ()?s.KB().SMt(t)&&(yield s):s.KB()===t&&(yield s)}zIt(){return this.cLt++}qIt(t,s){this.fLt.set(t,s)}$j(t){this.OLt!==(t=!!t)&&(this.OLt=!!t,this.OLt)&&this.LLt&&(this.Kj(!1),this.LLt=!1)}Xj(){return this.OLt}iX(){this.K_t.dispatchEvent(V.Mr(V.Event,"renderercontextlost")),this.Kj(!0);for(const s of this.QOt)!s.cJ()&&s.XIt()&&s.tX();const t=this.TD();t&&t.iX(),V.JTt.Q7(),V.y7.Q7()}async MDt(){await this.TD().q$(null,this.eM()),this.K_t.dispatchEvent(V.Mr(V.Event,"renderercontextrestored")),this.Kj(!1),this.tO()}_5t(t){if(this.OLt){const s=t.hidden;this.Kj(s),(this.LLt=s)||this.tO()}}A5t(t){this.rOt()&&this.vLt&&!V.fi.vi&&!t.data.parentHasFocus&&(this.Kj(!0),this.xLt=!0)}E5t(){this.xLt&&(this.Kj(!1),this.xLt=!1)}gBt(){const t=this.TLt;"vsync"===this.wLt?-1===this.okt&&(this.okt=self.requestAnimationFrame(t._Lt)):"unlimited-tick"===this.wLt?(-1===this.ILt&&(this.ILt=V.To(t.CLt)),-1===this.okt&&(this.okt=self.requestAnimationFrame(t.RLt))):-1===this.ILt&&(this.ILt=V.To(t._Lt))}mBt(){-1!==this.okt&&(self.cancelAnimationFrame(this.okt),this.okt=-1),-1!==this.ILt&&(V._o(this.ILt),this.ILt=-1)}$k(){return 0<this.BLt}Kj(t){if(!this.Ykt()){const s=this.$k(),i=(this.BLt+=t?1:-1,this.BLt<0&&(this.BLt=0),this.$k());if(!s&&i)console.log("[Construct] Suspending"),this.mBt(),this.K_t.dispatchEvent(V.Mr(V.Event,"suspend")),this.N4(V.CX.IX._X.xBt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.VLt=e,this.QLt=e,this.ZLt=0,this.t5t=0,this.s5t=0,this.i5t=0,this.h5t=0,this.e5t=0,this.K_t.dispatchEvent(V.Mr(V.Event,"resume")),this.N4(V.CX.IX._X.GBt,null,null),this.O1t()||this.ZK(e)}}}Dj(t){this.M5t.Rc(t)}Nj(t){this.v5t.Rc(t)}Lj(t){this.x5t.Rc(t)}Oj(t){this.M5t.L0(t)}Wj(t){this.v5t.L0(t)}Bj(t){this.x5t.L0(t)}TBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Y4(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.ZK(),s&&U.AddIndividualBehaviorTickTime(t.z6(),performance.now()-i)),e}_Bt(){const t=this.X4();this.M5t.Ad(!0);for(const s of this.M5t)this.TBt(s,t);this.M5t.Ad(!1)}IBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Vj(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.GTt(),s&&U.AddIndividualBehaviorTickTime(t.z6(),performance.now()-i)),e}CBt(){const t=this.X4();this.v5t.Ad(!0);for(const s of this.v5t)this.IBt(s,t);this.v5t.Ad(!1)}RBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Z4(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.wGt(),s&&U.AddIndividualBehaviorTickTime(t.z6(),performance.now()-i)),e}ABt(){const t=this.X4();this.x5t.Ad(!0);for(const s of this.x5t)this.RBt(s,t);this.x5t.Ad(!1)}*EBt(){const t=this.X4();this.M5t.Ad(!0);for(const s of this.M5t){const i=this.TBt(s,t);V.ta(i)&&(yield*i)}this.M5t.Ad(!1)}*PBt(){const t=this.X4();this.v5t.Ad(!0);for(const s of this.v5t){const i=this.IBt(s,t);V.ta(i)&&(yield*i)}this.v5t.Ad(!1)}*FBt(){const t=this.X4();this.x5t.Ad(!0);for(const s of this.x5t){const i=this.RBt(s,t);V.ta(i)&&(yield*i)}this.x5t.Ad(!1)}async ZK(a,t,s){this.kLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.CD(),f=this.sL();if(this.PLt&&(!this.$k()||t||l)){let t=performance.now(),s=(this.FLt=!0,this.kBt(a||0),this.s5t++,this.DBt(),this.OBt()),i=(this.mvt()&&await s,this.K_t.d0(this.w5t.pretick)),e=(i instanceof Promise&&await i,this.eY(this.b5t.pretick),this.LBt()),h=(this.mvt()&&await e,this.BBt()&&await this.NBt(),c.FD()&&await this.WBt(),this.jBt()),r=(this.mvt()&&await h,c.TD()),n=r.W$(),o=!1;if(-1!==n&&(r.j$(),f.N$()!==n)){const d=this.sL().aX(n);this.fk()&&(o=!0,await d)}this.Cf("canvas","update-html-layer-dom-state",{layersDomState:r.SJ().filter(t=>t.cB()).map(t=>t.M9())}),u&&this.U3(),o&&this.Cf("canvas","cleanup-html-layers"),this.Ykt()&&(await this.tBt(),this.Qk()>=this.K5t())?this.iBt():(this.$k()||l||this.gBt(),this.ALt++,this.ELt++,this.FLt=!1,this.e5t+=performance.now()-t)}}async OBt(){const t=this.r0t,s=this.X4();this.p5(),t.u5(!0),this.G1t(this.TD()),s&&U.StartMeasuringTime(),this.mvt()?await t.ept():t.Z1t(),s&&U.AddEventsTime(),this.T1t(),t.u5(!1),this.p5(),t.u5(!0)}async LBt(){const t=this.r0t,s=this.X4(),i=this.mvt(),e=this.K_t,h=this.w5t,r=this.b5t;s&&U.StartMeasuringTime(),i?await this.VBt(this.EBt()):this._Bt(),i?await this.VBt(this.PBt()):this.CBt(),s&&U.AddBehaviorTotalTickTime(),s&&U.StartMeasuringTime(),i?await this.UBt(h.tick):e.dispatchEvent(h.tick),s&&U.AddPluginTotalTickTime(),t.u5(!1),this.eY(r.tick)}async jBt(){const t=this.r0t,s=this.K_t,i=this.w5t,e=this.b5t,h=this.X4(),r=this.mvt();h&&U.StartMeasuringTime(),r?await t._1t(this.Uq):t.x1t(this.Uq),h&&U.AddEventsTime(),this.qOt.y3t(),this.DBt(),this.DLt=!1,t.u5(!0),h&&U.StartMeasuringTime(),r?await this.VBt(this.FBt()):this.ABt(),h&&U.AddBehaviorTotalTickTime(),h&&U.StartMeasuringTime(),r?await this.UBt(i.tick2):s.dispatchEvent(i.tick2),h&&U.AddPluginTotalTickTime(),t.u5(!1),this.eY(e.tick2),r&&await t.L1t()}DBt(){if(0!==this.dLt.size){const t=this.K_t;t.Kf(!0);for(const s of this.pLt)s.J1t().Dft(this.dLt);this.pLt.clear(),this.r0t.rpt(this.dLt);for(const i of this.dLt)i.vr();this.dLt.clear(),t.Kf(!1)}}async WBt(){let t=this.CD(),s=0;for(;t.FD()&&s++<10;)await this.HBt(t.TY())}kBt(t){let s=0;if(this.Ykt())s=1/this.Z5t(),this.ULt=s,this.HLt=s;else if(0!==this.VLt){const i=Math.max(t-this.VLt,0);.5<(s=i/1e3)&&(s=0),this.ULt=s,this.HLt=V.Cr(s,this.qLt,this.JLt)}this.VLt=t,this.zLt=this.HLt*this.qCt,this.$Lt.Rc(this.zLt),this.XLt.Rc(s*this.qCt),this.YLt.Rc(this.HLt);for(const[e,h]of this.KLt)h.Rc(this.HLt*e.iD());this.yLt&&this.yLt.FDt(),1e3<=t-this.QLt&&(this.QLt+=1e3,1e3<=t-this.QLt&&(this.QLt=t),this.t5t=this.ZLt,this.ZLt=0,this.i5t=this.s5t,this.s5t=0,this.h5t=Math.min(this.e5t/1e3,1),this.e5t=0,this.yLt&&this.yLt.PDt(),this.qOt.d3t(),this.X4())&&U.Update1sPerfStats()}eRt(t,s){if(s){if(!this.KLt.has(t)){const i=V.Mr(V.N0);i.H0(this.$Lt),this.KLt.set(t,i)}}else this.KLt.delete(t)}hRt(t){const s=this.KLt.get(t);return s?s.ri():this.Qk()}async HBt(t){const s=this.K_t,i=this.CD(),e=i.TD();await e.OX(),e.sX(t,this.eM()),e===t&&this.r0t.NX(),this.qOt.y3t(),this.DBt(),s.dispatchEvent(this.w5t.beforelayoutchange),V.Qf.g0(!0),await t.q$(e,this.eM()),V.Qf.g0(!1),await t.eX(!1),s.dispatchEvent(this.w5t.layoutchange),this.tO(),this.DLt=!0,this.p5(),this.sBt()}tO(){this.MLt=!0}vDt(){return this.yLt?this.yLt.vDt():null}xDt(){return this.yLt?this.yLt.xDt():null}eM(){return this.yLt?this.yLt.eM():null}U3(){const i=this.yLt;if(i&&!i.bDt()){const e=this.eM(),t=e.ZE(),h=t&&e.Lb(),r=t&&e.XS();if(h&&e.BE(),this.MLt||this.Ykt()){const n=this.Uq.TD(),o=(this.ZLt++,e.AE(),this.X4());o&&U.StartMeasuringTime(),this.MLt=!1;let t=null,s=(h&&(t=i.ODt().TR(),e.KE(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.F$())),e.StartMeasuringRenderPassTime(0,1)),this.ZJ()&&"low"===i.iq()?e.UA(i.z9(),i.J9()):e.HA(),this.zBt(this.eM(),n),t&&e.QE(t),r&&(e.StopMeasuringRenderPassTime(),this.yLt.LDt(s)),e.Rb(),o&&(U.AddDrawCallsTime(),U.UpdateInspectHighlight()),i&&i.NDt()}else e.Pb()}}XX(t){return"low"===this.sL().iq()||t.Lb()&&(this.sq()||this.ZJ())}zBt(s,i){s.rw(),s.oE(),s.QA(1,1,1,1),s.VE(null),s.eE(null),s.PE(this.ZJ()),this.XX(s)&&i.qX(s);const e=i.N$();for(let t=1;t<e;++t)i.QX(s,t),s.XS()&&s.Restart();this.XX(s)||i.qX(s),i.ZX(s)}N4(t,s,i){if(!this.PLt)return!1;let e=!this.FLt&&!this.r0t.j1t(),h=0;e&&(h=performance.now());const r=this.X4(),n=(r&&this.cV(!1),this.r0t.A1t(this.Uq,t,s,i));if(e){const o=performance.now()-h;this.e5t+=o,r&&U.AddTriggersTime(o)}return r&&this.cV(!0),n}oGt(t,s,i){if(!this.mvt())return this.N4(t,s,i);if(this.O1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.FLt||this.r0t.j1t())return this.r0t.F1t(this.Uq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async j4(t,s,i){if(!this.mvt())return this.N4(t,s,i);if(!this.PLt)return!1;if(this.O1t())return this.r0t.k1t(t,s,i);if(!this.TD())return this.r0t.E1t(t,s,i);let e=performance.now(),h=this.r0t.F1t(this.Uq,t,s,i),r=h.next();for(;!r.done;)await this.C1t(r.value),r=h.next();return this.$k()||this.r0t.j1t()||(await this.r0t.L1t(),this.kLt&&!this.FLt&&this.gBt()),this.e5t+=performance.now()-e,r.value}aGt(t,s,i){const e=this.X4(),h=(e&&this.cV(!1),this.r0t.B1t(this.Uq,t,s,i));return e&&this.cV(!0),h}lGt(t,s,i){return this.r0t.N1t(this.Uq,t,s,i)}uGt(t){return this.NLt.Rc(t)}G1t(t){this.rLt.push(t)}T1t(){if(!this.rLt.length)throw new Error("layout stack empty");this.rLt.pop()}zD(){return this.rLt.length?this.rLt.at(-1):this.TD()}Yk(t){return t&&-1!==t.iD()?this.HLt*t.iD():this.zLt}YK(){return this.zLt}KK(){return this.HLt}Zk(){return this.ULt}iD(){return this.qCt}eD(t){(isNaN(t)||t<0)&&(t=0),this.qCt=t}gD(t){this.qLt=Math.max(t,0)}mD(){return this.qLt}wD(t){this.JLt=Math.max(t,0)}SD(){return this.JLt}hD(){return this.t5t}nD(){return this.i5t}aD(){return this.h5t}JBt(){return this.jLt}Qk(){return this.$Lt.ri()}qBt(){return this.XLt.ri()}sD(){return this.YLt.ri()}Jtt(){return this.ALt}$Bt(){return this.ELt}XBt(){return this.uLt}rk(){return this.ROt}ak(){return this.AOt}YBt(){return this.EOt}KBt(){return this.POt}uk(){return this.FOt}VD(t){if(this.r5t)throw new Error("cannot call while loading state - wait until afterload event");return this.fLt.get(t)||null}AX(){this.fLt.clear();for(const t of this.QOt)if(!t.cJ())for(const s of t.e5())this.fLt.set(s.u4(),s)}rOt(){return"preview"===this.gOt}X4(){return this.vOt}KO(){return this.gOt}ZO(){return"nwjs"===this.KO()||this.yOt}oOt(){return"cordova"===this.gOt}ZBt(){return"Android"===V.fi.di&&("cordova"===this.gOt||"playable-ad-single-file"===this.gOt||"playable-ad-zip"===this.gOt||"instant-games"===this.gOt)}QBt(){return this.IU}t4t(){return this.SOt}QO(){return this.wOt}s4t(){return this.bOt}sk(){return this.qOt}HTt(){return this.JOt.HTt()}zTt(){return this.JOt.zTt()}ZJ(){return this.SLt}i4t(){return this.eM().BS(this.UJ())}DS(t){return this.eM().DS(t||this.UJ())}e4t(){return this.DLt}h4t(t){this.bLt!==(t=!!t)&&(this.bLt=t,this.CD().IY(),this.tO())}wk(){return this.bLt}r4t(t){if(!this.ZOt.has(t)){const i=()=>this.n4t(t);this.ZOt.set(t,i),t.h0().addEventListener("animationframeimagechange",i)}const s=this.Qg.qg(t);return s.gy()||s.Sy().then(()=>this.tO()),s}n4t(t){this.Qg.Kg(t)}YOt(t){const s=[];for(const i of t.oCt())for(const e of i.gW()){const h=e.vW();s.push({source:e,width:h.Fm(),height:h.Um(),tag:e.VW()})}return{uy:s}}async KOt(t){const s=V.Mr(V.Pd),i=[],h=new Map;for(const n of t.oCt())for(const o of n.gW()){const a=o.vW().f_t();h.has(a)||(h.set(a,null),i.push(s.Rc(async()=>{const t=await a.eH();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.oCt())for(const u of l.gW())e.push(s.Rc(async()=>{const t=u.vW(),s=h.get(t.f_t()),i=await t.d_t(s),e=await createImageBitmap(i);return{by:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{uy:r}}o4t(t){this.n5t=t,this.o5t=!1}a4t(){this.n5t="",this.o5t=!0}l4t(t){this.a5t=t}u2t(t){this.iN=t}u4t(){return this.l5t}BBt(){return!!(this.n5t||this.o5t||this.a5t||null!==this.iN)}async NBt(){if(this.n5t&&(this.p5(),await this.c4t(this.n5t),this.f4t()),this.a5t&&(await this.d4t(this.a5t),this.f4t(),this.X4())&&U.StepIfPausedInDebugger(),this.o5t){const t=await this.p4t();this.l5t=t,await this.j4(V.CX.IX._X.m4t,null),this.l5t="",this.f4t()}if(null!==this.iN){this.p5();try{await this.g4t(this.iN),this.l5t=this.iN,await this.j4(V.CX.IX._X.y4t,null),this.l5t=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.j4(V.CX.IX._X.S4t,null)}this.f4t()}}f4t(){this.n5t="",this.o5t=!1,this.a5t="",this.iN=null}pL(){return this.u5t||(this.u5t=localforage.Ni({name:"c3-localstorage-"+this.YBt(),description:this.rk()})),this.u5t}w4t(){return this.c5t||(this.c5t=localforage.Ni({name:"c3-savegames-"+this.YBt(),description:this.rk()})),this.c5t}async c4t(t){const s=await this.p4t();try{await this.w4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.l5t=s,await this.j4(V.CX.IX._X.m4t,null),this.l5t=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.j4(V.CX.IX._X.b4t,null)}}async d4t(t){try{const s=await this.w4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.g4t(s),this.l5t=s,await this.j4(V.CX.IX._X.y4t,null),this.l5t=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.j4(V.CX.IX._X.S4t,null)}}async p4t(){const t={c3save:!0,version:1,rt:{time:this.Qk(),timeRaw:this.qBt(),walltime:this.sD(),timescale:this.iD(),tickcount:this.Jtt(),next_uid:this.cLt,running_layout:this.TD().wJ(),start_time_offset:Date.now()-this.jLt},types:{},layouts:{},events:this.r0t.Lq(),timelines:this.NQ.Lq(),user_script_data:null};for(const i of this.QOt)i.cJ()||i.RCt()||(t.types[i.wJ().toString()]=i.Lq());for(const e of this.Uq.ED())t.layouts[e.wJ().toString()]=e.Lq();const s=this.M4t("save");return s.saveData=null,await this.xX(s),t.user_script_data=s.saveData,JSON.stringify(t)}yX(){return this.r5t}async g4t(t){const s=this.CD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.c2t(),this.K_t.dispatchEvent(V.Mr(V.Event,"beforeload"));for(const a of this.cBt()){const l=a.KB();l.RCt()||a.QY()}let e=i.rt,h=(this.$Lt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.XLt.Set(e.timeRaw),this.YLt.Set(e.walltime),this.qCt=e.timescale,this.ALt=e.tickcount,this.jLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.r5t=!0);if(h!==this.TD().wJ()){const u=s.wY(h);if(!u)return;await this.HBt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.wY(d);p&&p.Bq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),S=this.Qj(y);!S||S.cJ()||S.RCt()||S.Bq(g,n)}for(const w of this.Uq.ED())for(const b of w.P5())b.Nq();if(this.p5(),this.AX(),this.r5t=!1,r){for(const M of this.cBt())M.SX();for(const[v,x]of Object.entries(i.types)){const G=parseInt(v,10),T=this.Qj(G);!T||T.cJ()||T.RCt()||T.PCt(x)}}this.cLt=e.next_uid,this.r0t.Bq(i.events);for(const _ of this.QOt)if(!_.cJ()&&_.a4())for(const I of _.e5()){const C=I.f4();for(const R of _.z$().EX())if(R!==_){const A=R.e5();if(C<0||C>=A.length)throw new Error("missing sibling instance");I.PX(A[C])}}this.NQ.Bq(i.timelines),s._Y(),s.IY();for(const E of n)E.LRt();this.f2t(),this.K_t.dispatchEvent(V.Mr(V.Event,"afterload")),this.eY(this.M4t("afterload"));for(const[P,F]of Object.entries(i.types)){const k=parseInt(P,10),D=this.Qj(k);D&&D.ECt()}const o=this.M4t("load");o.saveData=i.user_script_data,await this.xX(o),this.tO()}v4t(t,s){return t.qD().NEt()-s.qD().NEt()}TPt(t,s){t.qD()&&!this.D5t.has(t)&&(this.D5t.set(t,s),this.O5t.push(t))}c2t(){this.D5t=new WeakMap,V.Yn(this.O5t)}f2t(t="full",s=null){this.O5t.sort(this.v4t);for(const i of this.O5t)i.sK(this.D5t.get(i),t,s);for(const e of this.O5t)e.VRt(this.D5t.get(e),t,s);this.c2t()}async x4t(t){const s=await Promise.all(t.map(async t=>{const s=this.oOt()&&this.W7.n7();if(s||"playable-ad-single-file"===this.KO()){const i=await this.W7.Lo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.G5t.G4t(s)}T4t(t,s){this.G5t._4t(t,s)}I4t(t,s){this.G5t.C4t(t,s)}R4t(t,s,i,e){return this.G5t.R4t(t,s,i,null,null,e)}A4t(t,s,i,e){return this.G5t.A4t(t,s,i,e)}E4t(){return this.G5t.P4t()}WD(t,s){this.Cf("runtime","invoke-download",{url:t,filename:s})}async $Dt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.fk()){const n=await this.iO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async F4t(t){return this.fk()?this.iO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}k4t(){this.m5t||(this.m5t=!0,this.Cf("runtime","enable-device-orientation"))}D4t(){this.g5t||(this.g5t=!0,this.Cf("runtime","enable-device-motion"))}GD(){return this.WLt()}O4t(t){this.WLt=t}C5t(){const t=this.eM();return{fps:this.hD(),tps:this.nD(),cpu:this.aD(),gpu:this.uD(),layout:this.TD()?this.TD().yf():"",renderer:t.Lb()?t.oP():t.GetAdapterInfoString()}}O1t(){return!!this.X4()&&U.O1t()}C1t(t){return this.mvt()?U.C1t(t):Promise.resolve()}uyt(){return!!this.mvt()&&U.BreakNext()}L4t(t){this.xOt=!!t,this.B4t()}N4t(){return this.xOt}mvt(){return this.GOt}cV(t){t?this.TOt--:this.TOt++,this.B4t()}B4t(){this.GOt=this.X4()&&this.xOt&&0===this.TOt}Cmt(){return this.X4()&&U.Cmt()}K9(){return this.X4()&&this.eM().ZE()&&U.K9()}async VBt(t){if(t)for(const s of t)await this.C1t(s)}UBt(t){return this.VBt(this.K_t.m0(t))}Adt(t){return this.r0t.Adt(t.name,t.params)}hO(t){if(this.fk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}wL(){return this.P5t}M4t(t){const s=V.Mr(V.Event,t,!1);return s.runtime=this.P5t,s}J5t(){this.P5t=new self.$F(this),this.b5t={pretick:this.M4t("pretick"),tick:this.M4t("tick"),tick2:this.M4t("tick2")}}X5t(){const t={};for(const s of this.QOt)t[s.e1t()]={value:s.jL(),enumerable:!0,writable:!1};this.P5t.Tk(t)}Y5t(){const t={};for(const s of this.Ck().c1t())t[s.e1t()]=s.h1t();this.P5t._k(t)}DD(){return this.k5t}OL(t,s){this.F5t.set(t,s)}D5(t){return this.F5t.get(t)}UO(t){if(!(t instanceof self.zL))throw new TypeError("expected IObjectClass");const s=this.D5(t);if(s&&s instanceof V.Klt)return s;throw new Error("invalid IObjectClass")}t5(t){if(!(t instanceof self.XB))throw new TypeError("expected IInstance");const s=this.D5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}JD(t){if(!(t instanceof self.F6))throw new TypeError("expected IWorldInstance");const s=this.D5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.aOt.Px,self.C3_InitRuntime=(t,s)=>t.YCt(s)}{const La=self.Ns;La.T5t=class extends La.Sr{constructor(t,s){super(),this.Tf=t,this.W4t=new Map,this.j4t=0,this.V4t=s.inputPort,s.outputPort.onmessage=t=>this.U4t(t),this.H4t=s.maxNumWorkers,this.z4t=1,this.J4t=!1,this.q4t=!1}P4t(){return this.H4t}G4t(t){this.V4t.postMessage({type:"_import_scripts",scripts:t})}_4t(t,s){this.V4t.postMessage({type:"_send_blob",blob:t,id:s})}C4t(t,s){this.V4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}R4t(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.j4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.W4t.set(n,{resolve:t,progress:e,reject:s,$4t:!1,maxWorkerNum:r})});return h&&h.D0(()=>this.X4t(n)),this.V4t.postMessage(o,i),this.Y4t(),a}A4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.j4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.V4t.postMessage(r,i)}X4t(t){const s=this.W4t.get(t);s&&(s.$4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.V4t.postMessage({type:"_cancel",jobId:t}))}U4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.K4t(e,s.result);break;case"progress":this.Z4t(e,s.progress);break;case"error":this.Q4t(e,s.error);break;case"ready":this.tNt();break;default:throw new Error(`unknown message from worker '${i}'`)}}K4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");i.$4t||i.resolve(s),this.W4t.delete(t)}Z4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");!i.$4t&&i.progress&&i.progress(s)}Q4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");i.$4t||i.reject(s),this.W4t.delete(t)}tNt(){this.J4t&&(this.J4t=!1,this.z4t++,this.z4t<this.H4t?this.Y4t():this.V4t.postMessage({type:"_no_more_workers"}))}sNt(){let t=0,s=[...this.W4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async Y4t(){if(!(this.z4t>=this.H4t||this.J4t||this.q4t||this.sNt()<=this.z4t))try{this.J4t=!0;const t=await this.Tf.iO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.U4t(t)}catch(t){this.q4t=!0,this.J4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.z4t} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(w,self.Ns),i=null,e="",h="",r=[],n="",o="",a="",M=b.Mr(b.sdt);b.CX.IX=class extends b.fxt{constructor(t){super(t),this.Y0t=this.Tf.Ck().lV(),this.Oft=this.Tf.Ck().jk(),this.iNt=0,this.eNt=0,this.hNt=new Map}vr(){super.vr()}tO(){this.Tf.tO()}N4(t){this.Tf.N4(t,null,null)}rNt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}nNt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.rNt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async oNt(t,s){if(s.length){this.iNt+=s.length;const i=[];for(const e of s)i.push(t.X$(e));await b.vo(i,()=>{this.eNt++}),this.eNt++,this.eNt===this.iNt&&(this.eNt=0,this.iNt=0,this.Tf.N4(b.CX.IX._X.aNt,null,null))}}T7(){return 0===this.iNt?1:this.eNt/this.iNt}lNt(t,s){for(const i of s)0===i.n5()&&t.Q$(i)}uNt(){return M}cNt(s){const i=this.Tf.Ck(),t=i.jk(),e=t.oV(),h=e.kk(),r=h.nV(),n=e.O0t(),o=t.aV(h),a=i.lV(),l=a.aV();if(l.Q0t(s),n)for(let t=0;t<s&&!l.SV();++t)i.dV(r),l.gV(t),h.pV(e,o),i.mV(r);else for(let t=0;t<s&&!l.SV();++t)l.gV(t),h.pV(e,o);return t.wV(),a.wV(),!1}*fNt(s){const i=this.Tf.Ck(),t=i.jk(),e=t.oV(),h=e.kk(),r=h.nV(),n=e.O0t(),o=t.aV(h),a=i.lV(),l=a.aV();if(l.Q0t(s),n)for(let t=0;t<s&&!l.SV();++t)i.dV(r),l.gV(t),yield*h.Myt(e,o),i.mV(r);else for(let t=0;t<s&&!l.SV();++t)l.gV(t),yield*h.Myt(e,o);return t.wV(),a.wV(),!1}dNt(){const s=this.Tf.Ck(),t=s.jk(),i=t.oV(),e=i.kk(),h=e.nV(),r=i.O0t(),n=t.aV(e),o=s.lV(),a=o.aV();if(r)for(let t=0;!a.SV();++t)s.dV(h),a.gV(t),e.pV(i,n)||a.zW(),s.mV(h);else for(let t=0;!a.SV();++t)a.gV(t),e.pV(i,n)||a.zW();return t.wV(),o.wV(),!1}*pNt(){const s=this.Tf.Ck(),t=s.jk(),i=t.oV(),e=i.kk(),h=e.nV(),r=i.O0t(),n=t.aV(e),o=s.lV(),a=o.aV();if(r)for(let t=0;!a.SV();++t){s.dV(h),a.gV(t);const l=yield*e.Myt(i,n);l||a.zW(),s.mV(h)}else for(let t=0;!a.SV();++t){a.gV(t);const u=yield*e.Myt(i,n);u||a.zW()}return t.wV(),o.wV(),!1}mNt(t,s,i){const e=this.Tf.Ck(),h=e.jk(),r=h.oV(),n=r.kk(),o=n.nV(),a=r.O0t(),l=h.aV(n),u=e.lV(),c=u.aV();if(c.uV(t),c.Q0t(i),i<s)if(a)for(let t=s;t>=i&&!c.SV();--t)e.dV(o),c.gV(t),n.pV(r,l),e.mV(o);else for(let t=s;t>=i&&!c.SV();--t)c.gV(t),n.pV(r,l);else if(a)for(let t=s;t<=i&&!c.SV();++t)e.dV(o),c.gV(t),n.pV(r,l),e.mV(o);else for(let t=s;t<=i&&!c.SV();++t)c.gV(t),n.pV(r,l);return h.wV(),u.wV(),!1}*gNt(t,s,i){const e=this.Tf.Ck(),h=e.jk(),r=h.oV(),n=r.kk(),o=n.nV(),a=r.O0t(),l=h.aV(n),u=e.lV(),c=u.aV();if(c.uV(t),c.Q0t(i),i<s)if(a)for(let t=s;t>=i&&!c.SV();--t)e.dV(o),c.gV(t),yield*n.Myt(r,l),e.mV(o);else for(let t=s;t>=i&&!c.SV();--t)c.gV(t),yield*n.Myt(r,l);else if(a)for(let t=s;t<=i&&!c.SV();++t)e.dV(o),c.gV(t),yield*n.Myt(r,l),e.mV(o);else for(let t=s;t<=i&&!c.SV();++t)c.gV(t),yield*n.Myt(r,l);return h.wV(),u.wV(),!1}yNt(i){const t=i.h5(),s=t.e5();if(0!==s.length){const e=this.Tf.Ck(),h=e.jk(),r=h.oV(),n=r.kk(),o=n.nV(),a=r.O0t(),l=h.aV(n),u=e.lV(),c=u.aV(),f=i.a4(),d=M.aV();if(b.eo(d,s),c.Q0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.SV();++t){e.dV(o);const p=d[t];i.h5().Yft(p),f&&p.kmt(),c.gV(t),n.pV(r,l),e.mV(o)}else{t.qft(!1);const m=t.$ft();b.Yn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.SV();++t){const g=d[t];m[0]=g,f&&g.kmt(),c.gV(t),n.pV(r,l)}}h.wV(),u.wV(),b.Yn(d),M.wV()}return!1}*SNt(i){const t=i.h5(),s=t.e5();if(0!==s.length){const e=this.Tf.Ck(),h=e.jk(),r=h.oV(),n=r.kk(),o=n.nV(),a=r.O0t(),l=h.aV(n),u=e.lV(),c=u.aV(),f=i.a4(),d=M.aV();if(b.eo(d,s),c.Q0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.SV();++t){e.dV(o);const p=d[t];i.h5().Yft(p),f&&p.kmt(),c.gV(t),yield*n.Myt(r,l),e.mV(o)}else{t.qft(!1);const m=t.$ft();b.Yn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.SV();++t){const g=d[t];m[0]=g,f&&g.kmt(),c.gV(t),yield*n.Myt(r,l)}}h.wV(),u.wV(),b.Yn(d),M.wV()}return!1}wNt(i,t){const s=i.h5(),e=s.e5();if(0!==e.length){const h=this.Tf.Ck(),r=h.jk(),n=h.$dt(),o=r.oV(),a=o.kk(),l=a.nV(),u=o.O0t(),c=r.aV(a),f=h.lV(),d=f.aV(),p=i.a4(),m=M.aV();b.Yn(m),d.Q0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Dbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.SV();++t){h.dV(l);const g=m[t][0];i.h5().Yft(g),p&&g.kmt(),d.gV(t),a.pV(o,c),h.mV(l)}else{s.qft(!1);const y=s.$ft();b.Yn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.SV();++t){const S=m[t][0];y[0]=S,p&&S.kmt(),d.gV(t),a.pV(o,c)}}r.wV(),f.wV(),b.Yn(m),M.wV()}return!1}*bNt(i,t){const s=i.h5(),e=s.e5();if(0!==e.length){const h=this.Tf.Ck(),r=h.jk(),n=h.$dt(),o=r.oV(),a=o.kk(),l=a.nV(),u=o.O0t(),c=r.aV(a),f=h.lV(),d=f.aV(),p=i.a4(),m=M.aV();b.Yn(m),d.Q0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Dbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.SV();++t){h.dV(l);const g=m[t][0];i.h5().Yft(g),p&&g.kmt(),d.gV(t),yield*a.Myt(o,c),h.mV(l)}else{s.qft(!1);const y=s.$ft();b.Yn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.SV();++t){const S=m[t][0];y[0]=S,p&&S.kmt(),d.gV(t),yield*a.Myt(o,c)}}r.wV(),f.wV(),b.Yn(m),M.wV()}return!1}MNt(t,s){let i=this.hNt.get(t);if(!i){if(!s)return null;i={vNt:null,xNt:new Map},this.hNt.set(t,i)}return i}GNt(t,s,i,e,h){s.Pk().Lyt(i,s.Lk()),e&&t.mV(h)}*TNt(t,s,i,e,h){yield*s.Pk().Byt(i,s.Lk()),e&&t.mV(h)}}}{const Ba=self.Ns;Ba.CX.IX.RIt=class extends Ba.Sr{constructor(t){super(),this.Cft=t,this.Tf=t.dO(),this.Kxt=t.qL()}Dxt(){}vr(){this.Cft=null,this.Tf=null,this.Kxt=null}}}{const Na=self.Ns;Na.CX.IX.Instance=class extends Na.Sr{constructor(t,s){super(),this.Ii=t,this.Cft=this.Ii.KB(),this.eGt=this.Cft.fMt(),this.Tf=this.Ii.dO()}vr(){this.Ii=null,this.Cft=null,this.eGt=null,this.Tf=null}}}{const x=self.Ns,Wa=[];x.CX.IX._X={_Nt(){return!0},TX(){return!0},LX(){return!0},xBt(){return!0},GBt(){return!0},$k(){return this.Tf.$k()},Sgt(){const t=this.Tf.qdt();return!t.E0t()&&!t.R0t()},INt(){let t=this.Tf.$dt(),s=t.vbt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Tf.Jtt();return s.set("TriggerOnce_lastTick",e),this.Tf.e4t()||i!==e-1},CNt(t){const s=this.Tf.$dt(),i=s.vbt(),e=i.get("Every_lastTime")||0,h=this.Tf.Qk(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},kpt(t){const s=this.Tf.Ck().m1t(t);return s&&s.kpt()},rOt(){return this.Tf.rOt()},vi(){return x.fi.vi},rBt(){return!0},RNt(){return!0},ANt(){return!0},m4t(){return!0},b4t(){return!0},y4t(){return!0},S4t(){return!0},ENt(t){return!!this.Tf.VD(t)},PNt(t){switch(t){case 0:return"browser"===x.fi.bi;case 1:return"iOS"===x.fi.di;case 2:return"Android"===x.fi.di;case 8:return"cordova"===x.fi.bi;case 9:return"scirra-arcade"===this.Tf.KO();case 10:return"nwjs"===x.fi.bi;case 13:return"windows-uwp"===this.Tf.KO();default:return!1}},FNt(t,s,i){const e=this.rNt(s,i);return e.test(t)},kNt(t,s,i){return x.compare(t,s,i)},DNt(t,s,i){return s<=t&&t<=i},ONt(t,s,i){return x.compare(t.jet(),s,i)},LNt(t){return!!t.jet()},BNt(t,s){const i=this.Tf.Qk();if(0!==t)return x.compare(i,t,s);{const e=this.Tf.$dt(),h=e.vbt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},NNt(t){return isNaN(t)},P2t(t,s,i){return x.Lr(x.Ar(t),x.Ar(i))<=x.Ar(s)},F2t(t,s){return x.Nr(x.Ar(t),x.Ar(s))},UMt(t,s,i){let e=x.Ar(t),h=x.Ar(s),r=x.Ar(i),n=!x.Nr(r,h);return n?!(!x.Nr(e,h)&&x.Nr(e,r)):x.Nr(e,h)&&!x.Nr(e,r)},WNt(t,s){return"number"==typeof t?0===s:1===s},jNt(t){return!!t},fpt(t){return t.toLowerCase()===this.Tf.Ck().gpt()},VNt(t,i,e,h){if(!t)return!1;let s=this.uNt(),r=s.aV(),n=t.h5(),o=(x.eo(r,n.e5()),n.Wft()&&x.Yn(n.Xft()),this.Tf.$dt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.Dbt(1,t),h=o.Dbt(3,t),x.compare(i,e,h)?++a:n.Jft(u)}x.Xn(r,a),n.Kft(r);const l=!!r.length;return x.Yn(r),s.wV(),t.Ayt(),l},UNt(t,s){if(!t)return!1;let i=this.uNt(),e=i.aV(),h=t.h5(),r=(x.eo(e,h.e5()),h.Wft()&&x.Yn(h.Xft()),this.Tf.$dt()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.Dbt(1,t)?++n:h.Jft(a)}x.Xn(e,n),h.Kft(e);const o=!!e.length;return x.Yn(e),i.wV(),t.Ayt(),o},HNt(t,i,e){if(!t)return!1;const s=t.h5(),h=s.e5();if(0===h.length)return!1;let r=this.Tf.$dt(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.Dbt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.i0t(n),t.Ayt(),!0},zNt(t,s){if(!t)return!1;const i=t.h5(),e=i.e5();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.i0t(h),t.Ayt(),!0},JNt(t){if(!t)return!1;const s=t.h5(),i=s.e5(),e=Math.floor(this.Tf.GD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.i0t(h),t.Ayt(),!0},qNt(t){if(!t)return!1;if(!t.n5())return!1;const s=t.h5();return s.qft(!0),t.Ayt(),!0},$Nt(t,i,e){if(!t)return!1;const h=t.h5(),s=h.e5(),r=this.Tf.kk(),n=r.e0t(),o=this.Tf.$dt().ybt();h.Wft()?(x.eo(Wa,s),h.Nft(),h.qft(!1)):n?(x.eo(Wa,h.Xft()),x.Yn(h.Xft())):(x.eo(Wa,h.$ft()),x.Yn(h.$ft()));for(let t=0,s=Wa.length;t<s;++t){const a=Wa[t];x.xor(a.qD().UN(i,e),o)?h.zft(a):h.Jft(a)}return t.Ayt(),x.xor(!!h.$ft().length,o)},XNt(s){if(!s)return!1;let i=s.cJ(),e=null,h=this.Tf.wCt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.KB().SMt(s)){e=r;break}}else if(r.KB()===s){e=r;break}}if(!e){const n=s.e5();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.h5();return t.i0t(e),s.Ayt(),!0},YNt(t){return this.Tf.mvt()?this.fNt(t):this.cNt(t)},KNt(){return this.Tf.mvt()?this.pNt():this.dNt()},ZNt(t,s,i){return this.Tf.mvt()?this.gNt(t,s,i):this.mNt(t,s,i)},Ed(t){return this.Tf.mvt()?this.SNt(t):this.yNt(t)},QNt(t,s,i){return this.Tf.mvt()?this.bNt(t,i):this.wNt(t,i)},t6t(t){return!!t&&t.oB()},s6t(t){return!!t&&t.pB()},i6t(t){return!!t&&t.cB()},e6t(t){return!!t&&!t.n5()},h6t(t,s,i){return!!t&&x.compare(100*t.ZA(),s,i)},r6t(t){const s=this.Tf.TD();return!!s&&s.k$(t)},aNt(){return!0},n6t(){return 0<this.iNt},o6t(t,s){const i=this.Tf._Rt();return!!i&&!!s&&!!i.Ylt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const ja=self.Ns,Va=[],Ua=[],Ha=ja.Mr(ja.Rect),za=ja.Mr(ja.ra),Ja=[];ja.CX.IX.prt={a6t(t,s){t.vht(s)},l6t(t,s){t.ge()&&"number"!=typeof s&&(s=parseFloat(s)),t.vht(t.jet()+s)},u6t(t,s){t.ge()&&t.vht(t.jet()-s)},c6t(t,s){t.vht(!!s)},f6t(t){t.vht(!t.jet())},d6t(t){t.vht(t.Jdt())},p6t(t){this.Tf.Ck().d1t(t)},m6t(t,s,i,e,h,r){if(t&&s){const n=this.Tf.a5(t,s,i,e,h,r);if(n){h&&s.l5(n);const o=this.Tf.Ck(),a=(o.u5(!0),n.c5(),o.u5(!1),new Map);n.yRt(a,t,h);for(const[l,u]of a)l.h5().Zft(u)}}},g6t(t,s,i,e,h,r){if(t&&s){const n=this.Tf.uBt(t);n&&ja.CX.IX.prt.m6t.call(this,n,s,i,e,h,r)}},lJ(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this.Tf.zD(),i=s;if(t){const p=this.Tf.CD().SY(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.$D(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.$D(u))){Ha.set(r,n,o,a);const m=i.lJ(h,Ha,e,t,c,f,d);h.h5().Kft(m),h.Ayt()}}}},y6t(){const t=this.Y0t;t.J0t()&&t.H0t().zW()},Dpt(t,s){const i=this.Tf.Ck().m1t(t);i&&(0===s?i.Dpt(!1):1===s?i.Dpt(!0):i.Dpt(!i.kpt()))},S6t(t){this.Tf.eD(t)},w6t(t,s){if(s<0&&(s=0),t){const i=t.h5(),e=i.e5();for(const h of e)h.eD(s)}},b6t(t){if(t){const s=t.h5(),i=s.e5();for(const e of i)e.S4()}},Hn(t,s){if(!(t<0)){const i=this.Tf.Ck().X1t();return s?i.ixt(t):i.hxt(t),!0}},Jk(t){return this.Tf.Ck().X1t().rxt(t),!0},M6t(){const t=this.Tf.Ck();return t.X1t().nxt(t.cpt()),!0},Hk(t){this.Tf.Ck().Hk(t)},async BDt(t,s,i,e,h,r){const n=this.Tf.sL();n&&(this.tO(),await n.BDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.Tf.j4(ja.CX.IX._X.RNt,null))},v6t(t,s){if(!(t<=0||s<=0)){this.Tf.lDt(t,s),this.Tf.zD().Rq();const i=this.Tf.sL();i&&("off"!==i.iDt()&&this.Tf.fBt(t,s),i.vC(i.hj(),i.rj(),!0),this.Tf.tO())}},x6t(t){const s=this.Tf.sL();s&&"off"!==s.iDt()&&(s.gDt(0!==t?"high":"low"),s.vC(s.hj(),s.rj(),!0))},eet(t){this.Tf.o4t(t)},G6t(){this.Tf.a4t()},T6t(t){this.Tf.l4t(t)},_6t(t){this.Tf.u2t(t)},I6t(t){},C6t(){for(const t of this.Tf.CD().ED())t.JX()},R6t(t){this.Tf.h4t(0!==t)},A6t(t,s){this.Tf.wD(1/t),this.Tf.gD(1/s)},E6t(t,s){this.Tf.gD(t),this.Tf.wD(s)},P6t(t){this.Tf.dD(["vsync","unlimited-tick","unlimited-frame"][t])},F6t(t,i){if(t){const s=t.h5(),e=s.e5(),h=Va,r=Ua,n=this.Tf.zD(),o=t.cJ(),a=t.ZSt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.qD();if(u){let t;t=o?l.ont(i+l.KB().KSt(a)):l.ont(i),h.push([u.$D().qF(),u.XD()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.YD(h[t][0]),d=h[t][1],p=f.KD();p[d]!==c&&((p[d]=c).qD().ZD(f,!0),f.QD(c),i=!0)}i&&this.Tf.tO(),ja.Yn(Va),ja.Yn(Ua)}}},NO(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Tf.sk().NO(t,s)},k6t(t){if(!this.Tf.yy()){const s=this.Tf.CD();s.FD()||s.kD(t)}},D6t(t){if(!this.Tf.yy()){const s=this.Tf.CD();if(!s.FD()){const i=s.SY(t);i&&s.kD(i)}}},O6t(t){if(!this.Tf.yy()){const s=this.Tf.CD();if(!s.FD()){const i=s.ED(),e=i.indexOf(s.TD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.kD(h)}}}},L6t(){if(!this.Tf.yy()){const t=this.Tf.CD();t.FD()||(t.kD(t.TD()),this.Tf.Ck().w1t())}},B6t(t,s){t&&t.rB(s)},N6t(t,s){t&&t.lB(s)},W6t(t,s){t&&t.fB(s)},j6t(t,s){t&&t.tE(s/100)},V6t(t,s){t&&t.mB(s)},U6t(t,s){t&&t.yB(s)},H6t(t,s){t&&t.v5(ja.Ar(+s))},z6t(t,s,i){t&&(t.kB(!0),t.x5(s),t.T5(i))},J6t(t){t&&t.kB(!1)},q6t(t,s,i){t&&t.HJ(s/100,i/100)},$6t(t,s){t&&t.WM(+s)},X6t(t,s){if(t){za.Oa(s),za.Cr();const i=t.PB();i.Ca(za)||(i.wa(za),this.tO())}},Y6t(t,s){t&&t._B(s)},K6t(t,s){t&&t.xM(s)},Z6t(t,s,i){if(t){const e=t.g5(),h=e.$ht(i);if(h){const r=1===s;h.Tmt()!==r&&(h.UPt(r),t.eW(),this.Tf.tO())}}},Q6t(t,s,i,e){if(t){const h=t.g5(),r=h.$ht(s);if(r){i=Math.floor(i);const n=r.PG().kG(i);if(n){"color"===n?(za.Oa(e),e=za):"percent"===n&&(e/=100);const o=h.rW(r.qF(),i,e);o&&r.Tmt()&&this.Tf.tO()}}}},tWt(t,s){t&&t.RB(s)},sWt(t){this.Tf.zD().b5(+t)},iWt(t){this.Tf.zD().v5(ja.Ar(+t))},eWt(t,s){const i=this.Tf.zD(),e=i.g5(),h=e.$ht(s);if(h){const r=1===t;h.Tmt()!==r&&(h.UPt(r),i.eW(),this.Tf.tO())}},hWt(t,s,i){const e=this.Tf.zD(),h=e.g5(),r=h.$ht(t);if(r){s=Math.floor(s);const n=r.PG().kG(s);if(n){"color"===n?(za.Oa(i),i=za):"percent"===n&&(i/=100);const o=h.rW(r.qF(),s,i);o&&r.Tmt()&&this.Tf.tO()}}},rWt(t,s){const i=this.Tf.zD();i.H5(t/100,s/100)},nWt(t){const s=this.Tf.zD();0===t?s.q5():s.X5()},oWt(t){const s=this.Tf.zD();s.x5(t)},aWt(t){const s=this.Tf.zD();s.T5(t)},lWt(t,s){const i=this.Tf.zD();i.x5(t),i.T5(s)},uWt(t){if(t){const s=t.rvt();if(s){const i=s.qD();if(i){const e=this.Tf.zD();e.x5(i.kM()),e.T5(i.LM())}}}},O5(t,s,i){const e=this.Tf.zD();try{e.O5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},B5(t,s,i){if(t){const e=this.Tf.zD();try{e.B5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},W5(t){if(t){const s=this.Tf.zD();s.W5(t)}},V5(){this.Tf.zD().V5()},async cWt(t){const s=this.Tf.TD();if(s&&t&&!this.Tf.yy()){const i=t.cJ()?t.vgt():[t];await this.oNt(s,i)}},async fWt(t){await ja.CX.IX.prt.cWt.call(this,this.Tf.uBt(t))},dWt(t){const s=this.Tf.TD();if(s&&t){const i=t.cJ()?t.vgt():[t];this.lNt(s,i)}},pWt(t){ja.CX.IX.prt.dWt.call(this,this.Tf.uBt(t))},mWt(){const t=this.Tf.TD();if(t){const s=t.J$();this.lNt(t,s)}},async gWt(t){const s=this.Tf.TD();t&&s&&!this.Tf.yy()&&await this.oNt(s,t.U$())},async yWt(t){const s=this.Tf.TD(),i=this.Tf.CD().SY(t);i&&s&&!this.Tf.yy()&&await this.oNt(s,i.U$())},Uk(t){const s=this.Oft.Wk();if(s)switch(s.Vk()){case 1:"number"==typeof t&&s.Uk(t);break;case 2:"string"==typeof t&&s.Uk(t);break;case 3:s.Uk(t)}},SWt(t,s,i){const e=this.MNt(t.toLowerCase(),!0),h=e.xNt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ja.first(h.values())||e.vNt);if(n){const o=0!==n.Bk(),a=0!==i.Bk();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},wWt(t,s){const i=this.MNt(t.toLowerCase(),!0),e=(i.vNt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ja.first(i.xNt.values())||i.vNt);if(e){const h=0!==e.Bk(),r=0!==s.Bk();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.vNt=s},bWt(t,s,i){const e=this.Tf,h=e.mvt()?Ja:null,r=(i=Math.floor(i),this.MNt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.xNt.get(s.toLowerCase());if(!n){if(!r.vNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.vNt,i=0}if(!n.fc())return h;if(0!==n.Bk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.Ck(),a=o.kk(),l=a.Fk(),u=0<l.length,c=(u&&(n.Lk()?o.dV(l):o.q1t(l)),[]),f=o.jpt(a);if(f){const p=f.Upt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].jet())}const d=n.Upt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Jdt());return e.mvt()?this.TNt(o,n,c,u,l):this.GNt(o,n,c,u,l)}}}{const G=self.Ns;G.CX.IX.mrt={MWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Tf.GD()*t:this.Tf.GD()*(s-t)+t},OSt(...t){const s=Math.floor(this.Tf.GD()*t.length);return t[s]},vWt(t,...s){return"number"!=typeof t&&(t=0),s[t=G.Cr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},xWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},GWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(G.Ar(t))},cos(t){return Math.cos(G.Ar(t))},tan(t){return Math.tan(G.Ar(t))},asin(t){return G.Er(Math.asin(t))},acos(t){return G.Er(Math.acos(t))},atan(t){return G.Er(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Cr(t,s,i){return G.Cr(t,s,i)},At(t,s,i,e){return G.kr(t,s,i,e)},angle(t,s,i,e){return G.Er(G.Or(t,s,i,e))},Ot(t,s,i){return G.Ot(t,s,i)},Hr(t,s,i){return G.Hr(t,s,i)},Jr(t,s,i,e){return G.Jr(t,s,i,e)},qr(t,s,i,e,h){return G.qr(t,s,i,e,h)},$r(t,s,i){return G.$r(t,s,i)},TWt(t,s){return G.Er(G.Lr(G.Ar(t),G.Ar(s)))},_Wt(t,s,i){return G.Er(G.Wr(G.Ar(t),G.Ar(s),i))},IWt(t,s,i){return G.Er(G.Br(G.Ar(t),G.Ar(s),G.Ar(i)))},CWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},RWt(t,s){return(t|=0)^1<<(0|s)},AWt(t,s){return(t|=0)&1<<(0|s)?1:0},EWt(){return"\n"},PWt(t){return"string"==typeof t?t.toUpperCase():""},FWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},kWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},DWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.pe(s),"i")):-1},OWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.pe(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(G.pe(s),"gi"),i):"string"==typeof t?t:""},LWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},BWt(t,s,i){const e=this.rNt(s,i);return t?t.search(e):-1},NWt(t,s,i,e){const h=this.rNt(s,i);return t?t.replace(h,e):""},WWt(t,s,i){const e=this.nNt(t.toString(),s,i);return e?e.length:0},jWt(t,s,i,e){e=Math.floor(e);const h=this.nNt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},VWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},UWt(t){return encodeURIComponent(t)},HWt(t){return decodeURIComponent(t)},Xk(){return this.Tf.YK()},zWt(){return this.Tf.KK()},timescale(){return this.Tf.iD()},JWt(){return(Date.now()-this.Tf.JBt())/1e3},qWt(){return Date.now()},time(){return this.Tf.Qk()},tickcount(){return this.Tf.Jtt()},$Wt(){return this.Tf.XBt()},fps(){return this.Tf.hD()},XWt(){return this.Tf.aD()},YWt(){return this.Tf.uD()},KWt(){return this.Tf.sL().lL()},ZWt(){return this.Tf.sL().cL()},QWt(){return this.Tf.pk()},t8t(){return this.Tf.gk()},s8t(){return this.Tf.pk()},i8t(){return this.Tf.gk()},e8t(){return this.Tf.zD().G5()},h8t(){return this.Tf.zD()._5()},r8t(){return this.Tf.zD().yf()},n8t(){return this.Tf.zD().M5()},o8t(){return G.Er(this.Tf.zD().GetAngle())},a8t(){return this.Tf.zD().Fm()},l8t(){return this.Tf.zD().Um()},u8t(){return 100*this.Tf.zD().LJ()},c8t(){return 100*this.Tf.zD().BJ()},f8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().Ol():0},d8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().Ll():0},p8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().Bl():0},m8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().Nl():0},g8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().width():0},y8t(t){const s=this.Tf.zD().$D(t);return s?s.OJ().height():0},S8t(t){const s=this.Tf.zD().$D(t);if(s){const i=s.OJ();return(i.Ol()+i.Bl())/2}return 0},w8t(t){const s=this.Tf.zD().$D(t);if(s){const i=s.OJ();return(i.Ll()+i.Nl())/2}return 0},b8t(t,s,i){const e=this.Tf.zD().$D(t);return e?e.BB(s,i)[0]:0},M8t(t,s,i){const e=this.Tf.zD().$D(t);return e?e.BB(s,i)[1]:0},v8t(t,s,i){const e=this.Tf.zD().$D(t);return e?e.VB(s,i)[0]:0},x8t(t,s,i){const e=this.Tf.zD().$D(t);return e?e.VB(s,i)[1]:0},G8t(t,s,i,e){const h=this.Tf.zD(),r=h.$D(t),n=h.$D(s);if(!r||!n||r===n)return i;const[o,a]=r.VB(i,e);return n.BB(o,a)[0]},T8t(t,s,i,e){const h=this.Tf.zD(),r=h.$D(t),n=h.$D(s);if(!r||!n||r===n)return e;const[o,a]=r.VB(i,e);return n.BB(o,a)[1]},_8t(t){const s=this.Tf.zD().$D(t);return s?s.gB():0},I8t(t){const s=this.Tf.zD().$D(t);return s?G.Er(s.wB()):0},C8t(t){const s=this.Tf.zD().$D(t);return s?100*s.ZA():0},R8t(t){const s=this.Tf.zD().$D(t);return s?s.SB():0},A8t(t){const s=this.Tf.zD().$D(t);return s?s.G5():0},E8t(t){const s=this.Tf.zD().$D(t);return s?s._5():0},P8t(t){const s=this.Tf.zD().$D(t);return s?100*s.MB():0},F8t(t){const s=this.Tf.zD().$D(t);return s?100*s.xB():0},k8t(t){const s=this.Tf.zD().$D(t);return s?s.NM():0},D8t(t){const s=this.Tf.zD().$D(t);return s?s.qF():-1},O8t(){const t=this.Tf.sL();return t?t.WDt():""},L8t(t){const s=this.Y0t;if(!s.J0t())return 0;if(t){const i=s.$0t(t);return i?i.qF():0}return s.H0t().qF()},B8t(){return this.Tf.u4t()},N8t(t,s,...i){const e=this.MNt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.xNt.get(s.toLowerCase());if(!h){if(!e.vNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.vNt}const r=h.Bk(),n=h.Ak();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.fc())return n;const o=this.Tf,a=o.Ck(),l=a.kk(),u=l.Fk(),c=0<u.length,f=(c&&(h.Lk()?a.dV(u):a.q1t(u)),h.Upt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Jdt());const d=h.Pk(),p=d.Ok(d.Fk(),h.Lk(),r,n,...i);return c&&a.mV(u),p},W8t(){return this.Tf.KF().MD()},j8t(){return this.T7()},renderer(){return this.Tf.xDt()?"webgpu":"webgl"},V8t(){return this.Tf.xDt()?this.Tf.xDt().GetAdapterInfoString():this.Tf.vDt().oP()},U8t(){let t=this.Tf.eM().Wb();return Math.round(100*t/1048576)/100},H8t(t,s,i){return G.sn(t,s,i)},z8t(t,s,i){return G.rn(t/100,s/100,i/100)},J8t(t,s,i,e){return G.hn(t/100,s/100,i/100,e/100)},q8t(t,s,i){return G.rn(t/255,s/255,i/255)},$8t(t,s,i,e){return G.hn(t/255,s/255,i/255,e/255)},X8t(){return this.Tf.rk()},Y8t(){return this.Tf.ak()},K8t(){return this.Tf.kk().P$().yf()},Z8t(){return this.Tf.kk().Wgt()}}}{const qa=self.Ns;qa.CX.Kht=class extends qa.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const $a=self.Ns,Xa=self.Ys,Ya=[],Ka=($a.CX.Kht.RIt=class extends $a.Yxt{constructor(t){super(t),this.vIt=t.oCt()}vr(){$a.Yn(this.vIt),super.vr()}Dxt(){for(const t of this.vIt)t.x_t(this.Tf)}$$(s){const i={Lv:this.Tf.yk()};return Promise.all(this.vIt.map(t=>t.G_t(s,i)))}tX(){for(const t of this.vIt)t.T_t()}K$(){this.Q8t()}Q8t(){for(const t of this.Cft.i5())t.B6().tjt()}Cbt(t){$a.CX.Kht.U2t(this,t)}dMt(t){Ya.push({tGt:null,sjt:!1,instances:[]})}ijt(t,s,i){const e=Ya.at(-1);e.tGt=t,e.sjt=i,e.instances.push(s)}pMt(t){const s=Ya.pop(),i=s.tGt,e=s.sjt;if(i){const h=new Map;for(const r of s.instances)r.yRt(h,i,e);for(const[n,o]of h)n.h5().Zft(o)}}ejt(t){const s=this.KB().fCt(t),i=this.dO(),e=s.__t(0);return e.vW().KV(i.eM(),{Lv:i.yk()}).then(()=>this.Q8t()),s}hjt(t){for(const s of this.Cft.i5())s.B6().rjt(t);this.KB().dCt(t)}njt(t,s){const i=this.Cft.uCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.A_t(s);e<0&&(e+=i.pW()+1);const h=$a.b_t.v_t(this.dO()),r=(i.I_t(h,e),this.dO());h.vW().KV(r.eM(),{Lv:r.yk()}).then(()=>this.Q8t());for(const n of this.Cft.i5())n.B6().ojt();return h}ajt(t,s){const i=this.Cft.uCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.pW())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.A_t(s);e<0&&(e+=i.pW()),i.C_t(e);for(const h of this.Cft.i5())h.B6().ojt()}Oxt(){return self.ljt}},new WeakMap);self.ljt=class extends self.zL{constructor(t){super(t),Ka.set(this,t.fMt())}ujt(t){Xa.Ce(t);const s=Ka.get(this).KB().uCt(t);return s?s.E_t():null}cjt(){return Ka.get(this).KB().lCt().map(t=>t.E_t())}fjt(t){return Xa.Ce(t),Ka.get(this).ejt(t).E_t()}djt(t){Xa.Ce(t),Ka.get(this).hjt(t)}pjt(t,s){if(Xa.Ce(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ka.get(this).njt(t,s).yW()}mjt(t,s){if(Xa.Ce(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ka.get(this).ajt(t,s)}}}{const T=self.Ns,Za=self.Ys,Qa=T.Mr(T.Rect),tl=T.Mr(T.fu),sl=T.Mr(T.fl),il=(T.CX.Kht.Instance=class extends T.RGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.gjt=this.Cft.uCt(e)||this.Cft.oCt()[0],this.yjt=T.Cr(h,0,this.gjt.pW()-1),this.Sjt=this.gjt.__t(this.yjt);const n=this.Sjt.vW(),o=(this.wjt=n.hx(),this.bjt=n.QC(),this.Mjt=n.jGt(),this.FGt(),t.mRt(2,!0),t.mRt(1,0<=this.gjt.oW()),this.vjt=Math.abs(this.gjt.oW()),this.xjt=this.gjt.cW(),this.Gjt=T.Mr(T.N0),this.Tjt=0,this._jt=0,this.Ijt="",this.Cjt=-1,this.Rjt="",this.Ajt=0,this.qD());this.Ejt=o._N(),o.rB(i),o.VN(r),o.Ent(this.Sjt.TW()),o.Fnt(this.Sjt.IW()),o.oPt(this.Sjt.BW()),o.gN(),1===this.Cft.aCt()&&1===this.Cft.oCt()[0].pW()||0===this.vjt||this.bGt()}vr(){this.gjt=null,this.Sjt=null,this.wjt=null,this.Gjt=null,super.vr()}LGt(){return this.Sjt.vW()}Oit(){return!0}Q7(){this.wjt=null}OGt(){this.tjt()}_v(t){const s=this.wjt;if(null!==s){t.eE(s);const i=this.qD();i.A6()?this.Pjt(i,t):this.Fjt(i,t)}}Fjt(t,s){let i=this.Ejt;this.Tf.wk()&&(i=t.tPt(i)),s.dE(i,this.Mjt)}Pjt(s,t){const i=s.SPt();if(s.bPt()){s.KEt(Qa,tl,!1);let t=tl;this.Tf.wk()&&(t=s.tPt(t)),i.Tv(s.E6(),t,this.Mjt),s.wPt(!1)}i._v(t)}kjt(){return this.Gjt.ri()}Djt(){return this.Ii.gRt(2)}Ojt(t){this.Ii.mRt(2,t)}Ljt(){return this.Ii.gRt(1)}Bjt(t){this.Ii.mRt(1,t)}Njt(){return this.Ii.gRt(4)}Wjt(t){this.Ii.mRt(4,t)}ZK(){this.Rjt&&this.jjt(),0<=this.Cjt&&this.Vjt();const t=this.vjt;if(this.Djt()&&0!==t){const s=this.Tf.Yk(this.Ii),i=(this.Gjt.Rc(s),this.kjt()),e=this.Sjt,h=e.xW()/t;if(!(i<this.Tjt+h)){const r=this.gjt,n=this.xjt,o=r.pW(),a=r.lW(),l=r.aW(),u=r.dW(),c=(this.Ljt()?this.yjt++:this.yjt--,this.Tjt+=h,this.yjt>=o&&(u?(this.Bjt(!1),this.yjt=o-2):!l&&(this._jt++,this._jt>=a)?this.Ujt(!1):this.yjt=n),this.yjt<0&&(u?(this.yjt=1,this.Bjt(!0),l||(this._jt++,this._jt>=a&&this.Ujt(!0))):!l&&(this._jt++,this._jt>=a)?this.Ujt(!0):this.yjt=n),this.yjt=T.Cr(this.yjt,0,o-1),r.__t(this.yjt));i>this.Tjt+c.xW()/t&&(this.Tjt=i),this.Hjt(e,c)}}else this.hGt()}Ujt(t){this.yjt=t?0:this.gjt.pW()-1,this.Ojt(!1),this.Ijt=this.gjt.yf(),this.Wjt(!0),this.Qxt("animationend",!1,{animationName:this.Ijt}),this.N4(T.CX.Kht._X.zjt),this.N4(T.CX.Kht._X.Jjt),this.Wjt(!1),this._jt=0}Hjt(i,e,t){if(i!==e){const s=this.qD(),h=i.vW(),r=e.vW(),n=h.Fm(),o=h.Um(),a=r.Fm(),l=r.Um(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.Wm(s.Fm()*(a/n)),o!==l&&s.km(s.Um()*(l/o))),s.Ent(e.TW()),s.Fnt(e.IW()),s.oPt(e.BW()),s.gN(),this.Sjt=e,this.wjt=r.hx(),this.bjt=r.QC(),this.Mjt=r.jGt(),this.f8().zht());for(let t=0,s=u.length;t<s;++t)u[t].ITt(i,e);this.Qxt("framechange",!1,{animationName:this.gjt.yf(),qjt:this.yjt}),this.N4(T.CX.Kht._X.$jt),this.Tf.tO()}}Xjt(t){this.Ojt(!0),this.Tjt=this.kjt(),1===t&&0!==this.yjt&&(this.Cjt=0,this.Njt()||this.Vjt()),this.bGt()}Yjt(t,s,i){this.Rjt=t,this.Ajt=s,this.bGt(),!i&&this.Njt()||this.jjt()}Kjt(){return this.gjt}Zjt(){return this.Rjt||this.gjt.yf()}rjt(t){T.Mh(t,this.Zjt())&&this.Yjt(this.Cft.pCt().yf(),1,!0)}Qjt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Cft.uCt(this.Zjt());if(!s)return;if(-1===(t=s.R_t(t)))return}isFinite(t)&&(this.Cjt=t,this.Njt()||this.Vjt())}ojt(){if(!this.Rjt&&-1===this.Cjt){const t=this.Sjt,s=this.gjt.__t(T.Cr(this.yjt,0,this.gjt.pW()-1));t!==s&&this.Hjt(t,s),1<this.gjt.pW()&&0<this.vjt&&this.bGt()}}tVt(){return this.yjt}sVt(){return this.Sjt.VW()}iVt(t){this.vjt=Math.abs(t),this.Bjt(0<=t),0<this.vjt&&this.bGt()}eVt(){return this.Ljt()?this.vjt:-this.vjt}hVt(t){"string"==typeof t&&-1===(t=this.gjt.R_t(t))||(t=T.Cr(Math.floor(t),0,this.gjt.pW()-1),this.xjt=t)}rVt(){return this.xjt}jjt(t){const s=this.Sjt,i=this.Cft.uCt(this.Rjt);if(this.Rjt="",i&&(i!==this.gjt||!this.Djt())){this.gjt=i,this.Bjt(0<=i.oW()),this.vjt=Math.abs(i.oW()),this.xjt=i.cW(),this.yjt=T.Cr(this.yjt,0,this.gjt.pW()-1),1===this.Ajt&&(this.yjt=0),this.Ojt(!0),this.Tjt=this.kjt();const e=this.gjt.__t(this.yjt);this.Hjt(s,e,t)}}Vjt(t){const s=this.Sjt,i=this.yjt;if(this.yjt=T.Cr(Math.floor(this.Cjt),0,this.gjt.pW()-1),this.Cjt=-1,t||i!==this.yjt){const e=this.gjt.__t(this.yjt);this.Hjt(s,e),this.Tjt=this.kjt()}}tjt(){const t=this.Sjt.vW();this.wjt=t.hx(),this.bjt=t.QC(),this.Mjt=t.jGt(),this.qD().wPt(!0)}hx(){return this.wjt}QC(){return this.bjt}jGt(){return this.Mjt}EW(){return this.Sjt.EW()}CMt(t){let s=this.Sjt,i=this.qD(),e=null;if("string"==typeof t)e=s.OW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.DW(t-1)}let h=i.vN();if(!e)return[i.kM(),i.LM(),h];if(sl.I(e.V_t()),i.A6()){const[r,n,o]=i.E6().Pv(sl.yl(),sl.wl());sl.set(r,n),h+=o}return sl.offset(-s.TW(),-s.IW()),sl.scale(i.Fm(),i.Um()),sl.rotate(i.GetAngle()),sl.offset(i.kM(),i.LM()),[sl.yl(),sl.wl(),h]}nVt(){return this.qD().fPt().Zu()}oVt(t){t=Math.floor(t);const s=this.qD(),i=s.fPt(),e=i.Zu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Ku();return[h[2*t+0]+s.kM(),h[2*t+1]+s.LM()]}GGt(){const s=T.CX.Kht.prt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.gjt.yf(),aVt:t=>this._Gt(s.lVt,t,0)},{name:t+".current-frame",value:this.yjt,aVt:t=>this._Gt(s.uVt,t)},{name:t+".is-playing",value:this.Djt(),aVt:t=>t?this._Gt(s.cVt,0):this._Gt(s.fVt)},{name:t+".speed",value:this.vjt,aVt:t=>this._Gt(s.dVt,t)},{name:t+".repeats",value:this._jt,aVt:t=>this._jt=t}]}]}qM(){const t={a:this.gjt.wJ()},s=(0!==this.Tjt&&(t.fs=this.Tjt),this.kjt()),i=(0!==s&&(t.at=s),0!==this.yjt&&(t.f=this.yjt),0!==this.vjt&&(t.cas=this.vjt),1!==this._jt&&(t.ar=this._jt),0!==this.xjt&&(t.rt=this.xjt),this.Djt()||(t.ap=this.Djt()),this.Ljt()||(t.af=this.Ljt()),this.qD());return i.jN()&&(t.ce=i.jN()),t}$M(t){const s=this.KB().cCt(t.a),i=(s&&(this.gjt=s),this.Tjt=t.hasOwnProperty("fs")?t.fs:0,this.Gjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.yjt=T.Cr(i,0,this.gjt.pW()-1),this.vjt=t.hasOwnProperty("cas")?t.cas:0,this._jt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.xjt=T.Cr(e,0,this.gjt.pW()-1),this.Ojt(!t.hasOwnProperty("ap")||!!t.ap),this.Bjt(!t.hasOwnProperty("af")||!!t.af),this.gjt.__t(this.yjt)),r=(this.Sjt=h,this.tjt(),this.qD());r.Ent(h.TW()),r.Fnt(h.IW()),r.oPt(h.BW()),r.VN(!!t.ce),this.Djt()&&this.bGt()}Zrt(t){const s=this.qD();switch(t){case 3:return s.jN();case 2:return T.Cr(this.yjt,0,this.gjt.pW()-1);case 1:return this.gjt.yf()}}hnt(t,s,i){const e=this.qD();switch(t){case 3:e.VN(!!s);break;case 2:{this.Ojt(!1);const h=this.gjt.pW()-1,r=s=T.Cr(s,0,h),n=this.gjt.__t(this.yjt),o=this.gjt.__t(r);this.Hjt(n,o,i),this.yjt=T.Cr(r,0,h);break}case 1:{this.Rjt=s,this.jjt(i);const a=this.gjt.pW();1<a&&0<this.gjt.oW()?this.bGt():this.hGt();break}}}Oxt(){return self.pVt}},new WeakMap),el=new Map([["current-frame",0],["beginning",1]]);self.pVt=class extends self.F6{constructor(){super(),il.set(this,self.XB.t4().B6())}AW(){return il.get(this).EW()}PW(t){return this.FW(t)[0]}kW(t){return this.FW(t)[1]}mVt(t){return this.FW(t)[2]}FW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return il.get(this).CMt(t)}LW(){return il.get(this).nVt()}NW(t){return Za.Ge(t),il.get(this).oVt(t)[0]}jW(t){return Za.Ge(t),il.get(this).oVt(t)[1]}WW(t){return Za.Ge(t),il.get(this).oVt(t)}gVt(){il.get(this).Ojt(!1)}yVt(t="current-frame"){Za.Ce(t);const s=el.get(t);if(void 0===s)throw new Error("invalid mode");il.get(this).Xjt(s)}SVt(t,s="beginning"){Za.Ce(t),Za.Ce(s);const i=el.get(s);if(void 0===i)throw new Error("invalid mode");const e=il.get(this);if(!e.KB().uCt(t))throw new Error(`animation name "${t}" does not exist`);e.Yjt(t,i)}ujt(t){Za.Ce(t);const s=il.get(this).KB().uCt(t);return s?s.E_t():null}get animation(){return il.get(this).Kjt().E_t()}get animationName(){return il.get(this).Zjt()}set qjt(t){Za.Ge(t),il.get(this).Qjt(t)}get qjt(){return il.get(this).tVt()}set wVt(t){Za.Ce(t),il.get(this).Qjt(t)}get wVt(){return il.get(this).sVt()}set bVt(t){Za.Ge(t),il.get(this).iVt(t)}get bVt(){return il.get(this).eVt()}set MVt(t){Za.Ge(t),il.get(this).hVt(t)}get MVt(){return il.get(this).rVt()}get imageWidth(){return il.get(this).LGt().Fm()}get imageHeight(){return il.get(this).LGt().Um()}vVt(){const t=il.get(this).LGt();return[t.Fm(),t.Um()]}async xVt(t){Za.nh(t,Blob);const s=il.get(this),i=s.dO(),e=s.LGt(),h=T.Mr(T.JTt);if(h.n_t(i,t),await h.KV(i.eM(),{Lv:i.yk()}),s.Gr())h.vr();else{e.o_t(h);const r=s.fMt();r.Q8t(),r.KB().h0().dispatchEvent(new T.Event("animationframeimagechange")),i.tO()}}GVt(t,s){Za.Ce(s),il.get(this).qD().XEt(!!t,s)}}}{const hl=self.Ns;hl.CX.Kht._X={TVt(t){return hl.Mh(this.Zjt(),t)},_Vt(t,s){return hl.compare(this.yjt,t,s)},IVt(t,s){if("string"!=typeof s)return!1;const i=this.Sjt.VW();return hl.compare(i.toLowerCase(),t,s.toLowerCase())},CVt(t,s){return hl.compare(this.eVt(),t,s)},Jjt(t){return hl.Mh(this.Ijt,t)},zjt(){return!0},$jt(){return!0},RVt(){return this.qD().Fm()<0},AVt(){return this.qD().Um()<0},EVt(){return!0},PVt(){return!0},jN(){return this.qD().jN()}}}{const rl=self.Ns;rl.CX.Kht.prt={FVt(t,s,i,e,h){if(t&&s){const[r,n]=this.CMt(i),o=this.Tf.a5(t,s,r,n,e,h);if(o){if(e&&s.l5(o),t.qL().IL()){const l=o.qD();l.v5(this.qD().GetAngle()),l.gN()}const a=this.Tf.Ck();a.u5(!0),o.c5(),a.u5(!1),t!==this.Tf.Ydt().KB()&&this.eGt.ijt(t,o,e)}}},fVt(){this.Ojt(!1)},cVt(t){this.Xjt(t)},lVt(t,s){this.Yjt(t,s)},uVt(t){this.Qjt(t)},dVt(t){this.iVt(t)},kVt(t){this.hVt(t)},DVt(s,t){try{0===s?this.fMt().ejt(t):this.fMt().hjt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},OVt(s,t,i){try{0===s?this.fMt().njt(t,i):this.fMt().ajt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},LVt(t){const s=this.qD(),i=s.Fm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Wm(e),s.gN())},BVt(t){const s=this.qD(),i=s.Um(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.km(e),s.gN())},b5(t){const s=this.Sjt,i=s.vW(),e=this.qD(),h=e.Fm()<0?-1:1,r=e.Um()<0?-1:1,n=i.Fm()*t*h,o=i.Um()*t*r;e.Fm()===n&&e.Um()===o||(e.vC(n,o),e.gN())},async NVt(t,s,i){const e=this.Sjt,h=e.vW(),r=this.qD(),n=this.Tf,o=this.eGt;if(h.S7()===t)0===s&&(r.vC(h.Fm(),h.Um()),r.gN()),this.N4(rl.CX.Kht._X.EVt);else{const a=rl.Mr(rl.JTt);try{if(await a.r_t(n,t),!a.J7())throw new Error("image failed to load");if(this.Gr())return void a.vr();await a.KV(n.eM(),{Lv:n.yk()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Gr()||this.N4(rl.CX.Kht._X.PVt))}this.Gr()?a.vr():(h.o_t(a),o.Q8t(),o.KB().h0().dispatchEvent(new rl.Event("animationframeimagechange")),n.tO(),0===s&&(r.vC(h.Fm(),h.Um()),r.gN()),await this.j4(rl.CX.Kht._X.EVt))}},WVt(t){this.qD().VN(t)},XEt(t,s){this.qD().XEt(0===t,s)},jVt(t){this.qD().xM(t),this.Tf.tO()}}}{const nl=self.Ns;nl.CX.Kht.mrt={VVt(){return this.tVt()},UVt(){return this.sVt()},HVt(){return this.gjt.pW()},zVt(){return this.gjt.yf()},JVt(){return this.eVt()},qVt(){return this.gjt.oW()},$Vt(t){return this.CMt(t)[0]},XVt(t){return this.CMt(t)[1]},YVt(t){return this.CMt(t)[2]},KVt(){return this.EW()},ZVt(){return this.LGt().Fm()},QVt(){return this.LGt().Um()},tUt(t){return this.oVt(t)[0]},sUt(t){return this.oVt(t)[1]},iUt(){return this.nVt()}}}{const ol=self.Ns;ol.CX.eUt=class extends ol.fxt{constructor(t){super(t)}vr(){super.vr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const al=self.Ns;al.CX.eUt.RIt=class extends al.Yxt{constructor(t,s){super(t),this.Jv="repeat",this.qv="repeat",s&&(this.Jv=i(s[0]),this.qv=i(s[1]))}vr(){super.vr()}Dxt(){this.vW().fO(this.Tf)}$$(t){return this.vW().KV(t,{Lv:this.Tf.yk(),Dv:this.Jv,Ov:this.qv})}tX(){this.vW().HI()}hUt(){return this.Jv}rUt(){return this.qv}}}{const ll=self.Ns,ul=self.Ys,cl=ll.Mr(ll.Rect),fl=ll.Mr(ll.fu),dl=ll.Mr(ll.Rect),pl=ll.Mr(ll.fu),I=(ll.CX.eUt.Instance=class extends ll.RGt{constructor(t,s){super(t),this.nUt=0,this.oUt=0,this.aUt=1,this.lUt=1,this.uUt=0,this.cUt=!1,this.fUt=0,this.dUt=0,this.pUt=0,this.mUt=0,this.gUt=0,this.yUt=null,s&&(this.qD().rB(!!s[0]),this.nUt=s[4],this.oUt=s[5],this.aUt=s[6],this.lUt=s[7],this.uUt=ll.Ar(s[8]),this.cUt=!!s[9],this.fUt=s[10],this.dUt=s[11],this.pUt=s[12],this.mUt=s[13],this.gUt=s[14])}vr(){this.SUt(),super.vr()}SUt(){this.yUt&&(this.yUt.vr(),this.yUt=null)}wUt(t,s,i){const e=this.LGt(),h=e.Fm(),r=e.Um(),n=this.nUt/h,o=this.oUt/r,a=this.uUt;dl.set(0,0,t/(h*this.aUt),s/(r*this.lUt)),dl.offset(-n,-o),0===a?i.Fu(dl):i.ku(dl,-a)}bUt(t,s=!0){if(this.cUt){const i=this.LGt();t.fw(),t._E(i.Fm()*this.aUt,i.Um()*this.lUt,this.fUt,this.dUt,this.pUt,this.mUt,this.gUt)}else s&&t.rw()}_v(t){const s=this.LGt(),i=s.hx();if(null!==i){this.bUt(t),t.eE(i);const e=s.Fm(),h=s.Um(),r=this.nUt/e,n=this.oUt/h,o=this.qD();dl.set(0,0,o.Fm()/(e*this.aUt),o.Um()/(h*this.lUt)),dl.offset(-r,-n),o.A6()?this.Pjt(o,t):this.Fjt(o,t)}}Fjt(t,s){let i=t._N();this.Tf.wk()&&(i=t.tPt(i)),0===this.uUt?s.Qw(i,dl):(pl.ku(dl,-this.uUt),s.dE(i,pl))}Pjt(i,t){const e=i.SPt();if(i.bPt()){i.KEt(cl,fl,!1);let t=fl,s=(this.Tf.wk()&&(t=i.tPt(t)),dl);0!==this.uUt&&(pl.ku(dl,-this.uUt),s=pl),e.Tv(i.E6(),t,s),i.wPt(!1)}e._v(t)}LGt(){return this.yUt||this.Cft.vW()}Oit(){return!0}hx(){return this.LGt().hx()}MUt(){this.qD().wPt(!0)}vUt(t){this.nUt!==t&&(this.nUt=t,this.Tf.tO(),this.MUt())}xUt(){return this.nUt}GUt(t){this.oUt!==t&&(this.oUt=t,this.Tf.tO(),this.MUt())}TUt(){return this.oUt}_Ut(t){this.aUt!==t&&(this.aUt=t,this.Tf.tO(),this.MUt())}IUt(){return this.aUt}CUt(t){this.lUt!==t&&(this.lUt=t,this.Tf.tO(),this.MUt())}RUt(){return this.lUt}AUt(t){this.uUt!==t&&(this.uUt=t,this.Tf.tO(),this.MUt())}EUt(){return this.uUt}PUt(t){this.cUt!==(t=!!t)&&(this.cUt=t,this.Tf.tO())}FUt(){return this.cUt}kUt(t){this.fUt!==t&&(this.fUt=t,this.FUt())&&this.Tf.tO()}DUt(){return this.fUt}OUt(t){this.dUt!==t&&(this.dUt=t,this.FUt())&&this.Tf.tO()}LUt(){return this.dUt}BUt(t){this.pUt!==t&&(this.pUt=t,this.FUt())&&this.Tf.tO()}NUt(){return this.pUt}WUt(t){this.mUt!==t&&(this.mUt=t,this.FUt())&&this.Tf.tO()}jUt(){return this.mUt}VUt(t){this.gUt!==t&&(this.gUt=t,this.FUt())&&this.Tf.tO()}UUt(){return this.gUt}qM(){const t={};return 0!==this.nUt&&(t.iox=this.nUt),0!==this.oUt&&(t.ioy=this.oUt),1!==this.aUt&&(t.isx=this.aUt),1!==this.lUt&&(t.isy=this.lUt),0!==this.uUt&&(t.ia=this.uUt),this.cUt&&(t.tr=!0),1!==this.fUt&&(t.trx=this.fUt),1!==this.dUt&&(t.try=this.dUt),1!==this.pUt&&(t.tra=this.pUt),.1!==this.mUt&&(t.trbmx=this.mUt),.1!==this.gUt&&(t.trbmy=this.gUt),t}$M(t){this.nUt=t.iox||0,this.oUt=t.ioy||0,this.aUt=t.hasOwnProperty("isx")?t.isx:1,this.lUt=t.hasOwnProperty("isy")?t.isy:1,this.uUt=t.ia||0,this.cUt=!!t.tr,this.fUt=t.hasOwnProperty("trx")?t.trx:1,this.dUt=t.hasOwnProperty("try")?t.try:1,this.pUt=t.hasOwnProperty("tra")?t.tra:1,this.mUt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.gUt=t.hasOwnProperty("trbmy")?t.trbmy:.1}GGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.xUt(),aVt:t=>this.vUt(t)},{name:t+".image-offset-y.name",value:this.TUt(),aVt:t=>this.GUt(t)},{name:t+".image-scale-x.name",value:100*this.IUt(),aVt:t=>this._Ut(t/100)},{name:t+".image-scale-y.name",value:100*this.RUt(),aVt:t=>this.CUt(t/100)},{name:t+".image-angle.name",value:ll.Er(this.EUt()),aVt:t=>this.AUt(ll.Ar(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.FUt(),aVt:t=>this.PUt(t)},{name:t+".x-random.name",value:100*this.DUt(),aVt:t=>this.kUt(t/100)},{name:t+".y-random.name",value:100*this.LUt(),aVt:t=>this.OUt(t/100)},{name:t+".angle-random.name",value:100*this.NUt(),aVt:t=>this.BUt(t/100)},{name:t+".blend-margin-x.name",value:100*this.jUt(),aVt:t=>this.WUt(t/100)},{name:t+".blend-margin-y.name",value:100*this.UUt(),aVt:t=>this.VUt(t/100)}]}]}Zrt(t){switch(t){case 4:return this.xUt();case 5:return this.TUt();case 6:return this.IUt();case 7:return this.RUt();case 8:return this.EUt();case 9:return this.FUt();case 10:return this.DUt();case 11:return this.LUt();case 12:return this.NUt();case 13:return this.jUt();case 14:return this.UUt()}}hnt(t,s){switch(t){case 4:this.vUt(s);break;case 5:this.GUt(s);break;case 6:this._Ut(s);break;case 7:this.CUt(s);break;case 8:this.AUt(s);break;case 9:this.PUt(!!s);break;case 10:this.kUt(s);break;case 11:this.OUt(s);break;case 12:this.BUt(s);break;case 13:this.WUt(s);break;case 14:this.VUt(s)}}Oxt(){return self.HUt}},new WeakMap);self.HUt=class extends self.F6{constructor(){super(),I.set(this,self.XB.t4().B6())}set zUt(t){ul.Ge(t),I.get(this).vUt(t)}get zUt(){return I.get(this).xUt()}set JUt(t){ul.Ge(t),I.get(this).GUt(t)}get JUt(){return I.get(this).TUt()}qUt(t,s){ul.Ge(t),ul.Ge(s);const i=I.get(this);i.vUt(t),i.GUt(s)}$Ut(){const t=I.get(this);return[t.xUt(),t.TUt()]}set XUt(t){ul.Ge(t),I.get(this)._Ut(t)}get XUt(){return I.get(this).IUt()}set YUt(t){ul.Ge(t),I.get(this).CUt(t)}get YUt(){return I.get(this).RUt()}KUt(t,s){ul.Ge(t),ul.Ge(s);const i=I.get(this);i._Ut(t),i.CUt(s)}ZUt(){const t=I.get(this);return[t.IUt(),t.RUt()]}set QUt(t){ul.Ge(t),I.get(this).AUt(t)}get QUt(){return I.get(this).EUt()}set t7t(t){ul.Ge(t),I.get(this).AUt(ll.Ar(t))}get t7t(){return ll.Er(I.get(this).EUt())}get imageWidth(){return I.get(this).LGt().Fm()}get imageHeight(){return I.get(this).LGt().Um()}vVt(){const t=I.get(this).LGt();return[t.Fm(),t.Um()]}set s7t(t){I.get(this).PUt(!!t)}get s7t(){return I.get(this).FUt()}set i7t(t){ul.Ge(t),I.get(this).kUt(t)}get i7t(){return I.get(this).DUt()}set e7t(t){ul.Ge(t),I.get(this).OUt(t)}get e7t(){return I.get(this).LUt()}h7t(t,s){ul.Ge(t),ul.Ge(s);const i=I.get(this);i.kUt(t),i.OUt(s)}r7t(){const t=I.get(this);return[t.DUt(),t.LUt()]}set n7t(t){ul.Ge(t),I.get(this).BUt(t)}get n7t(){return I.get(this).NUt()}set o7t(t){ul.Ge(t),I.get(this).WUt(t)}get o7t(){return I.get(this).jUt()}set a7t(t){ul.Ge(t),I.get(this).VUt(t)}get a7t(){return I.get(this).UUt()}l7t(t,s){ul.Ge(t),ul.Ge(s);const i=I.get(this);i.WUt(t),i.VUt(s)}u7t(){const t=I.get(this);return[t.jUt(),t.UUt()]}async c7t(t){ul.nh(t,Blob);const s=I.get(this),i=s.dO(),e=ll.Mr(ll.JTt);e.n_t(i,t),await e.KV(i.eM(),{Lv:i.yk(),Dv:s.fMt().hUt(),Ov:s.fMt().rUt()}),s.Gr()?e.vr():(s.SUt(),s.yUt=e,i.tO())}}}{const ml=self.Ns;ml.CX.eUt._X={EVt(){return!0},PVt(){return!0},f7t(){return this.FUt()}}}{const gl=self.Ns;gl.CX.eUt.prt={d7t(t){this.vUt(t)},p7t(t){this.GUt(t)},m7t(t){this._Ut(t/100)},g7t(t){this.CUt(t/100)},y7t(t){this.AUt(gl.Ar(t))},S7t(t){this.PUt(t)},w7t(t,s){this.kUt(t/100),this.OUt(s/100)},b7t(t){this.BUt(t/100)},M7t(t,s){this.WUt(t/100),this.VUt(s/100)},jVt(t){this.qD().xM(t),this.Tf.tO()},async NVt(t,s){if(!this.yUt||this.yUt.S7()!==t){const i=this.Tf,e=gl.Mr(gl.JTt);try{if(await e.r_t(i,t),!e.J7())throw new Error("image failed to load");if(this.Gr())return e.vr(),null;const h=await e.KV(i.eM(),{Lv:i.yk(),Dv:this.fMt().hUt(),Ov:this.fMt().rUt()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Gr()||this.N4(gl.CX.eUt._X.PVt))}this.Gr()?e.vr():(this.SUt(),this.yUt=e,i.tO(),await this.j4(gl.CX.eUt._X.EVt))}}}}{const yl=self.Ns;yl.CX.eUt.mrt={ZVt(){return this.LGt().Fm()},QVt(){return this.LGt().Um()},v7t(){return this.nUt},x7t(){return this.oUt},G7t(){return 100*this.aUt},T7t(){return 100*this.lUt},_7t(){return yl.Er(this.uUt)},I7t(){return 100*this.DUt()},C7t(){return 100*this.LUt()},R7t(){return 100*this.NUt()},A7t(){return 100*this.jUt()},E7t(){return 100*this.UUt()}}}{const Sl=self.Ns;Sl.CX.P7t=class extends Sl.fxt{constructor(t){super(t)}vr(){super.vr()}},Sl.CX.P7t.F7t=-2147483648,Sl.CX.P7t.k7t=1073741824,Sl.CX.P7t.D7t=536870912,Sl.CX.P7t.O7t=3758096384,Sl.CX.P7t.L7t=536870911}{const wl=self.Ns,bl=wl.CX.P7t.F7t,Ml=wl.CX.P7t.k7t,vl=wl.CX.P7t.D7t,xl=wl.CX.P7t.L7t;wl.CX.P7t.RIt=class extends wl.Yxt{constructor(t){super(t),this.B7t=[],this.N7t=!1,this.W7t=0,this.j7t=[],this.V7t=null}vr(){this.V7t.clear(),this.V7t=null,super.vr()}Dxt(){this.vW().fO(this.Tf)}$$(t){return this.vW().KV(t,{Lv:this.Tf.yk()})}tX(){this.vW().HI()}K$(){for(const t of this.KB().i5())t.B6().U7t()}Zxt(t,s,i){this.W7t=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.B7t.push({tEt:h,use:r,H7t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.B7t.push(null);for(const n of i){const o=n[0],a=n[1],l=n[2];this.j7t.push({name:o,type:a,z7t:l})}}J7t(t,s){this.N7t=!1,this.q7t(t,s)}q7t(i,e){if(!this.N7t){this.N7t=!0;for(let t=0,s=this.B7t.length;t<s;++t)this.B7t[t]&&(this.$7t(t,i,e,!1,!1,!1),this.$7t(t,i,e,!1,!1,!0),this.$7t(t,i,e,!1,!0,!1),this.$7t(t,i,e,!1,!0,!0),this.$7t(t,i,e,!0,!1,!1),this.$7t(t,i,e,!0,!1,!0),this.$7t(t,i,e,!0,!0,!1),this.$7t(t,i,e,!0,!0,!0))}}$7t(t,s,i,e,h,r){if(!(t<0||t>=this.B7t.length)){const n=this.B7t[t];if(n){const o=wl.Mr(wl.Ju,n.tEt,n.use);o.transform(s,i,0),r&&o.Uu(),e&&o.Wu(s/2),h&&o.Vu(i/2),n.H7t[e?1:0][h?1:0][r?1:0]=null,n.H7t[e?1:0][h?1:0][r?1:0]=o}}}X7t(t){if(-1===t)return null;const s=t&xl;if(s<0||s>=this.B7t.length)return null;const i=this.B7t[s];if(!i)return null;const e=t&bl?1:0,h=t&Ml?1:0,r=t&vl?1:0;return i.H7t[e][h][r]}Y7t(t){return!t||t.fc()}K7t(){return this.W7t}Z7t(s){this.V7t||(this.V7t=new Map);const t=this.V7t.get(s);if("number"==typeof t&&0<=t)return this.j7t[t];for(let t=0;t<this.j7t.length;t++)if(this.j7t[t].name===s)return this.V7t.set(s,t),this.j7t[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=_l),s.includes("v")&&(i|=Il),s.includes("d")&&(i|=Cl);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=_l),h.includes("v")&&(t|=Il),h.includes("d")&&(t|=Cl),e.push(t)}}return e};s;const Gl=self.Ns,Tl=self.Ys,_l=Gl.CX.P7t.F7t,Il=Gl.CX.P7t.k7t,Cl=Gl.CX.P7t.D7t,Rl=Gl.CX.P7t.O7t,Al=Gl.CX.P7t.L7t,El=Gl.Mr(Gl.Rect),Pl=Gl.Mr(Gl.Rect),Fl=Gl.Mr(Gl.Rect),kl=(Gl.CX.P7t.Instance=class extends Gl.RGt{constructor(t,s){super(t);const i=this.qD();this.Q7t=32,this.tHt=32,this.sHt=0,this.iHt=0,this.eHt=0,this.hHt=0,this.rHt=0,this.nHt=0,this.oHt=i.Fm(),this.aHt=i.Um(),this.yH=0,this.SH=0,this.lHt=[],this.uHt=new Map,this.cHt=!0,this.yUt=null,s&&(i.rB(s[0]),this.Q7t=Math.max(s[1],1),this.tHt=Math.max(s[2],1),this.sHt=s[3],this.iHt=s[4],this.eHt=s[5],this.hHt=s[6]),this.yH=Math.ceil(this.Tf.pk()/this.Q7t),this.SH=Math.ceil(this.Tf.gk()/this.tHt),this.eGt.q7t(this.Q7t,this.tHt),this.fHt=null}vr(){this.SUt(),Gl.Yn(this.lHt),this.lHt=null,this.uHt.clear(),this.uHt=null,super.vr()}SUt(){this.yUt&&(this.yUt.vr(),this.yUt=null)}Zxt(t,s,i){this.rHt=s,this.nHt=i,this.dHt(!0),this.pHt(t),this.mHt()}dHt(t){const[s,h]=this.gHt();if(!(s<=this.rHt&&h<=this.nHt)||t){let i=0,e=0;t?(i=Math.ceil(this.nHt/this.SH),e=Math.ceil(this.rHt/this.yH)):(i=this.lHt.length,e=Math.ceil(this.rHt/this.yH),h>this.nHt&&(this.nHt=h,i=Math.ceil(this.nHt/this.SH)),s>this.rHt&&(this.rHt=s,e=Math.ceil(this.rHt/this.yH)),this.yHt(),this.SHt(),this.Tf.tO());const r=this.lHt;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(Gl.Mr(Gl.CX.P7t.wHt,this,t,s))}}}pHt(t){let i=s(t),e=0,h=this.rHt,r=this.yH,n=this.SH;for(let s=0,t=this.nHt;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.bHt(t,s);a&&a.MHt(t%r,s%n,o)}}vHt(){let l="";if(!(this.rHt<=0||this.nHt<=0)){let i=1,e=this.xHt(0,0),[h,t]=this.gHt(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const u=this.xHt(t,s);u===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&Al,n=0!=(e&_l),o=0!=(e&Il),0!=(e&Cl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d"),l+=",",i=1,e=u)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&Al,n=0!=(e&_l),o=0!=(e&Il),0!=(e&Cl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d")}return l}yHt(){const i=this.lHt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].GHt()}this.cHt=!0}mHt(){if(this.cHt){this.cHt=!1;const i=this.lHt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].THt()}}}_Ht(){this.cHt=!0,this.SHt(),this.Tf.tO()}SHt(){this.qD().mPt(!0)}bHt(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.SH);if(i>=this.lHt.length)return null;const e=this.lHt[i],h=Math.floor(t/this.yH);return h>=e.length?null:e[h]}IHt(t,s){if(t<0||s<0||s>=this.lHt.length)return null;const i=this.lHt[s];return t>=i.length?null:i[t]}xHt(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.rHt||s>=this.nHt)return-1;const i=this.bHt(t,s);return i?i.CHt()[s%this.SH][t%this.yH]:-1}MHt(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.rHt||s>=this.nHt||-1!==i&&(i&Al)>this.K7t())){const e=this.bHt(t,s);e&&e.MHt(t%this.yH,s%this.SH,i)}}K7t(){return this.eGt.K7t()}RHt(t){return Math.floor((t-this.qD().kM())/(this.yH*this.Q7t))}AHt(t){return Math.floor((t-this.qD().LM())/(this.SH*this.tHt))}EHt(t){return Math.floor((t-this.qD().kM())/this.Q7t)}PHt(t){return Math.floor((t-this.qD().LM())/this.tHt)}FHt(){return this.rHt}kHt(){return this.nHt}DHt(){return Math.floor(this.qD().Fm()/this.OHt())}LHt(){return Math.floor(this.qD().Um()/this.BHt())}gHt(){const t=this.qD();return[Math.floor(t.Fm()/this.OHt()),Math.floor(t.Um()/this.BHt())]}OHt(){return this.Q7t}BHt(){return this.tHt}NHt(){return this.yH}WHt(){return this.SH}v3t(t,i){const e=this.RHt(t.Ol()),h=this.AHt(t.Ll()),r=this.RHt(t.Bl()),n=this.AHt(t.Nl());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.IHt(s,t);o&&(o.THt(),Gl.er(i,o.jHt()))}}HGt(t,s){const i=this.EHt(t),e=this.PHt(s),h=this.xHt(i,e);if(-1===h)return!1;const r=this.eGt.X7t(h);if(!r)return!0;if(!this.eGt.Y7t(r))return!1;const n=this.qD(),o=Math.floor((t-n.kM())/this.Q7t)*this.Q7t+n.kM(),a=Math.floor((s-n.LM())/this.tHt)*this.tHt+n.LM();return t-=o,s-=a,r.au(t,s)}VHt(i){const e=this.lHt;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.THt(),Gl.er(i,r.jHt())}}}LGt(){return this.yUt||this.Cft.vW()}UHt(t){const s=this.uHt,i=s.get(t);if(i)return i;const e=t&Al,h=0!=(t&_l),r=0!=(t&Il),n=0!=(t&Cl),o=this.LGt(),a=o.Fm(),l=this.Q7t,u=this.sHt,c=this.eHt,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.a_t()+this.sHt+(this.Q7t+this.eHt)*p,y=o.l_t()+this.iHt+(this.tHt+this.hHt)*m,S=(El.Cl(g,y,this.Q7t,this.tHt),El.Ct(o.u_t(),o.c_t()),Gl.Mr(Gl.fu));return S.Fu(El),n&&S.Uu(),h&&S.Wu(),r&&S.Vu(),S.offset(p,m),s.set(t,S),S}U7t(){this.uHt.clear(),this.yHt()}_v(h){const t=this.LGt(),s=t.hx();if(s){El.I(t.QC()),El.offsetLeft(this.sHt/s.Fm()),El.offsetTop(this.iHt/s.Um()),h.uw(),h.TE(El,s.Fm(),s.Um(),this.Q7t,this.tHt,this.eHt,this.hHt),h.eE(s);const r=this.qD(),n=r.$D();r.Fm()===this.oHt&&r.Um()===this.aHt||(this.SHt(),this.yHt(),this.oHt=r.Fm(),this.aHt=r.Um());let i=r.kM(),e=r.LM();this.Tf.wk()&&(i=Math.round(i),e=Math.round(e));const o=this.yH*this.Q7t,a=this.SH*this.tHt,l=r.vN(),u=Pl;if(n.QJ()){u.set(-1/0,-1/0,1/0,1/0);const c=Fl,f=n.fq();for(const d of this.lHt)for(const p of d)p.HHt(c),f.Uy(c.Ol(),c.Ll(),l,c.Bl(),c.Nl(),l)&&(p.THt(),p._v(h,u,i,e))}else{n.NJ(l,u);const m=Math.floor((u.Ol()-i)/o),g=Math.floor((u.Bl()-i)/o),y=Math.floor((u.Ll()-e)/a),S=Math.floor((u.Nl()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=S;++t){const w=this.IHt(s,t);w&&(w.THt(),w._v(h,u,i,e))}}}}qM(){this.dHt();const[t,s]=this.gHt();return{tw:this.Q7t,th:this.tHt,tox:this.sHt,toy:this.iHt,tsx:this.eHt,tsy:this.hHt,w:t,h:s,d:this.vHt()}}$M(t){this.Q7t=t.tw,this.tHt=t.th,this.sHt=t.tox,this.iHt=t.toy,this.eHt=t.tsx,this.hHt=t.tsy,this.rHt=t.w,this.nHt=t.h,this.dHt(!0),this.pHt(t.d),this.SHt(),this.yHt()}zHt(){this.dHt();const[t,s]=this.gHt();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.vHt()})}JHt(t){switch(t){case 0:return 0;case 1:return _l;case 2:return Il;case 3:return _l|Cl;case 4:return _l|Il;case 5:return Il|Cl;case 6:return _l|Il|Cl;case 7:return Cl;default:return 0}}Zrt(t){switch(t){case 1:return this.Q7t;case 2:return this.tHt;case 3:return this.sHt;case 4:return this.iHt;case 5:return this.eHt;case 6:return this.hHt}}hnt(t,s){switch(t){case 1:this.Q7t!==s&&(this.Q7t=Math.max(s,1),this.yH=Math.ceil(this.Tf.pk()/this.Q7t),this.eGt.J7t(),this.qHt());break;case 2:this.tHt!==s&&(this.tHt=Math.max(s,1),this.SH=Math.ceil(this.Tf.gk()/this.tHt),this.eGt.J7t(),this.qHt());break;case 3:this.sHt!==s&&(this.sHt=s,this.qHt());break;case 4:this.iHt!==s&&(this.iHt=s,this.qHt());break;case 5:this.eHt!==s&&(this.eHt=s,this.qHt());break;case 6:this.hHt!==s&&(this.hHt=s,this.qHt())}}qHt(){this.uHt.clear(),this.yHt(),this.mHt()}Oxt(){return Dl}},new WeakMap),Dl=self.$Ht=class extends self.F6{constructor(){super(),kl.set(this,self.XB.t4().B6())}get XHt(){return kl.get(this).FHt()}get YHt(){return kl.get(this).kHt()}KHt(){const t=kl.get(this);return[t.FHt(),t.kHt()]}get ZHt(){return kl.get(this).DHt()}get QHt(){return kl.get(this).LHt()}tzt(){const t=kl.get(this);return[t.DHt(),t.LHt()]}get szt(){return kl.get(this).OHt()}get izt(){return kl.get(this).BHt()}ezt(){const t=kl.get(this);return[t.OHt(),t.BHt()]}hzt(t,s){return Tl.Ge(t),Tl.Ge(s),kl.get(this).xHt(t,s)}rzt(t,s,i){Tl.Ge(t),Tl.Ge(s),Tl.Ge(i);const e=kl.get(this);e.dHt(),e.MHt(t,s,i)}async c7t(t){Tl.nh(t,Blob);const s=kl.get(this),i=s.dO(),e=Gl.Mr(Gl.JTt);e.n_t(i,t),await e.KV(i.eM(),{Lv:i.yk()}),s.Gr()?e.vr():(s.SUt(),s.yUt=e,s.uHt.clear(),s.yHt(),i.tO())}};Dl.F7t=_l,Dl.k7t=Il,Dl.D7t=Cl,Dl.O7t=Rl,Dl.L7t=Al}{const Ol=self.Ns,Ll=Ol.CX.P7t.O7t,Bl=Ol.CX.P7t.L7t;Ol.CX.P7t._X={nzt(t,s,i,e){let h=this.xHt(t,s);return-1!==h&&(h&=Bl),Ol.compare(h,i,e)},ozt(t,s,i){let e=this.xHt(t,s);return(-1!==e?e&Ll:0)===this.JHt(i)},EVt(){return!0},PVt(){return!0},azt(t){return this.fHt||(this.fHt=new Ol.CX.P7t.lzt(this,this.eGt)),this.fHt.azt(t)}}}{const Nl=self.Ns,Wl=Nl.CX.P7t.L7t;Nl.CX.P7t.prt={uzt(t,s){this.dHt(),this.MHt(t,s,-1)},czt(t,s,i,e){this.dHt(),this.MHt(t,s,i&Wl|this.JHt(e))},fzt(t,s,i){const e=this.xHt(t,s);-1!==e&&(this.dHt(),this.MHt(t,s,e&Wl|this.JHt(i)))},dzt(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.rHt)),o=Math.floor(Math.min(s+e,this.nHt));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.MHt(t,s,-1)},pzt(t,s,i,e,h,r){this.dHt();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.rHt)),l=Math.floor(Math.min(s+e,this.nHt)),u=h&Wl|this.JHt(r);for(let s=o;s<l;++s)for(let t=n;t<a;++t)this.MHt(t,s,u)},mzt(t,s,i,e,h){this.dHt();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.rHt)),a=Math.floor(Math.min(s+e,this.nHt)),l=this.JHt(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const u=this.xHt(t,s);-1!==u&&this.MHt(t,s,u&Wl|l)}},gzt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.rHt=s.width,this.nHt=s.height,this.dHt(!0),this.pHt(s.data),this.yHt(),this.SHt()):console.error("[Construct] Unrecognized JSON data format")},yzt(t){const s=URL.createObjectURL(new Blob([this.zHt()],{type:"application/json"}));this.Tf.WD(s,t)},async NVt(t,s){if(!this.yUt||this.yUt.S7()!==t){const i=this.Tf,e=Nl.Mr(Nl.JTt);try{if(await e.r_t(i,t),!e.J7())throw new Error("image failed to load");if(this.Gr())return e.vr(),null;const h=await e.KV(i.eM(),{Lv:i.yk()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Gr()||this.N4(Nl.CX.P7t._X.PVt))}this.Gr()?e.vr():(this.SUt(),this.yUt=e,i.tO(),this.uHt.clear(),this.yHt(),await this.j4(Nl.CX.P7t._X.EVt))}},jVt(t){2<=t&&t++,this.qD().xM(t),this.Tf.tO()},Szt(t,s,i){this.dHt(),this.fHt||(this.fHt=new Nl.CX.P7t.lzt(this,this.eGt)),this.fHt.wzt(t,s,i)},bzt(t,s,i){this.dHt(),this.fHt||(this.fHt=new Nl.CX.P7t.lzt(this,this.eGt)),this.fHt.Mzt(t,s,i)},vzt(t,s,i){Nl.CX.P7t.prt.Szt.call(this,t,s,i)},xzt(t,s,i){Nl.CX.P7t.prt.bzt.call(this,t,s,i)}}}{const jl=self.Ns,Vl=jl.CX.P7t.L7t;jl.CX.P7t.mrt={Gzt(t,s){const i=this.xHt(t,s);return-1===i?-1:i&Vl},Tzt(t){return this.EHt(t)},_zt(t){return this.PHt(t)},Izt(t){return t*this.Q7t+this.qD().kM()+this.Q7t/2},Czt(t){return t*this.tHt+this.qD().LM()+this.tHt/2},Rzt(t){const s=this.qD().kM();return Math.floor((t-s)/this.Q7t)*this.Q7t+s+this.Q7t/2},Azt(t){const s=this.qD().LM();return Math.floor((t-s)/this.tHt)*this.tHt+s+this.tHt/2},Ezt(){return this.zHt()},Pzt(){return this.OHt()},Fzt(){return this.BHt()},kzt(){return this.DHt()},Dzt(){return this.LHt()}}}{const Ul=self.Ns,Hl=Ul.CX.P7t.F7t,zl=Ul.CX.P7t.k7t,Jl=Ul.CX.P7t.D7t,ql=Ul.CX.P7t.L7t,$l=Ul.Mr(Ul.Rect),Xl=Ul.Mr(Ul.fu);Ul.CX.P7t.Ozt=class extends Ul.Sr{constructor(){super(),this.If=-1,this.Lzt=-1,this.Bzt=!1,this.Nzt=!1,this.Wzt=!1,this.jzt=Ul.Mr(Ul.Rect),this.Vzt=null}xH(t,s,i,e,h,r,n,o){this.If=t,this.Lzt=t&ql,this.Bzt=0!=(t&Hl),this.Nzt=0!=(t&zl),this.Wzt=0!=(t&Jl),this.jzt.Cl(e*s+r,h*i+n,s,i),this.Vzt=o.UHt(this.If)}_v(t,s,i,e,h){$l.I(this.jzt),$l.offset(i,e),$l.nu(s)&&(Xl.Fu($l),t.dE(Xl,this.Vzt))}}}{const Yl=self.Ns;Yl.CX.P7t.Uzt=class extends Yl.Sr{constructor(){super(),this.If=-1,this.Hzt=null,this.jzt=Yl.Mr(Yl.Rect)}xH(t,s,i,e,h,r,n,o){this.If=t,this.Hzt=s,this.jzt.Cl(h*i+n,r*e+o,i,e)}zzt(t){this.jzt.Pl(this.jzt.Bl()+t)}Jzt(){return this.If}qzt(){return!!this.Hzt}G3t(){return this.Hzt}x3t(){return this.jzt}}}{const Kl=self.Ns,Zl=Kl.CX.P7t.L7t;Kl.CX.P7t.wHt=class extends Kl.Sr{constructor(t,s,i){super();const e=t.NHt(),h=t.WHt();this.LCt=t,this.dl=s,this.pl=i,this.Gl=this.dl*e*t.OHt(),this.Tl=this.pl*h*t.BHt(),this.$zt=[],this.Xzt=[],this.Yzt=[],this.Kzt=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.$zt.push(r)}}Sc(){const i=this.LCt.NHt(),s=this.LCt.WHt(),e=this.$zt;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&Kl.Xn(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}HHt(t){const s=this.LCt,i=s.qD(),e=s.NHt()*s.OHt(),h=s.WHt()*s.BHt(),r=i.kM()+this.Gl,n=i.LM()+this.Tl;t.set(r,n,r+e,n+h)}GHt(){this.Kzt=!1}THt(){if(!this.Kzt){const u=this.LCt,c=u.fMt(),s=u.qD(),f=u.OHt(),d=u.BHt(),p=u.NHt(),m=u.WHt(),g=this.Gl,y=this.Tl;if(!(f<=0||d<=0)){let e=Math.min(u.FHt(),Math.floor(s.Fm()/f)),t=Math.min(u.kHt(),Math.floor(s.Um()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.$zt),r=this.Xzt,n=0;for(let i=0;i<t;++i){const S=h[i];for(let s=0;s<e;++s){const w=S[s];if(-1!==w){let t=null;n<r.length?t=r[n]:(t=Kl.Mr(Kl.CX.P7t.Ozt),r.push(t)),t.xH(w,f,d,s,i,g,y,u),++n}}}n<r.length&&Kl.Xn(r,n);let i=null,o=!1,a=this.Yzt;Kl.Yn(a);for(let s=0;s<t;++s){const b=h[s];for(let t=0;t<e;++t){const M=b[t],v=(Zl,c.X7t(M)),x=c.Y7t(v);-1!==M&&x?!i||v||o?(i&&a.push(i),(i=Kl.Mr(Kl.CX.P7t.Uzt)).xH(M,v,f,d,t,s,g,y),o=!!v):i.zzt(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let l=a.length;for(let s=0;s<l;++s){const G=a[s];if(!G.qzt()){const T=G.x3t();for(let t=s+1;t<l;++t){const _=a[t],I=_.x3t();I.Ll()<T.Nl()||I.Ll()>T.Nl()||I.Bl()>T.Bl()||I.Ol()>T.Ol()||_.qzt()||I.Ol()===T.Ol()&&I.Bl()===T.Bl()&&(a.splice(t,1),--l,T.Fl(T.Nl()+d),--t)}}}this.Kzt=!0}}}MHt(t,s,i){this.$zt[s][t]!==i&&(this.$zt[s][t]=i,this.Kzt=!1,this.LCt._Ht())}CHt(){return this.$zt}jHt(){return this.Yzt}_v(i,e,h,r){const n=this.LCt,o=this.Xzt;for(let t=0,s=o.length;t<s;++t)o[t]._v(i,e,h,r,n)}}}{const Ql=self.Ns,tu=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);Ql.CX.P7t.lzt=class{constructor(t,s){this.LCt=t,this.eGt=s,this.Zzt=[null,null],this.Qzt=[Ql.CX.P7t.tJt,Ql.CX.P7t.sJt],this.iJt=new Ql.df}get eJt(){return tu}get hJt(){return-999}get rJt(){return-998}get nJt(){return-1}get oJt(){return 0}get aJt(){return 1}lJt(){return this.LCt}fMt(){return this.eGt}wzt(t,s,i){this.azt(i)&&(this.uJt(i,0),this.cJt(t,s,this.fJt(t,s,i)))}Mzt(t,s,i){this.azt(i)&&(this.uJt(i,1),this.dJt(t,s),this.cJt(t,s,this.fJt(t,s,i)))}azt(t){return!!this.fMt().Z7t(t)}pJt(t,s){return this.lJt().xHt(t,s)}mJt(t,s,i){const e=this.pJt(t,s);return!!this.gJt(e,!0,e,i)}gJt(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.yJt(i,e)?0:1}SJt(t,s,i,e){const h=e.z7t[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.pJt(s,i);if(this.gJt(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.iJt.Sc();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.iJt.bf(s,t);return this.iJt.wf()}wJt(t,s,i){-1!==t&&this.lJt().MHt(t,s,i)}dJt(t,s){this.lJt().MHt(t,s,-1)}yJt(t,s){for(const i of s.z7t)for(const[e]of i)if(e===t)return!0;return!1}cJt(t,s,i){i&&(this.wJt(t-1,s-1,i[0][0]),this.wJt(t,s-1,i[1][0]),this.wJt(t+1,s-1,i[2][0]),this.wJt(t-1,s,i[0][1]),this.wJt(t,s,i[1][1]),this.wJt(t+1,s,i[2][1]),this.wJt(t-1,s+1,i[0][2]),this.wJt(t,s+1,i[1][2]),this.wJt(t+1,s+1,i[2][2]))}bJt(t){const s=this.fMt().Z7t(t);return s.type}MJt(t){const s=this.bJt(t);this.Zzt[s]||(this.Zzt[s]=new this.Qzt[s](this))}uJt(t,s){this.MJt(t);const i=this.bJt(t);this.Zzt[i]&&this.Zzt[i].vJt(s)}fJt(t,s,i){this.MJt(i);const e=this.fMt().Z7t(i);if(this.Zzt[e.type])return this.Zzt[e.type].xJt(t,s,e)}}}{const su=self.Ns;su.CX.P7t.tJt=class{constructor(t){this.GJt=t,this.TJt=t.oJt}vJt(t){this.TJt=t}xJt(t,s,i){return this._Jt(t,s,i)}_Jt(t,s,i){const e=this.TJt===this.GJt.oJt?this.IJt(t,s,void 0,i):this.GJt.nJt,h=this.CJt(t,s-1,"s",i),r=this.CJt(t-1,s,"e",i),n=this.CJt(t+1,s,"w",i),o=this.CJt(t,s+1,"n",i),a=this.GJt.eJt;return a[0][0]=this.GJt.hJt,a[1][0]=this.RJt(h,t,s-1,i),a[2][0]=this.GJt.hJt,a[0][1]=this.RJt(r,t-1,s,i),a[1][1]=this.RJt(e,t,s,i),a[2][1]=this.RJt(n,t+1,s,i),a[0][2]=this.GJt.hJt,a[1][2]=this.RJt(o,t,s+1,i),a[2][2]=this.GJt.hJt,a}CJt(t,s,i,e){return this.GJt.mJt(t,s,e)?this.IJt(t,s,i,e):this.GJt.hJt}IJt(t,s,i,e){this.TJt===this.GJt.aJt&&(i=void 0);const h=this.GJt.pJt(t,s-1),r=this.GJt.pJt(t-1,s),n=this.GJt.pJt(t+1,s),o=this.GJt.pJt(t,s+1),a="n"===i?this.GJt.rJt:h,l="w"===i?this.GJt.rJt:r,u="e"===i?this.GJt.rJt:n,c="s"===i?this.GJt.rJt:o,f=this.GJt.gJt(a,!0,h,e),d=this.GJt.gJt(l,!0,r,e),p=this.GJt.gJt(u,!0,n,e),m=this.GJt.gJt(c,!0,o,e);return+f+2*d+4*p+8*m}RJt(t,s,i,e){return t===this.GJt.hJt||t===this.GJt.nJt?t:this.GJt.SJt(t,s,i,e)}}}{const iu=self.Ns,eu=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);iu.CX.P7t.sJt=class{constructor(t){this.GJt=t,this.TJt=t.oJt}vJt(t){this.TJt=t}xJt(t,s,i){return this.AJt(t,s,i)}AJt(t,s,i){const e=this.TJt===this.GJt.oJt?this.EJt(t,s,void 0,i):this.GJt.nJt,h=this.PJt(t-1,s-1,"se",i),r=this.PJt(t,s-1,"s",i),n=this.PJt(t+1,s-1,"sw",i),o=this.PJt(t-1,s,"e",i),a=this.PJt(t+1,s,"w",i),l=this.PJt(t-1,s+1,"ne",i),u=this.PJt(t,s+1,"n",i),c=this.PJt(t+1,s+1,"nw",i),f=this.GJt.eJt;return f[0][0]=this.FJt(h,t-1,s-1,i),f[1][0]=this.FJt(r,t,s-1,i),f[2][0]=this.FJt(n,t+1,s-1,i),f[0][1]=this.FJt(o,t-1,s,i),f[1][1]=this.FJt(e,t,s,i),f[2][1]=this.FJt(a,t+1,s,i),f[0][2]=this.FJt(l,t-1,s+1,i),f[1][2]=this.FJt(u,t,s+1,i),f[2][2]=this.FJt(c,t+1,s+1,i),f}PJt(t,s,i,e){return this.GJt.mJt(t,s,e)?this.EJt(t,s,i,e):this.GJt.hJt}EJt(t,s,i,e){this.TJt===this.GJt.aJt&&(i=void 0);const h=this.GJt.pJt(t,s-1),r=this.GJt.pJt(t-1,s),n=this.GJt.pJt(t+1,s),o=this.GJt.pJt(t,s+1),a=this.GJt.pJt(t-1,s-1),l=this.GJt.pJt(t+1,s-1),u=this.GJt.pJt(t-1,s+1),c=this.GJt.pJt(t+1,s+1),f="n"===i?this.GJt.rJt:h,d="w"===i?this.GJt.rJt:r,p="e"===i?this.GJt.rJt:n,m="s"===i?this.GJt.rJt:o,g="nw"===i?this.GJt.rJt:a,y="ne"===i?this.GJt.rJt:l,S="sw"===i?this.GJt.rJt:u,w="se"===i?this.GJt.rJt:c,b=this.GJt.gJt(f,!0,h,e),M=this.GJt.gJt(d,!0,r,e),v=this.GJt.gJt(p,!0,n,e),x=this.GJt.gJt(m,!0,o,e),G=b&&M?this.GJt.gJt(g,!0,a,e):0,T=b&&v?this.GJt.gJt(y,!0,l,e):0,_=x&&M?this.GJt.gJt(S,!0,u,e):0,I=x&&v?this.GJt.gJt(w,!0,c,e):0;return+G+2*b+4*T+8*M+16*v+32*_+64*x+128*I}FJt(t,s,i,e){return t===this.GJt.hJt||t===this.GJt.nJt?t:this.GJt.SJt(eu.get(t),s,i,e)}}}{const hu=self.Ns,ru=[];hu.CX.Audio=class extends hu.fxt{constructor(t){super(t)}kJt(t){ru.push(t)}static async DJt(){await Promise.all(ru),hu.Yn(ru)}vr(){super.vr()}}}{let s=function(){return i.HL().B6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const nu=self.Ns,ou=self.Ys;nu.CX.Audio.RIt=class extends nu.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}Oxt(){return self.OJt}};let i=null;self.OJt=class extends self.zL{constructor(t){super(t),i=t}get LJt(){return t().GetAudioContextExtern()}get BJt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().NJt()}set isSilent(t){s().WJt(t)}get masterVolume(){return s().jJt()}set masterVolume(t){ou.Ge(t),s().VJt(t)}UJt(){s().HJt()}}}{const au=self.Ns,lu=["interactive","balanced","playback"];au.CX.Audio.Instance=class extends au.sGt{constructor(t,s){super(t,"audio"),this.zJt=0,this.JJt=[],this.qJt=!0,this.$Jt=0,this.XJt=0,this.YJt=!1,this.KJt=1,this.ZJt=1,this.QJt=[this.Tf.VJ()/2,this.Tf.UJ()/2,600],this.t9t=[0,0,-1],this.s9t=[0,1,0],this.i9t=600,this.e9t=1e4,this.h9t=1,this.r9t=null,this.n9t=-1,this.o9t=1,this.a9t=!1,this.l9t=0,this.u9t="suspended",this.c9t=0,this.f9t=new Map,this.d9t=0,this.p9t=0,this.m9t=new Map,this.g9t=new Map;let i="interactive";s&&(this.$Jt=s[0],this.XJt=s[1],this.YJt=s[2],i=lu[s[3]],this.qJt=s[4],this.KJt=s[5],this.ZJt=s[6],this.QJt[2]=s[7],this.i9t=s[8],this.e9t=s[9],this.h9t=s[10]),this.y9t=[],this.S9t=[],this.w9t=[],this.fGt([["state",t=>this.b9t(t)],["audiocontext-state",t=>this.M9t(t)],["fxstate",t=>this.v9t(t)],["trigger",t=>this.x9t(t)],["buffer-metadata",t=>this.G9t(t)]]);const e=this.dO().h0(),h=(this.O0=new au.F0(au.I0.P0(e,"instancedestroy",t=>this.T9t(t.Y6)),au.I0.P0(e,"afterload",()=>this.sK()),au.I0.P0(e,"suspend",()=>this._9t()),au.I0.P0(e,"resume",()=>this.I9t())),this.Tf.KO()),r="Safari"===au.fi.gi,n=this.Tf.t4t()||"macos-wkwebview"===h,o=this.Tf.KF().n7(),a="playable-ad-single-file"===this.Tf.KO(),l=r||n||o||a;this.Tf.nO(this.pGt("create-audio-context",{preloadList:this.Tf.KF().L7().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.$Jt,latencyHint:i,panningModel:this.KJt,distanceModel:this.ZJt,refDistance:this.i9t,maxDistance:this.e9t,rolloffFactor:this.h9t,listenerPos:this.QJt,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.l9t=t.sampleRate,this.u9t=t.audioContextState,this.c9t=t.outputLatency})),this.bGt()}vr(){this.r9t=null,super.vr()}C9t(t){return this.qJt?t.split(" ").filter(t=>!!t):t?[t]:[]}R9t(s,t){for(const i of t){let t=!1;for(const e of s)if(au.Mh(e,i)){t=!0;break}if(!t)return!1}return!0}A9t(t,s){return this.R9t(t,this.C9t(s))}kJt(t){this.qL().kJt(t)}T9t(t){this.r9t===t&&(this.r9t=null)}E9t(t){return Math.pow(10,t/20)}P9t(t){const s=this.E9t(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}F9t(t){return Math.log(t)/Math.log(10)*20}k9t(t){return this.F9t(Math.max(Math.min(t,1),0))}_9t(){this.YJt||this.dGt("set-suspended",{isSuspended:!0})}I9t(){this.YJt||this.dGt("set-suspended",{isSuspended:!1})}b9t(t){const s=t.tickCount,i=(this.c9t=t.outputLatency,this.y9t.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.y9t=t.audioInstances,this.w9t=t.analysers,0<i.length&&au.er(this.y9t,i)}G9t(t){this.m9t.set(t.originalUrl,{duration:t.duration})}M9t(t){this.u9t=t.audioContextState}Grt(){return this.Tf.Ykt()?"running":this.u9t}v9t(t){this.S9t=t.fxstate}D9t(t){const s=this.C9t(t);for(const i of this.y9t)if(this.R9t(i.tags,s))return i;return null}O9t(t){const s=this.C9t(t);return this.y9t.some(t=>this.R9t(t.tags,s)&&t.isPlaying)}L9t(t,s,i,e,h){if(this.O9t(s))return null;const r=this.m9t.get(t),n={tags:this.C9t(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.y9t.push(n),n}B9t(t){const s=this.C9t(t);for(const i of this.y9t)this.R9t(i.tags,s)&&(i.isPlaying=!1)}async x9t(t){const s=t.type,i=(this.JJt=t.tags,t.aiid);if("ended"===s){for(const e of this.y9t)if(e.aiid===i){e.isPlaying=!1;break}await this.j4(au.CX.Audio._X.N9t)}else"fade-ended"===s&&await this.j4(au.CX.Audio._X.W9t)}j9t(t){return this.A9t(this.JJt,t)}ZK(){const t={timeScale:this.Tf.iD(),gameTime:this.Tf.qBt(),instPans:this.V9t(),tickCount:this.Tf.$Bt()};if(this.r9t){const s=this.r9t.qD();this.QJt[0]=s.kM(),this.QJt[1]=s.LM(),t.listenerPos=this.QJt,t.listenerOrientation=[...this.t9t,...this.s9t]}this.dGt("tick",t)}U9t(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,l=t*n,u=s*n;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}V9t(){return this.y9t.filter(t=>-1!==t.uid).map(t=>this.Tf.VD(t.uid)).filter(t=>t).map(t=>{const s=t.qD(),i=s.$D().GetAngle(),[e,h]=this.U9t(s.kM(),s.LM(),-i,this.QJt[0],this.QJt[1]);return{uid:t.u4(),x:e,y:h,z:s.vN(),angle:s.GetAngle()-i}})}H9t(t,s){for(const i of this.w9t)if(i.index===s&&au.Mh(i.tag,t))return i;return null}z9t(t){for(const s of this.C9t(t)){const i=s.toLowerCase();this.f9t.set(i,(this.f9t.get(i)||0)+1)}}NJt(){return this.a9t}WJt(t){this.a9t!==(t=!!t)&&(this.a9t=t,this.dGt("set-silent",{isSilent:t}))}jJt(){return this.o9t}VJt(t){this.o9t!==t&&(this.o9t=t,this.dGt("set-master-volume",{vol:t}))}HJt(){this.dGt("stop-all");for(const t of this.y9t)t.isPlaying=!1}J9t(t){return!t.hasOwnProperty("placeholder")&&3!==this.XJt&&!(t.isMusic&&1===this.XJt||!t.isMusic&&2===this.XJt)}qM(){return{isSilent:this.a9t,masterVolume:this.o9t,listenerZ:this.QJt[2],listenerForwardVec:this.t9t,listenerUpVec:this.s9t,listenerUid:this.r9t?this.r9t.u4():-1,remoteUrls:[...this.g9t.entries()],playing:this.y9t.filter(t=>this.J9t(t)),effects:this.S9t,analysers:this.w9t}}$M(t){if(this.a9t=t.isSilent,this.o9t=t.masterVolume,this.QJt[2]=t.listenerZ,this.r9t=null,this.n9t=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.t9t=t.listenerForwardVec:this.t9t=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.s9t=t.listenerUpVec:this.s9t=[0,1,0],this.g9t.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.g9t.set(s,i);this.y9t=t.playing;for(const e of this.y9t)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.S9t=t.effects,this.w9t=t.analysers}sK(){if(-1!==this.n9t&&(this.r9t=this.Tf.VD(this.n9t),this.n9t=-1,this.r9t)){const t=this.r9t.qD();this.QJt[0]=t.kM(),this.QJt[1]=t.LM()}for(const s of this.y9t){const i=this.Tf.KF().O7(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.S9t))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.Tf.KF().O7(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.dGt("load-state",{saveLoadMode:this.XJt,timeScale:this.Tf.iD(),gameTime:this.Tf.qBt(),listenerPos:this.QJt,listenerOrientation:[...this.t9t,...this.s9t],isSilent:this.a9t,masterVolume:this.o9t,playing:this.y9t.filter(t=>null!==t.bufferUrl),effects:this.S9t})}GGt(){const t=[];for(const[i,e]of Object.entries(this.S9t))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.y9t.length},...this.y9t.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const uu=self.Ns;uu.CX.Audio._X={N9t(t){return this.j9t(t)},W9t(t){return this.j9t(t)},q9t(){return this.p9t===this.d9t},$9t(){return!0},X9t(){return this.NJt()},Y9t(){for(const t of this.y9t)if(t.isPlaying)return!0;return!1},K9t(t){return this.O9t(t)}}}{const cu=self.Ns,fu=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];cu.CX.Audio.prt={Play(t,s,i,e,h){const r=cu.CX.Audio.prt.Z9t.call(this,t,s,i,e,h);return this.kJt(r),r},Trt(t,s,i,e){cu.CX.Audio.prt.Z9t.call(this,t,0,s,0,i,e)},async Z9t(t,s,i,e,h,r){if(!this.a9t){const n=t[1],o=this.Tf.KF().O7(t[0]);if(o){const a=this.zJt,l=(this.zJt=0,this.L9t(t[0],h,n,0!==s,this.P9t(i)));try{await this.pGt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.C9t(h),isLooping:0!==s,vol:this.P9t(i),stereoPan:cu.Cr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Tf.$Bt())}}}},async Q9t(t,s,i,e,h,r,n,o,a,l,u){if(!this.a9t){const c=t[1],f=this.Tf.KF().O7(t[0]);if(f){const d=this.zJt,p=(this.zJt=0,this.L9t(t[0],u,c,0!==s,this.P9t(i)));try{await this.pGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.C9t(u),isLooping:0!==s,vol:this.P9t(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:cu.Ar(n),innerAngle:cu.Ar(o),outerAngle:cu.Ar(a),outerGain:this.P9t(l)}})}finally{p&&(p.placeholder=this.Tf.$Bt())}}}},async tqt(t,s,i,e,h,r,n,o){if(!this.a9t&&e){const a=e.rvt();if(a&&a.qD()){const l=a.qD(),u=l.$D().GetAngle(),[c,f]=this.U9t(l.kM(),l.LM(),-u,this.QJt[0],this.QJt[1]),d=t[1],p=this.Tf.KF().O7(t[0]);if(p){const m=this.zJt,g=(this.zJt=0,this.L9t(t[0],o,d,0!==s,this.P9t(i)));try{await this.pGt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.C9t(o),isLooping:0!==s,vol:this.P9t(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.vN(),angle:l.GetAngle()-u,innerAngle:cu.Ar(h),outerAngle:cu.Ar(r),outerGain:this.P9t(n),uid:a.u4()}})}finally{g&&(g.placeholder=this.Tf.$Bt())}}}}},async sqt(t,s,i,e,h,r){if(!this.a9t){const n=1===t,o=this.Tf.KF().O7(s)||this.g9t.get(s.toLowerCase());if(o){const a=this.zJt,l=(this.zJt=0,this.L9t(s,r,n,0!==i,this.P9t(e)));try{await this.pGt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.C9t(r),isLooping:0!==i,vol:this.P9t(e),stereoPan:cu.Cr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Tf.$Bt())}}}},async iqt(t,s,i,e,h,r,n,o,a,l,u,c){if(!this.a9t){const f=1===t,d=this.Tf.KF().O7(s)||this.g9t.get(s.toLowerCase());if(d){const p=this.zJt,m=(this.zJt=0,this.L9t(s,c,f,0!==i,this.P9t(e)));try{await this.pGt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.C9t(c),isLooping:0!==i,vol:this.P9t(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:cu.Ar(o),innerAngle:cu.Ar(a),outerAngle:cu.Ar(l),outerGain:this.P9t(u)}})}finally{m&&(m.placeholder=this.Tf.$Bt())}}}},async eqt(t,s,i,e,h,r,n,o,a){if(!this.a9t&&!this.a9t&&h){const l=h.rvt();if(l&&l.qD()){const u=l.qD(),c=u.$D().GetAngle(),[f,d]=this.U9t(u.kM(),u.LM(),-c,this.QJt[0],this.QJt[1]),p=1===t,m=this.Tf.KF().O7(s)||this.g9t.get(s.toLowerCase());if(m){const g=this.zJt,y=(this.zJt=0,this.L9t(s,a,p,0!==i,this.P9t(e)));try{await this.pGt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.C9t(a),isLooping:0!==i,vol:this.P9t(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.vN(),angle:u.GetAngle()-c,innerAngle:cu.Ar(r),outerAngle:cu.Ar(n),outerGain:this.P9t(o),uid:l.u4()}})}finally{y&&(y.placeholder=this.Tf.$Bt())}}}}},hqt(t,s){this.dGt("set-looping",{tags:this.C9t(t),isLooping:0===s})},rqt(t,s){this.dGt("set-muted",{tags:this.C9t(t),isMuted:0===s})},vrt(t,s){this.dGt("set-volume",{tags:this.C9t(t),vol:this.P9t(s)})},nqt(t,s,i,e){this.dGt("fade-volume",{tags:this.C9t(t),vol:this.P9t(s),duration:i,stopOnEnd:0===e})},oqt(t,s){this.dGt("set-stereo-pan",{tags:this.C9t(t),p:cu.Cr(s/100,-1,1)})},async aqt(t){const s=t[1],i=this.Tf.KF().O7(t[0]);i&&(this.d9t++,await this.pGt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.p9t++)},async lqt(t,s){const i=1===t,e=this.Tf.KF().O7(s)||this.g9t.get(s.toLowerCase());e&&(this.d9t++,await this.pGt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.p9t++)},s8(t,s){this.dGt("set-playback-rate",{tags:this.C9t(t),rate:Math.max(s,0)})},zW(t){this.B9t(t),this.dGt("stop",{tags:this.C9t(t)})},uqt(){this.HJt()},cqt(t,s){this.dGt("set-paused",{tags:this.C9t(t),paused:0===s})},fqt(t,s){this.dGt("seek",{tags:this.C9t(t),pos:s})},dqt(t){2===t&&(t=this.NJt()?1:0),this.WJt(0===t)},pqt(t){const s=this.P9t(t);this.VJt(s)},mqt(t,s,i,e,h,r,n){const o=fu[s];this.z9t(t),this.dGt("add-effect",{type:"filter",tags:this.C9t(t),params:[o,i,e,h,r,cu.Cr(n/100,0,1)]})},gqt(t,s,i,e){this.z9t(t),this.dGt("add-effect",{type:"delay",tags:this.C9t(t),params:[s,this.P9t(i),cu.Cr(e/100,0,1)]})},yqt(t,s,i,e,h,r){this.z9t(t),this.dGt("add-effect",{type:"flanger",tags:this.C9t(t),params:[s/1e3,i/1e3,e,h/100,cu.Cr(r/100,0,1)]})},Sqt(t,s,i,e,h,r,n){this.z9t(t),this.dGt("add-effect",{type:"phaser",tags:this.C9t(t),params:[s,i,e,h,r,cu.Cr(n/100,0,1)]})},wqt(t,s,i,e){const h=this.Tf.KF().O7(s[0]);h&&(this.z9t(t),this.dGt("add-effect",{type:"convolution",tags:this.C9t(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,cu.Cr(e/100,0,1)]}))},bqt(t,s){this.z9t(t),this.dGt("add-effect",{type:"gain",tags:this.C9t(t),params:[this.P9t(s)]})},Mqt(t,s){this.z9t(t),this.dGt("add-effect",{type:"stereopan",tags:this.C9t(t),params:[cu.Cr(s/100,-1,1)]})},vqt(t){this.z9t(t),this.dGt("add-effect",{type:"gain",tags:this.C9t(t),params:[0]})},xqt(t,s,i){this.z9t(t),this.dGt("add-effect",{type:"tremolo",tags:this.C9t(t),params:[s,cu.Cr(i/100,0,1)]})},Gqt(t,s,i){this.z9t(t),this.dGt("add-effect",{type:"ringmod",tags:this.C9t(t),params:[s,cu.Cr(i/100,0,1)]})},Tqt(t,s,i,e,h,r){this.z9t(t),this.dGt("add-effect",{type:"distortion",tags:this.C9t(t),params:[this.E9t(s),this.E9t(i),e,this.E9t(h),cu.Cr(r/100,0,1)]})},_qt(t,s,i,e,h,r){this.z9t(t),this.dGt("add-effect",{type:"compressor",tags:this.C9t(t),params:[s,i,e,h/1e3,r/1e3]})},Iqt(t,s,i){this.z9t(t),this.dGt("add-effect",{type:"analyser",tags:this.C9t(t),params:[s,i]})},Cqt(t){const s=this.C9t(t);for(const i of s)this.f9t.set(i.toLowerCase(),0);this.dGt("remove-effects",{tags:s}),this.S9t={}},rW(t,s,i,e,h,r){this.dGt("set-effect-param",{tags:this.C9t(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},Rqt(t){if(t){const s=t.rvt();s&&s.qD()&&(this.r9t=s)}},Aqt(t){this.QJt[2]=t},Eqt(t,s,i,e,h,r){this.t9t[0]=t,this.t9t[1]=s,this.t9t[2]=-i,this.s9t[0]=e,this.s9t[1]=h,this.s9t[2]=-r},Pqt(t){this.zJt=Math.max(t,0)},Fqt(t){const s=t[1],i=this.Tf.KF().O7(t[0]);i&&this.dGt("unload",{url:i.url,type:i.type,isMusic:s})},kqt(t,s){const i=1===t,e=this.Tf.KF().O7(s)||this.g9t.get(s.toLowerCase());e&&this.dGt("unload",{url:e.url,type:e.type,isMusic:i})},Dqt(){this.dGt("unload-all")},Oqt(t,s,i){this.g9t.set(i.toLowerCase(),{url:t,type:s})}}}{const du=self.Ns;du.CX.Audio.mrt={Lqt(t){const s=this.D9t(t);return s?s.duration:0},Srt(t){const s=this.D9t(t);return s?s.playbackTime:0},xrt(t){const s=this.D9t(t);return s?s.playbackRate:0},wrt(t){const s=this.D9t(t);return s?this.k9t(s.volume):0},Bqt(){return this.k9t(this.jJt())},Nqt(t){return this.f9t.get(t.toLowerCase())||0},Wqt(t,s){const i=this.H9t(t,Math.floor(s));return i?i.binCount:0},jqt(t,s,i){const e=this.H9t(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},Vqt(t,s){const i=this.H9t(t,Math.floor(s));return i?i.peak:0},Uqt(t,s){const i=this.H9t(t,Math.floor(s));return i?i.rms:0},Hqt(){return this.l9t},zqt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},Jqt(){return this.c9t},qqt(t,s){return 0==(t=du.Cr(+t,0,100)/100)?-1/0:t<.1?this.k9t(du.Ot(0,this.P9t(s),10*t)):du.Ot(s,0,(t-.1)/.9)}}}{const pu=self.Ns;pu.CX.Keyboard=class extends pu.fxt{constructor(t){super(t)}vr(){super.vr()}}}{let i=function(){return s.HL().B6()};i;const mu=self.Ns;mu.CX.Keyboard.RIt=class extends mu.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}Oxt(){return self.$qt}};let s=null;self.$qt=class extends self.zL{constructor(t){super(t),(s=t).dO().DD().keyboard=this}Xqt(t){const s=i();if("string"==typeof t)return s.Yqt(t);if("number"==typeof t)return s.Kqt(t);throw new TypeError("expected string or number")}}}{const gu=self.Ns;gu.CX.Keyboard.Instance=class extends gu.sGt{constructor(t,s){super(t,"keyboard"),this.Zqt=new Set,this.Qqt=new Set,this.t$t=0,this.s$t="",this.i$t="",this.e$t=!1;const i=this.dO().h0();this.O0=new gu.F0(gu.I0.P0(i,"keydown",t=>this.h$t(t.data)),gu.I0.P0(i,"keyup",t=>this.r$t(t.data)),gu.I0.P0(i,"window-blur",()=>this.n$t()),gu.I0.P0(i,"keyboard-blur",()=>this.n$t())),this.Tf.nO(this.FM())}vr(){super.vr()}async FM(){const t=await this.pGt("init");this.e$t=t.isKeyboardLockSupported}h$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.Zqt.has(i)||(this.Zqt.add(i),this.Qqt.add(s),this.s$t=i,this.t$t=s,this.i$t=e,this.N4(gu.CX.Keyboard._X.o$t),this.N4(gu.CX.Keyboard._X.a$t),this.N4(gu.CX.Keyboard._X.l$t),this.N4(gu.CX.Keyboard._X.u$t))}r$t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.Zqt.delete(i),this.Qqt.delete(s),this.s$t=i,this.t$t=s,this.i$t=e,this.N4(gu.CX.Keyboard._X.c$t),this.N4(gu.CX.Keyboard._X.f$t),this.N4(gu.CX.Keyboard._X.d$t),this.N4(gu.CX.Keyboard._X.p$t)}n$t(){for(const t of this.Qqt)this.Qqt.delete(t),this.t$t=t,this.N4(gu.CX.Keyboard._X.c$t),this.N4(gu.CX.Keyboard._X.f$t),this.N4(gu.CX.Keyboard._X.p$t);this.Zqt.clear()}Yqt(t){return this.Zqt.has(t)}Kqt(t){return this.Qqt.has(t)}qM(){return{tk:this.t$t,tkk:this.i$t}}$M(t){this.t$t=t.tk,t.hasOwnProperty("tkk")&&(this.i$t=t.tkk)}GGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.t$t},{name:t+".debugger.last-key-string",value:gu.CX.Keyboard.mrt.m$t(this.t$t)},{name:t+".debugger.last-typed-key",value:this.i$t}]}]}}}{const yu=self.Ns,Su=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];yu.CX.Keyboard._X={Yqt(t){return this.Qqt.has(t)},a$t(t){return this.t$t===t},o$t(){return!0},c$t(){return!0},f$t(t){return this.t$t===t},Kqt(t){return t=Math.floor(t),this.Qqt.has(t)},u$t(t){return this.t$t===t},p$t(t){return this.t$t===t},l$t(t){const s=Su[t];return this.s$t===s},d$t(t){const s=Su[t];return this.s$t===s},g$t(t){const s=Su[t];return this.Zqt.has(s)},y$t(){return this.e$t},S$t(){return!0},w$t(){return!0}}}{const wu=self.Ns;wu.CX.Keyboard.prt={async b$t(s){if(this.e$t){let t=[];s&&(t=s.split(","));const i=await this.pGt("lock-keyboard",{keysArr:t});i.isOk?this.N4(wu.CX.Keyboard._X.S$t):this.N4(wu.CX.Keyboard._X.w$t)}},M$t(){this.e$t&&this.pGt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const bu=self.Ns;bu.CX.Keyboard.mrt={v$t(){return this.t$t},m$t(t){return s(t)},x$t(){return this.i$t}}}{const Mu=self.Ns;Mu.CX.Function=class extends Mu.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const vu=self.Ns;vu.CX.Function.RIt=class extends vu.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const xu=self.Ns;class Gu{constructor(){this.name="",this.G$t=0,this.params=[]}}xu.CX.Function.Instance=class extends xu.sGt{constructor(t,s){super(t),this.T$t=this.Tf.rOt(),this._$t=-1,this.I$t=[];const i=(t,s)=>this.C$t(t,s);self.c2_callFunction=i,self.c3_callFunction=i}vr(){super.vr()}aV(){const t=this.I$t,s=++this._$t;return s===t.length&&t.push(new Gu),t[s]}wV(){--this._$t}H0t(){const t=this._$t;return t<0?null:this.I$t[t]}R$t(){const t=this.I$t;if(!t.length)return null;const s=Math.min(this._$t+1,t.length-1);return t[s]}A$t(t,s){const i=this.aV(),e=(i.name=t.toLowerCase(),i.G$t=0,xu.eo(i.params,s),this.aGt(xu.CX.Function._X.E$t,i.name));this.T$t&&!e&&console.warn(`[Construct] Function object: called function '${t}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.wV()}*P$t(t,s){const i=this.aV(),e=(i.name=t.toLowerCase(),i.G$t=0,xu.eo(i.params,s),yield*this.lGt(xu.CX.Function._X.E$t,i.name));this.T$t&&!e&&console.warn(`[Construct] Function object: called function '${t}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.wV()}C$t(t,s){const i=this.aV();return i.name=t.toLowerCase(),i.G$t=0,i.params=(s||[]).map(t=>"number"==typeof t||"string"==typeof t?t:"boolean"==typeof t&&t?1:0),this.aGt(xu.CX.Function._X.E$t,i.name),this.wV(),i.G$t}}}{const Tu=self.Ns;Tu.CX.Function._X={E$t(t){return!0},F$t(t,s,i){const e=this.H0t();if(!e)return this.T$t&&console.warn("[Construct] Function object: used 'Compare parameter' condition when not in a function call"),!1;let h=e.params,r=0;return(t=Math.floor(t))<0||t>=h.length?this.T$t&&console.warn(`[Construct] Function object: in function '${e.name}', compared parameter out of bounds (accessed index ${t} of ${h.length})`):r=h[t],Tu.compare(r,s,i)}}}{const _u=self.Ns;_u.CX.Function.prt={CallFunction(t,s){if(this.Tf.mvt())return this.P$t(t,s);this.A$t(t,s)},k$t(t){const s=this.H0t();s?s.G$t=t:this.T$t&&console.warn("[Construct] Function object: used 'Set return value' when not in a function call")},IGt(t){}}}{const Iu=self.Ns;Iu.CX.Function.mrt={D$t(){const t=this.R$t();return t?t.G$t:0},O$t(){const t=this.H0t();return t?t.params.length:(this.T$t&&console.warn("[Construct] Function object: used 'ParamCount' expression when not in a function call"),0)},L$t(t){t=Math.floor(t);const s=this.H0t();if(s){const i=s.params;return 0<=t&&t<i.length?i[t]:(this.T$t&&console.warn(`[Construct] Function object: in function '${s.name}', accessed parameter out of bounds (accessed index ${t} of ${i.length})`),0)}return this.T$t&&console.warn("[Construct] Function object: used 'Param' expression when not in a function call"),0},Qd(t,...s){const i=this.aV(),e=(i.name=t.toLowerCase(),i.G$t=0,i.params=s,this.aGt(Iu.CX.Function._X.E$t,i.name));return this.T$t&&!e&&console.warn(`[Construct] Function object: expression Function.Call("${t}" ...) was used, but no event was triggered. Is the function call spelt incorrectly or no longer used?`),this.wV(),i.G$t}}}{const Cu=self.Ns;Cu.CX.B$t=class extends Cu.fxt{constructor(t){super(t)}vr(){super.vr()}}}{let h=function(){return s.HL().B6()};h;const Ru=self.Ns,Au=self.Ys;Ru.CX.B$t.RIt=class extends Ru.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}Oxt(){return self.N$t}};let s=null;self.N$t=class extends self.zL{constructor(t){super(t),(s=t).dO().DD().OD=this}W$t(t){return h().j$t(t)[0]}V$t(t){return h().j$t(t)[1]}U$t(t){return h().j$t(t)}H$t(t){return h().z$t(t)}J$t(t){Au.Ce(t),h().q$t(t)}$$t(t){const s=h(),i=s.dO(),e=i.UO(t);s.X$t(e)}}}{let n=self.Ns,o=null;n.CX.B$t.Instance=class extends n.sGt{constructor(t,s){super(t,"mouse"),this.Y$t=[!1,!1,!1,!1,!1],this.K$t=0,this.Z$t=0,this.Q$t=0,this.tXt=0,this.sXt=0,this.iXt=0,this.eXt=0,this.hXt=0,this.rXt=!1,this.nXt=0,this.oXt=0,this.fGt([["pointer-lock-change",t=>this.aXt(t)],["pointer-lock-error",t=>this.lXt(t)]]);const i=this.dO().h0();this.O0=new n.F0(n.I0.P0(i,"pointermove",t=>this.uXt(t.data)),n.I0.P0(i,"pointerdown",t=>this.cXt(t.data)),n.I0.P0(i,"pointerup",t=>this.fXt(t.data)),n.I0.P0(i,"dblclick",t=>this.dXt(t.data)),n.I0.P0(i,"wheel",t=>this.pXt(t.data)),n.I0.P0(i,"window-blur",()=>this.A5t()))}vr(){super.vr()}cXt(t){"mouse"===t.pointerType&&(this.K$t=t.pageX-this.Tf.NB(),this.Z$t=t.pageY-this.Tf.WB(),this.mXt(t.lastButtons,t.buttons))}uXt(t){this.nXt=t.movementX,this.oXt=t.movementY,this.N4(n.CX.B$t._X.gXt),this.nXt=0,this.oXt=0,"mouse"===t.pointerType&&(this.K$t=t.pageX-this.Tf.NB(),this.Z$t=t.pageY-this.Tf.WB(),this.mXt(t.lastButtons,t.buttons))}fXt(t){"mouse"===t.pointerType&&this.mXt(t.lastButtons,t.buttons)}mXt(t,s){this.yXt(t,s,1,0),this.yXt(t,s,4,1),this.yXt(t,s,2,2),this.yXt(t,s,8,3),this.yXt(t,s,16,4)}yXt(t,s,i,e){!(t&i)&&s&i?this.SXt(e):t&i&&!(s&i)&&this.wXt(e)}SXt(t){this.Y$t[t]=!0,this.N4(n.CX.B$t._X.bXt),this.Q$t=t,this.tXt=0,this.N4(n.CX.B$t._X.MXt),this.N4(n.CX.B$t._X.vXt)}wXt(t){this.Y$t[t]&&(this.Y$t[t]=!1,this.Q$t=t,this.N4(n.CX.B$t._X.xXt))}dXt(t){this.Q$t=t.button,this.tXt=1,this.N4(n.CX.B$t._X.MXt),this.N4(n.CX.B$t._X.vXt)}pXt(t){this.sXt=t.deltaY<0?1:0,this.iXt=t.deltaX,this.eXt=t.deltaY,this.hXt=t.deltaZ,this.N4(n.CX.B$t._X.GXt)}A5t(){for(let t=0,s=this.Y$t.length;t<s;++t){if(!this.Y$t[t])return;this.Y$t[t]=!1,this.Q$t=t,this.N4(n.CX.B$t._X.xXt)}}j$t(t){const s=this.Tf.TD(),i=this.K$t,e=this.Z$t;if(void 0===t){const h=s.YD(0);return h.Pq(i,e)}{const r=s.$D(t);return r?r.BB(i,e):[0,0]}}z$t(t){return t=Math.floor(t),!!this.Y$t[t]}TXt(){return 0<=this.K$t&&0<=this.Z$t&&this.K$t<this.Tf.dBt()&&this.Z$t<this.Tf.pBt()}q$t(t){o!==t&&(o=t,this.dGt("cursor",t))}async X$t(t){if(!n.fi.vi&&t){const s=t.rvt();if(s){const i=s.qD(),e=s.LGt();if(i&&e&&o!==e){const h=await(o=e).p_t(),r=`url(${h}) ${Math.round(i.TW()*e.Fm())} ${Math.round(i.IW()*e.Um())}, auto`;this.dGt("cursor",r)}}}}aXt(t){this._Xt(t["has-pointer-lock"])}lXt(t){this._Xt(t["has-pointer-lock"]),this.N4(n.CX.B$t._X.IXt)}_Xt(t){this.rXt!==t&&(this.rXt=t,this.rXt?this.N4(n.CX.B$t._X.CXt):this.N4(n.CX.B$t._X.RXt))}GGt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.K$t+","+this.Z$t},{name:t+".debugger.left-button",value:this.Y$t[0]},{name:t+".debugger.middle-button",value:this.Y$t[1]},{name:t+".debugger.right-button",value:this.Y$t[2]},{name:t+".debugger.button-4",value:this.Y$t[3]},{name:t+".debugger.button-5",value:this.Y$t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Tf.TD().E5().map(t=>({name:"$"+t.yf(),value:t.BB(this.K$t,this.Z$t).join(", ")}))}]}}}{const Eu=self.Ns;Eu.CX.B$t._X={MXt(t,s){return this.Q$t===t&&this.tXt===s},bXt(){return!0},AXt(t){return this.Y$t[t]},xXt(t){return this.Q$t===t},EXt(t){const s=this.Tf.$dt(),i=s.ybt(),e=[];return this.TXt()&&e.push([this.K$t,this.Z$t]),Eu.xor(this.Tf.sk().T3t(t,e,i),i)},vXt(t,s,i){if(t!==this.Q$t||s!==this.tXt)return!1;if(!this.TXt())return!1;const e=this.K$t,h=this.Z$t;return this.Tf.sk().T3t(i,[[e,h]],!1)},GXt(t){return 2===t||this.sXt===t},CXt(){return!0},RXt(){return!0},IXt(){return!0},PXt(){return this.rXt},gXt(){return!0}}}{const Pu=self.Ns,Fu=["auto","pointer","text","crosshair","move","help","wait","none"],ku=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];Pu.CX.B$t.prt={FXt(t){this.q$t(Fu[t])},kXt(t){this.q$t(ku[t])},DXt(t){this.X$t(t)},OXt(t){this.mGt("request-pointer-lock",{unadjustedMovement:t})},LXt(){this.dGt("release-pointer-lock")}}}{const Du=self.Ns;Du.CX.B$t.mrt={v2t(t){return this.j$t(t)[0]},x2t(t){return this.j$t(t)[1]},BXt(){return this.K$t},NXt(){return this.Z$t},WXt(){return this.nXt},jXt(){return this.oXt},VXt(){return this.iXt},UXt(){return this.eXt},HXt(){return this.hXt}}}{const Ou=self.Ns;Ou.CX.gamepad=class extends Ou.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const Lu=self.Ns;Lu.CX.gamepad.RIt=class extends Lu.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Bu=self.Ns;class Nu{constructor(t,s,i){this.Gy=t,this.If=s,this.zXt=new Set(i),this.JXt=new Wu,this.qXt=new Wu,this.$Xt=[],this.XXt=[]}YXt(){return this.If}xH(t,s){const i=this.qXt;this.qXt=this.JXt,this.JXt=i,this.JXt.xH(t,s),Bu.Qn(this.$Xt,this.JXt.KXt(),!1),Bu.Qn(this.XXt,this.JXt.KXt(),!1);for(let t=0,s=this.JXt.KXt();t<s;++t){const e=this.qXt.ZXt(t),h=this.JXt.ZXt(t);.5<=h&&e<.5&&(this.$Xt[t]=!0),h<.5&&.5<=e&&(this.XXt[t]=!0)}}KXt(){return this.JXt.KXt()}QXt(){return this.JXt.QXt()}tYt(t){return!((t=Math.floor(t))<0||t>=this.$Xt.length)&&this.$Xt[t]}sYt(t){return!((t=Math.floor(t))<0||t>=this.XXt.length)&&this.XXt[t]}iYt(){this.$Xt.fill(!1),this.XXt.fill(!1)}ZXt(t){return this.JXt.ZXt(t)}AXt(t){return.5<=this.JXt.ZXt(t)}eYt(t){return this.JXt.eYt(t)}qF(){return this.Gy}hYt(){return this.zXt}}class Wu{constructor(){this.rYt=[],this.nYt=[]}xH(s,t){let i=this.rYt,e=0;for(let t=s.length;e<t;++e){const h=s[e];e===i.length?i.push(h.value):i[e]=h.value}e<i.length&&Bu.Xn(i,e),Bu.eo(this.nYt,t)}KXt(){return this.rYt.length}QXt(){return this.nYt.length}ZXt(t){return(t=Math.floor(t))<0||t>=this.rYt.length?0:this.rYt[t]}eYt(t){return(t=Math.floor(t))<0||t>=this.nYt.length?0:this.nYt[t]}}Bu.CX.gamepad.Instance=class extends Bu.sGt{constructor(t,s){super(t,"gamepad"),this.oYt=25,this.aYt=0,this.lYt=-1,this.uYt=new Map,s&&(this.oYt=s[0]),this.cGt("gamepad-connected",t=>this.cYt(t)),this.cGt("gamepad-disconnected",t=>this.fYt(t)),this.cGt("input-update",t=>this.dYt(t));const i=this.dO().h0();this.O0=new Bu.F0(Bu.I0.P0(i,"tick2",()=>this.zY()),Bu.I0.P0(i,"suspend",()=>this._9t()),Bu.I0.P0(i,"resume",()=>this.I9t())),this.dGt("ready")}vr(){super.vr()}cYt(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.uYt.has(s)||(this.uYt.set(s,new Nu(s,i,e)),this.lYt=s,this.N4(Bu.CX.gamepad._X.pYt),this.lYt=-1)}fYt(t){const s=t.index;this.lYt=s,this.N4(Bu.CX.gamepad._X.mYt),this.lYt=-1,this.uYt.delete(s)}dYt(t){for(const s of t)this.gYt(s)}gYt(t){const s=t.index,i=(this.uYt.has(s)||this.cYt(t),this.uYt.get(s));i.xH(t.buttons,t.axes);for(let t=0,s=i.KXt();t<s;++t)i.tYt(t)&&(this.aYt=t)}yYt(t){return this.uYt.get(Math.floor(t))||null}SYt(t){if(-1===t)return[...this.uYt.values()];{const s=this.uYt.get(Math.floor(t));return s?[s]:[]}}zY(){for(const t of this.uYt.values())t.iYt()}_9t(){this.dGt("suspend")}I9t(){this.dGt("resume")}GGt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.aYt},{name:t+".properties.analog-deadzone.name",value:this.oYt}]}]}}}{const ju=self.Ns;ju.CX.gamepad._X={pYt(){return!0},mYt(){return!0},AXt(t,s){const i=this.yYt(t);if(!i)return!1;const e=i.AXt(s);return e&&(this.aYt=s),e},wYt(t,s){const i=this.yYt(t);if(!i)return!1;const e=i.tYt(s);return e&&(this.aYt=s),e},bYt(t,s){const i=this.yYt(t);if(!i)return!1;const e=i.sYt(s);return e&&(this.aYt=s),e},MYt(){return 0<this.uYt.size},vYt(t,s,i,e){s=Math.floor(s);const h=this.yYt(t);if(!h)return!1;let r=h.eYt(s),n;return n=s%2==0?h.eYt(s+1):h.eYt(s-1),r*=100,n*=100,Math.hypot(r,n)<=this.oYt&&(r=0),ju.compare(r,i,e)},xYt(t){const s=this.SYt(t);if(0!==s.length){const i=this.Tf,e=i.Ck(),h=i.kk(),r=h.nV(),n=i.jk(),o=n.oV(),a=n.aV(h);i.cV(!1);for(const l of s)for(let t=0,s=l.KXt();t<s;++t)l.tYt(t)&&(this.lYt=l.qF(),this.aYt=t,e.dV(r),h.pV(o,a),e.mV(r),this.lYt=-1);i.cV(!0),n.wV()}return!1},GYt(t){const s=this.SYt(t);if(0!==s.length){const i=this.Tf,e=i.Ck(),h=i.kk(),r=h.nV(),n=i.jk(),o=n.oV(),a=n.aV(h);i.cV(!1);for(const l of s)for(let t=0,s=l.KXt();t<s;++t)l.sYt(t)&&(this.lYt=l.qF(),this.aYt=t,e.dV(r),h.pV(o,a),e.mV(r),this.lYt=-1);i.cV(!0),n.wV()}return!1},TYt(t,s){s=Math.floor(s);const i=this.yYt(t);if(!i)return!1;const e=i.AXt(s);return e&&(this.aYt=s),e},_Yt(t,s){s=Math.floor(s);const i=this.yYt(t);if(!i)return!1;const e=i.tYt(s);return e&&(this.aYt=s),e},IYt(t,s){s=Math.floor(s);const i=this.yYt(t);if(!i)return!1;const e=i.sYt(s);return e&&(this.aYt=s),e},CYt(t,s){const i=this.yYt(t);if(!i)return!1;const e=i.hYt();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},RYt(){return!0}}}{const Vu=self.Ns;Vu.CX.gamepad.prt={AYt(t,s,i,e){this.dGt("vibrate-dual-rumble",{index:t,duration:s,weakMag:Vu.Cr(i/100,0,1),strongMag:Vu.Cr(e/100,0,1)})},EYt(t,s,i,e,h,r){this.dGt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:Vu.Cr(i/100,0,1),strongMag:Vu.Cr(e/100,0,1),leftMag:Vu.Cr(h/100,0,1),rightMag:Vu.Cr(r/100,0,1)})},PYt(t){this.dGt("reset-vibrate",{index:t})}}}{const Uu=self.Ns;Uu.CX.gamepad.mrt={FYt(){return this.uYt.size},kYt(t){const s=this.yYt(t);return s?s.YXt():""},DYt(){return this.lYt},OYt(t){const i=this.yYt(t);if(!i)return"";let e="";for(let t=0,s=i.QXt();t<s;++t)e+=`Axis ${t}: ${Math.round(100*i.eYt(t))}
`;return e},LYt(t){const i=this.yYt(t);if(!i)return"";let e="";for(let t=0,s=i.KXt();t<s;++t)e+=`Button ${t}: ${Math.round(100*i.ZXt(t))}
`;return e},BYt(t,s){const i=this.yYt(t);return i?i.ZXt(Math.floor(s)):0},NYt(t,s){const i=this.yYt(t);return i?i.eYt(Math.floor(s)):0},WYt(t){const s=this.yYt(t);return s?s.KXt():0},jYt(t){const s=this.yYt(t);return s?s.QXt():0},VYt(t,s){const i=this.yYt(t);return i?100*i.ZXt(Math.floor(s)):0},UYt(t,s){s=Math.floor(s);const i=this.yYt(t);if(!i)return 0;let e=i.eYt(s),h;return h=s%2==0?i.eYt(s+1):i.eYt(s-1),e*=100,h*=100,Math.hypot(e,h)<=this.oYt?0:e},HYt(){return this.aYt},zYt(){return this.aYt}}}{const Hu=self.Ns;Hu.CX.JYt=class extends Hu.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const zu=self.Ns;zu.CX.JYt.RIt=class extends zu.Yxt{constructor(t){super(t),this.qYt=zu.Mr(self.$Yt)}vr(){super.vr()}Dxt(){this.vW().fO(this.Tf)}$$(t){return this.vW().KV(t,{Lv:this.Tf.yk()})}tX(){this.vW().HI()}XYt(){return this.qYt}YYt(t,s,i,e){const h=this.vW(),r=this.qYt;r.Wm(h.Fm()),r.km(h.Um()),r.KYt(t),r.ZYt(s),r.QYt(i),r.tKt(e),r.sKt()}}}{const Ju=self.Ns,qu=self.Ys,$u=Ju.Mr(Ju.fl),Xu=["left","center","right"],Yu=["top","center","bottom"],Ku=["word","cjk","character"],Zu=(Ju.CX.JYt.Instance=class extends Ju.RGt{constructor(t,s){super(t),this._f="",this.iKt=!0,this.eKt=16,this.hKt=16,this.rKt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";if(this.nKt=1,this.oKt=0,this.rI=0,this.dI=0,this.pI=0,this.yI="word",this.aKt=!0,this.lKt=!1,this.uKt=null,this.cKt=null,this.fKt=-1,this.dKt=-1,this.pKt=0,s){this._f=s[0],this.iKt=s[1],this.eKt=s[2],this.hKt=s[3],this.rKt=s[4],i=s[5],this.nKt=s[6],this.oKt=s[7],this.rI=s[8],this.dI=s[9],this.pI=s[10],this.yI=Ku[s[11]];const h=this.qD();h.rB(s[12]),this.lKt=!!s[14]}this.eGt.YYt(this.eKt,this.hKt,this.rKt,i),this.cKt=Ju.Mr(self.mKt,this.eGt.XYt());const e=this.qD();this.cKt.vC(e.Fm(),e.Um()),this.gKt(),this.yKt(),this.Ii.aRt()}vr(){this.SKt(),this.uKt&&(this.uKt.vr(),this.uKt=null),this.cKt.vr(),this.cKt=null,super.vr()}gKt(){const t=this.cKt;t&&(t.YI(this.iKt),t.Rf(this._f),t.yC(this.yI),t.wKt(Xu[this.dI]),t.bKt(Yu[this.pI]),t.MKt(this.oKt),t.iC(this.rI))}vKt(){const t=this.qD();this.cKt.vC(t.Fm(),t.Um()),this.cKt.b5(this.nKt)}yKt(){if(this.lKt){let t=this._f;this.iKt&&(t=Ju.Dh.Tm(t)),this.uKt?this.uKt.Rf(t):this.uKt=Ju.Mr(Ju.Gf,this.Tf,t)}else this.uKt&&(this.uKt.vr(),this.uKt=null)}_v(e){const h=this.Cft.vW(),r=h.hx();if(r){e.eE(r);let t=this.qD(),s=t._N(),i=this.cKt;i.b5(this.nKt),i.xKt(t.gEt()),this.Tf.wk()&&(s=t.tPt(s)),i.vC(t.Fm(),t.Um()),i.XYt().GKt(h.QC()),i.GM(t.AN()),i._v(e,s.yn(),s.Sn(),t.GetAngle()),this.aKt=!1}}qM(){const t={t:this._f,ebbc:this.iKt,csc:this.nKt,csp:this.oKt,lh:this.rI,ha:this.dI,va:this.pI,w:this.yI,cw:this.eGt.XYt().TKt(),ch:this.eGt.XYt()._Kt(),cs:this.eGt.XYt().IKt(),sd:this.eGt.XYt().CKt()};return-1!==this.dKt&&(t.tw={st:this.fKt,en:this.dKt,l:this.pKt}),t}$M(t){if(this.SKt(),this._f=t.t,this.iKt=t.ebbc,this.nKt=t.csc,this.oKt=t.csp,this.rI=t.lh,this.dI=t.ha,this.pI=t.va,t.hasOwnProperty("w")){const i=t.w;this.yI="boolean"==typeof i?i?"word":"character":i}else this.yI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.fKt=e.st,this.dKt=e.en,this.pKt=t.l}const s=this.eGt.XYt();s.KYt(t.cw),s.ZYt(t.ch),s.QYt(t.cs),s.tKt(t.sd),this.gKt(),this.yKt(),-1!==this.dKt&&this.bGt()}Zrt(t){switch(t){case 0:return this.MC();case 1:return this.iKt;case 2:return this.eGt.XYt().TKt();case 3:return this.eGt.XYt()._Kt();case 4:return this.eGt.XYt().IKt();case 5:return this.eGt.XYt().CKt();case 6:return this.RKt();case 7:return this.AKt();case 8:return this.EKt();case 9:return this.PKt();case 10:return this.FKt();case 11:return this.kKt()}}hnt(t,s){switch(t){case 0:this.DKt(s);break;case 1:this.iKt!==!!s&&(this.iKt=!!s,this.gKt());break;case 2:this.eGt.XYt().KYt(s);break;case 3:this.eGt.XYt().ZYt(s);break;case 4:this.eGt.XYt().QYt(s);break;case 5:this.eGt.XYt().tKt(s);break;case 6:this.OKt(s);break;case 7:this.LKt(s);break;case 8:this.BKt(s);break;case 9:this.NKt(s);break;case 10:this.WKt(s);break;case 11:this.jKt(s)}}DKt(t){this._f!==t&&(this._f=t,this.cKt.Rf(t),this.yKt(),this.Tf.tO())}MC(){return this._f}VKt(t,s){this.DKt(t),this.fKt=this.Tf.sD(),this.dKt=this.fKt+s/this.f8().g4(),this.pKt=Ju.Lp(Ju.Dh.Tm(t)),this.cKt.aC(0),this.bGt()}SKt(){this.fKt=-1,this.dKt=-1,this.pKt=0,this.cKt.aC(-1),this.hGt()}UKt(){-1!==this.dKt&&(this.SKt(),this.N4(Ju.CX.JYt._X.HKt),this.Tf.tO())}OKt(t){this.nKt!==t&&(this.nKt=t,this.cKt.b5(this.nKt),this.Tf.tO())}RKt(){return this.nKt}LKt(t){this.oKt!==t&&(this.oKt=t,this.cKt.MKt(this.oKt),this.Tf.tO())}AKt(){return this.oKt}BKt(t){this.rI!==t&&(this.rI=t,this.cKt.iC(this.rI),this.Tf.tO())}EKt(){return this.rI}NKt(t){this.dI!==t&&(this.dI=t,this.gKt(),this.Tf.tO())}PKt(){return this.dI}WKt(t){this.pI!==t&&(this.pI=t,this.gKt(),this.Tf.tO())}FKt(){return this.pI}zKt(t){this.jKt(Ku[t])}jKt(t){this.yI!==t&&(this.yI=t,this.gKt(),this.Tf.tO())}kKt(){return this.yI}JKt(t){this.lKt=!!t,this.yKt()}qKt(){return this.lKt}$Kt(){return this.vKt(),this.cKt.GC()}XKt(){return this.vKt(),this.cKt._C()}YKt(t,s){this.vKt();const i=this.qD(),e=($u.set(t-i.kM(),s-i.LM()),$u.rotate(-i.GetAngle()),$u.offset(i.Fm()*i.TW(),i.Um()*i.IW()),this.cKt.RC($u.yl(),$u.wl()));if(e){const h=e.Eg("tag");if(h)return h.param}return""}KKt(t,s,i){const e=this.YKt(s,i);return e&&Ju.Mh(t,e)}ZKt(t,s){this.vKt(),s=Math.floor(s);const i=this.cKt.EC(t,s);if(!i)return null;const e=this.qD();return $u.set(i._g(),i.Cg()),$u.offset(-e.Fm()*e.TW(),-e.Um()*e.IW()),$u.rotate(e.GetAngle()),$u.offset(e.kM(),e.LM()),{x:$u.yl(),y:$u.wl(),width:i.Fm(),height:i.Um()}}QKt(t){return this.vKt(),this.cKt.PC(t)}ZK(){const s=this.Tf.sD();if(s>=this.dKt)this.SKt(),this.N4(Ju.CX.JYt._X.HKt),this.Tf.tO();else{let t=Ju.zr(this.fKt,this.dKt,s,0,this.pKt);(t=Math.floor(t))!==this.cKt.lC()&&(this.cKt.aC(t),this.Tf.tO())}}GGt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.MC(),aVt:t=>this.DKt(t)},{name:t+".properties.scale.name",value:this.RKt(),aVt:t=>this.OKt(t)},{name:t+".properties.character-spacing.name",value:this.AKt(),aVt:t=>this.LKt(t)},{name:t+".properties.line-height.name",value:this.EKt(),aVt:t=>this.BKt(t)}]}]}Oxt(){return self.tZt}},new WeakMap),Qu=new Map([["left",0],["center",1],["right",2]]),tc=new Map([["top",0],["center",1],["bottom",2]]);self.tZt=class extends self.F6{constructor(){super(),Zu.set(this,self.XB.t4().B6())}get text(){return Zu.get(this).MC()}set text(t){qu.Ce(t);const s=Zu.get(this);s.SKt(),s.DKt(t)}sZt(t,s){qu.Ce(t),qu.Ge(s);const i=Zu.get(this);i.SKt(),i.VKt(t,s)}iZt(){Zu.get(this).UKt()}set eZt(t){qu.Ge(t),Zu.get(this).OKt(t)}get eZt(){return Zu.get(this).RKt()}set hZt(t){qu.Ge(t),Zu.get(this).LKt(t)}get hZt(){return Zu.get(this).AKt()}set lineHeight(t){qu.Ge(t),Zu.get(this).BKt(t)}get lineHeight(){return Zu.get(this).EKt()}set gU(t){qu.Ce(t);const s=Qu.get(t);if(void 0===s)throw new Error("invalid mode");Zu.get(this).NKt(s)}get gU(){return Xu[Zu.get(this).PKt()]}set verticalAlign(t){qu.Ce(t);const s=tc.get(t);if(void 0===s)throw new Error("invalid mode");Zu.get(this).WKt(s)}get verticalAlign(){return Yu[Zu.get(this).FKt()]}set yU(t){if(!Ku.includes(t))throw new Error("invalid mode");Zu.get(this).jKt(t)}get yU(){return Zu.get(this).kKt()}set rZt(t){Zu.get(this).JKt(!!t)}get rZt(){return Zu.get(this).qKt()}get MU(){return Zu.get(this).$Kt()}get vU(){return Zu.get(this).XKt()}nZt(){const t=Zu.get(this);return[t.$Kt(),t.XKt()]}oZt(t,s,i){return qu.Ce(t),qu.Ge(s),qu.Ge(i),Zu.get(this).KKt(t,s,i)}aZt(t,s){return qu.Ge(t),qu.Ge(s),Zu.get(this).YKt(t,s)}lZt(t,s=0){return qu.Ce(t),qu.Ge(s),Zu.get(this).ZKt(t,s)}uZt(t){return qu.Ce(t),Zu.get(this).QKt(t)}}}{const sc=self.Ns;sc.CX.JYt._X={cZt(t,s){return s?this._f===t:sc.Mh(this._f,t)},fZt(){return-1!==this.dKt},HKt(){return!0},dZt(t,s,i){return this.KKt(t,s,i)}}}{const ic=self.Ns;ic.CX.JYt.prt={Rf(t){this.SKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.DKt(t.toString())},pZt(t){this.SKt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.DKt(this._f+t)},mZt(t,s){this.SKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.VKt(t.toString(),s)},gZt(){this.UKt()},b5(t){this.OKt(t)},yZt(t){this.LKt(t)},iC(t){this.BKt(t)},KYt(t,s){let i=!1,e=this.eGt.XYt();for(const h of t)if(" "===h)e.SZt(s),i=!0;else{const r=e.wZt(h);r&&(r.bZt(s),i=!0)}i&&e.MZt(),this.Tf.tO()},jVt(t){this.qD().xM(t),this.Tf.tO()},vZt(t){this.NKt(t)},xZt(t){this.WKt(t)},GZt(t){this.zKt(t)},TZt(t){this.JKt(t)}}}{const ec=self.Ns;ec.CX.JYt.mrt={_Zt(t){const s=this.eGt.XYt().wZt(t);return s?s.IZt():this.eGt.XYt().TKt()},CZt(){return this.hKt},RZt(){return this.nKt},AZt(){return this.oKt},EZt(){return this.rI},Text(){return this._f},PZt(){return this.iKt?ec.Dh.Tm(this._f):this._f},FZt(){return this.$Kt()},kZt(){return this.XKt()},DZt(t,s){return this.YKt(t,s)},OZt(t){return this.QKt(t)},LZt(t,s){const i=this.ZKt(t,s);return i?i.x:0},BZt(t,s){const i=this.ZKt(t,s);return i?i.y:0},NZt(t,s){const i=this.ZKt(t,s);return i?i.width:0},WZt(t,s){const i=this.ZKt(t,s);return i?i.height:0}}}{const hc=self.Ns;self.jZt=class{constructor(t,s,i,e){let h=t.TKt(),r=t._Kt();this.qYt=t,this.VZt=s,this.UZt=new hc.Rect(i,e,i+h,e+r),this.HZt=new hc.Rect,this.zZt=-1,this.JZt()}vr(){this.qYt=null,this.UZt=null,this.HZt=null}JZt(){let t=this.qYt.Fm(),s=this.qYt.Um();this.HZt.I(this.UZt),this.HZt.Ct(t,s),this.HZt.cu(this.qYt.QC())}XYt(){return this.qYt}qZt(){return this.VZt}QC(){return this.HZt}bZt(t){this.zZt=t}IZt(){return this.zZt<0?this.qYt.TKt():this.zZt}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||R.Ho(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},R=(r,C,self.Ns),A=new R.Rect,E=new R.fu,P=new R.ra,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.mKt=class{constructor(t){this.qYt=t,this.GI=0,this.TI=0,this._f="",this.lI=!1,this.mI=null,this.gI=R.Mr(R._m),this.yI="word",this.wI=!1,this.bI=!1,this.dI="left",this.pI="top",this.sz=1,this.$Zt=1,this.XZt=0,this.rI=0,this.bM=R.Mr(R.ra),this.vI=-1,this.xI=0,this.NI=t=>this.WI(t),this.qYt.YZt(this)}vr(){this.qYt.KZt(this),this.bM=null,this.NI=null,this.gI.Sc(),this.gI=null,this.qYt=null,this.mI=null}WI(t){if(t.jm())return{width:0,height:0};const s=t.eg(),i=t.Eg("scale"),e=(i?parseFloat(i.param):this.sz)*this.$Zt,h=t.Eg("scalex"),r=(h?parseFloat(h.param):1)*e,n=t.Eg("scaley"),o=(n?parseFloat(n.param):1)*e,a=this.qYt._Kt()*o+this.rI,l=this.XYt(),u=l.TKt()*r,c=this.ZZt();if(l.QZt()){let i=0,e=0;for(const f of s){let t=u,s=l.wZt(f);s?t=s.IZt()*r:" "===f&&(t=l.tQt()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}XI(){this.bI=!0}sI(){this.XI(),this.wI=!0,this.gI.Sc()}vC(t,s){t<=0||s<=0||this.GI===t&&this.TI===s||(this.GI!==t?this.sI():this.XI(),this.GI=t,this.TI=s)}aC(t){this.vI=Math.floor(t)}lC(){return this.vI}RC(t,s){this.TC();const i=this.gI.Rm();for(const e of i)if(s>e.Cg()&&s<e.Cg()+e.Um())for(const h of e.Xm())if(t>=h._g()&&t<h._g()+h.Fm())return h;return null}*AC(t){this.TC();const s=this.gI.Rm();for(const i of s)for(const e of i.Xm()){const h=e.Eg("tag");h&&R.Mh(h.param,t)&&(yield e)}}EC(t,s){for(const i of this.AC(t)){if(0===s)return i;--s}return null}PC(t){let s=0;for(const i of this.AC(t))++s;return s}TC(){this.NC(),this.WC()}NC(){if(this.wI){!this.lI||this.mI&&this.mI.toString()===this._f||(this.mI=new R.Dh(this._f,{Zp:!0}));const t=-this.ZZt();this.gI._m(this.lI?this.mI.ym():this._f,this.NI,this.GI,this.yI,t),this.wI=!1}}WC(){this.bI&&(this.jC(),this.bI=!1)}jC(){let i=0,e=this.rI,h=R.fo(this.gI.Rm());for(const s of h){s.Tg(NaN),s.Ig(NaN);for(const r of s.Xm())r.Tg(NaN),r.Ig(NaN)}const t=h.reduce((t,s)=>t+s.Um(),0)-e;"center"===this.pI?i=Math.max(Math.floor(this.TI/2-t/2),0):"bottom"===this.pI&&(i=Math.floor(this.TI-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.Um();if(0<t&&i>this.TI-(o-e))break;0<=i&&this.JC(n,i),i+=o}}JC(t,s){let i=0;"center"===this.dI?i=Math.max(Math.floor((this.GI-t.Fm())/2),0):"right"===this.dI&&(i=Math.max(Math.floor(this.GI-t.Fm()),0)),t.Tg(i),t.Ig(s);for(const e of t.Xm())e.jm()||(this.sQt(e,i,s),i+=e.Fm())}sQt(t,s,i){const e=t.Eg("offsetx"),h=(s+=e?r(e.param,t.Um()):0,t.Eg("offsety"));i+=h?r(h.param,t.Um()):0,t.Tg(s),t.Ig(i)}_v(t,s,i,e){this.TC(),this.xI=0;const h=R.fo(this.gI.Rm()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.iQt(t,o,s,i,r,n)}iQt(t,s,i,e,h,r){const n=s._g(),o=s.Cg();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.Um();for(const l of s.Xm())this.XC(t,l,i,e,h,r,a)}}XC(o,a,l,u,c,f,d){let p=a._g(),m=a.Cg();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.eg(),n=a.Fm();if(-1!==this.vI){if(this.xI>=this.vI)return;this.xI+r.length>this.vI&&(r=r.slice(0,this.vI-this.xI),n=this.WI(a).width),this.xI+=r.length}const g=a.Eg("background");if(!(R.up(r)&&!g||a.Pg("hide"))){const y=a.Eg("scale"),S=(y?parseFloat(y.param):this.sz)*this.$Zt,w=a.Eg("scalex"),b=(w?parseFloat(w.param):1)*S,M=a.Eg("scaley"),v=(M?parseFloat(M.param):1)*S,x=this.qYt._Kt()*v,G=this.rI;m+=d-G-x;let t=1,s=a.Eg("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.dw(),P.qa(C(g.param)),P.Sa(P.Ga()*t*this.bM.Ga()),P.ka(),o.GM(P),A.set(p,m,p+n,m+x),A.Bl()>this.GI&&A.Pl(this.GI),E.Du(A,c,f),E.offset(l,u),o.fu(E),o.rw()),a.Eg("color")),e=(i?(P.qa(C(i.param)),P.Sa(this.bM.Ga())):P.I(this.bM),P.Sa(P.Ga()*t),P.ka(),o.GM(P),this.qYt.TKt()*b),h=Math.abs(this.ZZt());for(const T of r){const _=this.qYt.wZt(T);if(_){const I=_.IZt()*b;if(p+I>this.GI+h+1e-5)return;A.set(p,m,p+e,m+x),E.Du(A,c,f),E.offset(l,u),o.Qw(E,_.QC()),p+=I+this.XZt}else p+=this.qYt.tQt()*b+this.XZt}}}}XYt(){return this.qYt}YI(t){this.lI!==(t=!!t)&&(this.lI=t,this.sI())}Q_(){return this.lI}Rf(t){this._f!==t&&(this._f=t,this.sI())}yC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.yI!==t&&(this.yI=t,this.sI())}wKt(t){if(!s.has(t))throw new Error("invalid alignment");this.dI!==t&&(this.dI=t,this.XI())}bKt(t){if(!i.has(t))throw new Error("invalid alignment");this.pI!==t&&(this.pI=t,this.XI())}b5(t){this.sz!==t&&(this.sz=t,this.sI())}M5(){return this.sz}xKt(t){this.$Zt!==t&&(this.$Zt=t,this.sI())}gEt(){return this.$Zt}MKt(t){this.XZt!==t&&(this.XZt=t,this.sI())}ZZt(){return this.XZt}iC(t){this.rI=t,this.sI()}eC(){return this.rI}tE(t){t=R.Cr(t,0,1),this.bM.a=t}GM(t){this.bM.equals(t)||this.bM.I(t)}iE(){return this.bM}GC(){return this.TC(),this.gI.pg()}_C(){this.TC();const t=this.qYt._Kt()*this.sz,s=this.rI,i=t+s;return this.gI.Am()*i-s}}}{const rc=self.Ns,nc={width:256,height:256,eQt:16,hQt:16,characterSet:""};self.$Yt=class{constructor(t){if((t=Object.assign({},nc,t)).width<=0||t.height<=0||t.eQt<=0||t.hQt<=0)throw new Error("invalid size");this.gg=t.width,this.yg=t.height,this.eKt=t.eQt,this.hKt=t.hQt,this.rKt=t.characterSet,this.rQt="",this.nQt=null,this.oQt=!1,this.aQt=-1,this.HZt=new rc.Rect(0,0,1,1),this.lQt=new Map,this.uQt=!0,this.cQt=new Set}vr(){this.HZt=null,this.fQt(),this.lQt=null,this.cQt&&this.cQt.clear(),this.cQt=null}fQt(){for(let t of this.lQt.values())t.vr();this.lQt.clear()}YZt(t){this.cQt.add(t)}KZt(t){this.cQt.delete(t)}sKt(){if(this.uQt){this.fQt();let s=rc.Dp(this.rKt),h=Math.floor(this.gg/this.eKt),t=Math.floor(this.yg/this.hKt),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.lQt.has(i)){let t=e%h,s=Math.floor(e/h);this.lQt.set(i,rc.Mr(self.jZt,this,i,t*this.eKt,s*this.hKt))}}if(this.oQt=!1,this.aQt=-1,Array.isArray(this.nQt))for(let s of this.nQt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.eKt)for(let s of t){let t=this.lQt.get(s);t?(t.bZt(i),this.oQt=!0):" "===s&&(this.aQt=i,this.oQt=!0)}}this.uQt=!1;for(let t of this.cQt)t.sI()}}MZt(){this.oQt=!0;for(const t of this.cQt)t.sI()}wZt(t){return this.sKt(),this.lQt.get(t)||null}QZt(){return this.oQt}Wm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.gg!==t&&(this.gg=t,this.uQt=!0)}Fm(){return this.gg}km(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.yg!==t&&(this.yg=t,this.uQt=!0)}Um(){return this.yg}GKt(t){if(!this.HZt.equals(t)){this.HZt.I(t);for(const s of this.lQt.values())s.JZt()}}QC(){return this.HZt}KYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.eKt!==t&&(this.eKt=t,this.uQt=!0)}TKt(){return this.eKt}ZYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.hKt!==t&&(this.hKt=t,this.uQt=!0)}_Kt(){return this.hKt}QYt(t){this.rKt!==t&&(this.rKt=t,this.uQt=!0)}IKt(){return this.rKt}tKt(t){if(this.rQt!==t&&(this.rQt=t,this.uQt=!0,this.nQt=null,this.rQt.length))try{this.nQt=JSON.parse(this.rQt)}catch(t){this.nQt=null}}CKt(){return this.rQt}SZt(t){this.aQt!==(t=t<0?-1:t)&&(this.aQt=t,0<=this.aQt)&&(this.oQt=!0)}tQt(){return this.aQt<0?this.eKt:this.aQt}}}{const oc=self.Ns;oc.CX.dQt=class extends oc.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const ac=self.Ns;ac.CX.dQt.RIt=class extends ac.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){this.vW().fO(this.Tf)}$$(t){return this.vW().KV(t,{Lv:this.Tf.yk()})}tX(){this.vW().HI()}}}{let s=function(t){return fc.get(t).pQt()};s;const lc=self.Ns,uc=self.Ys,cc=lc.Mr(lc.Rect),fc=(lc.CX.dQt.Instance=class extends lc.RGt{constructor(t,s){super(t),this.mQt=!0;const i=lc.Mr(self.gQt);(this.SQt=i).yQt=()=>this.wQt(),this.bQt=null,this.MQt=(t,s,i,e,h,r)=>this.vQt(t,s,i,e,h,r),this.xQt=t=>this.GQt(t);let e=this.TQt=!0;s&&(i._Qt(s[0]),i.IQt(lc.Ar(s[1])),i.CQt(s[2]?"one-shot":"continuous-spray"),this.RQt(this.Tf.Qj(s[3])),e=s[4],i.AQt(s[5]),i.EQt(s[6]),i.PQt(s[7]/100),i.FQt(s[8]),i.kQt(s[9]),i.DQt(s[10]),i.OQt(s[11]),i.LQt(s[12]),i.BQt(s[13]),i.NQt(s[14]),i.SetGravity(s[15]),i.WQt(s[16]),i.jQt(s[17]),i.VQt(s[18]),i.UQt(s[19]),i.HQt(s[20])),this.zQt(),this.bQt&&(this.TQt=!1),"one-shot"===i.JQt()?i.qQt():i.$Qt(!0);const h=this.qD();h.rB(e),h.iPt(!0),this.Ii.h0().addEventListener("bboxchange",()=>{h.sPt(this.SQt.GN())}),this.dO().eM().XS()&&h.JEt(),this.tK=t=>this.sK(t),this.dO().h0().addEventListener("afterload",this.tK),this.bGt()}vr(){this.dO().h0().removeEventListener("afterload",this.tK),this.tK=null,this.SQt.vr(),this.SQt=null,this.MQt=null,this.xQt=null,super.vr()}pQt(){return this.SQt}XQt(t){this.SQt._Qt(t),"one-shot"===this.SQt.JQt()&&this.mQt&&this.SQt.YQt(t)}RQt(t){(t=t===this.KB()?null:t)===this.bQt||(this.bQt=t,this.SQt.KQt=t?t=>this.ZQt(t):null,this.bQt)||(this.TQt=!0)}zQt(){const t=this.SQt,s=this.qD();t.QQt(s.ZA()),t.R6t(this.Tf.wk()),t.tts(s.kM()),t.sts(s.LM()),t.its(s.GetAngle()),t.ets(Math.abs(s.gEt()))}wQt(){this.Tf.e4(this.Ii)}_v(t){if(this.TQt){const s=this.Cft.vW(),i=s.hx();if(i){const e=this.qD(),h=e.$D(),r=cc,n=(this.Tf.sL().VDt()?r.set(-1/0,-1/0,1/0,1/0):h.QJ()?h.Aq(e.vN(),r):h.NJ(e.vN(),r),t.eE(i),h.WJ(e.vN()));this.SQt.hts(h.$B()*n),this.SQt._v(t,s.jGt(),r,h.QJ())}}}qM(){const t=this.SQt;return{r:t.rts(),sc:t.nts(),st:t.JQt(),isp:t.ots(),isz:t.ats(),io:t.lts(),gr:t.uts(),xr:t.cts(),yr:t.fts(),spr:t.dts(),szr:t.pts(),grnd:t.gts(),acc:t.yts(),g:t.Sts(),lar:t.wts(),lsr:t.bts(),lor:t.Mts(),dm:t.vts(),to:t.xts(),s:t.Gts(),pcc:t.Tts(),ft:this.mQt,soc:this.bQt?this.bQt.wJ():null,p:t._ts().map(t=>t.toJSON())}}$M(t,s){const i=this.SQt;if(i._Qt(t.r),i.IQt(t.sc),i.CQt(t.st),i.AQt(t.isp),i.EQt(t.isz),i.PQt(t.io),i.FQt(t.gr),i.kQt(t.xr),i.DQt(t.yr),i.OQt(t.spr),i.LQt(t.szr),i.BQt(t.grnd),i.NQt(t.acc),i.SetGravity(t.g),i.WQt(t.lar),i.jQt(t.lsr),i.VQt(t.lor),i.UQt(t.dm),i.HQt(t.to),i.$Qt(t.s),i.Its(t.pcc),this.mQt=t.ft,t.hasOwnProperty("soc")){const r=this.dO().Qj(t.soc);r&&this.RQt(r)}const e=t.p,h=(i.YQt(e.length,!1),i._ts());for(let t=0,s=h.length;t<s;++t)h[t].il(e[t]);"state"===s&&this.bQt&&(i.Cts(),i.Rts(this))}sK(){const t=this.SQt,i=(t.Cts(),t.Rts(this),t._ts());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.Ats();if(h){const r=h.qD();if(r){const n=r.f8();if(n){const o=e.Ets(),a=n.u4();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.dO(),u=l.VD(o);u&&l.e4(u)}}}}}}ZK(){const t=this.Tf.Yk(this.Ii);this.zQt(),this.mQt&&"one-shot"===this.SQt.JQt()&&this.SQt.Pts(),this.SQt.ZK(t),this.SQt.Gts()&&this.Tf.tO(),this.qD().gN(),this.mQt=!1}Fts(t){for(this.mQt&&"one-shot"===this.SQt.JQt()&&this.SQt.Pts();0<t;)this.SQt.ZK(1/60),t-=1/60;this.SQt.Gts()&&this.Tf.tO(),this.qD().gN(),this.mQt=!1}ZQt(t,s){let i,e=(i=(i=(i="number"==typeof s?this.Tf.VD(s):i)&&i.KB()!==this.bQt?null:i)||this.Tf.a5(this.bQt,this.qD().$D(),t.kM(),t.LM())).qD();return e.vC(t.xc(),t.xc()),e.v5(t.GetAngle()),e.tE(t.ZA()),e.EN(this.qD().AN()),e.gN(),e.NN(this.f8(),!0),i.bX(),t.kts(this.MQt),t.Dts(this.xQt),i}vQt(t,s,i,e,h,r){if(!t.wj()){const n=t.qD();n.bN(s,i),n.vC(n.Fm()+e,n.Um()+e),n.v5(n.GetAngle()+h),n.tE(n.ZA()+r),n.gN()}}GQt(t){t.wj()||this.Tf.e4(t)}Zrt(t){const s=this.SQt;switch(t){case 0:return s.rts();case 1:return lc.Er(s.nts());case 2:return"one-shot"===s.JQt()?1:0;case 5:return s.ots();case 6:return s.ats();case 7:return 100*s.lts();case 8:return s.uts();case 9:return s.cts();case 10:return s.fts();case 11:return s.dts();case 12:return s.pts();case 13:return s.gts();case 14:return s.yts();case 15:return s.Sts();case 16:return s.wts();case 17:return s.bts();case 18:return s.Mts();case 19:return s.vts();case 20:return s.xts()}}hnt(t,s){const i=this.SQt;switch(t){case 0:i._Qt(s);break;case 1:i.IQt(lc.Ar(s));break;case 2:i.CQt(s?"one-shot":"continuous-spray");break;case 5:i.AQt(s);break;case 6:i.EQt(s);break;case 7:i.PQt(s/100);break;case 8:i.FQt(s);break;case 9:i.kQt(s);break;case 10:i.DQt(s);break;case 11:i.OQt(s);break;case 12:i.LQt(s);break;case 13:i.BQt(s);break;case 14:i.NQt(s);break;case 15:i.SetGravity(s);break;case 16:i.WQt(s);break;case 17:i.jQt(s);break;case 18:i.VQt(s);break;case 19:i.UQt(s);break;case 20:i.HQt(s)}}GGt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.SQt;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.Ots()},{name:s+".type.name",value:[s+".type.items."+e.JQt()]},{name:i+".is-spraying",value:e.Gts(),aVt:t=>e.$Qt(t)},{name:s+".rate.name",value:e.rts(),aVt:t=>e._Qt(t)},{name:s+".spray-cone.name",value:lc.Er(e.nts()),aVt:t=>e.IQt(lc.Ar(t))},{name:s+".speed.name",value:e.ots(),aVt:t=>e.AQt(t)},{name:s+".size.name",value:e.ats(),aVt:t=>e.EQt(t)},{name:s+".opacity.name",value:e.lts(),aVt:t=>e.PQt(t)},{name:s+".grow-rate.name",value:e.uts(),aVt:t=>e.FQt(t)},{name:s+".x-randomiser.name",value:e.cts(),aVt:t=>e.kQt(t)},{name:s+".y-randomiser.name",value:e.fts(),aVt:t=>e.DQt(t)},{name:s+".initial-speed-randomiser.name",value:e.dts(),aVt:t=>e.OQt(t)},{name:s+".size-randomiser.name",value:e.pts(),aVt:t=>e.LQt(t)},{name:s+".grow-rate-randomiser.name",value:e.gts(),aVt:t=>e.BQt(t)},{name:s+".acceleration.name",value:e.yts(),aVt:t=>e.NQt(t)},{name:s+".gravity.name",value:e.Sts(),aVt:t=>e.SetGravity(t)},{name:s+".angle-randomiser.name",value:e.wts(),aVt:t=>e.WQt(t)},{name:s+".life-speed-randomiser.name",value:e.bts(),aVt:t=>e.jQt(t)},{name:s+".opacity-randomiser.name",value:e.Mts(),aVt:t=>e.VQt(t)},{name:s+".timeout.name",value:e.xts(),aVt:t=>e.HQt(t)}]}]}Oxt(){return self.Lts}},new WeakMap);self.Lts=class extends self.F6{constructor(){super(),fc.set(this,self.XB.t4().B6())}set Bts(t){s(this).$Qt(!!t)}get Bts(){return s(this).Gts()}set rate(t){uc.Ge(t),fc.get(this).XQt(t)}get rate(){return s(this).rts()}set Nts(t){uc.Ge(t),s(this).IQt(t)}get Nts(){return s(this).nts()}set Wts(t){uc.Ge(t),s(this).AQt(t)}get Wts(){return s(this).ots()}set jts(t){uc.Ge(t),s(this).EQt(t)}get jts(){return s(this).ats()}set Vts(t){uc.Ge(t),s(this).PQt(t)}get Vts(){return s(this).lts()}set Uts(t){uc.Ge(t),s(this).kQt(t)}get Uts(){return s(this).cts()}set Hts(t){uc.Ge(t),s(this).DQt(t)}get Hts(){return s(this).fts()}set zts(t){uc.Ge(t),s(this).OQt(t)}get zts(){return s(this).dts()}set Jts(t){uc.Ge(t),s(this).LQt(t)}get Jts(){return s(this).pts()}set qts(t){uc.Ge(t),s(this).FQt(t)}get qts(){return s(this).uts()}set $ts(t){uc.Ge(t),s(this).BQt(t)}get $ts(){return s(this).gts()}set acceleration(t){uc.Ge(t),s(this).NQt(t)}get acceleration(){return s(this).yts()}set Xts(t){uc.Ge(t),s(this).SetGravity(t)}get Xts(){return s(this).Sts()}set Yts(t){uc.Ge(t),s(this).WQt(t)}get Yts(){return s(this).wts()}set Kts(t){uc.Ge(t),s(this).jQt(t)}get Kts(){return s(this).bts()}set Zts(t){uc.Ge(t),s(this).VQt(t)}get Zts(){return s(this).Mts()}set timeout(t){uc.Ge(t),s(this).HQt(t)}get timeout(){return s(this).xts()}Qts(t){uc.Ge(t),fc.get(this).Fts(t)}tss(t){const s=fc.get(this);t?s.RQt(s.dO().UO(t)):s.RQt(null)}}}{const dc=self.Ns;dc.CX.dQt._X={Gts(){return this.SQt.Gts()}}}{const pc=self.Ns;pc.CX.dQt.prt={$Qt(t){this.SQt.$Qt(0!==t)},_Qt(t){this.XQt(t)},sss(t){this.RQt(t)},iss(){this.RQt(null)},IQt(t){this.SQt.IQt(pc.Ar(t))},AQt(t){this.SQt.AQt(t)},EQt(t){this.SQt.EQt(t)},PQt(t){this.SQt.PQt(t/100)},FQt(t){this.SQt.FQt(t)},ess(t){this.SQt.kQt(t)},hss(t){this.SQt.DQt(t)},rss(t){this.SQt.OQt(t)},nss(t){this.SQt.LQt(t)},oss(t){this.SQt.BQt(t)},ass(t){this.SQt.NQt(t)},SetGravity(t){this.SQt.SetGravity(t)},lss(t){this.SQt.WQt(t)},uss(t){this.SQt.jQt(t)},css(t){this.SQt.VQt(t)},HQt(t){this.SQt.HQt(t)},fss(t){this.Fts(t)},jVt(t){this.qD().xM(t),this.Tf.tO()}}}{const mc=self.Ns;mc.CX.dQt.mrt={dss(){return this.SQt.Ots()},pss(){return this.SQt.rts()},mss(){return mc.Er(this.SQt.nts())},gss(){return this.SQt.ots()},yss(){return this.SQt.ats()},Sss(){return 100*this.SQt.lts()},wss(){return this.SQt.uts()},bss(){return this.SQt.cts()},Mss(){return this.SQt.fts()},vss(){return this.SQt.pts()},xss(){return this.SQt.dts()},Gss(){return this.SQt.gts()},Tss(){return this.SQt.yts()},_ss(){return this.SQt.Sts()},Iss(){return this.SQt.wts()},Css(){return this.SQt.bts()},Rss(){return this.SQt.Mts()},Ass(){return this.SQt.xts()}}}{const gc=self.Ns,yc=[],Sc=new Set(["continuous-spray","one-shot"]),wc=["fade-to-invisible","timeout-expired","particle-stopped"],bc=gc.Mr(gc.Rect);self.gQt=class{constructor(){this.Ess=0,this.Pss=0,this.Fss="continuous-spray",this.kss=!1,this.Dss=0,this.Oss=!1,this.Lss=0,this.Bss=0,this.Nss=0,this.Wss=0,this.jss=0,this.Vss=1,this.Uss=0,this.Hss=0,this.zss=0,this.Jss=0,this.qss=0,this.$ss=0,this.Xss=0,this.Yss=0,this.Kss=0,this.Zss=0,this.Qss=0,this.tis=0,this.sis=0,this.v0=0,this.iis=0,this.eis=1,this.yQt=null,this.KQt=null,this.his=[],this.WAt=new gc.Rect,this.bM=new gc.ra}vr(){this._0(),gc.Yn(this.his),this.his=null,this.yQt=null,this.KQt=null,this.WAt=null,this.bM=null}_0(){const i=this.his;for(let t=0,s=i.length;t<s;++t)i[t].i2t();gc.er(yc,i),gc.Yn(i),1e3<yc.length&&gc.Xn(yc,1e3),this.kss=!1}qQt(){for(let t=0,s=this.Ess;t<s;++t)this.ris();this.his.length&&(this.kss=!0)}ris(t=!0){let s=null;return yc.length?(s=yc.pop()).nis(this):s=gc.Mr(self.ois,this),this.his.push(s),t?s.YCt(this.KQt):s.YCt(),s}Pts(){const i=this.his,e=this.KQt;for(let t=0,s=i.length;t<s;++t)i[t].YCt(e)}Cts(){const i=this.his,e=this.KQt;for(let t=0,s=i.length;t<s;++t)i[t].ais(e)}Rts(i){const e=this.his;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.Ats();if(r){const n=r.qD();n.DM(h.kM()),n.BM(h.LM()),n.vC(h.xc(),h.xc()),n.tE(h.ZA()),n.v5(h.GetAngle()),n.EN(i.qD().AN()),n.gN()}}}YQt(t,s=!0){const i=this.his;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.i2t(),yc.push(h)}1e3<yc.length&&gc.Xn(yc,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.ris(s)}}_ts(){return this.his}Ots(){return this.his.length}ZK(t){this.lis(t),this.uis(t),this.cis()}lis(t){if("continuous-spray"===this.Fss&&this.kss){this.iis+=t*this.Ess;const s=Math.floor(this.iis);this.iis-=s;for(let t=0;t<s;++t)this.ris()}}Its(t){this.iis=t}Tts(){return this.iis}uis(i){let e=this.WAt,h=(e.set(this.Lss,this.Bss,this.Lss,this.Bss),this.his),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).ZK(i),n.Tmt()?(++r,e.uu(n.GN())):(n.i2t(),yc.push(n))}gc.Xn(h,r),1e3<yc.length&&gc.Xn(yc,1e3)}cis(){"one-shot"===this.Fss&&0===this.his.length&&this.kss&&(this.yQt&&this.yQt(),this.kss=!1)}_v(i,e,h,r){bc.set(e.yn(),e.Sn(),e.Mn(),e.vn()),i.SE(bc),this.bM.I(i.iE());const n=this.his;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.nu(o.GN())&&o._v(i,e,r)}i.wE()}iE(){return this.bM}_Qt(t){this.Ess=+t}rts(){return this.Ess}IQt(t){this.Pss=+t}nts(){return this.Pss}CQt(t){if(!Sc.has(t))throw new Error("invalid spray type");this.Fss=t}JQt(){return this.Fss}$Qt(t){this.kss=!!t}Gts(){return this.kss}QQt(t){this.Dss=+t}fis(){return this.Dss}R6t(t){this.Oss=!!t}dis(){return this.Oss}tts(t){this.Lss=+t}pis(){return this.Lss}sts(t){this.Bss=+t}mis(){return this.Bss}its(t){this.Nss=+t}gis(){return this.Nss}AQt(t){this.Wss=+t}ots(){return this.Wss}EQt(t){this.jss=+t}ats(){return this.jss}ets(t){this.Vss=+t}yis(){return this.Vss}PQt(t){this.Uss=+t}lts(){return this.Uss}FQt(t){this.Hss=+t}uts(){return this.Hss}kQt(t){this.zss=+t}cts(){return this.zss}DQt(t){this.Jss=+t}fts(){return this.Jss}OQt(t){this.qss=+t}dts(){return this.qss}LQt(t){this.$ss=+t}pts(){return this.$ss}BQt(t){this.Xss=+t}gts(){return this.Xss}NQt(t){this.Yss=+t}yts(){return this.Yss}SetGravity(t){this.Kss=+t}Sts(){return this.Kss}WQt(t){this.Zss=+t}wts(){return this.Zss}jQt(t){this.Qss=+t}bts(){return this.Qss}VQt(t){this.tis=+t}Mts(){return this.tis}Sis(t){let s=wc.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.sis=s}UQt(t){this.Sis(wc[t])}wis(){return wc[this.sis]}vts(){return this.sis}HQt(t){this.v0=+t}xts(){return this.v0}hts(t){this.eis=+t}bis(){return this.eis}GN(){return this.WAt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ns),l=new m.fu,u=new m.ra,t=self.devicePixelRatio||1,c=!1;self.ois=class{constructor(t){this.Mis=t,this.G0=!1,this.dl=0,this.pl=0,this.g_t=0,this.iz=0,this.vis=1,this.xis=0,this.Gis=0,this.V7=0,this.Tis=0,this._is=0,this.Iis=0,this.$u=new m.Rect,this.Cis=null,this.Ris=NaN,this.Ais=null,this.Eis=null}nis(t){this.Mis=t}YCt(t){const s=this.Mis;this.G0=!0,this.dl=s.pis()+p(s.cts()),this.pl=s.mis()+p(s.fts()),this.g_t=s.ots()+p(s.dts()),this.iz=s.gis()+p(s.nts()),this.vis=s.lts(),this.xis=this.vis,this.V7=(s.ats()+p(s.pts()))*s.yis(),this.Tis=this.V7/2,this.Gis=s.uts()+p(s.gts()),this._is=0,this.Iis=0,this.Pis(),t?this.Cis||(this.Cis=t(this)):(this.Cis=null,this.Ais=null,this.Eis=null)}ais(t){t?this.Cis&&!this.Cis.wj()||(this.Cis=t(this,this.Ris)):(this.Cis=null,this.Ais=null,this.Eis=null)}kts(t){this.Ais=t}Dts(t){this.Eis=t}i2t(){const t=this.Eis;t&&t(this.Cis),this.Cis=null,this.Ais=null,this.Eis=null}toJSON(){let t;return this.Cis&&this.Cis.qD()&&(t=this.Cis.qD().f8().u4()),[this.dl,this.pl,this.g_t,this.iz,this.vis,this.Gis,this.V7,this._is,this.Iis,t]}il(t){this.dl=t[0],this.pl=t[1],this.g_t=t[2],this.iz=t[3],this.vis=t[4],this.xis=this.vis,this.Gis=t[5],this.V7=t[6],this._is=t[7],this.Iis=t[8],this.Ris=t[9],this.Tis=this.V7/2,this.Pis()}ZK(t){let s=this.Mis,i=this.g_t*t,e=this.iz,h=Math.cos(e)*i,r=Math.sin(e)*i+this._is*t,n=(this.dl+=h,this.pl+=r,this.Gis*t),o=(this.V7+=n,this.Tis=this.V7/2,this.g_t+=s.yts()*t,this._is+=s.Sts()*t,this.Iis+=t,this.Pis(),s.wts()),a=s.bts(),l=s.Mts(),u=0;0!==o&&(u=p(o*t),this.iz+=u),0!==a&&(this.g_t+=p(a*t)),0!==l&&(this.vis=m.Cr(this.vis+p(l*t),0,1));const c=1<=this.V7&&(2===s.vts()?0<this.g_t:this.Iis<s.xts()),f=this.Ais;if(f&&c){let t=s.fis()*this.vis;0===s.vts()&&(t*=1-this.Iis/s.xts());const d=t-this.xis;this.xis=t,f(this.Cis,h,r,n,u,d)}this.G0=c}Tmt(){return this.G0}GN(){return this.$u}Pis(){const t=this.dl,s=this.pl,i=this.Tis;this.$u.set(t-i,s-i,t+i,s+i)}_v(h,r,n){if(!this.Cis){let i=this.Mis,e=i.fis()*this.vis;if(0===i.vts()&&(e*=1-this.Iis/i.xts()),!(e<=0)){const o=this.V7,a=o*i.bis()*t;if(!(a<1)){let t=this.dl,s=this.pl;i.dis()&&(t=t+.5|0,s=s+.5|0),h.XS()?h.bE(t,s,o,e):n||a>h.eP()||a<h.iP()?(u.I(i.iE()),u.Fa(e),h.GM(u),c=!0,l.Fu(this.$u),h.dE(l,r)):(c&&(h.GM(i.iE()),c=!1),h.bE(t,s,a,e))}}}}Ats(){return this.Cis}Ets(){return this.Ris}kM(){return this.dl}LM(){return this.pl}xc(){return this.V7}GetAngle(){return this.iz}ZA(){return this.vis}}}{const Mc=self.Ns;Mc.CX.Text=class extends Mc.fxt{constructor(t){super(t)}vr(){super.vr()}}}{const vc=self.Ns;vc.CX.Text.RIt=class extends vc.Yxt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}$$(t){}tX(){}}}{const xc=self.Ns,Gc=self.Ys,Tc=[0,0,0],_c=["left","center","right"],Ic=["top","center","bottom"],Cc=["ltr","rtl"],Rc=["word","cjk","character"],Ac=new xc.Rect,Ec=new xc.fu,Pc=new xc.ra,Fc=xc.Mr(xc.fl),kc=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),C=(xc.CX.Text.Instance=class extends xc.RGt{constructor(t,s){if(super(t),this._f="",this.iKt=!0,this.Fis="Arial",this.kis=12,this.Dis=0,this.nI=!1,this.oI=!1,this.bM=xc.Mr(xc.ra),this.dI=0,this.pI=0,this.yI="word",this.SI=0,this.Ois="auto",this.Lis=1,this.Bis=null,this.Nis="",this.Wis=!1,this.lKt=!1,this.uKt=null,this.fKt=-1,this.dKt=-1,this.pKt=0,this.jis=xc.Mr(xc.Ey.Ub,this.Tf.eM(),{timeout:5}),this.jis.JI=()=>this.Tf.tO(),this.Vis=()=>this.Uis(),this.His=!1,s){this._f=s[0],this.iKt=!!s[1],this.Fis=s[2],this.kis=s[3],this.Dis=s[4],this.nI=!!s[5],this.oI=!!s[6],this.dI=s[8],this.pI=s[9],this.yI=Rc[s[10]],this.SI=s[11],this.zis(this.Tf.Qj(s[12]));const i=s[7];this.bM.ca(i[0],i[1],i[2]),this.qD().rB(s[13]),this.lKt=!!s[15]}this.Jis(),this.yKt()}vr(){this.zis(null),this.SKt(),this.uKt&&(this.uKt.vr(),this.uKt=null),this.jis.vr(),this.jis=null,super.vr()}Jis(){const t=this.jis;t.Rf(this._f),t.YI(this.iKt),this.jis.Q_()&&this.Bis?this.jis.Em(this.dO().r4t(this.Bis)):this.jis.Em(null),t.KI("nearest"!==this.Tf.yk()),t.ZI(this.Fis),t.iC(this.Dis),t.hC(this.nI),t.nC(this.oI),t.GM(this.bM),t.dC(_c[this.dI]),t.mC(Ic[this.pI]),t.yC(this.yI),t.wC(Cc[this.SI])}vKt(){let t=this.qD(),s=(this.jis.QI(this.kis),this.jis.sC(t.gEt()),t.$D()),i;"auto"===this.Ois?i=s.P9(t.vN()):"fixed"===this.Ois&&(i=this.Lis),t.A6()&&i!==this.jis.xC()&&t.wPt(!0),this.jis.vC(t.Fm(),t.Um(),i)}zis(t){t&&(t.cJ()||t.qL().constructor!==xc.CX.Kht)||t!==this.Bis&&(this.Bis&&this.Bis.h0().removeEventListener("animationframeimagechange",this.Vis),this.Bis=t,this.Bis&&this.Bis.h0().addEventListener("animationframeimagechange",this.Vis),this.Jis(),this.Wis=!1,this.Tf.tO())}Uis(){this.Tf.n4t(this.Bis),this.Tf.tO(),this.His=!0}yKt(){if(this.lKt){let t=this._f;this.iKt&&(t=xc.Dh.Tm(t)),this.uKt?this.uKt.Rf(t):this.uKt=xc.Mr(xc.Gf,this.Tf,t)}else this.uKt&&(this.uKt.vr(),this.uKt=null)}_v(t){const s=this.qD(),i=(this.vKt(),this.His&&(this.His=!1,this.jis.Q_())&&this.Bis&&this.jis.Em(this.dO().r4t(this.Bis)),this.jis.hx());if(i){const e=s.$D();if(0===s.GetAngle()&&0===e.GetAngle()&&0===s.vN()&&!s.A6()&&e.KJ()){const h=s._N(),[r,n]=e.JB(h.yn(),h.Sn()),[o,a]=e.JB(h.Mn(),h.vn()),l=r-Math.round(r),u=n-Math.round(n),[c,f]=(Ac.set(r,n,o,a),Ac.offset(-l,-u),Ec.Fu(Ac),t.yE(t.OE()));this.Tf.sL().rU(t,c,f),t.eE(i),t.Qw(Ec,this.jis.QC()),e.oU(t)}else t.eE(i),s.A6()?this.Pjt(s,t):this.Fjt(s,t)}}Fjt(t,s){let i=t._N();this.Tf.wk()&&(i=this.qis(i)),s.Qw(i,this.jis.QC())}Pjt(s,t){const i=s.SPt();if(s.bPt()){s.KEt(Ac,Ec,!1);let t=Ec;this.Tf.wk()&&(t=this.qis(t)),i.Tv(s.E6(),t,this.jis.QC()),s.wPt(!1)}i._v(t)}qis(t){const s=t.yn()-Math.round(t.yn()),i=t.Sn()-Math.round(t.Sn());return 0==s&&0==i?t:(Ec.I(t),Ec.offset(-s,-i),Ec)}BGt(){const t=this.jis.hx();return t?[t.Fm(),t.Um()]:[100,100]}NGt(){return this.jis.QC()}VGt(){return!1}qM(){const t={t:this._f,c:this.bM.toJSON(),fn:this.Fis,ps:this.kis};return this.iKt&&(t.bbc=this.iKt),0!==this.dI&&(t.ha=this.dI),0!==this.pI&&(t.va=this.pI),"word"!==this.yI&&(t.wr=this.yI),0!==this.Dis&&(t.lho=this.Dis),this.nI&&(t.b=this.nI),this.oI&&(t.i=this.oI),-1!==this.dKt&&(t.tw={st:this.fKt,en:this.dKt,l:this.pKt}),this.Bis&&(t.ioc=this.Bis.wJ()),"fixed"===this.Ois&&(t.fs=this.Lis),t}$M(t){if(this.SKt(),this._f=t.t,this.bM.il(t.c),this.Fis=t.fn,this.kis=t.ps,this.iKt=!!t.hasOwnProperty("bbc")&&t.bbc,this.dI=t.hasOwnProperty("ha")?t.ha:0,this.pI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.yI="boolean"==typeof s?s?"word":"character":s}else this.yI="word";if(this.Dis=t.hasOwnProperty("lho")?t.lho:0,this.nI=!!t.hasOwnProperty("b")&&t.b,this.oI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.fKt=i.st,this.dKt=i.en,this.pKt=i.l}if(t.hasOwnProperty("ioc")){const e=this.dO().Qj(t.ioc);e&&this.zis(e)}else this.zis(null);t.hasOwnProperty("fs")?(this.Ois="fixed",this.Lis=t.fs):this.Ois="auto",this.Jis(),this.yKt(),this.Wis=!1,-1!==this.dKt&&this.bGt()}Zrt(t){switch(t){case 0:return this.MC();case 1:return this.iKt;case 2:return this.$is();case 3:return this.Xis();case 4:return this.EKt();case 5:return this.Yis();case 6:return this.Kis();case 7:return Tc[0]=this.bM.ba(),Tc[1]=this.bM.Ma(),Tc[2]=this.bM.xa(),Tc;case 8:return this.PKt();case 9:return this.FKt();case 10:return this.kKt();case 15:return this.qKt()}}hnt(t,s){switch(t){case 0:this.DKt(s);break;case 1:this.iKt!==!!s&&(this.iKt=!!s,this.Jis());break;case 2:this.Zis(s);break;case 3:this.Qis(s);break;case 4:this.BKt(s);break;case 5:this.tes(s);break;case 6:this.ses(s);break;case 7:const i=this.bM,e=s;i.ba()===e[0]&&i.Ma()===e[1]&&i.xa()===e[2]||(this.bM.ca(e[0],e[1],e[2]),this.Jis());break;case 8:this.NKt(s);break;case 9:this.WKt(s);break;case 10:this.jKt(s)}}TGt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.bM.fa(s,i,e),this.Jis())}DKt(t){this._f!==t&&(this._f=t,this.jis.Rf(t),this.yKt(),this.Wis=!1,this.Tf.tO())}MC(){return this._f}VKt(t,s){this.vKt(),this.DKt(t),this.fKt=this.Tf.sD(),this.dKt=this.fKt+s/this.f8().g4(),this.pKt=this.jis.IC(),this.jis.aC(0),this.bGt()}SKt(){this.fKt=-1,this.dKt=-1,this.pKt=0,this.jis.aC(-1),this.hGt()}UKt(){-1!==this.dKt&&(this.SKt(),this.N4(xc.CX.Text._X.HKt),this.Tf.tO())}Zis(t){this.Fis!==t&&(this.Fis=t,this.jis.ZI(t),this.Tf.tO())}$is(){return this.Fis}tes(t){this.nI!==(t=!!t)&&(this.nI=t,this.jis.hC(t),this.Tf.tO())}Yis(){return this.nI}ses(t){this.oI!==(t=!!t)&&(this.oI=t,this.jis.nC(t),this.Tf.tO())}Kis(){return this.oI}Qis(t){this.kis!==t&&(this.kis=t,this.Tf.tO())}Xis(){return this.kis}ies(t){this.bM.Ca(t)||(this.bM.wa(t),this.jis.GM(this.bM),this.Tf.tO())}ees(){return this.bM}BKt(t){this.Dis!==t&&(this.Dis=t,this.Jis(),this.Tf.tO())}EKt(){return this.Dis}NKt(t){this.dI!==t&&(this.dI=t,this.Jis(),this.Tf.tO())}PKt(){return this.dI}WKt(t){this.pI!==t&&(this.pI=t,this.Jis(),this.Tf.tO())}FKt(){return this.pI}zKt(t){this.jKt(Rc[t])}jKt(t){this.yI!==t&&(this.yI=t,this.Jis(),this.Tf.tO())}kKt(){return this.yI}hes(t){this.SI!==t&&(this.SI=t,this.Jis(),this.Tf.tO())}res(){return this.SI}JKt(t){this.lKt=!!t,this.yKt()}qKt(){return this.lKt}nes(t){this.Ois!==t&&(this.Ois=t,this.Tf.tO())}oes(){return this.Ois}aes(t){this.Lis!==t&&(this.Lis=t,"fixed"===this.Ois)&&this.Tf.tO()}les(){return this.Lis}$Kt(){return this.vKt(),this.jis.GC()}XKt(){return this.vKt(),this.jis._C()}YKt(t,s){this.vKt();const i=this.qD(),e=(Fc.set(t-i.kM(),s-i.LM()),Fc.rotate(-i.GetAngle()),Fc.offset(i.Fm()*i.TW(),i.Um()*i.IW()),Fc.Ct(i.Fm(),i.Um()),Fc.scale(this.jis.Fm(),this.jis.Um()),this.jis.RC(Fc.yl(),Fc.wl()));if(e){const h=e.Eg("tag");if(h)return h.param}return""}KKt(t,s,i){const e=this.YKt(s,i);return e&&xc.Mh(t,e)}ZKt(t,s){this.vKt(),s=Math.floor(s);const i=this.jis.EC(t,s);if(!i)return null;const e=this.qD(),h=this.jis.cC(),r=i._g(),n=i.Cg()-(i.Um()-i.zm())*h,o=i.Fm()*h/this.jis.Fm()*e.Fm(),a=i.Um()*h/this.jis.Um()*e.Um();return Fc.set(r,n),Fc.Ct(this.jis.Fm(),this.jis.Um()),Fc.scale(e.Fm(),e.Um()),Fc.offset(-e.Fm()*e.TW(),-e.Um()*e.IW()),Fc.rotate(e.GetAngle()),Fc.offset(e.kM(),e.LM()),{x:Fc.yl(),y:Fc.wl(),width:o,height:a}}QKt(t){return this.vKt(),this.jis.PC(t)}ues(t){let s=kc.get(t);return null===s?"":`</${s||"span"||"span"}>`}ces(t,s){let i=kc.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async fes(){if(!this.Wis){let t=new xc.Dh(this._f,{Zp:!0}).ym(),s=new Map,h='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.$is()}';`),this.Yis()&&i.push("font-weight: bold;"),this.Kis()&&i.push("font-style: italic;"),"character"===this.kKt()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.Bis?this.dO().r4t(this.Bis):null);if(this.Bis){const o=xc.Mr(xc.Pd),a=[],l=new Map;for(const c of t)if(c.jm()){const f=c.Lg(r);if(f){const d=f.Iy(),p=d.vW().f_t();l.has(p)||(l.set(p,null),a.push(o.Rc(async()=>{const t=await p.eH();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.jm()){const g=m.Lg(r);if(g){const y=g.Iy(),S=y.vW().f_t();u.push(o.Rc(async()=>{const t=await y.vW().p_t(l.get(S));s.set(g,t)}))}}await Promise.all(u);for(const w of l.values())w instanceof ImageBitmap&&w.close&&w.close()}const n=new Map;for(const b of t){let e=b.Fg(),t=[...n.keys()];t.reverse();for(const M of t)e.has(M)&&e.get(M)===n.get(M)||(n.delete(M),h+=this.ues(M));for(const[v,x]of e)n.has(v)||(n.set(v,x),h+=this.ces(v,x));if(b.Nm()&&(h+=xc.bp(xc.Sp(b.eg().join("")),"\n","<br>")),b.jm()&&r){const G=b.Lg(r);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.Tf.yk()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${b.Og()}" width="${G.Fm()}" height="${G.Um()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...n.keys()];e.reverse();for(const _ of e)h+=this.ues(_);h+="</span>",this.Nis=h,this.Wis=!0}return this.Nis}ZK(){const s=this.Tf.sD();if(s>=this.dKt)this.SKt(),this.N4(xc.CX.Text._X.HKt),this.Tf.tO();else{let t=xc.zr(this.fKt,this.dKt,s,0,this.pKt);(t=Math.floor(t))!==this.jis.lC()&&(this.jis.aC(t),this.Tf.tO())}}GGt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.MC(),aVt:t=>this.DKt(t)},{name:t+".properties.font.name",value:this.$is(),aVt:t=>this.Zis(t)},{name:t+".properties.size.name",value:this.Xis(),aVt:t=>this.Qis(t)},{name:t+".properties.line-height.name",value:this.EKt(),aVt:t=>this.BKt(t)},{name:t+".properties.bold.name",value:this.Yis(),aVt:t=>this.tes(t)},{name:t+".properties.italic.name",value:this.Kis(),aVt:t=>this.ses(t)}]}]}Oxt(){return self.des}},new WeakMap),Dc=new Map([["left",0],["center",1],["right",2]]),Oc=new Map([["top",0],["center",1],["bottom",2]]),Lc=["ltr","rtl"];new Set(["auto","fixed"]);self.des=class extends self.F6{constructor(){super(),C.set(this,self.XB.t4().B6())}get text(){return C.get(this).MC()}set text(t){Gc.Ce(t);const s=C.get(this);s.SKt(),s.DKt(t)}sZt(t,s){Gc.Ce(t),Gc.Ge(s);const i=C.get(this);i.SKt(),i.VKt(t,s)}iZt(){C.get(this).UKt()}set uU(t){Gc.Ce(t),C.get(this).Zis(t)}get uU(){return C.get(this).$is()}set fU(t){C.get(this).tes(t)}get fU(){return C.get(this).Yis()}set dU(t){C.get(this).ses(t)}get dU(){return C.get(this).Kis()}set cU(t){Gc.Ge(t),C.get(this).Qis(t)}get cU(){return C.get(this).Xis()}set pes(t){if(Gc.Ue(t),t.length<3)throw new Error("expected 3 elements");Pc.ca(t[0],t[1],t[2]),C.get(this).ies(Pc)}get pes(){const t=C.get(this).ees();return[t.ba(),t.Ma(),t.xa()]}set lineHeight(t){Gc.Ge(t),C.get(this).BKt(t)}get lineHeight(){return C.get(this).EKt()}set gU(t){Gc.Ce(t);const s=Dc.get(t);if(void 0===s)throw new Error("invalid mode");C.get(this).NKt(s)}get gU(){return _c[C.get(this).PKt()]}set verticalAlign(t){Gc.Ce(t);const s=Oc.get(t);if(void 0===s)throw new Error("invalid mode");C.get(this).WKt(s)}get verticalAlign(){return Ic[C.get(this).FKt()]}set yU(t){if(!Rc.includes(t))throw new Error("invalid mode");C.get(this).jKt(t)}get yU(){return C.get(this).kKt()}set SU(t){Gc.Ce(t);const s=Lc.indexOf(t);if(-1===s)throw new Error("invalid text direction");C.get(this).hes(s)}get SU(){return Lc[C.get(this).res()]}set rZt(t){C.get(this).JKt(!!t)}get rZt(){return C.get(this).qKt()}mes(t){Gc.Ge(t);const s=C.get(this);s.nes("fixed"),s.aes(t)}ges(){C.get(this).nes("auto")}get MU(){return C.get(this).$Kt()}get vU(){return C.get(this).XKt()}nZt(){const t=C.get(this);return[t.$Kt(),t.XKt()]}oZt(t,s,i){return Gc.Ce(t),Gc.Ge(s),Gc.Ge(i),C.get(this).KKt(t,s,i)}aZt(t,s){return Gc.Ge(t),Gc.Ge(s),C.get(this).YKt(t,s)}lZt(t,s=0){return Gc.Ce(t),Gc.Ge(s),C.get(this).ZKt(t,s)}uZt(t){return Gc.Ce(t),C.get(this).QKt(t)}yes(t){const s=C.get(this),i=s.dO().UO(t);s.zis(i)}Ses(){return C.get(this).fes()}}}{const Bc=self.Ns;Bc.CX.Text._X={cZt(t,s){return s?this._f===t:Bc.Mh(this._f,t)},fZt(){return-1!==this.dKt},HKt(){return!0},dZt(t,s,i){return this.KKt(t,s,i)}}}{const Nc=self.Ns,Wc=Nc.Mr(Nc.ra);Nc.CX.Text.prt={Rf(t){this.SKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.DKt(t.toString())},pZt(t){this.SKt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.DKt(this._f+t)},mZt(t,s){this.SKt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.VKt(t.toString(),s)},wes(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.Fis&&i===this.nI&&e===this.oI||(this.Zis(t),this.tes(i),this.ses(e))},QI(t){this.Qis(t)},bes(t){Wc.Oa(t),Wc.Cr(),this.ies(Wc)},Mes(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},jVt(t){this.qD().xM(t),this.Tf.tO()},gZt(){this.UKt()},iC(t){this.BKt(t)},vZt(t){this.NKt(t)},xZt(t){this.WKt(t)},GZt(t){this.zKt(t)},wC(t){this.hes(t)},ves(t){this.zis(t)},xes(){return this.fes()},TZt(t){this.JKt(t)},Ges(t,s){this.nes(["auto","fixed"][t]),this.aes(s)}}}{const jc=self.Ns;jc.CX.Text.mrt={Text(){return this._f},PZt(){return this.iKt?jc.Dh.Tm(this._f):this._f},Tes(){return this.Fis},_es(){return this.kis},FZt(){return this.$Kt()},kZt(){return this.XKt()},EZt(){return this.Dis},DZt(t,s){return this.YKt(t,s)},OZt(t){return this.QKt(t)},LZt(t,s){const i=this.ZKt(t,s);return i?i.x:0},BZt(t,s){const i=this.ZKt(t,s);return i?i.y:0},NZt(t,s){const i=this.ZKt(t,s);return i?i.width:0},WZt(t,s){const i=this.ZKt(t,s);return i?i.height:0},Ies(){return this.Nis}}}{const Vc=self.Ns;Vc.olt.BTt=class extends Vc.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const Uc=self.Ns;Uc.olt.BTt.RIt=class extends Uc.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Hc=self.Ns,zc=self.Ys,Jc=self.U6,qc=new Set,$c=(Hc.olt.BTt.Instance=class extends Hc.wTt{constructor(t,s){super(t),this.V2t(!0),s&&(this.V2t(s[0]),this.Wtt(s[1]))}vr(){super.vr()}V2t(t){this.Ii.uRt(!!t)}fc(){return this.Ii.lRt()}Wtt(s){const i=this.Ii.vbt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}e8(){return this.Ii.vbt().get("solidTags")||qc}Ces(){return[...this.e8()].join(" ")}qM(){return{e:this.fc()}}$M(t){this.V2t(t.e)}Zrt(t){if(0===t)return this.fc()}hnt(t,s){0===t&&this.V2t(s)}GGt(){return[{title:"$"+this.X6().yf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.fc(),aVt:t=>this.V2t(t)},{name:"behaviors.solid.properties.tags.name",value:this.Ces(),aVt:t=>this.Wtt(t)}]}]}Oxt(){return self.Res}},new WeakMap);self.Res=class extends Jc{constructor(){super(),$c.set(this,Jc.t4().B6())}set isEnabled(t){$c.get(this).V2t(!!t)}get isEnabled(){return $c.get(this).fc()}set tags(t){zc.Ce(t),$c.get(this).Wtt(t)}get tags(){return $c.get(this).Ces()}}}{const Xc=self.Ns;Xc.olt.BTt._X={fc(){return this.fc()}}}{const Yc=self.Ns;Yc.olt.BTt.prt={V2t(t){this.V2t(t)},Wtt(t){this.Wtt(t)}}}{const Kc=self.Ns;Kc.olt.BTt.mrt={}}{let h=function(i,e,t){const h=i.vbt(),r=e.vbt();if(t){const s=h.get(p),n=(s&&s.delete(e.wJ()),r.get(p));n&&n.delete(i.wJ())}else{let t=h.get(p),s=(t||(t=new Set,h.set(p,t)),r.get(p));s||(s=new Set,r.set(p,s)),t.add(e.wJ()),s.add(i.wJ())}},f=(h,self.Ns),s=self.Ys,i=null,e=null,r=[],d=null,n=null,p="Physics_DisabledCollisions";f.olt.Aes=class extends f.fTt{constructor(t){super(t),(n=this).Ees=null,this.Pes=10,this.Fes=.02,this.kes=null,this.Des=-1,this.Oes=1,this.Les=8,this.Bes=3,this.Nes=!0,this.Tf.nO(this.Wes())}Oxt(){return self.jes}async Wes(){const t=await this.Tf.KF().wO("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{d=t,this.Ves(),s()})})}Ves(){const h=this.Tf.sk(),t=(i=f.olt.Aes.V_t(0,0),e=f.olt.Aes.V_t(0,0),this.Ees=new d.b2World(f.olt.Aes.Ues(0,this.Pes),!0),new d.JSContactListener),s=(t.BeginContact=t=>{const s=d.wrapPointer(t,d.b2Contact),i=f.olt.Aes.Instance.Hes(s.GetFixtureA().GetBody()),e=f.olt.Aes.Instance.Hes(s.GetFixtureB().GetBody());h.g3t(i.K6(),e.K6())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.Ees.SetContactListener(t),new d.JSContactFilter);s.ShouldCollide=(t,s)=>{if(this.Nes)return!0;const i=d.wrapPointer(t,d.b2Fixture),e=d.wrapPointer(s,d.b2Fixture),h=f.olt.Aes.Instance.Hes(i.GetBody()),r=f.olt.Aes.Instance.Hes(e.GetBody()),n=h.K6().KB(),o=r.K6().KB(),a=n.wJ(),l=o.wJ(),u=n.vbt().get(p);if(u&&u.has(l))return!1;const c=o.vbt().get(p);return!c||!c.has(a)},this.Ees.SetContactFilter(s),this.kes=new d.b2WorldManifold}vr(){super.vr()}zes(){return d}Jes(){return this.Ees}qes(){return this.Fes}$es(){return this.Oes}Xes(t){this.Oes=t}Yes(t){this.Des=t}Kes(){return this.Des}Zes(t){this.Les=Math.max(t,1)}Qes(){return this.Les}ths(t){this.Bes=Math.max(t,1)}shs(){return this.Bes}ihs(t,s){this.Zes(t),this.ths(s)}Sts(){return this.Pes}SetGravity(t){t!==this.Pes&&(this.Ees.SetGravity(f.olt.Aes.Ues(0,t)),this.Pes=t,this.ehs())}ehs(){for(const t of this.e5()){const s=f.olt.Aes.Instance.hhs(t);if(s){const i=s.GetBody();i&&i.SetAwake(!0)}}}rhs(){this.Nes=!1}nhs(t,s,i){if(i=!!i,t&&s){if(s.cJ())for(const e of s.vgt())h(t,e,i);else h(t,s,i);this.rhs()}}GetWorldManifold(){return this.kes}static ohs(){return p}static V_t(t,s){if(r.length){const i=r.pop();return i.set_x(t),i.set_y(s),i}{const e=d.b2Vec2;return new e(t,s)}}static ahs(t){r.push(t)}static Ues(t,s){return i.set_x(t),i.set_y(s),i}static lhs(t,s){return e.set_x(t),e.set_y(s),e}static uhs(s){let t=d.b2PolygonShape,i=new t,e=d._malloc(8*s.length),h=0;for(let t=0;t<s.length;++t)d.HEAPF32[e+h>>2]=s[t].get_x(),d.HEAPF32[e+(h+4)>>2]=s[t].get_y(),h+=8;const r=d.wrapPointer(e,d.b2Vec2);return i.Set(r,s.length),d._free(e),i}};const Zc=["fixed","variable"];self.jes=class extends self.Q6{constructor(){super()}set chs(t){s.Ge(t),n.SetGravity(t)}get chs(){return n.Sts()}set fhs(t){const s=Zc.indexOf(t);if(s<0)throw new Error("invalid stepping mode");n.Xes(Zc[s])}get fhs(){return Zc[n.$es()]}set dhs(t){s.Ge(t),n.Zes(t)}get dhs(){return n.Qes()}set phs(t){s.Ge(t),n.ths(t)}get phs(){return n.shs()}mhs(t,s,i){const e=n.dO(),h=e.UO(t),r=e.UO(s);i=!!i,n.nhs(h,r,i)}}}{const Qc=self.Ns;Qc.olt.Aes.RIt=class extends Qc.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{let u=function(t,s){const i=E.get(t).dO();return i.JD(s)};u;const R=self.Ns,A=self.Ys,tf=self.U6,sf=new WeakMap,ef=new WeakMap,hf=new WeakMap,rf=R.olt.Aes.Ues,nf=R.olt.Aes.lhs,of=R.Mr(R.Rect),af=R.Mr(R.fu),E=(R.olt.Aes.Instance=class extends R.wTt{constructor(t,s){super(t);const i=this.z6(),e=this.qD(),h=(this.ghs=i.zes(),this.Ees=i.Jes(),this.Fes=i.qes(),this.yhs=!1,this.Shs=0,this.whs=0,this.bhs=!1,this.Mhs=1,this.vhs=.5,this.xhs=.2,this.Ghs=0,this.Ths=.01,this._hs=!1,this.$yt=!0,this.Ihs=null,this.Chs=[],this.Rhs=[],this.Ahs=[],this.Ehs=new Set,this.Phs=e.kM(),this.Fhs=e.LM(),this.khs=e.GetAngle(),this.oHt=0,this.aHt=0,this.Dhs=!1,s&&(this.yhs=!!s[0],this.Shs=s[1],this.bhs=!!s[2],this.Mhs=s[3],this.vhs=s[4],this.xhs=s[5],this.Ghs=s[6],this.Ths=s[7],this._hs=!!s[8],this.$yt=!!s[9]),this.Tf.h0());this.O0=new R.F0(R.I0.P0(h,"instancedestroy",t=>this.T9t(t.Y6)),R.I0.P0(h,"beforeload",()=>this.QY()),R.I0.P0(h,"afterload",()=>this.sK())),ef.set(this.Ii,this),this.$yt&&this.bGt()}xTt(){this.Ohs()}vr(){this.Lhs(),R.Yn(this.Ahs),this.Ehs.clear(),this.Ihs&&(this.Bhs(),this.Ees.DestroyBody(this.Ihs),this.Ihs=null),super.vr()}Nhs(t){if(this.Ihs){const s=this.Ihs.CreateFixture(t);return this.Chs.push(s),s}}Bhs(){if(this.Ihs){for(const t of this.Chs)this.Ihs.DestroyFixture(t);R.Yn(this.Chs)}}Whs(){const t=this.qD();return t.A6()?(t.KEt(of,af,!1),af):t._N()}jhs(t){this.ghs.destroy(t)}Ohs(){if(this.$yt){const t=this.ghs.b2FixtureDef,i=this.ghs.b2BodyDef,e=this.qD(),s=e.cPt();if(this.whs=this.Shs,s||this.Ii.nRt()||0!==this.whs||(this.whs=1),!this.Ihs){const o=new i;o.set_type(this.yhs?0:2);let t=e.kM()*this.Fes,s=e.LM()*this.Fes;if(2===this.whs){const a=this.Whs();t=a.Hl()*this.Fes,s=a.zl()*this.Fes}o.set_position(nf(t,s)),o.set_angle(e.GetAngle()),o.set_fixedRotation(this.bhs),o.set_linearDamping(this.Ghs),o.set_angularDamping(this.Ths),o.set_bullet(this._hs),this.Ihs=this.Ees.CreateBody(o),this.jhs(o),sf.set(this.Ihs,this)}this.Bhs();const h=new t,r=(h.set_density(this.Mhs),h.set_friction(this.vhs),h.set_restitution(this.xhs),Math.max(Math.abs(e.Fm()),1)),n=Math.max(Math.abs(e.Um()),1);0===this.whs?this.Ii.nRt()?this.Vhs(h):this.Uhs(h,r,n):1===this.whs?this.Hhs(h,e,r,n):this.zhs(h,r,n),this.oHt=e.Fm(),this.aHt=e.Um(),e.mPt(!1),this.jhs(h)}}Hhs(t,s,i,e){let h=this.ghs.b2PolygonShape,r=new h,n=i*this.Fes,o=e*this.Fes,a=s.TW(),l=s.IW();s.Fm()<0&&(a=1-a),s.Um()<0&&(l=1-l);const u=(.5-a)*n,c=(.5-l)*o,f=R.olt.Aes.V_t(u,c);r.SetAsBox(n/2,o/2,f,0),t.set_shape(r),this.Nhs(t),this.jhs(r),R.olt.Aes.ahs(f)}zhs(t,s,i){const e=this.ghs.b2CircleShape,h=new e;h.set_m_radius(Math.min(s,i)*this.Fes*.5),t.set_shape(h),this.Nhs(t),this.jhs(h)}Uhs(t,s,i){const e=this.qD(),h=e.Fm()<0,r=e.Um()<0,n=this.Fes,o=e.pPt(h?-s:s,r?-i:i,0),a=o.Ku(),l=a.length/2,u=[];for(let t=0;t<l;++t)u.push(R.olt.Aes.V_t(a[2*t],a[2*t+1]));h!=r&&u.reverse();const c=R.olt.Aes.qhs.Jhs(u,s*i);for(const f of u)R.olt.Aes.ahs(f);if(c.length)for(const d of c){for(const m of d)m.set_x(m.get_x()*n),m.set_y(m.get_y()*n);const p=R.olt.Aes.uhs(d);t.set_shape(p),this.Nhs(t),this.jhs(p);for(const g of d)R.olt.Aes.ahs(g)}else this.Hhs(t,e,s,i)}Vhs(e){const h=this.Fes,r=R.olt.Aes.V_t,n=R.olt.Aes.ahs,i=[],o=(this.Ii.B6().VHt(i),[]);for(let t=0,s=i.length;t<s;++t){const a=i[t],l=a.x3t(),u=a.G3t();if(u){let i=hf.get(u);if(!i){const c=u.Ku(),f=u.Zu();for(let t=0;t<f;++t)o.push(r(c[2*t],c[2*t+1]));const d=3758096384&a.Jzt();(-2147483648==d||1073741824==d||536870912==d||-2147483648&d&&1073741824&d&&536870912&d)&&o.reverse(),i=R.olt.Aes.qhs.Jhs(o,l.width()*l.height()),hf.set(u,i);for(const p of o)n(p);R.Yn(o)}for(let t=0,s=i.length;t<s;++t){const m=i[t];for(let t=0,s=m.length;t<s;++t)o.push(r((l.Ol()+m[t].get_x())*h,(l.Ll()+m[t].get_y())*h));const g=R.olt.Aes.uhs(o);e.set_shape(g),this.Nhs(e),this.jhs(g);for(const y of o)n(y);R.Yn(o)}}else{o.push(r(l.Ol()*h,l.Ll()*h)),o.push(r(l.Bl()*h,l.Ll()*h)),o.push(r(l.Bl()*h,l.Nl()*h)),o.push(r(l.Ol()*h,l.Nl()*h));const S=R.olt.Aes.uhs(o);e.set_shape(S),this.Nhs(e),this.jhs(S)}for(const w of o)n(w);R.Yn(o)}}$hs(){this.Ihs&&(this.Lhs(),sf.delete(this.Ihs),this.Bhs(),this.Ees.DestroyBody(this.Ihs),this.Ihs=null)}Lhs(){for(const t of this.Rhs)this.Ees.DestroyJoint(t);R.Yn(this.Rhs)}Xhs(){for(const t of this.Ahs)switch(t.type){case 0:this.Yhs(...t.params);break;case 1:this.Khs(...t.params);break;case 2:this.Zhs(...t.params);break;case 3:this.Qhs(...t.params)}}trs(t){const s=this.qD();if(-1===t)return[s.kM(),s.LM()];if(0===t&&this.Ihs){const i=this.Ihs.GetWorldCenter();return[i.get_x()/this.Fes,i.get_y()/this.Fes]}return this.Ii.CMt(t)}srs(t,s,i,e,h){if(this.$yt&&s&&s!==this.Ii){const r=R.olt.Aes.Instance.hhs(s);r&&r.zvt()&&(this.Ahs.push({type:0,params:[t,s.u4(),i,e,h]}),this.Yhs(t,s.u4(),i,e,h))}}Yhs(t,s,i,e,h){if(this.$yt){const r=this.Tf.VD(s);if(r&&r!==this.Ii){const n=R.olt.Aes.Instance.hhs(r);if(n&&n.zvt()){n.Ehs.add(this.Ii),this.irs(!1),n.irs(!1);const[o,a]=this.trs(t),[l,u]=r.CMt(i),c=o-l,f=a-u,d=this.ghs.b2DistanceJointDef,p=this.Fes,m=new d;m.Initialize(this.Ihs,n.GetBody(),rf(o*p,a*p),nf(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.Rhs.push(this.Ees.CreateJoint(m)),this.jhs(m)}}}}ers(t,s){if(this.$yt&&s&&s!==this.Ii){const i=R.olt.Aes.Instance.hhs(s);i&&i.zvt()&&(this.Ahs.push({type:1,params:[t,s.u4()]}),this.Khs(t,s.u4()))}}Khs(t,s){if(this.$yt){const i=this.Tf.VD(s);if(i&&i!==this.Ii){const e=R.olt.Aes.Instance.hhs(i);if(e&&e.zvt()){e.Ehs.add(this.Ii),this.irs(!1),e.irs(!1);const[h,r]=this.trs(t),n=this.ghs.b2RevoluteJointDef,o=this.Fes,a=new n;a.Initialize(this.Ihs,e.GetBody(),rf(h*o,r*o)),this.Rhs.push(this.Ees.CreateJoint(a)),this.jhs(a)}}}}hrs(t,s,i,e){if(this.$yt&&s&&s!==this.Ii){const h=R.olt.Aes.Instance.hhs(s);h&&h.zvt()&&(i=R.Er(i),e=R.Er(e),this.Ahs.push({type:2,params:[t,s.u4(),i,e]}),this.Zhs(t,s.u4(),i,e))}}Zhs(t,s,i,e){if(this.$yt){const h=this.Tf.VD(s);if(h&&h!==this.Ii){const r=R.olt.Aes.Instance.hhs(h);if(r&&r.zvt()){r.Ehs.add(this.Ii),this.irs(!1),r.irs(!1);const[n,o]=this.trs(t),a=this.ghs.b2RevoluteJointDef,l=this.Fes,u=new a;u.Initialize(this.Ihs,r.GetBody(),rf(n*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(R.Ar(i)),u.set_upperAngle(R.Ar(e)),this.Rhs.push(this.Ees.CreateJoint(u)),this.jhs(u)}}}}rrs(t,s,i,e,h,r,n,o,a){if(this.$yt&&s&&s!==this.Ii){const l=R.olt.Aes.Instance.hhs(s);l&&l.zvt()&&(i=R.Er(i),o=R.Er(o),this.Ahs.push({type:3,params:[t,s.u4(),i,e,h,r,n,o,a]}),this.Qhs(t,s.u4(),i,e,h,r,n,o,a))}}Qhs(t,s,i,e,h,r,n,o,a){if(this.$yt){const l=this.Tf.VD(s);if(l&&l!==this.Ii){const u=R.olt.Aes.Instance.hhs(l);if(u&&u.zvt()){u.Ehs.add(this.Ii),this.irs(!1),u.irs(!1);const[c,f]=this.trs(t),d=(i=R.Ar(i),Math.cos(i)),p=Math.sin(i),m=this.ghs.b2PrismaticJointDef,g=this.Fes,y=new m;y.Initialize(this.Ihs,u.GetBody(),rf(c*g,f*g),nf(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!n),y.set_motorSpeed(R.Ar(o)),y.set_maxMotorForce(a),this.Rhs.push(this.Ees.CreateJoint(y)),this.jhs(y)}}}}nrs(){this.$yt&&(this.Lhs(),R.Yn(this.Ahs),this.Ehs.clear())}ors(){for(const t of this.Ehs){const s=R.olt.Aes.Instance.hhs(t);if(!s||!s.zvt())return;s.ars(this.Ii)}this.Ehs.clear()}T9t(t){this.ars(t)}ars(t){let i=t.u4(),e=0;for(let t=0,s=this.Ahs.length;t<s;++t)this.Ahs[e]=this.Ahs[t],e<this.Rhs.length&&(this.Rhs[e]=this.Rhs[t]),this.Ahs[t].params[1]===i?t<this.Rhs.length&&this.Ees.DestroyJoint(this.Rhs[t]):++e;R.Xn(this.Ahs,e),e<this.Rhs.length&&R.Xn(this.Rhs,e),this.Ehs.delete(t)}GetBody(){return this.Ihs}static Hes(t){return sf.get(t)||null}static hhs(t){return ef.get(t)||null}qM(){const t={e:this.$yt,im:this.yhs,pr:this.bhs,d:this.Mhs,fr:this.vhs,re:this.xhs,ld:this.Ghs,ad:this.Ths,b:this._hs,mcj:this.Ahs};if(this.$yt){const s=this.Ihs.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.Ihs.GetAngularVelocity()}return t}QY(){this.Lhs(),R.Yn(this.Ahs),this.Ehs.clear()}$M(t){this.$hs(),this.$yt=t.e,t.hasOwnProperty("im")&&(this.yhs=!!t.im),this.bhs=t.pr,this.Mhs=t.d,this.vhs=t.fr,this.xhs=t.re,this.Ghs=t.ld,this.Ths=t.ad,this._hs=t.b,this.Ahs=t.mcj;const s=this.qD();this.Phs=s.kM(),this.Fhs=s.LM(),this.khs=s.GetAngle(),this.oHt=s.Fm(),this.aHt=s.Um(),this.$yt&&(this.Ohs(),this.Ihs.SetLinearVelocity(rf(t.vx,t.vy)),this.Ihs.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.Ihs.SetAwake(!0),this.Ahs=t.mcj),this.$yt?this.bGt():this.hGt()}sK(){this.$yt&&this.Xhs()}ZK(){if(this.$yt){let t=this.Tf,s=this.z6(),i=0;0===s.$es()?i=t.iD()/60:(i=t.Yk(this.Ii))>1/30&&(i=1/30);const e=t.$Bt();e>s.Kes()&&0<t.iD()&&(0!==i&&this.Ees.Step(i,s.Qes(),s.shs()),this.Ees.ClearForces(),s.Yes(e)),this.irs(!0)}}irs(t){let s=this.Ii,i=s.qD(),e=this.Fes,h=(i.Fm()===this.oHt&&i.Um()===this.aHt&&!i.MPt()||this.Ohs(),this.Ihs),r=i.kM(),n=i.LM(),o=r-this.Phs,a=n-this.Fhs,l=.001<Math.abs(o)||.001<Math.abs(a),u=i.GetAngle()!==this.khs,c=r,f=n;if(2===this.whs){const y=this.Whs();c=y.Hl(),f=y.zl()}l?(u?h.SetTransform(rf(c*e,f*e),i.GetAngle()):h.SetTransform(rf(c*e,f*e),h.GetAngle()),t&&(h.SetLinearVelocity(rf(o,a)),this.Dhs=!0),h.SetAwake(!0)):t&&this.Dhs&&(this.Dhs=!1,h.SetLinearVelocity(rf(0,0)),h.SetTransform(rf(c*e,f*e),h.GetAngle())),!l&&u&&(h.SetTransform(h.GetPosition(),i.GetAngle()),h.SetAwake(!0));const d=h.GetPosition(),p=d.get_x()/e,m=d.get_y()/e,g=h.GetAngle();if((p!==i.kM()||m!==i.LM()||g!==i.GetAngle())&&(i.yN(p,m),i.v5(g),i.gN(),2===this.whs)){const S=this.Whs(),w=S.Hl()-i.kM(),b=S.zl()-i.LM();0==w&&0==b||(i.bN(-w,-b),i.gN())}this.Phs=i.kM(),this.Fhs=i.LM(),this.khs=i.GetAngle()}Zrt(t){switch(t){case 2:return this.lrs();case 3:return this.urs();case 4:return this.crs();case 5:return this.frs();case 6:return this.drs();case 7:return this.prs();case 8:return this.mrs();case 9:return this.zvt()}}hnt(t,s){switch(t){case 2:this.grs(s);break;case 3:this.yrs(s);break;case 4:this.Srs(s);break;case 5:this.wrs(s);break;case 6:this.brs(s);break;case 7:this.Mrs(s);break;case 8:this.vrs(s);break;case 9:this.Uvt(s)}}Uvt(t){t=!!t,this.$yt&&!t?(this.ors(),this.$hs(),this.$yt=!1,this.hGt()):!this.$yt&&t&&(this.$yt=!0,this.Ohs(),this.bGt())}zvt(){return this.$yt}GGt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.zvt(),aVt:t=>this.Uvt(t)},{name:t+".properties.immovable.name",value:this.xrs(),aVt:t=>this.Grs(t)},{name:t+".properties.density.name",value:this.urs(),aVt:t=>this.yrs(t)},{name:t+".properties.friction.name",value:this.crs(),aVt:t=>this.Srs(t)},{name:t+".properties.elasticity.name",value:this.frs(),aVt:t=>this.wrs(t)},{name:t+".properties.linear-damping.name",value:this.drs(),aVt:t=>this.brs(t)},{name:t+".properties.angular-damping.name",value:this.prs(),aVt:t=>this.Mrs(t)}];return this.$yt&&(s.push({name:t+".debugger.is-sleeping",value:!this.Trs()}),s.push({name:t+".debugger.velocity-x",value:this._rs(),aVt:t=>this.Irs(t,this.Crs())}),s.push({name:t+".debugger.velocity-y",value:this.Crs(),aVt:t=>this.Irs(this._rs(),t)}),s.push({name:t+".debugger.angular-velocity",value:R.Er(this.Rrs()),aVt:t=>this.Ars(R.Ar(t))}),s.push({name:t+".debugger.mass",value:this.Ers()})),[{title:"$"+this.X6().yf(),properties:s}]}Prs(t,s,i){const[e,h]=this.trs(i);this.Frs(t,s,e,h)}krs(t,s,i,e){const[h,r]=this.trs(e),n=R.Or(h,r,s,i);this.Frs(Math.cos(n)*t,Math.sin(n)*t,h,r)}Drs(t,s,i){const[e,h]=this.trs(i);this.Frs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Frs(t,s,i,e){if(this.$yt){const h=this.Fes;this.Ihs.ApplyForce(rf(t,s),nf(i*h,e*h),!0)}}Ors(t,s,i){const[e,h]=this.trs(i);this.Lrs(t,s,e,h)}Brs(t,s,i,e){const[h,r]=this.trs(e),n=R.Or(h,r,s,i);this.Lrs(Math.cos(n)*t,Math.sin(n)*t,h,r)}Nrs(t,s,i){const[e,h]=this.trs(i);this.Lrs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Lrs(t,s,i,e){if(this.$yt){const h=this.Fes,r=(this.Ihs.ApplyLinearImpulse(rf(t,s),nf(i*h,e*h),!0),this.qD());this.Phs=r.kM(),this.Fhs=r.LM(),this.Dhs=!1}}Wrs(t){this.$yt&&this.Ihs.ApplyTorque(t,!0)}jrs(t,s){const i=R.Nr(this.qD().GetAngle(),s)?-1:1;this.Wrs(t*i)}Vrs(t,s,i){const e=this.qD(),h=R.Or(e.kM(),e.LM(),s,i),r=R.Nr(e.GetAngle(),h)?-1:1;this.Wrs(t*r)}Ars(t){this.$yt&&(this.Ihs.SetAngularVelocity(t),this.Ihs.SetAwake(!0))}Rrs(){return this.$yt?this.Ihs.GetAngularVelocity():0}Irs(t,s){if(this.$yt){const i=this.Fes,e=(this.Ihs.SetLinearVelocity(rf(t*i,s*i)),this.Ihs.SetAwake(!0),this.qD());this.Phs=e.kM(),this.Fhs=e.LM(),this.Dhs=!1}}Urs(){if(!this.$yt)return[0,0];const t=this.Fes,s=this.Ihs.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}_rs(){return this.$yt?this.Ihs.GetLinearVelocity().get_x()/this.Fes:0}Crs(){return this.$yt?this.Ihs.GetLinearVelocity().get_y()/this.Fes:0}Hrs(t,s){if(this.$yt){const i=this.Fes,e=(this.Ihs.SetTransform(rf(t*i,s*i),this.Ihs.GetAngle()),this.qD());e.yN(t,s),e.gN(),this.Phs=e.kM(),this.Fhs=e.LM()}}yrs(t){if(this.$yt&&this.Mhs!==t){this.Mhs=t;for(const s of this.Chs)s.SetDensity(t);this.Ihs.ResetMassData()}}urs(){return this.$yt?this.Mhs:0}Srs(t){if(this.$yt&&this.vhs!==t){this.vhs=t;for(const s of this.Chs)s.SetFriction(t);if(this.Ihs)for(let t=this.Ihs.GetContactList();this.ghs.getPointer(t);t=t.get_next()){const i=t.get_contact();i&&i.ResetFriction()}}}crs(){return this.$yt?this.vhs:0}wrs(t){if(this.$yt&&this.xhs!==t){this.xhs=t;for(const s of this.Chs)s.SetRestitution(t)}}frs(){return this.$yt?this.xhs:0}brs(t){this.$yt&&this.Ghs!==t&&(this.Ghs=t,this.Ihs.SetLinearDamping(t))}drs(){return this.$yt?this.Ghs:0}Mrs(t){this.$yt&&this.Ths!==t&&(this.Ths=t,this.Ihs.SetAngularDamping(t))}prs(){return this.$yt?this.Ths:0}Grs(t){this.$yt&&this.yhs!==(t=!!t)&&(this.yhs=t,this.Ihs.SetType(this.yhs?0:2),this.Ihs.SetAwake(!0))}xrs(){return this.yhs}grs(t){this.$yt&&this.bhs!==(t=!!t)&&(this.bhs=t,this.Ihs.SetFixedRotation(this.bhs),this.Ihs.SetAngularVelocity(0),this.Ihs.SetAwake(!0))}lrs(){return this.bhs}vrs(t){this.$yt&&this._hs!==(t=!!t)&&(this._hs=t,this.Ihs.SetBullet(this._hs),this.Ihs.SetAwake(!0))}mrs(){return this._hs}zrs(t){this.$yt&&this.Ihs.SetAwake(!!t)}Trs(){return!!this.$yt&&this.Ihs.IsAwake()}Ers(){return this.$yt?this.Ihs.GetMass()/this.Fes:0}Jrs(){return this.$yt?this.Ihs.GetWorldCenter().get_x()/this.Fes:0}qrs(){return this.$yt?this.Ihs.GetWorldCenter().get_y()/this.Fes:0}$rs(){if(!this.$yt)return[0,0];const t=this.Ihs.GetWorldCenter(),s=this.Fes;return[t.get_x()/s,t.get_y()/s]}Xrs(){if(!this.$yt)return 0;let s=0;for(let t=this.Ihs.GetContactList();this.ghs.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const e=i.GetManifold(),h=e.get_pointCount();s+=h}}return s}Yrs(i){if(i=Math.floor(i),this.$yt){let s=0;for(let t=this.Ihs.GetContactList();this.ghs.getPointer(t);t=t.get_next()){const e=t.get_contact();if(e){const h=e.GetManifold(),r=h.get_pointCount();if(i>=s&&i<s+r){const n=i-s,o=this.z6().GetWorldManifold(),a=(e.GetWorldManifold(o),o.get_points(n));return[a.get_x()/this.Fes,a.get_y()/this.Fes]}s+=r}}}return[0,0]}Oxt(){return self.Krs}},new WeakMap);self.Krs=class extends tf{constructor(){super(),E.set(this,tf.t4().B6())}get isEnabled(){return E.get(this).zvt()}set isEnabled(t){E.get(this).Uvt(t)}Zrs(t,s,i=0){A.Ge(t),A.Ge(s),E.get(this).Prs(t,s,i)}Qrs(t,s,i,e=0){A.Ge(t),A.Ge(s),A.Ge(i),E.get(this).krs(t,s,i,e)}tns(t,s,i=0){A.Ge(t),A.Ge(s),E.get(this).Drs(t,s,i)}sns(t,s,i=0){A.Ge(t),A.Ge(s),E.get(this).Ors(t,s,i)}ins(t,s,i,e=0){A.Ge(t),A.Ge(s),A.Ge(i),E.get(this).Brs(t,s,i,e)}ens(t,s,i=0){A.Ge(t),A.Ge(s),E.get(this).Nrs(t,s,i)}hns(t){A.Ge(t),E.get(this).Wrs(t)}rns(t,s){A.Ge(t),A.Ge(s),E.get(this).jrs(t,s)}nns(t,s,i){A.Ge(t),A.Ge(s),A.Ge(i),E.get(this).Vrs(t,s,i)}set angularVelocity(t){A.Ge(t),E.get(this).Ars(t)}get angularVelocity(){return E.get(this).Rrs()}setVelocity(t,s){A.Ge(t),A.Ge(s),E.get(this).Irs(t,s)}ons(){return E.get(this)._rs()}ans(){return E.get(this).Crs()}lns(){return E.get(this).Urs()}uns(t,s){A.Ge(t),A.Ge(s),E.get(this).Hrs(t,s)}set cns(t){A.Ge(t),E.get(this).yrs(t)}get cns(){return E.get(this).urs()}set fns(t){A.Ge(t),E.get(this).Srs(t)}get fns(){return E.get(this).crs()}set dns(t){A.Ge(t),E.get(this).wrs(t)}get dns(){return E.get(this).frs()}set pns(t){A.Ge(t),E.get(this).brs(t)}get pns(){return E.get(this).drs()}set mns(t){A.Ge(t),E.get(this).Mrs(t)}get mns(){return E.get(this).prs()}set gns(t){E.get(this).Grs(t)}get gns(){return E.get(this).xrs()}set yns(t){E.get(this).grs(t)}get yns(){return E.get(this).lrs()}set Sns(t){E.get(this).vrs(t)}get Sns(){return E.get(this).mrs()}get wns(){return E.get(this).Ers()}bns(){return E.get(this).Jrs()}Mns(){return E.get(this).qrs()}vns(){return E.get(this).$rs()}xns(){return E.get(this).Xrs()}Gns(t){return A.Ge(t),E.get(this).Yrs(t)[0]}Tns(t){return A.Ge(t),E.get(this).Yrs(t)[1]}_ns(t){return A.Ge(t),E.get(this).Yrs(t)}set Ins(t){E.get(this).zrs(!!t)}get Ins(){return E.get(this).Trs()}get Cns(){return!E.get(this).Trs()}Rns(t,s,i,e,h){A.Ge(e),A.Ge(h);const r=u(this,s);E.get(this).srs(t,r,i,e,h)}Ans(t,s){const i=u(this,s);E.get(this).ers(t,i)}Ens(t,s,i,e){A.Ge(i),A.Ge(e);const h=u(this,s);E.get(this).hrs(t,h,i,e)}Pns(t,s,i,e,h,r,n,o,a){const l=u(this,s);E.get(this).rrs(t,l,i,e,h,r,n,o,a)}Fns(){E.get(this).nrs()}}}{const lf=self.Ns;lf.olt.Aes._X={kns(){return!this.Trs()},Dns(){return this.xrs()},Ons(t,s,i){if(!this.$yt)return!1;let e=0;if(0===t)e=this._rs();else if(1===t)e=this.Crs();else{const[h,r]=this.Urs();e=Math.hypot(h,r)}return lf.compare(e,s,i)},Lns(t,s){if(!this.$yt)return!1;const i=lf.Er(this.Rrs());return lf.compare(i,t,s)},Bns(t,s){if(!this.$yt)return!1;const i=this.Ers();return lf.compare(i,t,s)},fc(){return this.zvt()}}}{const uf=self.Ns;uf.olt.Aes.prt={ApplyForce(t,s,i){this.Prs(t,s,i)},Nns(t,s,i,e){this.krs(t,s,i,e)},Wns(t,s,i){this.Drs(t,uf.Ar(s),i)},jns(t,s,i){this.Ors(t,s,i)},Vns(t,s,i,e){this.Brs(t,s,i,e)},Uns(t,s,i){this.Nrs(t,uf.Ar(s),i)},ApplyTorque(t){this.Wrs(uf.Ar(t))},Hns(t,s){this.jrs(uf.Ar(t),uf.Ar(s))},zns(t,s,i){this.Vrs(uf.Ar(t),s,i)},SetAngularVelocity(t){this.Ars(uf.Ar(t))},Jns(t,s,i,e,h){if(s){const r=s.rvt(this.Ii);this.srs(t,r,i,e,h)}},qns(t,s){if(s){const i=s.rvt(this.Ii);this.ers(t,i)}},$ns(t,s,i,e){if(s){const h=s.rvt(this.Ii);this.hrs(t,h,uf.Ar(i),uf.Ar(e))}},Xns(t,s,i,e,h,r,n,o,a){if(s){const l=s.rvt(this.Ii);this.rrs(t,l,uf.Ar(i),e,h,r,n,uf.Ar(o),a)}},Yns(){this.nrs()},Kns(t){this.z6().SetGravity(t)},Xes(t){this.z6().Xes(t)},ihs(t,s){this.z6().ihs(t,s)},Zns(t,s){this.Irs(t,s)},Qns(t,s){this.Hrs(t,s)},SetDensity(t){this.yrs(t)},SetFriction(t){this.Srs(t)},tos(t){this.wrs(t)},SetLinearDamping(t){this.brs(t)},SetAngularDamping(t){this.Mrs(t)},sos(t){this.Grs(t)},ios(t,s){this.z6().nhs(this.KB(),t,0!==s)},eos(t){this.grs(0!==t)},SetBullet(t){this.vrs(0!==t)},SetAwake(t){this.zrs(!!t)},V2t(t){this.Uvt(0!==t)}}}{const cf=self.Ns;cf.olt.Aes.mrt={hos(){return this._rs()},ros(){return this.Crs()},nos(){return cf.Er(this.Rrs())},oos(){return this.Ers()},aos(){return this.Jrs()},los(){return this.qrs()},uos(){return this.urs()},fos(){return this.crs()},dos(){return this.frs()},mos(){return this.drs()},gos(){return this.prs()},yos(){return this.Xrs()},Sos(t){return this.Yrs(t)[0]},wos(t){return this.Yrs(t)[1]}}}{let n=function(t){return pf(t.get_x(),t.get_y())},s=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,e(i));return s},e=function(i){let e=[],h=(e.push(i.splice(0,8)),e[0][0]),r=e[0][7];for(;i.length;){let t=i.splice(0,Math.min(i.length,6)),s=t.at(-1);t.push(n(h)),t.push(n(r)),e.push(t),r=s}return e};n,s,e;const ff=self.Ns,df={},pf=(ff.olt.Aes.qhs=df,ff.olt.Aes.V_t),mf=ff.olt.Aes.ahs;df.Mos=function(t,s,i,e,h,r){return t*e+i*r+h*s-s*i-e*h-r*t},df.vos=function(t,s,i,e,h,r,n,o){const a=h-t,l=r-s,u=i-t,c=e-s,f=n-h,d=o-r,p=c*f-u*d,m=(f*l-d*a)/p,g=t+m*u,y=s+m*c,S=df.xos(i,e,t,s,g,y),w=df.xos(g,y,h,r,n,o);return S&&w?pf(g,y):null},df.xos=function(t,s,i,e,h,r){const n=t<=i+.1&&h-.1<=t||i-.1<=t&&t<=h+.1,o=s<=e+.1&&r-.1<=s||e-.1<=s&&s<=r+.1;return n&&o&&df.Gos(t,s,i,e,h,r)},df.Gos=function(t,s,i,e,h,r){if(.1<Math.abs(h-i)){const n=(r-e)/(h-i),o=n*(t-i)+e,a=Math.abs(o-s);return a<.1}return Math.abs(t-i)<.1},df.Tos=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},df.Jhs=function(t,r){let n=df._os(t),o=[];for(let t=0,s=n.length;t<s;++t){let i=n[t],e=[],h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t],l=i[(t+1)%s];h+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),e.push(pf(a.get_x(),a.get_y()))}if((h=Math.abs(h/2))>=.001*r)o.push(e);else for(let t=0,s=e.length;t<s;t++)mf(e[t])}return o=s(o)},df._os=function(t){let s=[],i=0,e,h=0,r,n,o,a=0,l,u,c,f,d,p,m,g,y,S,w=0,b=0,M=0,v=0,x=[],G=[],T=!1,_=[],I=[],C=!1;for(I.push(t);I.length;){for(e=(s=I[0]).length,T=!0,i=0;i<e;i++)if(u=(l=i)<e-1?i+1:i+1-e,c=i<e-2?i+2:i+2-e,f=s[l],d=s[u],p=s[c],df.Mos(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(T=!1,a=1e9,h=0;h<e;h++)h!==l&&h!==u&&(w=h,b=h<e-1?h+1:0,m=s[w],g=s[b],y=df.vos(f.get_x(),f.get_y(),d.get_x(),d.get_y(),m.get_x(),m.get_y(),g.get_x(),g.get_y()))&&((r=(n=d.get_x()-y.get_x())*n+(o=d.get_y()-y.get_y())*o)<a?(v=w,M=b,S=y,a=r):mf(y));if(1e9===a)return[];for(x=[],G=[],w=v,b=M,m=s[w],g=s[b],C=!1,df.Tos(S.get_x(),S.get_y(),g.get_x(),g.get_y())||(x.push(S),C=!0),df.Tos(S.get_x(),S.get_y(),m.get_x(),m.get_y())||(G.push(S),C=!0),C||mf(S),v=-1,M=l;;){if(M===b){if(v<0||v>=e)return[];df.xos(g.get_x(),g.get_y(),s[v].get_x(),s[v].get_y(),f.get_x(),f.get_y())||x.push(s[M]);break}x.push(s[M]),(v=M)-1<0?M=e-1:M--}for(x.reverse(),v=-1,M=u;;){if(M===w){if(v<0||v>=e)return[];M!==w||df.xos(m.get_x(),m.get_y(),s[v].get_x(),s[v].get_y(),d.get_x(),d.get_y())||G.push(s[M]);break}G.push(s[M]),(v=M)+1>e-1?M=0:M++}I.push(x,G),I.shift();break}T&&_.push(I.shift())}return _}}{const gf=self.Ns;gf.olt.Ios=class extends gf.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const yf=self.Ns;yf.olt.Ios.RIt=class extends yf.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Sf=self.Ns,wf=self.Ys,bf=self.U6,Mf=2*Math.PI,vf=Math.PI/2,xf=3*Math.PI/2,Gf=[0,1,8,3,4,2,5,6,9,7],Tf=(Sf.olt.Ios.Instance=class extends Sf.wTt{constructor(t,s){super(t),this.Cos=0,this.Ros=0,this.Aos=0,this.Eos=0,this.Pos=0,this.$yt=!0,this.Fos=0,this.kos=0,this.Dos=0,this.Oos=0,this.Los=0,this.Bos=0,this.wSt=0,this.Nos=0,this.Wos=0,this.jos=0,this.Vos=0,s&&(this.Ros=Gf[s[0]],this.Aos=s[1],this.Oos=this.Tf.GD()*s[3],this.Fos=s[2],this.Eos=s[2],this.Eos+=this.Oos,this.kos=s[4],0!==this.Eos&&(this.Los=this.Tf.GD()*s[5],this.Cos=s[4]/this.Eos*Mf,this.Cos+=this.Los/this.Eos*Mf),this.Bos=this.Tf.GD()*s[7],this.Dos=s[6],this.Pos=s[6],this.Pos+=this.Bos,this.$yt=!!s[8]),5===this.Ros&&(this.Pos=Sf.Ar(this.Pos)),this.YCt(),this.$yt&&this.bGt()}vr(){super.vr()}qM(){return{i:this.Cos,e:this.$yt,mv:this.Ros,w:this.Aos,p:this.Eos,mag:this.Pos,iv:this.wSt,iv2:this.Nos,r:this.Vos,lkv:this.Wos,lkv2:this.jos}}$M(t){this.Cos=t.i,this.Uvt(t.e),this.Ros=t.mv,this.Aos=t.w,this.Eos=t.p,this.Pos=t.mag,this.wSt=t.iv,this.Nos=t.iv2,this.Vos=t.r,this.Wos=t.lkv,this.jos=t.lkv2}YCt(){const t=this.Ii.qD();switch(this.Ros){case 0:this.wSt=t.kM();break;case 1:this.wSt=t.LM();break;case 2:this.wSt=t.Fm(),this.Vos=t.Um()/t.Fm();break;case 3:this.wSt=t.Fm();break;case 4:this.wSt=t.Um();break;case 5:this.wSt=t.GetAngle();break;case 6:this.wSt=t.ZA();break;case 7:this.wSt=0;break;case 8:this.wSt=t.kM(),this.Nos=t.LM();break;case 9:this.wSt=t.NM()}this.Wos=this.wSt,this.jos=this.Nos}Uos(t){switch(t%=Mf,this.Aos){case 0:return Math.sin(t);case 1:return t<=vf?t/vf:t<=xf?1-2*(t-vf)/Math.PI:(t-xf)/vf-1;case 2:return 2*t/Mf-1;case 3:return-2*t/Mf+1;case 4:return t<Math.PI?-1:1}return 0}ZK(){const t=this.Tf.Yk(this.Ii);this.$yt&&0!==t&&(0===this.Eos?this.Cos=0:this.Cos=(this.Cos+t/this.Eos*Mf)%Mf,this.Hos())}Hos(){const t=this.Ii.qD();switch(this.Ros){case 0:t.kM()!==this.Wos&&(this.wSt+=t.kM()-this.Wos),t.DM(this.wSt+this.Uos(this.Cos)*this.Pos),this.Wos=t.kM();break;case 1:t.LM()!==this.Wos&&(this.wSt+=t.LM()-this.Wos),t.BM(this.wSt+this.Uos(this.Cos)*this.Pos),this.Wos=t.LM();break;case 2:t.Wm(this.wSt+this.Uos(this.Cos)*this.Pos),t.km(t.Fm()*this.Vos);break;case 3:t.Wm(this.wSt+this.Uos(this.Cos)*this.Pos);break;case 4:t.km(this.wSt+this.Uos(this.Cos)*this.Pos);break;case 5:t.GetAngle()!==this.Wos&&(this.wSt=Sf.Rr(this.wSt+(t.GetAngle()-this.Wos))),t.v5(this.wSt+this.Uos(this.Cos)*this.Pos),this.Wos=t.GetAngle();break;case 6:t.tE(this.wSt+this.Uos(this.Cos)*this.Pos/100);break;case 8:t.kM()!==this.Wos&&(this.wSt+=t.kM()-this.Wos),t.LM()!==this.jos&&(this.Nos+=t.LM()-this.jos),t.DM(this.wSt+Math.cos(t.GetAngle())*this.Uos(this.Cos)*this.Pos),t.BM(this.Nos+Math.sin(t.GetAngle())*this.Uos(this.Cos)*this.Pos),this.Wos=t.kM(),this.jos=t.LM();break;case 9:t.WM(this.wSt+this.Uos(this.Cos)*this.Pos)}t.gN()}zos(t,s){}Jos(t){this.Eos=t}qos(){return this.Eos}$os(t){this.Pos=t}Xos(t){5===this.Ros&&(t=Sf.Ar(t)),this.$os(t)}Yos(){return this.Pos}Kos(){let t=this.Yos();return 5===this.Ros?Sf.Er(t):t}Zos(t){5===this.Ros&&5!==t&&(this.Pos=Sf.Er(this.Pos)),this.Ros=t,this.YCt()}Qos(){return this.Ros}tas(t){this.Aos=t}sas(){return this.Aos}ias(t){this.Cos=Sf.Cr(t,0,2*Math.PI),this.Hos()}eas(){return this.Cos}Uvt(t){this.$yt=!!t,this.$yt?this.bGt():this.hGt()}zvt(){return this.$yt}Zrt(t){switch(t){case 0:return this.Ros;case 1:return this.Aos;case 2:return this.Fos;case 6:return this.Dos;case 8:return this.$yt}}hnt(t,s){switch(t){case 0:this.Ros=Gf[s],this.YCt();break;case 1:this.Aos=s;break;case 2:this.Fos=s,this.Eos=this.Fos+this.Oos,this.$yt||(0!==this.Eos?(this.Cos=this.kos/this.Eos*Mf,this.Cos+=this.Los/this.Eos*Mf):this.Cos=0);break;case 6:this.Dos=s,this.Pos=this.Dos+this.Bos,5===this.Ros&&(this.Pos=Sf.Ar(this.Pos));break;case 8:this.$yt=!!s}}GGt(){const t="behaviors.sin";return[{title:"$"+this.X6().yf(),properties:[{name:t+".properties.enabled.name",value:this.zvt(),aVt:t=>this.Uvt(t)},{name:t+".properties.period.name",value:this.qos(),aVt:t=>this.Jos(t)},{name:t+".properties.magnitude.name",value:this.Kos(),aVt:t=>this.Xos(t)},{name:t+".debugger.value",value:this.Uos(this.eas())*this.Kos()}]}]}Oxt(){return self.ras}},new WeakMap),_f=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],If=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.ras=class extends bf{constructor(){super(),Tf.set(this,bf.t4().B6())}set nas(t){wf.Ge(t),Tf.get(this).Jos(t)}get nas(){return Tf.get(this).qos()}set oas(t){wf.Ge(t),Tf.get(this).$os(t)}get oas(){return Tf.get(this).Yos()}set aas(t){Tf.get(this).ias(t)}get aas(){return Tf.get(this).eas()}set las(t){wf.Ce(t);const s=_f.indexOf(t);if(-1===s)throw new Error("invalid movement");Tf.get(this).Zos(s)}get las(){return _f[Tf.get(this).Qos()]}set uas(t){wf.Ce(t);const s=If.indexOf(t);if(-1===s)throw new Error("invalid wave");Tf.get(this).tas(s)}get uas(){return If[Tf.get(this).sas()]}get value(){const t=Tf.get(this);return t.Uos(t.eas())*t.Yos()}fas(){Tf.get(this).YCt()}set isEnabled(t){Tf.get(this).Uvt(!!t)}get isEnabled(){return Tf.get(this).zvt()}}}{const Cf=self.Ns;Cf.olt.Ios._X={fc(){return this.zvt()},das(t){return this.Qos()===t},pas(t,s){return Cf.compare(this.qos(),t,s)},mas(t,s){return Cf.compare(this.Kos(),t,s)},gas(t){return this.sas()===t}}}{const Rf=self.Ns;Rf.olt.Ios.prt={V2t(t){this.Uvt(0!==t)},yas(t){this.Jos(t)},Sas(t){this.Xos(t)},was(t){this.Zos(t)},bas(t){this.Aos=t},Mas(t){const s=2*Math.PI;this.ias(t*s%s)},vas(){this.YCt()}}}{const Af=self.Ns;Af.olt.Ios.mrt={xas(){return this.eas()/(2*Math.PI)},Gas(){return this.qos()},Tas(){return this.Kos()},_as(){return this.Uos(this.eas())*this.Kos()}}}{const Ef=self.Ns;Ef.olt.Ias=class extends Ef.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const Pf=self.Ns;Pf.olt.Ias.RIt=class extends Pf.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Ff=self.Ns,kf=self.Ys,Df=self.U6,Of=(Ff.olt.Ias.Instance=class extends Ff.wTt{constructor(t,s){super(t),this.Cas=0,this.Ras=0,this.Aas=0,this.Eas=0,this.Pas=0,this.bGt()}vr(){super.vr()}Fas(t,s,i){this.Cas=t,this.Ras=s,this.Aas=1,this.Eas=s,this.Pas=i,this.Ii.qD().rB(!1),this.Tf.tO()}kas(){this.Pas=0,this.Ii.qD().rB(!0),this.Tf.tO()}Das(){return 0<this.Pas}qM(){return{on:this.Cas,off:this.Ras,s:this.Aas,stl:this.Eas,tl:this.Pas}}$M(t){this.Cas=t.on,this.Ras=t.off,this.Aas=t.s,this.Eas=t.stl,this.Pas=null===t.tl?1/0:t.tl}ZK(){if(!(this.Pas<=0)){const t=this.Tf.Yk(this.Ii);if(this.Pas-=t,this.Pas<=0)return this.Pas=0,this.Ii.qD().rB(!0),this.Tf.tO(),this.Qxt("flashend"),this.oGt(Ff.olt.Ias._X.Oas);this.Eas-=t,this.Eas<=0&&(0===this.Aas?(this.Ii.qD().rB(!1),this.Aas=1,this.Eas+=this.Ras):(this.Ii.qD().rB(!0),this.Aas=0,this.Eas+=this.Cas),this.Tf.tO())}}GGt(){const t="behaviors.flash.debugger";return[{title:"$"+this.X6().yf(),properties:[{name:t+".on-time",value:this.Cas,aVt:t=>this.Cas=t},{name:t+".off-time",value:this.Ras,aVt:t=>this.Ras=t},{name:t+".is-flashing",value:0<this.Pas},{name:t+".time-left",value:this.Pas}]}]}Oxt(){return self.Las}},new WeakMap);self.Las=class extends Df{constructor(){super(),Of.set(this,Df.t4().B6())}Bas(t,s,i){kf.Ge(t),kf.Ge(s),kf.Ge(i),Of.get(this).Fas(t,s,i)}stop(){Of.get(this).kas()}get Nas(){return Of.get(this).Das()}}}{const Lf=self.Ns;Lf.olt.Ias._X={Was(){return this.Das()},Oas(){return!0}}}{const Bf=self.Ns;Bf.olt.Ias.prt={Ias(t,s,i){this.Fas(t,s,i)},jas(){this.kas()}}}{const Nf=self.Ns;Nf.olt.Ias.mrt={}}{const Wf=self.Ns;Wf.olt.Vas=class extends Wf.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const jf=self.Ns;jf.olt.Vas.RIt=class extends jf.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Vf=self.Ns,Uf=self.Ys,Hf=self.U6,zf=(Vf.olt.Vas.Instance=class extends Vf.wTt{constructor(t,s){super(t),this.Uas=0,this.Has=0,this.zas=0,this.Jas=!0,this.qas=!0,this.$as=!1,this.Aas=0,this.Xas=Vf.Mr(Vf.N0),this.Yas=this.Ii.qD().ZA()||1,s&&(this.Uas=s[0],this.Has=s[1],this.zas=s[2],this.Jas=!!s[3],this.qas=!!s[4],this.Aas=this.qas?0:3),this.qas&&(0===this.Uas?(this.Aas=1,0===this.Has&&(this.Aas=2)):(this.Ii.qD().tE(0),this.Tf.tO())),this.bGt()}vr(){super.vr()}qM(){return{fit:this.Uas,wt:this.Has,fot:this.zas,d:this.Jas,s:this.Aas,st:this.Xas.ri(),mo:this.Yas}}$M(t){this.Uas=t.fit,this.Has=t.wt,this.zas=t.fot,this.Jas=t.d,this.Aas=t.s,this.Xas.Set(t.st),this.Yas=t.mo,3===this.Aas?this.hGt():this.bGt()}ZK(){const t=this.Tf.Yk(this.Ii),s=(this.Xas.Rc(t),this.Ii.qD());0===this.Aas&&(s.tE(this.Xas.ri()/this.Uas*this.Yas),this.Tf.tO(),s.ZA()>=this.Yas)&&(s.tE(this.Yas),this.Aas=1,this.Xas.T0(),this.Qxt("fadeinend"),this.N4(Vf.olt.Vas._X.Kas)),1===this.Aas&&this.Xas.ri()>=this.Has&&(this.Aas=2,this.Xas.T0(),this.Qxt("waitend"),this.N4(Vf.olt.Vas._X.Zas)),2===this.Aas&&(0!==this.zas?(s.tE(this.Yas-this.Xas.ri()/this.zas*this.Yas),this.Tf.tO(),s.ZA()<=0&&(this.Aas=3,this.Xas.T0(),this.Qxt("fadeoutend"),this.N4(Vf.olt.Vas._X.Qas),this.Jas)&&this.Tf.e4(this.Ii)):(this.Aas=3,this.Xas.T0())),3===this.Aas&&this.hGt()}tls(){this.qas||this.$as||(this.Yas=this.Ii.qD().ZA()||1,this.$as=!0),3===this.Aas&&this.AE()}sls(){this.AE()}AE(){this.Aas=0,this.Xas.T0(),0===this.Uas?(this.Aas=1,0===this.Has&&(this.Aas=2)):(this.Ii.qD().tE(0),this.Tf.tO()),this.bGt()}ils(t){this.Uas=Math.max(t,0)}els(){return this.Uas}hls(t){this.Has=Math.max(t,0)}rls(){return this.Has}nls(t){this.zas=Math.max(t,0)}ols(){return this.zas}Zrt(t){switch(t){case 0:return this.els();case 1:return this.rls();case 2:return this.ols();case 3:return this.Jas}}hnt(t,s){switch(t){case 0:this.ils(s);break;case 1:this.hls(s);break;case 2:this.nls(s);break;case 3:this.Jas=!!s}}GGt(){const t="behaviors.fade";return[{title:"$"+this.X6().yf(),properties:[{name:t+".properties.fade-in-time.name",value:this.els(),aVt:t=>this.ils(t)},{name:t+".properties.wait-time.name",value:this.rls(),aVt:t=>this.hls(t)},{name:t+".properties.fade-out-time.name",value:this.ols(),aVt:t=>this.nls(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.Aas]]}]}]}Oxt(){return self.als}},new WeakMap);self.als=class extends Hf{constructor(){super(),zf.set(this,Hf.t4().B6())}lls(){zf.get(this).tls()}uls(){zf.get(this).sls()}set cls(t){Uf.Ge(t),zf.get(this).ils(t)}get cls(){return zf.get(this).els()}set fls(t){Uf.Ge(t),zf.get(this).hls(t)}get fls(){return zf.get(this).rls()}set dls(t){Uf.Ge(t),zf.get(this).nls(t)}get dls(){return zf.get(this).ols()}}}{const Jf=self.Ns;Jf.olt.Vas._X={Qas(){return!0},Kas(){return!0},Zas(){return!0}}}{const qf=self.Ns;qf.olt.Vas.prt={pls(){this.tls()},mls(){this.sls()},gls(t){this.ils(t)},yls(t){this.hls(t)},Sls(t){this.nls(t)}}}{const $f=self.Ns;$f.olt.Vas.mrt={wls(){return this.els()},bls(){return this.rls()},Mls(){return this.ols()}}}{const Xf=self.Ns;Xf.olt.vls=class extends Xf.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const Yf=self.Ns;Yf.olt.vls.RIt=class extends Yf.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const Kf=self.Ns,Zf=self.Ys,Qf=self.U6,t0=(Kf.olt.vls.Instance=class extends Kf.wTt{constructor(t,s){super(t);const i=this.qD(),e=(this.g_t=0,this.xls=0,this.oa=0,this.Gls=!1,this.Tls=!1,this._ls=!1,this.$yt=!0,this.Ils=0,this.Cls=0,this.Rls=i.kM(),this.Als=i.LM(),this.khs=i.GetAngle(),this.Els=0,this.Pls=Math.min(Math.abs(i.Fm()),Math.abs(i.Um())/2),this.Fls=!1,s&&(this.g_t=s[0],this.xls=s[1],this.oa=s[2],this.Gls=!!s[3],this.Tls=!!s[4],this._ls=!!s[5],this.$yt=!!s[6]),i.GetAngle());this.Ils=Math.cos(e)*this.g_t,this.Cls=Math.sin(e)*this.g_t,this.$yt&&(this.bGt(),this.Gls)&&this.TTt()}vr(){super.vr()}qM(){const t={dx:this.Ils,dy:this.Cls,lx:this.Rls,ly:this.Als,lka:this.khs,t:this.Els};return 0!==this.xls&&(t.acc=this.xls),0!==this.oa&&(t.g=this.oa),this._ls&&(t.st=this._ls),this.$yt||(t.e=this.$yt),this.Gls&&(t.bos=this.Gls),this.Tls&&(t.sa=this.Tls),t}$M(t){this.Ils=t.dx,this.Cls=t.dy,this.Rls=t.lx,this.Als=t.ly,this.khs=t.lka,this.Els=t.t,this.xls=t.hasOwnProperty("acc")?t.acc:0,this.oa=t.hasOwnProperty("g")?t.g:0,this._ls=!!t.hasOwnProperty("st")&&t.st,this.Gls=!!t.hasOwnProperty("bos")&&t.bos,this.Tls=!!t.hasOwnProperty("sa")&&t.sa,this.Uvt(!t.hasOwnProperty("e")||t.e)}ZK(){if(this.$yt){const h=this.Tf.Yk(this.Ii),r=this.Ii.qD();if(r.GetAngle()!==this.khs){const t=r.GetAngle();if(this.Tls){const s=Kf.kr(0,0,this.Ils,this.Cls);this.Ils=Math.cos(t)*s,this.Cls=Math.sin(t)*s}this.khs=t}let i=0,e=0;if(0!==this.xls){let t=Kf.kr(0,0,this.Ils,this.Cls),s;s=0===this.Ils&&0===this.Cls?r.GetAngle():Kf.Or(0,0,this.Ils,this.Cls),t+=this.xls*h,i=Math.cos(s)*this.xls,e=Math.sin(s)*this.xls,t<0&&(t=0,i=0,e=0),this.Ils=Math.cos(s)*t,this.Cls=Math.sin(s)*t}if(0!==this.oa&&(this.Cls+=this.oa*h,e+=this.oa),this.Rls=r.kM(),this.Als=r.LM(),0!==this.Ils||0!==this.Cls){const n=this.Ils*h+.5*i*h*h,o=this.Cls*h+.5*e*h*h,a=Kf.kr(0,0,n,o);if(this.kls(n,o,a),this.Els+=a,this.Tls&&(0!=n||0!=o)){const l=Kf.Or(0,0,n,o);r.v5(l),this.khs=r.GetAngle()}r.gN()}}}kls(t,s,i){const e=this.qD();if(!this._ls||i<=this.Pls)e.bN(t,s),e.gN(),this._ls&&this.N4(Kf.olt.vls._X.Dls);else{this.Fls=!1;const h=e.kM(),r=e.LM(),n=h+t,o=r+s,a=Kf.Or(0,0,t,s),l=Math.cos(a)*this.Pls,u=Math.sin(a)*this.Pls,c=Math.floor(i/this.Pls);for(let t=1;t<=c;++t)if(e.yN(h+l*t,r+u*t),e.gN(),this.N4(Kf.olt.vls._X.Dls),this.Ii.wj()||this.Fls)return;e.yN(n,o),e.gN(),this.N4(Kf.olt.vls._X.Dls)}}GTt(){if(this.$yt&&this.Gls&&(0!==this.Ils||0!==this.Cls)){const t=this.Tf.Yk(this.Ii),s=this.Ii.qD(),i=this.Tf.sk(),e=i.LO(this.Ii);if(e){i.g3t(this.Ii,e);const h=Kf.kr(0,0,this.Ils,this.Cls),r=i.L3t(this.Ii,this.Rls,this.Als);this.Ils=Math.cos(r)*h,this.Cls=Math.sin(r)*h,s.bN(this.Ils*t,this.Cls*t),s.gN(),this.Tls&&(s.v5(r),this.khs=s.GetAngle(),s.gN()),i.F3t(this.Ii,this.Ils/h,this.Cls/h,Math.max(2.5*h*t,30))||i.O3t(this.Ii,100)}}}Zrt(t){switch(t){case 0:return this.Ols();case 1:return this.Lls();case 2:return this.Bls();case 4:return this.Tls;case 5:return this._ls;case 6:return this.zvt()}}hnt(t,s){switch(t){case 0:this.Nls(s);break;case 1:this.xls=s;break;case 2:this.oa=s;break;case 4:this.Tls=!!s;break;case 5:this._ls=!!s;break;case 6:this.Uvt(!!s)}}Nls(t){const s=Kf.Or(0,0,this.Ils,this.Cls);this.Ils=Math.cos(s)*t,this.Cls=Math.sin(s)*t}Ols(){return Kf.Qr(Kf.kr(0,0,this.Ils,this.Cls),6)}Wls(t){this.xls=t}Lls(){return this.xls}jls(t){this.oa=t}Bls(){return this.oa}Vls(t){const s=Kf.kr(0,0,this.Ils,this.Cls);this.Ils=Math.cos(t)*s,this.Cls=Math.sin(t)*s}Uls(){return Kf.Or(0,0,this.Ils,this.Cls)}Hls(t){this.Gls!==(t=!!t)&&(this.Gls=t,this.$yt)&&(this.Gls?this.TTt():this.MTt())}zls(){return this.Gls}Jls(t){this.Els=t}qls(){return this.Els}Uvt(t){this.$yt=!!t,this.$yt?(this.bGt(),this.Gls&&this.TTt()):(this.hGt(),this.MTt())}zvt(){return this.$yt}GGt(){const t="behaviors.bullet";return[{title:"$"+this.X6().yf(),properties:[{name:t+".debugger.vector-x",value:this.Ils,aVt:t=>this.Ils=t},{name:t+".debugger.vector-y",value:this.Cls,aVt:t=>this.Cls=t},{name:t+".properties.speed.name",value:this.Ols(),aVt:t=>this.Nls(t)},{name:t+".debugger.angle-of-motion",value:Kf.Er(this.Uls())},{name:t+".properties.gravity.name",value:this.Bls(),aVt:t=>this.jls(t)},{name:t+".properties.acceleration.name",value:this.Lls(),aVt:t=>this.Wls(t)},{name:t+".debugger.distance-travelled",value:this.qls()},{name:t+".properties.enabled.name",value:this.zvt(),aVt:t=>this.Uvt(t)}]}]}Oxt(){return self.$ls}},new WeakMap);self.$ls=class extends Qf{constructor(){super(),t0.set(this,Qf.t4().B6())}get speed(){return t0.get(this).Ols()}set speed(t){Zf.Ge(t),t0.get(this).Nls(t)}get acceleration(){return t0.get(this).Lls()}set acceleration(t){Zf.Ge(t),t0.get(this).Wls(t)}get Xts(){return t0.get(this).Bls()}set Xts(t){Zf.Ge(t),t0.get(this).jls(t)}get Xls(){return t0.get(this).Uls()}set Xls(t){Zf.Ge(t),t0.get(this).Vls(t)}get Yls(){return t0.get(this).zls()}set Yls(t){t0.get(this).Hls(!!t)}get Kls(){return t0.get(this).qls()}set Kls(t){Zf.Ge(t),t0.get(this).Jls(t)}get isEnabled(){return t0.get(this).zvt()}set isEnabled(t){t0.get(this).Uvt(t)}}}{const s0=self.Ns;s0.olt.vls._X={Zls(t,s){const i=Math.hypot(this.Ils,this.Cls);return s0.compare(i,t,s)},Qls(t,s){return s0.compare(this.qls(),t,s)},Dls(){return!0},fc(){return this.zvt()}}}{const i0=self.Ns;i0.olt.vls.prt={tus(t){this.Nls(t)},NQt(t){this.Wls(t)},SetGravity(t){this.jls(t)},ius(t){this.Vls(i0.Ar(t))},N3(t){if(t){const s=t.rvt(this.Ii);if(s){const i=this.Ii.qD(),e=this.Tf.sk(),h=this.Tf.Yk(this.Ii),r=i0.kr(0,0,this.Ils,this.Cls),n=e.L3t(this.Ii,this.Rls,this.Als,s);this.Ils=Math.cos(n)*r,this.Cls=Math.sin(n)*r,i.bN(this.Ils*h,this.Cls*h),i.gN(),this.Tls&&(i.v5(n),this.khs=i.GetAngle(),i.gN()),0!==r&&(this.Gls?e.F3t(this.Ii,this.Ils/r,this.Cls/r,Math.max(2.5*r*h,30))||e.O3t(this.Ii,100):e.P3t(this.Ii,this.Ils/r,this.Cls/r,Math.max(2.5*r*h,30),s))}}},eus(t){this.Hls(t)},hus(t){this.Jls(t)},V2t(t){this.Uvt(t)},rus(){this.Fls=!0}}}{const e0=self.Ns;e0.olt.vls.mrt={nus(){return this.Ols()},ous(){return this.Lls()},aus(){return e0.Er(this.Uls())},lus(){return this.qls()},_ss(){return this.Bls()}}}{const h0=self.Ns;h0.olt.fi=class extends h0.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const r0=self.Ns;r0.olt.fi.RIt=class extends r0.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{let v=function(t,s,i,e,h){const r=s*h,n=i*h;return P.Cr(t*h+.5*e*h*h,r,n)};v;const P=self.Ns,n0=self.Ys,o0=self.U6,F=(P.olt.fi.Instance=class extends P.wTt{constructor(t,s){super(t),this.uus=null,this.cus=!1,this.fus=!1,this.dus=!1,this.pus=!1,this.mus=!1,this.gus=!1,this.yus=!1,this.Sus=!1,this.wus=!1,this.bus=!1,this.Mus=null,this.vus=-1,this.xus=0,this.Gus=0,this.Tus=!1,this._us=!1,this.Ius=this.Tf.sk().E3t(this.Ii),this.Cus=-1,this.Rus="stopped",this.Aus=-1,this.mQt=!0,this.Ils=0,this.Cls=0,this.Eus=0,this.Pus=0,this.Fus=0,this.kus=0,this.oa=1500,this.Dus=1500,this.Ous=P.Ar(90),this.Lus=330,this.xls=1500,this.Bus=1500,this.Nus=650,this.Wus=1e3,this.jus=!1,this.Vus=0,this.Uus=0,this.Hus=!0,this.zus=0,this.$yt=!0,s&&(this.Lus=s[0],this.xls=s[1],this.Bus=s[2],this.Nus=s[3],this.oa=s[4],this.Wus=s[5],this.jus=!!s[6],this.Vus=s[7]/1e3,this.Hus=!!s[8],this.$yt=!!s[9]);const i=this.Tf.h0();this.O0=new P.F0(P.I0.P0(i,"instancedestroy",t=>this.T9t(t.Y6)),P.I0.P0(i,"afterload",t=>this.sK())),this.Hus&&this.Jus(),this.$yt&&this.TTt(),this.qus()}vr(){this.uus&&(this.uus.vr(),this.uus=null),this.Mus=null,this.Ius=null,super.vr()}Jus(){if(!this.uus){const t=this.Tf.h0();this.uus=new P.F0(P.I0.P0(t,"keydown",t=>this.h$t(t.data)),P.I0.P0(t,"keyup",t=>this.r$t(t.data)),P.I0.P0(t,"window-blur",()=>this.n$t()),P.I0.P0(t,"keyboard-blur",()=>this.n$t()))}}$us(){this.uus&&(this.uus.vr(),this.uus=null)}T9t(t){this.Mus===t&&(this.Mus=null),this.Ius===t&&(this.Ius=null)}h$t(t){switch(t.key){case"ArrowLeft":this.cus=!0;break;case"ArrowRight":this.fus=!0;break;case"ArrowUp":this.dus=!0}}r$t(t){switch(t.key){case"ArrowLeft":this.cus=!1;break;case"ArrowRight":this.fus=!1;break;case"ArrowUp":this.dus=!1,this.pus=!1}}n$t(){this.cus=!1,this.fus=!1,this.dus=!1,this.pus=!1}qM(){return{ii:this.yus,lfx:this.xus,lfy:this.Gus,lfo:this.Mus?this.Mus.u4():-1,am:this.Rus,en:this.$yt,fallt:this.Aus,ft:this.mQt,dx:this.Ils,dy:this.Cls,ms:this.Lus,acc:this.xls,dec:this.Bus,js:this.Nus,g:this.oa,g1:this.Dus,mf:this.Wus,wof:this._us,woj:this.Ius?this.Ius.u4():-1,ga:this.Ous,edj:this.jus,cdj:this.gus,dj:this.mus,sus:this.Vus,dc:this.Hus,cc:this.zus}}$M(t){this.yus=t.ii,this.xus=t.lfx,this.Gus=t.lfy,this.vus=t.lfo,this.Rus=t.am;const s=t.en;this.Aus=t.fallt||-1,this.mQt=t.ft,this.Ils=t.dx,this.Cls=t.dy,this.Lus=t.ms,this.xls=t.acc,this.Bus=t.dec,this.Nus=t.js,this.oa=t.g,this.Dus=t.g1,this.Wus=t.mf,this._us=t.wof,this.Cus=t.woj,this.Ous=t.ga,this.jus=t.edj,this.gus=t.cdj,this.mus=t.dj,this.Vus=t.sus,this.Hus=t.dc,this.zus=t.cc||0,this.cus=!1,this.fus=!1,this.dus=!1,this.pus=!1,this.Sus=!1,this.wus=!1,this.bus=!1,this.Uus=0,this.Hus?this.Jus():this.$us(),this.Uvt(s),this.qus()}sK(){-1===this.vus?this.Mus=null:this.Mus=this.Tf.VD(this.vus),-1===this.Cus?this.Ius=null:this.Ius=this.Tf.VD(this.Cus)}Xus(t){if(this.Mus=t){const s=t.qD();this.xus=s.kM(),this.Gus=s.LM()}}Yus(){return this.Tf.Qk()>this.Aus+.05}qus(){this.Eus=Math.cos(this.Ous),this.Pus=Math.sin(this.Ous),this.Fus=Math.cos(this.Ous-Math.PI/2),this.kus=Math.sin(this.Ous-Math.PI/2),this.Eus=P.Qr(this.Eus,6),this.Pus=P.Qr(this.Pus,6),this.Fus=P.Qr(this.Fus,6),this.kus=P.Qr(this.kus,6),this.Dus=this.oa,this.oa<0&&(this.Eus*=-1,this.Pus*=-1,this.oa=Math.abs(this.oa))}Kus(){return this.oa<0?-1:1}Zus(){const s=this.Ii.qD(),h=this.Tf.sk(),r=this.Ii,t=this.Mus,i=s.kM(),n=s.LM();if(s.bN(this.Eus,this.Pus),s.gN(),!t||!h.kO(r,t)||t.KB().ICt()&&!h.YEt(t,r)||t.KB().CCt()&&!t.cRt()){let t=h.LO(r),e=null;if(!t&&this.Yus()&&(e=h.E3t(r,!0)),s.yN(i,n),s.gN(),t)return h.kO(r,t)?null:(this.Tus=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.kO(r,e[t])||++i;if(1<=i)return this.Tus=!0,e[0]}return null}return s.yN(i,n),s.gN(),t}GTt(){if(this.$yt){const c=this.Tf.Yk(this.Ii);this.dus||this.bus||(this.pus=!1);let e=this.cus||this.Sus,h=this.fus||this.wus,r=this.dus||this.bus,n=r&&!this.pus,[o,,a]=(this.Sus=!1,this.wus=!1,this.bus=!1,this.yus&&(e=!1,h=!1,r=!1,n=!1),r||(this.Uus=0),this.Qus(),this.tcs()),l=this.Zus(),u=l&&!this._us,t=!1;if([t,l]=this.scs(l),!t){this.ics(l,a,o,r),n=this.ecs(l,n,r),l||this.hcs(n,r,c),this._us=!!l;let t=this.rcs(e,h),s=!1,i=0;if(0!==this.Ils&&([s,l]=this.ncs(c,t,l,n)),0!==this.Cls){const[f,d]=this.ocs(c,l);s=s||f,i=d}!s&&u&&this.Cls<0&&0<i&&(this.Cls=0,s=!0),this.acs(e,h,t,c),l&&!n||s||(this.Cls=Math.min(this.Cls+this.oa*c,this.Wus)),this.lcs(l,s,n),this.Ius=this.Tf.sk().E3t(this.Ii)}}}Qus(){if(this.mQt){const t=this.Ii,s=this.Tf.sk();(s.LO(t)||s.E3t(t))&&s.F3t(t,-this.Eus,-this.Pus,4,!0),this.mQt=!1}}tcs(){let t=this.Mus,s=t?t.qD():null,i=0,e=0,h=!1;if(t&&0===this.Cls&&(s.LM()!==this.Gus||s.kM()!==this.xus)){const r=this.Ii,n=r.qD(),o=this.Tf.sk(),a=s.kM(),l=s.LM(),u=(i=a-this.xus,e=l-this.Gus,n.bN(i,e),n.gN(),this.xus=a,this.Gus=l,h=!0,o.LO(r));u&&(o.g3t(r,u),o.F3t(r,-i,-e,2.5*P.Pr(i,e)))}return[i,e,h]}scs(t){let s=!1,i=this.Ii,e=i.qD(),h=this.Tf.sk(),r=h.LO(i);if(!r)return[!1,t];const n=Math.abs(e.Fm()),o=Math.abs(e.Um());return h.F3t(i,-this.Eus,-this.Pus,o/8)?(h.g3t(i,r),this.Xus(t=r),this.Tus=!1,this.Cls=0):h.D3t(i,this.Fus,this.kus,n/2)||h.D3t(i,this.Eus,this.Pus,o/2)||h.O3t(i,Math.max(n,o)/2)?h.g3t(i,r):s=!0,[s,t]}ics(t,s,i,e){const h=this.Ii,r=this.Tf.sk();if(t){const n=this.Eus,o=this.Pus,a=this.Fus,l=this.kus;if(this.mus=!1,this.gus=!1,0<this.Cls&&(this._us||(r.k3t(h,-n,-o,t,16),this._us=!0),this.Cls=0),this.Mus!==t)this.Xus(t),r.g3t(h,t);else if(s){const u=r.LO(h);u&&(r.g3t(h,u),0!==i&&(0<i?r.F3t(h,-a,-l):r.F3t(h,a,l)),r.F3t(h,-n,-o))}}else e||(this.gus=!0)}ecs(t,s,i){if(t&&s||!t&&this.jus&&i&&this.gus&&!this.mus){const e=this.Ii,h=e.qD(),r=this.Tf.sk(),n=h.kM(),o=h.LM();h.bN(-this.Eus,-this.Pus),h.gN(),r.LO(e)?s=!1:(this.Uus=this.Vus,this.N4(P.olt.fi._X.ucs),this.Rus="jumping",this.Cls=-this.Nus,s=!0,t?this.pus=!0:this.mus=!0),h.yN(n,o),h.gN()}return s}hcs(t,s,i){s&&0<this.Uus?(this.Cls=-this.Nus,this.Uus-=i):this.Mus=null,t&&(this.pus=!0)}rcs(t,s){let i=0,e=this.xls,h=this.Bus;return t&&!s&&(i=0<this.Ils?-(e+h):-e),i=s&&!t?this.Ils<0?e+h:e:i}acs(t,s,i,e){const h=this.Bus,r=(t===s&&(this.Ils<0?this.Ils=Math.min(this.Ils+h*e,0):0<this.Ils&&(this.Ils=Math.max(this.Ils-h*e,0))),this.Ils=P.Cr(this.Ils+i*e,-this.Lus,this.Lus),this.Tf.sk()),n=this.Ils<0?this.ccs(0,1,1):null;if(n)this.Ils=0,r.g3t(this.Ii,n);else{const o=0<this.Ils?this.ccs(1,1,1):null;o&&(this.Ils=0,r.g3t(this.Ii,o))}}ncs(e,t,h,s){let r=this.Ii,n=r.qD(),o=this.Tf.sk(),a=this.Eus,l=this.Pus,i=this.Fus,u=this.kus,c=this.Lus,f=!1,d=new Set(o.E3t(r,!0)),p=n.kM(),m=n.LM(),g=v(this.Ils,-c,c,t,e)*i,y=v(this.Ils,-c,c,t,e)*u,S=(n.bN(i*(1<this.Ils?1:-1)-a,u*(1<this.Ils?1:-1)-l),n.gN(),!1),w=o.LO(r),b=(n.yN(p+g,m+y),n.gN(),o.LO(r));if(!b&&h&&this.Tus&&(b=o.E3t(r),d.has(b)?b=null:S=!0),b){let t=Math.abs(this.Ils*e)+2;w||!o.F3t(r,-a,-l,t,S,b)?(o.g3t(r,b),t=Math.max(Math.abs(this.Ils*e*2.5),Math.floor(n.Fm())),o.F3t(r,i*(this.Ils<0?1:-1),u*(this.Ils<0?1:-1),t,!1)&&(!h||S||this.Tus||(p=n.kM(),m=n.LM(),n.bN(a,l),o.LO(r)&&o.F3t(r,-a,-l,3,!1)))||(n.yN(p,m),n.gN()),S||(this.Ils=0)):!w&&!s&&Math.abs(this.Cls)<Math.abs(this.Nus/4)&&(this.Cls=0,h||(f=!0))}else{const M=this.Zus();if(h&&!M){let t=Math.ceil(Math.abs(this.Ils*e))+2,s=(p=n.kM(),m=n.LM(),n.bN(a*t,l*t),n.gN(),o.E3t(r)),i=!1;s&&!d.has(s)&&o.F3t(r,-a,-l,t+2,!0,s)&&(this.Xus(h=s),this.Tus=!0,i=!0),i||(o.LO(r)?o.F3t(r,-a,-l,t+2,!1):(n.yN(p,m),n.gN()))}else M&&(!h&&this.Tus&&(this.Xus(M),this.Cls=0,f=!0),0===this.Cls)&&o.k3t(r,-a,-l,M,16)}return[f,h]}ocs(s,t){let e=this.Ii,h=e.qD(),r=this.Tf.sk(),i=this.Eus,n=this.Pus,o=!1,a=h.kM(),l=h.LM(),u=v(this.Cls,-1/0,this.Wus,this.oa,s),c=(h.bN(u*i,u*n),h.kM()),f=h.LM(),d=(h.gN(),r.LO(e)),p=!1;if(!d&&0<this.Cls&&!t){const m=this.Yus()?r.E3t(e,!0):null;if(m&&m.length){if(this.Ius){h.yN(a,l),h.gN();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.kO(e,m[t])||++i;P.Xn(m,i),h.yN(c,f),h.gN()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.g3t(e,d),this.Uus=0;let t=1.1;p&&!this.Ius&&(t=2);const g=Math.max(Math.abs(this.Cls*s*t),2);r.F3t(e,i*(this.Cls<0?1:-1),n*(this.Cls<0?1:-1),g,p,d)?(this.Xus(d),this.Tus=p,0<this.Cls&&(o=!0),(0<this.Cls||0===this.zus)&&(this.Cls=0),this.Cls<0&&1===this.zus&&r.k3t(e,i,n,d,32)):(h.yN(a,l),h.gN(),this._us=!0,p||(this.Cls=0))}return[o,u]}lcs(t,s,i){"falling"!==this.Rus&&0<this.Cls&&!t&&(this.N4(P.olt.fi._X.fcs),this.Rus="falling"),(t||s)&&0<=this.Cls&&("falling"===this.Rus||s||i&&0===this.Cls?(this.N4(P.olt.fi._X.dcs),0===this.Ils&&0===this.Cls?this.Rus="stopped":this.Rus="moving"):("stopped"!==this.Rus&&0===this.Ils&&0===this.Cls&&(this.N4(P.olt.fi._X.pcs),this.Rus="stopped"),"moving"===this.Rus||0===this.Ils&&0===this.Cls||i||(this.N4(P.olt.fi._X.mcs),this.Rus="moving")))}gcs(){return 0!==this.ycs()||0!==this.Scs()}wcs(){if(0===this.Cls){let e=this.Ii,t=this.qD(),h=this.Tf.sk(),s=t.kM(),i=t.LM(),r=(t.bN(this.Eus,this.Pus),t.gN(),h.LO(e)),n=null;if(!r&&this.Yus()&&(n=h.E3t(e,!0)),t.yN(s,i),t.gN(),r)return!h.kO(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.kO(e,n[t])||i++;if(1<=i)return!0}}return!1}bcs(t,s=2,i=3){return!!this.ccs(t,s,i)}ccs(t,s=2,i=3){const e=this.Ii,h=this.qD(),r=this.Tf.sk(),n=h.kM(),o=h.LM();if(0===t?h.bN(-this.Fus*s,-this.kus*s):h.bN(this.Fus*s,this.kus*s),h.gN(),!r.LO(e))return h.yN(n,o),h.gN(),null;h.bN(-this.Eus*i,-this.Pus*i),h.gN();const a=r.LO(e);return h.yN(n,o),h.gN(),a}Mcs(){const t=this.qD(),s=t.kM(),i=t.LM(),e=(t.bN(this.Eus,this.Pus),t.gN(),this.Tf.sk().E3t(this.Ii,!1));t.yN(s,i),t.gN(),e&&(this.Aus=this.Tf.Qk(),this.Mus=null)}vcs(t){this.mus=!t}Ols(){return Math.hypot(this.Ils,this.Cls)}xcs(){return Math.atan2(this.Cls,this.Ils)}Gcs(){return this.Cls<0}Tcs(){return 0<this.Cls}_cs(t){this.Lus=Math.max(t,0)}Ics(){return this.Lus}Wls(t){this.xls=Math.max(t,0)}Lls(){return this.xls}Ccs(t){this.Bus=Math.max(t,0)}Rcs(){return this.Bus}Acs(t){this.Nus=Math.max(t,0)}Ecs(){return this.Nus}Pcs(t){this.Wus=Math.max(t,0)}Fcs(){return this.Wus}jls(t){if(this.Dus!==t){this.oa=t,this.qus();const s=this.Tf.sk(),i=this.qD();s.LO(this.Ii)&&(s.F3t(this.Ii,this.Eus,this.Pus,10),i.bN(2*this.Eus,2*this.Pus),i.gN()),this.Mus=null}}Bls(){return this.oa}kcs(t){t=P.Rr(t),this.Ous!==t&&(this.Ous=t,this.qus(),this.Mus=null)}Dcs(){return this.Ous}Ocs(t){this.jus=!!t}Lcs(){return this.jus}Bcs(t){this.Vus=t}Ncs(){return this.Vus}Wcs(t){this.zus=t}jcs(){return this.zus}Vcs(t){this.Ils=t}ycs(){return this.Ils}Ucs(t){this.Cls=t}Scs(){return this.Cls}Hcs(t){if(this.$yt)switch(t){case 0:this.Sus=!0;break;case 1:this.wus=!0;break;case 2:this.bus=!0}}zcs(t){this.Hus!==(t=!!t)&&(this.Hus=t,this.Hus?this.Jus():(this.$us(),this.n$t()))}Jcs(){return this.Hus}qcs(t){this.yus=!!t}$cs(){return this.yus}Uvt(t){this.$yt!==(t=!!t)&&(this.$yt=t,this.$yt?this.TTt():(this.MTt(),this.Mus=null,this.Sus=!1,this.wus=!1,this.bus=!1))}zvt(){return this.$yt}Zrt(t){switch(t){case 0:return this.Ics();case 1:return this.Lls();case 2:return this.Rcs();case 3:return this.Ecs();case 4:return this.Bls();case 5:return this.Fcs();case 6:return this.Lcs();case 7:return 1e3*this.Ncs();case 8:return this.Jcs();case 9:return this.zvt()}}hnt(t,s){switch(t){case 0:this._cs(s);break;case 1:this.Wls(s);break;case 2:this.Ccs(s);break;case 3:this.Acs(s);break;case 4:this.jls(s);break;case 5:this.Pcs(s);break;case 6:this.Ocs(!!s);break;case 7:this.Bcs(s/1e3);break;case 8:this.zcs(!!s);break;case 9:this.Uvt(!!s)}}GGt(){const t="behaviors.platform";return[{title:"$"+this.X6().yf(),properties:[{name:t+".debugger.vector-x",value:this.ycs(),aVt:t=>this.Vcs(t)},{name:t+".debugger.vector-y",value:this.Scs(),aVt:t=>this.Ucs(t)},{name:t+".properties.max-speed.name",value:this.Ics(),aVt:t=>this._cs(t)},{name:t+".properties.acceleration.name",value:this.Lls(),aVt:t=>this.Wls(t)},{name:t+".properties.deceleration.name",value:this.Rcs(),aVt:t=>this.Ccs(t)},{name:t+".properties.jump-strength.name",value:this.Ecs(),aVt:t=>this.Acs(t)},{name:t+".properties.gravity.name",value:this.Bls(),aVt:t=>this.jls(t)},{name:t+".debugger.gravity-angle",value:P.Er(this.Dcs()),aVt:t=>this.kcs(P.Ar(t))},{name:t+".properties.max-fall-speed.name",value:this.Fcs(),aVt:t=>this.Pcs(t)},{name:t+".properties.double-jump.name",value:this.Lcs(),aVt:t=>this.Ocs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.Ncs(),aVt:t=>this.Bcs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.Rus]},{name:t+".properties.enabled.name",value:this.zvt(),aVt:t=>this.Uvt(t)}]}]}Oxt(){return self.Xcs}},new WeakMap),a0=new Map([["left",0],["right",1],["jump",2]]);self.Xcs=class extends o0{constructor(){super(),F.set(this,o0.t4().B6())}Ycs(){F.get(this).Mcs()}Kcs(t){F.get(this).vcs(!!t)}Zcs(t){n0.Ce(t);const s=a0.get(t);if("number"!=typeof s)throw new Error("invalid control");F.get(this).Hcs(s)}get speed(){return F.get(this).Ols()}get Qcs(){return F.get(this).Ics()}set Qcs(t){n0.Ge(t),F.get(this)._cs(t)}get acceleration(){return F.get(this).Lls()}set acceleration(t){n0.Ge(t),F.get(this).Wls(t)}get tfs(){return F.get(this).Rcs()}set tfs(t){n0.Ge(t),F.get(this).Ccs(t)}get sfs(){return F.get(this).Ecs()}set sfs(t){n0.Ge(t),F.get(this).Acs(t)}get ifs(){return F.get(this).Fcs()}set ifs(t){n0.Ge(t),F.get(this).Pcs(t)}get Xts(){return F.get(this).Bls()}set Xts(t){n0.Ge(t),F.get(this).jls(t)}get efs(){return F.get(this).Dcs()}set efs(t){n0.Ge(t),F.get(this).kcs(t)}get hfs(){return F.get(this).Lcs()}set hfs(t){F.get(this).Ocs(!!t)}get rfs(){return F.get(this).Ncs()}set rfs(t){n0.Ge(t),F.get(this).Bcs(t)}get nfs(){const t=F.get(this).jcs();return 0===t?"stop":"preserve-momentum"}set nfs(t){n0.Ce(t);const s=F.get(this);if("stop"===t)s.Wcs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.Wcs(1)}}get ofs(){return F.get(this).wcs()}afs(t){n0.Ce(t);const s=F.get(this);if("left"===t)return s.bcs(0);if("right"===t)return s.bcs(1);throw new Error("invalid side")}get lfs(){return F.get(this).gcs()}get ufs(){return F.get(this).Gcs()}get cfs(){return F.get(this).Tcs()}get ffs(){return F.get(this).ycs()}set ffs(t){n0.Ge(t),F.get(this).Vcs(t)}get dfs(){return F.get(this).Scs()}set dfs(t){n0.Ge(t),F.get(this).Ucs(t)}pfs(t,s){n0.Ge(t),n0.Ge(s);const i=F.get(this);i.Vcs(t),i.Ucs(s)}mfs(){const t=F.get(this);return[t.ycs(),t.Scs()]}get gfs(){return F.get(this).Jcs()}set gfs(t){F.get(this).zcs(!!t)}get yfs(){return F.get(this).$cs()}set yfs(t){F.get(this).qcs(!!t)}get isEnabled(){return F.get(this).zvt()}set isEnabled(t){F.get(this).Uvt(!!t)}}}{const l0=self.Ns;l0.olt.fi._X={Sfs(){return this.gcs()},Zls(t,s){return l0.compare(this.Ols(),t,s)},wfs(){return this.wcs()},bfs(t){return this.bcs(t)},Mfs(){return this.Gcs()},vfs(){return this.Tcs()},xfs(){return this.Lcs()},ucs(){return!0},fcs(){return!0},pcs(){return!0},mcs(){return!0},dcs(){return!0},fc(){return this.zvt()}}}{const u0=self.Ns;u0.olt.fi.prt={Gfs(t){this._cs(t)},NQt(t){this.Wls(t)},Tfs(t){this.Ccs(t)},_fs(t){this.Acs(t)},Ifs(t){this.Pcs(t)},SetGravity(t){this.jls(t)},Cfs(t){this.Hcs(t)},Rfs(t){this.qcs(!!t)},Afs(t){this.Vcs(t)},Efs(t){this.Ucs(t)},Pfs(t){this.kcs(u0.Ar(t))},V2t(t){this.Uvt(0!==t)},Ffs(){this.Mcs()},kfs(t){this.Ocs(0!==t)},Dfs(t){this.Bcs(t/1e3)},Ofs(t){this.Wcs(t)},Lfs(t){this.zcs(t)},Bfs(t){this.vcs(t)}}}{const c0=self.Ns;c0.olt.fi.mrt={nus(){return this.Ols()},Nfs(){return this.Ics()},ous(){return this.Lls()},Wfs(){return this.Rcs()},jfs(){return this.Ecs()},_ss(){return this.Bls()},Vfs(){return c0.Er(this.Dcs())},Ufs(){return this.Fcs()},Hfs(){return c0.Er(this.xcs())},zfs(){return this.ycs()},Jfs(){return this.Scs()},qfs(){return 1e3*this.Ncs()}}}{const f0=self.Ns;f0.olt.$fs=class extends f0.fTt{constructor(t){super(t),this.Xfs=0,this.Yfs=0,this.Kfs=0,this.Zfs=0}vr(){super.vr()}Qfs(t){this.Xfs=t}t0s(){return this.Xfs}s0s(t){this.Yfs=t}i0s(){return this.Yfs}e0s(t){this.Kfs=t}h0s(){return this.Kfs}r0s(t){this.Zfs=t}n0s(){return this.Zfs}}}{const d0=self.Ns;d0.olt.$fs.RIt=class extends d0.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const p0=self.Ns;p0.olt.$fs.Instance=class extends p0.wTt{constructor(t,s){super(t),this.$yt=!0,s&&(this.$yt=s[0]),this.$yt&&this.vGt()}vr(){super.vr()}qM(){const t=this.z6();return{e:this.$yt,smg:t.t0s(),ss:t.i0s(),se:t.h0s(),smd:t.n0s()}}$M(t){const s=this.z6();s.Qfs(t.smg),s.s0s(t.ss),s.e0s(t.se),s.r0s(t.smd),this.$yt=t.e,this.$yt?this.vGt():this.rGt()}Uvt(t){this.$yt=!!t,this.$yt?this.vGt():this.rGt()}fc(){return this.$yt}wGt(){if(this.fc()){this.Tf.Yk(this.Ii);let s=this.z6(),t=s.e5(),i=0,e=0,h=0;for(const l of t){const u=l.ERt(p0.olt.$fs);if(u&&u.B6().fc()){const c=l.qD();i+=c.kM(),e+=c.LM(),++h}}let r=this.Ii.qD().RD(),n=this.Tf.Qk(),o=0,a=0;if(n>=s.i0s()&&n<s.h0s()){let t=s.t0s()*Math.min(this.Tf.iD(),1);0===s.n0s()&&(t*=1-(n-s.i0s())/(s.h0s()-s.i0s()));const f=this.Tf.GD()*Math.PI*2,d=this.Tf.GD()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.x5(i/h+o),r.T5(e/h+a)}}Zrt(t){if(0===t)return this.$yt}hnt(t,s){0===t&&(this.$yt=!!s,this.$yt?this.vGt():this.rGt())}GGt(){return[{title:"$"+this.X6().yf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.fc(),aVt:t=>this.Uvt(t)}]}]}}}{const m0=self.Ns;m0.olt.$fs._X={fc(){return this.fc()}}}{const g0=self.Ns;g0.olt.$fs.prt={o0s(t,s,i){const e=this.z6();e.Qfs(t),e.s0s(this.Tf.Qk()),e.e0s(this.Tf.Qk()+s),e.r0s(i)},V2t(t){this.Uvt(0!==t)}}}{const y0=self.Ns;y0.olt.$fs.mrt={}}{const S0=self.Ns;S0.olt.a0s=class extends S0.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const w0=self.Ns;w0.olt.a0s.RIt=class extends w0.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const b0=self.Ns,M0=self.Ys,v0=self.U6,x0=(b0.olt.a0s.Instance=class extends b0.wTt{constructor(t,s){super(t),this.l0s=!1,this.u0s=!1,this.cus=!1,this.fus=!1,this.yus=!1,this.c0s=!1,this.f0s=!1,this.Sus=!1,this.wus=!1,this.Ils=0,this.Cls=0,this.Lus=200,this.xls=600,this.Bus=500,this.d0s=3,this.p0s=3,this.m0s=!1,this.Hus=!0,this.$yt=!0,s&&(this.Lus=s[0],this.xls=s[1],this.Bus=s[2],this.d0s=s[3],this.p0s=s[4],this.m0s=!!s[5],this.Hus=!!s[6],this.$yt=!!s[7]),this.$yt&&this.bGt(),this.Hus&&this.Jus()}Jus(){if(!this.O0){const t=this.Tf.h0();this.O0=new b0.F0(b0.I0.P0(t,"keydown",t=>this.h$t(t.data)),b0.I0.P0(t,"keyup",t=>this.r$t(t.data)),b0.I0.P0(t,"window-blur",()=>this.n$t()),b0.I0.P0(t,"keyboard-blur",()=>this.n$t()))}}$us(){this.O0&&(this.O0.vr(),this.O0=null)}vr(){super.vr()}qM(){return{dx:this.Ils,dy:this.Cls,e:this.$yt,ms:this.Lus,acc:this.xls,dec:this.Bus,d:this.d0s,am:this.p0s,dc:this.Hus,ii:this.yus}}$M(t){this.Ils=t.dx,this.Cls=t.dy,this.Uvt(t.e),this.Lus=t.ms,this.xls=t.acc,this.Bus=t.dec,this.d0s=t.d,this.p0s=t.am,this.Hus=t.dc,this.yus=t.ii,this.l0s=!1,this.u0s=!1,this.cus=!1,this.fus=!1,this.c0s=!1,this.f0s=!1,this.Sus=!1,this.wus=!1,this.Hus?this.Jus():this.$us()}h$t(t){switch(t.key){case"ArrowLeft":this.cus=!0;break;case"ArrowUp":this.l0s=!0;break;case"ArrowRight":this.fus=!0;break;case"ArrowDown":this.u0s=!0}}r$t(t){switch(t.key){case"ArrowLeft":this.cus=!1;break;case"ArrowUp":this.l0s=!1;break;case"ArrowRight":this.fus=!1;break;case"ArrowDown":this.u0s=!1}}n$t(){this.l0s=!1,this.u0s=!1,this.cus=!1,this.fus=!1}ZK(){let m=this.Tf.Yk(this.Ii),g=this.Tf.sk(),t=this.cus||this.Sus,s=this.fus||this.wus,i=this.l0s||this.c0s,e=this.u0s||this.f0s;if(this.Sus=!1,this.wus=!1,this.c0s=!1,this.f0s=!1,this.$yt){let p=g.LO(this.Ii);if(!p||(g.g3t(this.Ii,p),g.O3t(this.Ii))){this.yus&&(t=s=i=e=!1),0===this.d0s?t=s=!1:1===this.d0s&&(i=e=!1),(t=2===this.d0s&&(i||e)?s=!1:t)===s&&(this.Ils<0?this.Ils=Math.min(this.Ils+this.Bus*m,0):0<this.Ils&&(this.Ils=Math.max(this.Ils-this.Bus*m,0))),i===e&&(this.Cls<0?this.Cls=Math.min(this.Cls+this.Bus*m,0):0<this.Cls&&(this.Cls=Math.max(this.Cls-this.Bus*m,0)));let f=0,d=0;if(t&&!s&&(f=0<this.Ils?-(this.xls+this.Bus):-this.xls),s&&!t&&(f=this.Ils<0?this.xls+this.Bus:this.xls),i&&!e&&(d=0<this.Cls?-(this.xls+this.Bus):-this.xls),e&&!i&&(d=this.Cls<0?this.xls+this.Bus:this.xls),this.Ils+=f*m,this.Cls+=d*m,0!==this.Ils||0!==this.Cls){let e=Math.hypot(this.Ils,this.Cls),t=Math.atan2(this.Cls,this.Ils),s=this.Lus*Math.cos(t),i=this.Lus*Math.sin(t),h=(e>this.Lus&&(e=this.Lus,this.Ils=s,this.Cls=i),this.Ii.qD()),r=h.kM(),n=h.LM(),o=h.GetAngle(),a=Math.abs(s)*m,l=Math.abs(i)*m,u=b0.Cr(this.Ils*m+.5*f*m*m,-a,a),c=b0.Cr(this.Cls*m+.5*d*m*m,-l,l);if(this.m0s){if(h.bN(u,c),h.gN(),p=g.LO(this.Ii)){g.g3t(this.Ii,p);let t=Math.atan2(this.Cls,this.Ils)+Math.PI/2,s=!1,i=(h.Fm()+h.Um())/4;if(g.D3t(this.Ii,Math.cos(t),Math.sin(t),Math.max(2.5*e*m,i))){s=!0;const w=h.kM(),b=h.LM(),M=e*m,v=b0.kr(r,n,w,b);if(1.01*M<v){const x=M/v,G=b0.Ot(r,w,x),T=b0.Ot(n,b,x);if(h.yN(G,T),h.gN(),p=g.LO(this.Ii)){const _=b0.Or(r,n,w,b)+Math.PI/2,I=Math.cos(_),C=Math.sin(_),R=(h.Fm()+h.Um())/2/10;g.D3t(this.Ii,I,C,Math.max(R,1))||(h.yN(r,n),h.gN(),s=!1)}}}if(!s){const A=Math.hypot(u,c),E=-u/A,P=-c/A;this.Ils=0,this.Cls=0,g.F3t(this.Ii,E,P,Math.max(2.5*e*m,i))||(h.yN(r,n),h.gN())}}}else h.dnt(u),h.gN(),(p=g.LO(this.Ii))&&(g.F3t(this.Ii,this.Ils<0?1:-1,0,Math.max(Math.abs(Math.floor(u)),1))||(h.DM(r),h.gN()),this.Ils=0,g.g3t(this.Ii,p)),h.pnt(c),h.gN(),(p=g.LO(this.Ii))&&(g.F3t(this.Ii,0,this.Cls<0?1:-1,Math.max(Math.abs(Math.floor(c)),1))||(h.BM(n),h.gN()),this.Cls=0,g.g3t(this.Ii,p));const y=b0.Qr(this.Ils,6),S=b0.Qr(this.Cls,6);0===y&&0===S||!this.Ii.qL().IL()||(1===this.p0s?h.v5(b0.Ar(90*Math.round(b0.Er(Math.atan2(S,y))/90))):2===this.p0s?h.v5(b0.Ar(45*Math.round(b0.Er(Math.atan2(S,y))/45))):3===this.p0s&&h.v5(Math.atan2(S,y))),h.gN(),h.GetAngle()!=o&&(p=g.LO(this.Ii))&&(h.v5(o),h.gN(),g.g3t(this.Ii,p))}}}}Zrt(t){switch(t){case 0:return this.Ics();case 1:return this.Lls();case 2:return this.Rcs();case 3:return this.d0s;case 4:return this.p0s;case 5:return this.m0s;case 6:return this.Jcs();case 7:return this.zvt()}}hnt(t,s){switch(t){case 0:this._cs(s);break;case 1:this.Wls(s);break;case 2:this.Ccs(s);break;case 3:this.d0s=s;break;case 4:this.p0s=s;break;case 5:this.m0s=!!s;break;case 6:this.zcs(!!s);break;case 7:this.Uvt(!!s)}}g0s(){this.Ils=0,this.Cls=0}y0s(){this.Ils*=-1,this.Cls*=-1}S0s(){const t=Math.hypot(this.Ils,this.Cls);t>this.Lus&&this.Nls(t)}Nls(t){t=b0.Cr(t,0,this.Lus);const s=Math.atan2(this.Cls,this.Ils);this.Ils=t*Math.cos(s),this.Cls=t*Math.sin(s)}Ols(){return Math.hypot(this.Ils,this.Cls)}_cs(t){this.Lus=Math.max(t,0)}Ics(){return this.Lus}Wls(t){this.xls=Math.max(t,0)}Lls(){return this.xls}Ccs(t){this.Bus=Math.max(t,0)}Rcs(){return this.Bus}xcs(){return Math.atan2(this.Cls,this.Ils)}Vcs(t){this.Ils=t,this.S0s()}ycs(){return this.Ils}Ucs(t){this.Cls=t,this.S0s()}Scs(){return this.Cls}Hcs(t){if(this.$yt)switch(t){case 0:this.Sus=!0;break;case 1:this.wus=!0;break;case 2:this.c0s=!0;break;case 3:this.f0s=!0}}zcs(t){this.Hus!==(t=!!t)&&(this.Hus=t,this.Hus?this.Jus():(this.$us(),this.n$t()))}Jcs(){return this.Hus}qcs(t){this.yus=!!t}$cs(){return this.yus}Uvt(t){this.$yt=!!t,this.$yt?this.bGt():(this.Sus=!1,this.wus=!1,this.c0s=!1,this.f0s=!1,this.hGt())}zvt(){return this.$yt}w0s(t){this.m0s=!!t}b0s(){return this.m0s}GGt(){const t="behaviors.eightdir";return[{title:"$"+this.X6().yf(),properties:[{name:t+".debugger.vector-x",value:this.ycs(),aVt:t=>this.Vcs(t)},{name:t+".debugger.vector-y",value:this.Scs(),aVt:t=>this.Ucs(t)},{name:t+".debugger.speed",value:this.Ols(),aVt:t=>this.Nls(t)},{name:t+".debugger.angle-of-motion",value:b0.Er(this.xcs())},{name:t+".properties.max-speed.name",value:this.Ics(),aVt:t=>this._cs(t)},{name:t+".properties.acceleration.name",value:this.Lls(),aVt:t=>this.Wls(t)},{name:t+".properties.deceleration.name",value:this.Rcs(),aVt:t=>this.Ccs(t)},{name:t+".properties.allow-sliding.name",value:this.b0s(),aVt:t=>this.w0s(t)},{name:t+".properties.enabled.name",value:this.zvt(),aVt:t=>this.Uvt(t)}]}]}Oxt(){return self.M0s}},new WeakMap),G0=new Map([["left",0],["right",1],["up",2],["down",3]]);self.M0s=class extends v0{constructor(){super(),x0.set(this,v0.t4().B6())}stop(){x0.get(this).g0s()}reverse(){x0.get(this).y0s()}Zcs(t){M0.Ce(t);const s=G0.get(t);if("number"!=typeof s)throw new Error("invalid control");x0.get(this).Hcs(s)}get speed(){return x0.get(this).Ols()}set speed(t){M0.Ge(t),x0.get(this).Nls(t)}get Qcs(){return x0.get(this).Ics()}set Qcs(t){M0.Ge(t),x0.get(this)._cs(t)}get acceleration(){return x0.get(this).Lls()}set acceleration(t){M0.Ge(t),x0.get(this).Wls(t)}get tfs(){return x0.get(this).Rcs()}set tfs(t){M0.Ge(t),x0.get(this).Ccs(t)}get ffs(){return x0.get(this).ycs()}set ffs(t){M0.Ge(t),x0.get(this).Vcs(t)}get dfs(){return x0.get(this).Scs()}set dfs(t){M0.Ge(t),x0.get(this).Ucs(t)}pfs(t,s){M0.Ge(t),M0.Ge(s);const i=x0.get(this);i.Vcs(t),i.Ucs(s)}mfs(){const t=x0.get(this);return[t.ycs(),t.Scs()]}get gfs(){return x0.get(this).Jcs()}set gfs(t){x0.get(this).zcs(!!t)}get yfs(){return x0.get(this).$cs()}set yfs(t){x0.get(this).qcs(!!t)}get v0s(){return x0.get(this).b0s()}set v0s(t){x0.get(this).w0s(!!t)}get isEnabled(){return x0.get(this).zvt()}set isEnabled(t){x0.get(this).Uvt(!!t)}}}{const T0=self.Ns;T0.olt.a0s._X={Sfs(){return 1e-10<this.Ols()},Zls(t,s){return T0.compare(this.Ols(),t,s)},fc(){return this.zvt()},x0s(){return this.b0s()}}}{const _0=self.Ns;_0.olt.a0s.prt={zW(){this.g0s()},G0s(){this.y0s()},Rfs(t){this.qcs(t)},tus(t){this.Nls(t)},Gfs(t){this._cs(t)},NQt(t){this.Wls(t)},Tfs(t){this.Ccs(t)},Cfs(t){this.Hcs(t)},V2t(t){this.Uvt(t)},Afs(t){this.Vcs(t)},Efs(t){this.Ucs(t)},Lfs(t){this.zcs(!!t)},T0s(t){this.w0s(t)}}}{const I0=self.Ns;I0.olt.a0s.mrt={nus(){return this.Ols()},Nfs(){return this.Ics()},ous(){return this.Lls()},Wfs(){return this.Rcs()},Hfs(){return I0.Er(this.xcs())},zfs(){return this.ycs()},Jfs(){return this.Scs()}}}{const C0=self.Ns;C0.olt.bound=class extends C0.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const R0=self.Ns;R0.olt.bound.RIt=class extends R0.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const A0=self.Ns;A0.olt.bound.Instance=class extends A0.wTt{constructor(t,s){super(t),this.TJt=0,s&&(this.TJt=s[0]),this.vGt()}vr(){super.vr()}qM(){return{m:this.TJt}}$M(t){this.TJt=t.m}wGt(){let t=this.Ii.qD(),s=t.GN(),i=t.RD(),e=!1;0===this.TJt?(t.kM()<0&&(t.DM(0),e=!0),t.LM()<0&&(t.BM(0),e=!0),t.kM()>i.Fm()&&(t.DM(i.Fm()),e=!0),t.LM()>i.Um()&&(t.BM(i.Um()),e=!0)):(s.Ol()<0&&(t.dnt(-s.Ol()),e=!0),s.Ll()<0&&(t.pnt(-s.Ll()),e=!0),s.Bl()>i.Fm()&&(t.dnt(-(s.Bl()-i.Fm())),e=!0),s.Nl()>i.Um()&&(t.pnt(-(s.Nl()-i.Um())),e=!0)),e&&t.gN()}Zrt(t){if(0===t)return this.TJt}hnt(t,s){0===t&&(this.TJt=s)}}}{const E0=self.Ns;E0.olt.bound._X={}}{const P0=self.Ns;P0.olt.bound.prt={}}{const F0=self.Ns;F0.olt.bound.mrt={}}{const k0=self.Ns;k0.olt.NTt=class extends k0.fTt{constructor(t){super(t)}vr(){super.vr()}}}{const D0=self.Ns;D0.olt.NTt.RIt=class extends D0.yTt{constructor(t){super(t)}vr(){super.vr()}Dxt(){}}}{const O0=self.Ns,L0=self.U6,B0=(O0.olt.NTt.Instance=class extends O0.wTt{constructor(t,s){super(t),this.V2t(!0),s&&this.V2t(s[0])}vr(){super.vr()}V2t(t){this.Ii.fRt(!!t)}fc(){return this.Ii.cRt()}qM(){return{e:this.fc()}}$M(t){this.V2t(t.e)}Zrt(t){if(0===t)return this.fc()}hnt(t,s){0===t&&this.V2t(s)}GGt(){return[{title:"$"+this.X6().yf(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.fc(),aVt:t=>this.V2t(t)}]}]}Oxt(){return self._0s}},new WeakMap);self._0s=class extends L0{constructor(){super(),B0.set(this,L0.t4().B6())}set isEnabled(t){B0.get(this).V2t(!!t)}get isEnabled(){return B0.get(this).fc()}}}{const N0=self.Ns;N0.olt.NTt._X={fc(){return this.fc()}}}{const W0=self.Ns;W0.olt.NTt.prt={V2t(t){this.V2t(t)}}}{const j0=self.Ns;j0.olt.NTt.mrt={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;const V0=self.Ns;self.awt=[()=>"QuestionBlocks",t=>{const s=t.Swt(0);return()=>s.HSt()},()=>"Used",()=>"coin",()=>"Game",()=>0,()=>"",()=>270,()=>"OnCollected",()=>.25,()=>"mushroom",()=>1,()=>"acorn",()=>"1up",t=>{const s=t.Swt(0);return()=>s.HSt()-17},()=>"Bricks",()=>"Coins",t=>{const s=t.Swt(0).owt();return()=>i("x",s.jet())},()=>50,()=>"Mushroom",()=>2,()=>500,()=>"Acorn",()=>3,()=>28,()=>"Acorn Flying",()=>750,()=>"Mushroom2",t=>{const s=t.Swt(0);return()=>V0.Ot(s.HSt(),20,.1)},t=>{const s=t.Swt(0);return()=>V0.Ot(s.HSt(),100,.1)},()=>"Spring",()=>16,()=>"Triggered",()=>.3,()=>"Stationary",t=>{const s=t.Swt(0);return()=>s.$St()},()=>15,()=>"On/Off Switch",()=>"on",()=>"off",()=>"Climbing",()=>-200,()=>8,()=>200,()=>"Acorn Climbing",()=>"Big Climbing",()=>"Enemies",()=>"Enemy Movement",()=>"bulletbill",()=>"left",()=>"right",()=>"Enemy Collision with Player",()=>"drybones",()=>"spiked",()=>-400,t=>{const s=t.Swt(0);return()=>s.YSt()+100},t=>{const s=t.Swt(0);return()=>s.YSt()},()=>.5,()=>"koopa",()=>"flyingkoopa",()=>"dbones",t=>{const s=t.Swt(0).BSt();return()=>s(0)},()=>25,()=>1500,()=>"Hit",()=>"down",()=>5,()=>"Getting Up",()=>"Walking",()=>"Lava",()=>"Enemy Collision with Green Shell",()=>"Bullet Bill",()=>180,()=>360,()=>"Fireball",()=>90,()=>20,()=>250,()=>-90,()=>"Green Shell",()=>"Green Shell Movement",()=>"Green Shell Collision with Player",()=>.1,()=>"Game Logic",t=>{const s=t.Swt(0).owt();return()=>s.jet()},t=>{const s=t.Swt(0).BSt();return()=>s()},()=>"Core Level",()=>"World 1-1",()=>"Level 2",()=>"World 1-2",()=>"Level 3",()=>"World 1-3",()=>"Level 4",()=>"World 1-4",()=>"Level 5",()=>"World 1-5",()=>"Level 6",()=>"World 1-6",()=>"Level 7",()=>"World 1-7",()=>"Level 8",()=>"World 1-8",()=>"Star Road Level",()=>"World 1-S",t=>{const s=t.Swt(0).owt();return()=>i("Health: ",s.jet())},t=>{const s=t.Swt(0),i=t.Swt(1);return()=>V0.Ot(s.HSt(),i.HSt(),.075)},t=>{const s=t.Swt(0),i=t.Swt(1);return()=>V0.Ot(s.HSt(),i.HSt()+50,.075)},()=>"Acorn StageClear",()=>"stageClear",()=>"Big Stageclear",()=>48,()=>432,()=>9,()=>"Menu",()=>"mysave",()=>.2,()=>1/0,()=>"Platforming Elements",()=>"Running",()=>"Jumping",()=>"Falling",()=>"Standing",()=>"Layer 0",()=>"Title Screen Hit",()=>"Player",()=>"Player Animations",()=>"Acorn Running",()=>"Acorn Jumping",()=>"Acorn Falling",()=>"Acorn Standing",()=>"Big Running",()=>"Big Jumping",()=>"Big Falling",()=>"Big Standing",()=>"Health",()=>"death",()=>-500,()=>"Game Over",()=>7,()=>"Animations",()=>"unlocked",()=>"completed",()=>"World Map 2",()=>"Mushroom Valley",()=>"Buried",()=>"Bullet Bill Bonanza",()=>"Pirrana Pipes",()=>"Lava Fort",()=>"Life Above Land",()=>"Cliffside Calamity",()=>"Bowser's Airship",()=>"Bonus Stage",()=>"Controls",()=>4,()=>"Now Loading...",()=>"Now Loading",()=>"Now Loading..",()=>"Now Loading.",()=>"hoveringover",()=>"Default",()=>"Game Loaded."]}var t=self.Ns;self.q5t=function(){return[t.CX.Kht,t.olt.BTt,t.olt.Aes,t.CX.eUt,t.CX.P7t,t.olt.Ios,t.CX.Audio,t.CX.Keyboard,t.CX.Function,t.CX.B$t,t.CX.gamepad,t.CX.JYt,t.olt.Ias,t.olt.Vas,t.olt.vls,t.CX.dQt,t.olt.fi,t.olt.$fs,t.CX.Text,t.olt.a0s,t.olt.bound,t.olt.NTt,t.CX.IX._X.kpt,t.CX.Kht._X.pvt,t.CX.Kht._X.MMt,t.CX.Kht.mrt.x2t,t.CX.Kht._X.TVt,t.CX.Kht._X.Jvt,t.CX.Kht.prt.FVt,t.olt.vls.prt.V2t,t.olt.vls.prt.ius,t.CX.Function.prt.CallFunction,t.CX.IX.prt.Hn,t.CX.Kht.prt.i2t,t.CX.Audio.prt.Play,t.CX.Kht.prt.lVt,t.CX.Kht.prt.rB,t.CX.Kht._X.oB,t.CX.Kht.prt.WVt,t.CX.dQt.prt.v5,t.CX.Function._X.E$t,t.CX.IX.prt.l6t,t.CX.JYt.prt.Rf,t.CX.Kht._X.RVt,t.olt.fi.prt.Cfs,t.olt.fi._X.pcs,t.CX.Kht.prt.LVt,t.CX.IX._X.ONt,t.CX.IX.prt.a6t,t.CX.Kht.prt.km,t.CX.IX.prt.c6t,t.CX.IX._X.LNt,t.olt.fi._X.vfs,t.CX.Keyboard._X.Yqt,t.olt.fi.prt.SetGravity,t.CX.IX._X.Sgt,t.CX.Kht._X.Svt,t.CX.Kht.prt.tE,t.CX.Kht.mrt.Opacity,t.CX.Kht._X.wvt,t.CX.Kht._X._Vt,t.olt.fi.prt.Efs,t.CX.Kht._X.qvt,t.CX.Kht.prt.l2t,t.CX.Kht.prt.a2t,t.olt.fi._X.wfs,t.CX.Kht.prt.dVt,t.CX.IX._X.INt,t.olt.fi._X.Mfs,t.CX.Kht._X.vMt,t.CX.IX._X.TX,t.CX.Kht.mrt.z2t,t.olt.fi.prt.V2t,t.CX.IX.prt.u6t,t.CX.Kht._X.Xvt,t.CX.Function.mrt.L$t,t.olt.vls.prt.tus,t.olt.vls.prt.SetGravity,t.olt.fi.prt.Gfs,t.CX.Kht._X.bMt,t.CX.Kht.mrt.v2t,t.CX.Kht.prt.BVt,t.CX.Kht.prt.r2t,t.CX.Kht.prt.TMt,t.CX.IX._X.kNt,t.CX.IX.mrt.r8t,t.CX.IX._X._Nt,t.CX.Kht.prt.IMt,t.CX.Kht.prt.v5,t.CX.Kht.mrt.k2t,t.olt.fi.prt._fs,t.CX.JYt._X.e2t,t.CX.JYt.prt.i2t,t.CX.Audio.prt.uqt,t.olt.fi.prt.Afs,t.CX.IX.prt.k6t,t.CX.B$t._X.vXt,t.CX.IX.prt.T6t,t.CX.B$t._X.EXt,t.olt.Ias.prt.Ias,t.olt.Ias.prt.jas,t.olt.fi._X.Sfs,t.CX.Keyboard._X.a$t,t.olt.fi.prt.Rfs,t.CX.IX.prt.L6t,t.CX.IX.prt.p6t,t.CX.IX.prt.eet,t.olt.a0s._X.Sfs,t.olt.Vas.prt.pls,t.CX.JYt.prt.rB,t.CX.IX._X.CNt,t.CX.JYt._X.cZt,t.olt.Vas.prt.yls,t.olt.Vas.prt.gls,t.olt.Vas.prt.mls,t.olt.Vas.prt.Sls]},self.nBt=[{I0s:0},{Aes:0},{C0s:0},{type:0},{R0s:0},{A0s:0},{E0s:0},{P0s:0},{F0s:0},{k0s:0},{D0s:0},{O0s:0},{L0s:0},{B0s:0},{N0s:0},{W0s:0},{j0s:0},{P7t:0},{V0s:0},{Audio:0},{Keyboard:0},{Function:0},{B$t:0},{Gamepad:0},{Ias:0},{Vas:0},{U0s:0},{H0s:0},{z0s:0},{J0s:0},{q0s:0},{$0s:0},{X0s:0},{vls:0},{Y0s:0},{K0s:0},{Z0s:0},{Q0s:0},{tds:0},{sds:0},{ids:0},{eds:0},{hds:0},{rds:0},{nus:0},{nds:0},{ods:0},{ads:0},{RIt:0},{lds:0},{speed:0},{uds:0},{cds:0},{fi:0},{fds:0},{dds:0},{active:0},{direction:0},{pds:0},{mds:0},{gds:0},{yds:0},{Sds:0},{wds:0},{bds:0},{Mds:0},{vds:0},{xds:0},{Gds:0},{"1Up":0},{Tds:0},{_ds:0},{Ids:0},{Cds:0},{Rds:0},{Ads:0},{Eds:0},{Pds:0},{Fds:0},{kds:0},{Dds:0},{Ods:0},{Lds:0},{Bds:0},{Kht:0},{Nds:0},{Wds:0},{jds:0},{Vds:0},{Uds:0},{Hds:0},{zds:0},{"8Direction":0},{Jds:0},{qds:0},{$ds:0},{Xds:0},{Yds:0},{Kds:0},{Zds:0},{Qds:0},{t1s:0},{s1s:0},{i1s:0},{e1s:0},{h1s:0},{r1s:0},{n1s:0},{o1s:0},{a1s:0},{l1s:0},{u1s:0},{c1s:0},{f1s:0},{time:0},{d1s:0},{p1s:0},{m1s:0},{g1s:0},{y1s:0},{S1s:0},{w1s:0},{b1s:0},{M1s:0},{v1s:0},{x1s:0},{G1s:0},{T1s:0},{_1s:0},{I1s:0},{C1s:0},{$Yt:0},{R1s:0},{A1s:0},{E1s:0},{images:0},{dfs:0},{N3:0},{P1s:0},{F1s:0},{k1s:0},{D1s:0},{O1s:0},{L1s:0},{B1s:0},{N1s:0},{W1s:0},{j1s:0},{V1s:0},{button:0},{U1s:0},{H1s:0},{z1s:0},{J1s:0},{q1s:0},{$1s:0},{X1s:0},{Y1s:0},{K1s:0},{Z1s:0},{Q1s:0},{sps:0},{ips:0},{eps:0},{hps:0},{rps:0},{nps:0},{ops:0},{aps:0}],self.lps={C0s:class extends self.pVt{},R0s:class extends self.pVt{},A0s:class extends self.HUt{},E0s:class extends self.pVt{},P0s:class extends self.$Ht{},F0s:class extends self.pVt{},k0s:class extends self.pVt{},O0s:class extends self.pVt{},L0s:class extends self.pVt{},B0s:class extends self.pVt{},W0s:class extends self.pVt{},j0s:class extends self.$Ht{},P7t:class extends self.$Ht{},V0s:class extends self.$Ht{},Audio:class extends self.XB{},Keyboard:class extends self.XB{},Function:class extends self.XB{},B$t:class extends self.XB{},Gamepad:class extends self.XB{},U0s:class extends self.tZt{},H0s:class extends self.tZt{},z0s:class extends self.tZt{},J0s:class extends self.tZt{},q0s:class extends self.tZt{},$0s:class extends self.tZt{},X0s:class extends self.tZt{},Y0s:class extends self.tZt{},K0s:class extends self.tZt{},Z0s:class extends self.tZt{},Q0s:class extends self.tZt{},tds:class extends self.tZt{},sds:class extends self.tZt{},ids:class extends self.tZt{},eds:class extends self.tZt{},hds:class extends self.tZt{},rds:class extends self.Lts{},nds:class extends self.pVt{},ods:class extends self.pVt{},ads:class extends self.pVt{},cds:class extends self.pVt{},fds:class extends self.pVt{},dds:class extends self.pVt{},pds:class extends self.pVt{},mds:class extends self.pVt{},yds:class extends self.pVt{},vds:class extends self.pVt{},xds:class extends self.pVt{},Gds:class extends self.pVt{},ups:class extends self.pVt{},Tds:class extends self.pVt{},_ds:class extends self.pVt{},Ids:class extends self.pVt{},Cds:class extends self.pVt{},Rds:class extends self.pVt{},Ads:class extends self.pVt{},Eds:class extends self.pVt{},Pds:class extends self.pVt{},Fds:class extends self.pVt{},kds:class extends self.pVt{},Dds:class extends self.pVt{},Ods:class extends self.pVt{},Lds:class extends self.pVt{},Bds:class extends self.pVt{},Kht:class extends self.pVt{},Nds:class extends self.pVt{},Wds:class extends self.HUt{},jds:class extends self.des{},Vds:class extends self.pVt{},Uds:class extends self.HUt{},Hds:class extends self.pVt{},zds:class extends self.pVt{},qds:class extends self.pVt{},Xds:class extends self.pVt{},Yds:class extends self.pVt{},Kds:class extends self.pVt{},Zds:class extends self.$Ht{},Qds:class extends self.pVt{},t1s:class extends self.HUt{},s1s:class extends self.pVt{},i1s:class extends self.pVt{},e1s:class extends self.pVt{},h1s:class extends self.pVt{},r1s:class extends self.HUt{},o1s:class extends self.pVt{},l1s:class extends self.pVt{},u1s:class extends self.pVt{},c1s:class extends self.pVt{},f1s:class extends self.pVt{},d1s:class extends self.pVt{},m1s:class extends self.pVt{},g1s:class extends self.pVt{},y1s:class extends self.$Ht{},S1s:class extends self.$Ht{},w1s:class extends self.pVt{},b1s:class extends self.pVt{},M1s:class extends self.pVt{},v1s:class extends self.pVt{},x1s:class extends self.pVt{},G1s:class extends self.pVt{},T1s:class extends self.$Ht{},_1s:class extends self.pVt{},I1s:class extends self.pVt{},C1s:class extends self.HUt{},$Yt:class extends self.tZt{},R1s:class extends self.pVt{},A1s:class extends self.pVt{},E1s:class extends self.pVt{},images:class extends self.pVt{},N3:class extends self.pVt{},P1s:class extends self.pVt{},k1s:class extends self.pVt{},D1s:class extends self.pVt{},O1s:class extends self.pVt{},L1s:class extends self.pVt{},B1s:class extends self.pVt{},N1s:class extends self.pVt{},W1s:class extends self.pVt{},j1s:class extends self.pVt{},V1s:class extends self.pVt{},button:class extends self.pVt{},U1s:class extends self.pVt{},H1s:class extends self.pVt{}};