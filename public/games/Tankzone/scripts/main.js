// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

"use strict";window.i=class{constructor(t,s){this.o=t,this.h=s,this.l=!1,this.u=()=>this.m()}g(){}v(t,s,i,e){this.o.S(this.h,t,s,i,e)}_(t,s,i,e){return this.o.O(this.h,t,s,i,e)}P(t,s,i){this.o.C()?this.v(t,s,i):this.o.M()._OnMessageFromDOM({type:"event",component:this.h,handler:t,dispatchOpts:i||null,data:s,responseId:null})}I(t,s){this.o.R(this.h,t,s)}T(t){for(const[s,i]of t)this.I(s,i)}G(){return this.o}A(){return this.h}D(){this.l||(this.o.F(this.u),this.l=!0)}W(){this.l&&(this.o.L(this.u),this.l=!1)}m(){}},window.U=class{constructor(t,s){this.H=t,this.B=s,this.V=-1,this.j=-1/0,this.N=()=>this.$(),this.Y=!1,this.K=!1}X(t){this.K=!!t}J(){if(-1===this.V){const t=Date.now(),s=t-this.j,i=this.B;i<=s&&this.K?(this.j=t,this.Z()):this.V=self.setTimeout(this.N,Math.max(i-s,4))}}Z(){this.Y=!0,this.H(),this.Y=!1}tt(){this.Y||(this.st(),this.j=Date.now())}$(){this.V=-1,this.j=Date.now(),this.Z()}st(){-1!==this.V&&(self.clearTimeout(this.V),this.V=-1)}it(){this.st(),this.H=null,this.N=null}};{class y{constructor(t){this.et=t,this.nt=!1,this.ot=!0,this.ht=-1,this.rt=-1,this.ct=-1}lt(t){this.ot=!!t}ut(){return this.ot}dt(){return this.nt}wt(){this.nt=!0}ft(){return this.ht}gt(t){this.ht=t}yt(){return this.rt}vt(t){this.rt=t}bt(t){this.ct=t}St(){return this.ct}_t(){return this.et}}window.Ot=class extends self.i{constructor(t,s){super(t,s),this.Pt=new Map,this.kt=!0,this.T([["create",t=>this.Ct(t)],["destroy",t=>this.xt(t)],["set-visible",t=>this.Mt(t)],["update-position",t=>this.It(t)],["update-state",t=>this.Rt(t)],["focus",t=>this.Tt(t)],["set-css-style",t=>this.Gt(t)],["set-attribute",t=>this.Et(t)],["remove-attribute",t=>this.At(t)]]),this.Dt("get-element",t=>t)}Ft(t){this.kt=!!t}Dt(t,e){this.I(t,t=>{const s=t.elementId,i=this.Wt(s);return e(i,t)})}Lt(t){for(const[s,i]of t)this.Dt(s,i)}Ct(t){const s=t.elementId,i=this.Ut(s,t),e=new y(i),n=(this.Pt.set(s,e),i.style.boxSizing="border-box",i.style.display="none",e.lt(t.isVisible),this.Ht(i)),o=(n.addEventListener("focus",t=>this.Bt(s)),n.addEventListener("blur",t=>this.Vt(s)),t.htmlIndex);if(e.gt(o),e.bt(t.htmlZIndex),this.kt){const h=this.G().jt(o),r=(e.vt(h),this.G().Nt(h));r.appendChild(i)}}Ut(t,s){throw new Error("required override")}zt(t){}xt(t){const s=t.elementId,i=this.Wt(s);this.zt(i),this.kt&&i.parentElement.removeChild(i),this.Pt.delete(s)}qt(t,s,i){(i=i||{}).elementId=s,this.v(t,i)}$t(t,s,i){(i=i||{}).elementId=s,this.P(t,i)}Mt(t){if(this.kt){const s=this.Pt.get(t.elementId),i=s._t();s.dt()?i.style.display=t.isVisible?"":"none":s.lt(t.isVisible)}}It(t){if(this.kt){const s=this.Pt.get(t.elementId),i=s._t(),e=this.G(),n=(i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=t.width+"px",i.style.height=t.height+"px",t.fontSize),o=(null!==n&&(i.style.fontSize=n+"em"),t.htmlIndex),h=(s.gt(o),e.jt(o));if(h!==s.yt()){i.remove();const a=e.Nt(h);a.appendChild(i),s.vt(h),e.Yt()}const r=t.htmlZIndex;r!==s.St()&&(s.bt(r),e.Yt()),s.dt()||(s.wt(),s.ut()&&(i.style.display=""))}}Kt(){if(this.kt)for(const t of this.Pt.values()){const s=this.G().jt(t.ft()),i=t.yt();if(-1!==s&&-1!==i&&s!==i){const e=t._t(),n=(e.remove(),this.G().Nt(s));n.appendChild(e),t.vt(s)}}}Xt(){return this.kt?[...this.Pt.values()]:null}Rt(t){const s=this.Wt(t.elementId);this.Jt(s,t)}Jt(t,s){throw new Error("required override")}Ht(t){return t}Bt(t){this.qt("elem-focused",t)}Vt(t){this.qt("elem-blurred",t)}Tt(t){const s=this.Ht(this.Wt(t.elementId));t.focus?s.focus():s.blur()}Gt(t){const s=this.Wt(t.elementId),i=t.prop,e=t.val;i.startsWith("--")?s.style.setProperty(i,e):s.style[i]=e}Et(t){const s=this.Wt(t.elementId);s.setAttribute(t.name,t.val)}At(t){const s=this.Wt(t.elementId);s.removeAttribute(t.name)}Wt(t){const s=this.Pt.get(t);if(s)return s._t();throw new Error("no element with id "+t)}}}{const b0=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent),c0=/android/i.test(navigator.userAgent),d0=/safari/i.test(navigator.userAgent)&&!/(chrome|chromium|edg\/|OPR\/|nwjs)/i.test(navigator.userAgent);let n=0;function AddScript(i){const e=document.createElement("script");return e.async=!1,e.type="module",i.Zt?new Promise(t=>{const s="c3_resolve_"+n;++n,self[s]=t,e.textContent=i.str+`

self["${s}"]();`,document.head.appendChild(e)}):new Promise((t,s)=>{e.onload=t,e.onerror=s,e.src=i,document.head.appendChild(e)})}async function CheckSupportsWorkerMode(){if(!navigator.userActivation||"undefined"==typeof OffscreenCanvas)return!1;try{let t=!1;const s=new Blob([`
	self.addEventListener("message", () =>
	{
		try {
			const offscreenCanvas = new OffscreenCanvas(32, 32);
			const gl = offscreenCanvas.getContext("webgl");
			self.postMessage(!!gl);
		}
		catch (err)
		{
			console.warn("Feature detection worker error:", err);
			self.postMessage(false);
		}
	});`],{type:"text/javascript"}),i=new Worker(URL.createObjectURL(s),{get type(){t=!0}}),e=await new Promise(s=>{i.addEventListener("message",t=>{i.terminate(),s(t.data)}),i.postMessage("")});return t&&e}catch(t){return console.warn("Error feature detecting worker mode: ",t),!1}}let t=new Audio;const g0={"audio/webm; codecs=opus":!!t.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!t.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!t.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!t.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!t.canPlayType("audio/mp4"),"audio/mpeg":!!t.canPlayType("audio/mpeg")};async function BlobToString(t){const s=await BlobToArrayBuffer(t),i=new TextDecoder("utf-8");return i.decode(s)}function BlobToArrayBuffer(e){return new Promise((s,i)=>{const t=new FileReader;t.onload=t=>s(t.target.result),t.onerror=t=>i(t),t.readAsArrayBuffer(e)})}t=null;const h0=[];let e=0;const j0=8,k0=(window.RealFile=window.File,[]),l0=new Map,m0=new Map;let r=0;const o0=[],p0=(self.runOnStartup=function(t){if("function"!=typeof t)throw new Error("runOnStartup called without a function");o0.push(t)},new Set(["cordova","playable-ad-single-file","playable-ad-zip","instant-games"]));function IsWebViewExportType(t){return p0.has(t)}let s=!1;window.Qt=class P0{constructor(t){if(this.ts=t.ss,this.es=null,this.ns="",this.os=t.scriptFolder,this.hs=null,this.rs=null,this.cs=[],this.ls=null,this.us=!0,this.ds=[],this.ws=[],this.ps=!1,this.fs=()=>this.gs(),this.ys=!1,this.vs=0,this.bs=null,this.Ss=-1,this._s=()=>this.Os(),this.Ps=new Set,this.ks=null,this.Cs=[],this.xs=t.exportType,this.Ms="file"===location.protocol.substr(0,4),this.Is=[],"playable-ad-single-file"!==this.xs&&"playable-ad-zip"!==this.xs&&"instant-games"!==this.xs||(this.ts=!1),d0&&(this.ts=!1),"cordova"===this.xs&&this.ts&&c0){const s=/Chrome\/(\d+)/i.exec(navigator.userAgent);s&&90<=parseInt(s[1],10)||(this.ts=!1)}this.Rs()?self.chrome.webview.addEventListener("message",t=>this.Ts(t.data,t.additionalObjects)):"macos-wkwebview"===this.xs?self.C3WrapperOnMessage=t=>this.Ts(JSON.parse(t)):"linux-cef"===this.xs&&self.c3_linux_cef_set_message_callback(t=>this.Ts(JSON.parse(t))),this.Gs=null,this.Es=null,"html5"!==this.xs||window.isSecureContext||console.warn("[Construct] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available."),this.R("canvas","update-size",t=>this.As(t)),this.R("canvas","set-html-layer-count",t=>this._OnSetHTMLLayerCount(t)),this.R("canvas","cleanup-html-layers",()=>this.Ds()),this.R("canvas","update-html-layer-dom-state",t=>this.Fs(t.layersDomState)),this.R("runtime","cordova-fetch-local-file",t=>this.Ws(t)),this.R("runtime","create-job-worker",t=>this.Ls(t)),this.R("runtime","send-wrapper-extension-message",t=>this.Us(t)),"cordova"===this.xs?document.addEventListener("deviceready",()=>this.Hs(t)):this.Hs(t),this.Bs=0}it(){this.Vs(),this.es&&(this.es.onmessage=null,this.es=null),this.hs&&(this.hs.terminate(),this.hs=null),this.rs&&(this.rs.it(),this.rs=null);for(const{canvas:t,js:s}of this.ds)t.remove(),s.remove();this.ds.length=0}Ns(){return this.ds[0].canvas}jt(t){return Math.min(t,this.ds.length-1)}Nt(t){if(t<0||t>=this.ds.length)throw new RangeError("invalid canvas layer");return this.ds[t].js}["_GetHTMLWrapElement"](t){return this.Nt(t)}zs(){return this.ns}C(){return this.ts}qs(){return this.xs}$s(){return this.Ms}Ys(){return this.os}Ks(){return b0&&"cordova"===this.xs}Xs(){const t=navigator.userAgent;return b0&&IsWebViewExportType(this.xs)||navigator.standalone||/crios\/|fxios\/|edgios\//i.test(t)}Js(){return c0}Zs(){return c0&&IsWebViewExportType(this.xs)}Qs(){return"windows-webview2"===this.xs||!!("preview"===this.xs&&window.chrome&&window.chrome.webview&&window.chrome.webview.postMessage)}Rs(){return this.Qs()||"xbox-uwp-webview2"===this.xs}ti(){this.Zs()&&this.Bs++}si(){return this.ii().next().value}*ii(){if(!this.Zs())return!0;yield 0===this.Bs,0<this.Bs&&this.Bs--}async Hs(t){if(this.ts){const i=await CheckSupportsWorkerMode();i||(this.ts=!1)}if("macos-wkwebview"===this.xs&&this.ei({type:"ready"}),this.Rs()||"macos-wkwebview"===this.xs||"linux-cef"===this.xs){this.ni();const e=await this.oi();this.Cs=e.registeredComponentIds}if("playable-ad-single-file"===this.xs&&(this.Gs=self.c3_base64files,this.Es={},await this.hi()),"nwjs"===this.xs&&self.nw){const n=self.nw.Window.get();if(n.on("close",()=>self.nw.App.quit()),self.nw.App.manifest["c3-steam-mode"]){let t=0;this.F(()=>{t++,document.documentElement.style.opacity=t%2==0?"1":"0.999"})}}if(t.runtimeBaseUrl)this.ns=t.runtimeBaseUrl;else{const o=location.origin,h=(this.ns=("null"===o?"file:///":o)+location.pathname,this.ns.lastIndexOf("/"));-1!==h&&(this.ns=this.ns.substr(0,h+1))}const s=new MessageChannel;if(this.es=s.port1,this.es.onmessage=t=>this._OnMessageFromRuntime(t.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(t=>this.ri(t)),this.bs=new self.ai(this),await this.bs.ci(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen)try{await new Promise((t,s)=>{window.AndroidFullScreen.immersiveMode(t,s)})}catch(t){console.error("Failed to enter Android immersive mode: ",t)}this.ts?await this.li(t,s.port2):await this.di(t,s.port2)}wi(t){return{runtimeBaseUrl:this.ns,previewUrl:location.href,windowInnerWidth:this.pi(),windowInnerHeight:this.fi(),cssDisplayMode:this.mi(),devicePixelRatio:window.devicePixelRatio,isFullscreen:P0.gi(),swClientId:window.cr_swClientId||"",exportType:t.exportType,isNWjs:"undefined"!=typeof nw,fileMap:globalThis.c3_swFileMap??new Map(Object.entries(this.Gs??{})),scriptFolder:this.os,isDebug:new URLSearchParams(self.location.search).has("debug"),ife:!!self.ife,jobScheduler:this.bs.yi(),supportedAudioFormats:g0,isFileProtocol:this.Ms,isiOSCordova:this.Ks(),isiOSWebView:this.Xs(),isWindowsWebView2:this.Qs(),isAnyWebView2Wrapper:this.Rs(),wrapperComponentIds:this.Cs,isFBInstantAvailable:void 0!==self.FBInstant}}async li(t,s){const n=t.vi,i=("preview"===this.xs?(this.hs=new Worker("previewworker.js",{type:"module",name:"Runtime"}),await new Promise((s,i)=>{const e=t=>{this.hs.removeEventListener("message",e),(t.data&&"ok"===t.data.type?s:i)()};this.hs.addEventListener("message",e),this.hs.postMessage({type:"construct-worker-init",import:new URL(n,this.ns).toString()})})):this.hs=await this.bi(n,{type:"module",name:"Runtime"}),document.createElement("canvas")),e=(i.style.display="none",i.transferControlToOffscreen()),o=(document.body.appendChild(i),document.createElement("div"));o.className="c3htmlwrap",o.setAttribute("interactive",""),document.body.appendChild(o),this.ds.push({canvas:i,js:o,Si:{isVisible:!0,opacity:1,isInteractive:!0}}),window.c3canvas=i,self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders(),this.hs.postMessage(Object.assign(this.wi(t),{type:"init-runtime",isInWorker:!0,messagePort:s,canvas:e,runtimeScriptList:t.runtimeScriptList,projectMainScriptPath:t.projectMainScriptPath,scriptsInEventsPath:t.scriptsInEventsPath}),[s,e,...this.bs._i()]),this.cs=k0.map(t=>new t(this)),this.Oi(),this.ls.Pi(i),this.ls.ki(o),this.ls.Ci(),self.c3_callFunction=(t,s)=>this.ls.xi(t,s),"preview"===this.xs&&(self.goToLastErrorScript=()=>this.S("runtime","go-to-last-error-script"))}async di(t,s){const i=document.createElement("canvas"),e=(i.style.display="none",document.body.appendChild(i),document.createElement("div")),n=(e.className="c3htmlwrap",e.setAttribute("interactive",""),document.body.appendChild(e),this.ds.push({canvas:i,js:e,Si:{isVisible:!0,opacity:1,isInteractive:!0}}),window.c3canvas=i,self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders(),this.cs=k0.map(t=>new t(this)),this.Oi(),this.ls.Pi(i),this.ls.ki(e),await Promise.all(t.runtimeScriptList.map(t=>this.Mi(t)))),o=(await Promise.all(n.map(t=>AddScript(t))),t.projectMainScriptPath),h=t.scriptsInEventsPath;if(o)try{if(await AddScript(o),"preview"===this.xs&&!globalThis.C3_ProjectMainScriptOK)throw new Error("main script did not run to completion")}catch(t){this.Ii(),console.error("Error loading project main script: ",t),alert(`Failed to load the project main script (${o}). Check all your JavaScript code has valid syntax, all imports are written correctly, and that an exception was not thrown running the script. Press F12 and check the console for error details.`)}if(h)try{if(await AddScript(h),"preview"===this.xs&&!globalThis.C3.ScriptsInEvents)throw new Error("scripts in events did not run to completion")}catch(t){this.Ii(),console.error("Error loading scripts in events: ",t),alert("Failed to load scripts in events. Check all your JavaScript code has valid syntax, all imports are written correctly, and that an exception was not thrown running the 'Imports for events' script. Press F12 and check the console for error details.")}const r=Object.assign(this.wi(t),{isInWorker:!1,messagePort:s,canvas:i,runOnStartupFunctions:o0});this.ls.Ci(),this.Ri(),this.rs=self.C3_CreateRuntime(r),await self.C3_InitRuntime(this.rs,r)}async bi(t,s){if(t.startsWith("blob:"))return new Worker(t,s);if("cordova"===this.xs&&this.Ms){const n=await this.Ti(t),o=new Blob([n],{type:"application/javascript"});return new Worker(URL.createObjectURL(o),s)}if("playable-ad-single-file"===this.xs){const h=this.Gs[t];if(h)return new Worker(URL.createObjectURL(h),s);throw new Error("missing script: "+t)}const i=new URL(t,location.href),e=location.origin!==i.origin;if(e){const r=await fetch(i);if(!r.ok)throw new Error("failed to fetch worker script");const a=await r.blob();return new Worker(URL.createObjectURL(a),s)}return new Worker(i,s)}pi(){return Math.max(window.innerWidth,1)}fi(){return Math.max(window.innerHeight,1)}mi(){if(this.Rs())return"standalone";const t=this.qs(),s=new Set(["cordova","nwjs","macos-wkwebview","linux-cef"]);return s.has(t)?"standalone":window.matchMedia("(display-mode: fullscreen)").matches?"fullscreen":window.matchMedia("(display-mode: standalone)").matches?"standalone":window.matchMedia("(display-mode: minimal-ui)").matches?"minimal-ui":navigator.standalone?"standalone":"browser"}Ri(){this.Ii()}Ii(){const t=window.cr_previewLoadingElem;t&&(t.parentElement.removeChild(t),window.cr_previewLoadingElem=null)}async Ls(t){const s=await this.bs.Gi();return{outputPort:s,transferables:[s]}}As(t){if(!this.Ei()){const s=t.styleWidth+"px",i=t.styleHeight+"px",e=t.marginLeft+"px",n=t.marginTop+"px";for(const{canvas:o,js:h}of this.ds)o.style.width=s,o.style.height=i,o.style.marginLeft=e,o.style.marginTop=n,h.style.width=s,h.style.height=i,h.style.marginLeft=e,h.style.marginTop=n,this.us&&(o.style.display="",h.style.display="");document.documentElement.style.setProperty("--construct-scale",t.displayScale),this.us=!1}}["_OnSetHTMLLayerCount"](t){const i=t.count,s=t.layersDomState,e=t.immediate,n=t.styleWidth+"px",o=t.styleHeight+"px",h=t.marginLeft+"px",r=t.marginTop+"px",a=[],c=[];if(i<this.ds.length)for(;this.ds.length>i;){const{canvas:l,js:u}=this.ds.pop();u.remove(),this.ts&&!e?this.ws.push(l):l.remove()}else if(i>this.ds.length)for(let t=0,s=i-this.ds.length;t<s;++t){const d=document.createElement("canvas");if(d.classList.add("c3overlay"),this.ts){const p=d.transferControlToOffscreen();a.push(p),c.push(p)}else a.push(d);document.body.appendChild(d);const w=document.createElement("div");w.classList.add("c3htmlwrap","c3overlay"),w.setAttribute("interactive",""),document.body.appendChild(w),d.style.width=n,d.style.height=o,d.style.marginLeft=h,d.style.marginTop=r,w.style.width=n,w.style.height=o,w.style.marginLeft=h,w.style.marginTop=r,this.ls.Pi(d),this.ls.ki(w),this.ds.push({canvas:d,js:w,Si:{isVisible:!0,opacity:1,isInteractive:!0}})}this.Fs(s);for(const f of this.cs)f instanceof window.Ot&&f.Kt();return this.Yt(),{addedCanvases:a,transferables:c}}Fs(i){for(let t=0,s=Math.min(this.ds.length,i.length);t<s;++t){const{js:e,Si:n}=this.ds[t],o=i[t],h=o.isVisible,r=o.opacity,a=o.isInteractive;h!==n.isVisible&&(e.style.display=h?"":"none",n.isVisible=h),r!==n.opacity&&(e.style.opacity=1===r?"":String(r),n.opacity=r),a!==n.isInteractive&&(e.style.pointerEvents=a?"":"none",a?e.setAttribute("interactive",""):e.removeAttribute("interactive"),n.isInteractive=a)}}Ds(){for(const t of this.ws)t.remove();this.ws.length=0}Yt(){this.ps||(this.ps=!0,this.F(this.fs))}gs(){this.L(this.fs),this.ps=!1;let t=[];for(const o of this.cs)if(o instanceof window.Ot){const h=o.Xt();h&&t.push(...h)}t.sort((t,s)=>{const i=t.yt(),e=s.yt();if(i!==e)return i-e;const n=t.St(),o=s.St();return n-o});let s=0,i=0,e=0,n=t.length;for(;e<n;++e){const r=t[e];r.yt()!==s&&(this.Ai(s,t.slice(i,e)),s=r.yt(),i=e)}i<e&&this.Ai(s,t.slice(i,e))}Ai(t,s){if(!(s.length<=1||t>=this.ds.length)){const e=s.map(t=>t._t()),i=new Set(e),n=this.Nt(t),o=Array.from(n.children).filter(t=>i.has(t));for(let t=0,s=0,i=e.length;t<i;++t){const h=e[t],r=o[s];h===r?++s:n.insertBefore(h,r)}}}M(){if(this.ts)throw new Error("not available in worker mode");return this.rs}S(t,s,i,e,n){this.es.postMessage({type:"event",component:t,handler:s,dispatchOpts:e||null,data:i,responseId:null},n)}O(t,s,i,e,n){const o=r++,h=new Promise((t,s)=>{m0.set(o,{resolve:t,reject:s})});return this.es.postMessage({type:"event",component:t,handler:s,dispatchOpts:e||null,data:i,responseId:o},n),h}["_OnMessageFromRuntime"](t){const s=t.type;if("event"===s)return this.Di(t);if("result"===s)this.Fi(t);else if("runtime-ready"===s)this.Wi();else if("alert-error"===s)this.Ii(),alert(t.message);else{if("creating-runtime"!==s)throw new Error(`unknown message '${s}'`);this.Ri()}}Di(s){const i=s.component,e=s.handler,n=s.data,o=s.responseId,t=l0.get(i);if(t){const h=t.get(e);if(h){let t=null;try{t=h(n)}catch(s){return console.error(`Exception in '${i}' handler '${e}':`,s),void(null!==o&&this.Li(o,!1,""+s))}if(null===o)return t;t&&t.then?t.then(t=>this.Li(o,!0,t)).catch(t=>{console.error(`Rejection from '${i}' handler '${e}':`,t),this.Li(o,!1,""+t)}):this.Li(o,!0,t)}else console.warn(`[DOM] No handler '${e}' for component '${i}'`)}else console.warn(`[DOM] No event handlers for component '${i}'`)}Li(t,s,i){let e;i&&i.transferables&&(e=i.transferables),this.es.postMessage({type:"result",responseId:t,isOk:s,result:i},e)}Fi(t){const s=t.responseId,i=t.isOk,e=t.result,n=m0.get(s);i?n.resolve(e):n.reject(e),m0.delete(s)}R(t,s,i){let e=l0.get(t);if(e||(e=new Map,l0.set(t,e)),e.has(s))throw new Error(`[DOM] Component '${t}' already has handler '${s}'`);e.set(s,i)}static Ui(t){if(k0.includes(t))throw new Error("DOM handler already added");k0.push(t)}Oi(){for(const t of this.cs)if("runtime"===t.A())return void(this.ls=t);throw new Error("cannot find runtime DOM handler")}ri(t){this.S("debugger","message",t)}Wi(){for(const t of this.cs)t.g()}static gi(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||s)}static Hi(t){s=!!t}async Bi(){return this.O("runtime","get-remote-preview-status-info")}F(t){this.Ps.add(t),this.Vi()}L(t){this.Ps.delete(t),0===this.Ps.size&&this.Vs()}Vi(){-1===this.Ss&&0<this.Ps.size&&(this.Ss=requestAnimationFrame(this._s))}Vs(){-1!==this.Ss&&(cancelAnimationFrame(this.Ss),this.Ss=-1)}Os(){this.Ss=-1;for(const t of this.Ps)t();this.Vi()}ji(t){this.ls.ji(t)}Ni(t){this.ls.Ni(t)}zi(){this.ls.zi()}$i(t){this.ls.$i(t)}Yi(t){return!!g0[t]}Ki(t){this.ys=!0,this.vs=t}Ei(){return this.ys}Xi(){return this.vs}Ji(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)}Zi(t){return!this.Ji(t)}async Mi(s){if("cordova"===this.xs&&(s.startsWith("file:")||this.Ms&&this.Zi(s))){let t=s;t.startsWith(this.ns)&&(t=t.substr(this.ns.length));const i=await this.Ti(t),e=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(e)}if("playable-ad-single-file"!==this.xs)return s;if(this.Es.hasOwnProperty(s))return{Zt:!0,str:this.Es[s]};if(this.Gs.hasOwnProperty(s))return URL.createObjectURL(this.Gs[s]);throw new Error("missing script: "+s)}async Ws(t){const s=t.filename;switch(t.as){case"text":return this.Qi(s);case"buffer":return this.Ti(s);default:throw new Error("unsupported type")}}te(t){const e=window.cordova.file.applicationDirectory+"www/"+t;return new Promise((s,i)=>{window.resolveLocalFileSystemURL(e,t=>{t.file(s,i)},i)})}async Qi(t){const s=await this.te(t);return BlobToString(s)}se(){if(h0.length&&!(e>=j0)){e++;const t=h0.shift();this.ie(t.filename,t.ee,t.ne)}}Ti(t){return new Promise((s,i)=>{h0.push({filename:t,ee:t=>{e--,this.se(),s(t)},ne:t=>{e--,this.se(),i(t)}}),this.se()})}async ie(t,s,i){try{const e=await this.te(t),n=await BlobToArrayBuffer(e);s(n)}catch(t){i(t)}}["_PlayableAdFetchBlob"](t){if(this.Gs.hasOwnProperty(t))return this.Gs[t];throw new Error("missing file: "+t)}oe(){const t=window.cordova&&window.cordova.plugins&&window.cordova.plugins.permissions;if("object"!=typeof t)throw new Error("Permission API is not loaded");return t}he(t,s){const i=t[s];if("string"!=typeof i)throw new Error("Invalid permission name");return i}re(i){const e=this.oe();return new Promise((s,t)=>e.checkPermission(this.he(e,i),t=>s(!!t.hasPermission),t))}ae(i){const e=this.oe();return new Promise((s,t)=>e.requestPermission(this.he(e,i),t=>s(!!t.hasPermission),t))}async ce(t){if("cordova"===this.qs()&&!this.Ks())for(const s of t){const i=await this.re(s);if(!i){const e=await this.ae(s);if(!1===e)return!1}}return!0}async le(...t){if(!1===await this.ce(t))throw new Error("Permission not granted")}Ts(t,s){if("object"==typeof t&&t){const i=t.type;if("directory-handles"===i)this.Is=s;else if("wrapper-init-response"===i)this.ks(t),this.ks=null;else if("fullscreen-change"===i)P0.Hi(t.isFullscreen),this.ls.ue();else if("log-to-console"===i)switch(t.logType){case"error":console.error(t.message);break;case"warning":console.warn(t.message);break;default:console.log(t.message)}else"extension-message"===i?this.S("runtime","wrapper-extension-message",t):console.warn("Unknown wrapper message: ",t)}else console.warn("Unknown wrapper message: ",t)}Us(t){this.ei({type:"extension-message",componentId:t.componentId,messageId:t.messageId,params:t.params||[],asyncId:t.asyncId})}ei(t){this.Rs()?window.chrome.webview.postMessage(JSON.stringify(t)):"macos-wkwebview"===this.xs?window.webkit.messageHandlers.C3Wrapper.postMessage(JSON.stringify(t)):"linux-cef"===this.xs&&window.c3_linux_cef_sendmessage(JSON.stringify(t))}ni(){window.moveTo=(t,s)=>{this.ei({type:"set-window-position",windowX:Math.ceil(t),windowY:Math.ceil(s)})},window.resizeTo=(t,s)=>{this.ei({type:"set-window-size",windowWidth:Math.ceil(t),windowHeight:Math.ceil(s)})}}oi(){return new Promise(t=>{this.ks=t,this.ei({type:"wrapper-init"})})}de(){return this.Is}async hi(){const t=[];for(const[s,i]of Object.entries(this.Gs))t.push(this.we(s,i));await Promise.all(t)}async we(s,i){if("object"==typeof i)this.Gs[s]=new Blob([i.str],{type:i.type}),this.Es[s]=i.str;else{let t=await this.pe(i);t=t||this.fe(i),this.Gs[s]=t}}async pe(t){try{const s=await fetch(t);return await s.blob()}catch(t){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",t),null}}fe(t){const s=this.me(t);return this.ge(s.data,s.ye)}me(t){const s=t.indexOf(",");if(s<0)throw new URIError("expected comma in data: uri");const i=t.substring(5,s),e=t.substring(s+1),n=i.split(";"),o=n[0]||"",h=n[1],r=n[2];return{ye:o,data:("base64"===h||"base64"===r?atob:decodeURIComponent)(e)}}ge(t,s){let i=t.length,e=i>>2,n=new Uint8Array(i),o=new Uint32Array(n.buffer,0,e),h,r;for(h=0,r=0;h<e;++h)o[h]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;let a=3&i;for(;a--;)n[r]=t.charCodeAt(r),++r;return new Blob([n],{type:s})}}}{const Md=self.Qt;function IsCompatibilityMouseEvent(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||t.originalEvent&&t.originalEvent.sourceCapabilities&&t.originalEvent.sourceCapabilities.firesTouchEvents}const Nd=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),Od={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},Pd={dispatchUserScriptEvent:!0},Qd={dispatchRuntimeEvent:!0};function AddStyleSheet(e){return new Promise((t,s)=>{const i=document.createElement("link");i.onload=()=>t(i),i.onerror=t=>s(t),i.rel="stylesheet",i.href=e,document.head.appendChild(i)})}function FetchImage(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})}async function BlobToImage(t){const s=URL.createObjectURL(t);try{return await FetchImage(s)}finally{URL.revokeObjectURL(s)}}function BlobToString(e){return new Promise((s,i)=>{let t=new FileReader;t.onload=t=>s(t.target.result),t.onerror=t=>i(t),t.readAsText(e)})}function IsInContentEditable(t){do{if(t.parentNode&&t.hasAttribute("contenteditable"))return!0}while(t=t.parentNode);return!1}const Rd=new Set(["input","textarea","datalist","select"]);function IsKeyboardInputElement(t){return Rd.has(t.tagName.toLowerCase())||IsInContentEditable(t)}const Sd=new Set(["canvas","body","html"]);function PreventDefaultOnCanvasOrDoc(t){if(t.target.tagName){const s=t.target.tagName.toLowerCase();Sd.has(s)&&t.preventDefault()}}function PreventDefaultOnHTMLWrap(t){t.target.tagName&&t.target.classList.contains("c3htmlwrap")&&t.preventDefault()}function BlockWheelZoom(t){(t.metaKey||t.ctrlKey)&&t.preventDefault()}self.C3_GetSvgImageSize=async function(t){const s=await BlobToImage(t);if(0<s.width&&0<s.height)return[s.width,s.height];{s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.visibility="hidden",document.body.appendChild(s);const i=s.getBoundingClientRect();return document.body.removeChild(s),[i.width,i.height]}};let t=!(self.C3_RasterSvgImageBlob=async function(t,s,i,e,n){const o=await BlobToImage(t),h=document.createElement("canvas"),r=(h.width=e,h.height=n,h.getContext("2d"));return r.drawImage(o,0,0,s,i),h});function ParentHasFocus(){try{return window.parent&&window.parent.document.hasFocus()}catch(t){return!1}}document.addEventListener("pause",()=>t=!0),document.addEventListener("resume",()=>t=!1);const Ud="runtime",Vd=class extends self.i{constructor(t){super(t,Ud),this.ve=!1,this.be=-1,this.Se="any",this._e=!1,this.Oe=!1,this.Pe=!1,this.ke=document.createElement("div"),this.ke.className="c3-screen-reader-text",this.ke.setAttribute("aria-live","polite"),document.body.appendChild(this.ke),this.Ce=null,this.xe=!1,this.Me="",this.Ie=-1,this.Re=!1,this.Te=t.pi(),this.Ge=t.fi(),this.Ee=0,this.Ae=0,t.R("runtime","invoke-download",t=>this.De(t)),t.R("runtime","load-webfonts",t=>this.Fe(t)),t.R("runtime","raster-svg-image",t=>this.We(t)),t.R("runtime","get-svg-image-size",t=>this.Le(t)),t.R("runtime","set-target-orientation",t=>this.Ue(t)),t.R("runtime","register-sw",()=>this.He()),t.R("runtime","post-to-debugger",t=>this.Be(t)),t.R("runtime","go-to-script",t=>this.Be(t)),t.R("runtime","before-start-ticking",()=>this.Ve()),t.R("runtime","debug-highlight",t=>this.je(t)),t.R("runtime","enable-device-orientation",()=>this.Ne()),t.R("runtime","enable-device-motion",()=>this.ze()),t.R("runtime","add-stylesheet",t=>this.qe(t)),t.R("runtime","script-create-worker",t=>this.$e(t)),t.R("runtime","alert",t=>this.Ye(t)),t.R("runtime","screen-reader-text",t=>this.Ke(t)),t.R("runtime","hide-cordova-splash",()=>this.Xe()),t.R("runtime","set-exporting-to-video",t=>this.Je(t)),t.R("runtime","export-to-video-progress",t=>this.Ze(t)),t.R("runtime","exported-to-video",t=>this.Qe(t)),t.R("runtime","exported-to-image-sequence",t=>this.tn(t));const e=new Set(["input","textarea","datalist"]);if(window.addEventListener("contextmenu",t=>{const s=t.target,i=s.tagName.toLowerCase();e.has(i)||IsInContentEditable(s)||t.preventDefault()}),window.addEventListener("selectstart",PreventDefaultOnCanvasOrDoc),window.addEventListener("gesturehold",PreventDefaultOnCanvasOrDoc),window.addEventListener("touchstart",PreventDefaultOnCanvasOrDoc,{passive:!1}),window.addEventListener("pointerdown",PreventDefaultOnCanvasOrDoc,{passive:!1}),this.sn=0,window.addEventListener("mousedown",t=>{1===t.button&&t.preventDefault()}),window.addEventListener("mousewheel",BlockWheelZoom,{passive:!1}),window.addEventListener("wheel",BlockWheelZoom,{passive:!1}),window.addEventListener("resize",()=>this.en()),window.addEventListener("fullscreenchange",()=>this.ue()),window.addEventListener("webkitfullscreenchange",()=>this.ue()),window.addEventListener("mozfullscreenchange",()=>this.ue()),window.addEventListener("fullscreenerror",t=>this.nn(t)),window.addEventListener("webkitfullscreenerror",t=>this.nn(t)),window.addEventListener("mozfullscreenerror",t=>this.nn(t)),t.Xs()){let s=1/0;window.visualViewport.addEventListener("resize",()=>{const t=window.visualViewport.height;t>s&&(document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0),s=t}),document.documentElement.setAttribute("ioswebview","")}this.hn=new Set,this.rn=new WeakSet,this.an=!1}Pi(t){t.addEventListener("selectstart",PreventDefaultOnCanvasOrDoc),t.addEventListener("gesturehold",PreventDefaultOnCanvasOrDoc),t.addEventListener("pointerdown",PreventDefaultOnCanvasOrDoc)}ki(t){t.addEventListener("selectstart",PreventDefaultOnHTMLWrap),t.addEventListener("gesturehold",PreventDefaultOnHTMLWrap),t.addEventListener("touchstart",PreventDefaultOnHTMLWrap)}Ve(){return self.setTimeout(()=>{this.Re=!0},1e3),"cordova"===this.o.qs()?(document.addEventListener("pause",()=>this.cn(!0)),document.addEventListener("resume",()=>this.cn(!1))):document.addEventListener("visibilitychange",()=>this.cn("hidden"===document.visibilityState)),this.Pe=!("hidden"!==document.visibilityState&&!t),{isSuspended:this.Pe}}g(){window.addEventListener("focus",()=>this.ln("window-focus")),window.addEventListener("blur",()=>{this.ln("window-blur",{parentHasFocus:ParentHasFocus()}),this.sn=0}),window.addEventListener("focusin",t=>{IsKeyboardInputElement(t.target)&&this.ln("keyboard-blur")}),window.addEventListener("keydown",t=>this.un("keydown",t)),window.addEventListener("keyup",t=>this.un("keyup",t)),window.addEventListener("mousedown",t=>this.dn("mousedown",t,Pd)),window.addEventListener("mousemove",t=>this.dn("mousemove",t,Pd)),window.addEventListener("mouseup",t=>this.dn("mouseup",t,Pd)),window.addEventListener("dblclick",t=>this.dn("dblclick",t,Od)),window.addEventListener("wheel",t=>this.wn("wheel",t,Od)),window.addEventListener("pointerdown",t=>{this.pn(t),this.fn("pointerdown",t)}),this.o.C()&&void 0!==window.onpointerrawupdate&&self===self.top?window.addEventListener("pointerrawupdate",t=>this.mn(t)):window.addEventListener("pointermove",t=>this.fn("pointermove",t)),window.addEventListener("pointerup",t=>this.fn("pointerup",t)),window.addEventListener("pointercancel",t=>this.fn("pointercancel",t));const t=()=>this.zi();window.addEventListener("pointerup",t,!0),window.addEventListener("touchend",t,!0),window.addEventListener("click",t,!0),window.addEventListener("keydown",t,!0),window.addEventListener("gamepadconnected",t,!0),this.o.Js()&&!this.o.Zs()&&navigator.virtualKeyboard&&(navigator.virtualKeyboard.overlaysContent=!0,navigator.virtualKeyboard.addEventListener("geometrychange",()=>{this.gn(this.fi(),navigator.virtualKeyboard.boundingRect.height)})),this.o.Xs()&&(document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0)}gn(s,i){if(document.body.style.position="",document.body.style.overflow="",document.body.style.transform="",(this.Ae=0)<i){const e=document.activeElement;if(e){const n=e.getBoundingClientRect(),o=(n.top+n.bottom)/2,h=(s-i)/2;let t=o-h;0<(t=(t=i<t?i:t)<0?0:t)&&(document.body.style.position="absolute",document.body.style.overflow="visible",document.body.style.transform=`translateY(${-t}px)`,this.Ae=t)}}}ln(t,s){this.v(t,s||null,Qd)}pi(){return this.o.pi()}fi(){return this.o.fi()}Ci(){this.ve=!0,this.Te=this.o.pi(),this.Ge=this.o.fi()}en(){if(!this.xe&&this.ve){const t=this.pi(),s=this.fi();if(this.o.Zs()){if(this.Re){const i=this.o.si();if(i&&this.Te===t&&s<this.Ge)return this.Ee=this.Ge-s,void this.gn(this.Ge,this.Ee);0<this.Ee&&(this.Ee=0,this.gn(s,this.Ee))}this.Te=t,this.Ge=s}this.v("window-resize",{innerWidth:t,innerHeight:s,devicePixelRatio:window.devicePixelRatio,isFullscreen:Md.gi(),cssDisplayMode:this.o.mi()}),this.o.Xs()&&(-1!==this.be&&clearTimeout(this.be),this.yn(t,s,0))}}vn(t,s,i){-1!==this.be&&clearTimeout(this.be),this.be=setTimeout(()=>this.yn(t,s,i),48)}yn(t,s,i){const e=this.pi(),n=this.fi();this.be=-1,e!=t||n!=s?this.v("window-resize",{innerWidth:e,innerHeight:n,devicePixelRatio:window.devicePixelRatio,isFullscreen:Md.gi(),cssDisplayMode:this.o.mi()}):i<10&&this.vn(e,n,i+1)}Ue(t){this.Se=t.targetOrientation}bn(){const s=this.Se;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(s).catch(t=>console.warn("[Construct] Failed to lock orientation: ",t));else try{let t=!1;screen.lockOrientation?t=screen.lockOrientation(s):screen.webkitLockOrientation?t=screen.webkitLockOrientation(s):screen.mozLockOrientation?t=screen.mozLockOrientation(s):screen.msLockOrientation&&(t=screen.msLockOrientation(s)),t||console.warn("[Construct] Failed to lock orientation")}catch(t){console.warn("[Construct] Failed to lock orientation: ",t)}}ue(){if(!this.xe){const t=Md.gi();t&&"any"!==this.Se&&this.bn(),this.v("fullscreenchange",{isFullscreen:t,innerWidth:this.pi(),innerHeight:this.fi()})}}nn(t){console.warn("[Construct] Fullscreen request failed: ",t),this.v("fullscreenerror",{isFullscreen:Md.gi(),innerWidth:this.pi(),innerHeight:this.fi()})}cn(t){if(this.Pe!==t&&((this.Pe=t)?this.o.Vs():this.o.Vi(),this.v("visibilitychange",{hidden:t}),!t)&&this.o.Xs()){const s=()=>{document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0};setTimeout(s,50),setTimeout(s,100),setTimeout(s,250),setTimeout(s,500)}}un(t,s){if(void 0!==s.key&&("Backspace"===s.key&&PreventDefaultOnCanvasOrDoc(s),"nwjs"===this.o.qs()&&"u"===s.key&&(s.ctrlKey||s.metaKey)&&s.preventDefault(),!this.xe)){const i=Nd.get(s.code)||s.code;this.P(t,{code:i,key:s.key,which:s.which,repeat:s.repeat,altKey:s.altKey,ctrlKey:s.ctrlKey,metaKey:s.metaKey,shiftKey:s.shiftKey,timeStamp:s.timeStamp},Od)}}wn(t,s,i){this.xe||this.v(t,{clientX:s.clientX,clientY:s.clientY+this.Ae,pageX:s.pageX,pageY:s.pageY+this.Ae,deltaX:s.deltaX,deltaY:s.deltaY,deltaZ:s.deltaZ,deltaMode:s.deltaMode,timeStamp:s.timeStamp},i)}dn(t,s,i){this.xe||IsCompatibilityMouseEvent(s)||this.P(t,{button:s.button,buttons:s.buttons,clientX:s.clientX,clientY:s.clientY+this.Ae,pageX:s.pageX,pageY:s.pageY+this.Ae,movementX:s.movementX||0,movementY:s.movementY||0,timeStamp:s.timeStamp},i)}fn(s,i){if(!this.xe){let t=0;"mouse"===i.pointerType&&(t=this.sn),this.P(s,{pointerId:i.pointerId,pointerType:i.pointerType,button:i.button,buttons:i.buttons,lastButtons:t,clientX:i.clientX,clientY:i.clientY+this.Ae,pageX:i.pageX,pageY:i.pageY+this.Ae,movementX:i.movementX||0,movementY:i.movementY||0,width:i.width||0,height:i.height||0,pressure:i.pressure||0,tangentialPressure:i.tangentialPressure||0,tiltX:i.tiltX||0,tiltY:i.tiltY||0,twist:i.twist||0,timeStamp:i.timeStamp},Od),"mouse"===i.pointerType&&(this.sn=i.buttons)}}mn(t){this.fn("pointermove",t)}Sn(i,e){if(!this.xe)for(let t=0,s=e.changedTouches.length;t<s;++t){const n=e.changedTouches[t];this.P(i,{pointerId:n.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:n.clientX,clientY:n.clientY+this.Ae,pageX:n.pageX,pageY:n.pageY+this.Ae,movementX:e.movementX||0,movementY:e.movementY||0,width:2*(n.radiusX||n.webkitRadiusX||0),height:2*(n.radiusY||n.webkitRadiusY||0),pressure:n.force||n.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:n.rotationAngle||0,timeStamp:e.timeStamp},Od)}}pn(t){window!==window.top&&window.focus(),this._n(t.target)&&document.activeElement&&!this._n(document.activeElement)&&document.activeElement.blur()}_n(t){return!t||t===document||t===window||t===document.body||"canvas"===t.tagName.toLowerCase()}Ne(){this._e||(this._e=!0,window.addEventListener("deviceorientation",t=>this.On(t)),window.addEventListener("deviceorientationabsolute",t=>this.Pn(t)))}ze(){this.Oe||(this.Oe=!0,window.addEventListener("devicemotion",t=>this.kn(t)))}On(t){this.xe||this.v("deviceorientation",{absolute:!!t.absolute,alpha:t.alpha||0,beta:t.beta||0,gamma:t.gamma||0,timeStamp:t.timeStamp,webkitCompassHeading:t.webkitCompassHeading,webkitCompassAccuracy:t.webkitCompassAccuracy},Od)}Pn(t){this.xe||this.v("deviceorientationabsolute",{absolute:!!t.absolute,alpha:t.alpha||0,beta:t.beta||0,gamma:t.gamma||0,timeStamp:t.timeStamp},Od)}kn(e){if(!this.xe){let t=null;const n=e.acceleration;n&&(t={x:n.x||0,y:n.y||0,z:n.z||0});let s=null;const o=e.accelerationIncludingGravity;o&&(s={x:o.x||0,y:o.y||0,z:o.z||0});let i=null;const h=e.rotationRate;h&&(i={alpha:h.alpha||0,beta:h.beta||0,gamma:h.gamma||0}),this.v("devicemotion",{acceleration:t,accelerationIncludingGravity:s,rotationRate:i,interval:e.interval,timeStamp:e.timeStamp},Od)}}De(t){const s=t.url,i=t.filename,e=document.createElement("a"),n=document.body;e.textContent=i,e.href=s,e.download=i,n.appendChild(e),e.click(),n.removeChild(e)}async Fe(t){const s=t.webfonts;await Promise.all(s.map(async t=>{const s=new FontFace(t.name,`url('${t.url}')`);document.fonts.add(s),await s.load()}))}async We(t){const s=t.blob,i=t.imageWidth,e=t.imageHeight,n=t.surfaceWidth,o=t.surfaceHeight,h=t.imageBitmapOpts,r=await self.C3_RasterSvgImageBlob(s,i,e,n,o);let a;return{imageBitmap:a=h?await createImageBitmap(r,h):await createImageBitmap(r),transferables:[a]}}async Le(t){return self.C3_GetSvgImageSize(t.blob)}async qe(t){await AddStyleSheet(t.url)}zi(){const t=[...this.hn];if(this.hn.clear(),!this.an)for(const s of t){const i=s.play();i&&i.catch(t=>{this.rn.has(s)||this.hn.add(s)})}}ji(s){if("function"!=typeof s.play)throw new Error("missing play function");this.rn.delete(s);let t;try{t=s.play()}catch(t){return void this.hn.add(s)}t&&t.catch(t=>{this.rn.has(s)||this.hn.add(s)})}Ni(t){this.hn.delete(t),this.rn.add(t)}$i(t){this.an=!!t}Xe(){navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()}je(t){const s=t.show;if(s){this.Ce||(this.Ce=document.createElement("div"),this.Ce.id="inspectOutline",document.body.appendChild(this.Ce));const i=this.Ce;i.style.display="",i.style.left=t.left-1+"px",i.style.top=t.top-1+"px",i.style.width=t.width+2+"px",i.style.height=t.height+2+"px",i.textContent=t.name}else this.Ce&&(this.Ce.style.display="none")}He(){window.C3_RegisterSW&&window.C3_RegisterSW()}Be(t){window.c3_postToMessagePort&&(t.from="runtime",window.c3_postToMessagePort(t))}xi(t,s){return this._("js-invoke-function",{name:t,params:s})}$e(t){const s=t.url,i=t.opts,e=t.port2,n=new Worker(s,i);n.postMessage({type:"construct-worker-init",port2:e},[e])}Ye(t){alert(t.message)}Ke(t){const s=t.type;if("create"===s){const i=document.createElement("p");i.id="c3-sr-"+t.id,i.textContent=t.text,this.ke.appendChild(i)}else if("update"===s){const e=document.getElementById("c3-sr-"+t.id);e?e.textContent=t.text:console.warn("[Construct] Missing screen reader text with id "+t.id)}else if("release"===s){const n=document.getElementById("c3-sr-"+t.id);n?n.remove():console.warn("[Construct] Missing screen reader text with id "+t.id)}else console.warn(`[Construct] Unknown screen reader text update '${s}'`)}Je(t){this.xe=!0;const s=document.createElement("h1");s.id="exportToVideoMessage",s.textContent=t.message,document.body.prepend(s),document.body.classList.add("exportingToVideo"),this.G().Ns().style.display="",this.o.Ki(t.duration)}Ze(t){this.Me=t.message,-1===this.Ie&&(this.Ie=setTimeout(()=>this.Cn(),250))}Cn(){this.Ie=-1;const t=document.getElementById("exportToVideoMessage");t&&(t.textContent=this.Me)}Qe(t){window.c3_postToMessagePort({type:"exported-video",arrayBuffer:t.arrayBuffer,contentType:t.contentType,time:t.time})}tn(t){window.c3_postToMessagePort({type:"exported-image-sequence",blobArr:t.blobArr,time:t.time,gif:t.gif})}};Md.Ui(Vd)}{const Af="dispatchworker.js",Bf="jobworker.js";self.ai=class{constructor(t){this.xn=t,this.Mn=Math.min(navigator.hardwareConcurrency||2,16),this.In=null,this.Rn=[],this.Tn=null,this.Gn=null}async ci(){if(this.En)throw new Error("already initialised");this.En=!0;const t=this.xn.Ys()+Af,s=(this.In=await this.xn.bi(t,{name:"DispatchWorker"}),new MessageChannel);this.Tn=s.port1,this.In.postMessage({type:"_init","in-port":s.port2},[s.port2]),this.Gn=await this.Gi()}async Gi(){const t=this.Rn.length,s=this.xn.Ys()+Bf,i=await this.xn.bi(s,{name:"JobWorker"+t}),e=new MessageChannel,n=new MessageChannel;return this.In.postMessage({type:"_addJobWorker",port:e.port1},[e.port1]),i.postMessage({type:"init",number:t,"dispatch-port":e.port2,"output-port":n.port2},[e.port2,n.port2]),this.Rn.push(i),n.port1}yi(){return{inputPort:this.Tn,outputPort:this.Gn,maxNumWorkers:this.Mn}}_i(){return[this.Tn,this.Gn]}}}{const Kf="keyboard",Lf=class extends self.i{constructor(t){super(t,Kf),this.An=!(!navigator.keyboard||!navigator.keyboard.lock),this.T([["init",()=>this.Dn()],["lock-keyboard",t=>this.Fn(t)],["unlock-keyboard",()=>this.Wn()]])}Dn(){return{isKeyboardLockSupported:this.An}}async Fn(t){const s=t.keysArr;try{return 0===s.length?await navigator.keyboard.lock():await navigator.keyboard.lock(s),{isOk:!0}}catch(t){return console.error("Error locking keyboard:",t),{isOk:!1}}}Wn(){try{navigator.keyboard.unlock()}catch(t){console.error("Error unlocking keyboard:",t)}}};self.Qt.Ui(Lf)}{const Rf=180/Math.PI,Sf="audio";self.Ln=class extends self.i{constructor(t){super(t,Sf),this.Un=null,this.Hn=null,this.Bn=!1,this.Vn=!1,this.jn=()=>this.Nn(),this.zn=[],this.qn=[],this.$n=null,this.Yn=[],this.Kn=new Set,this.Xn=-1,this.Jn=new Map,this.Zn=1,this.an=!1,this.Qn=0,this.so=1,this.io=0,this.eo="HRTF",this.no="inverse",this.oo=600,this.ho=1e4,this.ro=1,this.ao=[0,0,0],this.co=[0,0,-1,0,1,0],this.lo=!1,this.uo=null,this.do=new Map,this.wo=new Set,this.po=!1,this.fo=!1,this.mo="",this.yo=null,self.C3Audio_OnMicrophoneStream=(t,s)=>this.vo(t,s),this.bo=null,self.C3Audio_GetOutputStream=()=>this.So(),(self.C3Audio_DOMInterface=this).T([["create-audio-context",t=>this._o(t)],["play",t=>this.Oo(t)],["stop",t=>this.Po(t)],["stop-all",()=>this.ko()],["set-paused",t=>this.Co(t)],["set-volume",t=>this.xo(t)],["fade-volume",t=>this.Mo(t)],["set-master-volume",t=>this.Io(t)],["set-muted",t=>this.Ro(t)],["set-silent",t=>this.To(t)],["set-looping",t=>this.Go(t)],["set-playback-rate",t=>this.Eo(t)],["set-stereo-pan",t=>this.Ao(t)],["seek",t=>this.Do(t)],["preload",t=>this.Fo(t)],["unload",t=>this.Wo(t)],["unload-all",()=>this.Lo()],["set-suspended",t=>this.Uo(t)],["add-effect",t=>this.Ho(t)],["set-effect-param",t=>this.Bo(t)],["remove-effects",t=>this.Vo(t)],["tick",t=>this.jo(t)],["load-state",t=>this.No(t)],["offline-render-audio",t=>this.zo(t)],["offline-render-finish",()=>this.qo()]])}async _o(t){t.usePlayMusicAsSoundWorkaround&&(this.lo=!0),this.Qn=t.timeScaleMode,this.eo=["equalpower","HRTF","soundfield"][t.panningModel],this.no=["linear","inverse","exponential"][t.distanceModel],this.oo=t.refDistance,this.ho=t.maxDistance,this.ro=t.rolloffFactor,this.o.Ei()?(this.lo=!0,this.Un=new OfflineAudioContext({numberOfChannels:2,sampleRate:48e3,length:Math.ceil(48e3*this.o.Xi())})):(this.Un=new AudioContext({latencyHint:t.latencyHint}),this.$o(),this.Un.onstatechange=()=>{"running"!==this.Un.state&&this.$o(),this.v("audiocontext-state",{audioContextState:this.Un.state})}),this.Hn=this.Un.createGain(),this.Hn.connect(this.Un.destination);const s=t.listenerPos;this.ao[0]=s[0],this.ao[1]=s[1],this.ao[2]=s[2],this.Un.listener.setPosition(s[0],s[1],s[2]),this.Un.listener.setOrientation(...this.co),self.C3_GetAudioContextCurrentTime=()=>this.Yo();try{await Promise.all(t.preloadList.map(t=>this.Ko(t.originalUrl,t.url,t.type,!1)))}catch(t){console.error("[Construct] Preloading sounds failed: ",t)}return{sampleRate:this.Un.sampleRate,audioContextState:this.Un.state,outputLatency:this.Un.outputLatency||0}}$o(){this.Vn||(this.Bn=!1,window.addEventListener("pointerup",this.jn,!0),window.addEventListener("touchend",this.jn,!0),window.addEventListener("click",this.jn,!0),window.addEventListener("keydown",this.jn,!0),this.Vn=!0)}Xo(){this.Vn&&(this.Bn=!0,window.removeEventListener("pointerup",this.jn,!0),window.removeEventListener("touchend",this.jn,!0),window.removeEventListener("click",this.jn,!0),window.removeEventListener("keydown",this.jn,!0),this.Vn=!1)}Nn(){if(!this.Bn){const t=this.Un,s=("suspended"===t.state&&t.resume&&t.resume(),t.createBuffer(1,220,22050)),i=t.createBufferSource();i.buffer=s,i.connect(t.destination),i.start(0),"running"===t.state&&this.Xo()}}Jo(s,t){for(const i of t){let t=!1;for(const e of s)if(self.Ln.Zo(e,i)){t=!0;break}if(!t)return!1}return!0}Qo(){return this.Un}Yo(){return this.Un.currentTime}th(){return this.Hn}["GetAudioContextExtern"](){return this.Qo()}["GetDestinationNodeExtern"](){return this.th()}sh(t){const s=this.do.get(t.toLowerCase());return s?s[0].ih():this.th()}eh(t,s){t=t.toLowerCase();let i=this.do.get(t);i||(i=[],this.do.set(t,i)),s.nh(i.length),s.oh(t),i.push(s),this.hh(t)}hh(t){t=t.toLowerCase();let s=this.th();const i=this.do.get(t);if(i&&i.length){s=i[0].ih();for(let t=0,s=i.length;t<s;++t){const e=i[t];t+1===s?e.rh(this.th()):e.rh(i[t+1].ih())}}for(const n of this.ah(t))n.lh(s);this.yo&&this.mo===t&&(this.yo.disconnect(),this.yo.connect(s))}uh(){return this.Zn}dh(){return this.an}wh(){return this.Qn}ph(){return this.so}fh(){return this.io}mh(){return this.lo}gh(){return this.eo}yh(){return this.no}bh(){return this.oo}Sh(){return this.ho}_h(){return this.ro}ji(t){this.o.ji(t)}Ni(t){this.o.Ni(t)}Oh(i){let e=0;for(let t=0,s=this.qn.length;t<s;++t){const n=this.qn[t];(this.qn[e]=n).Ph()===i?n.it():++e}this.qn.length=e}kh(){let i=0;for(let t=0,s=this.zn.length;t<s;++t){const e=this.zn[t];(this.zn[i]=e).Ch()&&e!==this.uo?e.it():++i}this.zn.length=i}*xh(t){if(0<t.length)for(const s of this.qn)this.Jo(s.Mh(),t)&&(yield s);else this.$n&&!this.$n.Ih()&&(yield this.$n)}*ah(t){if(t)for(const s of this.qn)self.Ln.Zo(s.Rh(),t)&&(yield s);else this.$n&&!this.$n.Ih()&&(yield this.$n)}async Ko(t,s,i,e,n){for(const h of this.zn)if(h.Th()===s)return e&&this.lo&&(this.uo=h),await h.Gh(),h;if(n)return null;e&&this.lo&&this.kh();const o=self.Ah.Eh(this,t,s,i,e);return this.zn.push(o),e&&this.lo&&(this.uo=o),await o.Gh(),this.Kn.has(t)||(this.v("buffer-metadata",{originalUrl:t,duration:o.Dh()}),this.Kn.add(t)),o}async Fh(t,s,i,e,n){for(const r of this.qn)if(r.Th()===s&&(r.Wh()||n))return n&&this.lo&&(this.uo=r.Ph()),r.Lh(e),r;const o=await this.Ko(t,s,i,n);if(o.Uh())throw new Error(`buffer '${t}' unloaded while loading`);const h=o.Hh(e);return this.qn.push(h),h}Bh(t){const i=t.join(" ");let e=this.Jn.get(i);if(!e){let s=null;const n=new Promise(t=>s=t);e={Vh:0,promise:n,resolve:s},this.Jn.set(i,e)}e.Vh++}jh(t){const s=t.join(" "),i=this.Jn.get(s);if(!i)throw new Error("expected pending tag");i.Vh--,0===i.Vh&&(i.resolve(),this.Jn.delete(s))}Nh(t){const s=(0===t.length?this.Yn:t).join(" "),i=this.Jn.get(s);return i?i.promise:Promise.resolve()}zh(){if(0<this.wo.size)this.D();else for(const t of this.qn)if(t.qh())return void this.D()}m(){for(const i of this.wo)i.m();const t=this.Yo();for(const e of this.qn)e.m(t);const s=this.qn.filter(t=>t.qh()).map(t=>t.$h());this.v("state",{tickCount:this.Xn,outputLatency:this.Un.outputLatency||0,audioInstances:s,analysers:[...this.wo].map(t=>t.Yh())}),0===s.length&&0===this.wo.size&&this.W()}Kh(t,s,i){this.v("trigger",{type:t,tags:s,aiid:i})}async Oo(t){const s=t.originalUrl,i=t.url,e=t.type,n=t.isMusic,o=t.tags,h=t.isLooping,r=t.vol,a=t.pos,c=t.panning,l=t.stereoPan;let u=t.off;if(0<u&&!t.trueClock)if(this.Un.getOutputTimestamp){const d=this.Un.getOutputTimestamp();u=u-d.performanceTime/1e3+d.contextTime}else u=u-performance.now()/1e3+this.Un.currentTime;this.Yn=o.slice(0),this.Bh(o);try{this.$n=await this.Fh(s,i,e,o,n),c?(this.$n.Xh(!0),this.$n.Jh(c.x,c.y,c.z,c.angle,c.innerAngle,c.outerAngle,c.outerGain),c.hasOwnProperty("uid")&&this.$n.Zh(c.uid)):"number"==typeof l&&0!==l?(this.$n.Qh(!0),this.$n.tr(l)):(this.$n.Xh(!1),this.$n.Qh(!1)),this.$n.Play(h,r,a,u)}catch(t){return void console.error("[Construct] Audio: error starting playback: ",t)}finally{this.jh(o)}this.D()}Po(t){const s=t.tags;for(const i of this.xh(s))i.sr()}ko(){for(const t of this.qn)t.sr()}Co(t){const s=t.tags,i=t.paused;for(const e of this.xh(s))i?e.ir():e.er();this.zh()}xo(t){const s=t.tags,i=t.vol;for(const e of this.xh(s))e.nr(i)}Ao(t){const s=t.tags,i=t.p;for(const e of this.xh(s))e.Qh(!0),e.tr(i)}async Mo(t){const s=t.tags,i=t.vol,e=t.duration,n=t.stopOnEnd;await this.Nh(s);for(const o of this.xh(s))o.hr(i,e,n);this.zh()}Io(t){this.Zn=t.vol,this.Hn.gain.value=this.Zn}Ro(t){const s=t.tags,i=t.isMuted;for(const e of this.xh(s))e.rr(i)}To(t){this.an=t.isSilent,this.o.$i(this.an);for(const s of this.qn)s.ar()}Go(t){const s=t.tags,i=t.isLooping;for(const e of this.xh(s))e.cr(i)}async Eo(t){const s=t.tags,i=t.rate;await this.Nh(s);for(const e of this.xh(s))e.lr(i)}async Do(t){const s=t.tags,i=t.pos;await this.Nh(s);for(const e of this.xh(s))e.ur(i)}async Fo(t){const s=t.originalUrl,i=t.url,e=t.type,n=t.isMusic;try{await this.Fh(s,i,e,"",n)}catch(t){console.error("[Construct] Audio: error preloading: ",t)}}async Wo(t){const s=t.url,i=t.type,e=t.isMusic,n=await this.Ko("",s,i,e,!0);if(n){n.it(),this.uo===n&&(this.uo=null);const o=this.zn.indexOf(n);-1!==o&&this.zn.splice(o,1)}}Lo(){for(const t of this.zn)t.it(),this.uo===t&&(this.uo=null);this.zn.length=0}Uo(t){const s=t.isSuspended;!s&&this.Un.resume&&this.Un.resume();for(const i of this.qn)i.dr(s);s&&this.Un.suspend&&this.Un.suspend()}jo(t){if(this.so=t.timeScale,this.io=t.gameTime,this.Xn=t.tickCount,0!==this.Qn)for(const e of this.qn)e.wr();const s=t.listenerPos,i=(!s||this.ao[0]===s[0]&&this.ao[1]===s[1]&&this.ao[2]===s[2]||(this.ao[0]=s[0],this.ao[1]=s[1],this.ao[2]=s[2],this.Un.listener.setPosition(s[0],s[1],s[2])),t.listenerOrientation);if(i&&(this.co[0]!==i[0]||this.co[1]!==i[1]||this.co[2]!==i[2]||this.co[3]!==i[3]||this.co[4]!==i[4]||this.co[5]!==i[5])){for(let t=0;t<6;++t)this.co[t]=i[t];this.Un.listener.setOrientation(...this.co)}for(const n of t.instPans){const o=n.uid;for(const h of this.qn)h.pr()===o&&h.mr(n.x,n.y,n.z,n.angle)}}async Ho(t){const s=t.type,i=t.hasOwnProperty("tags")?t.tags:[t.tag],e=t.params;let n,o;if("convolution"===s)try{o=await this.Ko(t.bufferOriginalUrl,t.bufferUrl,t.bufferType,!1)}catch(t){return void console.log("[Construct] Audio: error loading convolution: ",t)}for(const h of i){if("filter"===s)n=new self.gr(this,...e);else if("delay"===s)n=new self.yr(this,...e);else if("convolution"===s)(n=new self.br(this,o.Sr(),...e)).vr(t.bufferOriginalUrl,t.bufferUrl,t.bufferType);else if("flanger"===s)n=new self._r(this,...e);else if("phaser"===s)n=new self.Or(this,...e);else if("gain"===s)n=new self.Pr(this,...e);else if("stereopan"===s)n=new self.kr(this,...e);else if("tremolo"===s)n=new self.Cr(this,...e);else if("ringmod"===s)n=new self.Mr(this,...e);else if("distortion"===s)n=new self.Ir(this,...e);else if("compressor"===s)n=new self.Rr(this,...e);else{if("analyser"!==s)throw new Error("invalid effect type");n=new self.Tr(this,...e)}this.eh(h,n)}this.Gr()}Bo(t){const s=t.tags,i=t.index,e=t.param,n=t.value,o=t.ramp,h=t.time;for(const r of s){const a=this.do.get(r.toLowerCase());!a||i<0||i>=a.length||a[i].Er(e,n,o,h)}this.Gr()}Vo(t){const s=t.tags;for(const i of s){const e=i.toLowerCase(),n=this.do.get(e);if(!n||!n.length)return;for(const o of n)o.it();this.do.delete(e),this.hh(e)}}Ar(t){this.wo.add(t),this.zh()}Dr(t){this.wo.delete(t)}Gr(){this.po||(this.po=!0,Promise.resolve().then(()=>this.Fr()))}Fr(){const t={};for(const[s,i]of this.do)t[s]=i.map(t=>t.$h());this.v("fxstate",{fxstate:t}),this.po=!1}async No(t){const s=t.saveLoadMode;if(3!==s){const o=[];for(const h of this.qn)h.Ch()&&1===s||!h.Ch()&&2===s?o.push(h):h.it();this.qn=o}for(const r of this.do.values())for(const a of r)a.it();this.do.clear(),this.so=t.timeScale,this.io=t.gameTime;const i=t.listenerPos,e=(this.ao[0]=i[0],this.ao[1]=i[1],this.ao[2]=i[2],this.Un.listener.setPosition(i[0],i[1],i[2]),t.listenerOrientation);if(Array.isArray(e)){for(let t=0;t<6;++t)this.co[t]=e[t];this.Un.listener.setOrientation(...this.co)}this.an=t.isSilent,this.o.$i(this.an),this.Zn=t.masterVolume,this.Hn.gain.value=this.Zn;const n=[];for(const c of Object.values(t.effects))n.push(Promise.all(c.map(t=>this.Ho(t))));await Promise.all(n),await Promise.all(t.playing.map(t=>this.Wr(t,s))),this.zh()}async Wr(s,i){if(3!==i){const e=s.bufferOriginalUrl,n=s.bufferUrl,o=s.bufferType,h=s.isMusic,r=s.tags,a=s.isLooping,c=s.volume,l=s.playbackTime;if((!h||1!==i)&&(h||2!==i)){let t=null;try{t=await this.Fh(e,n,o,r,h)}catch(i){return void console.error("[Construct] Audio: error loading audio state: ",i)}t.Lr(s.pan),t.Ur(s.stereoPan),t.Play(a,c,l,0),s.isPlaying||t.ir(),t.Hr(s)}}}vo(t,s){this.yo&&this.yo.disconnect(),this.mo=s.toLowerCase(),this.yo=this.Un.createMediaStreamSource(t),this.yo.connect(this.sh(this.mo))}So(){return this.bo||(this.bo=this.Un.createMediaStreamDestination(),this.Hn.connect(this.bo)),this.bo.stream}async zo(t){try{const s=t.time,i=this.Un.suspend(s);this.fo?this.Un.resume():(this.Un.startRendering().then(t=>this.Br(t)).catch(t=>this.Vr(t)),this.fo=!0),await i}catch(t){this.Vr(t)}}qo(){this.Un.resume()}Br(i){const e=[];for(let t=0,s=i.numberOfChannels;t<s;++t){const n=i.getChannelData(t);e.push(n.buffer)}this.o.S("runtime","offline-audio-render-completed",{duration:i.duration,length:i.length,numberOfChannels:i.numberOfChannels,sampleRate:i.sampleRate,channelData:e},null,e)}Vr(t){console.error("[Audio] Offline rendering error: ",t)}static Zo(t,s){return t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase()}static jr(t){return t*Rf}static Nr(t){return Math.pow(10,t/20)}static zr(t){return Math.max(Math.min(self.Ln.Nr(t),1),0)}static qr(t){return Math.log(t)/Math.log(10)*20}static $r(t){return self.Ln.qr(Math.max(Math.min(t,1),0))}static Yr(t,s){return 1-Math.exp(-s*t)}},self.Qt.Ui(self.Ln)}self.Ah=class{constructor(t,s,i,e,n){this.Kr=t,this.Xr=s,this.Jr=i,this.Zr=e,this.Qr=n,this.ta="",this.sa="not-loaded",this.ia=null}it(){this.sa="not-loaded",this.Kr=null,this.ia=null}Uh(){return!this.Kr}static Eh(t,s,i,e,n){return new(!n||t.mh()?self.ea:self.na)(t,s,i,e,n)}Hh(t){return new("html5"===this.ta?self.oa:self.ha)(this.Kr,this,t)}ra(){}Gh(){return this.ia||(this.ia=this.ra()),this.ia}aa(){}ca(){}la(){return"failed"===this.sa}Qo(){return this.Kr.Qo()}ua(){return this.ta}da(){return this.Xr}Th(){return this.Jr}wa(){return this.Zr}Ch(){return this.Qr}Dh(){}},self.na=class extends self.Ah{constructor(t,s,i,e,n){super(t,s,i,e,n),this.ta="html5",this.pa=new Audio,this.pa.crossOrigin="anonymous",this.pa.autoplay=!1,this.pa.preload="auto",this.fa=null,this.ma=null,this.ga=!1,this.pa.addEventListener("canplaythrough",()=>this.ga=!0),this.ya=this.Qo().createGain(),this.va=null,this.pa.addEventListener("canplay",()=>{this.fa&&(this.sa="loaded",this.fa(),this.fa=null,this.ma=null),!this.va&&this.pa&&(this.va=this.Qo().createMediaElementSource(this.pa),this.va.connect(this.ya))}),this.onended=null,this.pa.addEventListener("ended",()=>{this.onended&&this.onended()}),this.pa.addEventListener("error",t=>this.ba(t))}it(){this.Kr.Oh(this),this.ya.disconnect(),this.ya=null,this.va.disconnect(),this.va=null,this.pa&&!this.pa.paused&&this.pa.pause(),this.onended=null,this.pa=null,super.it()}ra(){return this.sa="loading",new Promise((t,s)=>{this.fa=t,this.ma=s,this.pa.src=this.Jr})}ba(t){console.error(`[Construct] Audio '${this.Jr}' error: `,t),this.ma&&(this.sa="failed",this.ma(t),this.fa=null,this.ma=null)}aa(){const t=4<=this.pa.readyState;return t&&(this.ga=!0),t||this.ga}ca(){return this.aa()}Sa(){return this.pa}_a(){return this.ya}Dh(){return this.pa.duration}},self.ea=class extends self.Ah{constructor(t,s,i,e,n){super(t,s,i,e,n),this.ta="webaudio",this.Oa=null,this.Pa=null}it(){this.Kr.Oh(this),this.Oa=null,this.Pa=null,super.it()}async ka(){if(this.Oa)return this.Oa;const t=this.Kr.G();if("cordova"===t.qs()&&t.Zi(this.Jr)&&t.$s())this.Oa=await t.Ti(this.Jr);else if("playable-ad-single-file"===t.qs()&&t.Zi(this.Jr)){const s=t._PlayableAdFetchBlob(this.Jr);this.Oa=await s.arrayBuffer()}else{const i=await fetch(this.Jr);if(!i.ok)throw new Error(`error fetching audio data: ${i.status} `+i.statusText);this.Oa=await i.arrayBuffer()}}async Ca(){if(this.Pa)return this.Pa;const t=this.Kr.Qo();this.Pa=await t.decodeAudioData(this.Oa),this.Oa=null}async ra(){try{this.sa="loading",await this.ka(),this.Uh()||(await this.Ca(),this.sa="loaded")}catch(t){this.sa="failed",console.error(`[Construct] Failed to load audio '${this.Jr}': `,t)}}aa(){return!(!this.Oa&&!this.Pa)}ca(){return!!this.Pa}Sr(){return this.Pa}Dh(){return this.Pa?this.Pa.duration:0}};{let n=0;self.xa=class{constructor(t,s,i){this.Kr=t,this.Ma=s,this.Ia=i,this.Ra=n++,this.Ta=this.Qo().createGain(),this.Ta.connect(this.th()),this.Ga=null,this.Ea=!1,this.Aa=[0,0,0],this.Da=[0,0,0],this.Fa=[0,0,0],this.Wa=null,this.La=!1,this.Ua=0,this.Ha=!0,this.Ba=!1,this.Va=!1,this.ja=!1,this.Na=1,this.za=!1,this.qa=1;const e=this.Kr.wh();this.$a=1===e&&!this.Ch()||2===e,this.Ya=-1,this.Ka=-1,this.Xa=!1}it(){this.Kr=null,this.Ma=null,this.Ga&&(this.Ga.disconnect(),this.Ga=null),this.Wa&&(this.Wa.disconnect(),this.Wa=null),this.Ta.disconnect(),this.Ta=null}Qo(){return this.Kr.Qo()}Lh(t){this.Ia=t}Mh(){return this.Ia}Rh(){return 0<this.Ia.length?this.Ia[0]:""}th(){return this.Kr.sh(this.Rh())}Ja(){return this.$a?this.Kr.fh():performance.now()/1e3}da(){return this.Ma.da()}Th(){return this.Ma.Th()}wa(){return this.Ma.wa()}Ph(){return this.Ma}Ch(){return this.Ma.Ch()}Za(){return this.Ra}Ih(){}Wh(){}IsPlaying(){return!this.Ha&&!this.Ba&&!this.Ih()}qh(){return!this.Ha&&!this.Ih()}Qa(){}Dh(t){let s=this.Ma.Dh();return t&&(s/=this.qa||.001),s}Play(t,s,i,e){}sr(){}ir(){}tc(){return this.Ba}er(){}nr(t){this.Na=t,this.Ta.gain.cancelScheduledValues(0),this.Ka=-1,this.Ta.gain.value=this.sc()}hr(t,s,i){if(!this.ic()){const e=this.Ta.gain,n=(e.cancelScheduledValues(0),this.Kr.Yo()),o=n+s;e.setValueAtTime(e.value,n),e.linearRampToValueAtTime(t,o),this.Na=t,this.Ka=o,this.Xa=i}}ec(){this.nr(this.Na)}m(t){-1!==this.Ka&&t>=this.Ka&&(this.Ka=-1,this.Xa&&this.sr(),this.Kr.Kh("fade-ended",this.Ia,this.Ra))}sc(){const t=this.Na;return isFinite(t)?t:0}rr(t){this.za!==(t=!!t)&&(this.za=t,this.ar())}ic(){return this.za}dh(){return this.Kr.dh()}ar(){}cr(t){}nc(){return this.ja}lr(t){this.qa!==t&&(this.qa=t,this.wr())}wr(){}oc(){return this.qa}ur(t){}dr(t){}Xh(t){this.Ea!==(t=!!t)&&(this.Ea=t,(this.Ea?(this.Qh(!1),this.Ga||(this.Ga=this.Qo().createPanner(),this.Ga.panningModel=this.Kr.gh(),this.Ga.distanceModel=this.Kr.yh(),this.Ga.refDistance=this.Kr.bh(),this.Ga.maxDistance=this.Kr.Sh(),this.Ga.rolloffFactor=this.Kr._h()),this.Ta.disconnect(),this.Ta.connect(this.Ga),this.Ga):(this.Ga.disconnect(),this.Ta.disconnect(),this.Ta)).connect(this.th()))}Jh(t,s,i,e,n,o,h){if(this.Ea){this.mr(t,s,i,e);const r=self.Ln.jr;this.Fa[0]!==r(n)&&(this.Fa[0]=r(n),this.Ga.coneInnerAngle=r(n)),this.Fa[1]!==r(o)&&(this.Fa[1]=r(o),this.Ga.coneOuterAngle=r(o)),this.Fa[2]!==h&&(this.Fa[2]=h,this.Ga.coneOuterGain=h)}}mr(t,s,i,e){if(this.Ea){const n=this.Aa,o=this.Da,h=Math.cos(e),r=Math.sin(e);n[0]===t&&n[1]===s&&n[2]===i||(n[0]=t,n[1]=s,n[2]=i,this.Ga.setPosition(...n)),o[0]===h&&o[1]===r&&0===o[2]||(o[0]=h,o[1]=r,o[2]=0,this.Ga.setOrientation(...o))}}Qh(t){this.La!==(t=!!t)&&(this.La=t,(this.La?(this.Xh(!1),this.Wa=this.Qo().createStereoPanner(),this.Ta.disconnect(),this.Ta.connect(this.Wa),this.Wa):(this.Wa.disconnect(),this.Wa=null,this.Ta.disconnect(),this.Ta)).connect(this.th()))}tr(t){this.La&&this.Ua!==t&&(this.Wa.pan.value=t,this.Ua=t)}Zh(t){this.Ya=t}pr(){return this.Ya}hc(){}lh(t){const s=this.Wa||this.Ga||this.Ta;s.disconnect(),s.connect(t)}$h(){return{aiid:this.Za(),tags:this.Ia,duration:this.Dh(),volume:-1===this.Ka?this.Na:this.Ta.gain.value,isPlaying:this.IsPlaying(),playbackTime:this.Qa(),playbackRate:this.oc(),uid:this.Ya,bufferOriginalUrl:this.da(),bufferUrl:"",bufferType:this.wa(),isMusic:this.Ch(),isLooping:this.nc(),isMuted:this.ic(),resumePosition:this.hc(),pan:this.rc(),stereoPan:this.ac()}}Hr(t){this.lr(t.playbackRate),this.rr(t.isMuted)}rc(){if(!this.Ga)return null;const t=this.Ga;return{pos:this.Aa,orient:this.Da,cia:t.coneInnerAngle,coa:t.coneOuterAngle,cog:t.coneOuterGain,uid:this.Ya}}Lr(t){if(t){this.Xh(!0);const s=this.Ga,i=t.pos,e=(this.Aa[0]=i[0],this.Aa[1]=i[1],this.Aa[2]=i[2],t.orient);this.Da[0]=e[0],this.Da[1]=e[1],this.Da[2]=e[2],s.setPosition(...this.Aa),s.setOrientation(...this.Da),this.Fa[0]=t.cia,this.Fa[1]=t.coa,this.Fa[2]=t.cog,s.coneInnerAngle=t.cia,s.coneOuterAngle=t.coa,s.coneOuterGain=t.cog,this.Ya=t.uid}else this.Xh(!1)}ac(){return this.Wa?this.Ua:null}Ur(t){"number"!=typeof t?this.Qh(!1):(this.Qh(!0),this.tr(t))}}}self.oa=class extends self.xa{constructor(t,s,i){super(t,s,i),this.Ma._a().connect(this.Ta),this.Ma.onended=()=>this.cc()}it(){this.sr(),this.Ma._a().disconnect(),super.it()}Sa(){return this.Ma.Sa()}cc(){this.Ha=!0,this.Ya=-1,this.Kr.Kh("ended",this.Ia,this.Ra)}Ih(){return this.Sa().ended}Wh(){return!!this.Ha||this.Ih()}Qa(){let t=this.Sa().currentTime;return this.ja?t:Math.min(t,this.Dh())}Play(t,s,i,e){const n=this.Sa();if(1!==n.playbackRate&&(n.playbackRate=1),n.loop!==t&&(n.loop=t),this.nr(s),this.za=!1,n.muted&&(n.muted=!1),n.currentTime!==i)try{n.currentTime=i}catch(t){console.warn(`[Construct] Exception seeking audio '${this.Ma.Th()}' to position '${i}': `,t)}this.Kr.ji(n),this.Ha=!1,this.Ba=!1,this.ja=t,this.qa=1}sr(){const t=this.Sa();t.paused||t.pause(),this.Kr.Ni(t),this.Ha=!0,this.Ba=!1,this.Ya=-1}ir(){if(!(this.Ba||this.Ha||this.Ih())){const t=this.Sa();t.paused||t.pause(),this.Kr.Ni(t),this.Ba=!0}}er(){!this.Ba||this.Ha||this.Ih()||(this.Kr.ji(this.Sa()),this.Ba=!1)}ar(){this.Sa().muted=this.za||this.dh()}cr(t){this.ja!==(t=!!t)&&(this.ja=t,this.Sa().loop=t)}wr(){let s=this.qa;this.$a&&(s*=this.Kr.ph());try{this.Sa().playbackRate=s}catch(t){console.warn(`[Construct] Unable to set playback rate '${s}':`,t)}}ur(s){if(!this.Ha&&!this.Ih())try{this.Sa().currentTime=s}catch(t){console.warn(`[Construct] Error seeking audio to '${s}': `,t)}}hc(){return this.Qa()}dr(t){t?this.IsPlaying()?(this.Sa().pause(),this.Va=!0):this.Va=!1:this.Va&&(this.Kr.ji(this.Sa()),this.Va=!1)}},self.ha=class extends self.xa{constructor(t,s,i){super(t,s,i),this.lc=null,this.uc=t=>this.cc(t),this.dc=!0,this.wc=null,this.fc=0,this.mc=0,this.yc=0,this.vc=1}it(){this.sr(),this.bc(),this.uc=null,super.it()}bc(){this.lc&&(this.lc.onended=null,this.lc.disconnect(),this.lc.buffer=null),this.lc=null,this.wc=null}cc(t){this.Ba||this.Va||t.target===this.wc&&(this.dc=!0,this.Ha=!0,this.Ya=-1,this.bc(),this.Kr.Kh("ended",this.Ia,this.Ra))}Ih(){return!(!this.Ha&&this.lc&&this.lc.loop||this.Ba)&&this.dc}Wh(){return!(this.lc&&!this.Ha)||this.Ih()}Qa(){let t=0;return t=this.Ba?this.yc:this.mc+(this.Ja()-this.fc)*this.qa,this.ja?t:Math.min(t,this.Dh())}Play(t,s,i,e){this.za=!1,this.vc=1,this.nr(s),this.bc(),this.lc=this.Qo().createBufferSource(),this.lc.buffer=this.Ma.Sr(),this.lc.connect(this.Ta),this.wc=this.lc,this.lc.onended=this.uc,this.lc.loop=t,this.lc.start(e,i),this.dc=!1,this.Ha=!1,this.Ba=!1,this.ja=t,this.qa=1,this.fc=this.Ja(),this.mc=i}sr(){if(this.lc)try{this.lc.stop(0)}catch(t){}this.Ha=!0,this.Ba=!1,this.Ya=-1}ir(){this.Ba||this.Ha||this.Ih()||(this.yc=this.Qa(),this.ja&&(this.yc%=this.Dh()),this.Ba=!0,this.lc.stop(0))}er(){!this.Ba||this.Ha||this.Ih()||(this.bc(),this.lc=this.Qo().createBufferSource(),this.lc.buffer=this.Ma.Sr(),this.lc.connect(this.Ta),this.wc=this.lc,this.lc.onended=this.uc,this.lc.loop=this.ja,this.ec(),this.wr(),this.lc.start(0,this.yc),this.fc=this.Ja(),this.mc=this.yc,this.Ba=!1)}sc(){return super.sc()*this.vc}ar(){this.vc=this.za||this.dh()?0:1,this.ec()}cr(t){this.ja!==(t=!!t)&&(this.ja=t,this.lc)&&(this.lc.loop=t)}wr(){let t=this.qa;this.$a&&(t*=this.Kr.ph()),this.lc&&(this.lc.playbackRate.value=t)}ur(t){this.Ha||this.Ih()||(this.Ba?this.yc=t:(this.ir(),this.yc=t,this.er()))}hc(){return this.yc}dr(t){t?this.IsPlaying()?(this.Va=!0,this.yc=this.Qa(),this.ja&&(this.yc%=this.Dh()),this.lc.stop(0)):this.Va=!1:this.Va&&(this.bc(),this.lc=this.Qo().createBufferSource(),this.lc.buffer=this.Ma.Sr(),this.lc.connect(this.Ta),this.wc=this.lc,this.lc.onended=this.uc,this.lc.loop=this.ja,this.ec(),this.wr(),this.lc.start(0,this.yc),this.fc=this.Ja(),this.mc=this.yc,this.Va=!1)}Hr(t){super.Hr(t),this.yc=t.resumePosition}};{class M8{constructor(t){this.Kr=t,this.Un=t.Qo(),this.Sc=-1,this._c="",this.Zr="",this.Oc=null}it(){this.Un=null}nh(t){this.Sc=t}Pc(){return this.Sc}oh(t){this._c=t}kc(){return this._c}Cc(){return this.Un.createGain()}ih(){}rh(t){}xc(t,s,i,e){if(t.cancelScheduledValues(0),0===e)t.value=s;else{const n=this.Un.currentTime;switch(e+=n,i){case 0:t.setValueAtTime(s,e);break;case 1:t.setValueAtTime(t.value,n),t.linearRampToValueAtTime(s,e);break;case 2:t.setValueAtTime(t.value,n),t.exponentialRampToValueAtTime(s,e)}}}$h(){return{type:this.Zr,tag:this._c,params:this.Oc}}}self.gr=class extends M8{constructor(t,s,i,e,n,o,h){super(t),this.Zr="filter",this.Oc=[s,i,e,n,o,h],this.Mc=this.Cc(),this.Ic=this.Cc(),this.Ic.gain.value=h,this.Rc=this.Cc(),this.Rc.gain.value=1-h,this.Tc=this.Un.createBiquadFilter(),this.Tc.type=s,this.Tc.frequency.value=i,this.Tc.detune.value=e,this.Tc.Q.value=n,this.Tc.gain.vlaue=o,this.Mc.connect(this.Tc),this.Mc.connect(this.Rc),this.Tc.connect(this.Ic)}it(){this.Mc.disconnect(),this.Tc.disconnect(),this.Ic.disconnect(),this.Rc.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[5]=s,this.xc(this.Ic.gain,s,i,e),this.xc(this.Rc.gain,1-s,i,e);break;case 1:this.Oc[1]=s,this.xc(this.Tc.frequency,s,i,e);break;case 2:this.Oc[2]=s,this.xc(this.Tc.detune,s,i,e);break;case 3:this.Oc[3]=s,this.xc(this.Tc.Q,s,i,e);break;case 4:this.Oc[4]=s,this.xc(this.Tc.gain,s,i,e)}}},self.yr=class extends M8{constructor(t,s,i,e){super(t),this.Zr="delay",this.Oc=[s,i,e],this.Mc=this.Cc(),this.Ic=this.Cc(),this.Ic.gain.value=e,this.Rc=this.Cc(),this.Rc.gain.value=1-e,this.Gc=this.Cc(),this.Ec=this.Un.createDelay(s),this.Ec.delayTime.value=s,this.Ac=this.Cc(),this.Ac.gain.value=i,this.Mc.connect(this.Gc),this.Mc.connect(this.Rc),this.Gc.connect(this.Ic),this.Gc.connect(this.Ec),this.Ec.connect(this.Ac),this.Ac.connect(this.Gc)}it(){this.Mc.disconnect(),this.Ic.disconnect(),this.Rc.disconnect(),this.Gc.disconnect(),this.Ec.disconnect(),this.Ac.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){const n=self.Ln.zr;switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[2]=s,this.xc(this.Ic.gain,s,i,e),this.xc(this.Rc.gain,1-s,i,e);break;case 4:this.Oc[1]=n(s),this.xc(this.Ac.gain,n(s),i,e);break;case 5:this.Oc[0]=s,this.xc(this.Ec.delayTime,s,i,e)}}},self.br=class extends M8{constructor(t,s,i,e){super(t),this.Zr="convolution",this.Oc=[i,e],this.Dc="",this.Fc="",this.Wc="",this.Mc=this.Cc(),this.Ic=this.Cc(),this.Ic.gain.value=e,this.Rc=this.Cc(),this.Rc.gain.value=1-e,this.Lc=this.Un.createConvolver(),this.Lc.normalize=i,this.Lc.buffer=s,this.Mc.connect(this.Lc),this.Mc.connect(this.Rc),this.Lc.connect(this.Ic)}it(){this.Mc.disconnect(),this.Lc.disconnect(),this.Ic.disconnect(),this.Rc.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){0===t&&(s=Math.max(Math.min(s/100,1),0),this.Oc[1]=s,this.xc(this.Ic.gain,s,i,e),this.xc(this.Rc.gain,1-s,i,e))}vr(t,s,i){this.Dc=t,this.Fc=s,this.Wc=i}$h(){const t=super.$h();return t.bufferOriginalUrl=this.Dc,t.bufferUrl="",t.bufferType=this.Wc,t}},self._r=class extends M8{constructor(t,s,i,e,n,o){super(t),this.Zr="flanger",this.Oc=[s,i,e,n,o],this.Mc=this.Cc(),this.Rc=this.Cc(),this.Rc.gain.value=1-o/2,this.Ic=this.Cc(),this.Ic.gain.value=o/2,this.Uc=this.Cc(),this.Uc.gain.value=n,this.Ec=this.Un.createDelay(s+i),this.Ec.delayTime.value=s,this.Hc=this.Un.createOscillator(),this.Hc.frequency.value=e,this.Bc=this.Cc(),this.Bc.gain.value=i,this.Mc.connect(this.Ec),this.Mc.connect(this.Rc),this.Ec.connect(this.Ic),this.Ec.connect(this.Uc),this.Uc.connect(this.Ec),this.Hc.connect(this.Bc),this.Bc.connect(this.Ec.delayTime),this.Hc.start(0)}it(){this.Hc.stop(0),this.Mc.disconnect(),this.Ec.disconnect(),this.Hc.disconnect(),this.Bc.disconnect(),this.Rc.disconnect(),this.Ic.disconnect(),this.Uc.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[4]=s,this.xc(this.Ic.gain,s/2,i,e),this.xc(this.Rc.gain,1-s/2,i,e);break;case 6:this.Oc[1]=s/1e3,this.xc(this.Bc.gain,s/1e3,i,e);break;case 7:this.Oc[2]=s,this.xc(this.Hc.frequency,s,i,e);break;case 8:this.Oc[3]=s/100,this.xc(this.Uc.gain,s/100,i,e)}}},self.Or=class extends M8{constructor(t,s,i,e,n,o,h){super(t),this.Zr="phaser",this.Oc=[s,i,e,n,o,h],this.Mc=this.Cc(),this.Rc=this.Cc(),this.Rc.gain.value=1-h/2,this.Ic=this.Cc(),this.Ic.gain.value=h/2,this.Tc=this.Un.createBiquadFilter(),this.Tc.type="allpass",this.Tc.frequency.value=s,this.Tc.detune.value=i,this.Tc.Q.value=e,this.Hc=this.Un.createOscillator(),this.Hc.frequency.value=o,this.Bc=this.Cc(),this.Bc.gain.value=n,this.Mc.connect(this.Tc),this.Mc.connect(this.Rc),this.Tc.connect(this.Ic),this.Hc.connect(this.Bc),this.Bc.connect(this.Tc.frequency),this.Hc.start(0)}it(){this.Hc.stop(0),this.Mc.disconnect(),this.Tc.disconnect(),this.Hc.disconnect(),this.Bc.disconnect(),this.Rc.disconnect(),this.Ic.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[5]=s,this.xc(this.Ic.gain,s/2,i,e),this.xc(this.Rc.gain,1-s/2,i,e);break;case 1:this.Oc[0]=s,this.xc(this.Tc.frequency,s,i,e);break;case 2:this.Oc[1]=s,this.xc(this.Tc.detune,s,i,e);break;case 3:this.Oc[2]=s,this.xc(this.Tc.Q,s,i,e);break;case 6:this.Oc[3]=s,this.xc(this.Bc.gain,s,i,e);break;case 7:this.Oc[4]=s,this.xc(this.Hc.frequency,s,i,e)}}},self.Pr=class extends M8{constructor(t,s){super(t),this.Zr="gain",this.Oc=[s],this.Vc=this.Cc(),this.Vc.gain.value=s}it(){this.Vc.disconnect(),super.it()}rh(t){this.Vc.disconnect(),this.Vc.connect(t)}ih(){return this.Vc}Er(t,s,i,e){const n=self.Ln.zr;4===t&&(this.Oc[0]=n(s),this.xc(this.Vc.gain,n(s),i,e))}},self.kr=class extends M8{constructor(t,s){super(t),this.Zr="stereopan",this.Oc=[s],this.Vc=this.Un.createStereoPanner(),this.Vc.pan.value=s}it(){this.Vc.disconnect(),super.it()}rh(t){this.Vc.disconnect(),this.Vc.connect(t)}ih(){return this.Vc}Er(t,s,i,e){s=Math.min(Math.max(s/100,-1),1),9===t&&(this.Oc[0]=s,this.xc(this.Vc.pan,s,i,e))}},self.Cr=class extends M8{constructor(t,s,i){super(t),this.Zr="tremolo",this.Oc=[s,i],this.Vc=this.Cc(),this.Vc.gain.value=1-i/2,this.Hc=this.Un.createOscillator(),this.Hc.frequency.value=s,this.Bc=this.Cc(),this.Bc.gain.value=i/2,this.Hc.connect(this.Bc),this.Bc.connect(this.Vc.gain),this.Hc.start(0)}it(){this.Hc.stop(0),this.Hc.disconnect(),this.Bc.disconnect(),this.Vc.disconnect(),super.it()}rh(t){this.Vc.disconnect(),this.Vc.connect(t)}ih(){return this.Vc}Er(t,s,i,e){switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[1]=s,this.xc(this.Vc.gain,1-s/2,i,e),this.xc(this.Bc.gain,s/2,i,e);break;case 7:this.Oc[0]=s,this.xc(this.Hc.frequency,s,i,e)}}},self.Mr=class extends M8{constructor(t,s,i){super(t),this.Zr="ringmod",this.Oc=[s,i],this.Mc=this.Cc(),this.Ic=this.Cc(),this.Ic.gain.value=i,this.Rc=this.Cc(),this.Rc.gain.value=1-i,this.jc=this.Cc(),this.jc.gain.value=0,this.Hc=this.Un.createOscillator(),this.Hc.frequency.value=s,this.Hc.connect(this.jc.gain),this.Hc.start(0),this.Mc.connect(this.jc),this.Mc.connect(this.Rc),this.jc.connect(this.Ic)}it(){this.Hc.stop(0),this.Hc.disconnect(),this.jc.disconnect(),this.Mc.disconnect(),this.Ic.disconnect(),this.Rc.disconnect(),super.it()}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){switch(t){case 0:s=Math.max(Math.min(s/100,1),0),this.Oc[1]=s,this.xc(this.Ic.gain,s,i,e),this.xc(this.Rc.gain,1-s,i,e);break;case 7:this.Oc[0]=s,this.xc(this.Hc.frequency,s,i,e)}}},self.Ir=class extends M8{constructor(t,s,i,e,n,o){super(t),this.Zr="distortion",this.Oc=[s,i,e,n,o],this.Mc=this.Cc(),this.Nc=this.Cc(),this.zc=this.Cc(),this.qc(e,n),this.Ic=this.Cc(),this.Ic.gain.value=o,this.Rc=this.Cc(),this.Rc.gain.value=1-o,this.$c=this.Un.createWaveShaper(),this.Yc=new Float32Array(65536),this.Kc(s,i),this.$c.curve=this.Yc,this.Mc.connect(this.Nc),this.Mc.connect(this.Rc),this.Nc.connect(this.$c),this.$c.connect(this.zc),this.zc.connect(this.Ic)}it(){this.Mc.disconnect(),this.Nc.disconnect(),this.$c.disconnect(),this.zc.disconnect(),this.Ic.disconnect(),this.Rc.disconnect(),super.it()}qc(t,s){this.Nc.gain.value=t=t<.01?.01:t,this.zc.gain.value=Math.pow(1/t,.6)*s}Kc(i,e){const n=32768;for(let s=0;s<n;++s){let t=s/n;t=this.Xc(t,i,e),this.Yc[n+s]=t,this.Yc[n-s-1]=-t}}Xc(t,s,i){const e=1.05*i*s,n=e-s,o=t<0?-1:1,h=t<0?-t:t;let r=h<s?h:s+n*self.Ln.Yr(h-s,1/n);return r*o}rh(t){this.Ic.disconnect(),this.Ic.connect(t),this.Rc.disconnect(),this.Rc.connect(t)}ih(){return this.Mc}Er(t,s,i,e){0===t&&(s=Math.max(Math.min(s/100,1),0),this.Oc[4]=s,this.xc(this.Ic.gain,s,i,e),this.xc(this.Rc.gain,1-s,i,e))}},self.Rr=class extends M8{constructor(t,s,i,e,n,o){super(t),this.Zr="compressor",this.Oc=[s,i,e,n,o],this.Vc=this.Un.createDynamicsCompressor(),this.Vc.threshold.value=s,this.Vc.knee.value=i,this.Vc.ratio.value=e,this.Vc.attack.value=n,this.Vc.release.value=o}it(){this.Vc.disconnect(),super.it()}rh(t){this.Vc.disconnect(),this.Vc.connect(t)}ih(){return this.Vc}Er(t,s,i,e){}},self.Tr=class extends M8{constructor(t,s,i){super(t),this.Zr="analyser",this.Oc=[s,i],this.Vc=this.Un.createAnalyser(),this.Vc.fftSize=s,this.Vc.smoothingTimeConstant=i,this.Jc=new Float32Array(this.Vc.frequencyBinCount),this.Zc=new Uint8Array(s),this.Qc=0,this.tl=0,this.Kr.Ar(this)}it(){this.Kr.Dr(this),this.Vc.disconnect(),super.it()}m(){this.Vc.getFloatFrequencyData(this.Jc),this.Vc.getByteTimeDomainData(this.Zc);const t=this.Vc.fftSize;let i=this.Qc=0;for(let s=0;s<t;++s){let t=(this.Zc[s]-128)/128;t<0&&(t=-t),this.Qc<t&&(this.Qc=t),i+=t*t}const s=self.Ln.$r;this.Qc=s(this.Qc),this.tl=s(Math.sqrt(i/t))}rh(t){this.Vc.disconnect(),this.Vc.connect(t)}ih(){return this.Vc}Er(t,s,i,e){}Yh(){return{tag:this.kc(),index:this.Pc(),peak:this.Qc,rms:this.tl,binCount:this.Vc.frequencyBinCount,freqBins:this.Jc}}}}{const zk="button";function StopPropagation(t){t.stopPropagation()}const Ak=class extends self.Ot{constructor(t){super(t,zk)}Ut(t,s){const i=document.createElement("input"),e=s.isCheckbox;let n=i;if(e){i.type="checkbox";const o=document.createElement("label");o.appendChild(i),o.appendChild(document.createTextNode("")),o.style.fontFamily="sans-serif",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.display="inline-block",o.style.color="black",n=o}else i.type="button";return n.style.position="absolute",n.addEventListener("pointerdown",StopPropagation),n.addEventListener("pointermove",StopPropagation),n.addEventListener("pointerrawupdate",StopPropagation),n.addEventListener("pointerup",StopPropagation),n.addEventListener("mousedown",StopPropagation),n.addEventListener("mouseup",StopPropagation),n.addEventListener("keydown",StopPropagation),n.addEventListener("keyup",StopPropagation),n.addEventListener("contextmenu",t=>t.preventDefault()),i.addEventListener("click",()=>this.$t("click",t,{isChecked:i.checked})),s.id&&(i.id=s.id),s.className&&(i.className=s.className),this.Jt(n,s),n}sl(t){return"input"===t.tagName.toLowerCase()?t:t.firstChild}Ht(t){return this.sl(t)}Jt(t,s){const i=this.sl(t);i.checked=s.isChecked,i.disabled=!s.isEnabled,t.title=s.title,t===i?i.value=s.text:t.lastChild.textContent=s.text}};self.Qt.Ui(Ak)}{const Pk="text-input";function StopPropagation(t){t.stopPropagation()}function StopKeyPropagation(t){13!==t.which&&27!==t.which&&t.stopPropagation()}const Qk=class extends self.Ot{constructor(t){super(t,Pk),this.Dt("scroll-to-bottom",t=>this.il(t))}Ut(s,t){let i;const e=t.type;return"textarea"===e?(i=document.createElement("textarea")).style.resize="none":(i=document.createElement("input")).type=e,i.style.position="absolute",i.autocomplete="off",i.addEventListener("pointerdown",StopPropagation),i.addEventListener("pointermove",StopPropagation),i.addEventListener("pointerrawupdate",StopPropagation),i.addEventListener("pointerup",StopPropagation),i.addEventListener("mousedown",StopPropagation),i.addEventListener("mouseup",StopPropagation),i.addEventListener("keydown",StopKeyPropagation),i.addEventListener("keyup",StopKeyPropagation),i.addEventListener("click",t=>{t.stopPropagation(),this.$t("click",s)}),i.addEventListener("dblclick",t=>{t.stopPropagation(),this.$t("dblclick",s)}),i.addEventListener("input",()=>this.qt("change",s,{text:i.value})),t.id&&(i.id=t.id),t.className&&(i.className=t.className),this.Jt(i,t),i}Jt(t,s){t.value=s.text,t.placeholder=s.placeholder,t.title=s.title,t.disabled=!s.isEnabled,t.readOnly=s.isReadOnly,t.spellcheck=s.spellCheck;const i=s.maxLength;i<0?t.removeAttribute("maxlength"):t.setAttribute("maxlength",i)}il(t){t.scrollTop=t.scrollHeight}};self.Qt.Ui(Qk)}{const dl="gamepad";let s=!1;const fl=class extends self.i{constructor(t){super(t,dl),this.el=!1,this.V=-1,this.I("ready",()=>this.nl()),this.I("vibrate-dual-rumble",t=>this.ol(t)),this.I("vibrate-trigger-rumble",t=>this.hl(t)),this.I("reset-vibrate",t=>this.rl(t)),this.I("suspend",()=>this.al()),this.I("resume",()=>this.cl()),window.addEventListener("gamepadconnected",t=>this.ll(t)),window.addEventListener("gamepaddisconnected",t=>this.ul(t)),window.addEventListener("unload",()=>this.dl())}wl(){try{return Array.from(navigator.getGamepads()).filter(t=>t&&t.connected)}catch(t){return s||(console.warn("[Construct] Failed to access gamepads: ",t),s=!0),[]}}nl(){this.el=!0;for(const t of this.wl())this.pl(t);this.fl()}fl(){-1===this.V&&(this.V=setInterval(()=>this.ml(),4))}gl(){-1!==this.V&&(clearInterval(this.V),this.V=-1)}al(){this.gl()}cl(){this.fl()}ll(t){this.el&&this.pl(t.gamepad)}yl(t){const s=t.vibrationActuator;return s&&s.playEffect&&Array.isArray(s.effects)?s.effects:[]}vl(t){return{index:t.index,id:t.id,vibrationEffects:this.yl(t)}}pl(t){this.v("gamepad-connected",this.vl(t))}ul(t){if(this.el){const s=t.gamepad;this.v("gamepad-disconnected",{index:s.index})}}ml(){const t=this.wl();if(t.length){const s=t.map(t=>Object.assign(this.vl(t),{buttons:t.buttons.map(t=>({pressed:t.pressed,value:t.value})),axes:t.axes}));this.v("input-update",s)}}bl(t){for(const s of this.wl())if(s.index===t)return s;return null}async ol(t){const s=this.bl(t.index);if(s){const i=s.vibrationActuator;if(i&&i.playEffect)try{await i.playEffect("dual-rumble",{duration:t.duration,startDelay:0,weakMagnitude:t.weakMag,strongMagnitude:t.strongMag})}catch(t){console.warn("[Gamepad] Failed to vibrate gamepad (dual rumble): ",t)}}}async hl(t){const s=this.bl(t.index);if(s){const i=s.vibrationActuator;if(i&&i.playEffect)try{await i.playEffect("trigger-rumble",{duration:t.duration,startDelay:0,weakMagnitude:t.weakMag,strongMagnitude:t.strongMag,leftTrigger:t.leftMag,rightTrigger:t.rightMag})}catch(t){console.warn("[Gamepad] Failed to vibrate gamepad (trigger rumble): ",t)}}}rl(t){const s=this.bl(t.index);if(s){const i=s.vibrationActuator;i&&i.reset&&i.reset()}}dl(){for(const t of this.wl()){const s=t.vibrationActuator;s&&s.reset&&s.reset()}}};self.Qt.Ui(fl)}{const Nl="progress-bar";function StopPropagation(t){t.stopPropagation()}const Ol=class extends self.Ot{constructor(t){super(t,Nl)}Ut(t,s){const i=document.createElement("progress");return i.style.position="absolute",i.style.userSelect="none",i.style.webkitUserSelect="none",i.addEventListener("pointerdown",StopPropagation),i.addEventListener("pointermove",StopPropagation),i.addEventListener("pointerrawupdate",StopPropagation),i.addEventListener("pointerup",StopPropagation),i.addEventListener("mousedown",StopPropagation),i.addEventListener("mouseup",StopPropagation),i.addEventListener("click",()=>this.$t("click",t)),s.id&&(i.id=s.id),s.className&&(i.className=s.className),this.Jt(i,s),i}Jt(t,s){t.title=s.title;const i=s.value,e=s.max;0<e&&0<=i?(t.max=e,t.value=i):(t.removeAttribute("value"),t.removeAttribute("max"))}};self.Qt.Ui(Ol)}{const Yl="sliderbar";function StopPropagation(t){t.stopPropagation()}const Zl=class extends self.Ot{constructor(t){super(t,Yl)}Ut(t,s){const i=document.createElement("input");return i.type="range",i.style.position="absolute",i.style.userSelect="none",i.style.webkitUserSelect="none",i.addEventListener("pointerdown",StopPropagation),i.addEventListener("pointermove",StopPropagation),i.addEventListener("pointerrawupdate",StopPropagation),i.addEventListener("pointerup",StopPropagation),i.addEventListener("mousedown",StopPropagation),i.addEventListener("mouseup",StopPropagation),i.addEventListener("keydown",StopPropagation),i.addEventListener("keyup",StopPropagation),i.addEventListener("contextmenu",t=>t.preventDefault()),i.addEventListener("click",()=>this.$t("click",t)),i.addEventListener("change",()=>this.qt("change",t,{value:parseFloat(i.value)})),i.addEventListener("input",()=>this.qt("input",t,{value:parseFloat(i.value)})),s.id&&(i.id=s.id),s.className&&(i.className=s.className),this.Jt(i,s),i}Jt(t,s){t.max=s.max,t.min=s.min,t.step=s.step,t.value=s.value,t.disabled=!s.isEnabled,t.title=s.title}};self.Qt.Ui(Zl)}{const gm="list";function StopPropagation(t){t.stopPropagation()}const hm=class extends self.Ot{constructor(t){super(t,gm),this.Dt("set-selected-index",(t,s)=>this.Sl(t,s.selectedIndex)),this.Dt("add-item",(t,s)=>this._l(t,s)),this.Dt("remove-item",(t,s)=>this.Ol(t,s)),this.Dt("set-item",(t,s)=>this.Pl(t,s)),this.Dt("clear",t=>this.kl(t)),this.Dt("load-state",(t,s)=>this.No(t,s))}Ut(s,t){const i=t.isDropdown,e=t.isMultiSelect,n=t.items,o=document.createElement("select");o.style.position="absolute",o.style.userSelect="none",o.style.webkitUserSelect="none",o.multiple=e,i||(o.size=2);for(const h of n)o.add(this.Cl(h));return o.addEventListener("pointerdown",StopPropagation),o.addEventListener("pointermove",StopPropagation),o.addEventListener("pointerrawupdate",StopPropagation),o.addEventListener("pointerup",StopPropagation),o.addEventListener("mousedown",StopPropagation),o.addEventListener("mouseup",StopPropagation),o.addEventListener("click",t=>{t.stopPropagation(),this.$t("click",s,this.xl(o))}),o.addEventListener("dblclick",t=>{t.stopPropagation(),this.$t("dblclick",s,this.xl(o))}),o.addEventListener("change",()=>this.qt("change",s,this.xl(o))),t.id&&(o.id=t.id),t.className&&(o.className=t.className),this.Jt(o,t),o}Cl(t){const s=document.createElement("option");return s.text=t,s}xl(i){const t=i.selectedIndex,e=[];for(let t=0,s=i.length;t<s;++t)i.options[t].selected&&e.push(t);return{selectedIndex:t,selectedIndices:e}}Jt(t,s){t.title=s.title,t.disabled=!s.isEnabled,t.multiple=!!s.isMultiSelect}Sl(t,s){t.selectedIndex=s}_l(t,s){const i=s.text,e=s.index,n=this.Cl(i);e<0?t.add(n):t.add(n,e)}Ol(t,s){t.remove(s.index)}Pl(t,s){t.options[s.index].text=s.text}kl(t){t.innerHTML=""}No(t,s){t.innerHTML="";for(const i of s.items)t.add(this.Cl(i));t.selectedIndex=s.selectedIndex;for(const e of s.selectedIndices){const n=t.options[e];n&&(n.selected=!0)}}};self.Qt.Ui(hm)}{const cn="mouse",dn=class extends self.i{constructor(t){super(t,cn),this.T([["cursor",t=>this.Ml(t)],["request-pointer-lock",t=>this.Il(t)],["release-pointer-lock",()=>this.Rl()]]),document.addEventListener("pointerlockchange",t=>this.Tl()),document.addEventListener("pointerlockerror",t=>this.Gl())}Ml(t){document.documentElement.style.cursor=t}Il(t){this.o.Ns().requestPointerLock(t)}Rl(){document.exitPointerLock()}Tl(){this.v("pointer-lock-change",{"has-pointer-lock":!!document.pointerLockElement})}Gl(){this.v("pointer-lock-error",{"has-pointer-lock":!!document.pointerLockElement})}};self.Qt.Ui(dn)}{const mn="localstorage",nn=class extends self.i{constructor(t){super(t,mn),this.T([["init",()=>this.Hs()],["request-persistent",()=>this.El()]])}async Hs(){let s=!1;try{s=await navigator.storage.persisted()}catch(t){s=!1,console.warn("[Construct] Error checking storage persisted state: ",t)}return{isPersistent:s}}async El(){try{const t=await navigator.storage.persist();return{isOk:!0,isPersistent:t}}catch(t){return console.error("[Construct] Error requesting persistent storage: ",t),{isOk:!1}}}};self.Qt.Ui(nn)}{let s=null,i=null;function elemsForSelector(t,s){if(t){if(s)return Array.from(document.querySelectorAll(t));{const i=document.querySelector(t);return i?[i]:[]}}return[document.documentElement]}function noop(){}window.addEventListener("beforeinstallprompt",t=>(t.preventDefault(),s=t,i&&i.Al(),!1));const vn="browser",wn=class extends self.i{constructor(t){super(t,vn),this.xs="",this.T([["get-initial-state",t=>this.Dl(t)],["ready-for-sw-messages",()=>this.Fl()],["alert",t=>this.Ye(t)],["close",()=>this.Wl()],["set-focus",t=>this.Tt(t)],["vibrate",t=>this.Ll(t)],["lock-orientation",t=>this.Ul(t)],["unlock-orientation",()=>this.Hl()],["navigate",t=>this.Bl(t)],["request-fullscreen",t=>this.Vl(t)],["exit-fullscreen",()=>this.jl()],["set-hash",t=>this.Nl(t)],["set-document-css-style",t=>this.zl(t)],["get-document-css-style",t=>this.ql(t)],["set-window-size",t=>this.$l(t)],["set-window-position",t=>this.Yl(t)],["request-install",()=>this.Kl()],["set-warn-on-close",t=>this.Xl(t)]]),window.addEventListener("online",()=>this.Jl(!0)),window.addEventListener("offline",()=>this.Jl(!1)),window.addEventListener("hashchange",()=>this.Zl()),this.Ql=t=>t.preventDefault(),document.addEventListener("backbutton",()=>this.tu())}g(){s?this.Al():i=this,window.addEventListener("appinstalled",()=>this.su())}Dl(t){return this.xs=t.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isConstructArcade:void 0!==window.is_scirra_arcade,windowHasFocus:document.hasFocus()}}Fl(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(t=>this.v("sw-message",t.data))}Al(){this.v("install-available")}async Kl(){if(!s)return{result:"unavailable"};try{s.prompt();const t=await s.userChoice;return{result:t.outcome}}catch(t){return console.error("[Construct] Requesting install failed: ",t),{result:"failed"}}}su(){this.v("app-installed")}Jl(t){this.v("online-state",{isOnline:t})}tu(){this.v("backbutton")}iu(){return"nwjs"===this.xs?nw.Window.get():null}Ye(t){alert(t.message)}Wl(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():self.nw?self.nw.App.quit():window.close()}Tt(t){const s=t.isFocus;if("nwjs"===this.xs){const i=this.iu();s?i.focus():i.blur()}else s?window.focus():window.blur()}Ll(t){navigator.vibrate&&navigator.vibrate(t.pattern)}Ul(t){const s=t.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(s).catch(t=>console.warn("[Construct] Failed to lock orientation: ",t));else try{let t=!1;screen.lockOrientation?t=screen.lockOrientation(s):screen.webkitLockOrientation?t=screen.webkitLockOrientation(s):screen.mozLockOrientation?t=screen.mozLockOrientation(s):screen.msLockOrientation&&(t=screen.msLockOrientation(s)),t||console.warn("[Construct] Failed to lock orientation")}catch(t){console.warn("[Construct] Failed to lock orientation: ",t)}}Hl(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(t){}}Bl(t){const s=t.type;if("back"===s)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.history.back();else if("forward"===s)window.history.forward();else if("reload"===s)location.reload();else if("url"===s){const i=t.url,e=t.target,n=t.exportType;self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(i,"_system"):"preview"===n||"macos-wkwebiew"===n||"linux-cef"===n||this.o.Rs()?window.open(i,"_blank"):this._isConstructArcade||(2===e?window.top.location=i:1===e?window.parent.location=i:window.location=i)}else if("new-window"===s){const o=t.url,h=t.tag;self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(o,"_system"):window.open(o,h)}}Vl(s){if(this.o.Rs()||"macos-wkwebview"===this.xs||"linux-cef"===this.xs)self.Qt.Hi(!0),this.o.ei({type:"set-fullscreen",fullscreen:!0});else{const i={navigationUI:"auto"},e=s.navUI,n=(1===e?i.navigationUI="hide":2===e&&(i.navigationUI="show"),document.documentElement);let t;n.requestFullscreen?t=n.requestFullscreen(i):n.mozRequestFullScreen?t=n.mozRequestFullScreen(i):n.msRequestFullscreen?t=n.msRequestFullscreen(i):n.webkitRequestFullScreen&&(t=void 0!==Element.ALLOW_KEYBOARD_INPUT?n.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):n.webkitRequestFullScreen()),t instanceof Promise&&t.catch(noop)}}jl(){if(this.o.Rs()||"macos-wkwebview"===this.xs||"linux-cef"===this.xs)self.Qt.Hi(!1),this.o.ei({type:"set-fullscreen",fullscreen:!1});else{let t;document.exitFullscreen?t=document.exitFullscreen():document.mozCancelFullScreen?t=document.mozCancelFullScreen():document.msExitFullscreen?t=document.msExitFullscreen():document.webkitCancelFullScreen&&(t=document.webkitCancelFullScreen()),t instanceof Promise&&t.catch(noop)}}Nl(t){location.hash=t.hash}Zl(){this.v("hashchange",{location:location.toString()})}zl(t){const s=t.prop,i=t.value,e=t.selector,n=t["is-all"];try{const o=elemsForSelector(e,n);for(const t of o)s.startsWith("--")?t.style.setProperty(s,i):t.style[s]=i}catch(t){console.warn("[Browser] Failed to set style: ",t)}}ql(t){const s=t.prop,i=t.selector;try{const e=document.querySelector(i);if(e){const n=window.getComputedStyle(e);return{isOk:!0,result:n.getPropertyValue(s)}}return{isOk:!1}}catch(t){return console.warn("[Browser] Failed to get style: ",t),{isOk:!1}}}$l(t){window.resizeTo(t.windowWidth,t.windowHeight)}Yl(t){window.moveTo(t.windowX,t.windowY)}Xl(t){const s=t.enabled;s?window.addEventListener("beforeunload",this.Ql):window.removeEventListener("beforeunload",this.Ql)}};self.Qt.Ui(wn)}{const Ho="nwjs",Io=class extends self.i{constructor(t){super(t,Ho),this.eu=!1,this.T([["init",()=>this.ci()],["show-open-dlg",t=>this.nu(t)],["show-folder-dlg",()=>this.ou()],["show-save-dlg",t=>this.hu(t)],["set-title",t=>this.ru(t)],["set-window-x",t=>this.au(t)],["set-window-y",t=>this.cu(t)],["set-window-width",t=>this.lu(t)],["set-window-height",t=>this.uu(t)],["window-cmd",t=>this.du(t)],["window-attention",t=>this.wu(t)],["set-window-max-size",t=>this.pu(t)],["set-window-min-size",t=>this.fu(t)],["set-window-resizable",t=>this.mu(t)],["set-window-always-top",t=>this.gu(t)],["shell-cmd",t=>this.yu(t)],["set-clipboard",t=>this.vu(t)],["clear-clipboard",()=>this.bu()]])}Su(){return nw.Window.get()}_u(t,s){const i=document.createElement("input");return i.type="file",i.style.display="none",i.id=t,s&&i.setAttribute(s,""),document.body.appendChild(i),i}ci(){this.eu=!0,nw.App.clearCache(),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>this.Ou(t));const s=this._u("c3nwOpenFileDialog"),i=(s.onchange=t=>{this.v("open-dlg",{chosenPath:s.value});try{s.value=null}catch(t){}},s.oncancel=()=>{this.v("open-dlg-cancel")},this._u("c3nwChooseFolderDialog","nwdirectory")),e=(i.onchange=t=>{this.v("folder-dlg",{chosenPath:i.value});try{i.value=null}catch(t){}},i.oncancel=()=>{this.v("folder-dlg-cancel")},this._u("c3nwSaveDialog","nwsaveas")),t=(e.onchange=t=>{this.v("save-dlg",{chosenPath:e.value});try{e.value=null}catch(t){}},e.oncancel=()=>{this.v("save-dlg-cancel")},this.Su());t.on("move",t=>this.Pu(t)),t.on("resize",t=>this.Pu(t));let n=this.ku();return setInterval(()=>{const t=this.ku();n!==t&&(n=t,this.v("clipboard-change",{"clipboard-text":t}))},1e3),Object.assign({argv:nw.App.argv,"clipboard-text":n},this.Cu())}Cu(){const t=this.Su();return{"window-title":t.title||"","window-x":t.x,"window-y":t.y,"window-width":t.width,"window-height":t.height}}Pu(t){this.v("window-change",this.Cu())}au(t){this.Su().x=t.x}cu(t){this.Su().y=t.y}lu(t){const s=this.Su(),i=t.width;s.setInnerWidth?s.setInnerWidth(i):s.width=i}uu(t){const s=this.Su(),i=t.height;s.setInnerHeight?s.setInnerHeight(i):s.height=i}du(t){const s=t.method;setTimeout(()=>this.Su()[s](),100)}wu(t){this.Su().requestAttention(t.request)}pu(t){this.Su().setMaximumSize(t.width,t.height)}fu(t){this.Su().setMinimumSize(t.width,t.height)}mu(t){this.Su().setResizable(t.resizable)}gu(t){this.Su().setAlwaysOnTop(t.top)}yu(t){const s=t.method,i=t.arg;nw.Shell[s](i)}Ou(t){t.preventDefault();const i=t.dataTransfer.files,e=[];for(let t=0,s=i.length;t<s;++t)e.push(i[t].path);return this.v("drop",{filePaths:e}),!1}nu(t){if(this.eu){const s=document.getElementById("c3nwOpenFileDialog");s.setAttribute("accept",t.accept),s.click()}}ou(){this.eu&&document.getElementById("c3nwChooseFolderDialog").click()}hu(t){if(this.eu){const s=document.getElementById("c3nwSaveDialog");s.setAttribute("accept",t.accept),s.click()}}ru(t){const s=t.title;document.title=s,this.Su().title=s}ku(){return nw.Clipboard.get().get()||""}vu(t){nw.Clipboard.get().set(t.text)}bu(){nw.Clipboard.get().clear()}};self.Qt.Ui(Io)}if(window.C3_Is_Supported){const Tp=!1;window.c3_runtimeInterface=new self.Qt({ss:Tp,vi:"workermain.js",runtimeScriptList:["scripts/c3main.js"],scriptFolder:"scripts/",exportType:"html5"})}