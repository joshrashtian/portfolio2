// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){bh=t},k=function(t){return t*Ph},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},B=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},z=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},V=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},Y=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new bh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=h*a+n*u,t[2]=e*l+r*c,t[3]=h*l+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ct=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},It=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Gt=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=Th*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(r-l)<=Th*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=Th*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Dt=function(t,s,i,e,h,r,n,o,a){var u=new bh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=r,u[6]=n,u[7]=o,u[8]=a,u},Nt=function(t,s,i,e,h,r,n,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*n-o*u,c=-s*r+o*a,f=u*r-n*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=n*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*u-n*a,t[7]=e*a-i*u,t[8]=i*n-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*n+d*u,t[1]=c*h+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*u,t[4]=p*h+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+M*n+i*u,t[7]=y*h+M*o+i*l,t[8]=y*r+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+u,t[7]=c*h+i*o+l,t[8]=c*r+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},Bt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},zt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-n,t},Vt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*C+S*(l=l*s-d*p)-T*v+b*x)?(t[0]=(o*f-a*c+u*C)*(d=1/d),t[1]=(a*l-n*f-u*v)*d,t[2]=(n*c-o*l+u*x)*d,t[3]=(h*c-e*f-r*C)*d,t[4]=(i*f-h*l+r*v)*d,t[5]=(e*l-i*c-r*x)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Yt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Th*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Th*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,_=f*s-d*g,E=y*_-M*G+w*I+S*C-T*v+b*x;return E?(t[0]=(o*_-a*G+u*I)*(E=1/E),t[1]=(h*G-e*_-r*I)*E,t[2]=(m*b-g*T+s*S)*E,t[3]=(f*T-c*b-d*S)*E,t[4]=(a*C-n*_-u*v)*E,t[5]=(i*_-h*C+r*v)*E,t[6]=(g*w-p*b-s*M)*E,t[7]=(l*b-f*w+d*M)*E,t[8]=(n*G-o*C+u*x)*E,t[9]=(e*C-i*G-r*x)*E,t[10]=(p*T-m*w+s*y)*E,t[11]=(c*w-l*T-d*y)*E,t[12]=(o*v-n*I-a*x)*E,t[13]=(i*I-e*v+h*x)*E,t[14]=(m*M-p*S-g*y)*E,t[15]=(l*S-c*M+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,_=f*s-d*g;return t[0]=o*_-a*G+u*I,t[1]=h*G-e*_-r*I,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*C-n*_-u*v,t[5]=i*_-h*C+r*v,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=n*G-o*C+u*x,t[9]=e*C-i*G-r*x,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*v-n*I-a*x,t[13]=i*I-e*v+h*x,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-r*y+n*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*r+w*u+S*d+T*y,t[3]=M*n+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*r+w*u+S*d+T*y,t[7]=M*n+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*r+w*u+S*d+T*y,t[11]=M*n+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*r+w*u+S*d+T*y,t[15]=M*n+w*l+S*p+T*s,t},ls=function(t,s,i){var e,h,r,n,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=n*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v=e[0],C=e[1],e=e[2],I=Math.hypot(v,C,e);return I<Th?null:(v*=I=1/I,C*=I,e*=I,I=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=v*C*(h=1-i)-e*I,w=C*C*h+i,S=e*C*h+v*I,T=v*e*h+C*I,b=C*e*h-v*I,x=e*e*h+i,t[0]=r*(i=v*v*h+i)+(u=s[4])*(y=C*v*h+e*I)+(d=s[8])*(e=e*v*h-C*I),t[1]=n*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*M+u*w+d*S,t[5]=n*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=r*T+u*b+d*x,t[9]=n*T+l*b+p*x,t[10]=o*T+c*b+m*x,t[11]=a*T+f*b+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+u*e,t[6]=n*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-r*e,t[10]=l*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-u*e,t[2]=n*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+u*i,t[10]=n*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+u*e,t[2]=n*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-r*e,t[6]=l*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Th?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+l*e+a*r-u*h)/c,i[1]=2*(a*n+l*h+u*e-o*r)/c,i[2]=2*(u*n+l*r+o*h-a*e)/c):(i[0]=2*(o*n+l*e+a*r-u*h),i[1]=2*(a*n+l*h+u*e-o*r),i[2]=2*(u*n+l*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},u=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(l=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(u+l)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(h-n)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-n)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},vs=function(t,s,i,e){var h=(n=s[0])*(l=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Cs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,M=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},Is=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Gs=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),u=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},_s=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),u=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*u,t[15]=1,t},As=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Ds=function(t,s,i,e){var h,r,n,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(u-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,r=i*h-f*l,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+r*u+n*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},Ns=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-n*i)*e+(n=n*u-o*a)*n)&&(c*=l=1/Math.sqrt(l),e*=l,n*=l),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=u*n-i*e,t[5]=i*c-a*n,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Bs=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],x=s[6],v=s[7],C=s[8],I=s[9],G=s[10],_=s[11],E=s[12],A=s[13],D=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-S)<=Th*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-T)<=Th*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=Th*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-v)<=Th*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-C)<=Th*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-I)<=Th*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-G)<=Th*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-_)<=Th*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-E)<=Th*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-A)<=Th*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-D)<=Th*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},zs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Vs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ys=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},ui=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,u=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*n,t},li=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,u=o*n;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,u=e*n-h*r,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=r+(o*=h)+(l*=2),t[1]=n+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},vi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ii=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Gi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},_i=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ai=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Di=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ni=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Bi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},zi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*n-s*r,t[2]=e*a-u*n+s*h,t[3]=-e*o+u*r-l*h,t},Qi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(r=2*Oh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Vi=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},Yi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*h,l=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=u*i+(e=-n*e-o*h-a*r)*-n+l*-a-c*-o,t[1]=l*i+e*-o+c*-n-u*-a,t[2]=c*i+e*-a+u*-o-l*-n,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},C=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},G=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},A=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return A(t,s),Qh(t,t,i),E(t,t),t},D=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=n*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},N=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"xzy":t[0]=n*u*c-o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c+n*a*l;break;case"yxz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;case"yzx":t[0]=n*u*c+o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c-n*a*l;break;case"zxy":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"zyx":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(x(t,s))>=1-Th},le=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=v(),e=(u(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},be=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+u,t[5]=n*a+r*o-e*i+l,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return I(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},ve=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return G(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ce=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return _(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ie=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],u=s[3];return t[0]=n*i+u*e+o*r-a*h,t[1]=o*i+u*h+a*e-n*r,t[2]=a*i+u*r+n*h-o*e,t[3]=u*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+u*h+a*e-n*r,t[6]=a*i+u*r+n*h-o*e,t[7]=u*i-n*e-o*h-a*r,t},Ge=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*n+h*a-r*o,t[1]=h*u+s*o+r*n-e*a,t[2]=r*u+s*a+e*o-h*n,t[3]=s*u-e*n-h*o-r*a,t[4]=e*(u=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*u+s*o+r*n-e*a,t[6]=r*u+s*a+e*o-h*n,t[7]=s*u-e*n-h*o-r*a,t},_e=function(t,s,i,e){var h,r,n,o,a,u;return Math.abs(e)<Th?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/u,r=n*i[1]/u,n=n*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-u*n,t[2]=a*i+e*n+u*r-o*h,t[3]=e*i-u*h-o*r-a*n,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+u*r+a*h-e*n,t[6]=a*i+u*n+e*r-o*h,t[7]=u*i-e*h-o*r-a*n,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ae=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*l+n*o+h*u-r*a+c*i+s*p+f*g-d*m,t[5]=h*l+n*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+n*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*l-e*o-h*a-r*u+s*i-c*p-f*m-d*g,t},De=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ne=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,r,n,o,a,u,l=Xh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(n=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-r*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=Th*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Th*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},Be=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},ze=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ye=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,M,w,S,x,v,C,I,G,_,E,A,D,N,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",Ph=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:Th,get g(){return bh},M:Oh,S:Rh,T:P,C:k,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:B,I:z,identity:U,G:W,set:Q,_:J,A:V,D:Y,N:H,multiply:t,rotate:q,scale:Z,L:X,O:K,R:$,P:tt,F:st,add:it,j:s,B:et,equals:ht,U:rt,W:nt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,I:ut,identity:lt,G:ct,set:ft,A:dt,N:pt,multiply:i,rotate:mt,scale:gt,translate:yt,L:Mt,O:wt,J:St,R:Tt,P:bt,add:xt,j:e,U:vt,W:Ct,B:It,equals:Gt,mul:i,sub:e}),Bh=Object.freeze({__proto__:null,create:h,V:_t,clone:Et,I:At,G:Dt,set:Nt,identity:Lt,_:Ot,A:Rt,D:Pt,N:kt,multiply:r,translate:Ft,rotate:jt,scale:Bt,J:zt,L:Ut,O:Wt,Y:Qt,H:Jt,Z:Vt,X:Yt,R:Ht,P:qt,add:Zt,j:n,U:Xt,W:Kt,B:$t,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,G:hs,set:rs,identity:p,_:ns,A:os,D:as,N:us,multiply:o,translate:ls,scale:cs,rotate:fs,K:ds,$:ps,tt:ms,J:gs,O:ys,L:Ms,it:ws,et:Ss,ht:Ts,nt:f,ot:bs,ut:a,lt:d,ct:u,ft:xs,dt:vs,gt:Cs,H:Is,yt:Gs,Mt:l,perspective:l,St:_s,Tt:Es,bt:c,ortho:c,xt:As,vt:Ds,Ct:Ns,R:Ls,P:Os,add:Rs,j:Ps,U:ks,W:Fs,B:js,equals:Bs,mul:o,sub:Ps}),qh=Vs,Kh=Ys,Wh=Hs,$h=ii,tr=ei,zh=Us,sr=hi,Lh=m(),vh=Object.freeze({__proto__:null,create:m,clone:zs,length:Us,G:g,I:Ws,set:Qs,add:Js,j:Vs,multiply:Ys,It:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,Gt:si,_t:ii,Et:ei,At:hi,Dt:ri,inverse:ni,normalize:y,Nt:M,Lt:w,Ot:oi,Rt:ai,Pt:ui,kt:li,random:ci,Ft:fi,jt:di,Bt:pi,K:mi,$:gi,tt:yi,angle:Mi,zt:wi,R:Si,B:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Ut:$h,Wt:tr,Qt:zh,Jt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Lh[0]=t[n],Lh[1]=t[n+1],Lh[2]=t[n+2],h(Lh,Lh,r),t[n]=Lh[0],t[n+1]=Lh[1],t[n+2]=Lh[2];return t}}),qh=_i,Kh=Ei,Wh=Ai,$h=Fi,tr=ji,sr=T,ir=b,Nh=S(),Uh=Object.freeze({__proto__:null,create:S,clone:xi,G:vi,I:Ci,set:Ii,add:Gi,j:_i,multiply:Ei,It:Ai,ceil:Di,floor:Ni,min:Li,max:Oi,round:Ri,scale:Pi,Gt:ki,_t:Fi,Et:ji,length:T,At:b,Dt:Bi,inverse:zi,normalize:Ui,Nt:x,Lt:Wi,Ot:Qi,random:Ji,Ft:Vi,Bt:Yi,zt:Hi,R:qi,B:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Ut:$h,Wt:tr,Qt:sr,Jt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Nh[0]=t[n],Nh[1]=t[n+1],Nh[2]=t[n+2],Nh[3]=t[n+3],h(Nh,Nh,r),t[n]=Nh[0],t[n+1]=Nh[1],t[n+2]=Nh[2],t[n+3]=Nh[3];return t}}),qh=xi,Kh=vi,Wh=Ci,$h=Ii,tr=Gi,sr=se,Qh=Pi,Jh=x,ir=Qi,er=Vh=T,hr=Yh=b,Hh=Ui,rr=Zi,Eh=m(),Ah=g(1,0,0),Dh=g(0,1,0),nr=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Eh,Ah,s),zh(Eh)<1e-6&&w(Eh,Dh,s),y(Eh,Eh),C(t,Eh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Eh,s,i),t[0]=Eh[0],t[1]=Eh[1],t[2]=Eh[2],t[3]=1+e,Hh(t,t))},Gh=v(),_h=v(),or=function(t,s,i,e,h,r){return D(Gh,s,h,r),D(_h,i,e,r),D(t,Gh,_h,2*r*(1-r)),t},Ih=h(),qh=Object.freeze({__proto__:null,create:v,identity:Ki,Vt:C,Yt:$i,Ht:te,multiply:se,K:I,$:G,tt:_,qt:ie,exp:E,Zt:A,pow:ee,Rt:D,random:he,A:re,Xt:ne,Kt:N,$t:oe,R:ae,clone:qh,G:Kh,I:Wh,set:$h,add:tr,mul:sr,scale:Qh,Nt:Jh,Ot:ir,length:Vh,Qt:er,At:Yh,Jt:hr,normalize:Hh,B:rr,equals:ue,ts:nr,es:or,hs:function(t,s,i,e){return Ih[0]=i[0],Ih[3]=i[1],Ih[6]=i[2],Ih[1]=e[0],Ih[4]=e[1],Ih[7]=e[2],Ih[2]=-s[0],Ih[5]=-s[1],Ih[8]=-s[2],Hh(t,N(t,Ih))}}),Zh=Jh,Kh=Xh=Yh,$h=Object.freeze({__proto__:null,create:le,clone:ce,G:fe,ns:de,nt:L,J:pe,L:me,V:ge,I:O,identity:ye,set:Me,os:Wh,us:we,ls:Wh,cs:Se,ut:Te,translate:be,K:xe,$:ve,tt:Ce,ds:Ie,gs:Ge,ys:_e,add:Ee,multiply:Ae,mul:Ae,scale:De,Nt:Zh,Ot:Ne,A:Le,Xt:Oe,length:Vh,Qt:Vh,At:Xh,Jt:Kh,normalize:Re,R:Pe,B:ke,equals:Fe}),tr=ih,sr=Qe,ir=Je,er=Ve,hr=th,rr=sh,nr=eh,Ch=R(),or=Object.freeze({__proto__:null,create:R,clone:je,G:Be,I:ze,set:Ue,add:We,j:Qe,multiply:Je,It:Ve,ceil:Ye,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,Gt:$e,_t:th,Et:sh,length:ih,At:eh,Dt:hh,inverse:rh,normalize:nh,Nt:oh,Lt:ah,Ot:uh,random:lh,Ms:ch,ws:fh,jt:dh,Ft:ph,rotate:mh,angle:gh,zt:yh,R:Mh,B:wh,equals:Sh,Qt:tr,sub:sr,mul:ir,div:er,Ut:hr,Wt:rr,Jt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ch[0]=t[n],Ch[1]=t[n+1],h(Ch,Ch,r),t[n]=Ch[0],t[n+1]=Ch[1];return t}}),globalThis.Ss=kh,globalThis.Ss.Ts=Fh,globalThis.Ss.bs=jh,globalThis.Ss.xs=Bh,globalThis.Ss.vs=xh,globalThis.Ss.Cs=qh,globalThis.Ss.Is=$h,globalThis.Ss.Gs=or,globalThis.Ss._s=vh,globalThis.Ss.Es=Uh}var Ch,Ih,Gh,_h,Eh,Ah,Dh,Nh,Lh,Th,bh,Oh,Rh,Ph,kh,Fh,jh,Bh,xh,zh,vh,Uh,Wh,Qh,Jh,Vh,Yh,Hh,qh,Zh,Xh,Kh,$h,tr,sr,ir,er,hr,rr,nr,or,O,R,P,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},v=function(t,s,i){return 0<=o(t,s,i)},C=function(t,s,i){return o(t,s,i)<0},I=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=R,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},G=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},_=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},E=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(_(t,s-1),_(t,s),_(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},A=function(t,s){return C(_(t,s-1),_(t,s),_(t,s+1))},l=function(t,s,i){var e,h=P,r=k;if(v(_(t,s+1),_(t,s),_(t,i))&&I(_(t,s-1),_(t,s),_(t,i)))return!1;for(var n=G(_(t,s),_(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&v(_(t,s),_(t,i),_(t,o+1))&&I(_(t,s),_(t,i),_(t,o))&&(h[0]=_(t,s),h[1]=_(t,i),r[0]=_(t,o),r[1]=_(t,o+1),e=a(h,r),G(_(t,s),e)<n))return!1;return!0},D=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(_(t,s),_(t,i),_(t,e),_(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(A(t,r))for(var n=0;n<t.length;++n)if(l(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([_(t,r),_(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},N=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},L=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var T=0;T<t.length;++T)if(A(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)x(_(w,T-1),_(w,T),_(w,b))&&I(_(w,T-1),_(w,T),_(w,b-1))&&(u=N(_(w,T-1),_(w,T),_(w,b),_(w,b-1)),C(_(w,T+1),_(w,T),u))&&(f=G(w[T],u))<c&&(c=f,a=u,m=b),x(_(w,T+1),_(w,T),_(w,b+1))&&I(_(w,T+1),_(w,T),_(w,b))&&(u=N(_(w,T+1),_(w,T),_(w,b),_(w,b+1)),x(_(w,T-1),_(w,T),u))&&(f=G(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(E(y,w,T,p+1),y.push(u),M.push(u),0!==m&&E(M,w,m,w.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,w.length),E(y,w,0,p+1),y.push(u),M.push(u),E(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)v(_(w,T-1),_(w,T),_(w,b))&&I(_(w,T+1),_(w,T),_(w,b))&&(f=G(_(w,T),_(w,b)))<d&&D(w,T,b)&&(d=f,g=b%t.length);T<g?(E(y,w,T,g+1),0!==g&&E(M,w,g,S.length),E(M,w,0,T+1)):(0!==T&&E(y,w,T,S.length),E(y,w,0,g+1),E(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,r,n),L(M,s,i,e,h,r,n)):(L(M,s,i,e,h,r,n),L(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(_(t,e-1),_(t,e),_(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,v,C,I,r,G,_,n,E,u,A,l,D,c,f,d,N,L,m,g,O=[],R=[],P=[],k=[],self.As={Ds:s,Ns:L,Ls:i,Os:e,Rs:p,Ps:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.ks=class{constructor(){throw TypeError("static class can't be instantiated")}static Fs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static js(){t=!0}static Bs(){return t}static zs(){s=!0}static Us(){return s}static Ws(t){i=t}static Qs(){return i}static Js(){return"final"===i}};r.isDebug=!1,r.Vs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ys={}}{const s=self.ks;s.Hs=class{constructor(t){this.qs=t,this.Zs=new Map,this.Xs()}Xs(){let t=this.qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Ks(i)}Ks(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Zs.set(i,e)}else this.Zs.set(t,null)}$s(){for(const t of this.Zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ti(t){return this.Zs.has(t)}si(t){const s=this.Zs.get(t);return void 0===s?null:s}ei(){history.replaceState("",document.title,location.pathname+location.search)}hi(t){this.qs=t,this.Zs.clear(),this.Xs()}},s.ri=new s.Hs(location.search),s.ni=new s.Hs(location.hash),s.ri.ti("perf")&&(s.oi=!0),"dev"!==s.ri.si("mode")&&s.Ws("final")}{let e=function(t){const s=parseFloat(t),i=B.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.ks,j="(unknown)",B=(a.ai={li:j,ci:j,fi:j,di:j,mi:NaN,gi:j,yi:"browser",Mi:!0,wi:!1,Si:!1,Ti:!1,bi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),z=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=Q.get(r.brand),o=(!s&&n&&(s=n,i=r.version),J.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.ai.fi="Chromium",a.ai.di=h),a.ai.fi=s||j,a.ai.di=i||j,a.ai.gi=e||j};s,a.ai.li=U.platform,a.ai.wi=U.mobile,a.ai.Mi=!a.ai.wi;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.ai.bi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ai.li?a.ai.ci=e(t.platformVersion):a.ai.ci=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(z);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ai.li="Windows";const s=t[1];a.ai.ci=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ai.li="macOS",a.ai.ci=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ai.li="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ai.li="Linux"}),t(/android/i,()=>{a.ai.li="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ai.li="Android",a.ai.ci=t[1]}),a.ai.li===j&&(t(/(iphone|ipod|ipad)/i,t=>{a.ai.li="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ai.li="iOS",a.ai.ci=t[1].replace(/_/g,".")}));const V=/chrome\//i.test(z),Y=/chromium\//i.test(z),H=/edg\//i.test(z),q=/OPR\//.test(z),Z=/nwjs/i.test(z),X=/safari\//i.test(z),K=/webkit/i.test(z),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.ai.fi="Chrome",a.ai.di=t[1],a.ai.gi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ai.fi="Edge",a.ai.di=t[1],a.ai.gi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ai.fi="Opera",a.ai.di=t[1],a.ai.gi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ai.fi="Chromium",a.ai.di=t[1],a.ai.gi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ai.fi="NW.js",a.ai.di=t[1],a.ai.gi="Chromium",a.ai.yi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ai.fi="Firefox",a.ai.di=t[1],a.ai.gi="Gecko"}),!X||V||Y||H||q||Z||(a.ai.fi="Safari",a.ai.gi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ai.di=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ai.fi="Chrome for iOS",a.ai.di=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ai.fi="Firefox for iOS",a.ai.di=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ai.fi="Edge for iOS",a.ai.di=t[1]})),a.ai.gi===j&&K&&(a.ai.gi="WebKit"),"Android"===a.ai.li&&"Safari"===a.ai.fi&&(a.ai.fi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.ai.li)||"nwjs"===a.ai.yi;a.ai.Mi=tt,a.ai.wi=!tt}"Chrome"===a.ai.fi&&"browser"===a.ai.yi&&/wv\)/.test(z)&&(a.ai.yi="webview"),"nwjs"!==a.ai.yi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ai.yi="webapp"),a.ai.mi=parseFloat(a.ai.di);const W="macOS"===a.ai.li&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;W&&(a.ai.li="iOS",a.ai.ci=a.ai.di,a.ai.Mi=!1,a.ai.wi=!0,a.ai.Ti=!0),a.ai.Si="macOS"===a.ai.li||"iOS"===a.ai.li}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return L(t,s)},s=function(t,s){return L(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function L(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),L(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.xi=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.xi,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.vi=t,this.Ci=!this.vi,this.Ci||"undefined"!=typeof indexedDB||(this.Ci=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ii=new Map}Gi(t){if(!this.Ci)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ci=!0;break}}async _i(t){const s=this.Ii.get(t),i=await h(s);return void 0===i?null:i}async Ei(t,s){s=await h(s),this.Ii.set(t,s)}Ai(t){this.Ii.delete(t)}Di(){this.Ii.clear()}Ni(){return Array.from(this.Ii.keys())}Li(){return this.Ci}Oi(){return this.Ii}Ri(t){this.Ii=t}async getItem(s,t){if(e(t),this.Ci)return this._i(s);let i;try{i=await this.vi.get(s)}catch(t){return this.Gi(t),this.Ci?this._i(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ci)await this.Ei(s,i);else try{await this.vi.set(s,i)}catch(t){if(this.Gi(t),!this.Ci)throw t;await this.Ei(s,i)}}async removeItem(s,t){if(e(t),this.Ci)this.Ai(s);else try{await this.vi.delete(s)}catch(t){this.Gi(t),this.Ci?this.Ai(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ci)this.Di();else try{await this.vi.clear()}catch(t){this.Gi(t),this.Ci?this.Di():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ci)return this.Ni();let s=[];try{s=await this.vi.keys()}catch(t){if(this.Gi(t),this.Ci)return this.Ni();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ci?Promise.resolve(!0):this.vi.ready()}Pi(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}ki(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Fi(t){i("localforage.defineDriver()")}ji(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.ks;if(e.Bi={},e.Bi.Ui=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Bi.Wi="undefined"!=typeof HTMLDialogElement,e.Bi.Qi=!!self.requestIdleCallback,e.Bi.ImageBitmap=!!self.createImageBitmap,e.Bi.ImageBitmapOptions=!1,e.Bi.Ji=!1,e.Bi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Bi.ImageBitmapOptions=!0}).catch(()=>{e.Bi.ImageBitmapOptions=!1})}catch(t){e.Bi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Bi.Ji=10===t.width&&10===t.height}).catch(()=>{e.Bi.Ji=!1})}catch(t){e.Bi.Ji=!1}}if(e.Bi.Vi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Bi.Yi=!(!navigator.permissions||!navigator.permissions.query),e.Bi.Hi=!1,e.Bi.Yi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.Bi.Hi=!0}).catch(()=>{e.Bi.Hi=!1})}e.Bi.Zi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Bi.Xi="undefined"!=typeof Proxy,e.Bi.Ki=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Bi.$i="function"==typeof fetch,e.Bi.te=!!(self.isSecureContext&&"Opera"!==e.ai.fi&&navigator.storage&&navigator.storage.persist),e.Bi.ie=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Bi.he=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.ai.li)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Bi.ImageDecoder=void 0!==self.ImageDecoder,e.Bi.ne=!!self.VideoEncoder,e.Bi.oe=!!self.showOpenFilePicker,e.Bi.ae=!!self.queryLocalFonts,e.Bi.UserActivation=!!navigator.userActivation,e.Bi.ue=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Bi.ue=i&&"image/webp"===i.type}catch(t){e.Bi.ue=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.ks;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.le(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.fe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.ks;self.assert=function(t,s){t||i(s)}}{const h=self.ks,mt=self.Ys,gt=(h.de=function(t){return"number"==typeof t},h.pe=function(t){return h.de(t)&&isFinite(t)},h.me=function(t){if(!h.de(t))throw new TypeError("expected number")},h.ge=function(t){h.ye(t)},h.Me=function(t,s,i){if(!h.de(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.we=function(...s){for(let t of s);},h.Se=function(t){if(!h.pe(t))throw new TypeError("expected finite number")},h.Te=function(t){h.ye(t)},h.xe=function(...s){for(let t of s);},h.ve=function(t){return"string"==typeof t},h.Ce=function(t){if(!h.ve(t))throw new TypeError("expected string")},h.Ie=function(t){h.ye(t)},h.Ge=function(...s){for(let t of s);},h._e=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ee=function(t){if(!h._e(t))throw new TypeError("expected simple object")},h.Ae=function(t){if(!h.ye(t)&&!h._e(t))throw new TypeError("expected simple object")},h.De=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ne=function(t){if(!h.De(t))throw new TypeError("expected object")},h.Le=function(t){h.ye(t)},h.Oe=function(...s){for(let t of s);},h.Re=function(t){return h.Pe(t,Blob)&&"string"==typeof t.name},h.ke=function(t){if(!h.Re(t))throw new TypeError("expected file")},h.Fe=function(t){h.ye(t)},h.je=function(t){return Array.isArray(t)},h.Be=function(t){if(!h.je(t))throw new TypeError("expected array")},h.Ue=function(t){h.ye(t)},h.We=function(...s){for(let t of s);},h.Qe=function(t){return!(!h.je(t)||t.length&&!h.je(t[0]))},h.Je=function(s){if(!h.Qe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.je(t))throw new TypeError("expected 2d array")},h.Ve=function(t){h.ye(t)},h.Ye=function(t){return"function"==typeof t},h.He=function(t,s){if(!h.Ye(t))throw new TypeError("expected function");if(!h.ye(s)&&t!==s)throw new TypeError("expected same function reference")},h.qe=function(t){h.ye(t)},h.Ze=function(...s){for(let t of s);},h.Xe=function(s,...i){if(!h.Ye(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.ye(t)&&s===t)return;throw new TypeError("expected same function reference")},h.Ke=function(...s){if(!h.ye(s))for(let t of s);},h.$e=function(t,s){return t instanceof s},h.ih=function(s,...i){for(let t of i)if(h.$e(s,t))return!0;return!1},h.eh=function(t,s){if(!h.$e(t,s))throw new TypeError("unexpected type")},h.hh=function(t,s){h.ye(t)},h.rh=function(t,...s){for(let t of s);},h.nh=function(t,...s){if(!h.ih(t,...s))throw new TypeError("unexpected type")},h.oh=function(t,...s){if(!h.ye(t)&&!h.ih(t,...s))throw new TypeError("unexpected type")},h.ah=function(s,i){for(let t of s)if(!h.$e(t,i))return!1;return!0},h.uh=function(s){for(let t of s)if(!h.pe(t))return!1;return!0},h.lh=function(s,t){for(let t of s);},h.fh=function(s,t){if(!h.ye(s))for(let t of s);},h.ph=function(s,t){if(!h.ye(s))for(let t of s);},h.mh=function(s){for(let t of s);},h.gh=function(s){if(!h.ye(s))for(let t of s);},h.yh=function(t,s){return!(h.ye(t)||!h.ve(t.nodeName))&&(!s||h.Mh(t.nodeName,s))},h.wh=function(t,s){if(h.ye(t)||!h.ve(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Mh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Sh=function(t,s){h.ye(t)},h.Th=function(t,s){return!(h.ye(t)||!h.ve(t.tagName))&&(!s||h.Mh(t.tagName,s))},h.bh=function(t,s){if(h.ye(t)||!h.ve(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Mh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.xh=function(t,s){h.ye(t)},h.Ch=function(t){return h.Th(t,"img")||h.Th(t,"canvas")||h.Th(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Ih=function(t){if(!h.Ch(t))throw new TypeError("expected drawable")},h.Gh=function(t){h.ye(t)},h._h=function(t){return t instanceof ImageData||h.Ch(t)},h.Eh=function(t){if(!h._h(t))throw new TypeError("expected drawable or image data")},h.Ah=function(t){if(!h.ye(t)&&!h._h(t))throw new TypeError("expected drawable or image data")},h.Dh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Nh},h.Lh=function(t){if(!h.Dh(t))throw new TypeError("expected string-like")},h.Oh=function(t){h.ye(t)},h.Rh=function(...s){for(let t of s);},h.Ph=function(){throw new Error("must be overridden")},h.kh=function(){throw new Error("not yet implemented")},h.Fh=function(t){return t.constructor===function*(){}.constructor},h.jh=function(t){if(!h.Fh(t))throw new Error("expected generator function")},h.Bh=function(t){return"function"===t[Symbol.iterator]},h.zh=function(t){if(!h.Bh(t))throw new Error("expected iterable")},h.Uh=function(t){return!h.ye(t)},h.ye=function(t){return null==t},h.Wh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Qh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Jh=function(t){return h.$e(t,gt)},h.Vh=function(t){},h.Yh=function(t){h.Hh(t,gt)},h.qh=function(t,...s){if(!h.Zh(t,...s))throw new TypeError("unexpected type")},h.Zh=function(t,...s){for(const i of s)if(h.Pe(t,i))return!0;return!1},h.Hh=function(t,s){if(!h.Pe(t,s))throw new TypeError("unexpected type")},h.Pe=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.me=h.me,mt.ge=h.ge,mt.Se=h.Se,mt.Te=h.Te,mt.Ce=h.Ce,mt.Ie=h.Ie,mt.Ne=h.Ne,mt.Le=h.Le,mt.Be=h.Be,mt.Ue=h.Ue,mt.He=h.He,mt.qe=h.qe,mt.eh=h.eh,mt.hh=h.hh,mt.ye=h.ye}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.fe())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.Xh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Kh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Xh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.ks,yt=new Map;p.$h=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.tr=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.ir=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,er:0,hr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.er.toPrecision(3)} :: calls => `+this.hr}})},p.rr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.er=i.total/i.hr,console.log(i.toString()),i.hr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.fe=function(){return(new Error).stack},p.nr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Xh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.de(t)?"<number>":p.ve(t)?"<string>":p.je(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ye(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.ur={};const Mt=new Set(["then","splice"]);p.ur.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Xh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Xh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.ur.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Xh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Xh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Xh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.ur.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Xh(t)}'`)},p.ur.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Xh(t)}'`)},p.ur.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Xh(t)}'`)};let f=-1,d=(p.lr=class{constructor(){if(p.Vs&&p.Bi.Xi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.ur);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.cr=function(s){if(p.Vs&&p.Bi.Xi&&s instanceof p.lr){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.pr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Vs&&n(t,i),p.cr(i)},p.mr=function(t){let s=l.get(t);s&&c.set(s,p.fe())},p.gr=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.yr=class{constructor(t){this.Mr="",t&&this.start(t)}start(t){p.oi&&(this.Mr=t,performance.mark(this.Mr+"-Start"))}end(){p.oi&&(performance.mark(this.Mr+"-End"),performance.measure(this.Mr,this.Mr+"-Start",this.Mr+"-End"))}next(t){p.oi&&(this.end(),this.Mr=t,performance.mark(this.Mr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.ks,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Sr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Tr=function(t,s,i){return t<s?s:i<t?i:t},y.br=function(t){return(t%=wt)<0&&(t+=wt),t},y.vr=function(t){return t*St},y.Cr=function(t){return t*Tt},y.Ir=function(t,s){return Math.sqrt(t*t+s*s)},y.Gr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y._r=function(t,s,i,e){return y.Ir(i-t,e-s)},y.Er=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Ar=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Dr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Nr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.br(t+i):y.br(t-i):y.br(s)},y.Lr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Or=function(t,s,i,e=0){let h=y.Dr(t,s),r=wt*e;return y.Lr(s,t)?y.br(t+(h+r)*i):y.br(t-(h+r)*i)},y.Rr=function(t,s,i,e=0){const h=y.Dr(t,s),r=wt*e;return y.Lr(s,t)?y.br(t+(h+r)*i):y.br(t+(wt-h+r)*i)},y.Pr=function(t,s,i,e=0){const h=y.Dr(t,s),r=wt*e;return y.Lr(s,t)?y.br(t-(-wt+h-r)*i):y.br(t-(h+r)*i)},y.kr=function(t,s){const i=y.Dr(t,s);return y.Lr(t,s)?y.br(s-i):y.br(s+i)},y.Ot=function(t,s,i){return t+i*(s-t)},y.Fr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.jr=function(t,s,i,e,h){return y.Ot(e,h,y.Fr(t,s,i))},y.Br=function(t,s,i,e){return y.Ot(y.Ot(t,s,e),y.Ot(s,i,e),e)},y.zr=function(t,s,i,e,h){return y.Ot(y.Br(t,s,i,h),y.Br(s,i,e,h),h)},y.Ur=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Wr=function(t){return 0<t&&0==(t-1&t)},y.Qr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Jr=function(t,s){return Math.round(t*s)/s},y.Vr=function(t,s){return Math.floor(t*s)/s},y.Yr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Hr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.qr=function(t,s,i){return y.Tr(t,0,255)|y.Tr(s,0,255)<<8|y.Tr(i,0,255)<<16},1024),xt=16384,vt=8191,Ct=(y.Zr=function(t,s,i,e){return t=y.Tr(Math.floor(1024*t),-8192,vt),s=y.Tr(Math.floor(1024*s),-8192,vt),i=y.Tr(Math.floor(1024*i),-8192,vt),e=y.Tr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*bt+s*xt*bt+i*bt+e)},y.Xr=function(t,s,i){return y.Zr(t,s,i,1)},y.Kr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*bt));return t>vt&&(t-=xt),t/1024}},y.$r=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*bt)/(xt*bt));return t>vt&&(t-=xt),t/1024}},y.tn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*bt)/bt);return t>vt&&(t-=xt),t/1024}},y.sn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.hn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.rn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Ct){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.hn(i,e);return[i/t,e/t]},y.nn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,n),c=Math.max(h,n);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,M=i-t,w=e-s,S=n-h,T=o-r,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.an=function(t,s,i,e,h,r,n,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<n)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.un=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.ln(),l=h.cn(),c=h.dn(),f=h.pn(),d=h.mn(),p=h.gn(),m=h.yn(),g=h.Mn();return y.an(t,s,i,e,r,n,o,a,u,l,c,f)||y.an(t,s,i,e,r,n,o,a,c,f,d,p)||y.an(t,s,i,e,r,n,o,a,d,p,m,g)||y.an(t,s,i,e,r,n,o,a,m,g,u,l)},y.wn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.an(s,i,e,h,n,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.an(s,i,e,h,n,o,a,u,r[l],r[l+1],r[0],r[1])};y.Sn=function(t,s,i,e,h,r,n,o){const a=i-t,u=e-s,l=n-h,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.Tn=function(t,s,i,e,h,r,n,o,a){const u=(n-h)*a,l=(o-r)*a;return y.Sn(t,s,i,e,h-u,r-l,n+u,o+l)},y.bn=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.xn=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.vn=function(t,s,i,e,h,r,n,o,a,u,l,c){return[t*e+s*n+i*u,t*h+s*o+i*l,t*r+s*a+i*c]}}{let u=self.ks,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.Cn=function(){return i},u.In=function(){if(!s)return"";const t=s.location;return u.Gn(t.origin+t.pathname)+i},u.Gn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u._n=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.En=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.An=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.Dn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.Nn=function(t){return t.replace(/\\/g,"/")},u.Ln=function(t,s){const i=t?u.En(t).slice(1):"";return s===i},u.On=function(t,s){let i,e;return u.Re(t)&&(i=u.Dn(t.name)),u.ve(t)&&(i=u.Dn(t)),u.Re(s)&&(e=u.Dn(s.name)),u.ve(s)&&(e=u.Dn(s)),i===e},u.Rn=function(t){t=u.Nn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Pn:h,name:r,root:s,ext:n,kn:a}},u.Fn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u.jn=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.Bn=function(){},u.Mh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.zn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.Un=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u.Wn=function(t,s){t.length=s},u.Qn=function(t){t&&0!==t.length&&u.Wn(t,0)},u.Jn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u.Wn(t,0)}u.Wn(i,0)}},u.Vn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.Yn=function(t,s,i){const e=t.length;(s|=0)<e?u.Wn(t,s):e<s&&u.Vn(t,s,i)},u.Hn=function(t,s){u.Qn(t),u.Kh(t,s)},u.Kh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.qn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u.Wn(i,s)}},u.Zn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.Xn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Kn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return u.Wn(i,r),h},u.$n=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u.Wn(i,h),t-h},u.io=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.eo=function(t,s){if(!u.io(t,s))throw new RangeError("array index out of bounds")},u.ho=function(t){return t.slice()},u.ro=function(t,i){let e=[];for(let s of t)if(u.De(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.je(s)?e.push(u.ro(s,i)):e.push(s);return e},u.no=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.ao=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.uo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.lo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.co=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.fo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.do=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.po=function(t){e.push(t)},u.yo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.Mo=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},u.wo=function(t){r.delete(t)},u.So=u.Mo,u.To=function(){return new Promise(t=>u.So(t))},new Set);u.bo=function(s){const i=self.requestAnimationFrame(async t=>{await u.To(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.xo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.ks;r.vo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.Co=function(t){return!r.vo(t)},r.Io=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Go=function(t,s){return fetch(t,s).then(t=>(r.Io(t),t))},r._o=function(t){return r.Go(t).then(t=>t.text())},r.Eo=function(t){return r.Go(t).then(t=>t.json())},r.Ao=function(t){return r.Go(t).then(t=>t.blob())},r.Do=function(t){return r.Go(t).then(t=>t.arrayBuffer())},r.No=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Lo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Oo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Ro=function(t){return r.Oo(t).then(t=>JSON.parse(t))},r.Po=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.No(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.ko=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Fo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Tr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.jo=function(t,s,i){const e=r.ko(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Fo(e,s,i)},r.Bo=function(t,s,i){if(r.Bi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.jo(t,s,i));if(r.Bi.ImageBitmap)return createImageBitmap(t).then(t=>r.jo(t,s,i));{const e=r.ko(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Fo(e,s,i)}},r.zo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Uo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Qo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Jo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Yo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Ho=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.ks,Gt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,_t=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.qo=class{constructor(t,s,i,e){this.Zo=NaN,this.Xo=NaN,this.Ko=NaN,this.$o=NaN,this.Zo=0,this.Xo=0,this.Ko=0,this.$o=0,t instanceof l.qo?this.set(t):this.ta(t||0,s||0,i||0,e||0)}ia(t,s,i){return this.Zo=+t,this.Xo=+s,this.Ko=+i,this.Tr(),this}ta(t,s,i,e){return this.Zo=+t,this.Xo=+s,this.Ko=+i,this.$o=+e,this.Tr(),this}set(t){return this.Zo=t.Zo,this.Xo=t.Xo,this.Ko=t.Ko,this.$o=t.$o,this}I(t){return this.set(t)}add(t){this.Zo+=t.Zo,this.Xo+=t.Xo,this.Ko+=t.Ko,this.$o+=t.$o,this.Tr()}ea(t,s,i,e=0){this.Zo+=+t,this.Xo+=+s,this.Ko+=+i,this.$o+=+e,this.Tr()}ra(t){this.na(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.oa(Math.max(this.Xo,t.Xo)-Math.min(this.Xo,t.Xo)),this.aa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.ua(Math.max(this.$o,t.$o)-Math.min(this.$o,t.$o)),this.Tr()}ca(t){this.Zo=t.Zo,this.Xo=t.Xo,this.Ko=t.Ko}na(t){this.Zo=l.Tr(+t,0,1)}fa(){return this.Zo}oa(t){this.Xo=l.Tr(+t,0,1)}ma(){return this.Xo}aa(t){this.Ko=l.Tr(+t,0,1)}ga(){return this.Ko}ua(t){this.$o=l.Tr(+t,0,1)}ya(){return this.$o}clone(){return l.pr(l.qo,this.Zo,this.Xo,this.Ko,this.$o)}toArray(){return[this.Zo,this.Xo,this.Ko,this.$o]}Ma(){return new Float64Array(this.toArray())}wa(t,s){t[s++]=this.Zo,t[s++]=this.Xo,t[s++]=this.Ko,t[s]=this.$o}Sa(t,s){t[s++]=this.Zo,t[s++]=this.Xo,t[s]=this.Ko}equals(t){return this.Zo===t.Zo&&this.Xo===t.Xo&&this.Ko===t.Ko&&this.$o===t.$o}Ta(t){return this.Zo===t.Zo&&this.Xo===t.Xo&&this.Ko===t.Ko}ba(t,s,i){return this.Zo===t&&this.Xo===s&&this.Ko===i}xa(t,s,i,e){return this.Zo===t&&this.Xo===s&&this.Ko===i&&this.$o===e}Ca(t,s){return t[s]===Math.fround(this.Zo)&&t[s+1]===Math.fround(this.Xo)&&t[s+2]===Math.fround(this.Ko)&&t[s+3]===Math.fround(this.$o)}Ia(t,s){return t[s]===Math.fround(this.Zo)&&t[s+1]===Math.fround(this.Xo)&&t[s+2]===Math.fround(this.Ko)}multiply(t){this.Zo*=t.Zo,this.Xo*=t.Xo,this.Ko*=t.Ko,this.$o*=t.$o}Ga(t){this.Zo*=t,this.Xo*=t,this.Ko*=t,this.$o*=t}_a(){return this.Zo*=this.$o,this.Xo*=this.$o,this.Ko*=this.$o,this}Ea(){return this.Zo/=this.$o,this.Xo/=this.$o,this.Ko/=this.$o,this}Tr(){return this.Zo=l.Tr(this.Zo,0,1),this.Xo=l.Tr(this.Xo,0,1),this.Ko=l.Tr(this.Ko,0,1),this.$o=l.Tr(this.$o,0,1),this}Aa(t){this.Zo=l.Kr(t),this.Xo=l.$r(t),this.Ko=l.tn(t),this.$o=l.sn(t)}Da(t,s,i){const e=l.pe(t)?t:this.fa(),h=l.pe(s)?s:this.ma(),r=l.pe(i)?i:this.ga();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Na(t,s,i,e){const h=l.pe(t)?t:this.fa(),r=l.pe(s)?s:this.ma(),n=l.pe(i)?i:this.ga(),o=l.pe(e)?e:this.ya();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}La(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ma()),i=Math.round(255*this.ga());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Oa(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.na(s),isFinite(i)&&this.oa(i),isFinite(e)&&this.aa(e),this.ua(1),!0}Ra(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ma()),i=Math.round(255*this.ga());return t+`, ${s}, `+i}Pa(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ma()),i=Math.round(255*this.ga());return[t,s,i]}ka(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.na(i),isFinite(e)&&this.oa(e),isFinite(h)&&this.aa(h),this.ua(1),!0}Fa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.na(i),isFinite(e)&&this.oa(e),isFinite(h)&&this.aa(h),this.ua(1),!0}ja(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.na(i),isFinite(e)&&this.oa(e),isFinite(h)&&this.aa(h),isFinite(r)&&this.ua(r),!0}Ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.na(i),isFinite(e)&&this.oa(e),isFinite(h)&&this.aa(h),isFinite(r)&&this.ua(r),!0}za(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Fa(t):this.ka(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ba(t):this.ja(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ua(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Fa(t):4===s.length&&this.Ba(t):3===s.length?this.ka(t):4===s.length&&this.ja(t)}}return this.Oa(t)}toJSON(){return[this.Zo,this.Xo,this.Ko,this.$o]}Wa(t,s,i,e){let h,r,n;if(t%=360,s=l.Tr(s,0,100),i=l.Tr(i,0,100),e=l.Tr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),r=u(a,o,t),n=u(a,o,t-1/3)}return this.na(h),this.oa(r),this.aa(n),this.ua(e),this}Ua(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Gt.exec(s),e=_t.exec(s);return i&&4===i.length?(this.Wa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Wa(+i[1],+i[2],+i[3],+i[4]),0))}Qa(){const t=this.Zo,s=this.Xo,i=this.Ko,e=this.$o,h=l.qo.Ja(t,s,i),r=l.qo.Va(t,s,i),n=l.qo.Ya(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Ha(){const t=this.Zo,s=this.Xo,i=this.Ko;return[l.qo.Ja(t,s,i),l.qo.Va(t,s,i),l.qo.Ya(t,s,i),this.$o]}qa(t){!Array.isArray(t)||t.length<3||(this.Zo=t[0],this.Xo=t[1],this.Ko=t[2],this.$o=4<=t.length?t[3]:1)}set r(t){this.na(t)}get r(){return this.fa()}set Za(t){this.oa(t)}get Za(){return this.ma()}set b(t){this.aa(t)}get b(){return this.ga()}set a(t){this.ua(t)}get a(){return this.ya()}Xa(t,s){switch(t){case 0:this.na(s);break;case 1:this.oa(s);break;case 2:this.aa(s);break;case 3:this.ua(s);break;default:throw new RangeError("invalid color index")}}Ka(t){switch(t){case 0:return this.fa();case 1:return this.ma();case 2:return this.ga();case 3:return this.ya();default:throw new RangeError("invalid color index")}}static $a(t,s){let i,e;if(Array.isArray(t))(i=new l.qo).qa(t);else{if(!(t instanceof l.qo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.qo).qa(s);else{if(!(s instanceof l.qo))throw new Error("unexpected type");e=s}return i.equals(e)}static tu(t,s){return l.Tr(Math.max(t,s)-Math.min(t,s),0,1)}static su(t,s){const i=new l.qo;return i.na(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.ua(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),i}static iu(t,s){const i=new l.qo(0,0,0,1);return i.na(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.oa(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i}static Ja(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Va(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Ya(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},l.qo.eu=Object.freeze(l.pr(l.qo,1,1,1,1)),l.qo.hu=Object.freeze(l.pr(l.qo,0,0,0,1)),l.qo.ru=Object.freeze(l.pr(l.qo,0,0,0,0))}{const Et=self.ks;Et.nu=class{constructor(t,s){this.ou=0,this.au=0,t instanceof Et.nu?this.I(t):this.set(t||0,s||0)}set(t,s){this.ou=+t,this.au=+s}I(t){this.ou=t.ou,this.au=t.au}equals(t){return this.ou===t.ou&&this.au===t.au}uu(t,s){return this.ou===t&&this.au===s}Ca(t,s){return t[s]===Math.fround(this.ou)&&t[s+1]===Math.fround(this.au)}lu(t){this.ou=+t}cu(){return this.ou}fu(t){this.au=+t}du(){return this.au}toArray(){return[this.ou,this.au]}Ma(){return new Float64Array(this.toArray())}wa(t,s){t[s++]=this.ou,t[s]=this.au}offset(t,s){this.ou+=+t,this.au+=+s}scale(t,s){this.ou*=t,this.au*=s}It(t,s){this.ou/=t,this.au/=s}round(){this.ou=Math.round(this.ou),this.au=Math.round(this.au)}floor(){this.ou=Math.floor(this.ou),this.au=Math.floor(this.au)}ceil(){this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au)}angle(){return Et.Ar(0,0,this.ou,this.au)}pu(){return this.ou*this.ou+this.au*this.au}length(){return Et.Ir(this.ou,this.au)}mu(t,s){const i=this.ou*s-this.au*t;this.au=this.au*s+this.ou*t,this.ou=i}rotate(t){0!==t&&this.mu(Math.sin(t),Math.cos(t))}gu(t,s,i){0===t||s===this.ou&&i===this.au||(this.ou-=s,this.au-=i,this.mu(Math.sin(t),Math.cos(t)),this.ou+=+s,this.au+=+i)}move(t,s){0!==s&&(this.ou+=Math.cos(t)*s,this.au+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.ou/=t,this.au/=t)}Tr(t,s){this.ou=Et.Tr(this.ou,t,s),this.au=Et.Tr(this.au,t,s)}Nt(t){return this.ou*t.ou+this.au*t.au}reverse(){this.ou=-this.ou,this.au=-this.au}yu(){let t=this.ou;return this.ou=this.au,this.au=-t,this}}}{const At=self.ks;At.Rect=class{constructor(t,s,i,e){this.Mu=NaN,this.wu=NaN,this.Su=NaN,this.Tu=NaN,this.Mu=0,this.wu=0,this.Su=0,this.Tu=0,t instanceof At.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Mu=+t,this.wu=+s,this.Su=+i,this.Tu=+e}bu(t,s,i,e){s=+s,this.Mu=t=+t,this.wu=s,this.Su=t+ +i,this.Tu=s+ +e}I(t){this.Mu=+t.Mu,this.wu=+t.wu,this.Su=+t.Su,this.Tu=+t.Tu}clone(){return new At.Rect(this.Mu,this.wu,this.Su,this.Tu)}static xu(t,s){const i=new At.Rect;return i.vu(Math.min(t.Mu,s.Mu)),i.Cu(Math.min(t.wu,s.wu)),i.Iu(Math.max(t.Su,s.Su)),i.Gu(Math.max(t.Tu,s.Tu)),i}static _u(t){return new At.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Mu===t.Mu&&this.wu===t.wu&&this.Su===t.Su&&this.Tu===t.Tu}Eu(t,s,i,e){return this.Mu===t&&this.wu===s&&this.width()===i&&this.height()===e}Ca(t,s){return t[s]===Math.fround(this.Mu)&&t[s+1]===Math.fround(this.wu)&&t[s+2]===Math.fround(this.Su)&&t[s+3]===Math.fround(this.Tu)}vu(t){this.Mu=+t}Au(){return this.Mu}Cu(t){this.wu=+t}Du(){return this.wu}Iu(t){this.Su=+t}Nu(){return this.Su}Gu(t){this.Tu=+t}Lu(){return this.Tu}toArray(){return[this.Mu,this.wu,this.Su,this.Tu]}Ma(){return new Float64Array(this.toArray())}Ou(){return new DOMRect(this.Mu,this.wu,this.width(),this.height())}static Ru(t){return At.pr(At.Rect,t.left,t.top,t.right,t.bottom)}wa(t,s){t[s++]=this.Mu,t[s++]=this.wu,t[s++]=this.Su,t[s]=this.Tu}Pu(t,s){t[s++]=this.Mu,t[s++]=this.wu,t[s++]=this.Su,t[s++]=this.wu,t[s++]=this.Su,t[s++]=this.Tu,t[s++]=this.Mu,t[s]=this.Tu}ku(t,s,i){t[s++]=this.Mu,t[s++]=this.wu,t[s++]=i,t[s++]=this.Su,t[s++]=this.wu,t[s++]=i,t[s++]=this.Su,t[s++]=this.Tu,t[s++]=i,t[s++]=this.Mu,t[s++]=this.Tu,t[s]=i}width(){return this.Su-this.Mu}height(){return this.Tu-this.wu}Fu(){return(this.Mu+this.Su)/2}ju(){return(this.wu+this.Tu)/2}offset(t,s){s=+s,this.Mu+=t=+t,this.wu+=s,this.Su+=t,this.Tu+=s}offsetLeft(t){this.Mu+=+t}offsetTop(t){this.wu+=+t}Bu(t){this.Su+=+t}zu(t){this.Tu+=+t}Uu(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.wu<this.Tu?this.Mu<this.Su?this.Tu=this.wu+this.width():this.Tu=this.wu-this.width():this.Mu<this.Su?this.Tu=this.wu-this.width():this.Tu=this.wu+this.width()}Wu(t,s){s=+s,this.Mu-=t=+t,this.wu-=s,this.Su+=t,this.Tu+=s}Qu(t,s){s=+s,this.Mu+=t=+t,this.wu+=s,this.Su-=t,this.Tu-=s}multiply(t,s){this.Mu*=t,this.wu*=s,this.Su*=t,this.Tu*=s}It(t,s){this.Mu/=t,this.wu/=s,this.Su/=t,this.Tu/=s}Ju(t){this.Mu=+t-this.Mu,this.Su=+t-this.Su}Vu(t){this.wu=+t-this.wu,this.Tu=+t-this.Tu}Yu(t,s){const i=this.width(),e=this.height(),h=this.Au()+i*t,r=this.Du()+e*s;this.bu(h-e*s,r-i*t,e,i)}Hu(){const t=this.Mu;this.Mu=this.Su,this.Su=t}qu(){const t=this.wu;this.wu=this.Tu,this.Tu=t}Zu(t){const s=this.wu;this.wu=+t-this.Tu,this.Tu=+t-s}round(){this.Mu=Math.round(this.Mu),this.wu=Math.round(this.wu),this.Su=Math.round(this.Su),this.Tu=Math.round(this.Tu)}Xu(){this.Mu=Math.ceil(this.Mu),this.wu=Math.ceil(this.wu),this.Su=Math.floor(this.Su),this.Tu=Math.floor(this.Tu)}Ku(){this.Mu=Math.floor(this.Mu),this.wu=Math.floor(this.wu),this.Su=Math.ceil(this.Su),this.Tu=Math.ceil(this.Tu)}floor(){this.Mu=Math.floor(this.Mu),this.wu=Math.floor(this.wu),this.Su=Math.floor(this.Su),this.Tu=Math.floor(this.Tu)}ceil(){this.Mu=Math.ceil(this.Mu),this.wu=Math.ceil(this.wu),this.Su=Math.ceil(this.Su),this.Tu=Math.ceil(this.Tu)}Tr(t,s,i,e){this.Mu=Math.max(this.Mu,+t),this.wu=Math.max(this.wu,+s),this.Su=Math.min(this.Su,+i),this.Tu=Math.min(this.Tu,+e)}$u(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Mu=At.Tr(this.Mu,t,i),this.wu=At.Tr(this.wu,s,e),this.Su=At.Tr(this.Su,t,i),this.Tu=At.Tr(this.Tu,s,e)}normalize(){this.Mu>this.Su&&this.Hu(),this.wu>this.Tu&&this.qu()}tl(t){return!(t.Su<this.Mu||t.Tu<this.wu||t.Mu>this.Su||t.wu>this.Tu)}sl(t,s,i){return!(t.Su+s<this.Mu||t.Tu+i<this.wu||t.Mu+s>this.Su||t.wu+i>this.Tu)}il(t,s){return t>=this.Mu&&t<=this.Su&&s>=this.wu&&s<=this.Tu}el(t){return t.Mu>=this.Mu&&t.wu>=this.wu&&t.Su<=this.Su&&t.Tu<=this.Tu}hl(t){t.Mu<this.Mu&&(this.Mu=+t.Mu),t.wu<this.wu&&(this.wu=+t.wu),t.Su>this.Su&&(this.Su=+t.Su),t.Tu>this.Tu&&(this.Tu=+t.Tu)}rl(t){this.Mu=At.Ot(t.Mu,t.Su,this.Mu),this.wu=At.Ot(t.wu,t.Tu,this.wu),this.Su=At.Ot(t.Mu,t.Su,this.Su),this.Tu=At.Ot(t.wu,t.Tu,this.Tu)}}}{const Dt=self.ks;Dt.nl=class{constructor(t,s,i,e,h,r,n,o){this.ol=NaN,this.al=NaN,this.ul=NaN,this.ll=NaN,this.cl=NaN,this.fl=NaN,this.dl=NaN,this.pl=NaN,this.ol=0,this.al=0,this.ul=0,this.ll=0,this.cl=0,this.fl=0,this.dl=0,this.pl=0,t instanceof Dt.nl?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.ol=+t,this.al=+s,this.ul=+i,this.ll=+e,this.cl=+h,this.fl=+r,this.dl=+n,this.pl=+o}ml(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.ol=t.ol,this.al=t.al,this.ul=t.ul,this.ll=t.ll,this.cl=t.cl,this.fl=t.fl,this.dl=t.dl,this.pl=t.pl}equals(t){return this.ol===t.ol&&this.al===t.al&&this.ul===t.ul&&this.ll===t.ll&&this.cl===t.cl&&this.fl===t.fl&&this.dl===t.dl&&this.pl===t.pl}gl(t){this.ol=+t}ln(){return this.ol}yl(t){this.al=+t}cn(){return this.al}Ml(t){this.ul=+t}dn(){return this.ul}wl(t){this.ll=+t}pn(){return this.ll}Sl(t){this.cl=+t}mn(){return this.cl}Tl(t){this.fl=+t}gn(){return this.fl}bl(t){this.dl=+t}yn(){return this.dl}xl(t){this.pl=+t}Mn(){return this.pl}vl(){return new DOMQuad(new DOMPoint(this.ol,this.al),new DOMPoint(this.ul,this.ll),new DOMPoint(this.cl,this.fl),new DOMPoint(this.dl,this.pl))}static Cl(t){return Dt.pr(Dt.nl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.ol,this.al,this.ul,this.ll,this.cl,this.fl,this.dl,this.pl]}Ma(){return new Float64Array(this.toArray())}wa(t,s){t[s++]=this.ol,t[s++]=this.al,t[s++]=this.ul,t[s++]=this.ll,t[s++]=this.cl,t[s++]=this.fl,t[s++]=this.dl,t[s]=this.pl}Il(t,s,i){t[s++]=this.ol,t[s++]=this.al,t[s++]=i,t[s++]=this.ul,t[s++]=this.ll,t[s++]=i,t[s++]=this.cl,t[s++]=this.fl,t[s++]=i,t[s++]=this.dl,t[s++]=this.pl,t[s]=i}offset(t,s){s=+s,this.ol+=t=+t,this.al+=s,this.ul+=t,this.ll+=s,this.cl+=t,this.fl+=s,this.dl+=t,this.pl+=s}round(){this.ol=Math.round(this.ol),this.al=Math.round(this.al),this.ul=Math.round(this.ul),this.ll=Math.round(this.ll),this.cl=Math.round(this.cl),this.fl=Math.round(this.fl),this.dl=Math.round(this.dl),this.pl=Math.round(this.pl)}floor(){this.ol=Math.floor(this.ol),this.al=Math.floor(this.al),this.ul=Math.floor(this.ul),this.ll=Math.floor(this.ll),this.cl=Math.floor(this.cl),this.fl=Math.floor(this.fl),this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl)}ceil(){this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al),this.ul=Math.ceil(this.ul),this.ll=Math.ceil(this.ll),this.cl=Math.ceil(this.cl),this.fl=Math.ceil(this.fl),this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl)}Gl(t){this.ol=t.Mu,this.al=t.wu,this.ul=t.Su,this.ll=t.wu,this.cl=t.Su,this.fl=t.Tu,this.dl=t.Mu,this.pl=t.Tu}_l(t,s){0===s?this.Gl(t):this.El(t,Math.sin(s),Math.cos(s))}El(t,s,i){const e=t.Mu*s,h=t.wu*s,r=t.Su*s,n=t.Tu*s,o=t.Mu*i,a=t.wu*i,u=t.Su*i,l=t.Tu*i;this.ol=o-h,this.al=a+e,this.ul=u-h,this.ll=a+r,this.cl=u-n,this.fl=l+r,this.dl=o-n,this.pl=l+e}Al(t){t.set(Math.min(this.ol,this.ul,this.cl,this.dl),Math.min(this.al,this.ll,this.fl,this.pl),Math.max(this.ol,this.ul,this.cl,this.dl),Math.max(this.al,this.ll,this.fl,this.pl))}il(t,s){let i=this.ul-this.ol,e=this.ll-this.al,h=this.cl-this.ol,r=this.fl-this.al,n=t-this.ol,o=s-this.al,a=i*i+e*e,u=i*h+e*r,l=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.dl-this.ol)*i+(e=this.pl-this.al)*e)*f-(u=i*h+e*r)*(l=i*n+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}Fu(){return(this.ol+this.ul+this.cl+this.dl)/4}ju(){return(this.al+this.ll+this.fl+this.pl)/4}Dl(t,s,i,e){return!(!this.il(t,s)&&!this.il(i,e))||Dt.un(t,s,i,e,this)}Nl(t){let s=t.Fu(),i=t.ju();if(this.il(s,i))return!0;if(s=this.Fu(),i=this.ju(),t.il(s,i))return!0;const e=this.ol,h=this.al,r=this.ul,n=this.ll,o=this.cl,a=this.fl,u=this.dl,l=this.pl;return Dt.un(e,h,r,n,t)||Dt.un(r,n,o,a,t)||Dt.un(o,a,u,l,t)||Dt.un(u,l,e,h,t)}Ll(){const t=this.ol,s=this.al;this.ol=this.ul,this.al=this.ll,this.ul=this.cl,this.ll=this.fl,this.cl=this.dl,this.fl=this.pl,this.dl=t,this.pl=s}Ol(){this.Rl(0,2),this.Rl(1,3),this.Rl(6,4),this.Rl(7,5)}Pl(){this.Rl(0,6),this.Rl(1,7),this.Rl(2,4),this.Rl(3,5)}kl(){this.Rl(2,6),this.Rl(3,7)}Rl(t,s){const i=this.Fl(t);this.jl(t,this.Fl(s)),this.jl(s,i)}Fl(t){switch(t){case 0:return this.ol;case 1:return this.al;case 2:return this.ul;case 3:return this.ll;case 4:return this.cl;case 5:return this.fl;case 6:return this.dl;case 7:return this.pl;default:throw new RangeError("invalid quad point index")}}jl(t,s){switch(s=+s,t){case 0:this.ol=s;break;case 1:this.al=s;break;case 2:this.ul=s;break;case 3:this.ll=s;break;case 4:this.cl=s;break;case 5:this.fl=s;break;case 6:this.dl=s;break;case 7:this.pl=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Nt=self.ks,Lt=[0,0,1,0,1,1,0,1],Ot=Nt.pr(Nt.nl);Nt.Bl=class extends Nt.lr{constructor(t,s=!0){super(),t=t||Lt,this.zl=Float64Array.from(t),this.Ul=new Nt.Rect,this.Wl=!0,this.Ql=s}mr(){}Jl(){return this.zl}Vl(){return this.zl.length/2}Yl(t){this.zl.length===t.length?this.zl.set(t):this.zl=Float64Array.from(t),this.Wl=!0}Hl(){this.Yl(Lt)}I(t){this.Yl(t.zl)}ql(){this.Wl=!0}Zl(){if(this.Wl){let i=this.zl,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Ul.set(e,h,r,n),this.Wl=!1}}Gl(t,s,i){let e=this.zl;8!==e.length&&(e=new Float64Array(8),this.zl=e),e[0]=t.Au()-s,e[1]=t.Du()-i,e[2]=t.Nu()-s,e[3]=t.Du()-i,e[4]=t.Nu()-s,e[5]=t.Lu()-i,e[6]=t.Au()-s,e[7]=t.Lu()-i,this.Ul.I(t),0===s&&0===i||this.Ul.offset(-s,-i),this.Wl=!1}Xl(t,s,i){Ot.I(t),Ot.offset(s,i),this.Yl(Ot.toArray()),this.Wl=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Kl(t,s,e,h)}Kl(i,e,h,r){const n=this.zl;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,u=n[o]*e;n[t]=a*r-u*h,n[o]=u*r+a*h}this.Wl=!0}offset(i,e){const h=this.zl;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}il(i,e){const h=this.zl;if(i===h[0]&&e===h[1])return!0;this.Zl();let t=this.Ul,r=t.Au()-110,n=t.Du()-101,o=t.Nu()+131,a=t.Lu()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=n<e?(l=n,e):(l=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],x=h[1+w];Nt.an(r,n,i,e,u,c,l,f,S,T,b,x)&&++y,Nt.an(o,a,i,e,d,m,p,g,S,T,b,x)&&++M}return y%2==1||M%2==1}$l(t,c,f){const d=t.zl,p=this.zl;if(this.il(d[0]+c,d[1]+f))return!0;if(t.il(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,u;a=i<h?(n=i,h):(n=h,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(Nt.an(i,e,h,r,n,a,o,u,g,y,M,w))return!0}}return!1}Dl(i,e,h,r,n,o){if(this.il(h-i,r-e))return!0;if(this.il(n-i,o-e))return!0;let a=0,u=0,l,c;l=h<n?(a=h,n):(a=n,h),c=r<o?(u=r,o):(u=o,r);const f=this.zl;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Nt.an(h,r,n,o,a,l,u,c,p,m,g,y))return!0}return!1}Ol(i){const e=this.zl;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Wl=!0}Pl(i){const e=this.zl;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Wl=!0}kl(){const i=this.zl;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Wl=!0}tc(){let i=this.zl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Vl()}sc(){let i=this.zl,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Vl()}ic(){return this.zl}ec(){return this.Vl()}hc(){return this.Ql}}}{const Rt=self.ks;Rt.rc=class extends Rt.lr{constructor(t){if(super(),this.nc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}mr(){this.oc(),this.nc=null}ac(){return 0===this.nc.size}oc(){const t=this.nc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.nc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}si(t,s){const i=this.nc.get(t);return i&&i.get(s)}ti(t,s){const i=this.nc.get(t);return!!i&&i.has(s)}uc(t,s){const i=this.nc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}lc(t){const s=this.nc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}cc(){let t=0;for(const s of this.nc.values())t+=s.size;return t}*values(){for(const t of this.nc.values())yield*t.values()}*fc(){for(const[t,s]of this.nc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.nc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Pt=self.ks;Pt.mc=class extends Pt.lr{constructor(){super(),this.yc=new Set,this.Mc=[],this.wc=!1}mr(){this.oc()}oc(){this.yc.clear(),Pt.Qn(this.Mc),this.wc=!1}Sc(t){this.yc.has(t)||(this.yc.add(t),this.wc)||this.Mc.push(t)}ti(t){return this.yc.has(t)}uc(t){this.yc.delete(t)&&(this.wc=!0)}cc(){return this.yc.size}ac(){return 0===this.yc.size}Tc(){return this.wc&&(this.xc(),this.wc=!1),this.Mc}xc(){const t=this.Mc;Pt.Qn(t);for(const s of this.yc)t.push(s)}}}{const kt=self.ks,Ft=new Map,jt=new Map,Bt=new Map,zt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Vt=new Map,Yt=(Vt.set("linear","noease"),Vt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.vc=class hs{constructor(){}static Cc(){return"default"}static Ic(){return"noease"}static Gc(t){return qt.get(t)}static _c(s,...i){this.Ec();let t,e=(s?(Bt.has(s)||Bt.set(s,new Map),[...(t=Bt.get(s)).keys()].filter(t=>!hs.Ac(t,s)||hs.Ac(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static Dc(){this.Ec();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static Nc(){this.Ec();const t=[...Ut.keys()];return t.sort(),t}static Lc(t){for(const s of Yt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Oc(t){return this.Ec(),[...jt.keys()].includes(t)}static Rc(t){const s=Vt.get(t);return s?Ft.get(s):hs.Oc(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static Pc(t){return this.Ec(),Jt.get(t)}static kc(t,s){this.Ec();const i=hs.Rc(t);if(i)return i;if(s)return Bt.get(s).get(t);throw new Error("missing ease function")}static Ac(t,s){this.Ec();const i=zt.get(s);if(i)return i.get(t)}static Fc(t,s){this.Ec();const i=hs.Rc(t);return!!i||!!Bt.get(s).get(t)}static jc(t){this.Ec();const s=hs.Rc(t);return s||Ut.get(t)}static Bc(t){return this.Ec(),Wt.get(t)}static zc(t){this.Ec();const s=this.Dc();return s[t]}static Uc(t,s){this.Ec();const i=this._c(s);return i.indexOf(t)}static Wc(t){return this.Uc(t)}static Ec(){0===Ft.size&&(this.Qc("default",()=>{}),this.Qc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Qc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Qc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Qc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Qc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Qc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Qc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Qc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Qc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Qc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Qc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Qc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Qc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Qc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Qc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Qc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Qc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Qc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Qc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Qc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Qc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Qc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Qc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Jc("cubicbezier",this.Vc),this.Jc("spline",this.Yc))}static Qc(t,s,i=!1){if("function"==typeof s)hs.Hc(t,s,"predefined");else{if(!kt.je(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.pr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Hc(t,(t,s,i,e)=>h.qc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const r=kt.pr(kt.Zc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Xc(i),hs.Hc(t,(t,s,i,e)=>r.qc(t,s,i,e),"predefined")}}}static Jc(t,s){hs.Hc(t,s,"private")}static Kc(t,s,i,e){this.Ec(),hs.Hc(t,s,"custom",i,e)}static $c(t,s){if(!this.Oc(t)&&![...Qt.keys()].includes(t)){const i=Bt.get(s),e=(i&&i.delete(t),zt.get(s));e&&e.delete(t)}}static Hc(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){Bt.has(e)||Bt.set(e,new Map),zt.has(e)||zt.set(e,new Map);const r=Bt.get(e),n=(r.set(t,s),zt.get(e));n.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static tf(t,s,i,e){return 0===e?s:i*t/e+s}static Vc(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static Yc(t,s,i,e,h,r,n,o,a,u){if(e===h&&r===n)return t;const l=es(t,s,e,r,o,u),c=Kt(i,h,n,a),f=$t(i,h,n,a),d=ts(i,h,n,a);return ss(l,c,f,d)}static if(t,s,i,e){const h=[],r=Kt(t,s,i,e),n=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,r,n,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],u=Zt-1;for(Zt;r!=u&&a<=n;)r++,a=h[r],o+=Xt;r--;let l=(n-(a=h[r]))/(h[r+1]-a),c=o+l*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.ve(t)};o;const rs=self.ks;rs.ef=class{constructor(t){this.hf=[],this.Mr=t||"",this.rf=0}mr(){this.oc(),this.hf=null}nf(){return this.Mr}oc(){rs.Jn(this.hf),this.rf=0}uf(){return this.rf}lf(t=Math.random()*this.uf()){let s=0;for(const[i,e]of this.hf)if(t<(s+=i))return e;return 0}cf(t,s){o(s),this.rf+=t,this.hf.push([t,s])}ff(s,i){o(i);const e=0===s;for(let t=0;t<this.hf.length;t++){const h=this.hf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.hf.splice(t,1),this.rf-=h[0];break}}}df(){return JSON.stringify(this.hf)}static pf(t,s){const i=new rs.ef(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.cf(r,n)}return i}}}{let t=self.ks,i=0;t.mf=class{constructor(t,s){this.gf=t,this.yf=s,this.Mf=i++,this.gf.wf("runtime","screen-reader-text",{type:"create",id:this.Mf,text:this.yf})}mr(){this.gf.wf("runtime","screen-reader-text",{type:"release",id:this.Mf}),this.gf=null,this.yf="",this.Mf=-1}Sf(t){this.yf!==t&&(this.yf=t,this.gf.wf("runtime","screen-reader-text",{type:"update",id:this.Mf,text:this.yf}))}}}{const ns=self.ks;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Tf=!1,this.bf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.bf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Tf=!0}}}{const os=self.ks;os.Event.xf=class extends os.lr{constructor(t){super(),this.vf=t,this.Cf=[],this.If=new Set,this.Gf=[],this._f=new Set,this.Ef=0,this.Af=[]}mr(){0<this.Ef||(os.Qn(this.Cf),this.If.clear(),os.Qn(this.Gf),this._f.clear(),os.Qn(this.Af),os.mr(this))}Df(t,s){this.Nf()?this.Af.push({Lf:"add",Of:t,capture:s}):s?this.If.has(t)||(this.Cf.push(t),this.If.add(t)):this._f.has(t)||(this.Gf.push(t),this._f.add(t))}Rf(t,s){this.Nf()?this.Af.push({Lf:"remove",Of:t,capture:s}):s?this.If.has(t)&&(this.If.delete(t),os.Zn(this.Cf,t)):this._f.has(t)&&(this._f.delete(t),os.Zn(this.Gf,t))}Pf(){return!this.Cf.length&&!this.Gf.length}Nf(){return 0<this.Ef}kf(){const t=new Set,s=new Set;for(const i of this.Af)if("add"===i.Lf)this.Df(i.Of,i.capture),(i.capture?s:t).delete(i.Of);else{if("remove"!==i.Lf)throw new Error("invalid op");(i.capture?(this.If.delete(i.Of),s):(this._f.delete(i.Of),t)).add(i.Of)}os.$n(this.Gf,t),os.$n(this.Cf,s),os.Qn(this.Af)}Ff(i){this.jf();let e=!1;for(let t=0,s=this.Cf.length;t<s;++t)if(this.Cf[t](i),i.Tf){e=!0;break}if(!e)for(let t=0,s=this.Gf.length;t<s&&(this.Gf[t](i),!i.Tf);++t);return this.Bf(),!i.defaultPrevented}zf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t)this.Cf[t](i);for(let t=0,s=this.Gf.length;t<s;++t)this.Gf[t](i);return this.Bf(),!0}jf(){this.Ef++}Bf(){this.Ef--,0===this.Ef&&0<this.Af.length&&this.kf()}Uf(t){t?this.jf():this.Bf()}Wf(i){let e=[];for(let s=0,t=this.Cf.length;s<t;++s){let t=this.Cf[s];e.push(os.Qf(()=>t(i)))}for(let s=0,t=this.Gf.length;s<t;++s){let t=this.Gf[s];e.push(os.Qf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Jf(i){const e=[];this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const h=this.Cf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Gf.length;t<s;++t){const r=this.Gf[t](i);r instanceof Promise&&e.push(r)}return this.Bf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Vf(t){return this.Jf(t)}async Yf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const e=this.Cf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Gf.length;t<s;++t){const h=this.Gf[t](i);h instanceof Promise&&await h}return this.Bf(),!i.defaultPrevented}*Hf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const e=this.Cf[t](i);os.Yo(e)&&(yield*e)}for(let t=0,s=this.Gf.length;t<s;++t){const h=this.Gf[t](i);os.Yo(h)&&(yield*h)}this.Bf()}}}{const as=self.ks;as.Event.qf=class extends as.lr{constructor(){super(),this.Zf=new Map,this.Xf=!1}mr(){if(this.Xf)throw new Error("already released");this.Kf(),this.Xf=!0,as.mr(this)}gr(){return this.Xf}Kf(){if(this.Zf){for(let t of this.Zf.values())t.mr();this.Zf.clear()}}$f(t,s){let i=this.Zf.get(t);return i||(s?(i=as.pr(as.Event.xf,t),this.Zf.set(t,i),i):null)}t0(t){return this.Zf.has(t)}addEventListener(t,s,i){let e=this.$f(t,!0);e.Df(s,!!i)}removeEventListener(t,s,i){let e=this.$f(t,!1);e&&(e.Rf(s,!!i),e.Pf())&&this.Zf.delete(t)}dispatchEvent(t){const s=this.$f(t.type,!1);return!s||(t.cancelable?s.Ff(t):s.zf(t))}s0(t){const s=this.$f(t.type,!1);return s?(t.bf=!0,s.Wf(t)):Promise.resolve(!0)}async i0(t){const s=this.$f(t.type,!1);if(!s)return!0;this.Zf.delete(t.type),t.bf=!0;const i=await s.Wf(t);return s.mr(),i}async e0(t){const s=this.$f(t.type,!1);return!s||s.Vf(t)}h0(t){const s=this.$f(t.type,!1);return!s||s.Jf(t)}async r0(t){const s=this.$f(t.type,!1);return!s||s.Yf(t)}n0(t){const s=this.$f(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Hf(t)}Uf(t){for(const s of this.Zf.values())s.Uf(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;n(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Of()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.ks),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.ri.ti("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Qf=function(i){let e=null;return t.isDebug&&(e=t.fe()),new Promise((t,s)=>{l.push({Of:i,resolve:t,reject:s,stack:e}),h?n(l.pop()):-1===c&&r(a)})},t.Qf.o0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.a0(i)){let t=s.u0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.ks),e=1e3,h=100,r=-1,n=(i.l0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.c0=class{constructor(t,s){this.f0=t,this.d0=1e3*s,this.p0=0,this.m0=!1}g0(){let t=i.l0();this.p0=t+this.d0,this.m0||(a.add(this),this.m0=!0),-1===n?(o=this.p0,n=self.setTimeout(s,this.d0+h)):this.p0<o&&o>t+e&&(self.clearTimeout(n),o=this.p0,n=self.setTimeout(s,this.d0+h))}a0(t){return!(t>=this.p0)||(this.f0()?(this.p0=t+this.d0,!0):this.m0=!1)}u0(){return this.p0}y0(){this.m0&&(a.delete(this),this.m0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}mr(){this.y0(),this.f0=null}}}{const us=self.ks;us.M0=class ls{constructor(t){this.w0=!1,this.S0=t}T0(){this.w0||(this.w0=!0,this.S0&&(this.S0(),this.S0=null))}b0(){return this.w0}mr(){this.T0()}static mr(t){return new ls(()=>t.mr())}static x0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.v0;for(let t of i)s.addEventListener(t,e,h),r.Sc(us.pr(us.M0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),us.pr(us.M0,()=>s.removeEventListener(i,e,h))}},us.C0=class extends us.M0{I0(t){this.S0=t}},us.v0=class extends us.M0{constructor(...s){super(),this.G0=new Set;for(let t of s)this.Sc(t)}Sc(...s){if(this.w0)throw new Error("already disposed");for(let t of s)this.G0.add(t)}_0(t){if(this.w0)throw new Error("already disposed");this.G0.delete(t)}E0(){if(this.w0)throw new Error("already disposed");if(this.G0){for(let t of this.G0)t.T0();this.G0.clear()}}b0(){return this.w0}T0(){if(this.w0)throw new Error("already disposed");this.w0=!0;for(let t of this.G0)t.T0();this.G0.clear(),this.G0=null}mr(){this.T0()}}}{const cs=self.ks;cs.A0=class extends cs.lr{constructor(){super(),this.D0=0,this.au=0,this.N0=0,this.L0=0}Sc(t){this.au=(t=+t)-this.D0,this.N0=this.L0+this.au,this.D0=this.N0-this.L0-this.au,this.L0=this.N0}O0(t){this.L0-=+t}si(){return this.L0}g0(){this.D0=0,this.au=0,this.N0=0,this.L0=0}Set(t){this.D0=0,this.au=0,this.N0=0,this.L0=+t}R0(t){this.D0=t.D0,this.au=t.au,this.N0=t.N0,this.L0=t.L0}mr(){}}}{const fs=self.ks,n={};n.P0=function(t){this.k0=t,this.right=this.k0.F0,this.left=this.k0.F0,this.parent=null,this.color=!1,this.key=null},n.j0=function(t){this.size=0,this.F0=new n.P0(this),this.F0.color=!1,this.root=this.F0,this.root.parent=this.F0,this.compare=t||this.B0},n.j0.prototype.B0=function(t,s){return t<s?-1:s<t?1:0},n.j0.prototype.clone=function(){var t=new n.j0(this.compare);return t.z0(this),t},n.j0.prototype.clear=function(){this.size=0,this.F0=new n.P0(this),this.F0.color=!1,this.root=this.F0,this.root.parent=this.F0},n.j0.prototype.U0=function(t){var s=t.right;t.right=s.left,s.left!=this.F0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.F0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.j0.prototype.W0=function(t){var s=t.left;t.left=s.right,s.right!=this.F0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.F0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.j0.prototype.Q0=function(t){if(this.contains(t))this.J0(t).key=t;else{for(var s=new n.P0(this),i=(s.key=t,this.F0),e=this.root;e!=this.F0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.F0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.F0,s.right=this.F0,s.color=!0,this.V0(s),this.size++}},n.j0.prototype.V0=function(t){for(;t!=this.F0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.U0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.F0&&this.W0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.W0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.F0&&this.U0(t.parent.parent))}this.root.color=!1},n.j0.prototype.Y0=function(t){var s=t.left==this.F0||t.right==this.F0?t:this.H0(t),i=s.left!=this.F0?s.left:s.right;i.parent=s.parent,s.parent==this.F0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.q0(i),this.size--},n.j0.prototype.q0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.U0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.W0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.U0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.W0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.U0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.W0(t.parent),this.root))}t.color=!1},n.j0.prototype.remove=function(t){var s;return(t=this.J0(t))!=this.F0?(s=t.key,this.Y0(t),s):null},n.j0.prototype.Z0=function(t,s){this.remove(s)},n.j0.prototype.min=function(t){for(;t.left!=this.F0;)t=t.left;return t},n.j0.prototype.max=function(t){for(;t.right!=this.F0;)t=t.right;return t},n.j0.prototype.H0=function(t){if(t.right!=this.F0)return this.min(t.right);for(var s=t.parent;s!=this.F0&&t==s.right;)s=(t=s).parent;return s},n.j0.prototype.X0=function(t){if(t.left!=this.F0)return this.max(t.left);for(var s=t.parent;s!=this.F0&&t==s.left;)s=(t=s).parent;return s},n.j0.prototype.K0=function(t){if(0<this.size){var s=this.J0(t);if(s==this.F0)return null;if(s.right!=this.F0)return this.min(s.right).key;for(var i=s.parent;i!=this.F0&&s==i.right;)i=(s=i).parent;return i!=this.F0?i.key:null}return null},n.j0.prototype.$0=function(t){if(0<this.size){var s=this.J0(t);if(s==this.F0)return null;if(s.left!=this.F0)return this.max(s.left).key;for(var i=s.parent;i!=this.F0&&s==i.left;)i=(s=i).parent;return i!=this.F0?i.key:null}return null},n.j0.prototype.t1=function(){return this.min(this.root).key},n.j0.prototype.s1=function(){return this.max(this.root).key},n.j0.prototype.J0=function(t){for(var s=this.root;s!=this.F0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.j0.prototype.contains=function(t){return null!=this.J0(t).key},n.j0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.j0.prototype.z0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.Q0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.Q0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.Q0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.Q0(t[e])},n.j0.prototype.i1=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.Z0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.j0.prototype.e1=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.j0.prototype.range=function(t,s){var i=[];return this.h1(function(t){i.push(t)},t,s),i},n.j0.prototype.n1=function(t,s){if(!this.o1())for(var i=this.min(this.root);i!=this.F0;){if(t.call(s,i.key,this))return;i=this.H0(i)}},n.j0.prototype.a1=function(t,s,i){if(!this.o1())for(var e=this.J0(s);e!=this.F0;){if(t.call(i,e.key,this))return;e=this.H0(e)}},n.j0.prototype.u1=function(t,s,i){if(!this.o1())for(var e=this.min(this.root),h=this.J0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.H0(e)}},n.j0.prototype.h1=function(t,s,i,e){if(!this.o1())for(var h=this.J0(s),r=this.J0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.H0(h)}},n.j0.prototype.l1=function(t,s){if(!this.o1())for(var i=this.max(this.root);i!=this.F0;){if(t.call(s,i.key,this))return;i=this.X0(i)}},n.j0.prototype.forEach=function(t,s){if(!this.o1())for(var i=this.min(this.root);i!=this.F0;i=this.H0(i))t.call(s,i.key,i.key,this)},n.j0.prototype.some=function(t,s){if(!this.o1())for(var i=this.min(this.root);i!=this.F0;i=this.H0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.j0.prototype.every=function(t,s){if(this.o1())return!1;for(var i=this.min(this.root);i!=this.F0;i=this.H0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.j0.prototype.map=function(t,s){var i=[];if(!this.o1())for(var e=this.min(this.root);e!=this.F0;e=this.H0(e))i.push(t.call(s,e.key,e.key,this));return i},n.j0.prototype.filter=function(t,s){var i=[];if(!this.o1())for(var e=this.min(this.root);e!=this.F0;e=this.H0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.j0.prototype.getCount=function(){return this.size},n.j0.prototype.o1=function(){return 0==this.size},n.j0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.o1())return!0;for(var e=this.min(this.root);e!=this.F0;e=this.H0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.j0.prototype.intersection=function(t){var s=new n.j0(this.compare);if(!this.o1())for(var i=this.min(this.root);i!=this.F0;i=this.H0(i))t.contains.call(t,i.key,i.key,this)&&s.Q0(i.key);return s},fs.j0=class extends fs.lr{constructor(t){super(),this.c1=new n.j0(t),this.f1=!1,this.d1=new Set,this.m1=new Set}Sc(t){this.f1?this.c1.contains(t)?this.m1.delete(t):this.d1.add(t):this.c1.Q0(t)}_0(t){this.f1?this.c1.contains(t)?this.m1.add(t):this.d1.delete(t):this.c1.remove(t)}ti(t){return this.f1?!!this.d1.has(t)||!this.m1.has(t)&&this.c1.contains(t):this.c1.contains(t)}oc(){this.c1.clear(),this.d1.clear(),this.m1.clear()}toArray(){if(this.f1)throw new Error("cannot be used in queueing mode");return this.c1.getValues()}cc(){return this.c1.getCount()+this.d1.size-this.m1.size}ac(){return 0===this.cc()}g1(){if(this.ac())throw new Error("empty set");if(this.f1)throw new Error("cannot be used in queueing mode");const t=this.c1,s=t.min(t.root);return s.key}M1(){if(this.ac())throw new Error("empty set");if(this.f1)throw new Error("cannot be used in queueing mode");const t=this.g1();return this._0(t),t}w1(t){if(this.f1!==(t=!!t)&&!(this.f1=t)){for(const s of this.m1)this.c1.remove(s);this.m1.clear();for(const i of this.d1)this.c1.Q0(i);this.d1.clear()}}S1(t){this.c1.forEach(t)}*values(){if(!this.ac()){const s=this.c1;for(let t=s.min(s.root);t!=s.F0;t=s.H0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.ks;ds.T1=class{constructor(t=ds.hardwareConcurrency){this.b1=t,this.v1=[],this.C1=0}Sc(i){return new Promise((t,s)=>{this.v1.push({Of:i,resolve:t,reject:s}),this.I1()})}G1(i){for(let t=0,s=this.v1.length;t<s;++t)if(this.v1[t].Of===i)return t;return-1}_1(t,s){const i=this.G1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.v1[i].resolve(s),this.v1.splice(i,1)}E1(t,s){const i=this.G1(t);if(-1===i)throw new Error("cannot find promise to reject");this.v1[i].reject(s),this.v1.splice(i,1)}async I1(){if(this.v1.length&&!(this.C1>=this.b1)){this.C1++;const s=this.v1.shift();try{const t=await s.Of();s.resolve(t)}catch(t){s.reject(t)}this.C1--,this.I1()}}static async A1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.ks;ps.D1=class{constructor(t,s,i){this.f0=t,this.N1=s,this.L1=i||2*s,this.O1=-1,this.R1=-1/0,this.P1=()=>this.F1(),this.j1=!1,this.B1=!1,this.z1=null}U1(t){this.B1=!!t}W1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.L1:this.N1}Q1(...e){if(-1===this.O1){this.z1=e;let t=ps.l0(),s=t-this.R1,i=this.W1();i<=s&&this.B1?(this.R1=t,this.J1()):this.O1=self.setTimeout(this.P1,Math.max(i-s,4))}}J1(){this.j1=!0;const t=this.z1;this.z1=null,t?this.f0(...t):this.f0(),this.j1=!1}g0(){this.j1||(this.V1(),this.z1=null,this.R1=ps.l0())}F1(){this.O1=-1,this.R1=ps.l0(),this.J1()}V1(){-1!==this.O1&&(self.clearTimeout(this.O1),this.O1=-1)}mr(){this.V1(),this.f0=null,this.z1=null,this.P1=null}}}{const ms=self.ks;ms.Y1=class{constructor(){this.H1=new Map,this.q1=!1,this.Z1=null,this.X1=null,this.K1=null,this.td=null}sd(t){this.q1=!!t}ed(){return this.q1}hd(t){this.Z1=t}rd(t){if(this.Z1)return this.Z1(t);throw new Error("no get base size callback set")}nd(t){this.X1=t}od(t,s,i,e,h,r){if(this.X1)return this.X1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}ad(t){this.K1=t}ud(t){if(!this.K1)throw new Error("no release result callback set");this.K1(t)}ld(t){this.td=t}fd(){if(!this.td)throw new Error("no redraw callback set");this.td()}dd(t){let s=this.H1.get(t);return s||(s=ms.pr(ms.md,this,t),this.H1.set(t,s)),s.gd(),s}yd(t){this.H1.delete(t.Md())}wd(){for(const t of this.H1.values())t.Sd(),t.Td()}}}{const gs=self.ks;gs.md=class{constructor(t,s){this.bd=t,this.xd=s,this.vd=0,this.Cd=0,this.Id=0,this.Gd=this.bd.rd(s).then(t=>{this.bd&&(this.Cd=t[0],this.Id=t[1],this.bd.fd())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this._d=!0,this.bd&&this.bd.fd()}),this.Ed=0,this.Ad=0,this.Dd=0,this.Nd=0,this.Ld=!1,this.Od=null,this.Rd=!1,this._d=!1}mr(){if(this.vd<=0)throw new Error("already released");this.vd--,0===this.vd&&this.Pd()}Sd(){this.Od&&(this.bd.ud(this.Od),this.Od=null)}Pd(){this.Sd(),this.bd.yd(this),this.bd=null}Md(){return this.xd}gd(){this.vd++}kd(){return 0<this.vd}Fd(){return this.Od}Td(){this.Rd=!0}async jd(e,h,r){if(0!==h&&0!==r&&!this._d&&!this.Ld){let t=gs.Qr(Math.ceil(h)),s=gs.Qr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.bd.ed()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.Ed&&s<=this.Ad)||this.Rd){this.Ld=!0,this.Ed=t,this.Ad=s;const u=await this.bd.od(this.xd,e,this.Ed,this.Ad,h,r);this.bd&&(this.Sd(),this.Od=u,this.Dd=h,this.Nd=r,this.Ld=!1,this.Rd=!1,this.bd.fd())}}}Bd(){return this.Gd}zd(){return this.Cd}Ud(){return this.Id}Wd(){return this.Dd}Qd(){return this.Nd}Jd(){return this._d}}}{let s=function(t){return Ss.get(t)};s;const c=self.ks,ys=(c.Vd="\ufeff",new Set("0123456789")),Ms=(c.Yd=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.Hd=function(t){return Ms.has(t)},c.qd=function(t){return[...t].filter(t=>!c.Hd(t)).join("")},c.Zd=function(t){for(const s of t)if(!c.Hd(s))return!1;return!0},c.Xd=function(t){for(const s of t)if(!c.Hd(s))return!1;return!0},c.Kd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.$d=function(t){return[...t].filter(t=>!c.Kd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.tp=function(t){return!c.Hd(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.sp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.ep=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Yd(t))break;--i}return s.substr(0,i)},c.hp=function(t){let s=c.ep(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.rp=function(t){return t.replace(Ts,s)},c.np=function(t){let s=c.op(t,"\\","\\\\");return s=c.op(s,'"','\\"'),s=c.op(s,"\t","\\t"),s=c.op(s,"\r",""),c.op(s,"\n","\\n")},c.up=function(t){let s=c.op(t,"&","&amp;");return s=c.op(s,"<","&lt;"),s=c.op(s,">","&gt;"),c.op(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.le=function(t){return t.replace(bs,"\\$&")},c.lp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.cp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.op=function(t,s,i){return t.replaceAll(s,()=>i)},c.fp=function(t,s,i){return t.replace(new RegExp(c.le(s),"gi"),()=>i)},c.pp=function(t,s){"string"==typeof s?t.textContent=s:s.mp()?t.textContent=s.toString():(t.innerHTML=s.gp(),s instanceof c.Nh&&s.yp(t))},c.Mp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Nh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Nh?s.equals(t):t===s},c.wp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Sp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Tp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.bp=function(t,s){return s<t?1:t<s?-1:0},c.xp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),vs=(c.vp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Cp=function*(t){for(const s of xs.segment(t))yield s.segment},c.Ip=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Cs=1024*vs,Is={Gp:!(c._p=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<vs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Cs){let t=s/vs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Ep:!0,Ap:!0,Dp:!0,Np:!0};c.Lp=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Ep){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.Ap){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Dp){const a=Math.floor(t/60);(0<a||i.length||!s.Np)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Np){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const r=(s.Gp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Op=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Rp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Pp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Yn(i,4,"0"),c.Yn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.kp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Fp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.jp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.op(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.ks),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f.Nh=class{constructor(t,s){if(this.Bp=s&&s.zp?t:f.rp(t),this.Up="",this.Wp=!1,this.Qp=[],this.Jp=[],s){if(this.Wp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Qp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Jp=s.tips}}this.Vp=this.Bp.includes("["),this.Yp=this.Wp&&this.Bp.includes("\n"),this.Hp=!this.Vp&&!this.Yp&&!this.Bp.includes("&"),this.qp=!1,this.Zp=[]}toString(){return this.Bp}valueOf(){return this.Bp}mp(){return this.Hp}Xp(){return this.Vp?this.Bp.replace(i,""):this.Bp}gp(){if(this.Hp)return this.Bp;if(!this.Up&&this.Bp){let t=this.Bp;this.Vp&&(l=0,a=this.Qp,u=this.Jp,t=t.replace(i,s),a=null,u=null),this.Yp&&(t=t.replace(e,"<br>")),this.Up=t}return this.Up}yp(i){if(this.Qp.length)for(let t=0,s=this.Qp.length;t<s;++t){const e=this.Qp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.gp()===t.gp():t instanceof f.Nh?this.Bp===t.Bp:this.Bp===t}Kp(){if(!this.qp){let e=[],t=this.Bp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+n.length,u&&e.push({text:u,$p:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,$p:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),$p:h.slice(0)});for(const c of e)c.text&&(c.text=this.im(c.text));this.Zp=e.map(t=>t.icon?f.pr(f.hm,{icon:t.icon,$p:t.$p}):f.pr(f.rm,{nm:f.vp(t.text),$p:t.$p})),this.qp=!0}return this.Zp}im(t){return t=f.op(t,"\\[","["),f.op(t,"\\\\","\\")}static om(t){return f.pr(f.Nh,t,{zp:!0}).Xp()}static am(t){return t.replace(p,"")}}}{let u=function(t){return""!==t&&""!==t&&M.Hd(t)},a=function(t){return Gs.has(t)},l=function(t){return M.tp(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.ks,Gs=new Set("");M.um=class{constructor(){this.lm=[],this.fm=null}dm(){return this.lm}pm(){return this.lm.length}gm(t){this.fm=t}ym(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Mm()){const a=s(o);o.wm(a.height),o.Sm(a.fontBoundingBoxAscent||0),o.Tm(a.fontBoundingBoxDescent||0),o.xm(a.vm||0),o.Cm()?o.Im(a.width):o.Gm()&&o._m(this.fm)}i+=o.Mm(),e=Math.max(e,o.Em()),h=Math.max(h,o.Am()),r=Math.max(r,o.Dm()),n=Math.max(n,o.Nm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,vm:n}}Lm(t,s,i,e,h,r){this.lm.push(M.pr(M.um.Om,{Rm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,vm:r}))}um(s,r,n,i,o){if("string"==typeof s&&(s=[M.pr(M.rm,{nm:M.vp(s)})]),M.Qn(this.lm),!(!s.length||1===s.length&&s[0].Cm()&&s[0].ac()||n<2)){if(1===s.length){const a=s[0];if(a.Cm()&&a.Pm()<=100&&!a.km()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,vm:h}=r(a);if(t+=o,a.Im(t),a.wm(s),a.Sm(i||0),a.Tm(e||0),a.xm(h||0),t<=n)return void this.Lm([a],t,s,i,e,h)}}let t;t="word"===i?this.Fm(s):"cjk"===i?this.jm(s):this.Bm(s),this.zm(t,r,n,o)}}Fm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Um();if(h.Gm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Wm())if(y(n))0<i.length&&s.push(i),s.push([M.pr(M.rm,{nm:["\n"],$p:r})]),i=[];else if(0===i.length)i.push(M.pr(M.rm,{nm:[n],$p:r})),e=u(n);else{const o=u(n);if(o===e){const a=i.at(-1);a.Um()===r?a.Qm(n):i.push(M.pr(M.rm,{nm:[n],$p:r}))}else s.push(i),i=[M.pr(M.rm,{nm:[n],$p:r})],e=o}}return 0<i.length&&s.push(i),s}jm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Um();if(h.Gm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Wm())if(y(n))0<i.length&&s.push(i),s.push([M.pr(M.rm,{nm:["\n"],$p:r})]),i=[];else{if(0===i.length)i.push(M.pr(M.rm,{nm:[n],$p:r}));else if(e||l(n)){const o=i.at(-1);o.Um()===r?o.Qm(n):i.push(M.pr(M.rm,{nm:[n],$p:r}))}else s.push(i),i=[M.pr(M.rm,{nm:[n],$p:r})];e=a(n)}}return 0<i.length&&s.push(i),s}Bm(t){const s=[];for(const i of t)if(i.Cm()){const e=i.Wm();M.Kh(s,e.map(t=>[M.pr(M.rm,{nm:[t],$p:i.Um()})]))}else s.push([i]);return s}Jm(t){return t.map(t=>t.Vm())}Ym(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Cm()&&i[0].Cm()&&i[0].Um()===t.Um()&&(t.Hm(i[0].Wm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Vm())}}zm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].Cm()&&1===l[0].Pm()&&y(l[0].Wm()[0])){if(0===n){const c=M.pr(M.rm,{nm:[" "],$p:l[0].Um()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.vm||0}this.Lm(h,r,n,o,a,u),h=[],r=0,n=0,o=0,a=0,u=0}else{const d=this.Jm(h),p=(this.Ym(d,l),this.ym(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Lm(h,r,n,o,a,u),h=[],l[0].Cm()&&M.Xd(l[0].Wm()))r=0,n=0,o=0,a=0,u=0;else{this.Ym(h,l);const g=this.ym(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.vm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.vm}0<h.length&&this.Lm(h,r,n,o,a,u),this.qm(s,e)}qm(s,i){for(const e of this.lm){const h=e.Zm();if(h.length){let t=h.at(-1);if(t.Cm()){const r=t.Wm(),n=r.slice(0);if(c(n),0===n.length)e.Xm(-t.Mm()),h.pop();else if(n.length<r.length){t.Km(n);const o=s(t).width,a=t.Mm()-o;t.Im(o),e.Xm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Xm(i),e.Xm(i))}}}}oc(){M.Qn(this.lm)}$m(){return this.lm.reduce((t,s)=>Math.max(t,s.Mm()),0)}tg(){return this.lm.reduce((t,s)=>t+s.Em(),0)}}}{const _s=self.ks;_s.um.Om=class{constructor(t){this.Zp=t.Rm||[],this.sg=t.width||-1,this.ig=t.height||-1,this.eg=t.fontBoundingBoxAscent||-1,this.hg=t.fontBoundingBoxDescent||-1,this.rg=t.vm||-1,this.ng=0,this.og=0}Rm(){return this.Zp.values()}*ag(){const s=this.Zp;for(let t=s.length-1;0<=t;--t)yield s[t]}Zm(){return this.Zp}Xm(t){this.sg+=t}Mm(){return this.sg}Em(){return this.ig}ug(){return this.eg}Dm(){return this.hg}Nm(){return this.rg}lg(t){this.ng=t}fg(){return this.ng}dg(t){this.og=t}pg(){return this.og}}}{const Es=self.ks;Es.mg=class{constructor(t){this.gg=t.$p||[],this.sg=t.width||-1,this.ig=t.height||-1,this.eg=t.fontBoundingBoxAscent||-1,this.hg=t.fontBoundingBoxDescent||-1,this.rg=t.vm||-1,this.ng=0,this.og=0}Cm(){return!1}Gm(){return!1}Um(){return this.gg}yg(s){const i=this.gg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Mg(t){return!!this.yg(t)}wg(){const t=new Map;for(const s of this.gg)t.set(s.tag,s.param);return t}Xm(t){this.sg+=t}Im(t){this.sg=t}Mm(){return this.sg}wm(t){this.ig=t}Em(){return this.ig}Sm(t){this.eg=t}Am(){return this.eg}Tm(t){this.hg=t}Dm(){return this.hg}xm(t){this.rg=t}Nm(){return this.rg}lg(t){this.ng=t}fg(){return this.ng}dg(t){this.og=t}pg(){return this.og}}}{const As=self.ks;As.rm=class extends As.mg{constructor(t){super(t),this.Sg=t.nm}Cm(){return!0}Hm(t){As.Kh(this.Sg,t),this.sg=-1,this.ig=-1,this.eg=-1,this.hg=-1,this.rg=-1}Qm(t){this.Sg.push(t)}Vm(){return As.pr(As.rm,{nm:this.Sg.slice(0),$p:this.gg,width:this.sg,height:this.ig,fontBoundingBoxAscent:this.eg,fontBoundingBoxDescent:this.hg,vm:this.rg})}Wm(){return this.Sg}Km(t){this.Sg=t}Pm(){return this.Sg.length}ac(){return 0===this.Sg.length}km(){return this.Sg.includes("\n")}}}{const Ds=self.ks;Ds.hm=class extends Ds.mg{constructor(t){super(t),this.Tg=t.icon}Gm(){return!0}bg(){return this.Tg}Vm(){return Ds.pr(Ds.hm,{icon:this.Tg,$p:this.gg,width:this.sg,height:this.ig,fontBoundingBoxAscent:this.eg,fontBoundingBoxDescent:this.hg,vm:this.rg})}xg(t){if(!t)return null;let s=Number(this.Tg);return String(s)===this.Tg?(s=Math.floor(s),t.vg(s)):t.Cg(this.Tg)}_m(t){const s=this.xg(t);this.sg=s?this.ig*s.Mm()/s.Em():0}Ig(t){const s=this.xg(t);return s?s.Ig():null}Pm(){return 1}}}{const Ns=self.ks;Ns.Gg=class{constructor(t){this._g=new Map,this.Eg=t.Ag,this.Dg=t.Ng}mr(){for(const t of this._g.values())t.mr();this._g.clear()}Lg(t){let s=this._g.get(t);if(!s){const i=this.Eg(t);s=Ns.pr(Ns.Og,this,{source:t,Rg:i}),this._g.set(t,s)}return s}Pg(t){return this._g.has(t)}kg(t){const s=this._g.get(t);s&&s.mr(),this._g.delete(t)}async Fg(t){return this.Dg(t)}}}{const Ls=self.ks;Ls.Og=class{constructor(t,s){this.jg=t,this.Bg=s.source,this.zg=[],this.Ug=new Map,this.Wg=!1,this.Qg=!1,this.Jg=null;const i=s.Rg.Vg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.pr(Ls.Yg,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.zg.push(h),e.tag&&this.Ug.set(e.tag.toLowerCase(),h)}}mr(){for(const t of this.zg)t.mr();Ls.Qn(this.zg),this.Ug.clear(),this.jg=null,this.Bg=null}Hg(){return this.Wg}qg(){return this.Qg}Zg(){return this.Jg||(this.Jg=this.Xg()),this.Jg}async Xg(){if(!this.Wg){this.Wg=!0,this.Qg=!0;const t=await this.jg.Fg(this.Bg);if(this.jg){const i=t.Vg;for(let t=0,s=Math.min(i.length,this.zg.length);t<s;++t){const e=i[t].Kg;this.zg[t].$g(e)}this.Qg=!1}}}vg(t){return(t=Math.floor(t))<0||t>=this.zg.length?null:this.zg[t]}Cg(t){return this.Ug.get(t.toLowerCase())||null}}}{const Os=self.ks;Os.Yg=class{constructor(t,s){this.ty=t,this.Bg=s.source||null,this.iy=s.index,this.ey=s.tag,this.sg=s.width,this.ig=s.height,this.hy=null}mr(){this.sg=0,this.ig=0,this.ty=null}ny(){return this.Bg}Mm(){return this.sg}Em(){return this.ig}$g(t){this.hy=t}Ig(){return this.hy}}}{let e=function(t,s,i,e){const h=js;vh.j(ks,i,s),vh.j(Fs,t,s),vh.Lt(h,ks,Fs),vh.normalize(h,h),e.set(h[0],h[1],h[2],vh.Nt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,u=n.z,l=n.w,c=n.uy,f=n.my,d=n.gy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*r*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+u*r*d+u*i*g;return l<M},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Rs=self.ks,Ps=self.Ss,vh=Ps._s,Uh=Ps.Es,xh=Ps.vs,ks=vh.create(),Fs=vh.create(),js=vh.create(),Bs=Uh.create(),zs=xh.create(),Us=vh.create(),Ws=vh.create(),Qs=vh.create(),Js=vh.create(),Vs=vh.create(),Ys=vh.create(),Hs=vh.create(),qs=vh.create(),Zs=Uh.G(0,0,1,1);Rs.yy={My(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},wy(t,s,i,e,h,r,n){const o=zs,a=Bs;return xh.multiply(o,h,e),null!==xh.A(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.Ft(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Sy(t,s,i,e,h,r,n){const o=ks,a=Fs;if(!Rs.yy.wy(t,s,0,e,h,r,o))return!1;if(!Rs.yy.wy(t,s,1,e,h,r,a))return!1;let u=Fs,l=(vh.j(u,a,o),js),c=(vh.set(l,0,0,1),-i),f=vh.Nt(l,u),d=0;if(0===f){const p=vh.Nt(l,o)+c;if(0!==p)return!1}else if((d=-(vh.Nt(o,l)+c)/f)<0)return!1;return vh.Gt(n,o,u,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.uy=NaN,this.my=NaN,this.gy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.uy=0<t?1:0,this.my=0<s?1:0,this.gy=0<i?1:0}}Rs.yy.Ty=class{constructor(){this.by=new Xs,this.xy=new Xs,this.vy=new Xs,this.Cy=new Xs,this.Iy=new Xs,this.Gy=new Xs}_y(t,s){const i=Zs;Rs.yy.wy(0,1,0,t,s,i,Us),Rs.yy.wy(1,1,0,t,s,i,Ws),Rs.yy.wy(0,0,0,t,s,i,Qs),Rs.yy.wy(1,0,0,t,s,i,Js),Rs.yy.wy(0,1,1,t,s,i,Vs),Rs.yy.wy(1,1,1,t,s,i,Ys),Rs.yy.wy(0,0,1,t,s,i,Hs),Rs.yy.wy(1,0,1,t,s,i,qs),e(Qs,Us,Vs,this.by),e(Us,Ws,Ys,this.xy),e(Ws,Js,qs,this.vy),e(Js,Qs,Hs,this.Cy),e(Hs,Vs,Ys,this.Gy),e(Js,Ws,Us,this.Iy)}Ey(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.by)&&n(t,s,i,e,h,r,this.xy)&&n(t,s,i,e,h,r,this.vy)&&n(t,s,i,e,h,r,this.Cy)&&n(t,s,i,e,h,r,this.Iy)&&n(t,s,i,e,h,r,this.Gy)}Ay(t,s,i){return!h(t,s,i,this.Iy)}}}{const Ks=self.ks,$s=self.Ss,vh=$s._s,Uh=$s.Es,xh=$s.vs,ti=xh.create(),si=vh.G(0,0,0),ii=vh.G(0,0,0),ei=vh.G(0,0,0),hi=vh.G(0,1,0),ri=(Uh.G(0,0,0,0),new Ks.nl),ni=new Ks.Rect,oi=new Ks.nl(0,0,1,0,1,1,0,1),ai={Dy:1,Ny:1e4},ui=xh.G(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.yy.Ly=class{constructor(t){t=Object.assign({},ai,t),this.sg=0,this.ig=0,this.Oy=Ks.vr(45),this.Ry=Math.tan(this.Oy/2),this.Py=xh.create(),this.ky=xh.create(),this.Fy=!1,this.jy=t.Dy,this.By=t.Ny,this.zy=[],this.Uy=new Map,this.Wy=null,this.Qy=null,this.Jy=null,this.Vy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.Xy=null,this.Ky=null,this.$y=null,this.tM=null,this.sM=new Map,this.iM=null,this.eM=[],this.hM=new Map,this.rM=0,this.nM=0,this.oM=1,this.aM=[this.oM],this.uM=1,this.lM=[this.uM],this.cM=.5,this.fM=[this.cM],this.dM=0,this.pM=!0,this.mM=!1}gM(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}yM(){this.rM=0,this.nM=0,this.Wy=null,this.Qy=null,this.Jy=null,this.Vy=null,this.Yy=null,this.Hy=null,this.qy=null,this.Zy=null,this.Xy=null,this.Ky=null,this.$y=null,this.tM=null,this.MM()}wM(){this.yM(),this.iM=null}SM(){for(const t of this.zy)t.mr();this.yM()}Mm(){return this.sg}Em(){return this.ig}TM(t){return this.bM()?100:t/(2*this.xM())}vM(t){if(this.bM()){const s=t/(2*this.xM());return s/this.TM(t)}return 1}CM(t){this.jy=t}IM(){return this.jy}GM(t){this.By=t}_M(){return this.By}EM(t){this.Oy=t,this.Ry=Math.tan(this.Oy/2)}AM(){return this.Oy}xM(){return this.Ry}DM(){this.Fy=!1}NM(){this.Fy=!0}bM(){return!this.Fy}LM(){return this.Fy}OM(t,s,i=.5,e=.5){const h=this.IM(),r=this._M(),n=this.AM();if(.5===i&&.5===e)this.RM()?xh.St(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.xM()*h,f=c*s;xh.yt(t,o*f,a*f,u*c,l*c,h,r),this.RM()&&xh.mul(t,ui,t)}}PM(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.TM(i)*h*this.xM()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,u=n,l=-o,c=o;this.RM()?xh.xt(t,a,u,l,c,this.IM(),this._M()):xh.ortho(t,a,u,l,c,this.IM(),this._M())}kM(t,s,i,e,h,r=1){let n=1;this.bM()&&(n=200*this.xM()/h);const o=ei,a=(vh.set(o,n,-n,1),si),u=ii;vh.multiply(a,s,o),vh.multiply(u,i,o),xh.vt(t,a,u,e||hi),o[2]=r,xh.scale(t,t,o)}FM(t,s,i,e,h,r,n,o){return vh.set(si,t,s,i),vh.set(ii,e,h,r),this.kM(ti,si,ii,hi,n,o),ti}jM(t){this.zy.push(t),this.Uy.set(t.nf(),t)}BM(t){const s=this.zy.indexOf(t);-1!==s&&this.zy.splice(s,1),this.Uy.delete(t.nf())}MM(){Ks.Qn(this.zy),this.Uy.clear()}zM(t){return this.Uy.get(t)||null}UM(){return this.Wy}WM(){this.QM(this.Wy)}JM(){return this.Qy}VM(){this.QM(this.Qy)}YM(){this.QM(this.Jy)}HM(){this.QM(this.Vy)}qM(){this.QM(this.Yy)}ZM(){this.QM(this.Hy)}XM(){this.QM(this.qy)}KM(){this.QM(this.Zy)}$M(){this.QM(this.Xy)}iw(){this.QM(this.Ky)}ew(){this.QM(this.$y)}hw(){this.QM(this.tM)}rw(t){this.iM=t}ow(){return this.iM}aw(t,s,i,e){let h=Ks.yy.lw.uw(t,s,i,e),r=this.sM.get(h);return r||(r=Ks.pr(Ks.yy.lw,this,t,s,i,e),this.sM.set(h,r)),r.cw(),r}fw(t){t.pw(),0===t.mw()&&(this.iM===t&&(this.iM=null),this.sM.delete(t.gw()),t.mr())}yw(t){Ks.Qn(this.eM),this.hM.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.eM.push([h,r]),this.hM.set(e,{number:s,Mw:h,ww:r}),s++}}Sw(t){return this.eM[t]}Tw(t){return this.Sw(t)[0]}bw(t){return this.Sw(t)[1]}xw(t){const s=this.hM.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Cw(t){const s=this.hM.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Iw(t){this.rM=t}Gw(){return this.rM}_w(t){this.nM=t,this.iM=null}Ew(){return this.nM}Om(t,s,i,e){const h=Ks.Ar(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.oM,a=r*o,u=n*o,l=this.uM;2===l?this.Aw(t,s,0,i,e,0,a,u):1===l?this.Dw(t,s,0,i,e,0,a,u):this.Nw(t,s,0,i,e,0,a,u)}Lw(t,s,i,e,h,r){const n=Ks.Ar(t,s,e,h),o=Math.sin(n),a=Math.cos(n),u=.5*this.oM,l=o*u,c=a*u,f=this.uM;2===f?this.Aw(t,s,i,e,h,r,l,c):1===f?this.Dw(t,s,i,e,h,r,l,c):this.Nw(t,s,i,e,h,r,l,c)}Aw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=u+n,g=l-o,y=u-n+d,M=l+o+p,w=c+n,S=f-o,T=c-n-d,b=f+o-p;this.Ow(m,g,i,w,S,r,T,b,r,y,M,i,oi)}Dw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Ow(d,p,i,y,M,r,w,S,r,m,g,i,oi)}Nw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a,l=s+a,c=e+a,f=h+a,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Ow(d,p,i,y,M,r,w,S,r,m,g,i,oi)}Rw(t,s,i,e,h,r){const n=Ks.Ar(t,s,i,e),o=Math.sin(n),a=Math.cos(n),u=.5*this.oM,l=o*u,c=a*u,f=this.uM;2===f?this.Pw(t,s,i,e,l,c,h,r):1===f?this.kw(t,s,i,e,l,c,h,r):this.Fw(t,s,i,e,l,c,h,r)}Pw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=u+h,g=l-r,y=u-h+d,M=l+r+p,w=c+h,S=f-r,T=c-h-d,b=f+r-p;ri.set(m,g,w,S,T,b,y,M),ni.set(n,0,o,0),this.jw(ri,ni)}kw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.jw(ri,ni)}Fw(t,s,i,e,h,r,n,o){const a=this.cM,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.jw(ri,ni)}Bw(t,s,i,e){const h=.5*this.oM,r=this.uM;2===r?this.zw(t,s,i,e,h):1===r?this.Uw(t,s,i,e,h):this.Ww(t,s,i,e,h)}zw(t,s,i,e,h){this.Aw(t,s,0,i,s,0,0,h),this.Aw(i,s,0,i,e,0,h,0),this.Aw(i,e,0,t,e,0,0,-h),this.Aw(t,e,0,t,s,0,-h,0)}Uw(t,s,i,e,h){this.Dw(t,s,0,i,s,0,0,h),this.Dw(i,s,0,i,e,0,h,0),this.Dw(i,e,0,t,e,0,0,-h),this.Dw(t,e,0,t,s,0,-h,0)}Ww(t,s,i,e,h){this.Nw(t,s,0,i,s,0,0,h),this.Nw(i,s,0,i,e,0,h,0),this.Nw(i,e,0,t,e,0,0,-h),this.Nw(t,e,0,t,s,0,-h,0)}Qw(t){this.Bw(t.Au(),t.Du(),t.Nu(),t.Lu())}Jw(t){const s=Ks.Ar(t.ln(),t.cn(),t.dn(),t.pn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.oM,r=i*h,n=e*h,o=this.uM;2===o?this.Vw(t,r,n):1===o?this.Yw(t,r,n):this.Hw(t,r,n)}Vw(t,s,i){this.Aw(t.ln(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.Aw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Aw(t.mn(),t.gn(),0,t.yn(),t.Mn(),0,-s,-i),this.Aw(t.yn(),t.Mn(),0,t.ln(),t.cn(),0,-i,s)}Yw(t,s,i){this.Dw(t.ln(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.Dw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Dw(t.mn(),t.gn(),0,t.yn(),t.Mn(),0,-s,-i),this.Dw(t.yn(),t.Mn(),0,t.ln(),t.cn(),0,-i,s)}Hw(t,s,i){this.Nw(t.ln(),t.cn(),0,t.dn(),t.pn(),0,s,i),this.Nw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Nw(t.mn(),t.gn(),0,t.yn(),t.Mn(),0,-s,-i),this.Nw(t.yn(),t.Mn(),0,t.ln(),t.cn(),0,-i,s)}qw(t){this.oM=t,this.aM[this.aM.length-1]=t}Zw(){return this.oM}Xw(t){if(100<=this.aM.length)throw new Error("pushed too many line widths - check push/pop pairs");this.aM.push(t),this.oM=t}Kw(){if(this.aM.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.aM.pop(),this.oM=this.aM.at(-1)}$w(){this.uM=0,this.lM[this.lM.length-1]=0}tS(){this.uM=1,this.lM[this.lM.length-1]=0}sS(){this.uM=2,this.lM[this.lM.length-1]=0}iS(t){if("butt"===t)this.eS();else if("square"===t)this.hS();else{if("zag"!==t)throw new Error("invalid line cap");this.rS()}}eS(){if(100<=this.lM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.lM.push(0),this.uM=0}hS(){if(100<=this.lM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.lM.push(1),this.uM=1}rS(){if(100<=this.lM.length)throw new Error("pushed too many line caps - check push/pop pairs");this.lM.push(2),this.uM=2}nS(){if(this.lM.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.lM.pop(),this.uM=this.lM.at(-1)}oS(t){this.cM=t,this.fM[this.fM.length-1]=t}aS(){return this.cM}uS(t){if(100<=this.fM.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.fM.push(t),this.cM=t}lS(){if(this.fM.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.fM.pop(),this.cM=this.fM.at(-1)}cS(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],u=s[4+n],l=s[5+n];if(t===e)this.fS(h,r,o,a,u,l,u,l);else{const c=s[6+n],f=s[7+n];this.fS(h,r,o,a,u,l,c,f)}}}dS(){return 3}pS(){this.mS(!0),this.dM++}gS(){return this.dM}yS(){this.dM++}MS(t){this.pM=!!t}wS(){return this.pM}SS(t){this.mM=!!t}TS(){return this.mM}bS(){return!1}RM(){return!1}xS(){}vS(){}CS(){}IS(){return this.xS()+this.vS()+this.CS()}GS(){return Ks.pr(Ks.yy._S,this)}}}{const li=self.ks;li.yy.ES=class{constructor(t,s){this.Mr=s.name,this.AS=t,this.DS=s.extendBoxHorizontal||0,this.NS=s.extendBoxVertical||0,this.LS=!!s.crossSampling,this.OS=!!s.mustPreDraw,this.RS=!!s.preservesOpaqueness,this.PS=!!s.supports3dDirectRendering,this.kS=!!s.animated,this.FS=!!s.blendsBackground,this.jS=!!s.usesDepth,this.BS=!1,this.zS=this.LS||this.FS||0!==this.DS||0!==this.NS}mr(){this.AS=null}US(){return this.AS}nf(){return this.Mr}WS(){return 0!==this.DS||0!==this.NS}QS(){return this.DS}JS(){return this.NS}VS(){return this.LS}YS(){return this.OS}HS(){return this.RS}qS(){return this.PS}ZS(){return this.kS}XS(){return this.FS}KS(){return this.jS}$S(){return this.BS}tT(){return this.zS}sT(){return!1}}}{const ci=self.ks;ci.yy.lw=class{constructor(t,s,i,e,h){this.AS=t,this.vd=0,this.iT=null,this.eT="",this.hT=i,this.rT=ci.pr(ci.qo),this.rT.set(e),this.nT=h,"string"==typeof s?this.eT=s:(this.iT=s,this.eT=this.iT.nf())}mr(){if(0<this.vd)throw new Error("releasing state group still in use");this.AS=null,this.iT=null,this.eT=""}oT(){const t=this.AS;t.QM(this.iT),t.aT(this.hT),t.uT(this.rT),t._w(this.nT),t.rw(this)}gw(){return ci.yy.lw.uw(this.eT,this.hT,this.rT,this.nT)}cw(){++this.vd}pw(){--this.vd}mw(){return this.vd}lT(){this.iT=null}cT(t){if(this.iT=t.zM(this.eT),!this.iT)throw new Error("failed to restore shader program")}static uw(t,s,i,e){const h="string"==typeof t?t:t.nf();return h+","+s+","+i.fa()+","+i.ma()+","+i.ga()+","+i.ya()+","+e}}}{let e=function(t,s,i){const e=i.ln(),h=i.cn(),r=i.dn()-e,n=i.pn()-h,o=i.yn()-e,a=i.Mn()-h,u=r*t,l=n*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const I=self.ks,fi=I.pr(I.nl);I.yy.fT=class{constructor(t,s,i){this.dT=t,this.pT=s,this.mT=i,this.ou=NaN,this.au=NaN,this.nT=NaN,this.gT=NaN,this.yT=NaN,this.ou=0,this.au=0,this.nT=0,this.gT=0,this.yT=0}MT(t,s,i,e){this.ou=t,this.au=s,this.gT=i,this.yT=e}wT(){return this.ou}ST(t){this.ou!==t&&(this.ou=t,this.dT.TT())}bT(){return this.au}xT(t){this.au!==t&&(this.au=t,this.dT.TT())}vT(){return this.nT}CT(t){this.nT!==t&&(this.nT=Math.max(t,0),this.dT.TT())}IT(){return this.gT}GT(t){this.gT=t}_T(){return this.yT}ET(t){this.yT=t}AT(t,s,i){[this.ou,this.au]=e(t.ou,t.au,s),this.nT=t.nT,this.gT=I.Ot(i.Au(),i.Nu(),t.gT),this.yT=I.Ot(i.Du(),i.Lu(),t.yT)}DT(t,s,i){[this.ou,this.au]=e(t.ou,t.au,s),this.nT=t.nT,[this.gT,this.yT]=e(t.gT,t.yT,i)}NT(){return{x:this.wT(),y:this.bT(),z:this.vT(),u:this.IT(),v:this._T()}}LT(t){this.ST(t.x),this.xT(t.y),t.hasOwnProperty("z")&&this.CT(t.z),this.GT(t.u),this.ET(t.v)}OT(){return this.dT}RT(){return this.pT}PT(){return this.mT}},I.yy.kT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.FT=i,this.jT=t,this.BT=s||null,this.zT=[],this.UT=0,this.WT=0,this.QT=1,this.JT=1,this.VT=0,this.YT=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=I.pr(I.yy.fT,this,t,s),o=t/e,a=s/h;n.MT(o,a,o,a),r.push(n)}this.zT.push(r)}}mr(){I.Qn(this.zT)}HT(){return this.FT}qT(){return this.jT}ZT(){return this.BT}XT(){return this.zT}TT(){this.YT=!0}KT(){if(this.YT){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.zT)for(const n of r){const o=n.wT(),a=n.bT();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.vT())}this.UT=t,this.WT=s,this.QT=i,this.JT=e,this.VT=h,this.YT=!1}}$T(){return this.KT(),this.UT}t2(){return this.KT(),this.WT}s2(){return this.KT(),this.QT}i2(){return this.KT(),this.JT}e2(){return this.KT(),this.VT}h2(){return 0<this.e2()}n2(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.FT||s<0||s>=this.jT?null:this.zT[s][t]}o2(t,i,e){const h=e instanceof I.Rect;if(t.HT()!==this.HT()||t.qT()!==this.qT())throw new Error("source mesh wrong size");const r=t.zT,n=this.zT;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.AT(u,i,e):l.DT(u,i,e)}}}a2(r){let n=this.zT,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.IT(),e._T(),a.IT(),a._T(),u.IT(),u._T(),h.IT(),h._T()),r.Ow(e.wT(),e.bT(),e.vT(),a.wT(),a.bT(),a.vT(),u.wT(),u.bT(),u.vT(),h.wT(),h.bT(),h.vT(),fi),e=a,h=u}o=i}}u2(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.zT,u=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.wT(),e.bT(),e.vT()),[m,g,y]=a(l.wT(),l.bT(),l.vT()),[M,w,S]=a(c.wT(),c.bT(),c.vT()),[T,b,x]=a(h.wT(),h.bT(),h.vT());o.Lw(f,d,p,m,g,y),o.Lw(f,d,p,M,w,S),o.Lw(f,d,p,T,b,x),t===s-1&&o.Lw(m,g,y,M,w,S),r===n-1&&o.Lw(T,b,x,M,w,S),e=l,h=c}u=i}}l2(t){let i=.99999999,e=t.Jl(),h=[],r=this.HT()-1,n=this.qT()-1,o=1/r,a=1/n,u=r-1,l=n-1,c=e[0],f=e[1],d=I.Tr(Math.floor(c*r),0,u),p=I.Tr(Math.floor(f*n),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=I.Tr(I.Ot(c,g,M),0,1),f=I.Tr(I.Ot(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=I.Tr(Math.floor(c*r),0,u),p=I.Tr(Math.floor(f*n),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,x=p*a,v=(d+1)*o,C=(p+1)*a;if(m=I.bn(c,f,b,x,v,x,v,C),0!==w&&0<=(M=I.Tn(c,f,g,y,b,x,v,C,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=I.Tn(c,f,g,y,b,x,v,x,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=I.Tn(c,f,g,y,v,x,v,C,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=I.Tn(c,f,g,y,b,x,b,C,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=I.Tn(c,f,g,y,b,C,v,C,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return I.pr(I.Bl,h)}c2(t,s){const i=this.f2(t);this.d2(i),s.Yl(i)}f2(t){const i=[],e=t.Jl();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.m2(h,r);i.push(n,o)}return i}m2(t,s){const i=this.HT()-1,e=this.qT()-1,h=1/i,r=1/e,n=I.Tr(Math.floor(t*i),0,i-1),o=I.Tr(Math.floor(s*e),0,e-1),a=n*h,u=o*r,l=(n+1)*h,c=(o+1)*r,f=this.n2(n,o),d=this.n2(n+1,o+1),p=I.bn(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+r,y=this.n2(n+(p?1:0),o+(p?0:1)),[M,w,S]=I.xn(t,s,a,u,m,g,l,c);return I.vn(M,w,S,f.wT(),f.bT(),f.vT(),y.wT(),y.bT(),y.vT(),d.wT(),d.bT(),d.vT())}d2(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=u,r=l,n=c,o=f}6<=e.length&&e.length<i.length&&I.Hn(i,e)}NT(){return{cols:this.HT(),rows:this.qT(),points:this.zT.map(t=>t.map(t=>t.NT()))}}LT(t){const i=this.HT(),e=this.qT();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.n2(t,s);n.LT(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{g2:i,M2:e,format:h,type:r}};d;const di=self.ks,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={w2:"clamp-to-edge",S2:"clamp-to-edge",T2:"trilinear",b2:0,v2:"rgba8",C2:!0,I2:"default",premultiplyAlpha:!0,G2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.yy._2=class{constructor(t){this.AS=t,this.E2=null,this.sg=0,this.ig=0,this.A2=!0,this.D2="clamp-to-edge",this.N2="clamp-to-edge",this.L2="trilinear",this.O2=0,this.R2="rgba8",this.P2=!1,this.F2="default",this.vd=0}j2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.E2)throw new Error("already created texture");if(this.D2=t.w2,this.N2=t.S2,this.L2=t.T2,this.O2=t.b2,this.R2=t.v2,this.P2=!!t.C2&&this.AS.wS(),this.F2=t.I2,!yi.has(this.D2)||!yi.has(this.N2))throw new Error("invalid wrap mode");if(!mi.has(this.L2))throw new Error("invalid sampling");if(!pi.has(this.R2))throw new Error("invalid pixel format");if(!gi.has(this.F2))throw new Error("invalid mipmap quality");if(this.A2=!0,s instanceof ArrayBuffer||null===s||t.G2){if(this.sg=t.width,this.ig=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.sg*this.ig*4)throw new Error("ArrayBuffer wrong size")}else this.sg=s.width,this.ig=s.height;if(this.sg<=0||this.ig<=0)throw new Error("invalid texture data size");if(t.G2){const o=di.ko(this.sg,this.ig),a=o.getContext("2d");a.drawImage(s,0,0,this.sg,this.ig),s=o}const i=di.Wr(this.sg)&&di.Wr(this.ig),e=this.AS.B2();if(this.sg>e||this.ig>e)throw new Error("texture data exceeds maximum texture size");const h=this.AS.z2(),r=this.AS.U2(),n=(this.E2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.E2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.R2,h));if(this.AS.W2()||i||!this.Q2())if(2<=r){let t;t=this.P2?Math.floor(Math.log2(Math.max(this.sg,this.ig))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.g2,this.sg,this.ig),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.sg,this.ig,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.M2,this.sg,this.ig,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.M2,this.sg,this.ig,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.M2,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.sg,this.ig):s)instanceof ImageData){const c=di.ko(this.sg,this.ig),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.ko(di.Qr(this.sg),di.Qr(this.ig)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.L2,l.drawImage(s,0,0,this.sg,this.ig,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,n.M2,n.format,n.type,u)}null!==s&&this.J2(h),h.bindTexture(h.TEXTURE_2D,null),this.AS.V2(),this.vd=1,Si.add(this)}Y2(t,s,i){if(i=Object.assign({},Mi,i),this.E2)throw new Error("already created texture");if(this.D2=i.w2,this.N2=i.S2,this.L2=i.T2,this.R2=i.v2,this.P2=!!i.C2&&this.AS.wS(),this.F2=i.I2,!yi.has(this.D2)||!yi.has(this.N2))throw new Error("invalid wrap mode");if(!mi.has(this.L2))throw new Error("invalid sampling");if(!pi.has(this.R2))throw new Error("invalid pixel format");if(!gi.has(this.F2))throw new Error("invalid mipmap quality");this.A2=!1,this.sg=Math.floor(t),this.ig=Math.floor(s);const e=di.Wr(this.sg)&&di.Wr(this.ig),h=this.AS.B2();if(this.sg<=0||this.ig<=0)throw new Error("invalid texture size");if(this.sg>h||this.ig>h)throw new Error("texture exceeds maximum texture size");if(!this.AS.W2()&&this.Q2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.AS.z2(),n=this.AS.U2(),o=(this.E2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.E2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.R2,r)),a=2<=n?o.g2:o.M2;r.texImage2D(r.TEXTURE_2D,0,a,this.sg,this.ig,0,o.format,o.type,null),this.J2(r),r.bindTexture(r.TEXTURE_2D,null),this.AS.V2(),this.vd=1,Si.add(this)}H2(t){if("default"===this.F2)return this.A2?t.NICEST:t.FASTEST;if("low"===this.F2)return t.FASTEST;if("high"===this.F2)return t.NICEST;throw new Error("invalid mipmap quality")}Q2(){return"clamp-to-edge"!==this.D2||"clamp-to-edge"!==this.N2}q2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}J2(t){const s=di.Wr(this.sg)&&di.Wr(this.ig);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.q2(t,this.D2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.q2(t,this.N2)),"nearest"===this.L2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.P2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.AS.W2())&&this.P2){t.hint(t.GENERATE_MIPMAP_HINT,this.H2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.L2&&!this.AS.TS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.P2=!1;const i=this.AS.Z2();i&&0<this.O2&&"nearest"!==this.L2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.O2,this.AS.X2()))}K2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.E2||this.vd<=0)throw new Error("texture not created");if(this.A2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.AS.U2(),r=this.AS.z2(),n=(r.bindTexture(r.TEXTURE_2D,this.E2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.R2,r)),o=2<=h?n.g2:n.M2;try{if(this.sg===i&&this.ig===e){const a=di.Wr(this.sg)&&di.Wr(this.ig);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.AS.W2())&&this.P2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.H2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.sg=i,this.ig=e;const u=di.Wr(this.sg)&&di.Wr(this.ig);if(!this.AS.W2()&&this.Q2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(u||this.AS.W2())&&this.P2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.H2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.AS.V2()}tb(){if(0<this.vd)throw new Error("texture still has references");if(!this.E2)throw new Error("already deleted texture");Si.delete(this);const t=this.AS.z2();t.deleteTexture(this.E2),this.E2=null}sb(){return!!this.E2}ib(){return this.E2}US(){return this.AS}eb(){this.vd++}hb(){if(this.vd<=0)throw new Error("no more references");this.vd--}rb(){return this.vd}Mm(){return this.sg}Em(){return this.ig}nb(){return this.A2}ob(){let t=this.sg*this.ig;switch(this.R2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.P2&&(t+=Math.floor(t/3)),t}static lT(){Si.clear()}static ab(){return Si.values()}}}{const Ti=self.ks,bi=self.Ss,vh=bi._s,xh=bi.vs,xi=new Set(["nearest","bilinear","trilinear"]),vi={T2:"trilinear",alpha:!0,depth:!1,ub:!0,lb:!0,cb:0},Ci=new Set;Ti.yy.fb=class{constructor(t){this.AS=t,this.pb=null,this.mb=null,this.E2=null,this.gb=null,this.sg=0,this.ig=0,this.yb=!0,this.L2="trilinear",this.Mb=!0,this.wb=!1,this.Sb=!0,this.Tb=0,this.bb=xh.create(),this.xb=0,this.vb=0,this.Cb=0}Ib(t,s,i){i=Object.assign({},vi,i);const e=this.AS.U2();if(this.E2||this.gb)throw new Error("already created render target");if(this.L2=i.T2,this.Mb=!!i.alpha,this.wb=!!i.depth,this.Sb=!!i.ub,this.yb=!!i.lb,this.Tb=i.cb,!xi.has(this.L2))throw new Error("invalid sampling");if(0<this.Tb&&(e<2||this.Sb))throw new Error("invalid use of multisampling");if(e<2&&(this.Sb=!0),this.sg=t,this.ig=s,this.sg<=0||this.ig<=0)throw new Error("invalid render target size");this.Gb();const h=this.AS.z2();if(this.pb=h.createFramebuffer(),this.wb&&(this.mb=h.createFramebuffer()),this.Sb){this.E2=this.AS._b(this.sg,this.ig,{T2:this.L2,v2:this.Mb?"rgba8":"rgb8",C2:!1});const n=this.E2.ib();h.bindFramebuffer(h.FRAMEBUFFER,this.pb),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.wb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.mb),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.gb=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.gb);const o=this.Mb?h.RGBA8:h.RGB8;if(0<this.Tb){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.Tb>u&&(this.Tb=u)}else this.Tb=0}0===this.Tb?h.renderbufferStorage(h.RENDERBUFFER,o,this.sg,this.ig):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.Tb,o,this.sg,this.ig),h.bindFramebuffer(h.FRAMEBUFFER,this.pb),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.gb),this.wb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.mb),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.gb)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.AS.Eb();this.wb&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.pb),this.AS.Ab()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ci.add(this)}Db(t,s){if(this.sg!==t||this.ig!==s){this.sg=t,this.ig=s,this.Gb();const i=this.AS.z2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.pb),this.E2?this.E2.K2(new ImageData(this.sg,this.ig)):(i.bindRenderbuffer(i.RENDERBUFFER,this.gb),i.renderbufferStorage(i.RENDERBUFFER,this.Mb?i.RGBA8:i.RGB8,this.sg,this.ig),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.AS.Eb());this.wb&&e&&(this.AS.Ab()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}tb(){if(!this.E2&&!this.gb)throw new Error("already deleted render target");Ci.delete(this);const t=this.AS.z2(),s=(this.E2?(t.bindFramebuffer(t.FRAMEBUFFER,this.pb),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.wb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.mb),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.AS.Nb(this.E2),this.E2=null):this.gb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.pb),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.wb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.mb),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.gb),this.gb=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.AS.U2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.pb),this.wb&&t.deleteFramebuffer(this.mb),this.AS.Lb());s.Ob=null,this.pb=s.Rb=null}Gb(){this.AS.OM(this.bb,this.sg/this.ig),this.xb=this.AS.AM(),this.vb=this.AS.IM(),this.Cb=this.AS._M()}Pb(){return this.pb}kb(){return this.mb}US(){return this.AS}Fb(){return this.E2}jb(){return this.AS.AM()===this.xb&&this.AS.IM()===this.vb&&this.AS._M()===this.Cb||this.Gb(),this.bb}Bb(){return"nearest"!==this.L2}zb(){return this.Mb}Ub(){return this.Sb}Wb(){return this.wb}Mm(){return this.sg}Em(){return this.ig}Qb(){return this.yb}Jb(){return this.Tb}Vb(){const t={T2:this.L2,alpha:this.Mb,ub:this.Sb};return this.yb||(t.width=this.sg,t.height=this.ig),t}Yb(t){return"nearest"!==(t=Object.assign({},vi,t)).T2===this.Bb()&&!!t.alpha===this.zb()&&!!t.depth===this.Wb()&&!(2<=this.AS.U2()&&!!t.ub!==this.Ub())&&("number"==typeof t.width||"number"==typeof t.height?!this.Qb()&&this.Mm()===Math.floor(t.width)&&this.Em()===Math.floor(t.height):this.Qb())}Hb(){return this.E2?this.E2.ib():null}ob(){return this.E2?this.E2.ob():this.sg*this.ig*(this.Mb?4:3)}static async qb(t,s){const i=await t.Zb(s,!0);return Ti.Bo(i)}static lT(){Ci.clear()}static Xb(){return Ci.values()}static Kb(t,s){for(const i of Ci)i.Qb()&&i.Db(t,s)}}}{const m=self.ks,Ii=self.Ss,vh=Ii._s,xh=Ii.vs,Gi=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.yy.$b=class extends m.yy.ES{static async tx(t,s){const i=t.z2(),e=s.src,h=s.ix,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.hx());if(u?await t.nx(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.Fn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.$d(i.getProgramInfoLog(a)||"").trim();return l&&!m.Zd(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(n),i.deleteShader(o),a}static async ux(t,s){const i=await m.yy.$b.tx(t,s);return new m.yy.$b(t,i,s)}constructor(t,s,i){super(t,i);const e=t.z2(),h=t.Lb(),r=(t.mS(),e.useProgram(s),this.mx=e,this.iT=s,this.gx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.yx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Mx),e.vertexAttribPointer(r,t.dS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.wx),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.yx&&(e.bindBuffer(e.ARRAY_BUFFER,t.Sx),e.vertexAttribPointer(this.yx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.yx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Tx=new m.yy.bx(this,"matP","mat4"),this.xx=new m.yy.bx(this,"matMV","mat4"),this.vx=new m.yy.bx(this,"color","vec4"),this.Cx=new m.yy.bx(this,"samplerFront","sampler"),this.Ix=new m.yy.bx(this,"pointTexStart","vec2"),this.Gx=new m.yy.bx(this,"pointTexEnd","vec2"),this._x=new m.yy.bx(this,"zElevation","float"),this.Ex=new m.yy.bx(this,"tileSize","vec2"),this.Ax=new m.yy.bx(this,"tileSpacing","vec2"),this.Dx=new m.yy.bx(this,"color2_","vec4"),this.Nx=new m.yy.bx(this,"outlineThickness","float"),this.Lx=new m.yy.bx(this,"samplerBack","sampler"),this.Ox=new m.yy.bx(this,"samplerDepth","sampler"),this.Rx=new m.yy.bx(this,"destStart","vec2"),this.Px=new m.yy.bx(this,"destEnd","vec2"),this.kx=new m.yy.bx(this,"srcStart","vec2"),this.Fx=new m.yy.bx(this,"srcEnd","vec2"),this.jx=new m.yy.bx(this,"srcOriginStart","vec2"),this.Bx=new m.yy.bx(this,"srcOriginEnd","vec2"),this.zx=new m.yy.bx(this,"pixelSize","vec2"),this.Ux=new m.yy.bx(this,"seconds","float"),this.Wx=new m.yy.bx(this,"devicePixelRatio","float"),this.Qx=new m.yy.bx(this,"layerScale","float"),this.Jx=new m.yy.bx(this,"layerAngle","float"),this.Vx=new m.yy.bx(this,"layoutStart","vec2"),this.Yx=new m.yy.bx(this,"layoutEnd","vec2"),this.Hx=new m.yy.bx(this,"zNear","float"),this.qx=new m.yy.bx(this,"zFar","float"),this.Zx=!!(this.zx.Xx()||this.Ux.Xx()||this.Lx.Xx()||this.Rx.Xx()||this.Px.Xx()||this.kx.Xx()||this.Fx.Xx()||this.jx.Xx()||this.Bx.Xx()||this.Wx.Xx()||this.Qx.Xx()||this.Jx.Xx()||this.Vx.Xx()||this.Yx.Xx()),i.parameters||[]);this.Kx=[],this.BS=this.zx.Xx()||this.kx.Xx()||this.Fx.Xx()||this.jx.Xx()||this.Bx.Xx(),this.$x=!1,this.tv=!1,this.vx.sv(1,1,1,1),this.Dx.sv(1,1,1,1),this.Cx.hv(0),this.Lx.hv(1),this.Ox.hv(2),this.Ix.rv(0,0),this.Gx.rv(1,1),this._x.nv(0),this.Ex.rv(0,0),this.Ax.rv(0,0),this.Rx.rv(0,0),this.Px.rv(1,1),this.kx.rv(0,0),this.Fx.rv(0,0),this.jx.rv(0,0),this.Bx.rv(0,0),this.zx.rv(0,0),this.Wx.nv(1),this.Hx.nv(t.IM()),this.qx.nv(t._M()),this.Qx.nv(1),this.Jx.nv(0),this.Ux.nv(0),this.Vx.rv(0,0),this.Yx.rv(0,0),this.Nx.nv(1);for(const u of o){const l=u[0],c=u[2],f=new m.yy.bx(this,l,c);"color"===c?f.ov(0,0,0):f.nv(0),this.Kx.push(f)}this.gx?this.av(h.uv):(this.lv(h.uv,!0),this.cv(h.dv,!0));const a=h.pv;e.useProgram(a?a.iT:null)}mr(){this.mx.deleteProgram(this.iT),this.iT=null,this.AS.BM(this),this.mx=null,super.mr()}mv(){return this.mx}gv(){return this.iT}yv(){return this.Kx.length}Mv(t){return t<0||t>=this.Kx.length?null:this.Kx[t].wv()}Sv(i){for(let t=0,s=i.length;t<s;++t)if(!this.Kx[t].Tv(i[t]))return!1;return!0}bv(i){for(let t=0,s=i.length;t<s;++t)this.Kx[t].xv(i[t])}vv(t,s,i,e,h,r,n,o,a,u){return!this.Lx.Xx()&&!(this.zx.Xx()&&!this.zx.Cv(h,r)||this.Rx.Xx()&&!this.Rx.Cv(t.Au(),t.Du())||this.Px.Xx()&&!this.Px.Cv(t.Nu(),t.Lu())||this.Wx.Xx()&&!this.Wx.Iv(n)||this.Qx.Xx()&&!this.Qx.Iv(o)||this.Jx.Xx()&&!this.Jx.Iv(a)||this.kx.Xx()&&!this.kx.Cv(s.Au(),s.Du())||this.Fx.Xx()&&!this.Fx.Cv(s.Nu(),s.Lu())||this.jx.Xx()&&!this.jx.Cv(i.Au(),i.Du())||this.Bx.Xx()&&!this.Bx.Cv(i.Nu(),i.Lu())||this.Vx.Xx()&&!this.Vx.Cv(e.Au(),e.Du())||this.Yx.Xx()&&!this.Yx.Cv(e.Du(),e.Lu())||this.Ux.Xx()&&!this.Ux.Iv(u))}Gv(t,s,i,e,h,r,n,o,a,u){this.Lx.Xx()||(this.zx.Xx()&&this.zx._v(h,r),this.Rx.Xx()&&this.Rx._v(t.Au(),t.Du()),this.Px.Xx()&&this.Px._v(t.Nu(),t.Lu()),this.Wx.Xx()&&this.Wx.Ev(n),this.Qx.Xx()&&this.Qx.Ev(o),this.Jx.Xx()&&this.Jx.Ev(a),this.kx.Xx()&&this.kx._v(s.Au(),s.Du()),this.Fx.Xx()&&this.Fx._v(s.Nu(),s.Lu()),this.jx.Xx()&&this.jx._v(i.Au(),i.Du()),this.Bx.Xx()&&this.Bx._v(i.Nu(),i.Lu()),this.Vx.Xx()&&this.Vx._v(e.Au(),e.Du()),this.Yx.Xx()&&this.Yx._v(e.Du(),e.Lu()),this.Ux.Xx()&&this.Ux.Ev(u))}lv(t,s){this.$x&&!s||this.gx||(this.Tx.Xx()&&this.Tx.Av(t),this.$x=!0)}Dv(){this.$x=!1}cv(t,s){this.tv&&!s||this.gx||(this.xx.Xx()&&this.xx.Av(t),this.tv=!0)}Nv(){this.tv=!1}av(t){if(!this.gx)throw new Error("not device transform shader");this.Tx.Av(t);const s=this.AS,i=s.Mm()/2,e=s.Em()/2,h=s.FM(i,e,s.TM(s.Em()),i,e,0,s.Em());this.xx.Av(h)}Lv(t){this.vx.Xx()&&this.vx.Ov(t[0],t[1],t[2],t[3])}static Rv(){return Gi}static Pv(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static kv(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Fv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static jv(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Bv(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static zv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static Uv(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Wv(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Qv(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static Jv(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Vv(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Yv(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Hv(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static qv(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Zv(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static Xv(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Kv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static $v(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static tC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static sC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static iC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static eC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const _i=self.ks,Ei=self.Ss,xh=Ei.vs,Ai=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);_i.yy.bx=class{constructor(t,s,i){if(!Ai.has(i))throw new Error("invalid uniform type");this.BT=t,this.mx=this.BT.mv(),this.Mr=s,this.vf=i,this.hC="color"===this.vf,this.rC=this.mx.getUniformLocation(this.BT.gv(),s),this.nC=!!this.rC;const e=Ai.get(i);this.oC=new Float32Array(e),this.aC=new Float32Array(e)}mr(){this.BT=null,this.mx=null,this.rC=null}Xx(){return this.nC}wv(){return this.vf}uC(){return this.hC}nv(t){this.Xx()&&(this.oC[0]=t,this.aC.set(this.oC),this.mx.uniform1f(this.rC,t))}hv(t){this.Xx()&&(this.oC[0]=t,this.aC.set(this.oC),this.mx.uniform1i(this.rC,t))}rv(t,s){this.Xx()&&(this.oC[0]=t,this.oC[1]=s,this.aC.set(this.oC),this.mx.uniform2f(this.rC,t,s))}ov(t,s,i){this.Xx()&&(this.oC[0]=t,this.oC[1]=s,this.oC[2]=i,this.aC.set(this.oC),this.mx.uniform3f(this.rC,t,s,i))}sv(t,s,i,e){this.Xx()&&(this.oC[0]=t,this.oC[1]=s,this.oC[2]=i,this.oC[3]=e,this.aC.set(this.oC),this.mx.uniform4f(this.rC,t,s,i,e))}lC(t){t=Math.fround(t);const s=this.oC;s[0]!==t&&(s[0]=t,this.mx.uniform1f(this.rC,t))}cC(t){const s=this.oC;s[0]!==t&&this.mx.uniform1i(this.rC,s[0]=t)}fC(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.oC;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.mx.uniform2f(this.rC,t,s))}dC(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.oC;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.mx.uniform3f(this.rC,t,s,i))}Ov(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.oC;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.mx.uniform4f(this.rC,t,s,i,e))}Av(t){const s=this.oC;xh.B(s,t)||(_i.Un(s,t,0),this.mx.uniformMatrix4fv(this.rC,!1,t))}Tv(t){const s=this.aC;return this.uC()?s[0]===Math.fround(t.fa())&&s[1]===Math.fround(t.ma())&&s[2]===Math.fround(t.ga()):s[0]===Math.fround(t)}xv(t){const s=this.aC;this.uC()?(s[0]=t.fa(),s[1]=t.ma(),s[2]=t.ga()):s[0]=t}Iv(t){return this.aC[0]===Math.fround(t)}Cv(t,s){const i=this.aC;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}Ev(t){this.aC[0]=t}_v(t,s){const i=this.aC;i[0]=t,i[1]=s}}}{const Di=self.ks,Ni=self.Ss,Uh=Ni.Es,xh=Ni.vs;Di.yy.pC=class{constructor(t){this.renderer=t,this.dv=xh.create(),this.uv=xh.create(),this.Ob=null,this.Rb=null,this.mC=!1,this.gC=Uh.G(1,1,1,1),this.pv=null,this.yC=new Di.Rect,this.clearColor=Di.pr(Di.qo,0,0,0,0)}},Di.yy.MC=class{constructor(t){const s=new ArrayBuffer(96);this.vf=0,this.wC=t,this.mx=t.renderer.z2(),this.SC=0,this.TC=0,this.bC=null,this.xC=new Float32Array(s,0,16),this.vC=new Float32Array(s,64,4),this.CC=new Float32Array(s,80,4),this.IC=[]}GC(t,s){this.vf=1,this.SC=t,this.TC=s}_C(){const t=this.mx;t.drawElements(t.TRIANGLES,this.TC,t.UNSIGNED_SHORT,this.SC)}EC(t){this.vf=2,this.bC=t}AC(){const t=this.mx,s=this.bC;t.bindTexture(t.TEXTURE_2D,s?s.ib():null)}DC(t){this.vf=3,t.wa(this.vC,0)}NC(){const t=this.vC,s=this.wC;Uh.I(s.gC,t),s.pv.Lv(t)}LC(t){this.vf=21,t.wa(this.vC,0)}OC(){const t=this.vC,s=this.wC.pv;s.Dx.Xx()&&s.Dx.Ov(t[0],t[1],t[2],t[3])}RC(t,s){this.vf=4,this.SC=t,this.TC=s}PC(){this.mx.blendFunc(this.SC,this.TC)}kC(t,s,i,e){this.vf=5;const h=this.vC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}FC(){const t=this.vC;this.mx.viewport(t[0],t[1],t[2],t[3])}jC(t){this.vf=6,xh.I(this.xC,t)}BC(){const t=this.wC,i=t.renderer.zy,e=t.pv,h=this.xC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.lv(h,!0):r.Dv()}xh.I(t.uv,h)}zC(t){this.vf=7,xh.I(this.xC,t)}UC(){const t=this.wC,i=t.renderer.zy,e=t.pv,h=this.xC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.cv(h,!0):r.Nv()}xh.I(t.dv,h)}WC(t){this.vf=8,this.bC=t}QC(){const t=this.mx,s=this.bC,i=this.wC;s?(i.Ob=s.Pb(),i.Rb=s.kb(),i.mC&&i.Rb?t.bindFramebuffer(t.FRAMEBUFFER,i.Rb):t.bindFramebuffer(t.FRAMEBUFFER,i.Ob)):(i.Ob=null,i.Rb=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}JC(t){this.vf=9,t.wa(this.xC,0)}VC(t,s,i,e){this.vf=9;const h=this.xC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}YC(){const t=this.mx,s=this.xC,i=this.wC,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.xa(h,r,n,o)||(t.clearColor(h,r,n,o),e.ta(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}HC(t){this.vf=15,t.wa(this.xC,0)}qC(){const t=this.xC;this.wC.yC.set(t[0],t[1],t[2],t[3])}ZC(t,s){this.vf=10,this.SC=t,this.TC=1,this.xC[0]=s}XC(){const t=this.mx,s=this.wC,i=s.renderer,e=i.Qy,h=(t.useProgram(e.iT),e.lv(s.uv,!1),e.cv(s.dv,!1),s.yC),r=(e.Ix.Xx()&&e.Ix.fC(h.Au(),h.Du()),e.Gx.Xx()&&e.Gx.fC(h.Nu(),h.Lu()),this.xC[0]);if(e._x.Xx()&&e._x.lC(r),e.vx.Xx()){const n=s.gC;e.vx.Ov(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.SC/4,this.TC),t.useProgram(s.pv.iT)}KC(t){this.vf=11,this.bC=t}$C(){const t=this.mx,s=this.wC,i=this.bC;if(s.pv=i,t.useProgram(i.iT),i.lv(s.uv,!1),i.cv(s.dv,!1),i.vx.Xx()){const e=s.gC;i.vx.Ov(e[0],e[1],e[2],e[3])}}tI(){this.vf=12}sI(){const t=this.wC.pv,s=this.mx,i=this.xC,e=this.vC,h=this.CC;if(t.Lx.Xx()){const r=this.wC.renderer,n=this.bC;r.iI!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.ib():null),r.iI=n,s.activeTexture(s.TEXTURE0))}t.zx.Xx()&&t.zx.fC(i[0],i[1]),t.Rx.Xx()&&t.Rx.fC(i[2],i[3]),t.Px.Xx()&&t.Px.fC(i[4],i[5]),t.Wx.Xx()&&t.Wx.lC(this.TC),t.Qx.Xx()&&t.Qx.lC(i[6]),t.Jx.Xx()&&t.Jx.lC(i[7]),t.kx.Xx()&&t.kx.fC(i[12],i[13]),t.Fx.Xx()&&t.Fx.fC(i[14],i[15]),t.jx.Xx()&&t.jx.fC(h[0],h[1]),t.Bx.Xx()&&t.Bx.fC(h[2],h[3]),t.Vx.Xx()&&t.Vx.fC(e[0],e[1]),t.Yx.Xx()&&t.Yx.fC(e[2],e[3]),t.Ux.Xx()&&t.Ux.lC(this.SC)}eI(){this.vf=13}hI(){const t=this.wC.pv,i=t.Kx,e=this.IC;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.uC()?h.dC(r.fa(),r.ma(),r.ga()):h.lC(r)}}rI(t){this.vf=14,this.bC=t}nI(){const t=this.mx,s=this.bC,i=this.wC.Ob;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}oI(t,s,i){this.vf=17;const e=this.xC,h=this.wC.renderer,r=(e[0]=t.Mm(),e[1]=t.Em(),e[2]=(s||h).Mm(),e[3]=(s||h).Em(),e[4]=t.Bb()?1:0,e[5]="stretch"===i,this.IC);Di.Qn(r),r.push(t.Pb()),r.push(s?s.Pb():null)}aI(){const t=this.xC,s=this.IC,i=this.mx,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}uI(t){this.vf=18,this.bC=t}lI(){this.bC.cI(),this.bC=null}fI(t){this.vf=19,this.bC=t}dI(){this.bC.pI(),this.bC=null}mI(t,s,i){this.vf=20;const e=this.xC;e[0]=t,e[1]=s,e[2]=i}gI(){const t=this.wC.pv,s=this.xC;t.zx.Xx()&&t.zx.fC(s[0],s[1]),t.Nx.Xx()&&t.Nx.lC(s[2])}yI(t,s,i,e,h,r,n){this.vf=16;const o=this.xC;t.wa(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}MI(){const t=this.wC.pv,s=this.xC;t.kx.Xx()&&t.kx.fC(s[0],s[1]),t.zx.Xx()&&t.zx.fC(s[4],s[5]),t.Ex.Xx()&&t.Ex.fC(s[6],s[7]),t.Ax.Xx()&&t.Ax.fC(s[8],s[9])}wI(t,s,i,e,h,r,n){this.vf=29;const o=this.xC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}SI(){const t=this.wC.pv,s=this.xC;t.zx.Xx()&&t.zx.fC(s[0],s[1]),t.Ex.Xx()&&t.Ex.fC(s[2],s[3]),t.Nx.Xx()&&t.Nx.lC(s[4]),t.Ax.Xx()&&t.Ax.fC(s[5],s[6])}TI(t){this.vf=22,this.SC=t?1:0}bI(){const t=this.mx,s=0!==this.SC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}xI(t){this.vf=23,this.SC=t?1:0}vI(){const t=this.mx;0===this.SC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}CI(t){this.vf=24,this.SC=t?1:0}II(){const t=this.mx,s=this.wC,i=s.renderer,e=0!==this.SC;s.mC=e,t.activeTexture(t.TEXTURE2),e?(s.Rb&&t.bindFramebuffer(t.FRAMEBUFFER,s.Rb),t.bindTexture(t.TEXTURE_2D,i.Eb())):(t.bindTexture(t.TEXTURE_2D,null),s.Rb&&t.bindFramebuffer(t.FRAMEBUFFER,s.Ob)),t.activeTexture(t.TEXTURE0)}GI(){this.vf=25}_I(){const t=this.mx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}EI(){this.vf=26}AI(){const t=this.mx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}DI(){this.vf=27}NI(){const t=this.mx;t.disable(t.STENCIL_TEST)}LI(t,s,i,e,h){this.vf=28,this.SC=t?1:0;const r=this.xC;r[0]=s,r[1]=i,r[2]=e,r[3]=h}OI(){const t=this.mx,s=this.xC;1===this.SC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}RI(){switch(this.vf){case 1:return void this._C();case 2:return void this.AC();case 3:return void this.NC();case 4:return void this.PC();case 5:return void this.FC();case 6:return void this.BC();case 7:return void this.UC();case 8:return void this.QC();case 9:return void this.YC();case 10:return void this.XC();case 11:return void this.$C();case 12:return void this.sI();case 13:return void this.hI();case 14:return void this.nI();case 15:return void this.qC();case 16:return void this.MI();case 17:return void this.aI();case 18:return void this.lI();case 19:return void this.dI();case 20:return void this.gI();case 21:return void this.OC();case 22:return void this.bI();case 23:return void this.vI();case 24:return void this.II();case 25:return void this._I();case 26:return void this.AI();case 27:return void this.NI();case 28:return void this.OI();case 29:return void this.SI()}}}}{let G=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};G,t,o;const Li=self.ks,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},Pi=new Li.qo(0,0,0,1),ki=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),Bi=new Set(["ltr","rtl"]),zi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.nf();for(const i of zi)(i.kI()||Li.Mh(i.FI(),s))&&i.jI()});let s=!1,i=!1;Li.yy._S=class{constructor(t,s){s=Object.assign({},Ri,s),this.AS=t,this.BI="Arial",this.zI=16,this.UI=1,this.WI=0,this.QI=!1,this.JI=!1,this.VI="black",this.YI=!1,this.fm=null,this.HI=!0,this.qI=null,this.ZI=new Set,this.XI="left",this.KI="top",this.yf="",this.$I=null,this.tG=Li.pr(Li.um),this.sG="word",this.iG="ltr",this.eG=!1,this.hG=!1,this.rG=!1,this.nG=-1,this.oG=0,this.aG=0,this.uG=0,this.sg=0,this.ig=0,this.lG=1,this.cG=null,this.fG=null,this.dG=null,this.pG=null,this.mG=-1,this.gG=-1,this.yG="",this.MG="",this.wG="",this.SG=1,this.TG=1,this.bG=t=>this.xG(t),this.E2=null,this.vG=new Li.Rect,this.CG=1,this.IG=new Li.c0(()=>{this.GG(),this._G(8,8)},s.timeout),this.EG=null,this.AG=!1,zi.add(this)}mr(){this.qI=null,this.ZI.clear(),this.fm=null,this.$I=null,this.cG=null,this.fG=null,this.dG=null,this.pG=null,this.bG=null,this.IG.mr(),this.EG=null,this.GG(),this.tG.oc(),this.tG=null,this.AS=null,this.AG=!0,zi.delete(this)}DG(){this.rG=!0}NG(){this.DG(),this.hG=!0}jI(){this.NG(),this.eG=!0}LG(t){if(this.YI!==(t=!!t)){this.YI=t;const s=this.YI?"alphabetic":"top";this.fG&&(this.fG.textBaseline=s),this.dG&&(this.dG.textBaseline=s),this.jI()}}kI(){return this.YI}gm(t){this.fm!==t&&(this.fm=t,this.tG.gm(t),this.fm&&this.fm.qg()&&this.fm.Zg().then(()=>this.DG()),this.jI())}OG(t){this.HI!==(t=!!t)&&(this.HI=t,this.DG())}PG(t){this.BI!==(t=t||"serif")&&(this.BI=t,this.jI())}FI(){return this.BI}kG(t){this.zI!==(t=t<.1?.1:t)&&(this.zI=t,this.jI())}FG(){return this.zI}jG(t){this.UI!==t&&(this.UI=t,this.jI())}BG(t){this.WI!==t&&(this.WI=t,this.NG())}zG(){return this.WI}UG(t){this.QI!==(t=!!t)&&(this.QI=t,this.jI())}WG(){return this.QI}QG(t){this.JI!==(t=!!t)&&(this.JI=t,this.jI())}JG(){return this.JI}VG(t){t=Math.floor(t),this.nG!==t&&(this.nG=t,this.DG())}YG(){return this.nG}HG(t,s){let i=[];(this.QI||s.Mg("b"))&&i.push("bold"),(this.JI||s.Mg("i"))&&i.push("italic");const e=s.yg("size"),h=(e?parseFloat(e.param):this.zI)*this.UI;i.push(t?h+"pt":h*this.qG()+"pt");let r=this.BI,n=s.yg("font");return n&&n.param&&(r=n.param,this.qI)&&!this.ZI.has(r)&&(this.qI(r),this.ZI.add(r)),r&&(Oi.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}uT(t){t instanceof Li.qo&&(t=t.Da()),this.VI!==t&&(this.VI=t,this.DG())}ZG(t,s,i){Pi.ia(t,s,i),this.uT(Pi)}XG(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.XI!==t&&(this.XI=t,this.NG())}KG(){return this.XI}$G(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this.KI!==t&&(this.KI=t,this.NG())}t_(){return this.KI}s_(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.sG!==t&&(this.sG=t,this.jI())}i_(){return this.sG}e_(t){if(!Bi.has(t))throw new Error("invalid text direction");this.iG!==t&&(this.iG=t,this.fG&&(this.fG.direction=this.iG),this.dG&&(this.dG.direction=this.iG),this.jI())}h_(){return this.iG}Sf(t){this.yf!==t&&(this.yf=t,this.jI())}r_(){return this.yf}qG(){return this.CG*this.lG*self.devicePixelRatio}n_(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.aG===r&&this.uG===n&&this.lG===o)){let t=this.aG,s=(this.aG=r,this.uG=n,this.lG=o,self.devicePixelRatio),i=(this.sg=this.aG*this.lG*s,this.ig=this.uG*this.lG*s,Math.max(this.sg,this.ig)),e=Math.min(this.AS.B2(),4096),h=1;e<i&&(h=e/i,this.sg=Math.min(this.sg*h,e),this.ig=Math.min(this.ig*h,e)),this.CG=h,this.aG!==t?this.jI():this.NG()}}Mm(){return this.sg}Em(){return this.ig}o_(){return this.lG}a_(){return this.u_(),this.tG.$m()}l_(){return this.u_(),this.tG.tg()+this.tG.pm()*(this.WI+4)-this.WI}c_(){this.u_();let t=0;for(const s of this.tG.dm())for(const i of s.Rm())t+=i.Pm();return t}Fb(){return this.IG.g0(),this.f_(),this.E2}d_(t,s){this.u_();const i=this.qG(),e=this.tG.dm();for(const h of e){const r=h.Dm()*i;if(s>=h.pg()-h.Em()*i+r&&s<h.pg()+r)for(const n of h.Rm())if(t>=n.fg()&&t<n.fg()+n.Mm()*i)return n}return null}*p_(t){this.u_();const s=this.tG.dm();for(const i of s)for(const e of i.Rm()){const h=e.yg("tag");h&&Li.Mh(h.param,t)&&(yield e)}}m_(t,s){for(const i of this.p_(t)){if(0===s)return i;--s}return null}g_(t){let s=0;for(const i of this.p_(t))++s;return s}f_(){this.E2&&!this.rG&&!this.hG&&!this.eG||this.AG||this.sg<=0||this.ig<=0||(this.rG=!1,this.y_())}y_(){this.AG||(this.u_(),this._G(Math.max(Li.Qr(Math.ceil(this.sg)),128),Math.max(Li.Qr(Math.ceil(this.ig)),64)),this.M_(),this.w_(),this.IG.g0())}_G(t,s){this.cG||(this.cG=Li.ko(16,16));let i=!1;this.mG===t&&this.gG===s||(this.mG=t,this.gG=s,this.cG.width=t,this.cG.height=s,i=!0),this.fG||(this.fG=this.cG.getContext("2d"),i=!0),i?(this.fG.textBaseline=this.YI?"alphabetic":"top",this.fG.direction=this.iG,this.fG.font=this.yG,this.fG.fillStyle=this.wG,this.fG.strokeStyle=this.wG,this.fG.globalAlpha=this.SG,this.fG.lineWidth=this.TG):this.fG.clearRect(0,0,t,s)}S_(){this.dG||(this.dG=Li.ko(16,16).getContext("2d"),this.pG=Li.ko(16,16).getContext("2d"),this.dG.textBaseline=this.YI?"alphabetic":"top",this.pG.textBaseline="top",this.dG.direction=this.iG,this.pG.direction=this.iG)}T_(t){this.MG!==t&&(this.MG=t,this.dG.font=t,this.pG.font=t)}b_(){if(!s){s=!0,this.S_();const t=this.dG.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}u_(){this.x_(),this.v_()}x_(){this.eG&&(this.S_(),!this.YI||this.$I&&this.$I.toString()===this.yf||(this.$I=new Li.Nh(this.yf,{zp:!0})),this.tG.um(this.YI?this.$I.Kp():this.yf,this.bG,this.aG,this.sG,0),this.eG=!1)}v_(){this.hG&&(this.C_(),this.hG=!1)}xG(t){let s=t.Cm()?t.Wm().join(""):" ",i=(this.T_(this.HG(!0,t)),t.yg("size")),e=(i?parseFloat(i.param):this.zI)*this.UI,h=this.dG.measureText(s),r=0;if(this.YI&&this.b_()){const n=this.pG.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,vm:r}}I_(t){this.yG!==t&&(this.yG=t,this.fG.font=t)}G_(t){this.wG!==t&&(this.wG=t,this.fG.fillStyle=t,this.fG.strokeStyle=t)}__(t){this.SG!==t&&(this.SG=t,this.fG.globalAlpha=t)}E_(t){this.TG!==t&&(this.TG=t,this.fG.lineWidth=t)}C_(){let e=this.qG(),h=(4+this.WI)*e,r=0,n=this.tG.dm();if(0!==n.length){for(const s of n){s.lg(NaN),s.dg(NaN);for(const o of s.Rm())o.lg(NaN),o.dg(NaN)}let t=this.YI&&this.b_(),i=n[0].Em()*e;if("center"===this.KI){const a=n.reduce((t,s)=>t+s.Em()*e+h,0)-h;r=Math.max(this.ig/2-a/2,0),t&&(i=n[0].Nm()*e)}else if("bottom"===this.KI){const u=n.reduce((t,s)=>t+s.Em()*e+h,0)-this.WI*e,l=t?n.at(-1).Dm()*e:0;r=this.ig-u-l-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.Em()*e,d=r;if(this.YI){if(r+=0===t?i:f,0<t&&r>this.ig-4*e)break}else if(0<t&&r>=this.ig-f)break;0<=d&&this.A_(c,r,e),this.YI||(r+=f),r+=h}}}A_(t,s,i){let e=0;"center"===this.XI?e=Math.floor((this.sg-t.Mm()*i)/2):"right"===this.XI&&(e=this.sg-t.Mm()*i),t.lg(e),t.dg(s);for(const h of"ltr"===this.iG?t.Rm():t.ag())this.D_(h,e,s,i),e+=h.Mm()*i}D_(t,s,i,e){const h=t.yg("offsetx"),r=(s+=h?o(h.param,t.Em())*e:0,t.yg("offsety"));if(i+=r?o(r.param,t.Em())*e:0,t.Gm()){const n=t.yg("iconoffsety");i+=n?o(n.param,t.Em())*e:.2*t.Em()*e}t.lg(s),t.dg(i)}M_(){this.fG.imageSmoothingEnabled=this.HI,this.fG.imageSmoothingQuality="high",this.oG=0;const t=this.qG(),s=this.tG.dm();for(const i of s)this.N_(i,t)}N_(t,s){const i=t.fg(),e=t.pg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.iG?t.Rm():t.ag())this.L_(h,s,t.Em())}L_(n,o,a){const u=this.fG,l=n.fg(),c=n.pg();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=n.Mm()*o,i=n.Em()*o,e=n.Em()/16,h=(4+this.WI)*o,r=n.Cm()?n.Wm():null;if(-1!==this.nG){if(this.oG>=this.nG)return;n.Cm()&&this.oG+r.length>this.nG&&(r=r.slice(0,this.nG-this.oG),s=this.xG(n).width*o),this.oG+=n.Pm()}const f=n.yg("background"),d=n.Mg("u"),p=n.Mg("s");if((!n.Cm()||!Li.Xd(r)||f||d||p)&&!n.Mg("hide")){const m=n.yg("color"),g=n.yg("opacity"),y=(this.__(g?parseFloat(g.param)/100:1),f&&(this.G_(f.param),u.fillRect(l,c-i,s,i+h)),n.yg("linethickness")),M=y?parseFloat(y.param):1,w=n.Mg("stroke");if(w&&this.E_(.5*e*M*this.qG()),n.Cm()){const S=r.join("");if(this.I_(this.HG(!1,n)),!w){this.E_(.5*e*M*this.qG());const T=n.yg("outlineback");T&&(this.G_(T.param),this.O_(!0,S,l,c,s))}if(this.G_(m?m.param:this.VI),this.O_(w,S,l,c,s),!w){this.E_(.5*e*M*this.qG());const b=n.yg("outline");b&&(this.G_(b.param),this.O_(!0,S,l,c,s))}}else if(n.Gm()&&0<n.Mm()){const x=n.Ig(this.fm);x&&u.drawImage(x,l,c-i,s,i)}if(this.G_(m?m.param:this.VI),d&&G(u,w,l,c+o*t,s,o*t*M),p){const v=c-i/4,C=o*e,I=v+C/2;u.fillRect(l,I-C*M/2,s,C*M)}}}}O_(t,s,i,e,h){"rtl"===this.iG&&(i+=h),t?"Gecko"===Li.ai.gi?this.fG.strokeText(s,i,e,h):this.fG.strokeText(s,i,e):"Gecko"===Li.ai.gi?this.fG.fillText(s,i,e,h):this.fG.fillText(s,i,e)}w_(){this.AS.R_()||(this.E2||(this.E2=this.AS._b(this.cG.width,this.cG.height,{C2:!0,I2:"high"})),this.AS.P_(this.cG,this.E2),this.vG.set(0,0,this.sg/this.E2.Mm(),this.ig/this.E2.Em()),this.EG&&this.EG())}k_(){return this.vG}GG(){this.E2&&(this.AS.R_()||this.AS.Nb(this.E2),this.E2=null)}static lT(){for(const t of zi)t.GG()}static F_(){return zi.values()}}}{const Ui=self.ks;class Wi{constructor(t){this.mx=t.z2(),this.j_=t.U2(),this.B_=t.z_(),this.U_=null,this.m0=!1,this.W_=!1,this.Q_=0,1===this.j_?this.U_=this.B_.createQueryEXT():this.U_=this.mx.createQuery()}mr(){this.J_(),this.mx=null,this.B_=null,this.W_=!1}J_(){this.U_&&(1===this.j_?this.B_.deleteQueryEXT(this.U_):this.mx.deleteQuery(this.U_),this.U_=null)}cI(){if(this.m0)throw new Error("query already active");1===this.j_?this.B_.beginQueryEXT(this.B_.TIME_ELAPSED_EXT,this.U_):this.mx.beginQuery(this.B_.TIME_ELAPSED_EXT,this.U_),this.m0=!0}pI(){if(!this.m0)throw new Error("query not active");1===this.j_?this.B_.endQueryEXT(this.B_.TIME_ELAPSED_EXT):this.mx.endQuery(this.B_.TIME_ELAPSED_EXT),this.m0=!1}V_(){if(this.U_&&!this.W_&&!this.m0){let t;t=1===this.j_?this.B_.getQueryObjectEXT(this.U_,this.B_.QUERY_RESULT_AVAILABLE_EXT):this.mx.getQueryParameter(this.U_,this.mx.QUERY_RESULT_AVAILABLE);const s=this.mx.getParameter(this.B_.GPU_DISJOINT_EXT);t&&!s&&(1===this.j_?this.Q_=this.B_.getQueryObjectEXT(this.U_,this.B_.QUERY_RESULT_EXT):this.Q_=this.mx.getQueryParameter(this.U_,this.mx.QUERY_RESULT),this.Q_/=1e9,this.W_=!0),(t||s)&&this.J_()}}Y_(){return this.W_}H_(){if(this.W_)return this.Q_;throw new Error("no result available")}}Ui.yy.q_=class{constructor(t){this.AS=t,this.dM=t.gS(),this.m0=!1,this.Z_=null,this.X_=!1,this.K_=null,this.tE=[]}mr(){for(const t of this.tE)t instanceof Wi&&t.mr();Ui.Qn(this.tE),this.Z_=null,this.K_=null,this.AS=null}cI(){if(this.m0)throw new Error("query already active");const t=this.AS.sE();0<t.length?(this.X_=!0,this.Z_=t.at(-1),this.Z_.iE(),this.Z_.tE.push(this)):(this.X_=!1,this.Z_=null),this.m0=!0,t.push(this),this.eE()}pI(){if(!this.m0)throw new Error("query not active");const t=this.AS.sE().pop();if(t!==this)throw new Error("can only end most nested query");this.m0=!1,this.iE(),this.Z_&&(this.Z_.eE(),this.Z_=null)}eE(){this.K_=Ui.pr(Wi,this.AS),this.tE.push(this.K_),this.K_.cI()}iE(){this.K_.pI(),this.K_=null}V_(){for(const t of this.tE)t.V_()}hE(){return this.X_}Y_(){return this.tE.every(t=>t.Y_())}H_(){return this.tE.reduce((t,s)=>t+s.H_(),0)}gS(){return this.dM}}}{const Qi=self.ks;Qi.yy.rE=class{constructor(t,s=1e3){this.AS=t,this.nE=s,this.oE=[],this.AS.aE(this)}mr(){this.oc(),this.AS.uE(this),this.AS=null}oc(){for(const t of this.oE)t.mr();Qi.Qn(this.oE)}lE(){const t=new Qi.yy.q_(this.AS);if(this.oE.push(t),this.oE.length>this.nE){const s=this.oE.shift();s.mr()}return t}cE(t){for(const s of this.oE){if(s.gS()>=t)return;if(s.hE())return;s.V_()}}fE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.oE){if(e.gS()>=s)break;if(!(e.gS()<t)){if(!e.Y_())return NaN;i+=e.H_()}}return i}dE(i){for(let t=0,s=this.oE.length;t<s;++t){const e=this.oE[t];if(!(e.gS()<i))return void(0<t&&this.oE.splice(0,t));e.mr()}}}}{let i=function(){h=-1;for(const t of e)t.pE()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.ks),t=self.Ss,T=(t._s,t.Es),y=t.vs,r={powerPreference:"default",mE:!0,alpha:!1,depth:!1,gE:!1,yE:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new S.nl(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.nl,x=new S.Rect,v=null,e=(S.isDebug&&(self.ME=function(){v?v.loseContext():console.warn("WEBGL_lose_context not supported")},self.wE=function(){v?v.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.yy.SE=class extends S.yy.Ly{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.yE&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.mx=e,this.TE=e.getContextAttributes(),this.bE=e.getParameter(e.VERSION),this.j_=h,this.xE=T.create(),this.vE=!1,this.CE=y.create(),this.IE=!!s.depth,this.GE=!(!s.depth||!s.gE),this._E=this.IE,this.EE=!1,this.AE=null,this.DE=!0,this.NE=0,this.LE=0,this.Mx=null,this.wx=null,this.OE=null,this.Sx=null,this.RE=new Float32Array(8e3*this.dS()),this.PE=new Uint16Array(12e3),this.kE=new Float32Array(16e3),this.FE=new Float32Array(32e3),this.jE=0,this.BE=0,this.zE=0,this.UE=0,this.WE=null,this.QE=null,this.JE=[],this.VE=0,this.YE=0,this.HE=null,this.qE=0,this.wC=S.pr(S.yy.pC,this),this.ZE=S.pr(S.qo,1,1,1,1),this.XE=null,this.iI=null,this.KE=0,this.$E=0,this.tA=new S.Rect,this.sA=S.pr(S.Rect,0,0,-1,-1),this.iA=0,this.eA=-1,this.hA=0,this.rA=0,this.nA=0,this.oA="(unavailable)",this.aA="(unavailable)",this.uA=[],this.lA=!1,this.cA=null,this.fA=null,this.dA=null,this.pA=null,this.mA=null,this.gA=null,this.yA=0,this.MA=!!s.mE,this.B_=null,this.wA=new Set,this.SA=[],this.gM(this.PE)}bS(){return!0}async wM(){super.wM();const t=this.mx,s=this.dS(),i=(this.ZE.ta(1,1,1,1),this.XE=null,this.iI=null,this.jE=0,this.zE=0,this.UE=8e3*s-4*s,S.Qn(this.JE),this.VE=0,this.YE=0,this.WE=null,this.HE=null,this.tA.set(0,0,1,1),this.qE=0,this.wC),e=(i.pv=null,i.Ob=null,i.Rb=null,T.set(i.gC,1,1,1,1),i.clearColor.ta(0,0,0,0),i.yC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.KE=t.ONE,this.$E=t.ONE_MINUS_SRC_ALPHA,this.TA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.IE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this._E=this.IE,this.EE=!1,this.Sx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Sx),t.bufferData(t.ARRAY_BUFFER,this.FE.byteLength,t.DYNAMIC_DRAW),this.Mx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Mx),t.bufferData(t.ARRAY_BUFFER,this.RE.byteLength,t.DYNAMIC_DRAW),this.wx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.wx),t.bufferData(t.ARRAY_BUFFER,this.kE.byteLength,t.DYNAMIC_DRAW),this.OE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.OE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.PE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.eA=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.hA=e[0],this.rA=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.nA=h&&r?Math.min(h.precision,r.precision):0,2048<this.rA&&(this.rA=2048),this.uA=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.oA=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.aA=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.cA=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(v=t.getExtension("WEBGL_lose_context")),this.MA&&(1===this.U2()?this.B_=t.getExtension("EXT_disjoint_timer_query"):this.B_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.fA=t.getExtension("EXT_texture_filter_anisotropic"),this.fA?this.yA=t.getParameter(this.fA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.yA=0,this.U2()<2&&this.IE&&this.GE&&(this.dA=t.getExtension("WEBGL_depth_texture"),!this.dA))throw new Error("no depth texture support");this.U2()<2&&(this.pA=t.getExtension("EXT_frag_depth"),this.mA=t.getExtension("OES_standard_derivatives"),this.gA=t.getExtension("EXT_shader_texture_lod"));let o=S.yy.$b,a=o.Pv(!1),u=o.Fv(),l=a,c=o.Yv(),f=o.Jv(),d=o.zv(),p=o.Pv(!0),m=!1;this.IE&&(this.U2()<2?this.pA&&(u=o.jv(),c=o.Hv(),d=o.Uv(),m=!0):(l=o.kv(),u=o.Bv(),c=o.qv(),f=o.Vv(),d=o.Wv(),p=o.kv(!0)));const g=o.Qv(this.U2(),m,this.mA&&this.gA),y=2<=this.U2()?o.kv():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.Zv(),a,"<fill>"],[o.Xv(),a,"<lineargradient>"],[o.Kv(),a,"<penumbra>"],[o.tC(),a,"<hardellipse>"],[o.sC(),a,"<hardellipseoutline>"],[o.iC(),a,"<smoothellipse>"],[o.eC(),a,"<smoothellipseoutline>"],[o.$v(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.bA({src:t[0],ix:t[1],name:t[2]})));this.Wy=w[0],this.QE=w[1],this.Qy=w[2],this.Yy=w[3],this.Hy=w[4],this.qy=w[5],this.Zy=w[6],this.Xy=w[7],this.Ky=w[8],this.$y=w[9],this.tM=w[10],this.Jy=w[11],this.Vy=w[12],this.WM()}async bA(t){const s=await S.yy.$b.ux(this,t);return this.jM(s),s}xA(){this.WE=null}n_(t,s,i){if(this.sg!==t||this.ig!==s||i){this.mS();const e=this.mx,h=this.wC;this.sg=t,this.ig=s,this.vA(0,0,t,s),this.OM(this.CE,t/s),this.CA(this.CE),this.QE&&(e.useProgram(this.QE.gv()),this.QE.av(this.Py),this.WE=this.QE,this.wC.pv=this.QE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.XE=null,this.iI=null,this.IE&&this.DE&&this.IA(this.sg,this.ig),this.HE&&this.HE.Db(this.sg,this.ig),e.bindFramebuffer(e.FRAMEBUFFER,null),this.HE=null,h.Ob=null,h.Rb=null}}IA(t,s){const i=this.mx;this.AE&&this.NE===t&&this.LE===s||(this.GE?(this.AE&&i.deleteTexture(this.AE),this.AE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.AE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.U2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.dA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.dA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.AE&&i.deleteRenderbuffer(this.AE),this.AE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.AE),i.renderbufferStorage(i.RENDERBUFFER,2<=this.j_?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.NE=t,this.LE=s)}GA(t,s){this.IE&&(this.DE=!1,this.IA(t,s))}_A(){this.IE&&(this.DE=!0,this.IA(this.sg,this.ig))}vA(t,s,i,e){const h=this.xE;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.EA();r.kC(t,s,i,e),T.set(h,t,s,i,e),this.YE=0}}EM(t){super.EM(t),this.OM(this.CE,this.sg/this.ig)}CM(t){super.CM(t),this.OM(this.CE,this.sg/this.ig)}GM(t){super.GM(t),this.OM(this.CE,this.sg/this.ig)}CA(t){if(!y.B(this.Py,t)){const s=this.EA();s.jC(t),y.I(this.Py,t),this.YE=0,this.vE=!0}}AA(){let t,s,i,e=this.HE;i=(null===e?(t=this.CE,s=this.Mm(),this):(t=e.jb(),s=e.Mm(),e)).Em(),this.CA(t),this.vA(0,0,s,i)}DA(t){if(!y.B(this.ky,t)){const s=this.EA();s.zC(t),y.I(this.ky,t),this.YE=0,this.vE=!0}}NA(){this.vE=!1}LA(){return this.vE}Lb(){return this.wC}EA(){const t=this.JE;return this.VE===t.length&&t.push(new S.yy.MC(this.wC)),t[this.VE++]}mS(){0===this.VE||this.R_()||(this.OA(),this.RA(),this.VE=0,this.jE=0,this.BE=0,this.zE=0,this.YE=0)}OA(){const t=this.mx;0<this.zE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Sx),t.bufferSubData(t.ARRAY_BUFFER,0,this.FE.subarray(0,this.zE))),0<this.jE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Mx),t.bufferSubData(t.ARRAY_BUFFER,0,this.RE.subarray(0,this.jE)),t.bindBuffer(t.ARRAY_BUFFER,this.wx),t.bufferSubData(t.ARRAY_BUFFER,0,this.kE.subarray(0,this.BE)))}RA(){const i=this.JE;for(let t=0,s=this.VE;t<s;++t)i[t].RI()}PA(){return this.ZE.ya()}kA(t,s,i,e){const h=this.ZE;if(!h.xa(t,s,i,e)){h.ta(t,s,i,e);const r=this.EA();r.DC(h),this.YE=0,this.iM=null}}FA(t){const s=this.ZE;if(s.ya()!==t){s.ua(t);const i=this.EA();i.DC(s),this.YE=0,this.iM=null}}uT(t){const s=this.ZE;if(!s.equals(t)){s.set(t);const i=this.EA();i.DC(s),this.YE=0,this.iM=null}}jA(){this.kA(1,1,1,1)}BA(){return this.ZE}zA(t){if(t!==this.XE){const s=this.EA();s.EC(t),this.XE=t,this.YE=0}}V2(){this.XE=null}aT(t){const s=this.Sw(t);this.UA(s[0],s[1])}WA(t){const s=this.xw(t);this.UA(s.Mw,s.ww)}UA(t,s){if(t!==this.KE||s!==this.$E){const i=this.EA();i.RC(t,s),this.KE=t,this.$E=s,this.YE=0,this.iM=null}}QA(){return this.KE===this.mx.ONE&&this.$E===this.mx.ONE_MINUS_SRC_ALPHA}JA(){this.UA(this.mx.ONE,this.mx.ONE_MINUS_SRC_ALPHA)}VA(){this.UA(this.mx.SRC_ALPHA,this.mx.ONE_MINUS_SRC_ALPHA)}YA(){this.UA(this.mx.ONE,this.mx.ZERO)}Rect(t){this.HA(t.Au(),t.Du(),t.Nu(),t.Lu())}HA(t,s,i,e){this.fS(t,s,i,s,i,e,t,e)}qA(){let t=this.jE;if(t>=this.UE&&(this.mS(),t=0),1===this.YE)this.JE[this.VE-1].TC+=6;else{const s=this.EA();s.GC(t,6),this.YE=1}}ZA(t){t.Il(this.RE,this.jE,this.rM+this.nM),this.jE+=12}nl(t){this.qA(),this.ZA(t),c.wa(this.kE,this.BE),this.BE+=8}fS(t,s,i,e,h,r,n,o){this.qA();let a=this.RE,u=this.jE,l=this.rM+this.nM;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=r,a[u++]=l,a[u++]=n,a[u++]=o,a[u++]=l,this.jE=u,c.wa(this.kE,this.BE),this.BE+=8}jw(t,s){this.qA(),this.ZA(t),s.Pu(this.kE,this.BE),this.BE+=8}XA(t,s){this.qA(),this.ZA(t),s.wa(this.kE,this.BE),this.BE+=8}KA(t,s,i,e,h,r,n,o,a,u,l,c,f){this.qA();let d=this.RE,p=this.jE,m=this.rM+this.nM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.jE=p,f.Pu(this.kE,this.BE),this.BE+=8}Ow(t,s,i,e,h,r,n,o,a,u,l,c,f){this.qA();let d=this.RE,p=this.jE,m=this.rM+this.nM;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.jE=p,f.wa(this.kE,this.BE),this.BE+=8}$A(e,h,r){const n=this.RE,o=this.kE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.qA();let t=this.jE,s=this.BE;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.jE=t,this.BE=s}}tD(t,s){this._w(0),y.I(M,this.Py),y.I(w,this.ky),this.AA();const[i,e]=this.sD(this.HE),h=this.FM(0,0,this.TM(e),0,0,0,e);if(this.DA(h),"crop"===t&&this.HE&&s){const r=this.sg/2,n=this.ig/2,o=s.Mm(),a=s.Em(),u=this.HE.Mm(),l=this.HE.Em(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);x.set(-r,n-p,-r+c,n-f-p),b.Gl(x),x.set(0,d,c,f+d),x.It(o,a),this.jw(b,x)}else{const m=i/2,g=e/2;this.HA(-m,g,m,-g)}this.CA(M),this.DA(w)}iD(t){if(!this.tA.equals(t)){this.tA.I(t);const s=this.EA();s.HC(t),this.YE=0}}eD(){}hD(t,s,i,e){7996<=this.zE&&this.mS();let h=this.zE,r=this.rM+this.nM;if(2===this.YE&&this.qE===r)this.JE[this.VE-1].TC++;else{const o=this.EA();o.ZC(h,r),this.YE=2,this.qE=r}const n=this.FE;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.zE=h}QM(t){if(this.WE!==t){const s=this.EA();s.KC(t),this.WE=t,this.YE=0,this.iM=null}}rD(){return this.WE}nD(){this.QM(this.QE)}oD(t){const s=this.EA();s.LC(t),this.YE=0}aD(t,s,i=1){const e=this.EA();e.mI(t,s,i),this.YE=0}uD(t,s,i,e,h,r,n){if(this.WE!==this.Jy)throw new Error("must set tilemap fill mode first");const o=this.EA();o.yI(t,s,i,e,h,r,n),this.YE=0}lD(t,s,i,e,h,r,n){if(this.WE!==this.Vy)throw new Error("must set tile randomization mode first");const o=this.EA();o.wI(t,s,i,e,h,r,n),this.YE=0}cD(t,s,i,e,h,r,n,o,a,u,l){const c=this.WE;if(l%=10800,c.Zx&&!c.vv(s,i,e,h,r,n,o,a,u,l)){const f=this.EA(),d=(f.tI(),c.Gv(s,i,e,h,r,n,o,a,u,l),f.xC),p=(d[0]=r,d[1]=n,s.wa(d,2),d[6]=a,d[7]=u,i.wa(d,12),f.vC),m=(h.wa(p,0),p[1]);p[1]=p[3],p[3]=m,e.wa(f.CC,0),f.SC=l,f.TC=o,c.Lx.Xx()?f.bC=t?t.Fb():null:f.bC=null,this.YE=0}}fD(t){const s=this.WE;if(0!==t.length&&!s.Sv(t)){const i=this.EA();i.eI(),s.bv(t),S.Hn(i.IC,t),this.YE=0}}dD(t,s,i,e){const h=this.EA();h.VC(t,s,i,e),this.YE=0}oc(t){const s=this.EA();s.JC(t),this.YE=0}pD(){}pS(){super.pS(),this.mx.flush()}mD(){if(this.IE&&this.HE&&this.HE.Wb()){const t=this.EA();t.TI(this._E),this.YE=0}}gD(t){if(this._E!==(t=!!t)&&this.IE){this._E=t;const s=this.EA();s.xI(t),this.YE=0}}yD(){return this._E}Eb(){return this.AE}Ab(){return this.GE}MD(t){if(t=!!t,this.GE&&this.EE!==t){if(t&&this.yD())throw new Error("depth still enabled");this.EE=t;const s=this.EA();s.CI(t),this.YE=0}}wD(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.sA.Eu(t,s,i,e)){this.sA.bu(t,s,i,e);const r=h||this.sD(this.SD())[1],n=(s=r-s-e,this.EA());n.LI(!0,t,s,i,e),this.YE=0}}TD(){if(-1!==this.sA.Nu()){this.sA.set(0,0,-1,-1);const t=this.EA();t.LI(!1,0,0,0,0),this.YE=0}}bD(){for(const t of this.wA)t.cE(this.dM)}R_(){return!this.mx||this.mx.isContextLost()||this.lA}lT(){super.SM(),S.yy._2.lT(),S.yy.fb.lT(),S.yy._S.lT();for(const t of this.wA)t.oc();this.uA=[],this.B_=null,this.cA=null,this.fA=null,this.dA=null,this.pA=null,this.mA=null,this.gA=null,this.yA=0,this.oA="(unavailable)",this.aA="(unavailable)",this.WE=null,this.QE=null,this.AE=null;for(const s of this.sM.values())s.lT()}async cT(){this.lA=!0,await this.wM(),this.lA=!1;for(const t of this.sM.values())t.cT(this);this.n_(this.sg,this.ig,!0)}xD(t,s){if(this.R_())throw new Error("context lost");this.mS();const i=S.pr(S.yy._2,this);return i.j2(t,s),i}async vD(e,h){if(this.R_())throw new Error("context lost");if(h=Object.assign({},h),S.Bi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.w2&&"clamp-to-edge"!==h.w2||h.S2&&"clamp-to-edge"!==h.S2,i=S.Wr(t.width)&&S.Wr(t.height);return this.W2()||i||!s?h.premultiplyAlpha=!1:S.Bi.Ji?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.Qr(t.width),resizeHeight:S.Qr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.Qf(()=>this.xD(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.Po(e);e=t}return S.Qf(()=>this.xD(e,h))}_b(t,s,i){this.mS();const e=S.pr(S.yy._2,this);return e.Y2(t,s,i),e}P_(t,s,i){this.mS(),s.K2(t,i)}Nb(t){t&&(t.hb(),0<t.rb()||(this.mS(),t===this.XE&&(this.mx.bindTexture(this.mx.TEXTURE_2D,null),this.XE=null),t===this.iI&&(this.mx.activeTexture(this.mx.TEXTURE1),this.mx.bindTexture(this.mx.TEXTURE_2D,null),this.mx.activeTexture(this.mx.TEXTURE0),this.iI=null),t.tb()))}CD(t){let s=this.sg,i=this.ig,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.mS();const h=S.pr(S.yy.fb,this);return h.Ib(s,i,Object.assign({lb:e},t)),this.HE=null,this.wC.Ob=null,this.wC.Rb=null,h}ID(t,s=!0){if(t!==this.HE){t&&t.Qb()&&t.Db(this.sg,this.ig);const i=this.EA();i.WC(t),this.HE=t,this.YE=0,s&&this.AA()}}SD(){return this.HE}sD(t){return t?[t.Mm(),t.Em()]:[this.sg,this.ig]}GD(t,s="stretch"){if(this.j_<2||this.HE&&0<this.HE.Jb())this.YA(),this.jA(),this._D(t,s);else{const i=this.EA();i.oI(t,this.HE,s),this.YE=0}}_D(t,s="stretch"){const i=t.Fb();if(!i)throw new Error("not a texture-backed render target");this.zA(i),this.tD(s,i)}ED(t){if(!(this.j_<2)){const s=this.EA();s.rI(t.Pb()),this.YE=0}}AD(t){this.ID(null),this.mS();const s=t.Fb();s===this.XE&&(this.mx.bindTexture(this.mx.TEXTURE_2D,null),this.XE=null),s===this.iI&&(this.mx.activeTexture(this.mx.TEXTURE1),this.mx.bindTexture(this.mx.TEXTURE_2D,null),this.mx.activeTexture(this.mx.TEXTURE0),this.iI=null),t.tb()}async Zb(t,s,i){this.mS();let e=this.HE,h,r,n,o=(n=t?(h=t.Mm(),r=t.Em(),t.Pb()):(h=this.Mm(),r=this.Em(),null),0),a=0,u=h,l=r;if(i){o=S.Tr(Math.floor(i.Au()),0,h-1),a=S.Tr(Math.floor(i.Du()),0,r-1);let t=i.width(),s=(t=0===t?h-o:S.Tr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:S.Tr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.mx,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.HE=null,this.wC.Ob=null,this.wC.Rb=null,this.ID(e)}),d;if(!s&&2<=this.U2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.nx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}DD(){this.gD(!0);const t=this.EA();t.GI(),this.YE=0,this.iA=1}ND(){this.gD(!1);const t=this.EA();t.EI(),this.YE=0,this.iA=2}LD(){return 2===this.iA}OD(){this.gD(!0);const t=this.EA();t.DI(),this.YE=0,this.iA=0}RD(t){if(this.PD()){const s=this.EA();s.uI(t),this.YE=0}}kD(t){if(this.PD()){const s=this.EA();s.fI(t),this.YE=0}}nx(s){const t=new Promise(t=>e.add({resolve:t,pE:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}xS(){return this.sg*this.ig*(this.TE.alpha?4:3)}vS(){let t=0;for(const s of S.yy.fb.Xb())s.Fb()||(t+=s.ob());return t}CS(){let t=0;for(const s of S.yy._2.ab())t+=s.ob();return t}FD(){return this.bE}U2(){return this.j_}jD(){return"webgl"+this.U2()}W2(){return 2<=this.U2()}B2(){return this.eA}BD(){return this.hA}zD(){return this.rA}UD(){return 0!==this.nA}WD(){return this.nA}QD(){return this.oA}JD(){return this.aA}VD(){if(2<=this.U2())return"webgl2";{const t=[];return this.pA&&t.push("EXT_frag_depth"),this.mA&&t.push("OES_standard_derivatives"),this.gA&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}YD(){return this.uA}PD(){return!!this.B_}z_(){return this.B_}hx(){return this.cA}Z2(){return this.fA}X2(){return this.yA}aE(t){this.wA.add(t)}uE(t){this.wA.delete(t)}sE(){return this.SA}z2(){return this.mx}TA(t){this.yw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}HD(){return this.GS()}}}{const Ji=self.ks,Vi={qD:null,ZD:null,XD:null,getTime:null,KD:null};Ji.yy.$D=class{constructor(t){t=Object.assign({},Vi,t),this.tN=t.qD,this.sN=t.ZD,this.iN=t.XD,this.eN=t.getTime,this.hN=t.KD,this.rN=null,this.nN=new Set}oN(t){this.nN.add(t)}aN(t){this.nN.delete(t)}lT(){this.rN=null;for(const t of this.nN)t.lT()}uN(t){return this.tN?this.tN(t):[t.Mm(),t.Em()]}SD(t){return this.sN(t)}lN(t,s){this.iN(t,s)}cN(){return this.eN()}fd(t){this.hN(t)}fN(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.rN||this.rN.Mm()===s&&this.rN.Em()===i||(t.Nb(this.rN),this.rN=null),null===this.rN&&(this.rN=t.xD(null,{width:s,height:i,T2:"nearest",C2:!1})),this.rN}}}{const o=self.ks,Yi=self.Ss,xh=Yi.vs,Hi=o.pr(o.Rect),qi=o.pr(o.Rect),Zi=o.pr(o.Rect),Xi=o.pr(o.Rect),Ki=xh.create(),$i=xh.create(),te={dN:null,pN:null,mN:null,gN:!1},se={yN:null,MN:!1,wN:!1,SN:!1,TN:!1,bN:!1,xN:!1};o.yy.vN=class{constructor(t,s){s=Object.assign({},te,s),this.bd=t,this.CN=s.dN,this.IN=s.pN,this.GN=s.mN,this._N=null,this.EN=[],this.AN=[],this.DN=[],this.NN=!1,this.hT=0,this.LN=!1,this.ON=!1,this.RN=!1,this.PN=!1,this.kN=!1,this.FN=!1,this.vE=!1,this.jN=!1,this.BN=!1,this.zN=!1,this.UN=!1,this.WN=!1,this.QN=0,this.JN=[null,null,null],this.VN=!!s.gN,this.YN=0,this.HN=0,this.qN=0,this.ZN=0,this.XN=null,this.KN=null,this.$N=o.pr(o.Rect),this.tL=o.pr(o.Rect),this.sL=o.pr(o.Rect),this.iL=o.pr(o.Rect),this.eL=o.pr(o.Rect),this.hL=1,this.rL=1,this.nL=0,this.oL=0,this.aL=null,this.uL=null,this.lL=0,this.cL=0,this.fL=!1,this.bb=xh.create(),this.dL=xh.create(),this.bd.oN(this)}mr(){this.bd.aN(this),o.Qn(this.DN),o.Qn(this.EN),o.Qn(this.AN),this.XN=null,this.KN=null,this.CN=null,this.IN=null,this.GN=null}lT(){this.NN=!0,o.Qn(this.DN),o.Qn(this.EN),o.Qn(this.AN)}pL(){return this.NN}mL(h,t){if(t=Object.assign({},se,t),o.Qn(this.DN),this.YN=0,this.HN=0,this.LN=!1,this.ON=!1,this.RN=!1,this.PN=!1,this.kN=!1,this.FN=!1,this.QN=0,this.WN=!!t.TN,this.UN=!!t.xN,this.NN=!1,o.Hn(this.EN,h),0!==h.length){if(t.yN){if(t.yN.length!==h.length)throw new Error("incorrect indexMap length");o.Hn(this.AN,t.yN)}else{o.Qn(this.AN);for(let t=0,s=h.length;t<s;++t)this.AN.push(t)}for(const s of h)this.YN+=s.QS(),this.HN+=s.JS(),s.ZS()&&(this.LN=!0),s.KS()&&(this.ON=!0),s.XS()&&(this.RN=!0),s.VS()&&(this.PN=!0),s.sT()&&(this.kN=!0);this.FN=this.gL(h[0].US());const r=this.yL(h[0],t),n=this.ML(h.at(-1),t);if(1!==h.length||r||n){this.zN=!1;let e=0;r&&(this.QN=1,this.DN.push(o.pr(o.yy.vN.SL.wL,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.QN=Math.max(this.QN,t),this.DN.push(o.pr(o.yy.vN.SL.TL,this,e,t,s)),e=t}else this.QN=1,this.DN.push(o.pr(o.yy.vN.SL.bL,this,-1,1,s)),e=1;n&&this.DN.push(o.pr(o.yy.vN.SL.xL,this,e,0))}else this.zN=!0}}yL(t,s){return!!(s.MN||t.YS()||s.SN&&!t.qS()||t.KS()&&!this.UN||0!==this.YN||0!==this.HN)||(t.US().bS()?t.XS()&&(s.bN||s.TN)||t.$S()&&s.TN:t.XS()&&!this.FN&&s.bN)}ML(t,s){return!!s.wN||(t.US().bS()?t.XS()||t.VS():(t.XS()||t.VS())&&this.vL())}gL(t){return t.RM()&&this.RN&&!this.PN}CL(t,s,i){t.RM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.aL=s,this.XN=i.IL||null,this.KN=i.contextObject||null,this.hT=i.GL||0,this.hL=i.devicePixelRatio||1,this.rL=i._L||1,this.nL=i.EL||0,this.oL="number"==typeof i.time?i.time:this.bd.cN(),this.vE=!1,t.NA(),this.LN&&this.AL();let e=!1;if(this.DL()&&(this.NL(t,i),e=!0,this.uL=this.bd.fN(t,this.qN,this.ZN),Hi.I(this.tL),Hi.Ku(),t.RM()&&t._MaybeDoPendingClearRenderPass(this.aL),t.CopyTextureToTexture(this.aL.Fb(),this.uL,Hi.Au(),Hi.Du(),Hi.width(),Hi.height())),this.zN)this.LL(t,i);else if(e||this.NL(t,i),0!==this.sL.width()||0!==this.sL.height()){t.JA(),t.jA(),t.Iw(0),t._w(0),this._N=i.OL||null,this.lL=i.RL||0,this.cL=i.PL||0,this.fL=!!i.kL,this.FL(t),this.JN[0]=s,this.JN[1]=1<=this.QN?this.jL():null,this.JN[2]=2===this.QN?this.jL():null;for(const h of this.DN){const r=this.BL(h.zL()),n=this.BL(h.UL());t.RM()?h.WL(t,r,n):h.QL(t,r,n)}t.zA(null),this.JN[1]&&this.JL(this.JN[1]),this.JN[2]&&this.JL(this.JN[2]),this.JN.fill(null),this.VL(t),this.aL=null,this.uL=null,this.XN=null,this.KN=null,this._N=null}}NL(t,s){const[i,e]=this.bd.uN(t);this.YL(t,i,e),this.HL(s)}YL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.qN===s&&this.ZN===i||this.qL(t,s,i,0,0,this.bb,this.dL),this.qN=s,this.ZN=i}qL(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,u=(t.OM(r,s/i),t.FM(o,a,t.TM(i),o,a,0,i));xh.I(n,u)}HL(t){this.$N.I(t.ZL),t.XL?this.tL.I(t.XL):this.tL.set(0,0,this.qN,this.ZN),this.sL.I(this.tL),this.sL.It(this.qN,this.ZN);const s=this.rL*this.hL;this.tL.Wu(this.YN*s,this.HN*s),this.eL.I(this.tL),this.eL.It(this.qN,this.ZN),this.tL.$u(0,0,this.qN,this.ZN),this.iL.I(this.tL),this.iL.It(this.qN,this.ZN)}FL(t){if(this.jN=t.yD(),this.BN=t.LD(),this.UN)t.gD(!1),this.ON&&t.MD(!0);else{if(Hi.I(this.tL),t.bS()){const s=this.rL*this.hL;Hi.Wu(Math.max(this.YN,1)*s,Math.max(this.HN,1)*s),Hi.Ku(),Hi.Tr(0,0,this.qN,this.ZN)}else Hi.Ku();t.wD(Hi.Au(),Hi.Du(),Hi.width(),Hi.height(),this.ZN)}}KL(t){t.jA(),this.UN||(this.BN&&t.OD(),t.gD(!1),this.ON&&t.MD(!0)),t.RM()&&t.SetNormalizedCoordsProgramVariant(!0)}VL(t){t.MD(!1),this.BN&&t.ND(),t.gD(this.jN),this.UN||t.TD(),t.RM()&&t.SetNormalizedCoordsProgramVariant(!1),this.vE=t.LA()}$L(){this.eL.Tr(0,0,1,1)}BL(t){return t<0?null:this.JN[t]}jL(){return this.bd.SD(this)}tO(){return this.aL}JL(t){this.bd.lN(t,this)}sO(t){return this.EN[t]}iO(t){this._N?this._N(this,t,()=>this.CN(t,this)):this.CN(t,this),this.zN||this.KL(t)}eO(t){if(this.UN)return!0;if(0!==this.lL||0!==this.cL)return!1;const[s,i]=t.sD(t.SD());return s===this.qN&&i===this.ZN}hO(t,s){let i=this.bb,e=this.dL;if(s&&!this.eO(t)){i=Ki,e=$i;const[h,r]=t.sD(t.SD());this.qL(t,h,r,this.lL,this.cL,i,e),this.UN||t.TD()}t.CA(i),t.DA(e)}AL(){this.bd.fd(this)}rO(t,s){return this.GN(this.AN[t],s)}nO(t,s){let i=this.eL,e=this.iL,h=this.sL;t.bS()&&(qi.I(i),qi.Vu(1),i=qi,Zi.I(e),Zi.Vu(1),e=Zi,Xi.I(h),Xi.Vu(1),h=Xi),this.oO(t,s,e,h,i,1/this.qN,1/this.ZN)}aO(t,s){let e=this.iL,h=this.sL,r=1/this.qN,n=1/this.ZN;if(this.IN){let{uO:t,lO:s,cO:i}=this.IN(this.XN);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.qN,i=i||this.ZN,e=t,h=t,r=1/s,n=1/i}else t.bS()&&(Zi.I(e),Zi.Vu(1),e=Zi,Xi.I(h),Xi.Vu(1),h=Xi);let i=this.eL;t.bS()&&((i=qi).I(this.eL),i.Vu(1)),this.oO(t,s,e,h,i,r,n),t.RM()&&this.kN&&t.SetProgramParameter_IsSrcTexRotated(this.WN)}fO(t){return this.RN?t.RM()?this.DL()?this.uL:this.aL.Fb():this.aL:null}oO(t,s,i,e,h,r,n){t.cD(this.fO(t),h,i,e,this.$N,r,n,this.hL,this.rL,this.nL,this.oL),t.fD(this.rO(s,t))}LL(t,s){const i=this.EN[0],e=t.yD(),h=i.KS();h&&(t.gD(!1),t.MD(!0),this.eL.set(0,0,1,1),this.sL.set(0,0,1,1)),t.QM(i),t.aT(this.hT),t.ID(this.aL);let r=0,n=1;if(this.sL.set(0,0,1,1),i.$S()&&this.IN){const{uO:o,lO:a,cO:u}=this.IN(this.XN);o&&this.sL.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(u)?1/u:0}else{const[l,c]=this.bd.uN(t);r=1/l,n=1/c}s.ZL?this.$N.I(s.ZL):this.$N.set(0,0,0,0),t.cD(this.fO(t),this.eL,this.sL,this.sL,this.$N,r,n,this.hL,this.rL,this.nL,this.oL),t.fD(this.rO(0,t)),t.RM()&&this.kN&&t.SetProgramParameter_IsSrcTexRotated(this.WN),t.Iw(0),this.iO(t),h&&(t.MD(!1),t.gD(e))}DL(){return this.FN}vL(){return!this.FN}dO(){return this.RN}pO(){return!!this.zN&&!this.DL()}mO(){return this.UN}gO(){return this.XN}yO(){return this.KN}MO(){return this.hT}wO(){return this.fL}LA(){return this.vE}SO(){return this.tL}TO(){return this.iL}bO(){return this.VN}async xO(t,s,i){}}}{const ie=self.ks;ie.yy.vN.SL=class{constructor(t,s,i,e=-1){this.vO=t,this.CO=s,this.IO=i,this.iy=e}GO(){return this.vO}zL(){return this.CO}UL(){return this.IO}_O(){return this.iy}gv(){return this.GO().sO(this._O())}QL(t,s,i){}WL(t,s,i){}}}{const ee=self.ks;ee.yy.vN.SL.wL=class extends ee.yy.vN.SL{constructor(t,s,i,e){super(t,s,i,e)}QL(t,s,i){const e=this.GO();t.JA(),t.WM(),t.ID(i,e.wO()),t.dD(0,0,0,0),e.iO(t),e.$L()}WL(t,s,i){const e=this.GO();t.JA(),t.WM(),t.ID(i,!1),t.dD(0,0,0,0),e.iO(t),e.$L()}}}{const he=self.ks,re=he.pr(he.Rect),ne=he.pr(he.nl);he.yy.vN.SL.xL=class extends he.yy.vN.SL{constructor(t,s,i,e){super(t,s,i,e)}QL(t,s,i){const e=this.GO();t.WM(),t.ID(i),e.hO(t,!0),t.aT(e.MO()),t.zA(s.Fb()),ne.Gl(e.SO()),re.I(e.TO()),re.Vu(1),t.jw(ne,re),e.bO()&&t.ED(s)}WL(t,s,i){const e=this.GO();t.WM(),t.ID(i,!1),e.eO(t)?ne.Gl(e.TO()):(t.SetNormalizedCoordsProgramVariant(!1),e.hO(t,!0),ne.Gl(e.SO())),t.SetBackTexture(null),t.aT(e.MO()),t.zA(s.Fb()),e.mO()?t.tD():t.jw(ne,e.TO())}}}{const oe=self.ks;oe.yy.vN.SL.bL=class extends oe.yy.vN.SL{constructor(t,s,i,e){super(t,s,i,e)}QL(t,s,i){const e=this.GO();t.ID(i,e.wO()),t.dD(0,0,0,0),t.YA(),t.QM(this.gv()),e.aO(t,this._O()),e.iO(t),e.$L()}WL(t,s,i){const e=this.GO();t.ID(i,!1),t.dD(0,0,0,0),t.YA(),t.QM(this.gv()),e.aO(t,this._O()),e.iO(t),e.$L()}}}{const ae=self.ks,ue=ae.pr(ae.Rect),le=ae.pr(ae.nl);ae.yy.vN.SL.TL=class extends ae.yy.vN.SL{constructor(t,s,i,e){super(t,s,i,e)}QL(t,s,i){const e=this.GO(),h=(t.ID(i),0===this.UL());h?t.aT(e.MO()):(t.dD(0,0,0,0),t.YA()),t.QM(this.gv()),e.nO(t,this._O()),t.zA(s.Fb()),e.hO(t,h),le.Gl(e.SO()),ue.I(e.TO()),ue.Vu(1),t.jw(le,ue),e.bO()&&t.ED(s)}WL(t,s,i){const e=this.GO(),h=(t.ID(i,!1),0===this.UL());h?(t.aT(e.MO()),t.SetBackTexture(null),e.eO(t)?le.Gl(e.TO()):(t.SetNormalizedCoordsProgramVariant(!1),e.hO(t,!0),le.Gl(e.SO()))):(t.dD(0,0,0,0),t.YA(),le.Gl(e.TO())),t.QM(this.gv()),e.nO(t,this._O()),t.zA(s.Fb()),e.mO()?t.tD():t.jw(le,e.TO())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(l,self.ks),f=self.Ys,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.EO=class{constructor(t){d=t,Object.defineProperties(this,{AO:{value:d.NO().DO(),writable:!1},LO:{value:d.RO().OO(),writable:!1},PO:{value:{},writable:!1},kO:{value:{},writable:!1},FO:{value:d.jO(),writable:!1},BO:{value:d.zO(),writable:!1},UO:{value:new Date(d.WO()),writable:!1},storage:{value:new self.QO(d),writable:!1},isInWorker:{value:d.JO(),writable:!1},VO:{value:d.YO(),writable:!1},HO:{value:d.qO(),writable:!1},T2:{value:d.ZO(),writable:!1},XO:{value:d.KO(),writable:!1},$O:{value:new self.t3(t),writable:!1},s3:{value:new self.i3(t),writable:!1}}),d.e3().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.e3().addEventListener("keyup",t=>s.delete(t.key)),d.qf().addEventListener("window-blur",()=>s.clear()),d.JO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}h3(t){Object.defineProperties(this.PO,t)}r3(t){Object.defineProperties(this.kO,t)}addEventListener(t,s){d.e3().addEventListener(t,s)}removeEventListener(t,s){d.e3().removeEventListener(t,s)}n3(t,...s){f.Ce(t);const i=d.o3(),e=i.a3(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.hc())return e.u3();if(s.length<e.l3())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.l3()} expected)`);let h=e.f3(),r=h.d3(),n=i.m3();if(n){r=r.slice(0);const a=new Set(r);for(const u of n.d3())a.has(u)||(r.push(u),a.add(u));for(const l of i.g3())a.has(l)||(r.push(l),a.add(l))}const o=h.y3(r,e.M3(),e.w3(),e.u3(),...s);return o}S3(t){const s=d.b3().T3();if(!s)throw new Error("not in a function which returns a value");switch(s.x3()){case 1:"number"==typeof t&&s.v3(t);break;case 2:"string"==typeof t&&s.v3(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.v3(t)}}signal(t){f.Ce(t),d.o3().C3(t)}I3(t){return f.Ce(t),d.o3().G3(t)}_3(){return[d.YO(),d.qO()]}get isSuspended(){return d.E3()}get A3(){return d.D3()}get N3(){return d.L3()}get gameTime(){return d.O3()}get R3(){return d.P3()}get timeScale(){return d.F3()}set timeScale(t){f.Se(t),d.j3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.B3()}get framesPerSecond(){return d.B3()}get z3(){return d.U3()}get W3(){return d.Q3()}get J3(){return d.V3()}get Y3(){return d.H3()}set Y3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.q3(t)}get Z3(){return d.X3()}set Z3(t){f.Se(t),d.K3(t)}get t4(){return d.s4()}set t4(t){d.i4(t)}get e4(){return d.NO().h4()}get r4(){return d.NO().n4()}random(){return d.o4()}get layout(){const t=d.a4();if(t)return t.u4();throw new Error("no layout is running - make sure a layout is loaded before accessing")}l4(t){let s=d.c4(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.f4(t))return i.u4();throw new Error("invalid layout")}d4(){return d.c4().m4().map(t=>t.u4())}g4(t){let s=d.c4(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.f4(t)))throw new Error("invalid layout");s.y4()||s.M4(i)}get keyboard(){const t=d.w4().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get S4(){const t=d.w4().S4;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get T4(){const t=d.w4().T4;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get b4(){const t=d.w4().b4;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}x4(t,s){f.Ce(t),f.Ce(s),d.v4(t,s)}C4(t){f.Se(t);const s=d.I4(t);return s?s.G4():null}_4(t,e){f.He(e);const h=d.E4();for(const s of t){const i=d.A4(s),r=i.D4();p.push([r.N4()._O(),r.L4()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.G4(),s.G4()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.O4(p[t][0]),a=p[t][1],u=o.R4();u[a]!==n&&((u[a]=n).D4().P4(o,!0),o.F4(n),i=!0)}i&&d.j4(),c.Qn(p),c.Qn(m)}}async B4(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.z4("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.z4("runtime","alert",{message:t+(d.JO()?" [via Web Worker]":"")})}U4(t){return f.Se(t),d.W4(t)}Q4(t){d.J4(t)}}}{let s=self.ks,i=null;self.V4=class{constructor(t){i=t,Object.defineProperties(this,{Y4:{value:!0,writable:!1}})}H4(t){const s=self.Z4.q4(t);if(!s)throw new Error("invalid IImageInfo");s.X4(i.K4())}tR(t){return i._o(t)}sR(t){return i.Eo(t)}iR(t){return i.Ao(t)}eR(t){return i.Do(t)}hR(t){return i.rR(t)}nR(t){return"flat"===i.oR()&&s.Co(t)&&(t=t.toLowerCase()),i.aR(t)}get uR(){return i.lR()}async cR(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}fR(...t){return i.dR(...t)}pR(t){return i.mR(t)}gR(t){return i.yR(t)}}}{let n=self.ks,i=self.Ys,o=null;self.MR=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.K4(),writable:!1}})}wR(t,s){const i=o.K4(),e=i.A4(t),h=i.A4(s);return o.SR(e,h)}TR(t,s){const i=o.K4(),e=i.A4(t);for(const h of s){const r=i.A4(h);if(o.SR(e,r))return h}return null}bR(t){const s=o.K4().A4(t),i=o.xR(s);return i?i.G4():null}vR(t,s){if(i.Se(t),i.Se(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.CR(t,s)}IR(){return o.GR()}_R(t,s){let i=o.K4(),e;e=Array.isArray(t)?t.map(t=>i.ER(t)):[i.ER(t)];const h=n.Rect._u(s),r=[];return o.AR(null,e,h,r),r.map(t=>t.G4())}}}{let s=self.ks,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.t3=class{constructor(t){i=t,Object.defineProperties(this,{DR:{value:s.ai.wi,writable:!1},NR:{value:e.get(s.ai.li)||"unknown",writable:!1},LR:{value:s.ai.ci,writable:!1},OR:{value:h.get(s.ai.fi)||"unknown",writable:!1},RR:{value:s.ai.di,writable:!1},PR:{value:r.get(s.ai.gi)||"unknown",writable:!1}})}get exportType(){let t=i.kR();return i.FR()?t="nwjs":i.jR()?t="windows-webview2":"cordova"===t?t="Android"===s.ai.li?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.zR().BR()}get UR(){return i.zR().WR()}get QR(){return i.zR().JR()}get VR(){return i.zR().YR()}get HR(){return i.zR().qR()}get ZR(){return i.zR().KR()}get devicePixelRatio(){return i.$R()}}}{const ce=self.Ys;self.QO=class{constructor(t){this.tP=t.sP()}getItem(t){return ce.Ce(t),this.tP.getItem(t)}setItem(t,s){return ce.Ce(t),this.tP.setItem(t,s)}removeItem(t){return ce.Ce(t),this.tP.removeItem(t)}clear(){return this.tP.clear()}keys(){return this.tP.keys()}}}{const fe=self.ks,de=fe.Fs();self.iP=class{#eP;constructor(){const t=fe.rP.hP(de);this.#eP=t,Object.defineProperties(this,{runtime:{value:t.K4().nP(),writable:!1},oP:{value:t.aP(),writable:!1},uP:{value:t.lP(),writable:!1},cP:{value:t.fP(),writable:!1},dP:{value:t.pP(),writable:!1},mP:{value:t.gP(),writable:!1},yP:{value:t.MP(),writable:!1},wP:{value:t.SP(),writable:!1},TP:{value:t.bP(),writable:!1}}),t.K4().xP(this,t)}static vP(t){if(!t)return null;const s=fe.rP.CP(t);return s?s.IP():null}GP(){return this.#eP.EP()._P()}AP(){return this.#eP.DP().G4()}}}{const pe=self.ks,me=self.Ys,ge=pe.Fs();self.NP=class{#eP;constructor(){const t=pe.rP.hP(ge);this.#eP=t,Object.defineProperties(this,{name:{value:t.nf(),writable:!1},runtime:{value:t.K4().nP(),writable:!1},LP:{value:t.OP().IP(),writable:!1}}),t.K4().xP(this,t)}addEventListener(t,s){me.Ce(t),me.He(s),this.#eP.e3().addEventListener(t,s)}removeEventListener(t,s){me.Ce(t),me.He(s),this.#eP.e3().removeEventListener(t,s)}RP(){return[...this.instances()]}PP(){return pe.first(this.instances())}kP(){return[...this.FP()]}jP(){return pe.first(this.FP())}BP(t){const s=this.#eP,i=s.K4().zP(t),e=s.UP(i);return e?e.G4():null}*instances(){for(const t of this.#eP.WP())yield t.G4()}*FP(){for(const t of this.#eP.JP().QP())yield t.G4()}VP(t){me.He(t);const s=this.#eP;if(0<s.YP())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.HP(t)}Pi(t,s,i,e,h){if(me.me(s),me.me(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#eP,n=r.K4(),o=n.a4().N4(t);if(!o)throw new Error("invalid layer");const a=n.qP(r,o,s,i,e,h),u=(e&&o.ZP(a),n.o3());return u.XP(!0),a.KP(),u.XP(!1),u.$P()||n.c4().sk()||n.ik(),a.G4()}}}{const ye=self.Ys,u=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.ek=class{constructor(t){u.set(this,t);const s=[],i=t.hk(),e=i.rk().length;for(let t=0;t<e;++t)s.push(new self.nk(i,t));Object.defineProperties(this,{name:{value:t.nf(),writable:!1},index:{value:t._O(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ce(t),ye.He(s),u.get(this).e3().addEventListener(t,s)}removeEventListener(t,s){ye.Ce(t),ye.He(s),u.get(this).e3().removeEventListener(t,s)}get width(){return u.get(this).Mm()}set width(t){ye.Se(t),u.get(this).Im(t)}get height(){return u.get(this).Em()}set height(t){ye.Se(t),u.get(this).wm(t)}ak(t,s){ye.Se(t),ye.Se(s);const i=u.get(this);i.Im(t),i.wm(s)}getSize(){const t=u.get(this);return[t.Mm(),t.Em()]}set scale(t){ye.Se(t),u.get(this).uk(t)}get scale(){return u.get(this).lk()}set angle(t){ye.Se(t),u.get(this).ck(t)}get angle(){return u.get(this).fk()}set scrollX(t){ye.me(t),u.get(this).dk(t)}get scrollX(){return u.get(this).pk()}set scrollY(t){ye.me(t),u.get(this).mk(t)}get scrollY(){return u.get(this).gk()}scrollTo(t,s){ye.me(t),ye.me(s);const i=u.get(this);i.dk(t),i.mk(s)}yk(){const t=u.get(this);return[t.pk(),t.gk()]}Mk(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.N4(t))?i.wk():null}Sk(){return u.get(this).Tk().map(t=>t.wk())}*bk(){for(const t of u.get(this).bk())yield t.wk()}xk(t,s,i){const e=u.get(this),h=self.vk,r=(ye.Ce(t),ye.hh(s,h),s?e.K4().Ck(s):null),n=Me.indexOf(i);if(n<0)throw new Error("invalid location");e.Ik(t,r,n)}Gk(t,s,i){const e=u.get(this),h=e.K4(),r=self.vk,n=(ye.eh(t,r),h.Ck(t));if(!n)throw new Error("invalid layer");ye.hh(s,r);const o=s?h.Ck(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e._k(n,o,a)}Ek(t){const s=u.get(this),i=self.vk,e=(ye.eh(t,i),s.K4().Ck(t));if(!e)throw new Error("invalid layer");const h=e.K4();s.Ak(e),h.o3().$P()||h.ik()}Dk(){const t=u.get(this),s=t.K4();t.Nk(),s.o3().$P()||s.ik()}Lk(t,s){ye.Se(t),ye.Se(s),u.get(this).Ok(t,s)}Rk(){return u.get(this).Pk()}set X(t){ye.Ce(t);const s=u.get(this);if("perspective"===t)s.kk();else{if("orthographic"!==t)throw new Error("invalid projection");s.Fk()}}get X(){return u.get(this).jk()?"orthographic":"perspective"}}}{const we=self.ks,Se=self.Ys,f=new WeakMap,Te=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),be=new Map([...Te.entries()].map(t=>[t[1],t[0]])),xe=we.pr(we.qo);self.vk=class{constructor(t){f.set(this,t);const s=[],i=t.hk(),e=i.rk().length;for(let t=0;t<e;++t)s.push(new self.nk(i,t));Object.defineProperties(this,{name:{value:t.nf(),writable:!1},layout:{value:t.f4().u4(),writable:!1},effects:{value:s,writable:!1}}),t.K4().xP(this,t)}get Bk(){const t=f.get(this).zk();return t?t.wk():null}*Uk(){for(const t of f.get(this).Uk())yield t.wk()}*Wk(){for(const t of f.get(this).Qk())yield t.wk()}*Jk(){for(const t of f.get(this).Qk())for(const s of t.Vk())yield s.wk()}get index(){return f.get(this)._O()}get isVisible(){return f.get(this).Yk()}set isVisible(t){f.get(this).Hk(t)}get qk(){return f.get(this).Zk()}get isInteractive(){return f.get(this).Xk()}set isInteractive(t){f.get(this).Kk(t)}get $k(){return f.get(this).tF()}set $k(t){f.get(this).sF(!!t)}get iF(){return f.get(this).eF()}get opacity(){return f.get(this).PA()}set opacity(t){t=we.Tr(+t,0,1),isNaN(t)||f.get(this).FA(t)}set scale(t){Se.Se(t),f.get(this).hF(t)}get scale(){return f.get(this).rF()}set scaleRate(t){Se.Se(t),f.get(this).nF(t)}get scaleRate(){return f.get(this).oF()}set angle(t){Se.Se(t),f.get(this).ck(t)}get angle(){return f.get(this).aF()}set parallaxX(t){Se.Se(t),f.get(this).uF(t)}get parallaxX(){return f.get(this).lF()}set parallaxY(t){Se.Se(t),f.get(this).cF(t)}get parallaxY(){return f.get(this).fF()}set dF(t){Se.Se(t),f.get(this).CT(t)}get dF(){return f.get(this).vT()}set pF(t){f.get(this).mF(t)}get pF(){return f.get(this).gF()}set yF(t){f.get(this).MF(t)}get yF(){return f.get(this).wF()}set GL(t){Se.Ce(t);const s=Te.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).aT(s)}get GL(){return be.get(f.get(this).SF())}set backgroundColor(t){if(Se.Be(t),t.length<3)throw new Error("expected 3 elements");xe.ia(t[0],t[1],t[2]);const s=f.get(this),i=s.TF();i.Ta(xe)||(i.ca(xe),s.K4().j4())}get backgroundColor(){const t=f.get(this).TF();return[t.fa(),t.ma(),t.ga()]}set scrollX(t){Se.me(t);const s=f.get(this);s.bF(!0),s.dk(t)}get scrollX(){return f.get(this).pk()}set scrollY(t){Se.me(t);const s=f.get(this);s.bF(!0),s.mk(t)}get scrollY(){return f.get(this).gk()}scrollTo(t,s){Se.me(t),Se.me(s);const i=f.get(this);i.bF(!0),i.dk(t),i.mk(s)}yk(){const t=f.get(this);return[t.pk(),t.gk()]}xF(){f.get(this).bF(!1)}getViewport(){return f.get(this).vF().Ou()}CF(t,s,i=0){Se.me(t),Se.me(s),Se.me(i);const e=f.get(this),h=e.K4();return e.IF(t-h.GF(),s-h._F(),i)}EF(t,s,i=0){Se.me(t),Se.me(s),Se.me(i);const e=f.get(this),h=e.K4(),[r,n]=e.AF(t,s,i);return[r+h.GF(),n+h._F()]}DF(t,s,i=0){return Se.me(t),Se.me(s),Se.me(i),f.get(this).NF(t,s,i)}LF(t,s,i=0){return Se.me(t),Se.me(s),Se.me(i),f.get(this).OF(t,s,i)}get RF(){return f.get(this).PF()}}}{let e=function(t){let s=Ie.get(t);return s||(s=ve.pr(ve.Event.qf),Ie.set(t,s)),s};e;const ve=self.ks,Ce=self.Ys,Ie=new WeakMap,Ge=ve.Fs();self.kF=class{#eP;constructor(){const t=ve.rP.hP(Ge),s={runtime:{value:(this.#eP=t).K4().nP(),writable:!1},FF:{value:t.jF()._P(),writable:!1},LP:{value:t.OP().IP(),writable:!1}};t.BF(s),t.zF(s),Object.defineProperties(this,s),t.K4().xP(this,t)}static UF(){return ve.rP.WF()}QF(){const t=Ie.get(this);t&&(t.mr(),Ie.delete(this))}addEventListener(t,s,i){Ce.Ce(t),Ce.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ce.Ce(t),Ce.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}JF(){const t=this.#eP,s=t.K4();s.VF(t),s.o3().$P()||s.c4().sk()||s.o3().YF()||s.ik()}HF(){const t=this.#eP.qF();return t?t.map(t=>t.G4()):[]}*ZF(){const t=this.#eP;if(t.XF())for(const s of t.KF())yield s.G4()}get uid(){return this.#eP.$F()}get tj(){return this.#eP.sj()}get ij(){return this.#eP.ej()}set timeScale(t){Ce.Se(t),this.#eP.j3(t)}get timeScale(){return this.#eP.hj()}rj(){this.#eP.nj()}get A3(){const t=this.#eP;return t.K4().D3(t)}oj(...t){Ce.Be(t);const s=new Set(t),i=this.#eP.aj();return s.isSubsetOf(i)}uj(t){Ce.eh(t,Set),this.#eP.lj(t)}cj(){return new Set(this.#eP.aj())}signal(t){Ce.Ce(t);const s=this.#eP;s.K4().o3().fj(s,t)}I3(t){Ce.Ce(t);const s=this.#eP;return s.K4().o3().dj(s,t)}}}{const _e=self.ks,Ee=self.Ys,Ae=_e.Fs();self.pj=class extends self.kF{#eP;#mj=!1;#gj=null;#yj=!1;#Mj=null;#wj;#Sj;constructor(t){super(),this.#eP=_e.rP.hP(Ae),this.#mj=!1,this.#gj=null,this.#yj=!1,this.#Mj=null,this.#wj=t?.domComponentId,this.#Sj=t?.wrapperComponentId}QF(){this.Tj(!1),this.bj(!1),super.QF()}xj(){return _e.rP.vj()}Cj(t){const s=this.#eP;s.K4().Ij(t,s)}Gj(t){const s=this.#eP;return s.K4()._j(t,s)}Ej(t,s){if(Ee.Ce(t),Ee.He(s),!this.#wj)throw new Error("no DOM component id set");const i=this.#eP.K4();i.Aj(this.#wj,t,s)}Dj(t){Ee.Be(t);for(const[s,i]of t)this.Ej(s,i)}Nj(t,s){if(Ee.Ce(t),!this.#wj)throw new Error("no DOM component id set");const i=this.#eP.K4();i.wf(this.#wj,t,s)}Lj(t,s){if(Ee.Ce(t),!this.#wj)throw new Error("no DOM component id set");const i=this.#eP.K4();return i.z4(this.#wj,t,s)}Oj(t,s){const i=this.#eP.K4();if(!i.JO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#wj,handler:t,data:s,responseId:null});this.Nj(t,s)}Tj(t){if(this.#mj!==(t=!!t)){this.#mj=t;const s=this.#eP.K4();if(t){if(!this.#gj)if(this.#eP.K4().Rj()){const i=globalThis.C3Debugger,e=this.LP;this.#gj=()=>{const t=performance.now();this.Pj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#gj=()=>this.Pj();s.qf().addEventListener("tick",this.#gj)}else s.qf().removeEventListener("tick",this.#gj)}}kj(){return this.#mj}Pj(){}bj(t){if(this.#yj!==(t=!!t)){this.#yj=t;const s=this.#eP.K4();if(t){if(!this.#Mj)if(this.#eP.K4().Rj()){const i=globalThis.C3Debugger,e=this.LP;this.#Mj=()=>{const t=performance.now();this.Fj(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#Mj=()=>this.Fj();s.qf().addEventListener("tick2",this.#Mj)}else s.qf().removeEventListener("tick2",this.#Mj)}}jj(){return this.#yj}Fj(){}Bj(){return[]}zj(){return null}Uj(t){}Wj(){if(!this.#Sj)throw new Error("no wrapper component id set");const t=this.#eP.K4();return t.Qj(this.#Sj)}Jj(t,s){if(Ee.Ce(t),Ee.He(s),!this.#Sj)throw new Error("no wrapper component id set");const i=this.#eP.K4();i.Vj(this.#Sj,t,s)}Yj(t){Ee.Be(t);for(const[s,i]of t)this.Jj(s,i)}Hj(t,s){if(!this.#Sj)throw new Error("no wrapper component id set");this.runtime.s3.qj(this.#Sj,t,s)}Zj(t,s){if(this.#Sj)return this.runtime.s3.Xj(this.#Sj,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#Kj;#$j;constructor(t){super(t);const s=De.rP.hP(Re),i=s.D4(),e=(this.#Kj=s,this.#$j=i,Oe.set(this,s),[]),h=i.t5();if(h){const n=i.jF().hk().rk().length;for(let t=0;t<n;++t)e.push(new self.nk(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#$j.f4().u4()}get s5(){return this.#$j.N4().wk()}get x(){return this.#$j.wT()}set x(t){t=+t;const s=this.#$j;isNaN(t)||s.wT()===t||(s.ST(t),s.i5())}get y(){return this.#$j.bT()}set y(t){t=+t;const s=this.#$j;isNaN(t)||s.bT()===t||(s.xT(t),s.i5())}setPosition(t,s){t=+t,s=+s;const i=this.#$j;isNaN(t)||isNaN(s)||i.wT()===t&&i.bT()===s||(i.e5(t,s),i.i5())}h5(){const t=this.#$j;return[t.wT(),t.bT()]}r5(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#$j;i.n5(t,s),i.i5()}}get dF(){return this.#$j.vT()}set dF(t){t=+t;const s=this.#Kj,i=this.#$j;isNaN(t)||i.vT()===t||(i.CT(t),s.K4().j4())}get o5(){return this.#$j.a5()}get width(){return this.#$j.Mm()}set width(t){t=+t;const s=this.#$j;isNaN(t)||s.Mm()===t||(s.Im(t),s.i5())}get height(){return this.#$j.Em()}set height(t){t=+t;const s=this.#$j;isNaN(t)||s.Em()===t||(s.wm(t),s.i5())}ak(t,s){t=+t,s=+s;const i=this.#$j;isNaN(t)||isNaN(s)||i.Mm()===t&&i.Em()===s||(i.n_(t,s),i.i5())}getSize(){const t=this.#$j;return[t.Mm(),t.Em()]}get angle(){return this.#$j.fk()}set angle(t){t=De.br(+t);const s=this.#$j;isNaN(t)||s.fk()===t||(s.ck(t),s.i5())}get u5(){return De.Cr(this.angle)}set u5(t){this.angle=De.vr(t)}Al(){return this.#$j.l5().Ou()}c5(){return this.#$j.f5().vl()}d5(){return this.#$j.p5()}get isVisible(){return this.#$j.Zk()}set isVisible(t){t=!!t;const s=this.#Kj,i=this.#$j;i.Zk()!==t&&(i.Hk(t),s.K4().j4())}get opacity(){return this.#$j.PA()}set opacity(t){t=De.Tr(+t,0,1);const s=this.#Kj,i=this.#$j;isNaN(t)||i.PA()===t||(i.FA(t),s.K4().j4())}set m5(t){if(Ne.Be(t),t.length<3)throw new Error("expected 3 elements");Fe.ia(t[0],t[1],t[2]);const s=this.#Kj,i=this.#$j;i.g5().Ta(Fe)||(i.y5(Fe),s.K4().j4())}get m5(){const t=this.#$j.g5();return[t.fa(),t.ma(),t.ga()]}set GL(t){Ne.Ce(t);const s=Pe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#Kj,e=this.#$j;e.aT(s),i.K4().j4()}get GL(){return ke.get(this.#$j.SF())}M5(){this.#$j.w5()}S5(){this.#$j.T5()}b5(t){Ne.eh(t,Le);const s=this.#Kj,i=s.K4().Ck(t);if(!i)throw new Error("invalid layer");s.D4().x5(i)}v5(t,s){Ne.eh(t,h),this.#$j.C5(Oe.get(t),s)}get zIndex(){return this.#$j.L4()}get I5(){return this.#$j.G5()}set I5(t){this.#$j._5(!!t)}il(t,s){return Ne.me(t),Ne.me(s),this.#$j.E5(+t,+s)}wR(t){Ne.eh(t,h);const s=this.#Kj,i=Oe.get(t);return s.K4().RO().SR(s,i)}bR(){const t=this.#Kj,s=t.K4().RO().xR(t);return s?s.G4():null}getParent(){const t=this.#Kj.A5();return t?t.G4():null}D5(){const t=this.#Kj.N5();return t?t.G4():null}*L5(){for(const t of this.#Kj.L5())yield t.G4()}O5(){return this.#Kj.R5()}P5(t){const s=this.#Kj.k5(t);return s?s.G4():null}*children(){for(const t of this.#Kj.children())yield t.G4()}*F5(){for(const t of this.#Kj.F5())yield t.G4()}j5(t,s){Ne.eh(t,h),Ne.Le(s),s=s||{};const i=this.#Kj,e=Oe.get(t);i.B5(e,s)}removeChild(t){Ne.eh(t,h);const s=this.#Kj,i=Oe.get(t);s.z5(i)}U5(){const t=this.#Kj;if(t.W5()){const s=t.A5();s.z5(t)}}Q5(){const t=this.#$j;return{J5:t.V5(),Y5:t.H5(),q5:t.Z5(),X5:t.K5(),tB:t.sB(),iB:t.eB(),hB:t.rB(),nB:t.oB(),aB:t.uB()}}lB(t,s){Ne.Se(t),Ne.Se(s),this.#$j.cB(t,s)}fB(){const t=this.#$j;t.dB(),t.i5()}pB(t,s,i){Ne.Se(t),Ne.Se(s),Ne.Ne(i);const e=this.#$j;e.mB(t,s,i)&&e.i5()}gB(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#$j;if(o.yB()){const a=o.MB(),u=a.n2(t,s);null!==u&&(i=u.wT(),e=u.bT(),h=u.vT(),r=u.IT(),n=u._T())}return{x:i,y:e,dF:h,u:r,v:n}}wB(){const t=this.#$j;if(!t.yB())return[0,0];const s=t.MB();return[s.HT(),s.qT()]}}};0;const De=self.ks,Ne=self.Ys,Le=self.vk,Oe=new WeakMap,Re=De.Fs(),Pe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Pe.entries()].map(t=>[t[1],t[0]])),Fe=De.pr(De.qo);self.SB=t(self.kF),self.TB=t(self.pj)}{const je=self.Ys;self.bB=class extends self.SB{#eP;constructor(){super(),this.#eP=self.kF.UF()}xB(){return this.#eP.CB().vB()}focus(){this.#eP.CB().IB()}blur(){this.#eP.CB().GB()}_B(t,s){je.Ce(t),this.#eP.CB().EB(t,s)}}}{let e=function(t){let s=Ue.get(t);return s||(s=Be.pr(Be.Event.qf),Ue.set(t,s)),s};e;const Be=self.ks,ze=self.Ys,Ue=new WeakMap,We=Be.Fs();self.AB=class{#eP;constructor(){const t=Be.rP.hP(We),s={runtime:{value:(this.#eP=t).K4().nP(),writable:!1},behavior:{value:t.NB().DB(),writable:!1},LB:{value:t.RB().OB(),writable:!1}};Object.defineProperties(this,s),t.K4().xP(this,t)}static UF(){return Be.rP.WF()}get PB(){return this.#eP.kB().G4()}QF(){const t=Ue.get(this);t&&(t.mr(),Ue.delete(this))}addEventListener(t,s,i){ze.Ce(t),ze.He(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ze.Ce(t),ze.He(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Qe=self.ks,Je=Qe.Fs();self.jB=class{constructor(){const t=Qe.rP.hP(Je),s={runtime:{value:t.K4().nP(),writable:!1},behavior:{value:t.NB().DB(),writable:!1},name:{value:t.nf(),writable:!1}};Object.defineProperties(this,s)}}}{const Ve=self.ks,Ye=Ve.Fs();self.BB=class{#eP;constructor(){const t=Ve.rP.hP(Ye),s={runtime:{value:(this.#eP=t).K4().nP(),writable:!1}};Object.defineProperties(this,s),t.K4().xP(this,t)}RP(){return this.#eP.QP().map(t=>t.G4())}static vP(t){if(!t)return null;const s=Ve.rP.zB(t);return s?s.DB():null}}}{const He=self.ks,qe=self.Ys,Ze=He.pr(He.qo);self.nk=class{#eP;constructor(t,s){this.#eP=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#eP.rk();return t[this.index].nf()}get isActive(){return this.#eP.UB(this.index)}set isActive(t){t=!!t;const s=this.#eP;s.UB(this.index)!==t&&(s.WB(this.index,t),s.QB(),s.K4().j4())}setParameter(t,s){qe.Se(t),t=Math.floor(+t);const i=this.#eP,e=i.JB(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof He.qo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ze.ia(s[0],s[1],s[2]),s=Ze}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.VB(this.index,t,s);h&&i.UB(this.index)&&i.K4().j4()}getParameter(t){qe.Se(t),t=Math.floor(+t);const s=this.#eP,i=s.JB(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof He.qo?[i.fa(),i.ma(),i.ga()]:i}}}self.YB=class{#eP;constructor(t){this.#eP=t,Object.defineProperties(this,{name:{value:t.nf(),writable:!1}})}get speed(){return this.#eP.HB()}get isLooping(){return this.#eP.qB()}get repeatCount(){return this.#eP.ZB()}get XB(){return this.#eP.KB()}get $B(){return this.#eP.sz()}get frameCount(){return this.#eP.iz()}ez(){return this.#eP.hz().map(t=>t.rz())}*frames(){for(const t of this.#eP.hz())yield t.rz()}};self.Z4=class{#eP;constructor(t){this.#eP=t}static q4(t){return t.#eP}get width(){return this.#eP.Mm()}get height(){return this.#eP.Em()}getSize(){const t=this.#eP;return[t.Mm(),t.Em()]}nz(t){return t.oz(this)}az(){return this.#eP.k_().Ou()}};{const Xe=self.Ys;self.uz=class extends self.Z4{#eP;constructor(t){super(t.lz()),this.#eP=t,Object.defineProperties(this,{duration:{value:t.cz(),writable:!1},fz:{value:t.pz(),writable:!1},mz:{value:t.gz(),writable:!1}})}yz(){const t=this.#eP;return[t.pz(),t.gz()]}Mz(){return this.#eP.wz()}Sz(t){return this.Tz(t)[0]}bz(t){return this.Tz(t)[1]}Tz(t){let s=this.#eP,i=null;if("number"==typeof t)i=s.xz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.vz(t)}return i?[i.wT(),i.bT()]:this.yz()}Cz(){const t=this.#eP.Iz();return t?t.Vl():0}Gz(t){return this._z(t)[0]}Ez(t){return this._z(t)[1]}_z(t){Xe.Se(t),t=Math.floor(t);const s=this.#eP.Iz();if(!s||t<0||t>=s.Vl())return[0,0];const i=s.Jl(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#eP.Az()}}}{let s=function(t){const s=$e.get(t);if(s.Dz())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ke=self.Ys,$e=new WeakMap;self.Nz=class{constructor(t){$e.set(this,t),t.K4().xP(this,t)}pause(){s(this).Lz()}resume(){s(this).Oz()}stop(){s(this).g0()}oj(t){return s(this).Rz(t)}set time(t){Ke.Se(t),s(this).Pz(t)}get time(){return s(this).cN()}set totalTime(t){Ke.Se(t),s(this).kz(t)}get totalTime(){return s(this).Fz()}set isLooping(t){s(this).jz(!!t)}get isLooping(){return s(this).Bz()}set $B(t){s(this).zz(!!t)}get $B(){return s(this).Uz()}set playbackRate(t){Ke.Se(t),s(this).Wz(t)}get playbackRate(){return s(this).Qz()}get progress(){const t=s(this);return t.cN()/t.Fz()}get tags(){return s(this).Jz()}get finished(){return s(this).Vz()}get isPlaying(){return s(this).IsPlaying()}get Yz(){return s(this).qz()}get Zz(){return $e.get(this).Dz()}}}{let i=new WeakMap;self.Xz=class extends self.Nz{constructor(t){super(t),i.set(this,t);const s={name:{value:t.nf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.Dz())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ys),h=new WeakMap,r=new WeakMap,n=null;self.Kz=class extends self.Nz{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}$z(t){e.Ce(t);const s=self.vc.zc(n(t));i(this).t6(s)}get PB(){const t=i(this).s6();return t?t.G4():null}get i6(){return i(this).e6()}set i6(t){i(this).h6(!!t)}get value(){const t=i(this);if("value"!==t.r6())throw new Error("not a value tween");return t.o6("value").n6()}}}self.a6=class extends self.iP{constructor(){super()}};{const th=self.ks,sh=self.Ys,ih=th.Fs();self.u6=class extends self.a6{#eP;#wj;#l6=0;#c6=new Map;constructor(t){if(super(),this.#eP=th.rP.hP(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#wj=t.domComponentId,this.f6("elem-focused",t=>t.d6()),this.f6("elem-blurred",t=>{t&&t.p6()})}m6(t){const s=this.#l6++;return this.#c6.set(s,t),s}g6(t){this.#c6.delete(t)}f6(t,i){const s=this.#eP.K4();s.Aj(this.#wj,t,t=>{const s=this.#c6.get(t.elementId);i(s,t)})}y6(t){sh.Be(t);for(const[s,i]of t)this.y6(s,i)}}}{const eh=self.ks,hh=(new WeakMap,eh.Fs());self.M6=class extends self.NP{#eP;constructor(){super(),this.#eP=eh.rP.hP(hh)}w6(){}S6(){return this.#eP.lz().T6()}b6(t){}x6(t){}v6(){}C6(t){}}}{const rh=self.ks,nh=(new WeakMap,rh.Fs());self.I6=class extends self.TB{#eP;#G6=null;#_6=null;constructor(t){super(t),this.#eP=rh.rP.hP(nh)}QF(){if(super.QF(),this.#G6){const t=this.#eP.K4().qf();t.removeEventListener("renderercontextlost",this.#G6),t.removeEventListener("renderercontextrestored",this.#_6),this.#G6=null,this.#_6=null}}E6(){if(!this.#G6){this.#G6=()=>this.A6(),this.#_6=()=>this.D6();const t=this.#eP.K4().qf();t.addEventListener("renderercontextlost",this.#G6),t.addEventListener("renderercontextrestored",this.#_6)}}A6(){}D6(){}N6(t){}}}{const oh=self.ks,ah=oh.pr(oh.Rect),uh=new WeakMap,lh=oh.Fs();self.L6=class extends self.I6{#O6=-1;#R6=!0;#P6=!1;#k6=!1;#F6=-.2;#j6=oh.pr(oh.Rect,0,0,-1,-1);#B6=0;#z6=0;#U6=-1;#W6=-1;#Q6=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.rP.hP(lh),i=(uh.set(this,s),this.#O6=this.LP.m6(this),s.K4().zR());this.#B6=i.J6(),this.#z6=i.V6(),this.Tj(!0)}QF(){super.QF(),this.LP.g6(this.#O6),this.Y6("destroy"),this.#O6=-1,uh.delete(this)}H6(){const t=uh.get(this).K4();if(t.JO())throw new Error("not valid in worker mode");return this.q6("get-element")}Y6(t,s){(s=s||{}).elementId=this.#O6,this.Nj(t,s)}q6(t,s){return(s=s||{}).elementId=this.#O6,this.Oj(t,s)}Z6(t,s){return(s=s||{}).elementId=this.#O6,this.Lj(t,s)}X6(t){t=t||{};const s=uh.get(this).D4();t.elementId=this.#O6,t.isVisible=s.Zk(),t.htmlIndex=s.N4().K6(),t.htmlZIndex=s.tU(),Object.assign(t,this.sU()),this.#R6=!!t.isVisible,this.Oj("create",t),this.iU(!0)}eU(t){this.#R6!==(t=!!t)&&(this.#R6=t,this.Y6("set-visible",{isVisible:t}))}Pj(){this.iU(!1)}hU(){const t=uh.get(this).K4(),s=t.zR().rU();return"Android"===oh.ai.li&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}iU(l){const c=uh.get(this);if(!c.nU()){let t=c.D4(),s=t.N4(),i=t.l5(),[e,h]=s.AF(i.Au(),i.Du()),[r,n]=s.AF(i.Nu(),i.Lu()),o=c.K4().zR(),a=o.JR(),u=o.YR();if(t.Zk()&&s.Zk())if(!this.hU()&&(r<=0||n<=0||a<=e||u<=h))this.eU(!1);else{ah.set(e,h,r,n);const f=o.J6(),d=o.V6(),p=s.K6(),m=t.tU();if(!l&&ah.equals(this.#j6)&&this.#B6===f&&this.#z6===d&&this.#U6===p&&this.#W6===m)this.eU(!0);else{this.#j6.I(ah),this.#B6=f,this.#z6=d,this.#U6=p,this.#W6=m,this.eU(!0);let t=null;this.#k6&&(t=s.oU()+this.#F6),this.Y6("update-position",{left:Math.round(this.#j6.Au()),top:Math.round(this.#j6.Du()),width:Math.round(this.#j6.width()),height:Math.round(this.#j6.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.eU(!1)}}aU(){this.q6("focus",{focus:!0})}uU(){this.q6("focus",{focus:!1})}d6(){this.#P6=!0}p6(){this.#P6=!1}lU(){return this.#P6}cU(t,s){this.postToDOMElement("set-css-style",{prop:oh.Vo(t),val:s})}fU(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}dU(t){this.postToDOMElement("remove-attribute",{name:t})}pU(){this.#Q6||(this.#Q6=!0,Promise.resolve().then(()=>{this.#Q6=!1,this.Y6("update-state",this.sU())}))}sU(){}mU(){return this.#O6}}}self.gU=class extends self.BB{constructor(){super()}};self.yU=class extends globalThis.jB{constructor(){super()}w6(){}};{const ch=self.ks,fh=new WeakMap,dh=ch.Fs();self.MU=class extends self.AB{#mj=!1;#yj=!1;#wU=!1;constructor(){super(),fh.set(this,ch.rP.hP(dh))}QF(){super.QF(),this.Tj(!1),this.bj(!1),this.SU(!1),fh.delete(this)}xj(){return ch.rP.vj()}TU(){}Cj(t){const s=fh.get(this);s.K4().Ij(t,s.kB(),s.RB())}Gj(t){const s=fh.get(this);return s.K4()._j(t,s.kB(),s.RB())}Tj(t){if(this.#mj!==(t=!!t)){this.#mj=t;const s=fh.get(this).K4();t?s.bU(this):s.xU(this)}}kj(){return this.#mj}Pj(){}bj(t){if(this.#yj!==(t=!!t)){this.#yj=t;const s=fh.get(this).K4();t?s.vU(this):s.CU(this)}}jj(){return this.#yj}Fj(){}SU(t){if(this.#wU!==(t=!!t)){this.#wU=t;const s=fh.get(this).K4();t?s.IU(this):s.GU(this)}}_U(){return this.#wU}EU(){}Bj(){return[]}zj(){return null}Uj(t){}}}{let e=self.Ys,h=null;self.i3=class{constructor(t){h=t}Q4(t){h.J4(t)}qj(t,s,i){e.Ce(t),e.Ce(s),e.Ue(i),h.AU(t,s,i)}Xj(t,s,i){return e.Ce(t),e.Ce(s),e.Ue(i),h.DU(t,s,i)}NU(t){return e.Ie(t),new self.LU(h,t)}set OU(t){h.RU(!!t)}get OU(){return h.PU()}kU(t){h.FU(!!t)}jU(t){e.me(t);const s=h.BU(t);return s?s._P():null}}}self.LU=class{#zU;#UU;#WU;#QU;#JU;#VU;constructor(t,s){const i=(this.#zU=t).o3(),e=t.m3(),h=(this.#UU=e,this.#WU=e.YU(),t.b3()),r=(this.#QU=h.HU(),this.#JU=h.qU(e),i.ZU()),n=r.qU();this.#VU=n,s&&n.XU(s),t.KU(!1)}$U(){const t=this.#zU.o3(),s=this.#WU,i=this.#VU;t.tW(s),this.#UU.sW(this.#QU,this.#JU),t.iW(s),i.eW(i._O()+1)}get hW(){return this.#VU.rW()}release(){const t=this.#zU,s=t.b3(),i=t.o3().ZU();t.KU(!0),i.nW(),s.nW()}};{let d=self.ks,h=self.Ys,p=null,r=null;self.oW=class{constructor(t,s){r=t,p=s}aW(){p.JA()}uW(t){p.WA(t)}lW(){p.qM()}cW(){p.WM()}fW(){p.hw()}setColor(t){p.kA(t[0],t[1],t[2],t[3])}dW(t,s,i,e){p.kA(t,s,i,e)}pW(){p.jA()}mW(t){p.FA(t)}gW(t){p._w(t)}yW(){p.Ew()}rect(t){p.HA(t.left,t.top,t.right,t.bottom)}MW(t,s,i,e){p.HA(t,s,i,e)}wW(t){p.nl(d.nl.Cl(t))}SW(t,s,i,e,h,r,n,o){p.fS(t,s,i,e,h,r,n,o)}TW(t,s){p.jw(d.nl.Cl(t),d.Rect.Ru(s))}bW(t,s){p.XA(d.nl.Cl(t),d.nl.Cl(s))}xW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.KA(t,s,i,e,h,r,n,o,a,u,l,c,d.Rect.Ru(f))}vW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.Ow(t,s,i,e,h,r,n,o,a,u,l,c,d.nl.Cl(f))}IW(t,s,i){p.$A(t,s,i)}GW(t){p.cS(t)}line(t,s,i,e){p.Om(t,s,i,e)}_W(t,s,i,e,h,r){p.Rw(t,s,i,e,h,r)}EW(t,s,i,e){p.Bw(t,s,i,e)}AW(t){p.Qw(d.Rect.Ru(t))}DW(t){p.Jw(d.nl.Cl(t))}NW(t){p.Xw(t)}LW(){p.Kw()}OW(t){p.iS(t)}RW(){p.nS()}PW(t){h.hh(t,self.kW);const s=t?r.Ck(t):null;p.zA(s)}FW(t,s){const i=self.Z4.q4(t);if(i)return i.jW(p,{w2:s?.w2??"clamp-to-edge",S2:s?.S2??"clamp-to-edge",T2:s?.T2??"trilinear",C2:s?.C2??!0});throw new Error("invalid IImageInfo")}BW(t){const s=self.Z4.q4(t);if(!s)throw new Error("invalid IImageInfo");s.GG()}oz(t){const s=self.Z4.q4(t);if(!s)throw new Error("invalid IImageInfo");const i=s.Fb();return self.kW.zW(r,i)}UW(t,s,i){h.Se(t),h.Se(s);const e=p._b(t,s,{w2:i?.w2??"clamp-to-edge",S2:i?.S2??"clamp-to-edge",T2:i?.T2??"trilinear",C2:i?.C2??!0});return self.kW.zW(r,e)}WW(t,s,i){h.eh(s,self.kW);const e=r.Ck(s);p.P_(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.eh(t,self.kW);const s=r.Ck(t);p.Nb(s)}QW(){const t=p.GS();return new self.JW(r,t)}VW(){r.zR().YW(p)}HW(t){h.eh(t,globalThis.vk);const s=r.Ck(t);s.qW(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.kW=class{constructor(t,s){ph.set(this,{runtime:t,ZW:s}),mh.set(s,this),t.xP(this,s),Object.defineProperties(this,{width:{value:s.Mm(),writable:!1},height:{value:s.Em(),writable:!1}})}static zW(t,s){if(!s)return null;const i=mh.get(s);return i||new self.kW(t,s)}}}{let e=function(t){return yh.get(t).XW};e;const gh=self.Ys,yh=new WeakMap;self.JW=class{constructor(t,s){yh.set(this,{runtime:t,XW:s}),t.xP(this,s)}release(){e(this).mr()}set KW(t){gh.Ce(t),e(this).PG(t)}get KW(){return e(this).FI()}set $W(t){gh.Se(t),e(this).kG(t)}get $W(){return e(this).FG()}set lineHeight(t){gh.Se(t),e(this).BG(t)}get lineHeight(){return e(this).zG()}set tQ(t){e(this).UG(t)}get tQ(){return e(this).WG()}set sQ(t){e(this).QG(t)}get sQ(){return e(this).JG()}setColor(t){gh.Be(t),this.iQ(t[0],t[1],t[2])}iQ(t,s,i){e(this).ZG(t,s,i)}eQ(t){gh.Ce(t),e(this).uT(t)}set hQ(t){e(this).XG(t)}get hQ(){return e(this).KG()}set verticalAlign(t){e(this).$G(t)}get verticalAlign(){return e(this).t_()}set rQ(t){e(this).s_(t)}get rQ(){return e(this).i_()}set nQ(t){e(this).e_(t)}get nQ(){return e(this).h_()}set text(t){gh.Ce(t),e(this).Sf(t)}get text(){return e(this).r_()}ak(t,s,i){gh.Se(t),gh.Se(s),gh.Se(i),e(this).n_(t,s,i)}nz(){const{runtime:t,XW:s}=yh.get(this),i=s.Fb();return self.kW.zW(t,i)}az(){return e(this).k_().Ou()}oQ(t){gh.He(t),e(this).EG=t}aQ(){e(this).GG()}get uQ(){return e(this).a_()}get lQ(){return e(this).l_()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.ks,Mh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.cQ=class extends d.lr{constructor(t,s){super();const i=s.exportType,e=(this.gf=t,this.fQ="folders",this.dQ=new Map,this.pQ="cordova"===i,this.mQ=!!s.isiOSCordova,this.gQ=!!s.isFileProtocol,this.yQ=s.swClientId,this.MQ=s.supportedAudioFormats||{},this.wQ=new Map,this.SQ=!1,this.TQ=s.scriptFolder,this.bQ="",this.xQ="",this.vQ="",this.CQ=s.fileMap||new Map,this.IQ=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.GQ=e?"remote":"local",this._Q=new Map,this.EQ=[],this.AQ=[],this.DQ=!1,this.NQ=0,this.LQ=0,this.OQ=0,this.RQ=!1,this.PQ=d.pr(d.D1,()=>this.kQ(),50),this.FQ=d.pr(d.T1,Math.max(d.hardwareConcurrency,8)),this.jQ=d.pr(d.T1,20),this.BQ=new self.V4(this)}mr(){for(const t of this._Q.values())t.mr();this._Q.clear(),d.Qn(this.AQ),this.gf=null}K4(){return this.gf}zQ(t){this.fQ=t}oR(){return this.fQ}UQ(){return this.TQ}WQ(t){this.bQ=t}lR(){return this.bQ}QQ(t){this.xQ=t}JQ(){return this.xQ}VQ(t){this.vQ=t}YQ(){return this.vQ}HQ(){return this.gQ}Ao(t,s){return s=s||this.GQ,d.Co(t)?("flat"===this.fQ&&(t=t.toLowerCase()),this.pQ&&this.gQ?this.qQ(t):"playable-ad-single-file"===this.gf.kR()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.FQ:this.jQ).Sc(()=>d.Ao(t))):d.Ao(t)}Do(t){return d.Co(t)?("flat"===this.fQ&&(t=t.toLowerCase()),this.pQ&&this.gQ?this.ZQ(t):"playable-ad-single-file"===this.gf.kR()?d.Lo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.GQ?this.FQ:this.jQ).Sc(()=>d.Do(t))):d.Do(t)}_o(t){return d.Co(t)?("flat"===this.fQ&&(t=t.toLowerCase()),this.pQ&&this.gQ?this.XQ(t):"playable-ad-single-file"===this.gf.kR()?d.Oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.GQ?this.FQ:this.jQ).Sc(()=>d._o(t))):d._o(t)}async Eo(t){const s=await this._o(t);return JSON.parse(s)}KQ(t,s){return"flat"===this.fQ&&(t=t.toLowerCase()),this.gf.z4("runtime","cordova-fetch-local-file",{filename:t,as:s})}XQ(t){return this.KQ(t,"text")}async qQ(t){const s=await this.KQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async $Q(t){"flat"===this.fQ&&(t=t.toLowerCase());let s=this.dQ.get(t);if(!s){const i=await this.qQ(t);s=URL.createObjectURL(i),this.dQ.set(t,s)}return s}ZQ(t){return this.KQ(t,"buffer")}aR(t){"flat"===this.fQ&&(t=t.toLowerCase());let s=this.bQ+t;return"Gecko"===d.ai.gi&&"preview"===this.gf.kR()?this.t8(s):s}rR(t){return d.vo(t)?Promise.resolve(t):this.pQ&&this.gQ?this.$Q(t):"playable-ad-single-file"===this.gf.kR()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.fQ&&(t=t.toLowerCase()),Promise.resolve(t))}s8(s){if(d.vo(s)||"preview"!==this.gf.kR()||!this.yQ||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.yQ),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}i8(t){return this.rR(t)}e8(t){if(t.h8&&!Mh.has(t.h8))throw new Error("invalid load policy");let s=this._Q.get(t.url);return s||(s=d.pr(d.r8,this,{url:t.url,size:t.size||0,h8:t.h8||this.GQ}),this._Q.set(s.n8(),s),this.DQ)||(this.NQ+=s.cc(),this.AQ.push(s.o8().then(()=>this.a8(s.cc())))),s}u8(t){this._Q.delete(t.n8())}async l8(){try{await Promise.all(this.AQ),this.OQ=1}catch(t){console.error("Error loading: ",t),this.RQ=!0,this.kQ()}}c8(){this.DQ=!0}f8(){return this.RQ}a8(t){this.LQ+=t,this.PQ.Q1()}kQ(){const t=d.pr(d.Event,"loadingprogress");this.OQ=d.Tr(this.LQ/this.NQ,0,1),t.progress=this.OQ,this.gf.qf().dispatchEvent(t)}h4(){return this.OQ}n4(){return this.gf.p8().d8()}m8(t){d.Hn(this.EQ,t),this.EQ.length&&this.AQ.push(this.g8())}async g8(){const t=[],s=[];for(const[i,e,h]of this.EQ)this.NQ+=h,t.push(this.y8(i,e,s).then(()=>this.a8(h)));await Promise.all(t),this.gf.JO()&&0<s.length&&await this.gf.z4("runtime","load-webfonts",{webfonts:s})}async y8(s,i,e){try{let t=await this.rR(i);"Gecko"===d.ai.gi&&(s=`'${s}'`),("Gecko"===d.ai.gi&&"preview"===this.gf.kR()||"playable-ad-single-file"===this.gf.kR())&&(t=this.t8(t));const h=new FontFace(s,`url('${t}')`);(this.gf.JO()?self:document).fonts.add(h),await h.load(),this.gf.JO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}M8(t){return!!this.MQ[t]}w8(t,s){this.SQ=!!s;for(const[i,e,h]of t)this.wQ.set(i,{fileName:i,S8:e.map(t=>({type:t[0],T8:t[1],b8:i+t[1],fileSize:t[2]})),isMusic:h})}x8(t){"flat"===this.fQ&&(t=t.toLowerCase());const s=this.wQ.get(t);if(!s)return null;let i=null;for(const e of s.S8)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.M8(e.type))return e;return i}v8(t){const s=this.x8(t);return s?{url:this.aR(s.b8),type:s.type}:null}C8(){if(this.SQ){const t=[];for(const s of this.wQ.values())if(!s.isMusic){const i=this.x8(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.aR(i.b8),type:i.type,fileSize:i.fileSize})}return t}return[]}I8(t){return"preview"===this.gf.kR()&&(t=new URL(t,location.href).toString()),this.CQ.get(t)||null}t8(t){let s=this.IQ.get(t);if(!s){const i=this.I8(t);if(!i)return t;s=URL.createObjectURL(i),this.IQ.set(t,s)}return s}DO(){return this.BQ}async dR(...t){const s=await Promise.all(t.map(t=>this.rR(t)));if(this.gf.JO())if(1===t.length){const i=t[0];await import((d.Co(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.Co(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async mR(t){if(WebAssembly.compileStreaming){const s=await this.rR(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Do(t);return WebAssembly.compile(i)}}async yR(t){const s=await this.rR(t);return this.gf.z4("runtime","add-stylesheet",{url:s})}}}{const Sh=self.ks;Sh.G8=class extends Sh.lr{constructor(t,s){super(),this._8=t,this.gf=t.K4(),this.E8=s.url||"",this.A8=s.size,this.D8=s.h8,this.N8=s.blob||null,this.L8=!!this.N8,this.Jg=null}mr(){this.Jg=null,this._8=null,this.gf=null,this.N8=null}n8(){return this.E8}cc(){return this.A8}o8(){return"local"===this.D8||this.N8?(this.L8=!0,Promise.resolve()):(this.Jg||(this.Jg=this._8.Ao(this.E8,this.D8).then(t=>(this.L8=!0,this.Jg=null,this.N8=t)).catch(t=>{console.error("Error loading resource: ",t),this.Jg=null})),this.Jg)}O8(){return this.L8}P8(){return this.N8?Promise.resolve(this.N8):this.Jg||this._8.Ao(this.E8,this.D8)}}}{const ar=self.ks,ur=new ar.T1,lr=new Set;ar.r8=class extends ar.G8{constructor(t,s){super(t,s),this.k8=null,this.F8=null,this.vd=0,this.j8=-1,this.B8=-1,lr.add(this)}mr(){if(0!==this.vd)throw new Error("released image asset which still has texture references");this._8.u8(this),this.k8=null,lr.delete(this),super.mr()}static z8(){for(const t of lr)t.k8=null,t.F8=null,t.vd=0}jW(t,s){return s=s||{},this.vd++,this.F8?Promise.resolve(this.F8):(this.k8||(s.b2=this.gf.zR().U8(),this.k8=this.W8(t,s)),this.k8)}async W8(s,i){try{const e=await this.P8();return 0===this.vd?this.k8=null:await ur.Sc(async()=>{const t=await s.vD(e,i);return this.k8=null,0===this.vd?(s.Nb(t),null):(this.F8=t,this.j8=t.Mm(),this.B8=t.Em(),this.F8)})}catch(t){throw console.error("Failed to load texture: ",t),t}}GG(){if(this.vd<=0)throw new Error("texture released too many times");if(this.vd--,0===this.vd&&this.F8){const t=this.F8.US();t.Nb(this.F8),this.F8=null}}Q8(){return this.vd}Fb(){return this.F8}Mm(){return this.j8}Em(){return this.B8}async J8(){const t=await this.P8();return ar.Bi.ImageBitmap?createImageBitmap(t):ar.Po(t)}}}{let t=function(t,s){return t.D4().V8()-s.D4().V8()};t;const cr=self.ks;cr.Y8=class extends cr.lr{constructor(t,s,i){super(),this.H8=t,this.ou=s,this.au=i,this.q8=[],this.Z8=!0,this.X8=new Set,this.K8=!1}mr(){cr.Qn(this.q8),this.X8.clear(),this.H8=null}g0(){cr.Qn(this.q8),this.Z8=!0,this.X8.clear(),this.K8=!1}tJ(){this.Z8=!1}ac(){if(this.q8.length){if(this.q8.length>this.X8.size)return!1;this.sJ()}return!0}iJ(t){this.X8.has(t)?(this.X8.delete(t),0===this.X8.size&&(this.K8=!1)):(this.q8.push(t),this.Z8=1===this.q8.length)}_0(t){this.X8.add(t),this.K8=!0,50<=this.X8.size&&this.sJ()}sJ(){this.K8&&(this.q8.length===this.X8.size?this.g0():(cr.$n(this.q8,this.X8),this.X8.clear(),this.K8=!1))}eJ(){this.Z8||(this.q8.sort(t),this.Z8=!0)}hJ(t){this.sJ(),this.eJ(),this.q8.length&&t.push(this.q8)}}}{const fr=self.ks;fr.rJ=class extends fr.lr{constructor(t,s){super(),this.nJ=t,this.oJ=s,this.aJ=fr.pr(fr.rc)}mr(){this.aJ.mr(),this.aJ=null}uJ(t,s,i){let e=this.aJ.si(t,s);return e||(i?(e=fr.pr(fr.Y8,this,t,s),this.aJ.Set(t,s,e),e):null)}lJ(t){return Math.floor(t/this.nJ)}cJ(t){return Math.floor(t/this.oJ)}fJ(e,h,r){if(h)for(let i=h.Au(),t=h.Nu();i<=t;++i)for(let t=h.Du(),s=h.Lu();t<=s;++t)if(!r||!r.il(i,t)){const n=this.uJ(i,t,!1);n&&(n._0(e),n.ac())&&this.aJ.uc(i,t)}if(r)for(let i=r.Au(),t=r.Nu();i<=t;++i)for(let t=r.Du(),s=r.Lu();t<=s;++t)h&&h.il(i,t)||this.uJ(i,t,!0).iJ(e)}dJ(t,s){let i=this.lJ(t.Au()),e=this.cJ(t.Du()),h=this.lJ(t.Nu()),r=this.cJ(t.Lu());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.uJ(i,t,!1);n&&n.hJ(s)}}pJ(t){let s=t.Au(),i=t.Du(),e=t.Nu(),h=t.Lu();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.uJ(s,t,!1);r&&r.tJ()}}}}{let n=function(t,s){return t.D4().V8()-s.D4().V8()},t=function(t,s){return t.D4().vT()-s.D4().vT()};n,t;const w=self.ks,dr=new w.Rect,pr=new w.nl,mr=[],gr=(new w.Rect,new w.Rect,self.Ss),vh=gr._s,Uh=gr.Es,xh=gr.vs,yr=xh.create(),Mr=vh.create(),wr=Uh.create(),Sr=vh.create(),Tr=vh.create(),br=vh.create(),xr=w.pr(w.nu),vr=(w.pr(w.Rect),[]),Cr=[],Ir=[],Gr={name:"",sid:-1,mJ:!1,isVisible:!0,isInteractive:!0,$k:!1,backgroundColor:[1,1,1,1],pF:!0,gJ:[1,1],opacity:1,yF:!1,yJ:!1,MJ:!1,wJ:!1,scaleRate:1,GL:0,dF:0,SJ:[],TJ:[],bJ:[]};w.xJ=class extends w.lr{constructor(t,s,i){super(),i=Object.assign({},Gr,i),this.vJ=t,this.gf=t.K4(),this.CJ=s,this.Mr=i.name,this.iy=-1,this.IJ=!!i.$k,this.GJ=-1,this._J=i.sid,this.EJ=!!i.mJ,this.AJ=!!i.isVisible,this.DJ=!!i.isInteractive,this.NJ=w.pr(w.qo),this.NJ.qa(i.backgroundColor),this.LJ=!!i.pF,this.OJ=i.gJ[0],this.RJ=i.gJ[1],this.rT=w.pr(w.qo,1,1,1,i.opacity),this.PJ=w.pr(w.qo),this.kJ=!!i.yF,this.FJ=!!i.yJ,this.jJ=!!i.MJ,this.BJ=!!i.wJ,this.zJ=i.scaleRate,this.hT=i.GL,this.UJ=null,this.WJ=1,this.nT=i.dF,this.QJ=0,this.JJ=0,this.VJ=0,this.YJ=!1,this.xE=w.pr(w.Rect),this.HJ=w.pr(w.Rect),this.qJ=w.pr(w.Rect),this.ZJ=!0,this.bb=xh.create(),this.XJ=!0,this.dL=xh.create(),this.KJ=!0,this.$J=w.pr(w.yy.Ty),this.tV=!0,this.sV=[],this.iV=i.SJ,this.eV=[],this.hV=[],this.rV=new Map,this.q8=[],this.nV=!1,this.oV=!1,this.aV=!1;const h=this.gf.zR();this.uV=w.pr(w.lV,this,i.TJ),this.vO=w.pr(w.yy.vN,h.cV(),{dN:(t,s)=>{const i=s.gO(),e=i.SD();t.uT(i.fV()),t._D(e),t.ED(e),h.dV(e)},mN:t=>this.hk().pV(t)}),this.mV=!0,this.gV=!0,this.yV=null,this.MV=[],this.wV=!1,this.SV=w.pr(w.Rect,0,0,-1,-1),this.TV=w.pr(w.Rect,0,0,-1,-1),this.bV=new self.vk(this),this.xV(),this.vV()&&(this.yV=w.pr(w.rJ,this.gf.YO(),this.gf.qO())),this.CV=i.bJ.map(t=>w.xJ.IV(this.vJ,this,t))}GV(){for(const t of this.iV){const s=this.gf._V(t[1]);this.vJ.EV(s),s.AV()||(s.DV(t),s.NV(this.iy)),this.eV.push(t),this.rV.set(t[2],t)}w.Hn(this.sV,this.eV),this.iV=null}static IV(t,s,i){return w.pr(w.xJ,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],$k:i[19],backgroundColor:i[4].map(t=>t/255),pF:i[5],gJ:[i[6],i[7]],opacity:i[8],yF:i[9],yJ:i[17],MJ:i[18],wJ:i[10],scaleRate:i[11],GL:i[12],dF:i[16],SJ:i[14],TJ:i[15],bJ:i[20]})}mr(){for(const t of this.CV)t.mr();w.Qn(this.CV);for(const s of this.q8)this.gf.VF(s);w.Qn(this.q8),this.uV.mr(),this.uV=null,this.vO.mr(),this.vO=null,this.bV=null,this.CJ=null,this.vJ=null,this.gf=null}LV(t){return this.rV.get(t)}OV(h){let r=this.vJ.RV(),n=0,o=this.eV;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.gf._V(t[1]),i=!0;if(!s.PV()||r){const a=this.gf.kV(t,this,!0);h.push(a),s.FV()&&(i=!1,this.hV.push(a.$F()))}i&&(o[n]=o[e],++n)}w.Wn(o,n),this.gf.ik(),this.F4()}jV(t,s){if(!t.OP().lP())throw new Error("instance is not of world type");const i=t.D4();if(i.N4()!==this)throw new Error("instance added to wrong layer");this.q8.push(t),0!==i.vT()&&(this.aV=!0),s&&this.vV()&&t.D4().i5(),this.F4(t)}BV(t){this.q8.includes(t)||(this.q8.push(t),0!==t.D4().vT()&&(this.aV=!0),this.F4(t))}zV(t,s){const i=t.D4();if(i.N4()!==this)throw new Error("instance added to wrong layer");this.q8.unshift(t),0!==i.vT()&&(this.aV=!0),this.F4(t),s&&this.vV()&&t.D4().i5()}UV(t,s){const i=this.q8.indexOf(t);i<0||(s&&this.vV()&&t.D4().WV(),this.q8.splice(i,1),this.F4(t),this.QV())}JV(){this.aV=!0}QV(){0===this.q8.length&&(this.aV=!1)}VV(t){if(t){const s=new Set;for(const i of this.q8){const e=i.D4().V8();0<=e&&s.add(e)}let t=-1;for(const h of this.q8){const r=h.D4();if(!(0<=r.V8())){for(++t;s.has(t);)++t;r.YV(t)}}}this.q8.sort(n)}HV(){}qV(){for(const t of this.q8)t.jF().FV()||this.gf.VF(t);this.gf.ik(),w.Qn(this.q8),this.aV=!1,this.F4()}ZV(s,t,i,e,h,r){const n=this.gf.o3(),o=this.gf.XV(),a=s.KV(),u=[];for(const l of this.eV){const c=l[0],f=c[0],d=c[1];if(t.il(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.$V(p))continue}let t=h;if(!t){const y=this.gf.E4();t=this.f4()===y?this:(t=y.tY(this.nf()))||y.O4(this._O())}const m=this.gf.kV(l,t,!1,void 0,void 0,!1,r),g=(t.ZP(m),m.D4());g.n5(i,e),g.i5(),n.XP(!0),m.KP(),n.XP(!1),u.push(m)}}return u}YP(){return this.q8.length}f4(){return this.vJ}nf(){return this.Mr}sY(t){this.iy=t}_O(){return this.iy}iY(t){this.GJ=t}K6(){return this.GJ}tF(){return this.IJ}sF(t){this.IJ!==(t=!!t)&&(this.IJ=t,this.vJ.eY(),this.gf.j4())}hY(){let t=this.zk();return(t?t.Qk():this.f4().rY()).indexOf(this)}nY(){return this._J}K4(){return this.gf}aY(){return this.EJ}uY(){for(const t of this.Uk())if(t.aY())return!0;return!1}$R(){return this.gf.$R()}hk(){return this.uV}GO(){return this.lY(),this.vO}lY(){const t=this.cY();if(this.mV||t!==this.gV||this.vO.pL()){const s=this.hk().fY();this.vO.mL(s.map(t=>t.gv()),{yN:s.map(t=>t._O()),MN:!t,xN:!0}),this.mV=!1,this.gV=t}}QB(){this.hk().QB(),this.mV=!0}vV(){return this.BJ&&!this.jJ}dY(){return this.yV}pY(){this.wV=!1}Zk(){for(const t of this.mY())if(!t.Yk())return!1;return!0}Yk(){return this.AJ}Hk(t){this.AJ!==(t=!!t)&&(this.AJ=t,this.gf.j4())}Kk(t){this.DJ=!!t}Xk(){return this.DJ}eF(){for(const t of this.mY())if(!t.Xk())return!1;return!0}bF(t){if(this.YJ!==(t=!!t)){if(this.YJ=t){const s=this.f4();this.JJ=s.pk(),this.VJ=s.gk()}this.gY(),this.gf.j4()}}yY(){return this.YJ}dk(t){const s=this.f4(),i=s.MY(),e=s.wY();this.JJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.JJ=t,this.yY())&&(this.gY(),this.gf.j4())}mk(t){const s=this.f4(),i=s.SY(),e=s.TY();this.VJ!==(t=(t=e<t?e:t)<i?i:t)&&(this.VJ=t,this.yY())&&(this.gY(),this.gf.j4())}pk(){return this.yY()?this.JJ:this.f4().pk()}gk(){return this.yY()?this.VJ:this.f4().gk()}vF(){return this.bY(),this.xE}xY(){return this.bY(),this.HJ}vY(){return this.bY(),this.qJ}Pk(){const t=this.f4();return[t.CY(),t.IY()]}TM(t){return this.gf.TM(t)}GY(c,e){const h=this.xY();if(0===c)e.I(h);else{let o=h.Fu(),a=h.ju(),t=this._Y(c),s=h.width()/t,i=h.height()/t,[u,l]=this.Pk();if(.5!==u||.5!==l){let t=this.EY(),s=this.gf,i=this.TM()/t,e=(u-.5)*s.AY()/i,h=(l-.5)*s.DY()/i,r=this.fk(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.cu(),h=xr.du()),w.Fr(t,0,c));o+=w.Ot(e,0,n),a+=w.Ot(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}PA(){return this.rT.ya()}FA(t){t=w.Tr(t,0,1),this.rT.ya()!==t&&(this.rT.ua(t),this.xV(),this.gf.j4())}xV(){this.PJ.I(this.rT),this.PJ._a()}fV(){return this.PJ}cY(){return this.rT.xa(1,1,1,1)}oF(){return this.zJ}nF(t){this.zJ!==t&&(this.zJ=t,this.gY(),this.gf.j4())}lF(){return this.OJ}fF(){return this.RJ}NY(t,s){this.OJ===t&&this.RJ===s||(this.OJ=t,this.RJ=s,this.gY(),this.gf.j4())}uF(t){this.NY(t,this.fF())}cF(t){this.NY(this.lF(),t)}CT(t){this.nT!==t&&(this.nT=t,this.gf.j4())}vT(){return this.nT}ck(t){t=w.br(t),this.QJ!==t&&(this.QJ=t,this.gY(),this.gf.j4())}fk(){return w.br(this.vJ.fk()+this.QJ)}aF(){return this.QJ}LY(){return 0<this.q8.length}R4(){return this.q8}OY(){return this.RY()&&this.jJ?(w.Hn(Ir,this.R4()),Ir.sort((t,s)=>this.PY(t,s)),Ir):this.R4()}kY(t){w.Kh(t,this.OY());for(const s of this.CV)s.Zk()&&0<s.PA()&&s.kY(t)}PY(t,s){const i=this.f4().FY(),e=i[0],h=i[1],r=i[2],n=t.D4(),o=s.D4(),a=n.wT()-e,u=n.bT()-h,l=n.vT()-r,c=o.wT()-e,f=o.bT()-h,d=o.vT()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}TF(){return this.NJ}gF(){return this.LJ}mF(t){this.LJ!==(t=!!t)&&(this.LJ=t,this.gf.j4())}wF(){return this.kJ}MF(t){this.kJ!==(t=!!t)&&(this.kJ=t,this.gf.j4())}jY(){return!this.K4().BY()||!this.FJ}RY(){return!this.jY()}zY(){return this.RY()&&this.f4().UY()}WY(){if(!this.zY())return!1;for(const t of this.CV)if(!t.WY())return!1;return!0}aT(t){this.hT!==t&&(this.hT=t,this.gf.j4())}SF(){return this.hT}QY(){return!this.CJ}zk(){return this.CJ}JY(t){this.CJ=t}Qk(){return this.CV}VY(){return 0<this.CV.length}YY(t,s=!0){s?this.CV.push(t):this.CV.unshift(t)}HY(t,s,i){let e=this.CV.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.CV.splice(e,0,t)}qY(t){const s=this.CV.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.CV.splice(s,1)}ZY(){for(const t of this.CV)if(t.XY())return!0;return!1}*Vk(){for(const t of this.CV)yield*t.Vk();yield this}*Uk(){let t=this.zk();for(;t;)yield t,t=t.zk()}*mY(){yield this,yield*this.Uk()}KY(t){for(const s of this.Uk())if(s===t)return!0;return!1}$Y(t){return this===t||this.OJ===t.OJ&&this.RJ===t.RJ&&this.WJ===t.WJ&&this.zJ===t.zJ&&this.QJ===t.QJ&&this.pk()===t.pk()&&this.gk()===t.gk()}tH(){return{parallaxX:this.lF(),parallaxY:this.fF(),scale:this.rF(),scaleRate:this.oF(),angle:this.aF(),hasOwnScroll:this.yY(),scrollX:this.pk(),scrollY:this.gk()}}sH(t){this.NY(t.parallaxX,t.parallaxY),this.hF(t.scale),this.nF(t.scaleRate),this.ck(t.angle),this.bF(t.hasOwnScroll),this.dk(t.scrollX),this.mk(t.scrollY),this.bY()}iH(t){if(0!==t.size){const s=w.$n(this.q8,t);0<s&&(this.QV(),this.F4())}}F4(t){this.nV=!1,this.wV=!1,t&&!t.jF().OP().fP()||(this.oV=!1)}eH(){if(!this.nV){if(this.q8.sort(t),this.vV())for(let t=0,s=this.q8.length;t<s;++t){const i=this.q8[t].D4();i.YV(t),this.yV.pJ(i.hH())}else for(let t=0,s=this.q8.length;t<s;++t)this.q8[t].D4().YV(t);this.nV=!0}}rH(){if(!this.oV){let t=this.vJ.nH(this.K6()),s=t.map(t=>[...t.Vk()]).flat(),i=0;for(const e of s){for(const h of e.R4())h.jF().OP().fP()&&h.D4().oH(i++);e.aH()}}}aH(){this.oV=!0}uH(){return{isVisible:this.Zk(),opacity:this.PA(),isInteractive:this.Xk()}}lH(t,s,i){const e=t.D4(),h=s.D4();if(e.N4()!==this||h.N4()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.L4(),n=h.L4();return r!==n+(i?1:-1)&&(w.qn(this.q8,r),r<n&&n--,i&&n++,n===this.q8.length?this.q8.push(t):this.q8.splice(n,0,t),this.F4(t),!0)}cH(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.D4().V8()<a.D4().V8()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}fH(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.cH(h,r))}return e%2==1&&i.push(s[e-1]),i}dH(t){for(;1<t.length;)t=this.fH(t);return t[0]}pH(){return this.eH(),w.Qn(mr),this.yV.dJ(this.vF(),mr),mr.length?1===mr.length?mr[0]:this.dH(mr):[]}XY(){return this.Zk()&&0<this.PA()&&this.mH()}mH(){if(this.LY()||!this.gF())return!0;for(const t of this.CV)if(t.mH())return!0;return!1}gH(){return this.wF()||!this.cY()||0!==this.SF()||this.uV.yH()}MH(){if(this.gH())return!0;for(const t of this.CV)if(t.MH())return!0;return!1}SD(){return this.UJ}_Y(t){if(this.vJ.jk())return 1;{const s=this.wH();return s/(s-t)}}SH(t){const s=this.gf.PF();if(this.vJ.jk())return s;{const i=this.wH(),e=this.TM();return e/Math.abs(i-t)*s}}gY(){this.KJ=!0,this.tV=!0,this.ZJ=!0}TH(t){return this.KJ&&(this.bH(t,this.dL,0,0,null),this.KJ=!1),this.dL}EY(t){return this.TM(t)/this.xH()}wH(){return this.zY()?this.f4().FY()[2]:this.EY()}vH(){if(this.zY()){const t=this.f4().FY();return[t[0],t[1],t[2]]}return this.CH()}CH(t=0,s=0,h=0){let r=this.gf,i=this.f4(),e=r.IH(),n=r.GH(),o=(this.pk()-e)*this.OJ+e,a=(this.gk()-n)*this.RJ+n,u=(r.KO()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.jk()?this.TM(h):this.EY(h),[f,d]=this.Pk();if(.5!==f||.5!==d){let t=this.TM(h)/c,s=(f-.5)*r.AY()/t,i=(d-.5)*r.DY()/t,e=this.fk();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.cu(),i=xr.du()),u+=s,l+=i}return[u,l,c]}bH(t,s,i,e,h){const r=this.gf,n=this.f4();if(this.zY()){vh.I(Sr,n.FY()),vh.I(Tr,n._H()),vh.I(br,n.EH());const o=r.IH(),a=r.GH(),u=Tr[0]-Sr[0],l=Tr[1]-Sr[1],c=Tr[2]-Sr[2];Sr[0]=(Sr[0]-o)*this.OJ+o,Sr[1]=(Sr[1]-a)*this.RJ+a,Sr[2]*=Math.max(this.OJ,this.RJ),Tr[0]=Sr[0]+u,Tr[1]=Sr[1]+l,Tr[2]=Sr[2]+c}else{const[f,d,p]=this.CH(i,e,h),m=(vh.set(Sr,f,d,p),vh.set(Tr,f,d,p-100),this.fk());0===m?vh.set(br,0,1,0):vh.set(br,Math.sin(m),Math.cos(m),0)}t.kM(s,Sr,Tr,br,h||r.DY())}AH(){this.XJ=!0,this.tV=!0,this.ZJ=!0}DH(t){return this.XJ&&(this.NH(t),this.XJ=!1),this.bb}NH(t){const s=this.gf.zR(),[i,e]=this.Pk();if(this.vJ.jk())t.PM(this.bb,s.LH(),s.OH());else if(.5===i&&.5===e)xh.I(this.bb,s.RH());else{const h=s.LH(),r=s.OH();t.OM(this.bb,h/r,i,e)}}qW(t,s=!0,i=0,e=0,h=0){s&&t.CA(this.DH(t));let r;r=0===i&&0===e&&0===h?this.TH(t):(this.bH(t,yr,i,e,h),yr),t.DA(r)}PH(t){this.qW(t),t.Iw(this.vT())}kH(t){let s=null;if(t.bS()&&this.gf.FH()){const i=this.gf.zR().jH(this);i&&(s=i.lE(),t.RD(s))}return s}BH(t){if(t.RM()&&this.gf.FH()){const s=2*(this._O()+1);t.StartMeasuringRenderPassTime(s,1+s)}}a2(t,s,i){let e=this.gf.zR(),h=this.gH(),r=null,n=this.kH(t);if(this.BH(t),h){const o={T2:this.gf.ZO(),ub:!0,zH:!!t.RM()&&this.gf.UH()};"low"===e.WH()&&(o.width=e.LH(),o.height=e.OH()),r=this.gf.QH(o),this.UJ=r,t.ID(r),this.gF()&&t.dD(0,0,0,0)}else this.UJ=s,t.ID(s);if(this.gF()||t.oc(this.NJ),this.vJ.JH(t,this.UJ,this.CV,h&&this.gF()),this.BH(t),this.qW(t),t.Iw(this.vT()),t.gD(this.RY()),this.xH()>Number.EPSILON){this.eH();const a=this.vV()&&0===this.vT()&&!this.aV;this.zY()?this.VH(t):a?this.YH(t):this.HH(t,this.OY())}t.Iw(0),t._w(0),h&&(t.gD(!1),this.qH(t,r,s,i)),n&&t.kD(n),this.UJ=null}HH(i,e){let h=this.vF(),r=this.UJ,n=this.f4().jk(),o=this.f4().ZH(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).D4();l.Zk()&&l.XH(h,o,n)&&this.KH(u,l,i,r)}}}VH(e){const h=this.UJ,r=this.$H(),n=vr,o=Cr,a=this.OY();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.D4();if(l.Zk()&&l.t7(r)){(!u.s7()||0<l.i7())&&o.push(u);const c=u.D4().a5();n.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.D4();if(d.Zk()&&d.t7(r)){if(d.a5()!==c)break;(f.s7()?(0<d.i7()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].e7()){this.h7(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.D4();m.r7(!0),this.KH(p,m,e,h),m.r7(!1)}}else{this.KH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.D4(),M=y.N4();M.KH(g,y,e,h)}}}s=t,w.Qn(n),w.Qn(o)}else++s}}h7(i,e){const h=this.UJ;i.DD();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.D4();n.n7(!0),this.o7(r,n,i)}i.ND();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.D4();this.KH(o,a,i,h),a.n7(!1)}i.OD()}YH(t){let s=this.yV,i=this.TV,e=this.SV,h=this.vF(),r;i.set(s.lJ(h.Au()),s.cJ(h.Du()),s.lJ(h.Nu()),s.cJ(h.Lu())),this.wV&&i.equals(e)?r=this.MV:(r=this.pH(),this.wV=!0,e.I(i)),this.HH(t,r),r!==this.MV&&w.Hn(this.MV,r)}KH(t,s,i,e){s.yH()?this.a7(t,s,i,e):this.o7(t,s,i)}o7(t,s,i){const e=s.u7();i.ow()!==e&&e.oT(),t.a2(i)}a7(t,s,i,e){this.l7(t,s,i,e,null)&&this.qW(i)}l7(t,s,i,e,h){const r=s.t5().GO();return r.CL(i,e,{IL:t,GL:s.SF(),devicePixelRatio:this.gf.c7(),time:t.f7(),_L:this.gf.d7()*this.xH(),EL:this.fk(),ZL:s.l5(),XL:r.pO()?null:this.p7(s),OL:h&&h.OL,RL:h&&h.RL,PL:h&&h.PL,kL:h&&h.kL}),i.Iw(this.vT()),r.LA()}qH(t,s,i,e){const h=this.uV.fY(),r=this.gf;0===h.length?(t.ID(i),t.WM(),e&&0===this.hT&&this.cY()?t.GD(s):(t.aT(this.hT),t.uT(this.PJ),t._D(s)),t.ED(s),r.dV(s)):this.GO().CL(t,i,{IL:this,GL:this.SF(),devicePixelRatio:r.c7(),_L:r.d7()*this.xH(),EL:this.fk(),ZL:this.vF(),XL:null,gN:!0})}rF(){return this.WJ}hF(t){this.WJ!==t&&(this.WJ=t,this.vJ.m7(),this.gY(),this.gf.j4())}PF(){return this.xH()*this.gf.PF()}oU(){return this.xH()*this.gf.oU()}xH(){return(this.WJ*this.vJ.lk()-1)*this.zJ+1}bY(){if(this.ZJ){this.ZJ=!1;let t=this.gf.IH(),s=this.gf.GH(),i=(this.pk()-t)*this.OJ+t,e=(this.gk()-s)*this.RJ+s,h=this.xH(),r=this.gf.AY()/h,n=this.gf.DY()/h,o=i-r/2,a=e-n/2;this.gf.KO()&&(o=Math.round(o),a=Math.round(a));const u=this.HJ,l=(u.set(o,a,o+r,a+n),this.fk()),c=(0!==l&&(dr.I(u),dr.offset(-u.Fu(),-u.ju()),pr._l(dr,l),pr.Al(dr),dr.offset(u.Fu(),u.ju()),u.I(dr)),this.nT);this.GY(c,this.xE),this.zY()?this.g7(c,this.qJ):this.qJ.I(this.xE)}}g7(t,s){let i=this.gf.zR(),e=i.JR(),h=i.YR(),[r,n]=this.IF(0,0,t),[o,a]=this.IF(e,0,t),[u,l]=this.IF(e,h,t),[c,f]=this.IF(0,h,t),d=Math.min(r,o,u,c),p=Math.min(n,a,l,f),m=Math.max(r,o,u,c),g=Math.max(n,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}IF(t,s,i=0){return this.y7(t,s,i,this.oU())}NF(t,s,i=0){return this.y7(t,s,i,this.PF()*this.$R())}y7(t,s,i,e){const h=this.gf,r=h.US(),n=this.xH(),o=h.AY()/n,a=h.DY()/n,u=wr,l=(Uh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.DH(r)),c=this.TH(r),f=Mr,d=w.yy.Sy(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}M7(t,s){const i=this.WJ,e=this.zJ,h=this.OJ,r=this.RJ,n=this.QJ,o=(this.WJ=1,this.zJ=1,this.OJ=1,this.RJ=1,this.QJ=0,this.gY(),this.IF(t,s));return this.WJ=i,this.zJ=e,this.OJ=h,this.RJ=r,this.QJ=n,this.gY(),o}AF(t,s,i=0){return this.w7(t,s,i,this.oU())}OF(t,s,i=0){return this.w7(t,s,i,this.PF()*this.$R())}w7(t,s,i,e){const h=this.gf,r=h.US(),n=this.xH(),o=h.AY()/n,a=h.DY()/n,u=wr,l=(Uh.set(u,0,0,o,a),this.DH(r)),c=this.TH(r),f=Mr,d=w.yy.My(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}S7(t,s){return t*=this.PF()*this.$R(),0!==s&&(t*=this._Y(s)),t}p7(t){const s=t.l5(),i=t.a5(),e=t.i7(),u=i+e,l=s.Au(),c=s.Du(),f=s.Nu(),d=s.Lu();if(this.zY()){if(this.T7(l,c,i)||this.T7(f,c,i)||this.T7(f,d,i)||this.T7(l,d,i))return null;if(0<e&&(this.T7(l,c,u)||this.T7(f,c,u)||this.T7(f,d,u)||this.T7(l,d,u)))return null}else if(u>=this.EY())return null;let[p,m]=this.OF(l,c,i),[g,y]=this.OF(f,d,i);if(0!==this.fk()||0<e||this.zY()){const[M,w]=this.OF(f,c,i),[S,T]=this.OF(l,d,i);if(0<e){let[t,s]=this.OF(l,c,u),[i,e]=this.OF(f,c,u),[h,r]=this.OF(f,d,u),[n,o]=this.OF(l,d,u),a=Math.min(p,g,M,S,t,i,h,n);g=Math.max(p,g,M,S,t,i,h,n),p=a,a=Math.min(m,y,w,T,s,e,r,o),y=Math.max(m,y,w,T,s,e,r,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return dr.set(p,m,g,y),dr}$H(){return this.tV&&(this.b7(),this.tV=!1),this.$J}b7(){const t=this.gf.US(),s=this.DH(t),i=this.TH(t);this.$J._y(i,s)}T7(t,s,i){return this.$H().Ay(t,s,i)}x7(){const t={d:this.aY(),s:this.rF(),a:this.aF(),v:this.Yk(),i:this.Xk(),html:this.tF(),bc:this.NJ.toJSON(),t:this.gF(),sx:this.JJ,sy:this.VJ,hosp:this.YJ,px:this.lF(),py:this.fF(),c:this.rT.toJSON(),sr:this.oF(),fx:this.uV.NT(),cg:this.hV};return t}v7(t){this.EJ=!!t.d,this.WJ=t.s,this.QJ=t.a,this.AJ=!!t.v,this.DJ=!t.hasOwnProperty("i")||t.i,this.IJ=!!t.html,this.NJ.qa(t.bc),this.LJ=!!t.t,t.hasOwnProperty("sx")&&(this.JJ=t.sx),t.hasOwnProperty("sy")&&(this.VJ=t.sy),t.hasOwnProperty("hosp")&&(this.YJ=!!t.hosp),this.OJ=t.px,this.RJ=t.py,this.rT.qa(t.c),this.xV(),this.zJ=t.sr,w.Hn(this.hV,t.cg),w.Hn(this.eV,this.sV);let i=new Set(this.hV),e=0;for(let t=0,s=this.eV.length;t<s;++t)i.has(this.eV[t][2])||(this.eV[e]=this.eV[t],++e);w.Wn(this.eV,e),this.uV.LT(t.fx),this.mV=!0}C7(){this.VV(!1),this.F4(),this.gY(),this.AH()}wk(){return this.bV}ZP(t,s=!1){if(this.q8.includes(t))s&&this.q8.sort((t,s)=>{const i=t.D4().I7(),e=s.D4().I7();return i-e});else if(t.G7()){const i=[...t.F5()];i.push(t),i.sort((t,s)=>{const i=t.D4().I7(),e=s.D4().I7();return i-e});for(const e of i)if(e.XF())for(const h of e.KF())if(!i.includes(h)){const r=[...h.F5()];r.push(h),r.sort((t,s)=>{const i=t.D4().I7(),e=s.D4().I7();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.OP().lP()&&this.jV(n,!0)}else if(t.OP().lP()&&this.jV(t,!0),t.XF())for(const o of t.KF()){const a=[...o.F5()];if(a.push(o),a.sort((t,s)=>{const i=t.D4().I7(),e=s.D4().I7();return i-e}),a&&a.length)for(const u of a)u.OP().lP()&&this.jV(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){G!==t&&(t.PH(s),G=t)},b=(u,T,self.ks),e=self.C3Debugger,h=(b.pr(b.Rect),b.pr(b.Rect),b.pr(b.Rect)),x=b.pr(b.qo),t=self.Ss,l=t._s,a=[],v=[],C=[],I=[],G=null;b._7=class extends b.lr{constructor(t,s,i){super(),this.E7=t,this.gf=t.K4(),this.Mr=i[0],this.A7=i[1],this.D7=i[2],this.sg=i[1],this.ig=i[2],this.N7=!!i[3],this.L7=!!i[4],this.O7=i[5],this.R7=i[6],this.P7=i[7],this.k7=null,this._J=i[8],this.iy=s,this.JJ=0,this.VJ=0,this.WJ=1,this.QJ=0,this.F7=new Set,this.j7=new Set,this.B7=new Set,this.z7=[],this.U7=[],this.W7=new Map,this.Q7=new Map,this.J7=[],this.V7=!1,this.Y7=l.create(),this.H7=l.create(),this.q7=l.create(),this.Z7=[],this.X7=[],this.K7=new Map,this.t9=new Map,this.s9=-1;const h=this.gf.zR();this.uV=b.pr(b.lV,this,i[11]),this.vO=b.pr(b.yy.vN,h.cV(),{dN:(t,s)=>{const i=s.gO(),e=i.SD();t.jA(),t._D(e),t.ED(e),h.dV(e)},mN:t=>this.hk().pV(t)}),this.mV=!0,this.i9=!1,this.UJ=null,this.e9={},this.h9=new Map,this.r9=!0,this.n9=new self.ek(this),this.o9=b.pr(b.Event.qf);for(const e of i[9])this.Z7.push(b.xJ.IV(this,null,e));this.a9();for(const r of this.bk())r.GV();for(const n of i[10]){const o=this.gf._V(n[1]);if(!o)throw new Error("missing nonworld object class");o.AV()||o.DV(n),this.J7.push(n),this.EV(o)}}mr(){for(const t of this.X7)t.mr();b.Qn(this.X7),this.B7.clear(),this.k7=null,this.E7=null,this.gf=null}K4(){return this.gf}nf(){return this.Mr}nY(){return this._J}_O(){return this.iy}hk(){return this.uV}GO(){return this.lY(),this.vO}lY(){const t="low"===this.gf.zR().WH();if(this.mV||this.i9!==t||this.vO.pL()){const s=this.hk().fY();this.vO.mL(s.map(t=>t.gv()),{yN:s.map(t=>t._O()),wN:t,xN:!0}),this.mV=!1,this.i9=t}}QB(){this.hk().QB(),this.mV=!0}u9(){let i=this.X7[0].xH();for(let t=1,s=this.X7.length;t<s;++t){const e=this.X7[t];0===e.lF()&&0===e.fF()||(i=Math.min(i,e.xH()))}return i}l9(){return.5*this.gf.AY()/this.u9()}c9(){return.5*this.gf.DY()/this.u9()}MY(){return this.f9()?-1/0:this.l9()}wY(){return this.f9()?1/0:this.Mm()-this.l9()}SY(){return this.f9()?-1/0:this.c9()}TY(){return this.f9()?1/0:this.Em()-this.c9()}dk(t){const s=this.MY(),i=this.wY();this.JJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.JJ=t,this.d9(),this.gf.j4())}pk(){return this.JJ}mk(t){const s=this.SY(),i=this.TY();this.VJ!==(t=(t=i<t?i:t)<s?s:t)&&(this.VJ=t,this.d9(),this.gf.j4())}gk(){return this.VJ}f9(){return this.N7}m7(){this.dk(this.pk()),this.mk(this.gk());for(const t of this.X7)t.yY()&&(t.dk(t.pk()),t.mk(t.gk()))}Ok(t,s){this.O7===t&&this.R7===s||(this.O7=t,this.R7=s,this.p9()&&(this.m9(),this.d9(),this.gf.j4()))}CY(){return this.jk()?.5:this.O7}IY(){return this.jk()?.5:this.R7}ZH(){const t=this.CY(),s=this.IY();return t<0||1<t||s<0||1<s}kk(){this.L7&&(this.L7=!1,this.m9(),this.d9(),this.gf.j4())}Fk(){this.L7||(this.L7=!0,this.m9(),this.d9(),this.gf.j4())}jk(){return this.L7}p9(){return!this.jk()}g9(t){this.V7!==(t=!!t)&&(this.V7=t,this.d9(),this.gf.j4())}UY(){return this.V7}y9(t,s,i,e,h,r,n,o,a){u(this.Y7,t,s,i)&&u(this.H7,e,h,r)&&u(this.q7,n,o,a)||(l.set(this.Y7,t,s,i),l.set(this.H7,e,h,r),l.set(this.q7,n,o,a),this.M9())}M9(){this.d9(),this.gf.j4()}FY(){return this.Y7}_H(){return this.H7}EH(){return this.q7}lk(){return this.WJ}uk(t){this.WJ!==t&&(this.WJ=t,this.d9(),this.m7(),this.gf.j4())}ck(t){t=b.br(t),this.QJ!==t&&(this.QJ=t,this.d9(),this.gf.j4())}fk(){return this.QJ}Mm(){return this.sg}Im(t){!isFinite(t)||t<1||(this.sg=t)}Em(){return this.ig}wm(t){!isFinite(t)||t<1||(this.ig=t)}w9(){return this.k7}rY(){return this.Z7}*bk(){for(const t of this.Z7)yield*t.Vk()}Tk(){return this.X7}S9(){return this.X7.length}N4(t){return"number"==typeof t?this.O4(t):this.tY(t.toString())}O4(t){return t=b.Tr(Math.floor(t),0,this.X7.length-1),this.X7[t]}tY(t){return this.K7.get(t.toLowerCase())||null}T9(t){return!!this.tY(t)}b9(t){return this.t9.get(t)||null}m9(){for(const t of this.X7)t.AH()}d9(){for(const t of this.X7)t.gY()}Ik(t,s,i){if(this.T9(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.zk(),h=b.pr(b.xJ,this,e,{name:t,sid:Math.floor(1e15*Math.random()),mJ:!0});this.x9(h,s,i),this.K4().j4(),this.eY()}_k(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.v9(t),this.x9(t,s,i),this.K4().j4(),this.eY())}Ak(t){if(this.v9(t)){const s=this.gf.o3();s.XP(!0),t.mr(),s.XP(!1),this.K4().j4(),this.eY()}}Nk(){const t=new Set;for(const s of this.bk())s.aY()&&!s.uY()&&t.add(s);if(0!==t.size){const i=this.gf.o3();i.XP(!0);for(const e of t)this.v9(e),e.mr();i.XP(!1),this.K4().j4(),this.eY()}}x9(s,i,e){if(2<=e)if(i){if(i===s||i.KY(s))throw new Error(`cannot move layer '${s.nf()}' to sub-layer of itself`);i.YY(s,2===e),s.JY(i)}else 2===e?this.Z7.push(s):this.Z7.unshift(s),s.JY(null);else{const t=i.zk();if(t){if(i.KY(s))throw new Error(`cannot move layer '${s.nf()}' to sub-layer of itself`);t.HY(s,i,0===e),s.JY(t)}else{let t=this.Z7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.Z7.splice(t,0,s),s.JY(null)}}}v9(t){const s=t.zk();if(s)return s.qY(t),!0;if(1<this.Z7.length){const i=this.Z7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.Z7.splice(i,1),!0}return!1}a9(){this.X7=[...this.bk()],this.K7.clear(),this.t9.clear();for(let t=0,s=this.X7.length;t<s;++t){const i=this.X7[t];i.sY(t),this.K7.set(i.nf().toLowerCase(),i),this.t9.set(i.nY(),i)}}C9(){let t=0;for(const s of this.Z7){for(const i of s.Vk())i.iY(t);s.tF()&&t++}}I9(){return this.Z7.at(-1).K6()+1}async eY(){this.a9(),this.C9(),this.s9=this.I9()}G9(){return this.s9}_9(){this.s9=-1}nH(t){const s=[];for(const i of this.Z7){const e=i.K6();if(e===t)s.push(i);else if(t<e)break}return s}tH(){return{scrollX:this.pk(),scrollY:this.gk(),scale:this.lk(),angle:this.fk(),vpX:this.CY(),vpY:this.IY()}}sH(t){this.dk(t.scrollX),this.mk(t.scrollY),this.uk(t.scale),this.ck(t.angle),this.Ok(t.vpX,t.vpY)}E9(){let t=this.Z7.filter(t=>t.XY())[0];for(;t;){if(!t.gF())return x.ca(t.TF()),x.ua(1),x;if(t.gH())return x.ta(0,0,0,0),x;t=t.Qk().filter(t=>t.XY())[0]}return x.ta(0,0,0,0),x}RV(){return this.r9}A9(){return[...this.F7]}EV(t){if(t.XF())for(const s of t.N9().D9())this.F7.add(s);else this.F7.add(t)}L9(){return[...this.j7]}O9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.zo(this.j7,t.j7),t.j7.clear());const i=[];for(const e of this.F7)this.j7.has(e)||(i.push(e.R9(s)),this.j7.add(e));return Promise.all(i)}async P9(t){if(t.KV())throw new Error("cannot load textures for family");const s=this.gf.US();if(s&&!s.R_()&&!this.j7.has(t)){this.j7.add(t);const i=t.R9(s);this.k9(i),await i,t.F9(),this.gf.j4()}}k9(t){this.B7.add(t),t.then(()=>this.B7.delete(t)).catch(()=>this.B7.delete(t))}j9(){return Promise.all([...this.B7])}B9(t){if(t.KV()||0<t.YP())throw new Error("cannot unload textures");const s=this.gf.US();s&&this.j7.has(t)&&(this.j7.delete(t),t.z9(s))}U9(t,s){if(t!==this&&s)for(const i of this.j7)i.FV()||t.F7.has(i)||(i.z9(),this.j7.delete(i))}W9(){this.j7.clear()}async Q9(t){const s=this.gf,i=this.E7,e=s.o3(),h=(this.P7&&(this.k7=e.J9(this.P7),this.k7.V9()),i.Y9(this),this.sg=this.A7,this.ig=this.D7,this.JJ=s.YO()/2,this.VJ=s.qO()/2,this.m7(),this.m9(),this.d9(),this.C9(),await this.gf.zR().H9(this.I9(),!0),this.q9(t),this.gf.Z9(!0),this.X9(),this.r9||this.K9(),this.tq(this.z7),this.tq(this.U7),this.sq(),i.iq(),s.ik(),this.gf.Z9(!1),this.gf.eq());if(await Promise.all(h),b.Qn(h),!s.hq()){for(const r of this.z7)r.rq();for(const n of this.U7)n.nq(this.W7,this.Q7);for(const[o,a]of Object.entries(this.e9)){const u=this.gf.BU(parseInt(o,10));u&&!u.KV()&&u.PV()&&b.Qn(a)}for(const l of this.z7)l.oq();for(const c of this.U7)c.oq();for(const f of this.z7)f.W5()||f.aq();for(const d of this.U7)d.W5()||d.aq()}b.Qn(this.z7),b.Qn(this.U7),this.W7.clear(),this.Q7.clear(),await Promise.all([...this.F7].map(t=>t.uq(this.gf.US()))),t&&(s.qf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.lq(new b.Event("beforeprojectstart"))),await this.cq(new b.Event("beforeanylayoutstart")),s.qf().dispatchEvent(new b.Event("beforelayoutstart")),await this.lq(new b.Event("beforelayoutstart")),s.hq()||await s._j(b.gq.mq.pq.fq,null,null),s.qf().dispatchEvent(new b.Event("afterlayoutstart")),await this.lq(new b.Event("afterlayoutstart")),await this.cq(new b.Event("afteranylayoutstart")),t&&(s.qf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.lq(new b.Event("afterprojectstart"))),e.yq(i),await this.j9(),this.r9=!1}q9(t){for(const s of this.gf.XV())if(!s.KV()&&s.lP())for(const i of s.QP()){const e=i.D4(),h=e.N4(),r=b.Tr(h._O(),0,this.X7.length-1),n=this.X7[r];e.P4(n,!0),n.BV(i)}if(!t)for(const o of this.X7)o.VV(!1)}X9(){for(const t of this.X7)t.OV(this.z7),t.HV()}K9(){let s=!1;for(const[t,i]of Object.entries(this.e9)){const e=this.gf.BU(parseInt(t,10));if(e&&!e.KV()&&e.PV())for(const h of i){let t=null;if(!e.lP()||(t=h.hasOwnProperty("instJson")?this.b9(h.instJson.w.l):this.b9(h.w.l))){const r=this.gf.kV(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.LT(h.instJson):r.LT(h),s=!0,this.U7.push(r),h.hasOwnProperty("instJson")&&(this.W7.set(r,h),this.Q7.set(h.index,r))}}}for(const n of this.X7)n.VV(!0),n.F4();s&&(this.gf.ik(),this.gf.Mq())}tq(s){for(const i of s)if(i.XF()){const e=i.D4(),t=i.sj();for(const h of i.jF().N9().wq())if(h!==i.jF()){const r=h.QP();if(r.length>t)i.Sq(r[t]);else{let t;t=e?this.gf.kV(h,e.N4(),!0,e.wT(),e.bT(),!0):this.gf.kV(h,null,!0,0,0,!0),this.gf.ik(),h.Tq(),i.Sq(t),s.push(t)}}}}sq(){for(const t of this.J7){const s=this.gf._V(t[1]);s.XF()||this.gf.kV(t,null,!0)}}bq(){let i=[],e=this.J7,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.gf._V(r[1]);n.FV()?n.XF()&&n.N9().xq()||i.push(this.gf.kV(r,null,!0)):(e[h]=r,++h)}b.Wn(e,h),this.gf.ik(),this.tq(i)}ZV(t,s,i,e,h,r,n){if(i)return i.ZV(t,s,h,r,e,n);{const o=[];for(const a of this.X7)o.push(a.ZV(t,s,h,r,e,n));return o.flat()}}async vq(){const t=this.E7;this.gf.hq()||(await this.cq(new b.Event("beforeanylayoutend")),await this.lq(new b.Event("beforelayoutend")),await this.gf._j(b.gq.mq.pq.Cq,null,null),await this.lq(new b.Event("afterlayoutend")),await this.cq(new b.Event("afteranylayoutend"))),t.Iq(!0),this.gf.o3().Gq(),this.r9||this._q();for(const s of this.X7)s.qV();for(const i of this.gf.XV())if(!(i.FV()||i.lP()||i.OP().aP()||i.KV())){for(const e of i.QP())this.gf.VF(e);this.gf.ik()}t.Iq(!1),t.a4()===this&&t.Y9(null)}Eq(t,s){const i=t.jF().nY().toString(),e=(this.e9.hasOwnProperty(i)||(this.e9[i]=[]),this.e9[i]),h={index:s,instJson:t.NT(),sceneGraphJson:{children:[]}};e.push(h),this.h9.set(t,h)}Aq(t){const s=this.h9.get(t);for(const i of t.Dq()){const e=this.h9.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.Lq.Nq(i.D4())})}}_q(){this.h9.clear();let t=0;for(const s of this.X7){s.eH();for(const i of s.R4()){const e=i.jF();!e.FV()&&e.PV()&&(this.Eq(i,t),t++)}}for(const h of this.X7)for(const r of h.R4()){const n=r.jF();!n.FV()&&n.PV()&&this.Aq(r)}this.h9.clear()}Oq(){this.e9={},this.r9=!0}SD(){return this.UJ}gH(){const t=this.gf,s=t.US().bS();return"low"===t.zR().WH()||s&&t.UH()||this.uV.yH()||s&&t.BY()}Rq(t){const s=this.gf.zR();if(this.gH()){t.ID(null),t.dD(0,0,0,0);const i={T2:this.gf.ZO(),ub:t.RM()||this.gf.UH()||this.uV.yH(),zH:!!t.RM()&&this.gf.UH()};"low"===s.WH()&&(i.width=s.LH(),i.height=s.OH()),this.UJ=this.gf.QH(i)}else this.UJ=null}Pq(t){this.gf.kq(t)&&(t.gD(!1),t.ID(null),t.WM(),t.GD(this.UJ))}Fq(t){this.gH()&&(t.gD(!1),this.jq(t,this.UJ))}Bq(t){t.ID(this.UJ),t.oc(this.E9()),this.gf.BY()&&t.mD();const s=this.nH(0);this.JH(t,this.UJ,s,!0),t.RM()&&t.StartMeasuringRenderPassTime(0,1),this.Fq(t),this.UJ=null}zq(t,s){let i=null;this.gf.kq(t)&&(i=this.UJ),t.ID(i),t.dD(0,0,0,0),this.gf.BY()&&t.mD();const e=this.nH(s);this.JH(t,i,e,!0),this.Pq(t),t.mS(),this.gf.zR().Uq(s)}JH(t,e,s,h){const r=s.filter(t=>t.XY());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.WY()&&!n.MH()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.WY()||o.MH())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].ZY()){this.Wq(t,e,a),s+=a.length,b.Qn(a);continue}b.Qn(a)}n.a2(t,e,h&&0===s),++s}}jq(t,s){const i=this.uV.fY(),e=this.gf;0===i.length?(t.ID(null),t.WM(),t.GD(s),t.ED(s),e.dV(s)):(h.set(0,0,e.AY(),e.DY()),this.GO().CL(t,null,{IL:this,GL:3,devicePixelRatio:this.gf.c7(),_L:this.gf.d7()*this.lk(),EL:this.fk(),ZL:h,XL:null,gN:!0}))}Wq(e,h,t){t[0].gF()||(x.ca(t[0].TF()),x.ua(1),e.oc(x)),this.gf.zR(),e.gD(!0);const r=v,n=C,o=I;for(const a of t)a.eH(),a.kY(r);const s=t[0],i=s.kH(e);s.BH(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.D4(),c=l.N4();if(l.Zk()&&l.t7(c.$H())){(!u.s7()||0<l.i7())&&o.push(u);const f=u.D4().a5();n.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.D4();if(p.Zk()&&p.t7(p.N4().$H())){if(p.a5()!==f)break;(d.s7()?(0<p.i7()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].e7()){this.Qq(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.D4(),y=g.N4();g.r7(!0),T(y,e),y.KH(m,g,e,h),g.r7(!1)}}else{T(c,e),c.KH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.D4(),S=w.N4();T(S,e),S.KH(M,w,e,h)}}}s=t,b.Qn(n),b.Qn(o)}else++s}i&&e.kD(i),b.Qn(r),G=null}Qq(i,e,h){i.DD();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.D4(),o=n.N4();n.n7(!0),T(o,i),o.o7(r,n,i)}i.ND();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.D4(),l=u.N4();T(l,i),l.KH(a,u,i,e),u.n7(!1)}i.OD()}x7(){const t={sx:this.pk(),sy:this.gk(),s:this.lk(),a:this.fk(),w:this.Mm(),h:this.Em(),ortho:this.jk(),vpX:this.CY(),vpY:this.IY(),fv:this.r9,persist:this.e9,fx:this.uV.NT(),layers:{},dynamicLayers:[]};for(const s of this.X7)if(s.aY()){const i=s.zk();t.dynamicLayers.push({sid:s.nY(),name:s.nf(),parentSid:i?i.nY():null,siblingIndex:s.hY(),data:s.x7()})}else t.layers[s.nY().toString()]=s.x7();return t}v7(t){this.JJ=t.sx,this.VJ=t.sy,this.WJ=t.s,this.QJ=t.a,this.sg=t.w,this.ig=t.h,this.L7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.O7=t.vpX),t.hasOwnProperty("vpY")&&(this.R7=t.vpY),this.r9=!!t.fv,this.e9=t.persist,this.uV.LT(t.fx),this.mV=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.b9(e);h&&h.v7(i)}if(t.hasOwnProperty("dynamicLayers")){this.Nk(),this.gf.ik();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.a9(),!this.T9(u)&&!this.b9(a)){let t,s;if(null===l)t=null,s=this.Z7;else{if(!(t=this.b9(l)))continue;s=t.Qk()}const d=b.pr(b.xJ,this,t,{name:u,sid:a,mJ:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({s5:d,siblingIndex:c}),d.v7(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.s5,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.eY(),this.m9(),this.d9()}u4(){return this.n9}e3(){return this.o9}Jq(t){t.layout=this.u4();const s=this.gf,i=s.Rj()&&!s.o3().$P();i&&e.StartMeasuringScriptTime(),this.o9.dispatchEvent(t),i&&e.AddScriptTime()}lq(t){return t.layout=this.u4(),this.o9.e0(t)}cq(t){return t.layout=this.u4(),this.gf.lq(t)}Vq(){this.Yq(this.Z7)}Yq(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.nf()),this.Yq(e.Qk(),s+1)}}}{const _r=self.ks;_r.Hq=class extends _r.lr{#zU;#qq=[];#Zq=new Map;#Xq=new Map;#Kq=null;#$q=[];#tZ=null;#sZ=0;#iZ=null;constructor(t){super(),this.#zU=t}mr(){this.#zU=null,this.#Kq=null,this.#tZ=null,this.#iZ=null,_r.Qn(this.#qq),this.#Zq.clear(),this.#Xq.clear(),_r.Qn(this.#$q)}ux(t){const s=_r.pr(_r._7,this,this.#qq.length,t);this.#qq.push(s),this.#Zq.set(s.nf().toLowerCase(),s),this.#Xq.set(s.nY(),s)}K4(){return this.#zU}eZ(t){this.#tZ=t}hZ(){if(this.#tZ)return this.#tZ;if(this.#qq.length)return this.#qq[0];throw new Error("no first layout")}rZ(t){return this.#Zq.get(t.toLowerCase())||null}nZ(t){return this.#Xq.get(t)||null}oZ(t){return t=_r.Tr(Math.floor(t),0,this.#qq.length-1),this.#qq[t]}f4(t){return"number"==typeof t?this.oZ(t):this.rZ(t.toString())}m4(){return this.#qq}Y9(t){this.#Kq=t}a4(){return this.#Kq}aZ(t){if(this.#$q.includes(t))throw new Error("layout already running");this.#$q.push(t)}uZ(t){const s=this.#$q.indexOf(t);if(-1===s)throw new Error("layout not running");this.#$q.splice(s,1)}*lZ(){this.#Kq&&(yield this.#Kq),this.#$q.length&&(yield*this.#$q)}cZ(t){return this.#Kq===t||this.#$q.includes(t)}Iq(t){if(t)this.#sZ++;else{if(this.#sZ<=0)throw new Error("already unset");this.#sZ--}}sk(){return 0<this.#sZ}M4(t){this.#iZ=t}iq(){this.#iZ=null}y4(){return!!this.#iZ}fZ(){return this.#iZ}dZ(){const t=this.a4();t&&t.m9()}pZ(){const t=this.a4();t&&t.d9()}}}{const Er=self.ks,Ar=new RegExp("<(.+?)>","g");Er.mZ=class extends Er.lr{constructor(t){super(),this.gf=t,this.gZ=Er.pr(Er.yZ),this.MZ=null,this.wZ=[],this.SZ=new Map,this.TZ=new Map,this.bZ=new Map,this.xZ=[],this.vZ=[],this.CZ=[],this.IZ=!1,this.GZ=!1,this._Z=!1,this.EZ=()=>this.AZ(),this.DZ=()=>this.NZ(),this.LZ=()=>this.OZ(),this.RZ=()=>this.PZ(),this.kZ=t=>this.FZ(t.PB),this.jZ=t=>this.BZ(),this.zZ=t=>this.UZ(),this.WZ=t=>this.QZ(),this.JZ=[],this.VZ=0}mr(){this.YZ(),this.EZ=null,this.DZ=null,this.LZ=null,this.RZ=null,this.kZ=null,this.zZ=null;for(const t of this.wZ)t.Lz(),t.mr();Er.Qn(this.wZ),this.wZ=null,this.gZ.mr(),this.gZ=null,Er.Qn(this.xZ),this.xZ=null,Er.Qn(this.vZ),this.vZ=null,Er.Qn(this.CZ),this.CZ=null,this.SZ.clear(),this.SZ=null,this.TZ.clear(),this.TZ=null,this.bZ.clear(),this.bZ=null,Er.Qn(this.JZ),this.JZ=null,this.gf=null}HZ(){const t=this.gf.qf();t.addEventListener("pretick",this.EZ),t.addEventListener("tick2",this.DZ),t.addEventListener("beforelayoutchange",this.LZ),t.addEventListener("layoutchange",this.RZ),t.addEventListener("instancedestroy",this.kZ),t.addEventListener("beforeload",this.jZ),t.addEventListener("afterload",this.zZ),t.addEventListener("afterlayoutstart",this.WZ)}YZ(){const t=this.gf.qf();t.removeEventListener("pretick",this.EZ),t.removeEventListener("tick2",this.DZ),t.removeEventListener("beforelayoutchange",this.LZ),t.removeEventListener("layoutchange",this.RZ),t.removeEventListener("instancedestroy",this.kZ),t.removeEventListener("beforeload",this.jZ),t.removeEventListener("afterload",this.zZ),t.removeEventListener("afterlayoutstart",this.WZ)}ux(t){this.gZ.Sc(t);const s=Er.ZZ.qZ(t,this);this.Sc(s),this.XZ(s),this.bZ.set(s.nf(),0)}KZ(t){const s=this.$Z(),i=t.ej(),e=s.si(i),h=Er.ZZ.KZ(i+":"+this.bZ.get(i),e,this);return this.tX(i),this.Sc(h),h}tX(t){this.bZ.set(t,this.bZ.get(t)+1)}sX(){for(const t of this.wZ)if(!t.iX()){const s=t.ej();this.tX(s)}}eX(){for(const t of this.bZ.keys())this.bZ.set(t,0)}Sc(t){this.wZ.push(t),this.SZ.set(t.nf().toLowerCase(),t)}_0(t){t.hX(),t.iX()||(Er.Zn(this.wZ,t),Er.Zn(this.xZ,t),Er.Zn(this.vZ,t),Er.Zn(this.CZ,t),this.SZ.delete(t.nf().toLowerCase()),this.rX(t),t.Dz())||t.mr()}Ij(t){this.gf.Ij(t,this.MZ,null)}K4(){return this.gf}$Z(){return this.gZ}nX(t){this.MZ=t}aX(){return this.MZ}*uX(){for(const t of this.wZ)yield t}*lX(){for(const t of this.vZ)yield t}cX(t,s){this.TZ.has(t)||this.TZ.set(t,new Set),this.TZ.get(t).add(s)}XZ(t){for(const s of t.fX())this.cX(s,t)}rX(t){for(const[s,i]of this.TZ.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.TZ.delete(s)}dX(t){if(this.TZ.has(t))return this.TZ.get(t)}pX(t,s){if(s)for(const i of this.wZ){const e=s.every(t=>i.mX(t.PB,t.trackId));if(e&&i.nf().includes(t.nf()))return i}}gX(t){return this.SZ.get(t.toLowerCase())||null}yX(t){for(const s of this.xZ)if(s.nf()===t)return s;for(const i of this.vZ)if(i.nf()===t)return i;return null}*MX(i){if(Ar.test(i)){Ar.lastIndex=0;let t,s=new Set;do{if(t=Ar.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.gX(r);n&&(yield n)}s.clear()}else{const t=this.gX(i);t&&(yield t)}}*wX(t){for(const s of this.wZ)s.Rz(t)&&(yield s)}SX(t){this.xZ.includes(t)||this.xZ.push(t),this.TX()}bX(t){Er.Zn(this.vZ,t),this.xX()}vX(t){this.vZ.includes(t)?(t.CX(!0),t.IX(!1),t.GX(!1)):(t.CX(!1),t.IX(!0),t.GX(!1),this.xZ.includes(t)||this.xZ.push(t)),this.TX()}_X(t){t.CX(!1),t.IX(!1),t.EX(),Er.Zn(this.xZ,t),this.xX()}AX(t){t.CX(!1),t.IX(!1),this.vZ.includes(t)&&(t.GX(!0),this.CZ.push(t),Er.Zn(this.vZ,t)),this.xZ.includes(t)&&t.GX(!0)}DX(t){t.CX(!1),t.IX(!1),t.GX(!1),t.Wz(1),Er.Zn(this.vZ,t)}NX(t){this.AX(t),t.EX()}AZ(){if(!this.K4().hq()&&this.IZ&&!this.GZ){for(this._Z=!0;this.xZ.length;){const t=this.xZ.pop();(t.LX()?(t.OX(),this.CZ):(t.RX(),this.vZ)).push(t),0!==t.PX()&&(this.VZ=1)}const s=this.gf.kX(),i=this.gf.FX(),e=this.gf.F3();for(let t=this.vZ.length-1;0<=t;t--){const h=this.vZ[t];h&&h.jX(s,e,i)}this._Z=!1,0!==this.VZ&&this.K4().j4()}}NZ(){if(!this.K4().hq()&&this.IZ&&!this.GZ){let i;for(let t=0,s=this.CZ.length;t<s;t++){const e=this.CZ[t];i=i||new Set,e.hX(),this.BX(e),i.add(e)}if(i){Er.$n(this.CZ,i);for(let t=this.VZ=0,s=this.vZ.length;t<s;t++)if(0!==this.vZ[t].PX()){this.VZ=1;break}}this.xX()}}BX(t){t.Dz()||t.zX()&&t.UX()&&t.WX()&&t.QX()}TX(){this.IZ||(this.IZ=!0)}xX(){this.CZ.length||this.vZ.length||this.xZ.length||this._Z||(this.IZ=!1)}OZ(){for(this.GZ=!0;this.xZ.length;)this._X(this.xZ.pop());const t=new Set;for(const s of this.vZ){const i=s.OZ();i&&(s.hX(),t.add(s))}Er.$n(this.vZ,t),t.clear();for(const e of this.CZ){const h=e.OZ();h&&(e.hX(),t.add(e))}Er.$n(this.CZ,t),this.xX();for(const r of this.wZ)r.JX()}PZ(){this.GZ=!1}FZ(t){const s=t.jF(),i=this.dX(s);if(i)if(this.gf.hq())this.JZ.push(t);else for(const e of i)e.iX()||(e.Dz()?this._0(e):e.zX()||(this.BX(e),this._0(e)))}BZ(){for(const t of this.xZ.map(t=>t))this.BX(t),this._0(t);for(const s of this.vZ.map(t=>t))this.BX(s),this._0(s)}UZ(){for(const t of this.JZ)this.FZ(t);Er.Qn(this.JZ);for(const s of this.wZ)s.UZ()}QZ(){const t=this.gf.c4(),s=t.a4();if(s)for(const i of this.wZ){const e=i.VX();e&&s.nf()===e&&this.vX(i)}}x7(){return{timelinesJson:this.YX(),scheduledTimelinesJson:this.HX(),playingTimelinesJson:this.qX(),markedForRemovalTimelinesJson:this.ZX(),hasRuntimeListeners:this.IZ,changingLayout:this.GZ,isTickingTimelines:this._Z}}v7(t){t&&(this.eX(),this.XX(t.timelinesJson),this.KX(t.scheduledTimelinesJson),this.$X(t.playingTimelinesJson),this.tK(t.markedForRemovalTimelinesJson),this.IZ=!t.hasRuntimeListeners,this.GZ=!!t.changingLayout,this._Z=!!t.isTickingTimelines,this.sX(),this.TX(),this.xX())}YX(){return this.wZ.map(t=>t.x7())}XX(t){for(const s of t){let t=this.gX(s.name);if(t)t.v7(s);else{const i=this.sK(s);if(!i)continue;const e=this.gX(i);(t=this.KZ(e)).v7(s)}t.iK()||this._0(t)}}sK(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}HX(){return this.eK(this.xZ)}KX(t){this.hK(t,this.xZ)}qX(){return this.eK(this.vZ)}$X(t){this.hK(t,this.vZ)}ZX(){return this.eK(this.CZ)}tK(t){this.hK(t,this.CZ)}rK(t,s){if(s)for(const i of s)if(i===t.nf())return!0;return!1}eK(t){return t.map(t=>t.nf())}hK(t,s){const i=new Set;for(const e of s)this.rK(e,t)||i.add(e);if(Er.$n(s,i),t)for(const h of t){const r=this.gX(h);if(r){const n=s.find((s=>t=>t.nf()===s)(h));n||s.push(r)}}}}}{const Dr=self.ks,Nr=[0,0],Lr=[0,0],Or=[0,0],Rr=[0,0,0,0,0],Pr=new Array(4),kr=[{x:0,y:0,t:0,_t:0},{x:0,y:0,t:0,_t:0},{x:0,y:0,t:0,_t:0}],Fr={x:0,y:0,t:0,_t:0};Dr.nK=class{constructor(t,s){this.oK=!1,this.aK=t,this.uK=[];let i=null;if(i=s?this.aK.lK(s):Dr.first(this.aK.cK())){const e=i.o6("offsetX"),h=i.o6("offsetY");if(e&&h){this.fK=e,this.dK=h;const r=e.pK(),n=h.pK();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.mK(),o.gK()),u=n[t],l=(u.mK(),u.gK());a&&"cubic-bezier"===a.yK()&&l&&"cubic-bezier"===l.yK()?this.uK.push(Dr.pr(Dr.MK,a,l,o,u,this.uK.length)):(a&&"line"===a.yK()&&l&&l.yK(),this.uK.push(Dr.pr(Dr.wK,o,u,this.uK.length)))}this.oK=!0}}}mr(){for(const t of this.uK)t.mr();Dr.Qn(this.uK),this.uK=null,this.aK=null,this.fK=null,this.dK=null}SK(){return this.oK}TK(){return this.uK}bK(t){const s="relative"===this.fK.xK()?t.wT():0,i="relative"===this.dK.xK()?t.bT():0;for(const e of this.uK)e.bK(s,i)}My(s,i,t){let e=NaN,h=this.uK.length;for(let t=0;t<h;t++){const r=this.uK[t];if("cubic-bezier"===r.wv()){const n=r.My(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Or[0]=n[2],Or[1]=r._O())}}return Or}vK(s,i,t){const e=t.tRange;Dr.pe(e[0])||(e[0]=0),Dr.pe(e[1])||(e[1]=1);let h=NaN,r=this.uK.length;for(let t=0;t<r;t++){const n=this.uK[t];if("cubic-bezier"===n.wv()){const o=n.CK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Or[0]=o[2],Or[1]=n._O())}}return Or}IK(t,s){return this.uK[s].IK(t)}GK(t,s){return this.uK[s].GK(t)}},Dr.MK=class{constructor(t,s,i,e,h){this.iy=h;const r=t._K("cubic-bezier"),n=i._K("cubic-bezier"),o=s._K("cubic-bezier"),a=e._K("cubic-bezier");this.EK=t.AK(),this.DK=s.AK(),this.NK=t.AK()+r.LK(),this.RK=s.AK()+o.LK(),this.PK=i.AK()+n.kK(),this.FK=e.AK()+a.kK(),this.jK=i.AK(),this.BK=e.AK(),this.zK=0,this.UK=0,this.WK=0,this.QK=0,this.JK=0,this.VK=0,this.YK=0,this.HK=0,this.qK=0,this.ZK=0,this.XK=0,this.KK=0,this.$K=0,this.t$=0,this.s$=0,this.i$=0,this.e$=0,this.h$=0,this.r$=0,this.n$=0,this.o$=NaN,this.oK=!1,this.a$=100,this.u$=new Array(this.a$+1),this.u$[0]=0,this.l$=0,this.c$=[],this.f$=[];for(let t=0;t<100;t++)this.f$.push({x:0,y:0,t:0,_t:0});this.d$()}mr(){Dr.Qn(this.u$),this.u$=null,Dr.Qn(this.c$),this.c$=null,Dr.Qn(this.f$),this.f$=null}wv(){return"cubic-bezier"}_O(){return this.iy}p$(){return Math.floor(this.l$/25)}m$(){return 1/this.p$()}bK(t,s){this.g$=t,this.y$=s,this.u$=new Array(this.a$+1),this.u$[0]=0,this.d$(),this.zK=this.EK+this.g$,this.UK=this.DK+this.y$,this.WK=this.NK+this.g$,this.QK=this.RK+this.y$,this.JK=this.PK+this.g$,this.VK=this.FK+this.y$,this.YK=this.jK+this.g$,this.HK=this.BK+this.y$,this.qK=3*(this.WK-this.zK),this.ZK=3*(this.QK-this.UK),this.XK=3*(this.JK-this.WK),this.KK=3*(this.VK-this.QK),this.$K=3*(this.YK-this.JK),this.t$=3*(this.HK-this.VK),this.s$=3*(this.WK-this.zK),this.i$=3*(this.zK+this.JK-2*this.WK),this.e$=this.YK-this.zK+3*(this.WK-this.JK),this.h$=3*(this.QK-this.UK),this.r$=3*(this.UK+this.VK-2*this.QK),this.n$=this.HK-this.UK+3*(this.QK-this.VK)}Map(t){if(!this.oK)return NaN;const s=this.M$(t);return Lr[0]=this.w$(s),Lr[1]=this.S$(s),Lr}My(t,s){const i=this.T$(100),e=this.b$(t,s,i),h=this.x$(t,s,i,e);return Rr[0]=h.x,Rr[1]=h.y,Rr[2]=h.t,Rr[3]=h._t,Rr}CK(t,s,i){const e=this.T$(100),h=this.v$(t,s,e,i),r=this.x$(t,s,e,h);return Rr[0]=r.x,Rr[1]=r.y,Rr[2]=r.t,Rr[3]=r._t,Rr}IK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.qK+e*this.XK+h*this.$K,n=i*this.ZK+e*this.KK+h*this.t$,o=Dr.Ir(r,n);return Nr[0]=r/o,Nr[1]=n/o,Nr}GK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.qK+e*this.XK+h*this.$K,n=i*this.ZK+e*this.KK+h*this.t$;return Math.atan2(n,r)}M$(h){if(this.oK){let t=h*this.u$[this.a$],s=0,i=this.a$,e=0;for(;s<i;)e=s+((i-s)/2|0),this.u$[e]<t?s=e+1:i=e;this.u$[e]>t&&e--;const r=this.u$[e];return r===t?e/this.a$:(e+(t-r)/(this.u$[e+1]-r))/this.a$}}w$(t){return this.oK?self.vc.jc("cubicbezier")(t,this.EK+this.g$,this.NK+this.g$,this.PK+this.g$,this.jK+this.g$):NaN}S$(t){return this.oK?self.vc.jc("cubicbezier")(t,this.DK+this.y$,this.RK+this.y$,this.FK+this.y$,this.BK+this.y$):NaN}T$(s){if(!(this.c$.length>=(s=s||100))){this.c$=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.s$*i,n=this.i$*e,o=this.e$*h,a=this.h$*i,u=this.r$*e,l=this.n$*h,c=this.zK+r+n+o,f=this.UK+a+u+l;this.f$[t].x=c,this.f$[t].y=f,this.f$[t].t=i,this.f$[t]._t=0,this.c$[t]=this.f$[t]}}return this.c$}b$(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.o$))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n._t=o*o+a*a,n._t<h&&(h=n._t,r=t)}else{for(let t=this.o$;t<this.o$+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u._t=l*l+c*c,u._t<h&&(h=u._t,r=t)}for(let t=this.o$;t>this.o$-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f._t=d*d+p*p,f._t<h&&(h=f._t,r=t)}}return this.o$=r}v$(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.o$))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o._t=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o._t<r&&(r=o._t,n=t)}else{for(let t=this.o$;t<this.o$+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l._t=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l._t<r&&(r=l._t,n=t)}for(let t=this.o$;t>this.o$-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d._t=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d._t<r&&(r=d._t,n=t)}}return this.o$=n}x$(n,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Pr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.s$*f,g=this.i$*d,y=this.e$*p,M=this.h$*f,w=this.r$*d,S=this.n$*p,T=this.zK+m+g+y,b=this.UK+M+w+S,x=T-n,v=b-o,C=x*x+v*v;if(C<c){c=C,u=t,Fr.x=T,Fr.y=b,Fr.t=f,Fr._t=C,l=Fr;break t}const I=kr[t-1];I.x=T,I.y=b,I.t=f,I._t=C,Pr[t]=I}Pr[3]=a[i],a=Pr}while(t++<20);return l}d$(){this.oK=!0;let s=this.w$(0),i=this.S$(0),e=0;for(let t=1;t<=this.a$;t++){const h=this.w$(.01*t),r=this.S$(.01*t),n=s-h,o=i-r;e+=Dr.Ir(n,o),this.u$[t]=e,s=h,i=r}this.l$=e}},Dr.wK=class{constructor(t,s,i){this.iy=i,this.C$=t.AK(),this.I$=s.AK(),this.g$=0,this.y$=0}mr(){}wv(){return"line"}_O(){return this.iy}bK(t,s){this.g$=t,this.y$=s}wT(){return this.C$+this.g$}bT(){return this.I$+this.y$}}}{const S=self.ks;S.ZZ=class extends S.lr{constructor(t,s,i){super(),this.gf=i.K4(),this.G$=i,this._$=s,this.Mr=t,this.E$=[],this.A$=0,this.D$=null,this.N$=0,this.L$(),this.O$=null,this.R$=null,this.P$=0,this.k$=0,this.F$=1,this.j$=0,this.B$=1,this.z$=!1,this.U$=!1,this.W$=!1,this.Q$=!0,this.J$=!1,this.V$=!1,this.Y$=-1,this.H$=!1,this.q$=!1,this.Z$=!1,this.X$=!1,this.K$=NaN,this.$$=[""],this.ttt="",this.stt=!1,this.VZ=0,this.itt=0,this.ett=null}static qZ(t,s){const i=s.$Z(),e=i.htt(),h=i.si(t[e]),r=S.pr(S.ZZ,t[e],h,s);return r.ntt(!0),r}static KZ(t,s,i){return S.pr(S.ZZ,t,s,i)}mr(){if(!this.Dz()){const t=this.gf.qf();this.G$._X(this),this.G$.NX(this);for(const s of this.E$)s.mr();S.Qn(this.E$),this.E$=null,this.gf=null,this.G$=null,this._$=null,this.J$=!0,this.O$=null,this.R$=null,this.ott(t)}}ott(t){const s=S.pr(S.Event,"timelinestatereleased");s.att=this,t.dispatchEvent(s)}wv(){return 0}L$(){for(const t of this._$.ltt().utt())this.A$=this.E$.push(S.ctt.ux(this,t))}ftt(){return this.G$}K4(){return this.gf}cK(){return this.E$}dtt(e,h,r,n){if(this.itt){let i;for(let s=0;s<this.E$.length;s++){let t=this.E$[s];if(e===t.s6()){const o=t.o6(r);o&&h.constructor===o.ptt().constructor&&o.xK()===n.xK()&&(i=i||[]).push(o)}}return i}}iK(){return!!this.E$.length}lK(t){for(const s of this.E$)if(S.Mh(s.r6(),t))return s;return null}mtt(t){for(const s of this.E$)if(!s.gtt()&&S.Mh(s.nf(),t))return s;return null}XU(t){this.Mr=t}nf(){return this.Mr}ytt(){return this._$}ej(){return this._$.nf()}Fz(){return this._$.Fz()}kz(t){this._$.kz(t)}Mtt(){return this._$.Mtt()}wtt(t){this._$.wtt(t)}Stt(){return this._$.Stt()}Ttt(t){this._$.Ttt(t)}xK(){return this._$.xK()}btt(t){this._$.xK(t)}t6(t){for(const s of this.cK())s.t6(t)}Bz(){return this._$.Bz()}jz(t){return this._$.jz(t)}Uz(){return this._$.Uz()}zz(t){return this._$.zz(t)}ZB(){return this._$.ZB()}xtt(t){return this._$.xtt(t)}Wz(t){return this.F$=t}Qz(){return this.F$}VX(){return this._$.VX()}vtt(){return this._$.vtt()}Ctt(){return this._$.Ctt()}Itt(){return this.j$}Gtt(){return!this.IsPlaying()||0<this.F$}Vz(){return this.O$||(this.O$=new Promise(t=>{this.R$=t})),this.O$}EX(){this.O$&&(this.R$(),this.O$=null,this.R$=null)}_tt(t){this.$$=S.ZZ.Ett(t),this.stt=!0}Jz(){return this.$$}Att(){return this.stt&&(this.ttt=this.$$.join(" ")),this.stt=!1,this.ttt}Rz(t){if(!this.$$)return!1;if(!this.$$.length)return!1;const s=S.ZZ.Ett(t);return!!s&&!!s.length&&s.every(S.ZZ.Dtt,this)}Ntt(){S.gq.Timeline&&this.constructor===S.ZZ&&(S.gq.Timeline.pq.PushTriggerTimeline(this),this.G$.Ij(S.gq.Timeline.pq.OnTimelineStarted),this.G$.Ij(S.gq.Timeline.pq.OnTimelineStartedByName),this.G$.Ij(S.gq.Timeline.pq.OnTimelineStartedByTags),this.G$.Ij(S.gq.Timeline.pq.OnAnyTimelineStarted),S.gq.Timeline.pq.PopTriggerTimeline())}Ltt(){this.Y$=this.gf.Ott()}QX(){this.Z$||(this.Z$=!0,S.gq.Timeline&&this.constructor===S.ZZ&&(S.gq.Timeline.pq.PushTriggerTimeline(this),this.G$.Ij(S.gq.Timeline.pq.OnTimelineFinished),this.G$.Ij(S.gq.Timeline.pq.OnTimelineFinishedByName),this.G$.Ij(S.gq.Timeline.pq.OnTimelineFinishedByTags),this.G$.Ij(S.gq.Timeline.pq.OnAnyTimelineFinished),S.gq.Timeline.pq.PopTriggerTimeline()))}CX(t){this.z$=t}Rtt(){return this.Y$===this.gf.Ott()}IsPlaying(t=!1){return!!this.Rtt()||!(!this.Ptt()||t)||this.z$}ktt(){return this.IsPlaying(!0)}qz(){return this.Ftt()}Ftt(){return!(this.Dz()||this.Ptt()||this.ktt()||this.UX())}IX(t){this.U$=t}Ptt(){return this.U$}jtt(t){this.Q$=t;const s=this.cN();(s<=0||s>=this.Fz())&&(this.Q$=!0)}UX(){return this.Q$}Dz(){return this.J$}GX(t){this.V$=t}LX(){return this.V$}Btt(t){this.H$=t}ztt(){return this.H$}ntt(t){this.q$=!!t}iX(){return this.q$}WX(){return this.W$}cN(){return this.P$}Pz(t){const s=this.cN();this.Utt(t),this.jtt(!1),this.UX()||this.Btt(!0),!this.ktt()&&!this.Ptt()&&this.W$||(this.ktt()||this.Ptt()||this.W$?this.ktt()?this.Lz():this.Ptt()&&(this.G$._X(this),this.Wtt()):this.Wtt()),this.Qtt(),this.Jtt(this.cN(),!1,!0,!0,s),this.Vtt(),this.VZ&&this.K4().j4(),this.Ytt()}Utt(t){(t=S.pe(t)?t:this.Fz())<0?this.P$=0:t>=this.Fz()?this.P$=this.Fz():this.P$=t}Htt(t){(t=S.pe(t)?t:this.Fz())<0?this.P$=0:t>=this.Fz()?this.P$=this.Fz():this.P$=t;for(const s of this.E$)s.qtt()}Ytt(){S.gq.Timeline&&this.constructor===S.ZZ&&(S.gq.Timeline.pq.PushTriggerTimeline(this),this.G$.Ij(S.gq.Timeline.pq.OnTimeSet),this.G$.Ij(S.gq.Timeline.pq.OnTimeSetByName),this.G$.Ij(S.gq.Timeline.pq.OnTimeSetByTags),S.gq.Timeline.pq.PopTriggerTimeline())}Ztt(){if(!this.Bz())if(this.Uz()&&1===this.j$){if(this.Gtt()){if(this.cN()>=this.Fz())return!1}else if(this.cN()<=0)return!1}else if(!this.Bz()&&!this.Uz())if(this.Gtt()){if(this.cN()>=this.Fz())return!1}else if(this.cN()<=0)return!1;return!0}Oz(){this.Dz()||this.Ztt()&&this.Play(!0)}Play(t=!1){return!this.Dz()&&!this.Ptt()&&(this.ktt()&&this.Rtt()?this.Xtt():!this.ktt()&&!!(this.UX()||t||this.ztt())&&this.Ktt())}Xtt(){return this.Btt(!1),this.G$.bX(this),this.G$.vX(this),this.Vz(),!0}Ktt(){return this.Btt(!1),this.G$.vX(this),this.Vz(),!0}Lz(t=!1){this.Dz()||(this.jtt(t),this.G$.AX(this),this.UX()&&this.EX())}g0(t=!0,s=!1){if(!this.Dz()){if(!this.ktt()&&this.Ptt())return this.G$._X(this);if(!this.UX()){this.Lz(!0),this.Gtt()?this.Utt(0):this.Utt(this.Fz());const i=this.cN();this.Qtt(),s?this.$tt(i):this.Jtt(i,!1,!1,!0),t&&this.Ytt(),this.Vtt(),this.VZ&&t&&this.K4().j4()}}}tst(){this.g0(!1,!0)}$tt(t){this.Jtt(t,!1,!1,!0,NaN,!1,!0)}OZ(){if(!this.Dz()){if(!this.K4().hq()&&this.sst())return!1;this.G$.DX(this),this.K4().hq()||this.tst()}return!0}Wtt(){this.RX(!0)}OX(){this.RX(!1,!0),this.CX(!1),this.IX(!1)}RX(t=!1,s=!1){if(!this.LX()||s){if(t){this.Z$=!1,this.W$=!0,this.X$=!0,this.Qtt();for(const i of this.E$)i.RX()}else if(this.CX(!0),this.IX(!1),this.Ntt(),this.UX()){this.Y$=-1,0!==this.j$&&(this.F$=Math.abs(this.F$)),this.j$=0,this.B$=1,this.Q$=!1,this.Z$=!1,this.W$=!0,this.X$=!0,this.Gtt()?this.Utt(0):this.Utt(this.Fz()),this.Qtt();for(const e of this.E$)e.RX()}else{this.X$=!0,this.Z$=!1,this.Qtt();for(const h of this.E$)h.ist()}this.Vtt()}}PX(){return this.VZ}Qtt(){this.itt=0;for(const t of this.E$)t.hE()&&(this.itt=1)}Vtt(){this.VZ=0;for(const t of this.E$)t.est(),0===this.VZ&&1===t.PX()&&(this.VZ=1),this.D$||1!==t.hst()||(this.D$||(this.D$=[]),this.N$=this.D$.push(t))}jX(t,s,i){if(this.Ctt()){if(0===t&&0===this.K$)return;this.K$=t,t=i}else{if(0===i&&0===this.K$)return;t=this.K$=i,s=1}const e=this.P$+this.k$,h=t*s*this.F$,r=e+h,n=this._$.rst;r<0?(this.P$=0,this.k$=-r):n<=r?(this.P$=n,this.k$=this.P$-r):(this.P$=r,this.k$=0);let o=!1,a=!1,u=this.Bz(),l=this.Uz();u||l?u&&!l?0<this.F$?this.P$>=n&&(this.Htt(0),a=!0):this.P$<=0&&(this.Htt(n),a=!0):!u&&l?0<this.F$?this.P$>=n&&(this.Utt(n),this.Wz(-1*this.Qz()),a=!0,1===this.j$?this.B$<this.ZB()?(this.B$++,this.j$=0):o=!0:0===this.j$&&(this.j$=1)):this.P$<=0&&(this.Utt(0),this.Wz(-1*this.Qz()),a=!0,1===this.j$?this.B$<this.ZB()?(this.B$++,this.j$=0):o=!0:0===this.j$&&(this.j$=1)):u&&l&&(0<this.F$?this.P$>=n&&(this.Utt(n),this.Wz(-1*this.Qz()),a=!0,this.j$++,S.wrap(this.j$,0,2)):this.P$<=0&&(this.Utt(0),this.Wz(-1*this.Qz()),a=!0,this.j$++,S.wrap(this.j$,0,2))):0<this.F$?this.P$>=n&&(this.B$<this.ZB()?(this.B$++,this.Htt(0),a=!0):(this.Utt(n),o=!0)):this.P$<=0&&(this.B$<this.ZB()?(this.B$++,this.Htt(n),a=!0):(this.Utt(0),o=!0));let c,f=this.A$;if(o){for(c=0;c<f;c++)this.E$[c].nst();this.Lz(!0),this.Ltt()}else{const d=this.N$;for(c=0;c<d;c++)this.D$[c].ost();if(1===this.itt)for(c=0;c<f;c++){const p=this.E$[c],m=p.ast(),g=this.P$-m,y=e-m;g<0&&0<y?(this.P$=m<0?0:n<=m?n:m,p.qc(m,!0,!1,a,this.X$,!1)):p.qc(this.P$,!0,!1,a,this.X$,!1)}else for(c=0;c<f;c++)this.E$[c].qc(this.P$,!0,!1,a,this.X$,!1);for(c=0;c<d;c++)this.D$[c].ust();this.X$&&(this.X$=!1)}}Jtt(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.E$)o.ost();for(const a of this.E$){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.cN(),l=u-a.ast(),c=r-a.ast();l<0&&0<c&&(t=a.ast(),this.Utt(t))}a.qc(t,i,e,h,this.X$,n)}for(const f of this.E$)f.ust();this.X$&&t&&(this.X$=!1)}lst(){const t=this._$.ltt().cst(),s=S.ctt.ux(this,t);return this.A$=this.E$.push(s),s}hX(){if(!this.Dz())for(const t of this.E$)t.fst()}JX(){for(const t of this.E$)t.JX()}dst(){for(const t of this.E$)t.pst()}mst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.E$[i];return e?(e.gst(s),void this.G$.cX(s.jF(),this)):void 0}for(const h of this.E$)if(h.gtt())if(t){if(h.r6()===t){h.gst(s),this.G$.cX(s.jF(),this);break}}else if(!h.yst()){h.gst(s),this.G$.cX(s.jF(),this);break}}}mX(t,s){for(const i of this.E$)if(i.gtt())if(s){if(s===i.r6()&&t===i.s6())return!0}else if(t===i.s6())return!0;return!1}zX(){return this.E$.some(t=>!t.gtt()||t.Mst())}sst(){return this.E$.some(t=>{if(t.gtt()){if(!t.Mst())return!1;const s=t.jF();return!!s&&s.FV()}return!1})}o6(t){for(const s of this.cK())for(const i of s.wst())if(i.Sst()===t)return i}Tst(t){for(const s of this.E$)if(t===s.s6())return s;return null}bst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.cK())for(const h of e.xst()){const r=s.every(t=>h.vst(t));if(r)return h}}fX(){const t=[];for(const s of this.cK())t.push(s.jF());return t.filter(t=>t)}UZ(){for(const t of this.cK())t.UZ()}x7(){return{tracksJson:this.Cst(),name:this.Mr,playheadTime:this.cN(),playbackRate:this.F$,pingPongState:this.j$,currentRepeatCount:this.B$,isPlaying:this.z$,isScheduled:this.U$,initialStateSet:this.W$,finishedTriggers:this.Z$,complete:this.Q$,released:this.J$,markedForRemoval:this.V$,completedTick:this.Y$,implicitPause:this.H$,isTemplate:this.q$,tags:this.$$.join(" "),stringTags:this.ttt,tagsChanged:this.stt,firstTick:this.X$}}v7(t){t&&(this.Ist(t.tracksJson),this.Mr=t.name,this.P$=t.playheadTime,this.F$=t.playbackRate,this.j$=t.pingPongState,this.B$=t.currentRepeatCount,this.z$=!!t.isPlaying,this.U$=!!t.isScheduled,this.W$=!!t.initialStateSet,this.Z$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Q$=!!t.complete,this.J$=!!t.released,this.V$=!!t.markedForRemoval,this.Y$=t.completedTick,this.H$=!!t.implicitPause,this.q$=!!t.isTemplate,this.$$=t.tags.split(" "),this.ttt=t.stringTags,this.stt=!!t.tagsChanged,this.X$=!!t.firstTick)}Cst(){return this.E$.map(t=>t.x7())}Ist(t){this.dst(),t.forEach((t,s)=>{const i=this.E$[s];i.v7(t)}),this.E$.filter(t=>t.Mst())}static Dtt(t){const s=this.Jz();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ett(t){if(S.je(t))return t.slice(0);if(S.ve(t))return t.split(" ");throw new Error("invalid tags")}Gst(){return this.ett||(this.ett=S.pr(self.Xz,this)),this.ett}}}{const jr=self.ks;jr.ctt=class extends jr.lr{constructor(t,s){super(),this.aK=t,this._st=s,this.Est=s.ltt(),this.Ast=NaN,this.Dst=NaN,this.Nst=null,this.Lst=null,this.Ost=!1,this.X_=0<s.ast(),this.Rst=!1,this.Pst=!1,this.kst=NaN,this.Fst=null,this.jst=this._st.zst().Bst(),this.Ust=[],this.Wst(),this.Qst=0,this.VZ=0,this.Jst=0}static ux(t,s){return jr.pr(jr.ctt,t,s)}mr(){this.jst=null;for(const t of this.Ust)t.mr();jr.Qn(this.Ust),this.Ust=null,this.aK=null,this.Nst=null,this.Lst=null,this._st=null,this.Fst=null}Wst(){for(const t of this._st.Yst().Vst())this.Ust.push(jr.Hst.ux(this,t))}fst(){for(const t of this.Ust)t.fst()}JX(){for(const t of this.Ust)t.JX();this.Nst=null,this.Lst=null}qst(){return this.aK}K4(){return this.aK.K4()}xst(){return this.jst||(this.jst=this._st.zst().Bst()),this.jst}wst(){return this.Ust}o6(s){for(let t=0;t<this.Ust.length;t++){const i=this.Ust[t];if(i.Sst()===s)return i}}Zst(){this.Nst||this.s6()}Xst(){return!!this.Nst&&!this.Nst.nU()}Mst(){if(!this.gtt())return!1;const t=this.Kst(),s=this.K4().I4(t);return!!s&&!s.nU()}jF(){if(this.gtt()){const t=this.$st();if(-1!==t)return this.K4()._V(t)}}tit(){return this.aK.cK().indexOf(this)}pst(){this.Nst=null,this.Ast=NaN,this.Lst=null,this.Dst=NaN,this.Ost=!0}yst(){return!!this.Nst}s6(){if(!this.Ost){if(!this.Nst||!this.Xst()){const t=this.Kst();this.Nst=this.K4().I4(t)}return this.Nst}}gst(t){if(this.Ost=!1,this.Nst!==t){this.JX(),this.Nst=t,this.Dst=t.jF()._O(),this.Ast=t.$F(),this.Lst=t.D4();for(const s of this.sit()){const i=s.iit,e=s.eit,h=i.hit();switch(h){case"instance-variable":{e.rit();const r=t.jF(),n=r.nit(s.name),o=r.oit(n),a=r.ait(n);o===s.name&&a===s.type&&e.uit(n);break}case"behavior":{const u=s.LB,l=this.jF(),c=t.jF(),f=e.RB(c);if(u&&f){const d=u.nf();l.lit(d),c.lit(d),e.rit(),e.cit(f.nY())}break}}}}}*sit(){for(const t of this.Ust){const s=t.ptt(),i=this.jF(),e={iit:t,eit:s};switch(t.hit()){case"world-instance":e.property=t.Sst();break;case"instance-variable":{const h=s.rit();e.name=i.oit(h),e.type=i.ait(h);break}case"effect":{const r=i.hk(),n=s.dit(r);e.pit=n;break}case"behavior":{const o=s.RB(i);e.LB=o;break}case"plugin":e.LP=i.OP()}yield e}}D4(){if(!this.Lst||!this.Xst()){const t=this.s6();t&&(this.Lst=t.D4())}return this.Lst}mit(){return this._st}Kst(){return isNaN(this.Ast)?this._st.Kst():this.Ast}git(t){this._st.git(t)}Stt(){return this._st.Stt()}Ttt(t){this._st.Ttt(t)}xK(){return this._st.xK()}r6(){return this._st.r6()}ast(){return this._st.ast()}yit(){return this._st.yit()}Mit(t){this._st.Mit(t)}btt(t){this._st.btt(t)}t6(t){for(const s of this.xst())s.t6(t);for(const i of this.wst())i.t6(t)}wit(){return this._st.wit()}Sit(t){this._st.Sit(t)}$st(){return isNaN(this.Dst)?this._st.$st():this.Dst}Tit(t){this._st.Tit(t)}bit(t){this._st.bit(t)}xit(){const t=this.s6();if(t){const s=t.CB();if(s.vit())return t.CB().xit()}return this._st.xit()}Cit(t){this._st.Cit(t)}Iit(){const t=this.s6();if(t){const s=t.CB();if(s.vit())return t.CB().Iit()}return this._st.Iit()}wv(){return this._st.wv()}nf(){return this._st.nf()}gtt(){return 0===this.wv()}Git(){return 1===this.wv()}_it(){return 2===this.wv()}Eit(){return this.Qst}PX(){return this.VZ}hst(){return this.Jst}hE(){return this.X_}qtt(){for(const t of this.Ust)t.qtt()}RX(){if(this.Zst(),this.Xst()||!this.gtt()){const t=this.qst(),s=t.Gtt(),i=s?0:this.yit();for(const h of this.Ust)h.RX(i),0===this.Qst&&1===h.Eit()&&(this.Qst=1),0===this.VZ&&1===h.PX()&&(this.VZ=1);this.Jst=0;const e=this.Ust.some(t=>t.hst());e&&(this.Jst=1),this.Fst=this.Ait(i),this.Rst=!1,this.Pst=!1,this.qc(i),this.Dit(this.Ait(i))}}ist(){if(this.Zst(),this.Xst()||!this.gtt()){this.aK.Gtt();const t=this.aK.cN()-this.ast();this.Fst=this.Ait(t);for(const s of this.Ust)s.ist(t)}}nst(){if(!this.qst().UX()&&(this.Zst(),this.Xst()||!this.gtt())&&!this.X_){const t=this.aK.cN(),s=this.ast()+this.yit();s<=t?this.qc(this.yit(),!0,!1,!0,!1,!1,!0):t<=0&&this.qc(0,!0,!1,!0,!1,!1,!0)}}est(){for(let t=0,s=this.Ust.length;t<s;t++){const i=this.Ust[t];i.est(),0===this.Qst&&1===i.Eit()&&(this.Qst=1),0===this.VZ&&1===i.PX()&&(this.VZ=1)}}ost(){const s=this.Ust.length;for(let t=0;t<s;t++)this.Ust[t].ost()}qc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.Nst||this.s6();const o=this.Nst&&!this.Nst.nU(),a=0===this._st.vf;if((o||!a)&&!(r&&a&&this.jF().FV()||(i-=this.ast())<0)){this.Nit(i,t),this.Lit(i,t,s);for(let t=0,s=this.Ust.length;t<s;t++)this.Ust[t].qc(i,e,h,n);this.Oit(i,t),0!==this.Qst&&(this.Lst||(this.Lst=this.Nst.D4()),this.Lst)&&this.Lst.i5()}}ust(){const s=this.Ust.length;for(let t=0;t<s;t++)this.Ust[t].ust()}Nit(t,s){if(s&&this.X_&&!this.Rst){const i=this.qst();if(i.Gtt()){if(t<0)return}else if(t>this.yit())return;for(const e of this.Ust)e.RX();this.Rst=!0}}Oit(t,s){if(s&&this.X_&&!this.Pst){const i=this.qst();if(i.Gtt()){if(t>=this.yit()){for(const e of this.Ust)e.qc(this.yit(),!1,!0);this.Pst=!0}}else if(t<=0){for(const h of this.Ust)h.qc(0,!1,!0);this.Pst=!0}}}Lit(t,s,i){if(!i&&s&&jr.gq.Timeline){const e=this.qst(),h=this.Fst.mK(),r=this.Fst.cN(),n=h?h.cN():e.Fz();if(t<=r||n<=t)if(this.Fst=this.Est.Rit(t,this._st),e.Gtt())h&&this.Dit(this.Fst);else{const o=this.Fst.mK();o&&this.Dit(o)}}}Ait(t){const s=this.Est.Pit(t,this._st);return s||this.Est.Rit(t,this._st)}Dit(t){if(jr.gq.Timeline){const s=this.qst(),i=s.ftt();jr.gq.Timeline.pq.PushTriggerTimeline(s),jr.gq.Timeline.pq.PushTriggerKeyframe(t),i.Ij(jr.gq.Timeline.pq.OnAnyKeyframeReached),i.Ij(jr.gq.Timeline.pq.Dit),jr.gq.Timeline.pq.PopTriggerTimeline(s),jr.gq.Timeline.pq.PopTriggerKeyframe(t)}}kit(){const t=this._st.zst(),s=t.Fit();return s}jit(){const t=this._st.Yst(),s=t.Bit(),i=jr.Hst.ux(this,s);return this.Ust.push(i),i}zit(t){const s=this._st.zst();s.Uit(t)}Wit(t){for(const s of this.Ust)s.Wit(t)}Qit(){for(const t of this.Ust)t.Qit()}Jit(){if(this.Zst(),this.Xst()||!this.gtt())for(const t of this.Ust)t.Jit()}Vit(){if(this.Zst(),this.Xst()||!this.gtt()){let t=!1;for(const s of this.Ust){const i=s.Vit();!t&&i&&(t=!0)}if(t){const e=this.kit();e.Pz(this.qst().cN()),e.t6("noease"),e.Sit(!0),e._tt("")}}}UZ(){isNaN(this.kst)||this.Yit(this.kst),this.kst=NaN}x7(){const t=this.s6(),s=t?t.$F():this.Kst();return{propertyTracksJson:this.Hit(),lastKeyframeDataItemJson:this.qit(),initialStateOfNestedSet:this.Rst,endStateOfNestedSet:this.Pst,instanceUid:s,cleared:this.Ost}}v7(t){if(t){this.Zit(t.propertyTracksJson),this.Xit(t.lastKeyframeDataItemJson),this.kst=t.instanceUid,this.Rst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Rst=t.initialStateOfNestedSet),this.Pst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Pst=t.endStateOfNestedSet),this.Ost=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Ust)0===this.Qst&&1===s.Eit()&&(this.Qst=1),0===this.VZ&&1===s.PX()&&(this.VZ=1);this.Jst=0,this.Ust.some(t=>t.hst())&&(this.Jst=1)}}qit(){const t=this._st.zst();return t.Kit(this.Fst)}Hit(){return this.Ust.map(t=>t.x7())}Zit(t){t.forEach((t,s)=>{const i=this.Ust[s];i.v7(t)})}Yit(t){if(jr.pe(t)){const s=this.K4().I4(t);if(s){const i=this.qst();i.mst(this._st.r6(),s,this.tit())}}}Xit(t){const s=this._st.zst();this.Fst=s.$it(t)}}}{const Br=self.ks;Br.Hst=class extends Br.lr{constructor(t,s){super(),this.tet=t,this.iet=s,this.eet=s.Yst(),this.Qst=0,this.VZ=0,this.Jst=0,this.het=this.ptt(),this.ret=this.iet.oet().net(),this.aet=null,this.uet=null}static ux(t,s){return Br.pr(Br.Hst,t,s)}mr(){this.tet=null,this.het&&(this.het.mr(),this.het=null),this.ret=null,this.iet=null,this.eet=null}Eit(){return this.Qst}PX(){return this.VZ}hst(){return this.Jst}let(){return!!this.uet}cet(t){this.uet=t}fet(){return this.uet}det(){return this.tet}pet(){return this.iet}Yst(){return this.eet}qst(){return this.tet.qst()}K4(){return this.tet.K4()}s6(){return this.tet.s6()}ptt(){if(!this.het){let t=this.iet.hit(),s;switch(t){case"behavior":s=new Br.Hst.met(this);break;case"effect":s=new Br.Hst.yet(this),this.VZ=1;break;case"instance-variable":s=new Br.Hst.Met(this);break;case"plugin":s=new Br.Hst.wet(this),this.VZ=1;break;case"world-instance":s=new Br.Hst.Tet(this),this.VZ=1,this.Qst=1;break;case"value":s=new Br.Hst.bet(this);break;case"audio":s=new Br.Hst.xet(this)}this.het=s}return this.het}hit(){return this.iet.hit()}vet(t){this.iet.vet(t)}Cet(){return this.iet.Iet()}Get(t){this.iet._et(t)}n6(){return this.ptt().Eet()}Sst(){return this.iet.Aet()}Det(t){this.iet.Net(t)}Let(){return this.iet.wv()}Oet(t){this.iet.Ret(t)}Pet(){return this.Yst().ket(this.iet).wv()}Fet(){return this.iet.Fet()}jet(t){this.iet.jet(t)}Bet(){return this.iet.Bet()}zet(t){this.iet.zet(t)}wit(){return this.iet.wit()}Sit(t){this.iet.Sit(t)}Stt(){return this.iet.Stt()}Ttt(t){this.iet.Ttt(t)}xK(){return this.iet.xK()}btt(t){this.iet.btt(t)}t6(t){for(const s of this.Uet())s.t6(t)}Wet(){return this.iet.Wet()}Uet(){return this.ret||(this.ret=this.iet.oet().net()),this.ret}pK(){return this.iet.oet().pK()}Qet(t){return this.eet.Qet(t,this.iet)}Jet(t){return this.eet.Jet(t,this.iet)}Vet(t){let s=this.eet.Qet(t,this.iet),i;return i=s?this.eet.Yet(t,this.iet):(s=this.eet.Jet(t,this.iet),this.eet.Het(t,this.iet)),{start:s,end:i}}*qet(){for(const t of this.Uet())yield t.AK()}*Zet(){for(const t of this.Uet())yield t.cN()}fst(){this.ptt().fst()}JX(){this.ptt().JX()}Xet(){return this.ptt().Xet()}qtt(){this.ptt().qtt()}RX(t){this.ptt().RX(),this.aet=this.Ket(t),this.est()}ist(t){this.ptt().ist(),this.aet=this.Ket(t)}est(){const t=this.det();if(this.Jst=0,t.gtt()){const s=this.qst(),i=t.s6(),e=this.ptt(),h=this.Sst(),r=e.$et();if(r){const n=s.dtt(i,e,h,this);n&&n.length&&(this.Jst=1)}else this.Jst=0}}Ket(t){const s=this.qst(),i=this.eet.Qet(t,this.iet);return i||(s.Gtt()?this.eet.Jet(t,this.iet):this.eet.Het(t,this.iet))}ost(){this.het.ost()}qc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.eet.Jet(t,this.iet);else{if(this.aet){const o=this.qst(),a=this.aet.mK(),u=this.aet.cN(),l=a?a.cN():o.Fz();(t<=u||l<=t)&&(this.aet=this.eet.Jet(t,this.iet),n=!0)}else this.aet=this.eet.Jet(t,this.iet),n=!0;h=this.aet}h&&(r=h.mK()),this.het.qc(t,h,r,s,i,e,n)}tht(t){if(this.aet){const e=this.qst(),h=this.aet.mK(),r=this.aet.cN(),n=h?h.cN():e.Fz();(t<=r||n<=t)&&(this.aet=this.eet.Jet(t,this.iet))}else this.aet=this.eet.Jet(t,this.iet);const s=this.aet,i=s.mK();return this.het.tht(t,s,i)}sht(t,s,i){return this.het.tht(t,s,i)}ust(){this.het.ust()}static iht(t,s){const i=s.pet(),e=s.eet;return e.Jet(t,i)}static eht(t,s){const i=s.pet(),e=s.eet;return e.Het(t,i)}hht(){const t=this.iet.oet(),s=t.rht();return this.aet=null,s}Wit(t){this.aet=null;const s=this.iet.oet();s.nht(t)}Qit(){this.ptt().Qit()}Jit(){const t=this.ptt().Jit();if(t){const s=this.eet.ket(this.iet),i=this.ptt().Xet();s.oht(i)}}Vit(){const t=this.ptt().Vit();return t&&this.aht(),this.ptt().uht(),t}aht(){const t=this.qst().cN(),s=this.ptt(),i=Br.Hst.iht(t,this),e=this.hht();e.Ret(i.wv()),e.Pz(t),e.t6(i.lht()),e.Sit(!0),e.cht(s.fht()),e.oht(s.Xet())}x7(){return{sourceAdapterJson:this.ptt().x7()}}v7(t){t&&this.ptt().v7(t.sourceAdapterJson)}}}{const zr=self.ks,Ur=zr.Hst;Ur.Tet=class{constructor(t){this.dht=t,this.pht=null,this.mht()}mr(){this.pht&&(this.pht.mr(),this.pht=null),this.dht=null}$et(){return this.pht.$et()}o6(){return this.dht}fst(){this.pht&&this.pht.fst()}JX(){this.pht&&this.pht.JX()}mht(){return this.pht||(this.pht=this.ght()),this.pht}rit(){}_O(){return this.rit()}yht(){}qtt(){this.mht().qtt()}RX(){this.mht().RX()}ist(){this.mht().ist()}ost(){this.pht.Mht()}qc(t,s,i,e,h,r,n){let o=this.dht.Pet(),a;switch(o){case"numeric":a=Ur.wht.qc(t,s,i,this.dht);break;case"angle":a=Ur.Sht.qc(t,s,i,this.dht);break;case"boolean":a=Ur.Tht.qc(t,s,i,this.dht);break;case"color":a=Ur.bht.qc(t,s,i,this.dht);break;case"text":a=Ur.xht.qc(t,s,i,this.dht)}this.pht.vht(t,a,s,i,e,h,r,n)}tht(t,s,i){switch(this.dht.Pet()){case"numeric":return Ur.wht.qc(t,s,i,this.dht);case"angle":return Ur.Sht.qc(t,s,i,this.dht);case"boolean":return Ur.Tht.qc(t,s,i,this.dht);case"color":return Ur.bht.qc(t,s,i,this.dht);case"text":return Ur.xht.qc(t,s,i,this.dht)}}ust(){this.pht.Cht()}Qit(){this.mht().Iht()}uht(){this.mht().uht()}Xet(){return this.mht().Xet()}Jit(){return this.mht().Jit()}Vit(){return this.mht().Vit()}fht(){const t=this.dht,s=t.det(),i=s.qst().cN(),e=Ur.iht(i,t),h=e.mK(),r=t.Pet();switch(r){case"numeric":return Ur.wht.qc(i,e,h,t);case"angle":return Ur.Sht.qc(i,e,h,t);case"boolean":return Ur.Tht.qc(i,e,h,t);case"color":return Ur.bht.qc(i,e,h,t);case"text":return Ur.xht.qc(i,e,h,t)}}ght(){const t=this.dht,s=t.Wet()?t.Pet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Ur._ht.Ght(this);case"numeric":case"number":case"angle":return new("combo"===this.dht.Let()?Ur._ht.Ght:Ur._ht.Eht)(this);case"color":case"offsetColor":return new Ur._ht.Aht(this);default:return new Ur._ht.Eht(this)}}x7(){return{propertyAdapterJson:this.mht().x7()}}v7(t){t&&this.mht().v7(t.propertyAdapterJson)}}}{const Wr=self.ks;class Qr extends Wr.Hst.Tet{constructor(t){super(t),this.Dht=NaN}rit(){return this.dht.pet().Iet()[0]}_O(){return this.Dht||super._O()}yht(){return this.dht.det().s6()}uit(t){const s=this.dht.pet().Iet()[0];s!==t&&(this.Dht=t)}qc(t,s,i,e,h,r,n){this.mht().Nht(s.Eet())&&super.qc(t,s,i,e,h,r,n)}tht(t,s,i){if(this.mht().Nht(s.Eet()))return super.tht(t,s,i)}x7(){return Object.assign(super.x7(),{index:this.Dht})}v7(t){t&&(super.v7(t),this.Dht=t.index)}}Wr.Hst.Met=Qr}{const Jr=self.ks;class Vr extends Jr.Hst.Tet{constructor(t){super(t),this._J=NaN}rit(){const t=this.dht.pet();return t.Iet()[1]}yht(){const t=this.dht.pet(),s=this.dht.det(),i=this._J||t.Iet()[0],e=s.s6(),h=e.Lht(i),r=e.Oht()[h];return r.CB()}RB(t){const s=this.dht.pet(),i=s.Iet()[2];return t.Rht(i)}cit(t){const s=this.dht.pet();s.Iet()[0]!==t&&(this._J=t)}qc(t,s,i,e,h,r,n){const o=this.dht.det(),a=o.s6();this.RB(a.jF())&&super.qc(t,s,i,e,h,r,n)}tht(t,s,i){const e=this.dht.det(),h=e.s6();if(this.RB(h.jF()))return super.tht(t,s,i)}x7(){return Object.assign(super.x7(),{sid:this._J})}v7(t){t&&(super.v7(t),this._J=t.sid)}}Jr.Hst.met=Vr}{const Yr=self.ks;class Hr extends Yr.Hst.Tet{constructor(t){super(t)}rit(){return this.dht.pet().Iet()[1]}yht(){const t=this.dht,s=t.det(),i=s.D4(),e=i.t5(),h=e.hk(),r=this.dit(h),n=r._O();return e.UB(n)?e.Pht(n):null}dit(t){const s=this.dht,i=s.pet().Iet()[0];return t.kht(i)}qc(t,s,i,e,h,r,n){this.Fht()&&super.qc(t,s,i,e,h,r,n)}tht(t,s,i){if(this.Fht())return super.tht(t,s,i)}Fht(){const t=this.dht,s=t.det(),i=s.D4(),e=i.t5(),h=e.hk(),r=this.dit(h);if(r){const n=r._O();return e.UB(n)}}}Yr.Hst.yet=Hr}{const qr=self.ks;class Zr extends qr.Hst.Tet{constructor(t){super(t)}rit(){return this.dht.pet().Iet()[0]}yht(){return this.dht.det().s6().CB()}qc(t,s,i,e,h,r,n){const o=this.dht.det(),a=o.jF().OP(),u=o.s6().jF().OP();a===u&&super.qc(t,s,i,e,h,r,n)}tht(t,s,i){const e=this.dht.det(),h=e.jF().OP(),r=e.s6().jF().OP();if(h===r)return super.tht(t,s,i)}jht(){const t=this.dht.det(),s=t.jF().OP();if(qr.gq.Bht&&s instanceof qr.gq.Bht&&("initial-frame"===this.dht.Sst()||"initial-animation"===this.dht.Sst()))switch(this.dht.xK()){case"relative":case"absolute":return null}}}qr.Hst.wet=Zr}{const Xr=self.ks;class Kr extends Xr.Hst.Tet{constructor(t){super(t),this.zht=0,this.Uht=!1}$et(){return!1}RX(){let t=this.dht.Yst(),s=this.dht.pet();s=t.ket(s),this.zht=s.AK()}ist(){}Eet(){return this.Uht||this.dht.qc(0),this.zht}qc(t,s,i,e,h,r,n){this.zht=Xr.Hst.wht.qc(t,s,i,this.dht),this.Uht=!0}Qit(){}uht(){}Xet(){return this.zht}Jit(){return!1}Vit(){return!1}x7(){return{value:this.zht,init:this.Uht}}v7(t){t&&(this.zht=t.value,this.Uht=!t.hasOwnProperty("init")||t.init)}}Xr.Hst.bet=Kr}{const $r=self.ks;class tn extends $r.Hst.Tet{constructor(t){super(t),this.Wht=!1,this.Qht=null,this.Jht=null,this.Vht=null,this.aK=this.dht.qst(),this.tet=this.dht.det(),this.Yht=this.dht.Cet(),this.Hht=this.Yht[0],this.qht=this.Yht[1],this.Yht[3]?this.Zht=this.Yht[3]:this.Zht=Math.random().toString(36).slice(2),this.Xht=NaN,this.Kht=NaN,this.$ht=NaN,this.trt=null,this.srt()}mr(){super.mr(),this.Qht=null,this.Jht=null,this.Vht=null,this.aK=null,this.tet=null,this.Yht=null,this.Hht=null,this.trt=null}srt(){if(self.ks.gq.Audio){const t=this.dht.K4(),s=t.irt(self.ks.gq.Audio);s&&(this.Qht=s.DP().CB()),this.Jht=self.ks.gq.Audio.ert,this.Vht=self.ks.gq.Audio.hrt}}rrt(){if(!this.trt){const t=this.dht.det(),s=t.o6("audioSource");s&&(this.trt=s.ptt())}}nrt(){const t=this.dht.det(),s=t.o6("volume");return(s?s.ptt():this).Kht}fst(){super.fst(),this.Wht=!1,this.Qht&&(this.Vht&&(this.Xht=this.Vht.ort.call(this.Qht,this.Zht),this.Kht=this.Vht.art.call(this.Qht,this.Zht)),this.Jht)&&this.Jht.Lz.call(this.Qht,this.Zht)}urt(){return this.Zht}lrt(){return this.$ht}crt(t){this.$ht=t}RX(){super.RX(),this.Xht=NaN,this.Wht=!1}ist(){super.ist();const t=this.dht.qst(),s=t.cN();switch(this.Xht=s-this.qht,this.dht.Sst()){case"audioSource":break;case"volume":this.Kht=this.dht.tht(s)}this.Wht=!1}qc(t,s,i,e,h,r,n){if(this.Qht)switch(this.dht.Sst()){case"audioSource":{if(!this.aK.Gtt())return;if(e)return void(this.Jht&&this.Jht.Lz.call(this.Qht,this.Zht));if(t<this.qht)return void(this.Wht=!1);const o=this.Vht.frt.call(this.Qht,this.Zht),a=this.aK.Qz();if(a!==o&&this.Jht.Wz.call(this.Qht,this.Zht,a),this.Wht)return;if(!this.dht.qst().IsPlaying())return;if(this.Wht=!0,isNaN(this.Xht)){const u=self.performance.now(),l=t-this.qht,c=this.Qht.drt();if("suspended"===c)return void(this.Wht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.Jht){let t=this.lrt();isNaN(t)?(this.crt(0),t=0):this.crt(t),this.Jht.prt.call(this.Qht,this.Hht,t,this.Zht,p)}}else{const m=this.Xht,g=(this.Xht=NaN,this.nrt()),y=(this.Kht=NaN,this.Qht.drt());if("suspended"===y)return void(this.Wht=!1);this.Jht&&(this.crt(g),this.Jht.prt.call(this.Qht,this.Hht,g,this.Zht,m))}break}case"volume":this.rrt(),super.qc(t,s,i,e,h,r,n)}}tht(t,s,i){if(this.Qht)switch(this.dht.Sst()){case"audioSource":return;case"volume":return this.rrt(),super.tht(t,s,i)}}mrt(t,s){return this.trt?this.trt.lrt():0}grt(t,s,i,e){this.trt&&this.trt.crt(this.mrt()+s),this.Jht&&this.trt&&this.Jht.crt.call(this.Qht,this.trt.urt(),this.trt.lrt())}yrt(t,s,i){this.trt&&this.trt.crt(s),this.Jht&&this.trt&&this.Jht.crt.call(this.Qht,this.trt.urt(),this.trt.lrt())}Mrt(){return!0}x7(){return{audioPlaybackStarted:this.Wht,audioTag:this.Zht,pauseTime:this.Xht,pauseVolume:this.Kht,volume:this.$ht}}v7(t){t&&(this.Wht=t.audioPlaybackStarted,this.Zht=t.audioTag,this.Xht=t.pauseTime,this.Kht=t.pauseVolume,this.$ht=t.volume,this.srt())}}$r.Hst.xet=tn}{const sn=self.ks;sn.Hst._ht=class{constructor(t){this.het=t,this.dht=t.o6(),this.Lst=this.dht.det().D4(),this.wrt=this.dht.Sst(),this.Srt=!1,this.Trt=null,this.brt=null}mr(){this.het=null,this.dht=null,this.Lst=null,this.Trt=null,this.brt=null}$et(){return!1}fst(){}JX(){this.Lst=null,this.Trt=null,this.brt=null}ptt(){return this.het}o6(){return this.dht}D4(){return this.Lst||(this.Lst=this.dht.det().D4()),this.Lst}xrt(t){this.Srt=!!t}vrt(){return this.Srt}qtt(){}RX(){}ist(){}Iht(){this.Trt=this.Xet()}uht(){this.Trt=null}Xet(){}Jit(){}Vit(){}Nht(t){const s=typeof this.Crt(),i=typeof t;return s==i}Mht(){}vht(t,s,i,e,h,r,n,o){}Cht(){}Irt(){const t=this.Grt(()=>{const t=this.dht.pet(),s=this.dht.Yst();return s.ket(t)},()=>{const t=this.dht.pet(),s=this.dht.Yst();return s._rt(t)});return t.Ert()}Art(){const t=this.dht.qst(),e=t.cN()-this.dht.det().ast(),s=this.Grt(()=>{const t=this.dht.pet(),s=this.dht.Yst();return s.Jet(e,t)},()=>{const t=this.dht.pet(),s=this.dht.Yst(),i=s.Het(e,t);return i||s._rt(t)});return s.Ert()}Grt(t,s){const i=this.dht.qst();return(i.Gtt()?t:s)()}Drt(t,s){const i=this.dht.xK();return("relative"===i?t:s)()}Nrt(t,s){return(this.vrt()?(this.xrt(!1),t):s)()}Lrt(t){}Ort(){return this.het._O()}Rrt(){return this.brt||(this.brt=this.het.yht()),this.brt}Prt(t,s,i,e,h,r){const n=this.dht.hit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}x7(){return{firstAbsoluteUpdate:this.Srt,saveState:this.Trt}}v7(t){t&&(this.Srt=t.firstAbsoluteUpdate,this.Trt=t.saveState)}krt(t,s=!1){const i=[];for(const e of t){const h=e.det().ast();for(const r of e.Uet())(s&&0===r.cN()||!s)&&i.push({time:h+r.cN(),value:r.Ert()})}return i.sort((t,s)=>t.time-s.time)}Frt(t,s,i){return this.jrt(s,i)}jrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.ks,hn=new Map,rn=[0,0,0];class nn extends en.Hst._ht{constructor(t){super(t)}qtt(){}RX(){}ist(){}Xet(){const t=this.dht.hit(),s=this.Rrt(),i=this.Ort();switch(t){case"behavior":return this.Brt(s.zrt(i));case"effect":return this.Brt(s[i]);case"plugin":return this.Brt(s.zrt(i));case"world-instance":return this.Brt(this.Crt())}}Jit(){const t=this.Irt();return!this.Urt(t,this.Crt())}Vit(){return!en.ye(this.Trt)&&!this.Urt(this.Trt,this.Crt())}Urt(t,s){return t=this.Wrt(t),s=this.Wrt(s),t.Ta(s)}Irt(){const t=super.Irt();return this.Wrt(t)}Art(){const t=super.Art();return this.Wrt(t)}Lrt(t){}Brt(t){return(en.$e(t,en.qo)?t.toArray():t).slice(0,3)}Wrt(t){return en.$e(t,en.qo)?t:new en.qo(t[0],t[1],t[2],1)}Nht(t){return!0}$et(){return!0}Mht(){const t=this.dht.qst(),s=this.dht.s6(),i=this.dht.ptt(),e=t.dtt(s,i,this.wrt,this.dht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.dht.hit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.wrt)||n.set(this.wrt,{Qrt:!1,color:new en.qo(0,0,0,1)})}}Jrt(t,s,i){const e=hn.get(t).get(s).get(i);return e.Qrt=!0,e.color}vht(t,s,i,e,h,r,n,o){const a=this.dht.qst(),u=this.dht.det(),l=this.dht.s6(),c=this.dht.ptt(),f=this.dht.hit(),d=this.wrt,p=a.dtt(l,c,d,this.dht);if(p&&1<p.length){const m=this.krt(p,!0),g=this.Frt(a,a.cN(),m);if(g){const y=u.ast(),M=g.time-y;if(0==M)this.Jrt(l,f,this.wrt).ea(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.dht.qc(M,!1,!0),x=en.qo.tu(w,b[0]),v=en.qo.tu(S,b[1]),C=en.qo.tu(T,b[2]);this.Jrt(l,f,this.wrt).ea(x,v,C)}}}else this.Vrt(s[0],s[1],s[2])}Cht(){const t=this.dht.s6();if(hn.has(t)){const s=hn.get(t),i=this.dht.hit();if(s.has(i)){const e=s.get(i);if(e.has(this.wrt)){const h=e.get(this.wrt),r=h.Qrt,n=h.color;r&&this.Vrt(n.fa(),n.ma(),n.ga()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Crt(){const t=this.dht.hit(),s=this.Rrt(),i=this.Ort();switch(t){case"behavior":return this.Wrt(s.zrt(i));case"effect":return s[i].clone();case"plugin":return this.Wrt(s.zrt(i));case"world-instance":return this.D4().g5().clone()}}Vrt(t,s,i){const e=this.dht.hit(),h=this.Rrt(),r=this.Ort();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.Yrt(r,rn);break;case"effect":h[r].ia(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.Yrt(r,rn);break;case"world-instance":this.D4().Hrt(t,s,i)}}x7(){}v7(t){}}en.Hst._ht.Aht=nn}{const on=self.ks,an=on.Hst;class un extends on.Hst._ht{constructor(t){super(t)}qtt(){}RX(){}ist(){}Xet(){return this.Crt()}Jit(){const t=this.Irt();return t!==this.Xet()}Vit(){return!on.ye(this.Trt)&&this.Trt!==this.Xet()}$et(){return!1}vht(t,s,i,e,h,r,n,o){const a=this.dht,u=a.det(),l=a.hit(),c=a.qst(),f=u.s6(),d=a.ptt(),p=this.wrt,m=c.dtt(f,d,p,a);if(m&&1<m.length){const y=this.krt(m),M=t+u.ast(),w=this.Frt(c,M,y);w&&(s=w.value)}const g=a.Pet();switch(g){case"numeric":if(an.wht.qrt(this.Ort(),this.Rrt(),s,l))break;return;case"angle":if(an.Sht.qrt(this.Ort(),this.Rrt(),s,l))break;return;case"boolean":if(an.Tht.qrt(this.Ort(),this.Rrt(),s,l))break;return;case"color":if(an.bht.qrt(this.Ort(),this.Rrt(),s,l))break;return;case"text":if(!an.xht.qrt(this.Ort(),this.Rrt(),s,l))return}this.Vrt(s)}Crt(){const t=this.dht.hit(),s=this.Rrt(),i=this.Ort();switch(t){case"behavior":return s.zrt(i);case"effect":return s[i];case"instance-variable":return s.Zrt(i);case"plugin":return s.zrt(i)}}Vrt(t){const s=this.dht.hit(),i=this.Rrt(),e=this.Ort();switch(s){case"behavior":i.Yrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Xrt(e,t);break;case"plugin":i.Yrt(e,t)}}}on.Hst._ht.Ght=un}{const ln=self.ks,cn=(ln.Hst._ht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{Krt:s,$rt:i,tnt:e,round:h,snt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.dht.xK()?t.int(s,i.qst().vtt()):t.int(s)},(t,s)=>t.ST(s),t=>t.wT(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.dht.xK()?t.ent(s,i.qst().vtt()):t.ent(s)},(t,s)=>t.xT(s),t=>t.bT(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.dht.xK(),u=1===i.hnt.wv();if((h||u)&&s.W5()&&s.Z5()){if(isNaN(i.rnt)){let e=[],t=s.A5();for(;t;)e.push(t),t=t.A5();e.reverse();let a=(t,s)=>s.qst().Tst(t.s6()),h=(t,s)=>{const i=a(t,s);if(i)return i.xit();const e=t.s6().CB();return e.vit()?e.xit():t.ont().nnt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.o6(i);if(!r)return e;const n=r.pet().oet();if(!n)return e;const o=n._rt();return o?o.Eet():e},n;if(u){let t=e[e.length-1];n=t.Mm()}else{let s=e[0],t=s.ont().nnt(),i=s.ont().ant();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).ont().ant();n=(n=(n*=l)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.rnt=0===n?Number.EPSILON:n}e||s.Xm(t/i.rnt,!0)}else s.Xm(t)}},(t,s)=>t.Im(s),t=>t.Mm(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.dht.xK(),a=1===i.hnt.wv();if((h||a)&&s.W5()&&s.K5()){if(isNaN(i.rnt)){let e=[],t=s.A5();for(;t;)e.push(t),t=t.A5();e.reverse();let h=(t,s)=>{e=t;const i=s.qst().Tst(e.s6());var e;if(i)return i.Iit();const h=t.s6().CB();return h.vit()?h.Iit():t.ont().unt()},r=(t,s,i,e=0)=>{const h=s.qst().Tst(t.s6());if(!h)return e;const r=h.o6(i);if(!r)return e;const n=r.pet().oet();if(!n)return e;const o=n._rt();return o?o.Eet():e},n;if(a){let t=e[e.length-1];n=t.Em()}else{let s=e[0],t=s.ont().unt(),i=s.ont().lnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).ont().lnt();n=(n=(n*=u)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.rnt=0===n?Number.EPSILON:n}e||s.cnt(t/i.rnt,!0)}else s.cnt(t)}},(t,s)=>t.wm(s),t=>t.Em(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.fnt(s)},(t,s)=>t.ck(s),t=>t.fk(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.dnt||1,n=(s/=r,t.PA()),o=n+s;if(0===e.pnt)1<o?e.pnt+=o-1:o<0&&(e.pnt+=o),t.mnt(s);else{const a=t.PA()+s;0<s&&0<e.pnt?1<a&&(e.pnt+=a-1):0<s&&e.pnt<0?(e.pnt+=s,0<e.pnt&&(t.mnt(e.pnt),e.pnt=0)):s<0&&0<e.pnt?(e.pnt+=s,e.pnt<0&&(t.mnt(e.pnt),e.pnt=0)):s<0&&e.pnt<0&&a<0&&(e.pnt+=a)}},(t,s)=>{t.FA(s)},t=>t.PA(),!1,!0,(r,h,n)=>{switch(r.pnt=0,r.dht.xK()){case"relative":{r.dht.Yst();let t=r.dht.pet(),s=t.oet(),i=s.net(),e=r.D4().PA(),h=e;for(const o of i){const a=o.cN(),u=r.dht.tht(a);h=e+u,h=ln.Tr(h,0,1)}r.gnt=e-h,r.gnt=Math.round(100*(r.gnt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].cN(),c=r.dht.tht(l);h-=c,h=ln.Tr(h,0,1)}r.ynt=h,r.ynt=Math.round(100*(r.ynt+Number.EPSILON))/100;break}}const t="relative"===r.dht.xK(),s=1===r.hnt.wv();if((t||s)&&h.W5()&&h.rB()){let s=[],t=h.A5();for(;t;)s.push(t),t=t.A5();s.reverse();let i=(t,s,i)=>{const e=s.qst().Tst(t.s6());if(!e)return 0;const h=e.o6(i);if(!h)return 0;const r=h.pet().oet();if(!r)return 0;const n=r._rt();return n?n.Eet():0},e=s[0].ont().Mnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.dnt=0===e?1:e}},i=>{switch(i.dht.xK()){case"relative":{i.pnt=0;let t=i.D4(),s=t.PA();s=Math.round(100*(s+Number.EPSILON))/100,i.dht.qst().Gtt()?(t.FA(s+i.gnt),i.oC=0):(t.FA(s-i.ynt),i.oC=i.ptt().fht());break}}}),fn("offsetOriginX",(t,s)=>t.wnt(s),(t,s)=>t.Snt(s),t=>t.pz(),!1),fn("offsetOriginY",(t,s)=>t.Tnt(s),(t,s)=>t.bnt(s),t=>t.gz(),!1),fn("offsetZElevation",(t,s)=>t.xnt(s),(t,s)=>t.CT(s),t=>t.vT(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Mm()<0?-1:1;if("relative"===e.dht.xK()&&t.W5()&&t.Z5()){const r=i.xit()*h*s;isNaN(e.rnt)&&cn.get("offsetWidth").Krt(t,1,i,e,!0),t.Xm(r/e.rnt,!0)}else t.Xm(i.xit()*h*s)}},(t,s,i)=>{t.Im(i.xit()*s)},(e,h)=>{const r=e.Mm()<0?-1:1;if(e.Z5()){let t=e.A5(),s=h.qst().Tst(t.s6()),i=NaN;if(s)i=t.Mm()/s.xit();else{const n=t.s6().CB();i=n.vit()?t.Mm()/n.xit():1}return e.Mm()*r/(h.xit()*i)}return e.Mm()*r/h.xit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Em()<0?-1:1;if("relative"===e.dht.xK()&&t.W5()&&t.K5()){const r=i.Iit()*h*s;isNaN(e.rnt)&&cn.get("offsetHeight").Krt(t,1,i,e,!0),t.cnt(r/e.rnt,!0)}else t.cnt(i.Iit()*h*s)}},(t,s,i)=>{t.wm(i.Iit()*s)},(e,h)=>{const r=e.Em()<0?-1:1;if(e.K5()){let t=e.A5(),s=h.qst().Tst(t.s6()),i=NaN;if(s)i=t.Em()/s.Iit();else{const n=t.s6().CB();i=n.vit()?t.Em()/n.Iit():1}return e.Em()*r/(h.Iit()*i)}return e.Em()*r/h.Iit()},!1);class dn extends ln.Hst._ht{constructor(t){super(t),this.oC=0,this.pnt=0,this.gnt=0,this.ynt=0,this.dnt=NaN,this.rnt=NaN,this.vnt=void 0,this.Cnt=void 0,this.Int=null,this.Gnt=null,this._nt=null,this.Ent=null,this.Ant=null,this.Dnt=null,this.Nnt=null,this.Lnt=null,this.Ont=!1,this.Rnt=!1,ln.$e(this.dht.qst(),ln.Pnt)?this.hnt=new ln.Hst._ht.knt(this):this.hnt=new ln.Hst._ht.Fnt(this);const s=this.dht.Sst();switch(this.dht.hit()){case"world-instance":{const i=cn.get(s);this.Int=i.tnt,this.Gnt=i.Krt,this._nt=i.$rt,this.Ont=i.round,this.Rnt=i.snt,this.Ant=i.init,this.Ent=i.reset;break}case"audio":this.Dnt=t.mrt,this.Nnt=t.grt,this.Lnt=t.yrt,this.Ont=!!t.Mrt(),this.Rnt=!1}}mr(){this.hnt=null,this.Int=null,this.Gnt=null,this._nt=null,this.Ent=null,this.Ant=null,this.Dnt=null,this.Nnt=null,this.Lnt=null,super.mr()}$et(){return this.hnt.$et()}jnt(){return this.oC}Bnt(t){this.oC=t}qtt(){this.Ent&&this.Ent(this)}RX(){const t=this.hnt.RX();if("number"==typeof t&&(this.oC=t),this.Ant){const s=this.D4(),i=this.dht.det();this.Ant(this,s,i)}}ist(){const t=this.hnt.ist();"number"==typeof t&&(this.oC=t)}Xet(){return this.Crt()}Jit(){const t=this.Irt();return t!==this.Xet()}Vit(){return!ln.ye(this.Trt)&&this.Trt!==this.Xet()}Mht(){this.hnt.Mht()}vht(t,s,i,e,h,r,n,o){return this.hnt.vht(t,s,i,e,h,r,n,o)}Cht(){this.hnt.Cht()}Crt(){const t=this.Rrt(),s=this.Ort(),i=this.D4(),e=this.dht.det(),h=this.dht.hit();switch(h){case"behavior":return t.zrt(s);case"effect":return t[s];case"instance-variable":return t.Zrt(s);case"plugin":return t.zrt(s);case"world-instance":return this.Int(i,e);case"audio":return this.Dnt.call(this.ptt(),i,e)}}Vrt(t,s,i){const e=this.Rrt(),h=this.Ort(),r=this.D4(),n=this.dht.det(),o=this.dht.hit();switch(o){case"behavior":e.znt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Unt(h,t);break;case"plugin":e.znt(h,t,this.ptt().jht());break;case"world-instance":this.Gnt(r,t,n,this);break;case"audio":this.Nnt.call(this.ptt(),r,t,n,this)}}Wnt(t,s,i){let e=this.dht.Stt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.dht.qst(),l=u.cN(),c=this.dht.Qet(l);if(!c)return}const h=this.Rrt(),r=this.Ort(),n=this.D4(),o=this.dht.det(),a=this.dht.hit();switch(a){case"behavior":h.Yrt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.Xrt(r,t);break;case"plugin":h.Yrt(r,t,this.ptt().jht());break;case"world-instance":this._nt(n,t,o);break;case"audio":this.Lnt.call(this.ptt(),n,t,o)}}}Qnt(t,s,i,e,h,r,n,o){this.hnt.Qnt(t,s,i,e,h,r,n,o)}Jnt(t,s,i,e,h){let r=(t="angle"===this.dht.Let()?ln.Cr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Crt(),u;switch(u=0===o?this.Ont?Math.round(a):this.Rnt?"angle"===this.dht.Let()?ln.vr(Math.round(ln.Cr(a))):Number(ln.toFixed(a,2)):a:this.Ont?Number(ln.toFixed(a,o)):(this.Rnt,a),this.Vrt(u-a,s,i),this.dht.Sst()){case"offsetWidth":case"offsetScaleX":{const l=this.D4(),c=l.Mm(),f=Number(ln.toFixed(c,2));l.Xm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.D4(),p=d.Em(),m=Number(ln.toFixed(p,2));d.cnt(m-p);break}}}x7(){return Object.assign(super.x7(),{v:this.oC,a:this.pnt,fod:this.gnt,bod:this.ynt,of:this.dnt,sf:this.rnt,armorf:this.vnt,armandf:this.Cnt})}v7(t){t&&(super.v7(t),this.oC=t.v,this.pnt=t.a,this.gnt=ln.pe(t.fod)?t.fod:0,this.ynt=ln.pe(t.bod)?t.bod:0,this.dnt=ln.pe(t.of)?t.of:NaN,this.rnt=ln.pe(t.sf)?t.sf:NaN,this.vnt=ln.pe(t.armorf)?t.armorf:void 0,this.Cnt=ln.pe(t.armandf)?t.armandf:void 0)}}ln.Hst._ht.Eht=dn}{const pn=self.ks;class mn{constructor(t){this.Vnt=!1,this.zht=0,this.Ynt=!1,this.Hnt=!1,this.Ust=t;for(let t=0,s=this.Ust.length;t<s;t++)this.Ust[t].cet(this)}wst(){return this.Ust}qnt(){this.Vnt=!0}Znt(){return this.Vnt}cht(t){this.zht=t}Eet(){return this.zht}Xnt(t){this.Ynt=t}Knt(){return this.Ynt}nst(t){this.Hnt=t}$nt(){return this.Hnt}g0(){this.Vnt=!1,this.zht=0,this.Ynt=!1,this.Hnt=!1}}class gn{constructor(t){this.tot=t}mr(){this.tot=null}wv(){return 0}RX(){const t=this.tot;return this.tot.o6(),t.Drt(()=>t.Grt(()=>0,()=>t.ptt().fht()),()=>{})}ist(){}$et(){this.tot;const t=this.tot.o6();switch(t.xK()){case"relative":return!1;case"absolute":return!0}}Mht(){this.tot;const t=this.tot.o6(),s=t.Sst();switch(t.xK()){case"relative":break;case"absolute":if(t.let()){const i=t.fet();i.g0()}else{const e=t.qst(),h=t.s6(),r=t.ptt(),n=e.dtt(h,r,s,t);n&&1<n.length&&new mn(n)}}}vht(t,s,i,e,h,r,n,o){const a=this.tot,u=this.tot.o6();switch(u.xK()){case"relative":{const l=a.jnt();a.Vrt(s-l,i,e),r&&this.Qnt(t,i,e,h,l,s),a.Bnt(s);break}case"absolute":{const c=u.qst(),f=u.det();if(u.s6(),u.ptt(),u.let()){const d=u.fet(),p=d.wst(),m=a.krt(p,!0),g=a.Frt(c,c.cN(),m);if(g){const y=f.ast(),M=g.time-y;if(0==M)d.nst(n),d.Xnt(o),d.qnt(),d.cht(d.Eet()+s);else{if(M<0)return;const w=u.tht(M);d.nst(n),d.Xnt(o),d.qnt(),d.cht(d.Eet()+(s-w))}}}else a.Wnt(s,o,n);break}}}Cht(){const t=this.tot,s=this.tot.o6();switch(s.xK()){case"relative":break;case"absolute":if(s.let()){const i=s.fet();i.Znt()&&t.Wnt(i.Eet(),i.Knt(),i.$nt())}}}Qnt(t,s,i,e,h,r){const n=this.tot;e||(s&&t===s.cN()?n.Jnt(s.AK(),s,i):i&&t===i.cN()?n.Jnt(i.AK(),s,i):r-h==0&&n.Jnt(s.AK(),s,i))}}pn.Hst._ht.Fnt=gn}{const yn=self.ks;class Mn{constructor(t){this.tot=t}mr(){this.tot=null}wv(){return 1}RX(){const t=this.tot;return t.xrt(!0),this.Lrt(t.Irt())}ist(){const t=this.tot;if(t.Irt()!==t.Art())return t.xrt(!0),this.Lrt(t.Art())}$et(){return!1}Mht(){}vht(t,s,i,e,h,r,n,o){const a=this.tot,u=a.jnt();switch(a.o6().xK()){case"relative":a.Vrt(s-u,i,e),r&&this.Qnt(t,i,e,h,u,s,!1,n);break;case"absolute":a.vrt()?(a.xrt(!1),a.Vrt(u,i,e)):0===t&&0===a.o6().qst().Fz()?a.Wnt(s,!0,!1):(a.Vrt(s-u,i,e),r&&this.Qnt(t,i,e,h,u,s,this.sot(),n))}a.Bnt(s)}Cht(){}Lrt(t){const s=this.tot;return t-s.Xet()}sot(){let t=this.tot,s=t.D4().s6(),i=t.o6().K4(),e=i.ftt(),h=0;for(const r of e.lX())0===r.wv()?r.mX(s)&&h++:1===r.wv()&&r.s6()===s&&h++;return h<=1}Qnt(t,s,i,e,h,r,n,o){const a=this.tot;e?s&&t===s.cN()?a.Jnt(s.AK(),s,i,n,o):i&&t===i.cN()?a.Jnt(i.AK(),s,i,n,o):i||a.Jnt(s.AK(),s,i,n,o):s&&t===s.cN()?a.Jnt(s.AK(),s,i,n,o):i&&t===i.cN()?a.Jnt(i.AK(),s,i,n,o):r-h==0&&a.Jnt(s.AK(),s,i,n,o)}}yn.Hst._ht.knt=Mn}{const wn=self.ks,Sn=self.vc;wn.Hst.wht=class{constructor(){}static qrt(t,s,i,e){let h;switch(e){case"behavior":h=s.zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Zrt(t);break;case"plugin":h=s.zrt(t)}return h!==i}static qc(r,n,o,a){if(!o){let t=a.pet(),s=a.Yst();return(t=s._rt(t)).AK()}let u=a.Stt();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.Let()?"discrete":u))return n.AK();if("continuous"===u||"step"===u){const l=a.qst().Mtt();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=n.AK(),f=o.AK(),d=n._K("cubic-bezier"),p=o._K("cubic-bezier"),m=d&&d.iot()&&p&&p.eot();if(!m&&c===f)return c;let t=n.cN(),s=o.cN(),i=("step"===u&&0!==l&&(r=wn.Tr(r,t,s)),wn.normalize(r,t,s)),e=n.lht(),h;if(m){const y=s-t;h=Sn.jc(e)(y*i,0,1,y),h=Sn.jc("cubicbezier")(h,c,c+d.LK(),f+p.kK(),f)}else h=Sn.jc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Let()?Math.floor(h):h}}}}{const Tn=self.ks;Tn.Hst.Sht=class{constructor(){}static qrt(t,s,i,e){let h;switch(e){case"behavior":h=s.zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Zrt(t);break;case"plugin":h=s.zrt(t)}return h!==i}static qc(t,s,i,e){if(!i){let t=e.pet(),s=e.Yst();return(t=s._rt(t)).AK()}let h=e.Stt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Let()?"discrete":h))return s.AK();if("continuous"===h||"step"===h){const r=e.qst().Mtt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.cN(),o=i.cN(),a=s.AK(),u=i.AK(),l=("step"===h&&0!==r&&(t=Tn.Tr(t,n,o)),s._K("angle"));if(!l){if(a===u)return a;const f=Tn.normalize(t,n,o),d=self.vc.jc(s.lht());return Tn.Or(a,u,d(f,0,1,1))}{const p=l.hot();if(a===u&&0===p)return a;const m=Tn.normalize(t,n,o),g=self.vc.jc(s.lht()),y=g(m,0,1,1);switch(l.rot()){case"closest":return Tn.Or(a,u,y,p);case"clockwise":return Tn.Rr(a,u,y,p);case"anti-clockwise":return Tn.Pr(a,u,y,p)}}}}}}{const bn=self.ks;bn.Hst.Tht=class{constructor(){}static qrt(t,s,i,e){let h;switch(e){case"behavior":h=s.zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Zrt(t);break;case"plugin":h=s.zrt(t)}return!!h!=!!i}static qc(t,s,i,e){if(i)return s.AK()?1:0;{let t=e.pet(),s=e.Yst();return(t=s._rt(t)).AK()?1:0}}}}{const xn=self.ks,vn=[0,0,0],Cn=[0,0,0],In=[0,0,0];xn.Hst.bht=class{constructor(){}static qrt(t,s,i,e){let h;switch(e){case"behavior":h=s.zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Zrt(t);break;case"plugin":h=s.zrt(t)}return Array.isArray(i)?(vn[0]=i[0],vn[1]=i[1],vn[2]=i[2]):(In.ka(i),vn[0]=Math.floor(255*In.fa()),vn[1]=Math.floor(255*In.ma()),vn[2]=Math.floor(255*In.ga())),Array.isArray(h)?(Cn[0]=h[0],Cn[1]=h[1],Cn[2]=h[2]):(In.ka(h),Cn[0]=Math.floor(255*In.fa()),Cn[1]=Math.floor(255*In.ma()),Cn[2]=Math.floor(255*In.ga())),vn[0]!==Cn[0]||vn[1]!==Cn[1]||vn[2]!==Cn[2]}static qc(t,s,i,e){if(!i){let t=e.pet(),s=e.Yst(),i=(t=s._rt(t)).AK();return vn[0]=i[0],vn[1]=i[1],vn[2]=i[2],vn}let h=e.Stt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.AK();return vn[0]=r[0],vn[1]=r[1],vn[2]=r[2],vn}if("continuous"===h||"step"===h){const n=e.qst().Mtt();if("step"===h&&0!==n){const b=1/n;t=Math.floor(t*b)/b}const o=s.cN(),a=i.cN(),u=s.AK(),l=i.AK(),c=("step"===h&&0!==n&&(t=xn.Tr(t,o,a)),xn.normalize(t,o,a)),f=s.lht(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.vc.jc(f),S=a-o,T=S*c;return vn[0]=d===g?d:w(T,d,g-d,S),vn[1]=p===y?p:w(T,p,y-p,S),vn[2]=m===M?m:w(T,m,M-m,S),vn}}}}{const Gn=self.ks;Gn.Hst.xht=class{constructor(){}static qrt(t,s,i,e){let h;switch(e){case"behavior":h=s.zrt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Zrt(t);break;case"plugin":h=s.zrt(t)}return h!==i}static qc(t,s,i,e){if(i)return s.AK();{let t=e.pet(),s=e.Yst();return(t=s._rt(t)).AK()}}}}{const _n=self.ks;_n.yZ=class{constructor(){this.not=new Map}mr(){for(const t of this.not.values())t.mr();this.not.clear(),this.not=null}Sc(t){const s=new _n.oot(t),i=s.nf();this.not.set(i,s)}si(t){return this.not.get(t)}htt(){return 0}static aot(t,s,i,e){if(s)for(const h of s)_n.yZ.uot("create",h,t,i,e)}static lot(t,s,i,e){if(s)for(const h of s)_n.yZ.uot("create-including-disabled",h,t,i,e)}static cot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].v7(t)}):t.forEach(t=>{_n.yZ.uot("load",t,i,s,e)})}static uot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.v7(s),i.push(r);break;case"create":if("function"==typeof r.wit&&!r.wit())return r.mr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const En=self.ks;En.oot=class{constructor(t){this.Mr="",this.rst=NaN,this.dot=0,this.pot="default",this.mot="default",this.got=!1,this.yot=!1,this.Mot=1,this.Est=null,this.wot="",this.Sot=!1,this.Tot=!0,t&&(this.Mr=t[0],this.rst=t[1],this.dot=t[2],this.pot=t[3],this.mot=t[4],this.got=!!t[6],this.yot=!!t[7],this.Mot=t[8],this.wot=t[9],this.Sot=!!t[10],this.Tot=!!t[11],this.Est=new En.bot(t[5],this))}mr(){this.Est.mr(),this.Est=null}ltt(){return this.Est||(this.Est=new En.bot(null,this)),this.Est}nf(){return this.Mr}XU(t){this.Mr=t}Fz(){return this.rst}kz(t){this.rst=t}Mtt(){return this.dot}wtt(t){this.dot=t}Stt(){return this.pot}Ttt(t){this.pot=t}xK(){return this.mot}btt(t){this.mot=t}Bz(){return this.got}jz(t){this.got=t}Uz(){return this.yot}zz(t){this.yot=t}ZB(){return this.Mot}xtt(t){this.Mot=t}VX(){return this.wot}vtt(){return this.Sot}Ctt(){return this.Tot}x7(){return{trackDataJson:this.Est.x7(),name:this.Mr,totalTime:this.rst,step:this.dot,interpolationMode:this.pot,resultMode:this.mot,loop:this.got,pingPong:this.yot,repeatCount:this.Mot,startOnLayout:this.wot,transformWithSceneGraph:!!this.Sot,useSystemTimescale:this.Tot}}v7(t){t&&(this.ltt().v7(t.trackDataJson),this.Mr=t.name,this.rst=t.totalTime,this.dot=t.step,this.pot=t.interpolationMode,this.mot=t.resultMode,this.got=t.loop,this.yot=t.pingPong,this.Mot=t.repeatCount,this.wot=t.startOnLayout,this.Sot=!!t.transformWithSceneGraph,this.Tot=!!t.useSystemTimescale)}}}{const An=self.ks;class Dn{constructor(t,s){this.Est=s,this.xot=null,this.vot=null,this.Ast=NaN,this.Dst=NaN,this.pot="default",this.mot="default",this.Ql=!1,this.Cot=null,this.eet=null,this.Mf="",this.Iot=null,this.Got=0,this._ot=this.Est.ytt().Fz(),this.vf=0,this.Mr="",t&&(t[0]&&(this.xot=t[0],this.Ast=t[0][2],this.Dst=t[0][1]),this.pot=t[1],this.mot=t[2],this.Ql=!!t[3],t[6]&&(this.Mf=t[6]),t[7]&&(this.Iot=t[7],this.Got=t[7][0],this._ot=t[7][1]),t[8]&&(this.vot=t[8]),t[8]&&(this.vot=t[8]),t[9]&&(this.vf=t[9]),t[10]&&(this.Mr=t[10]),this.Cot=new An.Eot(t[4],this),this.eet=new An.Aot(t[5],this))}mr(){this.xot=null,this.Est=null,this.Cot&&(this.Cot.mr(),this.Cot=null),this.eet&&(this.eet.mr(),this.eet=null),this.Iot=null}ltt(){return this.Est}zst(){return this.Cot||(this.Cot=new An.Eot(null,this)),this.Cot}Yst(){return this.eet||(this.eet=new An.Aot(null,this)),this.eet}Dot(){return this.xot}$st(){return this.Dst}Tit(t){this.Dst=t}Kst(){return this.Ast}git(t){this.Ast=t}Stt(){return this.pot}Ttt(t){this.pot=t}xK(){return this.mot}btt(t){this.mot=t}wit(){return this.Ql}Sit(t){this.Ql=!!t}r6(){return this.Mf}ast(){return this.Got}yit(){return this._ot}Mit(t){this._ot=t}xit(){return this.vot[0]}bit(t){this.vot||(this.vot=[]),this.vot[0]=t}Iit(){return this.vot||(this.vot=[]),this.vot[1]}Cit(t){this.vot||(this.vot=[]),this.vot[1]=t}wv(){return this.vf}nf(){return this.Mr}x7(){return{keyframeDataJson:this.Cot.x7(),propertyTrackDataJson:this.eet.x7(),instanceData:this.xot,additionalInstanceData:this.vot,instanceUid:this.Ast,objectClassIndex:this.Dst,interpolationMode:this.pot,resultMode:this.mot,enabled:this.Ql,id:this.Mf,nestedData:this.Iot,type:this.vf,name:this.Mr}}v7(t){t&&(this.xot=t.instanceData,this.Ast=t.instanceUid,this.Dst=t.objectClassIndex,this.pot=t.interpolationMode,this.mot=t.resultMode,this.Ql=t.enabled,this.Mf=t.id,this.vf=t.type||0,this.Mr=t.name||"",this._ot=this.Est.ytt().Fz(),t.nestedData&&(this.Iot=t.nestedData,this.Got=this.Iot[0],this._ot=this.Iot[1]),t.additionalInstanceData&&(this.vot=t.additionalInstanceData),this.zst().v7(t.keyframeDataJson),this.Yst().v7(t.propertyTrackDataJson))}}An.bot=class{constructor(t,s){this._$=s,this.Not=[],An.yZ.aot(this.Not,t,Dn,this)}mr(){this._$=null;for(const t of this.Not)t.mr();An.Qn(this.Not),this.Not=null}ytt(){return this._$}cst(){const t=new Dn(null,this);return this.Not.push(t),t}Lot(t){return t.zst().Bst()[0]}Oot(t){const s=t.zst().Bst();return s.at(-1)}Pit(s,t){const i=t.zst().Bst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.cN()===s)return h}}Rot(s,t){const i=t.zst().Bst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.cN()>s)return h}}Pot(s,t){const i=t.zst().Bst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.cN()>=s)return h}}Rit(s,t){const i=t.zst().Bst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.cN()<=s)return e}}*utt(){for(const t of this.Not)yield t}x7(){return{trackDataItemsJson:this.Not.map(t=>t.x7())}}v7(t){t&&An.yZ.cot(this.Not,t.trackDataItemsJson,Dn,this)}}}{const Nn=self.ks;class Ln{constructor(t,s){this.eet=s,this.kot="",this.Fot=null,this.wrt=null,this.vf=null,this.jot=NaN,this.Bot=NaN,this.pot="default",this.mot="default",this.Ql=!1,this.zot=null,this.Uot=!0,t&&(this.kot=t[0][0],this.Fot=t[0].slice(1),this.wrt=t[1],this.vf=t[2],this.jot=t[3],this.Bot=t[4],this.pot=t[5],this.mot=t[6],this.Ql=!!t[7],this.zot=new Nn.Wot(t[8],this),this.Uot=t[9])}mr(){this.zot.mr(),this.zot=null,this.eet=null,this.Fot=null}Yst(){return this.eet}oet(){return this.zot||(this.zot=new Nn.Wot(null,this)),this.zot}hit(){return this.kot}vet(t){this.kot=t}Iet(){return this.Fot}_et(t){this.Fot=t}Aet(){return this.wrt}Net(t){this.wrt=t}wv(){return this.vf}Ret(t){this.vf=t}Fet(){return this.jot}jet(t){this.jot=t}Bet(){return this.Bot}zet(t){this.Bot=t}Stt(){return this.pot}Ttt(t){this.pot=t}xK(){return this.mot}btt(t){this.mot=t}wit(){return this.Ql}Sit(t){this.Ql=!!t}Wet(){return!!this.Uot}x7(){return{propertyKeyframeDataJson:this.zot.x7(),sourceAdapterId:this.kot,sourceAdapterArguments:this.Fot,property:this.wrt,type:this.vf,min:this.jot,max:this.Bot,interpolationMode:this.pot,resultMode:this.mot,enabled:this.Ql,canHavePropertyKeyframes:this.Uot}}v7(t){t&&(this.kot=t.sourceAdapterId,this.Fot=t.sourceAdapterArguments,this.wrt=t.property,this.vf=t.type,this.jot=t.min,this.Bot=t.max,this.pot=t.interpolationMode,this.mot=t.resultMode,this.Ql=t.enabled,this.Uot=t.canHavePropertyKeyframes,this.oet().v7(t.propertyKeyframeDataJson))}}Nn.Aot=class{constructor(t,s){this._st=s,this.Qot=[],Nn.yZ.aot(this.Qot,t,Ln,this)}mr(){this._st=null;for(const t of this.Qot)t.mr();Nn.Qn(this.Qot),this.Qot=null}mit(){return this._st}Bit(){const t=new Ln(null,this);return this.Qot.push(t),t}ket(t){const s=t.oet();return s.net()[0]}_rt(t){const s=t.oet(),i=s.net();return i.at(-1)}Qet(s,t){const i=t.oet(),e=i.net(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.cN()===s)return r}}Yet(s,t){const i=t.oet(),e=i.net(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.cN()>s)return r}}Het(s,t){const i=t.oet(),e=i.net(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.cN()>=s)return r}}Jet(s,t){const i=t.oet(),e=i.net();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.cN()<=s)return h}}*Vst(){for(const t of this.Qot)yield t}x7(){return{propertyTrackDataItemsJson:this.Qot.map(t=>t.x7())}}v7(t){t&&Nn.yZ.cot(this.Qot,t.propertyTrackDataItemsJson,Ln,this)}}}{const On=self.ks;class Rn{constructor(t,s){if(this.Cot=s,this.oL=-1,this.Jot="noease",this.Vot=!1,this.$$=null,this.Yot=null,t){this.oL=t[0],this.Jot=t[1],this.Vot=!!t[2];const i=t[3];this.$$=i?i.split(" "):[],this.Yot=new Set(this.$$.map(t=>t.toLowerCase())),this.Hot=null}}mr(){this.Cot=null,On.Qn(this.$$),this.$$=null,this.Yot.clear(),this.Yot=null,this.Hot=null}zst(){return this.Cot}mK(){return this.Hot}qot(t){this.Hot=t}cN(){return this.oL}Pz(t){this.oL=t,this.Cot.Zot()}lht(){return this.Jot}t6(t){this.Jot=t}wit(){return this.Vot}Sit(t){this.Vot=!!t}Jz(){return this.$$}_tt(t){this.$$=t?t.split(" "):[],this.Yot=new Set(this.$$.map(t=>t.toLowerCase()))}Xot(){return this.Yot}vst(t){return this.Yot.has(t.toLowerCase())}x7(){return{time:this.oL,ease:this.Jot,enable:this.Vot,tags:this.$$}}v7(t){t&&(this.oL=t.time,this.Jot=t.ease,this.Vot=t.enable,this.$$=t.tags,this.Yot=new Set(this.$$.map(t=>t.toLowerCase())))}}On.Eot=class{constructor(t,s){this._st=s,this.jst=[],On.yZ.aot(this.jst,t,Rn,this),this.Zot()}mr(){this._st=null;for(const t of this.jst)t.mr();On.Qn(this.jst),this.jst=null}Zot(){this.jst.sort((t,s)=>t.cN()-s.cN());for(let t=0;t<this.jst.length;t++){const s=this.jst[t];s.qot(this.jst[t+1])}}mit(){return this._st}Kot(){return this.jst.length}Bst(){return this.jst}Fit(){const t=new Rn(null,this);return this.jst.push(t),this.Zot(),t}Uit(t){for(const s of this.jst)if(t(s)){const i=this.jst.indexOf(s);-1!==i&&(s.mr(),this.jst.splice(i,1))}this.$ot(),this.Zot()}$ot(){this.jst.sort((t,s)=>t.cN()-s.cN())}Kit(t){return this.jst.indexOf(t)}$it(t){return this.jst[t]}*tat(){for(const t of this.jst)yield t}*sat(){for(let t=this.jst.length-1;0<=t;t--)yield this.jst[t]}x7(){return{keyframeDataItemsJson:this.jst.map(t=>t.x7())}}v7(t){t&&(On.yZ.cot(this.jst,t.keyframeDataItemsJson,Rn,this),this.Zot())}}}{const Pn=self.ks;class kn{constructor(t,s){this.zot=s,this.zht=null,this.iat=null,this.vf="",this.oL=NaN,this.Jot="noease",this.Vot=!1,this.eat=null,this.hat=void 0,this.rat="line",t&&(this.zht=t[0][0],this.iat=t[0][1],this.vf=t[0][2],this.oL=t[1],this.Jot=t[2],this.Vot=!!t[3],this.rat=t[5],this.eat=null,t[4]&&(this.eat=new Pn.nat(t[4],this)),this.Hot=null,this.oat=null)}mr(){this.zot=null,this.eat&&(this.eat.mr(),this.eat=null),this.Hot=null,this.oat=null}aat(){return this.eat}qot(t){this.Hot=t}mK(){return this.Hot}uat(t){this.oat=t}gK(){return this.oat}Eet(){return this.zht}cht(t){"color"===this.vf&&Pn.pe(t)?(this.zht[0]=Pn.Kr(t),this.zht[1]=Pn.$r(t),this.zht[2]=Pn.tn(t)):this.zht=t}Ert(){return this.iat}oht(t){"color"===this.vf&&Pn.pe(t)?(this.iat[0]=Pn.Kr(t),this.iat[1]=Pn.$r(t),this.iat[2]=Pn.tn(t)):this.iat=t}AK(){const t=this.zot.pet().xK();return"relative"===t?this.Eet():"absolute"===t?this.Ert():void 0}wv(){return this.vf}Ret(t){this.vf=t}cN(){return this.oL}Pz(t){this.oL=t,this.zot.lat()}lht(){return this.Jot}t6(t){this.Jot=t}wit(){return this.Vot}Sit(t){this.Vot=!!t}yK(){return this.rat}_K(s){if(this.eat){if(!this.hat&&null!==this.hat){const i=this.eat.cat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.r6()===s)return this.hat=h,this.hat}}this.hat=null}return this.hat}}x7(){const t=this.eat;return{addonDataJson:t&&t.x7(),value:this.zht,aValue:this.iat,type:this.vf,time:this.oL,ease:this.Jot,enable:this.Vot}}v7(t){t&&(t.addonDataJson&&this.eat._SetFromJson(t.addonDataJson),this.zht=t.value,this.iat=t.aValue,this.vf=t.type,this.oL=t.time,this.Jot=t.ease,this.Vot=t.enable)}}Pn.Wot=class{constructor(t,s){this.iet=s,this.ret=[],this.fat=[],Pn.yZ.aot(this.ret,t,kn,this),Pn.yZ.lot(this.fat,t,kn,this),this.lat()}mr(){this.iet=null;for(const t of this.ret)t.mr();Pn.Qn(this.ret),this.ret=null;for(const s of this.fat)s.mr();Pn.Qn(this.fat),this.fat=null}lat(){let s=this.ret;s.sort((t,s)=>t.cN()-s.cN());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.qot(s[t+1]),0<=t-1&&i.uat(s[t-1])}(s=this.fat).sort((t,s)=>t.cN()-s.cN());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.qot(s[t+1]),0<=t-1&&e.uat(s[t-1])}}rht(){const t=new kn(null,this);return this.ret.push(t),this.lat(),t}nht(t){for(const s of this.ret)if(t(s)){const i=this.ret.indexOf(s);-1!==i&&(s.mr(),this.ret.splice(i,1))}this.dat(),this.lat()}dat(){this.ret.sort((t,s)=>t.cN()-s.cN())}pet(){return this.iet}pat(){return this.ret.length}_rt(){return this.ret[this.ret.length-1]}net(){return this.ret}pK(){return this.fat}*mat(){for(const t of this.ret)yield t}*gat(){for(let t=this.ret.length-1;0<=t;t--)yield this.ret[t]}x7(){const t=this.ret,s=this.fat;return{propertyKeyframeDataItemsJson:t.map(t=>t.x7()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.x7())}}v7(t){t&&(Pn.yZ.cot(this.ret,t.propertyKeyframeDataItemsJson,kn,this),Pn.yZ.cot(this.fat,t.propertyKeyframeDataItemsIncludingDisabledJson,kn,this),this.lat())}}}{const Fn=self.ks;class jn{constructor(t,s){this.eat=s,this.Mf=t[0],this.yat=t[1]}mr(){this.eat=null,this.yat=null}aat(){return this.eat}r6(){return this.Mf}x7(){return{id:this.Mf,data:this.yat}}v7(t){t&&(this.Mf=t.id,this.yat=t.data)}}class Bn extends jn{constructor(t,s){super(t,s),this.Mat=this.yat[0],this.wat=!!this.yat[1],this.Sat=this.yat[2],this.Tat=!!this.yat[3]}mr(){super.mr()}LK(){return this.Mat}iot(){return this.wat}kK(){return this.Sat}eot(){return this.Tat}x7(){return Object.assign(super.x7(),{startAnchor:this.Mat,startEnable:!!this.wat,endAnchor:this.Sat,endEnable:!!this.Tat})}v7(t){t&&(super.v7(t),this.Mat=t.startAnchor,this.wat=!!t.startEnable,this.Sat=t.endAnchor,this.Tat=!!t.endEnable)}}class zn extends jn{constructor(t,s){super(t,s),this.bat=this.yat[0],this.xat=this.yat[1]}mr(){super.mr()}rot(){return this.bat}hot(){return this.xat}x7(){return Object.assign(super.x7(),{direction:this.bat,revolutions:this.xat})}v7(t){t&&(super.v7(t),this.bat=t.direction,this.xat=t.revolutions)}}Fn.nat=class{constructor(t,s){this.vat=s,this.Cat=[],Fn.yZ.aot(this.Cat,t,{prop:0,map:new Map([["cubic-bezier",Bn],["angle",zn]])},this)}mr(){this.vat=null;for(const t of this.Cat)t.mr();Fn.Qn(this.Cat),this.Cat=null}Iat(){return this.vat}cat(){return this.Cat}*Gat(){for(const t of this.Cat)yield t}x7(){return{addonDataItemsJson:this.Cat.map(t=>t.x7())}}v7(t){t&&Fn.yZ.cot(this.Cat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Bn],["angle",zn]])},this)}}}{let m=self.ks,i=0;m.Pnt=class extends m.ZZ{constructor(t,s){super("tween-"+i++,t,s),this.Mf="",this._at=!1,this.Eat="start-value",this.Nst=null,this.Aat=null,this.Dat=null,this.tet=null,this.Nat=null}ott(t){const s=m.pr(m.Event,"tweenstatereleased");s.Lat=this,t.dispatchEvent(s)}wv(){return 1}L$(){for(const t of this._$.ltt().utt())this.E$.push(m.Oat.ux(this,t));this.tet=this.E$[0]}lst(){const t=this._$.ltt().cst(),s=m.Oat.ux(this,t);return this.E$.push(s),this.Rat(),s}Rat(){this.tet=this.E$[0]}o6(t){return this.tet.wst()[0]}Oet(t){this.Pat=t}s6(){const t=this.cK();if(t&&t.length){const s=t[0];if(this.tet=s){const i=s.s6();return s.Xst()?i:void 0}}}kat(t){this.Dat||(this.Dat=[]),this.Dat.push(t)}Fat(t){this.Aat||(this.Aat=[]),this.Aat.push(t)}jat(t){if(this.Dat){const s=this.Dat.indexOf(t);-1!==s&&this.Dat.splice(s,1)}}Bat(t){if(this.Aat){const s=this.Aat.indexOf(t);-1!==s&&this.Aat.splice(s,1)}}zat(t,s){for(const i of this.E$)for(const e of i.Ust)if(e.Sst()===s){const h=e.Yst(),r=e.pet(),n=h.ket(r);n.cht(t),n.oht(t)}}Uat(t){for(const s of this.E$)for(const i of s.Ust)if(i.Sst()===t)return i}Wat(t){for(const s of t){const i=this.Uat(s);this.zat(i.Xet(),s)}if(this.Gtt()){const e=this.Fz()-this.cN();this.kz(e);for(const h of this.E$)h.Mit(e);this.Utt(0)}else{const r=this.cN();this.kz(r);for(const n of this.E$)n.Mit(r);this.Utt(r)}this.Wtt()}Qat(t,s){const i=this.Uat(s),e=i.Yst(),h=i.pet(),r=e._rt(h);r.Pz(this.Fz()),r.cht(t),r.oht(t)}Jat(t){this.Mf=t}r6(){return this.Mf}Vat(t){this.Eat=t}Yat(){return this.Eat}h6(t){this._at=t}e6(){return this._at}Ntt(){if(this.Dat)for(const t of this.Dat)t(this);if(!this.UX())for(const s of this.E$)s.Vit()}Ltt(){this.Y$=this.gf.Ott()}QX(){if(!this.Z$&&(this.Z$=!0,this.Aat))for(const t of this.Aat)t(this)}Pz(t){this.Hat(),super.Pz(t)}Htt(t){(t=m.pe(t)?t:this.Fz())<0?this.P$=0:t>=this.Fz()?this.P$=this.Fz():this.P$=t,this.tet.qtt()}RX(t){if(!this.WX()&&"current-state"===this.Yat())for(const s of this.E$)s.Jit();super.RX(t)}Lz(t=!1){if(super.Lz(t),!this.UX())for(const s of this.E$)s.Qit()}g0(t=!0,s=!1){this.Hat(),super.g0(t,s)}Hat(){for(const t of this.E$){const s=t=>{const s=t.cN(),i=this.Fz();return 0!==s&&s!==i};t.zit(s),t.Wit(s)}}OZ(){if(!this.Dz()){const t=this.s6();if(t&&t.jF().FV())return!1;this.G$.DX(this),this.tst()}return!0}jX(h,t,s){if(this.Nst||(this.Nst=this.s6()),!this.Nst||this.Nst.nU())this.Lz(!0),this.Ltt();else{const i=this.Nst.F3();if(0!==(h=-1!==i?s*i:h)||0!==this.K$){this.K$=h;const r=this.P$+this.k$,n=h*this.F$,o=r+n,a=this._$.rst;o<0?(this.P$=0,this.k$=-o):a<=o?(this.P$=a,this.k$=this.P$-o):(this.P$=o,this.k$=0);let t=!1,s=!1,i=this.Bz(),e=this.Uz();i||e?i&&!e?0<this.F$?this.P$>=a&&(this.Htt(0),this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),s=!0):this.P$<=0&&(this.Htt(a),this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),s=!0):!i&&e?0<this.F$?this.P$>=a&&(this.Utt(a),this.Wz(-1*this.Qz()),s=!0,1===this.j$?this.B$<this.ZB()?(this.B$++,this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong),this.j$=0):(this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong),t=!0):0===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong),this.j$=1)):this.P$<=0&&(this.Utt(0),this.Wz(-1*this.Qz()),s=!0,1===this.j$?this.B$<this.ZB()?(this.B$++,this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong),this.j$=0):(t=!0,this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong)):0===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong),this.j$=1)):i&&e&&(0<this.F$?this.P$>=a&&(this.Utt(a),this.Wz(-1*this.Qz()),s=!0,0===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong)),1===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong)),this.j$++,this.j$=m.wrap(this.j$,0,2)):this.P$<=0&&(this.Utt(0),this.Wz(-1*this.Qz()),s=!0,0===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong)),1===this.j$&&(this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),this.qat(m.Zat.Tween.pq.OnAnyTweenPingPong),this.qat(m.Zat.Tween.pq.OnTweensPingPong)),this.j$++,this.j$=m.wrap(this.j$,0,2))):0<this.F$?this.P$>=a&&(this.B$<this.ZB()?(this.B$++,this.Htt(0),this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),s=!0):(this.Utt(a),t=!0)):this.P$<=0&&(this.B$<this.ZB()?(this.B$++,this.Htt(a),this.qat(m.Zat.Tween.pq.OnAnyTweenLoop),this.qat(m.Zat.Tween.pq.OnTweensLoop),s=!0):(this.Utt(0),t=!0)),t?(this.tet.nst(),this.Lz(!0),this.Ltt()):(this.tet.qc(this.P$,!0,!1,s,this.X$,!1),this.X$&&(this.X$=!1))}}}qat(t){const s=this.s6(),i=s.Xat(m.Zat.Tween);i.PushTriggerTween(this),this.gf.Ij(t,s,i.RB()),i.PopTriggerTween()}x7(){const t=super.x7(),s=this.ytt();return Object.assign(t,{tweenDataItemJson:s.x7(),id:this.Mf,destroyInstanceOnComplete:this._at,initialValueMode:this.Eat})}v7(t){if(t){const s=this.ytt();s.v7(t.tweenDataItemJson),super.v7(t),this.Mf=t.id,this._at=t.destroyInstanceOnComplete,this.Eat=t.initialValueMode,this.Rat()}}static IsPlaying(t){return t.IsPlaying()}static qz(t){return t.qz()}static Kat(t){return!!t.Uz()&&0===t.Itt()}static $at(t){return!!t.Uz()&&1===t.Itt()}static tut(t){const s=t.runtime.ftt(),i=new m.oot;if(t.json){i.v7(t.json.tweenDataItemJson);const e=new m.Pnt(i,s);return e.v7(t.json),e}{const h=new m.Pnt(i,s),r=(m.je(t.sut)||(t.sut=[t.sut]),h.Jat(t.id),h._tt(t.tags),h.Vat(t.initialValueMode),h.h6(t.releaseOnComplete),h.jz(t.loop),h.zz(t.pingPong),h.kz(t.time),h.wtt(0),h.Ttt("default"),h.btt(t.sut[0].resultMode),h.xtt(t.repeatCount),h.lst()),n=(r.git(t.PB.$F()),r.Ttt("default"),r.btt(t.sut[0].resultMode),r.Sit(!0),r.Tit(t.PB.jF()._O()),t.PB.CB()),o=n.vit()?n.xit():t.PB.D4().Mm(),a=n.vit()?n.Iit():t.PB.D4().Em(),u=(r.bit(o),r.Cit(a),r.kit()),l=(u.Pz(0),u.t6("noease"),u.Sit(!0),u._tt(""),r.kit());l.Pz(t.time),l.t6("noease"),l.Sit(!0),l._tt("");for(const c of t.sut){const f=r.jit(),d=(f.vet(c.sourceId),f.Get(c.sourceArgs),f.Det(c.property),f.Oet(c.type),f.jet(NaN),f.zet(NaN),f.Ttt("default"),f.btt(c.resultMode),f.Sit(!0),f.hht()),p=(d.Ret(c.valueType),d.Pz(0),d.t6(c.ease),d.Sit(!0),d.cht(c.startValue),d.oht(c.startValue),f.hht());p.Ret(c.valueType),p.Pz(t.time),p.t6(c.ease),p.Sit(!0),p.cht(c.endValue),p.oht(c.endValue),f.ptt()}return h}}static git(t,s){if(!isNaN(s))for(const i of t.cK())i.git(s)}iut(t,s){return this.Nat||(this.Nat=m.pr(self.Kz,this,t,s)),this.Nat}}}{const Un=self.ks;Un.Oat=class extends Un.ctt{constructor(t,s){super(t,s),this.eut=null,this.hut=null}static ux(t,s){return Un.pr(Un.Oat,t,s)}rut(){1===this.Ust.length?this.eut=this.Ust[0]:(this.eut=this.Ust[0],this.hut=this.Ust[1])}Wst(){for(const t of this._st.Yst().Vst())this.Ust.push(Un.nut.ux(this,t));this.rut()}jit(){const t=this._st.Yst(),s=t.Bit(),i=Un.nut.ux(this,s);return this.Ust.push(i),this.rut(),i}RX(){if(this.Zst(),this.Xst()||!this.gtt()){const t=this.qst(),s=t.Gtt(),i=s?0:this.yit();for(const h of this.Ust)h.RX(i),0===this.Qst&&1===h.Eit()&&(this.Qst=1),0===this.VZ&&1===h.PX()&&(this.VZ=1);this.Jst=0;const e=this.Ust.some(t=>t.hst());e&&(this.Jst=1),this.Fst=this.Ait(i),this.Rst=!1,this.Pst=!1,this.qc(i)}}ost(){}qc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.Nst||this.s6(),this.Nst){const o=!this.Nst.nU();return o&&(!r||!this.jF().FV())&&((this.hut?(this.eut.qc(t,i,e,n),this.hut):this.eut).qc(t,i,e,n),void(0!==this.eut.Eit()&&(this.Lst||(this.Lst=this.Nst.D4()),this.Lst)&&this.Lst.i5()))}}ust(){}v7(t){super.v7(t),this.rut()}}}{const Wn=self.ks;Wn.nut=class extends Wn.Hst{constructor(t,s){super(t,s),this.out=!1}static ux(t,s){return Wn.pr(Wn.nut,t,s)}qc(t,s=!1,i=!1,e=!1){let h,r;if(this.out)h=this.ret[0],r=this.ret[1];else{if(s)h=this.eet.Jet(t,this.iet);else{if(this.aet){const n=this.qst(),o=this.aet.mK(),a=this.aet.cN(),u=o?o.cN():n.Fz();(t<=a||u<=t)&&(this.aet=this.eet.Jet(t,this.iet))}else this.aet=this.eet.Jet(t,this.iet);h=this.aet}r=h.mK()}this.het.qc(t,h,r,s,i,e)}hht(){const t=this.iet.oet(),s=t.rht();return this.aet=null,this.out=this.Uet().length<=2,s}Wit(t){this.aet=null;const s=this.iet.oet();s.nht(t),this.out=this.Uet().length<=2}x7(){return{sourceAdapterJson:this.ptt().x7(),basic:this.out}}v7(t){t&&(this.ptt().v7(t.sourceAdapterJson),this.out=t.basic)}}}{const Qn=self.ks,Jn=self.vc;Qn.Zc=class extends Qn.lr{constructor(t,s=!0){super(),this.Mr=t[0],this.aut=t[2],this.uut=[];for(const i of t[1]){const e=Qn.lut.ux(this,i);this.uut.push(e)}for(let t=0;t<this.uut.length;t++){const h=this.uut[t],r=this.uut[t+1],n=this.uut[t-1];h.qot(r),h.uat(n)}this.cut=new Map,this.fut=new Map,this.dut(),s&&Jn.Kc(this.Mr,(t,s,i,e)=>this.qc(t,s,i,e),null,{transition:this})}static ux(t){return Qn.pr(Qn.Zc,t)}mr(){for(const t of this.uut)t.mr();Qn.Qn(this.uut),this.uut=null,this.cut.clear(),this.cut=null,this.fut.clear(),this.fut=null}Xc(t){this.aut=!!t}mut(t){const s=this.fut.get(t);if(s)return s;for(const i of this.uut)if(i.gut()===t)return this.fut.set(t,i),i}yut(s){for(let t=this.uut.length-1;0<=t;t--){const i=this.uut[t],e=i.gut();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.gK();if(!h)break;if(h.gut()!==t.gut())break;t=h}return t}}}}qc(t,s,i,e){let h=t/e;if(this.aut){const M=this.mut(0),w=this.mut(1),S=s+(s+i)*M.Mut(),T=(s+i)*w.Mut(),b=T-S;return 0===e?S+b:Jn.tf(t,S,b,e)}0===e&&(h=1);let r=this.yut(h),n=r.mK();if(!n){const x=r.gK(),v=r;r=x,n=v}const o=n.gut()-r.gut(),a=Qn.Sr(h,r.gut(),n.gut(),0,o);if(r.wut()||0==o){const C=s+(s+i)*r.Mut(),I=(s+i)*n.Mut(),G=I-C;return 0==o?1===a?C+G:C:Jn.tf(a,C,G,o)}let u=r.gut(),l=r.Mut(),c=r.gut()+r.Sut(),f=r.Mut()+r.Tut(),d=n.gut()+n.but(),p=n.Mut()+n.xut(),m=n.gut(),g=n.Mut(),y=Jn.jc("spline")(a,u,l,c,f,d,p,m,g,this.cut.get(r));return(1-(y+=r.Mut()))*s+y*(s+i)}dut(){this.cut.clear();for(let t=0;t<this.uut.length-1;t++){const s=this.uut[t];if(s.iot()){const i=s,e=this.uut[t+1];if(e.eot()){const h=i.gut(),r=i.gut()+i.Sut(),n=e.gut()+e.but(),o=e.gut();this.cut.set(i,Jn.if(h,r,n,o))}}}}}}{const Vn=self.ks;Vn.lut=class extends Vn.lr{constructor(t,s){super(),this.vut=t,this.Cut=s[0],this.Iut=s[1],this.Gut=s[2],this._ut=s[3],this.Eut=s[4],this.Aut=s[5],this.wat=s[6],this.Tat=s[7],this.Dut=s[8],this.Hot=null,this.oat=null}mr(){this.vut=null}static ux(t,s){return Vn.pr(Vn.lut,t,s)}qot(t){this.Hot=t}mK(){return this.Hot}uat(t){this.oat=t}gK(){return this.oat}gut(){return this.Cut}Mut(){return this.Iut}Sut(){return this.Gut}Tut(){return this._ut}but(){return this.Eut}xut(){return this.Aut}iot(){return this.wat}eot(){return this.Tat}wut(){return"linear"===this.Dut}Nut(){return"cubic"===this.Dut}}}{const Yn=self.ks;Yn.Lut=class extends Yn.lr{constructor(t){super(),this.gf=t,this.Out=[]}mr(){for(const t of this.Out)t.mr();Yn.Qn(this.Out),this.Out=null}ux(t){this.Out.push(Yn.Zc.ux(t))}}}{const Hn=self.ks;Hn.Rut=class extends Hn.lr{constructor(t){super(),this.gf=t,this.Put=null,this.kut=null,this.kZ=t=>this.FZ(t.PB)}mr(){if(this.YZ(),this.Put){for(const t of this.Put.values())t.clear();this.Put.clear()}this.Put=null,this.gf=null}ux(t){if(this.Put||(this.Put=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.Put.has(e)||this.Put.set(e,new Map),this.Put.get(e));h.set(i,t)}}HZ(){const t=this.gf.qf();t&&t.addEventListener("instancedestroy",this.kZ)}YZ(){const t=this.gf.qf();t&&t.removeEventListener("instancedestroy",this.kZ)}Fut(){return!!this.Put&&0!==this.Put.size}jut(t,s){let i;if(i=t instanceof Hn.But?t._O():t,this.Put.has(i)){const e=this.Put.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}zut(t,s){this.kut||(this.kut=new WeakMap),this.kut.has(t)||this.kut.set(t,s)}Uut(t){if(!this.kut)return"";const s=this.kut.get(t);return s||""}FZ(t){this.kut&&this.kut.has(t)&&this.kut.delete(t)}}}{const qn=self.ks;qn.Wut=class{constructor(t){this.gf=t,this.Qut=new qn.Jut}mr(){this.Qut.mr(),this.Qut=null,this.gf=null}K4(){return this.gf}ux(t){this.Qut.Sc(t)}Vut(t){return this.Qut.si(t)}Yut(){return this.Qut.Yut()}}}{const g=self.ks;g.Hut=class{constructor(t,s,i,e,h,r,n){this.gf=h.K4(),this.qut=h,this.Zut=t,this.Xut=i,this.Kut=e,this.ey=s,this.MZ=r,this.$ut=n??r.s6().$F(),this.tlt(),this.slt=this.elt?.ilt()??-1,this.hlt=[],this.rlt=null,this.nlt=NaN,this.olt=null,this.ult=null,this.llt=null,this.clt="",this.flt=null,this.dlt="",this.plt="",this.mlt=0,this.glt=!1,this.J$=!1}mr(){this.J$||(g.Qn(this.hlt),this.hlt=null,this.gf=null,this.qut=null,this.Kut=null,this.MZ=null,this.rlt=null,this.nlt=NaN,this.olt&&this.olt.clear(),this.olt=null,this.ult=null,this.llt=null,this.clt="",this.flt=null,this.dlt="",this.plt="",this.J$=!0)}gr(){return this.J$}ylt(){return this.qut}K4(){return this.gf}nf(){return this.Zut}Mlt(){return this.Kut}Az(){return this.ey}aX(){return this.MZ||(this.MZ=this.gf.I4(this.$ut).CB()),this.MZ}wlt(){return this.Slt(this.slt)}Tlt(){const t=this.wlt();return t?t.Az():""}blt(){const t=this.wlt();return t?t.Jz():[]}xlt(t){const s=this.blt();if(!s)return!1;if(!s.length)return!1;const i=g.Hut.Ett(t);return!(!i||!i.length)&&i.every(g.Hut.Dtt,s)}vlt(t,s){const i=this.blt();if(!i)return!1;if(!i.length)return!1;const e=g.Hut.Ett(t);return!(!e||!e.length)&&e.every(t=>g.Hut.Clt.call(i,t,s))}static Dtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ett(t){return t.trim().split(" ")}static Clt(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>g.compare(t.trim(),i,s.trim()))}Ilt(t){const s=this.wlt();if(s){if(g.pe(t)){const i=s.Glt(),e=i?i[t]:void 0;if(g.pe(e))return this.Slt(e)}if("string"==typeof t)for(const h of s.Glt()){const r=this.Slt(h);if(r.Rz(t))return this.Slt(r.ilt())}}}_lt(t){const s=this.Ilt(t);return s?s.Az():""}Elt(t){const s=this.Ilt(t);return s?s.Jz():""}Alt(t){const s=this.wlt();if(!s)return-1;const i=s.Glt();if(!i)return-1;const e=this.Ilt(t);return e?i.indexOf(e.ilt()):-1}Dlt(){const t=this.wlt();if(!t)return 0;const s=t.Glt();return s?s.length:0}Slt(t){return this.Kut.Slt(t)}g0(){const t=this.Nlt();t.Llt(!0)}Llt(t){if(this.Olt()){for(const[s,i]of this.Olt().entries())i.Llt(!1);this.Olt().clear()}if(this.olt=null,this.rlt=null,this.Rlt=null,this.ult=null,this.clt="",this.flt=null,this.dlt="",this.plt="",this.hlt=[],t){this.qut.Plt(this);const e=this.elt.ilt();e!==this.slt&&this.klt(e)}else this.slt=this.elt.ilt()}Flt(){const t=this.Kut.Slt(this.slt);return t?t.Blt().jlt():0}zlt(t){const s=this.Ult(t);return s?s.nf():""}Wlt(t){let s;return g.pe(t)&&(s=this.Ult(t)),"string"==typeof t&&(s=this.Qlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Eet():""}Jlt(t){let s;if(g.pe(t)&&(s=this.Ult(t)),s="string"==typeof t?this.Qlt(t):s){const i=s.Vlt();g.pe(i)&&(this.hlt.push(this.slt),this.klt(i))}}Ylt(t){const s=this.Kut.Hlt(t);if(s){const i=this.Kut.Slt(s.ilt());i&&(this.hlt.push(this.slt),this.klt(i.ilt()))}}qlt(){const t=this.hlt.pop();g.pe(t)?this.klt(t):this.Zlt()&&(this.qut.Plt(this.Zlt(),!0,!1,!1),this.Zlt().klt(this.Xlt()),this.Nlt().Klt(this.Zlt()))}$lt(t){const s=this.wlt();if(s){s.ilt();const i=this.Ilt(t);i&&(this.hlt.push(this.slt),this.klt(i.ilt()))}}tct(s){if(g.pe(s)){const t=this.Kut.Slt(this.slt),i=t.Blt().sct();return!!i[s]}if("string"==typeof s){const e=this.Kut.Slt(this.slt),h=e.Blt().sct();for(let t=0;t<h.length;t++)if(h[t].nf()===s)return!0}return!1}ict(){this.glt=!0}ect(){return 0<this.mlt}hct(){this.mlt++}rct(){this.mlt--,0===this.mlt&&this.glt&&this.qut.nct(this)}klt(t){const i=this.slt,s=this.aX().s6();if(this.hct(),this.qut.oct(this),this.gf.Ij(g.gq.Flowchart.pq.OnBeforeAnyNodeChange,s),this.gf.Ij(g.gq.Flowchart.pq.OnBeforeTaggedNodeChange,s),this.gf.Ij(g.gq.Flowchart.pq.OnBeforeAnyNodeChangeInFlowchart,s),this.gf.Ij(g.gq.Flowchart.pq.OnBeforeTaggedNodeChangeInFlowchart,s),this.slt=t,this.gf.Ij(g.gq.Flowchart.pq.OnAnyNodeChange,s),this.gf.Ij(g.gq.Flowchart.pq.OnTaggedNodeChange,s),this.gf.Ij(g.gq.Flowchart.pq.OnAnyNodeChangeInFlowchart,s),this.gf.Ij(g.gq.Flowchart.pq.OnTaggedNodeChangeInFlowchart,s),this.qut.uct(),this.rct(),!this.gr()){const e=this.Slt(this.slt);if("reference"===e.wv()){const h=e.lct();if(this.cct(e)){this.hlt.pop();const r=this.fct(e),n=(this.qut.Plt(r,!0,!0,!1),r.dct(this,i),this.Nlt());n.Klt(r)}else{const o=e.pct();if(h){this.hlt.pop();let s=e.mct();if(s){let t=this.qut.gct(s);for(;t;)s=g.hp(s),t=this.qut.gct(s)}else{s=h+"-ref";let t=this.qut.gct(s);for(;t;)s=g.hp(s),t=this.qut.gct(s)}const a=this.qut.yct(h,o,s,this.MZ,!0),u=(a.dct(this,i),this.Mct(e,a),this.Nlt());a.wct(u),u.Klt(a)}}}}}Ult(t){const s=this.Kut.Slt(this.slt);if(!s)return null;const i=s.Blt().sct();if(!i)return null;const e=i[t];return e||null}Qlt(t){const s=this.Kut.Slt(this.slt);if(!s)return null;const i=s.Blt().Sct(t);return i||null}tlt(s){if("number"==typeof s){let t=this.Slt(s);t=t||this.Kut.Tct(),this.elt=t}else{let t=this.Kut.Hlt(this.Xut);t=t||this.Kut.Tct(),this.elt=t}}x7(){return this.glt?null:{flowchartName:this.Zut,flowchartTag:this.ey,startNodeTag:this.Xut,currentNodeId:this.slt,previousNodeIds:this.hlt,pluginUID:this.MZ.s6().$F(),reference:{previousFlowchartTag:this.Zlt()?this.Zlt().Az():"",previousStartNodeId:g.pe(this.Xlt())?this.Xlt():NaN,referencesJson:this.bct(),currentReferenceFlowchartTag:this.xct()?this.xct().Az():"",rootFlowchartTag:this.Nlt()?this.Nlt().Az():""}}}bct(){if(!this.vct())return null;const t=[];for(const[s,i]of this.Olt().entries())t.push({flowchartElementId:s.ilt(),flowchartStateTag:i.Az()});return t.length?t:null}v7(t){if(t){if(this.Zut=t.flowchartName,this.ey=t.flowchartTag,this.Xut=t.startNodeTag,this.slt=t.currentNodeId,this.hlt=t.previousNodeIds,this.$ut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.clt=s.previousFlowchartTag,this.nlt=s.previousStartNodeId,this.flt=s.referencesJson,this.dlt=s.currentReferenceFlowchartTag,this.plt=s.rootFlowchartTag}this.tlt()}}Zlt(){return"string"==typeof this.clt&&this.clt&&(this.rlt=this.qut.gct(this.clt),this.clt=""),this.rlt}Xlt(){return this.nlt}dct(t,s){this.rlt=t,this.nlt=s}xct(){return"string"==typeof this.dlt&&this.dlt&&(this.ult=this.qut.gct(this.dlt),this.dlt=""),this.ult}Klt(t){this.ult=t,this.ult===this&&(this.ult=null)}Nlt(){return"string"==typeof this.plt&&this.plt&&(this.llt=this.qut.gct(this.plt),this.plt=""),this.llt||this}wct(t){this.llt=t}vct(){return this.Cct(),!!this.olt}cct(t){return this.Cct(),this.olt&&this.olt.has(t)}Cct(){if(this.flt){this.olt&&this.olt.clear(),this.olt||(this.olt=new Map);for(const t of this.flt){const s=this.qut.gct(t.flowchartStateTag),i=s.Slt(t.flowchartElementId);this.olt.set(i,s)}this.flt=null}}Olt(){return this.Cct(),this.olt}fct(t){return this.Cct(),this.olt.get(t)}Mct(t,s){this.olt||(this.olt=new Map),this.olt.set(t,s)}}}{const Zn=self.ks;Zn.Ict=class{constructor(t){this.gf=t,this.Gct=new Map,this._ct=null,this.Ect=[],this.Act=()=>this.UZ(),this.Dct=null}mr(){Zn.Qn(this.Ect),this.Ect=null,this.Gct.clear(),this.Gct=null,this._ct=null,this.gf=null,this.Dct=null}K4(){return this.gf}yct(t,s,i,e,h,r){const n=this.gf.ylt().Vut(t);if(n){if(!this.Gct.has(i)){const o=new Zn.Hut(t,i,s,n,this,e,r);return this.Gct.set(i,o),h&&this.Plt(o,!0),o}{const a=this.Gct.get(i);a&&this.nct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}nct(t){if(t.ict(),!t.ect()){const s=t.Az();this.Gct.delete(s),t.mr(),this._ct===t&&(this._ct=null)}}Nct(t){t.g0()}gct(t){return this.Gct.get(t)}oct(t){this.Ect.push(t)}uct(){this.Ect.pop()}Plt(t,s=!1,i=!1,e=!0){if(e){const h=t.xct();t=h||t}t!==this._ct&&(this.Lct(),this.Oct(t,s,i))}Rct(t){return"string"==typeof t?this.gct(t):this.Ect.length?this.Ect[this.Ect.length-1]:this._ct}Lct(){if(this._ct&&!this._ct.gr()){const t=this._ct.aX().s6();this._ct.hct(),this.oct(this._ct),this.gf.Ij(Zn.gq.Flowchart.pq.OnBeforeFlowchartChange,t),this.uct(),this._ct.rct()}}Oct(t,s=!1,i=!1){if(this._ct=t,this._ct&&!this._ct.gr()){const e=this._ct.aX().s6();this._ct.hct(),this.oct(this._ct),this.gf.Ij(Zn.gq.Flowchart.pq.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this._ct.tlt(i),s&&(this.gf.Ij(Zn.gq.Flowchart.pq.OnAnyNodeChange,e),this.gf.Ij(Zn.gq.Flowchart.pq.OnTaggedNodeChange,e)),this.uct(),this._ct.rct()}}x7(){return{flowchartJsonObjects:[...this.Gct.values()].map(t=>t.x7()),currentFlowchartTag:this._ct?this._ct.Az():null}}v7(t){if(t){this.Dct=t;const s=new Map;for(const i of this.Dct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Gct.has(e)){const h=this.Gct.get(e);h.v7(i),s.set(e,h)}else{const r=this.yct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.v7(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Gct.entries())s.has(n)||o.mr();this.Gct.clear(),this.Gct=s,this.gf.hq()?this.gf.qf().addEventListener("afterload",this.Act):this.UZ()}}UZ(){this.gf.qf().removeEventListener("afterload",this.Act);const t=this.Gct.get(this.Dct.currentFlowchartTag);t&&this.Plt(t,!0),this.Dct=null}}}{const Xn=self.ks;Xn.Jut=class{constructor(){this.Pct=new Map}mr(){for(const t of this.Pct.values())t.mr();this.Pct.clear(),this.Pct=null}Sc(t){const s=new Xn.kct(t),i=s.nf();this.Pct.set(i,s)}si(t){return this.Pct.get(t)}Yut(){return!!this.Pct.size}static Fct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Kn=self.ks;Kn.kct=class{constructor(t){this.Mr=t[0],this.jct=new Kn.Bct(t[1],this)}mr(){this.jct.mr(),this.jct=null}zct(){return this.jct}Slt(t){return this.jct.Slt(t)}Hlt(t){return this.jct.Hlt(t)}Tct(){return this.jct.Tct()}nf(){return this.Mr}}}{const $n=self.ks;class to{constructor(t,s){this.jct=s,this.vf=t[7],this.Uct=t[0],this.ey=t[1],this.ey?this.$$=this.ey.trim().split(" ").map(t=>t.trim()):this.$$=[],this.Wct=t[2],this.Qct=null,this.Jct=null,"dictionary"===this.vf&&(this.Qct=t[3],this.Jct=t[4]),this.Vct=t[6],this.Yct=null,this.Hct=null,this.qct=null,"reference"===this.vf&&(this.Yct=t[8],this.Hct=t[9],this.qct=t[10]),this.Zct=new $n.Xct(t[5],this)}mr(){this.jct=null}zct(){return this.jct}Blt(){return this.Zct}ilt(){return this.Uct}Az(){return this.ey}Jz(){return this.$$}Rz(t){if(!this.$$)return!1;if(!this.$$.length)return!1;const s=$n.Hut.Ett(t);return!(!s||!s.length)&&s.every($n.Hut.Dtt,this.$$)}Kct(){return this.Vct}$ct(t){this.Vct=!!t}tft(){if("dictionary"===this.vf)return!0;if("reference"===this.vf)return!1;throw new Error("unexpected flowchart node type: "+this.vf)}Glt(){return this.Wct}ift(){return this.Qct}eft(){return this.Jct}wv(){return this.vf}lct(){return this.Yct}pct(){return this.Hct}mct(){return this.qct}}$n.Bct=class{constructor(t,s){this.Kut=s,this.hft=[],this.rft=new Map,this.nft=new Map,this.oft=null,$n.Jut.Fct(this.hft,t,to,this);for(const i of this.hft){const e=i.ilt(),h=i.Az(),r=i.Jz(),n=i.Kct();if(this.rft.set(e,i),h)for(const a of r)this.nft.has(a)||this.nft.set(a,new Set),this.nft.get(a).add(i);n&&(this.oft=i);const o=i.Blt();for(const u of o.aft()){const l=u.ilt();this.rft.set(l,u)}}this.oft||this.uft()}mr(){this.Kut=null;for(const t of this.hft)t.mr();$n.Qn(this.hft),this.hft=null}Mlt(){return this.Kut}Slt(t){return this.rft.get(t)}Hlt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.nft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Tct(){return this.oft}*lft(){for(const t of this.hft)yield t}uft(){let t=0;for(const s of this.lft())s.Kct()&&t++;if(0===t){for(const i of this.lft())if(i.tft()&&!i.Kct())return void i.$ct(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.lft())e.tft()&&(e.Kct()&&t?t=!1:e.Kct()&&!t&&e.$ct(!1))}}for(const h of this.lft())if(h.tft()&&h.Kct())return void(this.oft=h)}}}{const so=self.ks;class io{constructor(t,s){this.Zct=s,this.Uct=t[0],this.Mr=t[1],this.zht=t[2],this.cft=t[3]}mr(){this.Zct=null}Blt(){return this.Zct}ilt(){return this.Uct}nf(){return this.Mr}Eet(){return this.zht}Vlt(){return this.cft}}so.Xct=class{constructor(t,s){this.fft=s,this.dft=[],this.pft=new Map,so.Jut.Fct(this.dft,t,io,this);for(const i of this.dft)this.pft.set(i.nf(),i)}mr(){this.fft=null;for(const t of this.dft)t.mr();so.Qn(this.dft),this.dft=null}mft(){return this.fft}jlt(){return this.dft.length}sct(){return this.dft}Sct(t){return this.pft.get(t)}*aft(){for(const t of this.dft)yield t}}}{const eo=self.ks;eo.gft=class extends eo.lr{constructor(t){super(),this.yft=t,this.Mft=[],this.Mft.push(eo.pr(eo.wft,this)),this.iy=0,this.Sft=this.Mft[0]}mr(){for(const t of this.Mft)t.mr();eo.Qn(this.Mft),this.Sft=null,this.yft=null}jF(){return this.yft}JP(){return this.Sft}Tft(){return this.Mft[this.iy-1]}oc(){this.JP().oc()}bft(){const t=this.Mft,s=++this.iy;if(s===t.length){const i=eo.pr(eo.wft,this);t.push(i),this.Sft=i}else{const e=t[s];e.g0(),this.Sft=e}}xft(){const t=this.Mft,s=++this.iy,i=(s===t.length&&t.push(eo.pr(eo.wft,this)),t[s]);i.R0(t[s-1]),this.Sft=i}nW(){this.Sft=this.Mft[--this.iy]}vft(i){const e=this.Mft;for(let t=0,s=e.length;t<s;++t)e[t].vft(i)}}}{const ho=self.ks;ho.wft=class extends ho.lr{constructor(t){super(),this.Mft=t,this.yft=this.Mft.jF(),this.Cft=this.yft.K4().b3(),this.Ift=!0,this.q8=[],this.Gft=[]}mr(){this._ft(),this.Mft=null,this.yft=null,this.Cft=null}_ft(){ho.Qn(this.q8),ho.Qn(this.Gft)}jF(){return this.yft}Eft(){return this.Ift}Aft(){return this.Ift?!!this.yft.YP():!!this.q8.length}QP(){return this.Ift?this.yft.QP():this.q8}Dft(){return!!this.Gft.length}Nft(){return this.Gft}Lft(){const t=this.QP();return t.length?t:this.Gft}g0(){this.Ift=!0,ho.Qn(this.Gft)}oc(){this.Ift=!0}R0(t){t.Eft()?this.g0():(this.Ift=!1,ho.Hn(this.q8,t.q8),ho.Qn(this.Gft))}Oft(t){this.q8.push(t)}Rft(t){this.Gft.push(t)}Pft(t){this.Ift=!!t}kft(){return this.q8}Fft(){return this.Gft}jft(t){this.Ift=!1,ho.Qn(this.q8),this.q8.push(t)}Bft(t){this.Ift=!1,ho.Hn(this.q8,t)}zft(t){this.Ift=!1,ho.Qn(this.q8);for(const s of t)this.q8.push(s)}Uft(t,s){for(const i of s)t.has(i)||this.Gft.push(i)}Wft(t){for(const s of t)this.q8.push(s);ho.$n(this.Gft,t)}Qft(){ho.Qn(this.Gft)}Jft(t){if(t)if(this.Cft.HU().m3().Vft()){this.Eft()&&(ho.Qn(this.q8),ho.Hn(this.Gft,t.jF().QP()),this.Ift=!1);const s=this.Gft.indexOf(t);-1!==s&&(this.q8.push(this.Gft[s]),this.Gft.splice(s,1))}else this.jft(t)}vft(t){ho.$n(this.q8,t),ho.$n(this.Gft,t)}}}{const ro=self.ks;ro.Yft=class extends ro.lr{constructor(t){super(),this.Hft=t,this.gf=this.Hft.K4(),this.Mft=[],this.Mft.push(ro.pr(ro.qft,this,null)),this.iy=0,this.Zft=[]}mr(){for(const t of this.Mft)t.mr();ro.Qn(this.Mft),ro.Qn(this.Zft),this.Hft=null,this.gf=null}o3(){return this.Hft}K4(){return this.gf}HU(){return this.Mft[this.iy]}Xft(){return this.Mft}Kft(){return this.iy}qU(t){const s=this.Mft,i=++this.iy;if(i===s.length){const e=ro.pr(ro.qft,this,t);return s.push(e),e}{const h=s[i];return h.g0(t),h}}nW(){--this.iy}$ft(t){this.Zft.push(t)}t0t(){this.Zft.pop()}T3(){const t=this.Zft;return 0===t.length?null:t.at(-1)}}}{const no=self.ks;no.qft=class extends no.lr{constructor(t,s){super(),this.Mft=t,this.gf=this.Mft.K4(),this.s0t=s,this.i0t=0,this.e0t=0,this.h0t=!1,this.r0t=!1,this.n0t=null,this.o0t=0,this.a0t=0,this.u0t=null}mr(){this.g0(null),this.Mft=null,this.gf=null}g0(t){this.s0t=t,this.i0t=0,this.e0t=0,this.h0t=!1,this.r0t=!1,this.u0t=null}l0t(t,s){this.s0t=t,this.i0t=0,this.e0t=s}c0t(){this.i0t=0,this.e0t=0}m3(){return this.s0t}f0t(t){this.s0t=t}d0t(){return this.i0t}p0t(t){this.i0t=t}m0t(){return this.e0t}g0t(t){this.e0t=t}y0t(t){this.h0t=!!t}M0t(){return this.h0t}w0t(t){this.r0t=!!t}S0t(){return this.r0t}T0t(t){this.n0t=t}b0t(){return this.n0t}x0t(t,s){this.o0t=t,this.a0t=s}x3(){return this.o0t}v3(t){this.a0t=t}v0t(){return this.a0t}C0t(){const t=this.s0t;return!!t.I0t()||this.i0t<t.G0t()-1&&!!t.YU().length}_0t(t){this.u0t=t}E0t(){return this.u0t}}}{const oo=self.ks;oo.A0t=class extends oo.lr{constructor(t){super(),this.Hft=t,this.gf=this.Hft.K4(),this.Mft=[],this.iy=-1,this.Sft=null,this.D0t=[]}mr(){oo.Qn(this.Mft),this.Hft=null,this.gf=null}N0t(t){this.D0t=t;const s=this.D0t.slice(0);this.Mft.push(s),this.iy=0,this.Sft=s}o3(){return this.Hft}K4(){return this.gf}L0t(){return this.Sft}qU(){const t=++this.iy,s=this.Mft;t===s.length?s.push(this.D0t.slice(0)):oo.Hn(s[t],this.D0t),this.Sft=s[t]}nW(){this.Sft=this.Mft[--this.iy]}}}{const ao=self.ks;ao.O0t=class extends ao.lr{constructor(t){super(),this.Hft=t,this.gf=this.Hft.K4(),this.Mft=[],this.iy=-1}mr(){ao.Qn(this.Mft),this.Hft=null,this.gf=null}o3(){return this.Hft}K4(){return this.gf}R0t(){return 0<=this.iy}L0t(){return this.Mft[this.iy]}qU(){if(++this.iy,this.iy===this.Mft.length){const t=ao.pr(ao.P0t,this);return this.Mft.push(t),t}{const s=this.Mft[this.iy];return s.g0(),s}}nW(){--this.iy}k0t(s){const i=this.Mft;for(let t=this.iy;0<=t;--t){const e=i[t];if(e.nf()===s)return e}return null}F0t(){return this.Mft.slice(0,this.iy+1)}}}{const uo=self.ks;uo.P0t=class extends uo.lr{constructor(t){super(),this.j0t=t,this.Mr="",this.iy=0,this.B0t=!1,this.z0t=NaN}g0(){this.Mr="",this.iy=0,this.B0t=!1,this.z0t=NaN}XU(t){this.Mr=t}nf(){return this.Mr}eW(t){this.iy=t}_O(){return this.iy}Lz(){this.B0t=!0}rW(){return this.B0t}U0t(t){this.z0t=t}W0t(){return this.z0t}}}{const lo=self.ks;lo.Q0t=class extends lo.lr{constructor(){super(),this.Mft=[],this.iy=-1}mr(){lo.Qn(this.Mft)}L0t(){return this.Mft[this.iy]}qU(){if(++this.iy,this.iy!==this.Mft.length)return this.Mft[this.iy];{const t=[];return this.Mft.push(t),t}}nW(){--this.iy}}}{let t=function(t,s){return t._O()-s._O()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const co=self.ks;co.J0t=class extends co.lr{constructor(t){super(),this.gf=t,this.V0t=[],this.Y0t=new Map,this.H0t=[],this.q0t=new Map,this.Z0t=new Map,this.X0t=new Map,this.K0t=new Map,this.$0t=new Map,this.t1t=new Map,this.s1t=0,this.i1t=[],this.e1t=[],this.h1t=[],this.r1t=new Map,this.n1t=new Map,this.Cft=co.pr(co.Yft,this),this.o1t=co.pr(co.A0t,this),this.j0t=co.pr(co.O0t,this),this.a1t=[],this.u1t=[],this.l1t=[],this.c1t=0,this.f1t=0,this.d1t=0,this.p1t=[],this.m1t=[],this.g1t=[],this.y1t=new Map,this.M1t=new Map,self.c3_callFunction=(t,s)=>this.w1t(t,s)}mr(){this.Gq(),this.Cft.mr(),this.Cft=null,this.o1t.mr(),this.o1t=null,co.Qn(this.u1t),co.Qn(this.l1t),this.gf=null,co.Qn(this.V0t),this.Y0t.clear()}ux(t){const s=co.pr(co.S1t,this,t);this.V0t.push(s),this.Y0t.set(s.nf().toLowerCase(),s)}T1t(t){this.a1t.push(t)}b1t(){for(const t of this.n1t.values())t.x1t();for(const s of this.r1t.values())s.b1t();for(const i of this.n1t.values())i.b1t();for(const e of this.V0t)e.b1t();for(const h of this.V0t)h.V9();for(const r of this.a1t)r.b1t(!1);co.Qn(this.a1t),this.o1t.N0t(this.h1t)}K4(){return this.gf}J9(t){return this.Y0t.get(t.toLowerCase())||null}v1t(t){this.H0t.push(t),this.q0t.set(t.C1t(),t)}I1t(t){this.Z0t.set(t.nY(),t)}G1t(t){this.X0t.set(t.nY(),t)}_1t(t){this.K0t.set(t.nY(),t)}E1t(t){switch(t.A1t()){case 0:this.r1t.set(t.D1t().toLowerCase(),t);break;case 1:this.n1t.set(t.D1t().toLowerCase(),t)}}N1t(t){this.t1t.set(t.nY(),t),(t.FV()?this.i1t:this.e1t).push(t)}L1t(i){2<=i.length&&i.sort(t);let e=this.$0t.get(i.length);e||(e=[],this.$0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}O1t(t){return this.h1t.push(t.R1t()),this.s1t++}b3(){return this.Cft}P1t(){return this.b3().HU()}m3(){return this.P1t().m3()}k1t(){const t=this.P1t(),s=t.m3();return s.F1t(t.d0t())}j1t(){const t=this.P1t(),s=t.m3();return s.B1t(t.m0t())}z1t(){return this.o1t}ZU(){return this.j0t}U1t(t){const s=[];for(t=t.W1t();t;)co.Kh(s,t.Q1t()),t=t.W1t();return s}J1t(t){const s={};for(const i of this.U1t(t))s[i.V1t()]=i.Y1t();return Object.create(Object.prototype,s)}H1t(t){return this.t1t.get(t)||null}q1t(t){return this.Z0t.get(t)||null}Z1t(t){return this.X0t.get(t)||null}X1t(t){return this.K0t.get(t)||null}a3(t){return this.r1t.get(t.toLowerCase())||null}K1t(t,s){let i=this.n1t.get((t.nf()+"."+s).toLowerCase());if(i)return i;if(!t.KV())for(const e of t.$1t())if(i=this.n1t.get((e.nf()+"."+s).toLowerCase()))return i;return null}tdt(){return this.i1t}sdt(){return this.e1t}idt(t){for(const s of this.i1t)s.edt();if(t)for(const i of this.e1t)i.nb()&&i.edt()}hdt(t){return this.q0t.get(t.toLowerCase())||null}rdt(t){const s=this.Z0t.get(t);return s&&s.ndt()?s:null}odt(){return this.H0t}adt(){for(const t of this.H0t)t.udt()}ldt(){for(const t of this.V0t)t.cdt()}fdt(t){this.ldt(),this.c1t++;for(const s of t.lZ()){const i=s.w9();i&&(this.gf.ddt(s),i.RI(),this.gf.pdt())}this.c1t--}async mdt(t){this.ldt(),this.c1t++;for(const s of this.gdt(t))await this.gf.ydt(s);this.c1t--}*gdt(t){for(const s of t.lZ()){const i=s.w9();i&&(this.gf.ddt(s),yield*i.Mdt(),this.gf.pdt())}}wdt(t,s,i,e){let h=!1;if(!t.a4())return this.Sdt(s,i,e);this.f1t++;for(const r of t.lZ()){const n=r.w9();if(n){this.gf.ddt(r);for(const a of n.Tdt()){const u=a.wdt(s,i,e);h=h||u}const o=n.wdt(s,i,e);h=h||o,this.gf.pdt()}}return this.f1t--,h}*bdt(t,s,i,e){let h=!1;if(!t.a4())return this.Sdt(s,i,e);this.f1t++;for(const r of t.lZ()){const n=r.w9();if(n){this.gf.ddt(r);for(const a of n.Tdt()){const u=yield*a.bdt(s,i,e);h=h||u}const o=yield*n.bdt(s,i,e);h=h||o,this.gf.pdt()}}return this.f1t--,h}Sdt(t,s,i){return this.u1t.push([t,s,i]),!1}xdt(t,s,i){let e=null,h=new Promise(t=>e=t);return this.l1t.push([t,s,i,e]),h}*vdt(){if(this.gf.Cdt())throw new Error("should not be in breakpoint");const t=this.gf.c4();for(;this.l1t.length;){const[s,i,e,h]=this.l1t.shift(),r=yield*this.bdt(t,s,i,e);h(r)}}async Idt(){for(const t of this.vdt())await this.gf.ydt(t)}Gdt(t,i,e,h){let r=!1,s=t.a4(),n=s.w9();if(n){this.f1t++,this.gf.ddt(s);const o=n.Tdt();for(let t=0,s=o.length;t<s;++t){const u=o[t].Gdt(i,e,h);r=r||u}const a=n.Gdt(i,e,h);return r=r||a,this.gf.pdt(),this.f1t--,r}}*_dt(t,i,e,h){let r=!1,s=t.a4(),n=s.w9();if(n){this.f1t++,this.gf.ddt(s);const o=n.Tdt();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t]._dt(i,e,h);r=r||u}const a=yield*n._dt(i,e,h);return r=r||a,this.gf.pdt(),this.f1t--,r}}Edt(){return this.f1t}Adt(){return 0<this.Edt()}Ddt(){return++this.f1t}Ndt(){--this.f1t}Ldt(){return 0<this.c1t}$P(){return this.Ldt()||this.Adt()}yq(t){for(const[s,i,e]of this.u1t)this.wdt(t,s,i,e);co.Qn(this.u1t)}XP(t){t?this.d1t++:this.d1t--}YF(){return 0<this.d1t}Odt(i){for(let t=0,s=i.length;t<s;++t)i[t].Rdt().oc()}Pdt(i){for(let t=0,s=i.length;t<s;++t)i[t].Rdt().bft()}tW(i){for(let t=0,s=i.length;t<s;++t)i[t].Rdt().xft()}iW(i){for(let t=0,s=i.length;t<s;++t)i[t].Rdt().nW()}g3(s){const i=new Set,e=this.Cft.Xft(),h=this.Cft.Kft();for(let t=0;t<=h;++t){const r=e[t].E0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}kdt(t){const s=new Set([...t]),i=this.g3(s);if(0<i.size){for(const e of i)e.Rdt().bft();return[...i]}return null}Fdt(){const t=co.pr(co.jdt,this);return this.p1t.push(t),t}Bdt(){return this.p1t}zdt(){if(this.p1t.length){let i=this.P1t(),e=!1;this.c1t++;for(let t=0,s=this.p1t.length;t<s;++t){const h=this.p1t[t];h.Udt()&&h.Wdt(i),h.Qdt()&&(e=!0)}e&&(this.Jdt(),i.g0(null)),this.c1t--}}async Vdt(){if(this.p1t.length){let i=this.P1t(),e=!1;this.c1t++;for(let t=0,s=this.p1t.length;t<s;++t){const h=this.p1t[t];h.Udt()&&await h.Ydt(i),h.Qdt()&&(e=!0)}e&&(this.Jdt(),i.g0(null)),this.c1t--}}Jdt(){const t=co.Kn(this.p1t,t=>t.Qdt());for(const s of t)s.mr()}Gq(){for(const t of this.p1t)t.mr();co.Qn(this.p1t)}Hdt(t){for(const s of this.p1t)s.vft(t);for(const i of t){const e=this.M1t.get(i);if(this.M1t.delete(i),e)for(const{resolve:h}of e.qdt.values())h(!0)}}Zdt(t){this.m1t.push({promise:t,Xdt:this.Edt()})}Kdt(){co.Qn(this.m1t)}$dt(){const s=this.Edt();this.m1t=this.m1t.filter(t=>t.Xdt<=s)}tpt(){const t=Promise.all(this.m1t.map(t=>t.promise));return this.m1t=[],t}C3(t){const s=t.toLowerCase();this.g1t.push(s),this.gf.Ij(co.gq.mq.pq.spt,null),this.g1t.pop();for(const e of this.gf.o3().Bdt())e.ipt()&&e.ept()===s&&e.hpt();const i=this.y1t.get(s);i&&(i.resolve(),this.y1t.delete(s))}G3(t){const i=t.toLowerCase(),s=this.y1t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.y1t.set(i,{promise:t,resolve:s}),t}}rpt(){if(0===this.g1t.length)throw new Error("not in a signal");return this.g1t.at(-1)}npt(t){let s=this.M1t.get(t);return s||(s={opt:[],qdt:new Map},this.M1t.set(t,s)),s}fj(t,s){const i=this.npt(t),e=s.toLowerCase();i.opt.push(e),this.gf.Ij(t.OP().upt().pq.apt,t),i.opt.pop();for(const r of this.gf.o3().Bdt())r.lpt()&&r.ept()===e&&r.cpt(t);const h=i.qdt.get(e);h&&(h.resolve(!1),i.qdt.delete(e)),0===i.opt.length&&0===i.qdt.size&&this.M1t.delete(t)}dj(t,s){const i=this.npt(t),e=s.toLowerCase(),h=i.qdt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.qdt.set(e,{promise:t,resolve:s}),t}}fpt(t){const s=this.npt(t);if(s&&0!==s.opt.length)return s.opt.at(-1);throw new Error("not in a signal")}x7(){return{groups:this.dpt(),cnds:this.ppt(),acts:this.mpt(),vars:this.gpt(),waits:this.ypt()}}v7(t){this.Mpt(t.groups),this.wpt(t.cnds),this.Spt(t.acts),this.Tpt(t.vars),this.bpt(t.waits)}dpt(){const t={};for(const s of this.odt())t[s.nY().toString()]=s.xpt();return t}Mpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.rdt(e);h&&h.vpt(i)}}ppt(){const t={};for(const[s,i]of this.X0t){const e=i.x7();e&&(t[s.toString()]=e)}return t}wpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.X0t)r.v7(s.get(h)||null)}mpt(){const t={};for(const[s,i]of this.K0t){const e=i.x7();e&&(t[s.toString()]=e)}return t}Spt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.K0t)r.v7(s.get(h)||null)}gpt(){const t={};for(const[s,i]of this.t1t)i.Cpt()||!i.FV()&&!i.nb()||(t[s.toString()]=i.Eet());return t}Tpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.H1t(e);h&&h.cht(i)}}ypt(){return this.p1t.filter(t=>!t.Ipt()).map(t=>t.x7())}bpt(t){this.Gq();for(const s of t){const i=co.jdt.Gpt(this,s);i&&this.p1t.push(i)}}_pt(){return[...this.gf.c4().lZ()].map(t=>t.w9()).filter(t=>t).map(t=>t.Ept())}Apt(t){for(;t;){const s=t.W1t();if(s instanceof co.Dpt)return s;t=s}return null}w1t(t,s){Array.isArray(s)||(s=[]);const i=this.a3(t.toLowerCase());if(!i)return null;if(!i.hc())return i.u3();const e=i.Npt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].R1t()),s.length<e.length;);const h=i.f3();return h.y3(h.d3(),!1,i.w3(),i.u3(),...s)}}}{const fo=self.ks;fo.S1t=class extends fo.lr{constructor(t,s){super(),this.Hft=t,this.gf=t.K4(),this.Mr=s[0],this.Lpt=[],this.Opt=new Map,this.Rpt=new Map,this.Ppt=new Map,this.kpt=!1,this.Fpt=[],this.jpt=[],this.Bpt=new Set;for(const i of s[1])this.zpt(i,null,this.Lpt);this.Upt=this.gf.Rj()?{type:"sheet",name:this.Mr,Wpt:0,children:[]}:null}mr(){this.Hft=null,this.gf=null}zpt(t,s,i){switch(t[0]){case 0:case 3:this.Qpt(t,s,i);break;case 1:this.Jpt(t,s,i);break;case 2:this.Vpt(t,s,i);break;case 4:this.Ypt(t,s);break;case 5:this.Hpt(t,s,i);break;case 6:this.qpt(t,s);break;default:throw new Error("invalid event type")}}Qpt(t,s,i){const e=fo.Zpt.ux(this,s,t);if(e.Vft()){i.push(e);const h=e.Xpt();for(let t=0,s=h.length;t<s;++t)h[t].Kpt()&&this.$pt(e,t)}else e.Kpt()?this.$pt(e,0):i.push(e)}Ypt(t,s){const i=fo.Dpt.tmt(this,s,t);this.Hft.E1t(i)}qpt(t,s){const i=fo.Dpt.smt(this,s,t);this.Hft.E1t(i)}Jpt(t,s,i){const e=fo.imt.ux(this,s,t);i.push(e)}Vpt(t,s,i){const e=fo.emt.ux(this,s,t);i.push(e)}Hpt(t,s,i){const e=fo.hmt.ux(this,s,t);i.push(e)}$pt(h,r){h.Vft()||this.Hft.T1t(h);const n=h.F1t(r),o=n.rmt(),a=n.jF();if(n.nmt()){let t=this.Rpt.get(a),s=(t||(t=new Map,this.Rpt.set(a,t)),n.omt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.Opt.get(a),s=(t||(t={amt:new Map,umt:new Map},this.Opt.set(a,t)),n.RB()),i,e=(s?(i=t.umt.get(s))||(i=new Map,t.umt.set(s,i)):i=t.amt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}b1t(){const i=this.Lpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof fo.Zpt&&i[t+1].lmt();i[t].b1t(e)}}cmt(t){this.Fpt.push(t)}V9(){fo.Qn(this.jpt),this.fmt(this),this.Bpt.clear()}fmt(t){const s=t.jpt,i=t.Bpt;for(const e of this.Fpt){const h=e.dmt();e.pmt()&&t!==h&&!i.has(h)&&(i.add(h),h.fmt(t),s.push(h))}}Tdt(){return this.jpt}o3(){return this.Hft}K4(){return this.gf}nf(){return this.Mr}mmt(t,s){this.Ppt.set(s,t)}gmt(t){return this.Ppt.get(t)||null}cdt(){this.kpt=!1}RI(){if(!this.kpt){const t=this.gf,s=t.ymt(),i=s?performance.now():0,e=(this.kpt=!0,this.o3()),h=e.P1t();for(const r of this.Lpt)r.RI(h),e.Odt(r.YU()),e.Kdt(),t.ik();h.g0(null),s&&(this.Upt.Wpt+=performance.now()-i)}}*Mdt(){if(!this.kpt){this.kpt=!0;const t=this.gf,s=this.o3(),i=s.P1t();for(const e of this.Lpt)yield*e.Mdt(i),s.Odt(e.YU()),s.Kdt(),t.ik();i.g0(null)}}wdt(e,h,r){if(!h)return this.Mmt(e,h,null,null);{let t=h.jF(),s=!1,i=this.Mmt(e,h,t,r);s=s||i;for(const n of t.$1t())i=this.Mmt(e,h,n,r),s=s||i}}Mmt(t,s,i,e){const h=this.Opt.get(i);if(!h)return!1;const r=e?h.umt.get(e):h.amt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){const l=this.wmt(s,a,u);o=o||l}return o}*bdt(e,h,r){if(!h)return yield*this.Smt(e,h,null,null);{let t=h.jF(),s=!1,i=yield*this.Smt(e,h,t,r);s=s||i;for(const n of t.$1t())i=yield*this.Smt(e,h,n,r),s=s||i}}*Smt(t,s,i,e){const h=this.Opt.get(i);if(!h)return!1;const r=e?h.umt.get(e):h.amt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){let t;t=a.Tmt()?this.wmt(s,a,u):yield*this.bmt(s,a,u),o=o||t}return o}Gdt(t,s,i){const e=s.jF(),h=this.Rpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=this.wmt(null,a[0],a[1]);o=o||u}return o}*_dt(t,s,i){const e=s.jF(),h=this.Rpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Tmt()?this.wmt(null,s,i):yield*this.bmt(null,s,i),o=o||e}return o}wmt(t,s,i){let e=this.gf,h=this.Hft,r=h.m3(),n=h.b3(),o=h.Edt(),a=!1;r&&h.Pdt(r.d3()),h.Pdt(s.d3());const u=1<o,l=(u&&h.z1t().qU(),n.qU(s));if(t){const f=s.Xpt()[i].jF(),d=f.JP();d.jft(t),t.XF()&&t.xmt()}let c=!0;if(s.A5()){const p=s.vmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Cmt(l)){c=!1;break}}return c&&(s.Vft()?s.Imt(l,i):s.RI(l),a=l.M0t()),n.nW(),u&&h.z1t().nW(),h.iW(s.d3()),r&&h.iW(r.d3()),r||1!==o||(h.Kdt(),h.YF())||e.ik(),a}*bmt(t,s,i){let e=this.gf,h=this.Hft,r=h.m3(),n=h.b3(),o=h.Edt(),a=!1;r&&h.Pdt(r.d3()),h.Pdt(s.d3());const u=1<o,l=(u&&h.z1t().qU(),n.qU(s));if(t){const f=s.Xpt()[i].jF(),d=f.JP();d.jft(t),t.XF()&&t.xmt()}let c=!0;if(s.A5()){const p=s.vmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Gmt(l))){c=!1;break}}return c&&(s.Vft()?yield*s._mt(l,i):yield*s.Mdt(l),a=l.M0t()),n.nW(),u&&h.z1t().nW(),h.iW(s.d3()),r&&h.iW(r.d3()),r||1!==o||(h.Kdt(),h.YF())||e.ik(),a}Ept(){return this.Upt}}}{let l=function(t,s){return!0};l;const po=self.ks,mo=[];function*F(t,s){return!0}po.Zpt=class extends po.lr{constructor(t,s,i){super(),this.k7=t,this.gf=t.K4(),this.Emt=s,this.Amt=null,this.Cft=this.gf.o3().b3(),this.Dmt=[],this.Nmt=[],this.Lmt=!1,this.Omt=!1,this.Rmt=!1,this.Pmt=!1,this.kmt=!!i[2],this.Fmt=!1,this.jmt=null,this.Bmt=[],this.Jht=[],this.zmt=[],this.Umt=l,this.Wmt=F,this.Qmt=!1,this.Jmt=!1,this.Vmt="",this.Ymt=!1,this.Hmt=null,this.Upt=null,this._J=i[4],this.qmt=i[5],this.k7.mmt(this,this.qmt),this.Zmt=this.gf.Rj()?{Xmt:i[3][0],Kmt:i[3][1],$mt:!1,tgt:!1,sgt:!1,igt:!1}:null,this.o3().I1t(this),3===i[0]&&this.egt(i[1]);let e=0;for(const h of i[6]){const r=po.hgt.ux(this,h,e++);this.Bmt.push(r),this.rgt(r.jF())}e=0;for(const n of i[7]){const o=po.ngt.ux(this,n,e++);this.Jht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.k7.zpt(u,this,this.zmt)}this.Bmt.length&&(this.Fmt=null===this.Bmt[0].jF()&&this.Bmt[0].rmt()===po.gq.mq.pq.ogt),0===this.Bmt.length&&(this.Bmt=mo),0===this.Jht.length&&(this.Jht=mo),0===this.zmt.length&&(this.zmt=mo)}static ux(t,s,i){return po.pr(po.Zpt,t,s,i)}egt(t){this.Qmt=!0,this.Jmt=!!t[0],this.Ymt=this.Jmt,this.Vmt=t[1].toLowerCase(),this.Hmt=[],this.o3().v1t(this),this.gf.Rj()&&(this.Upt={type:"group",name:t[1],Wpt:0,children:[]})}agt(t){this.Hmt.push(t)}ugt(t,s){for(const i of t.N9().wq())s.includes(i)||s.push(i)}lgt(t,s){if(t)if(s.includes(t)||s.push(t),t.KV())for(const i of t.cgt())i.XF()&&this.ugt(i,s);else t.XF()&&this.ugt(t,s)}rgt(t){this.lgt(t,this.Dmt)}fgt(t){this.lgt(t,this.Nmt)}dgt(){this.Dmt=this.gf.XV()}b1t(t){this.Pmt=!!t,this.pgt(),this.mgt();for(const s of this.Bmt)s.b1t();if(0<this.Jht.length){let t=!1;for(const e of this.Jht)e.b1t(),e.ggt()&&(t=!0);t?(this.Umt=this.ygt,this.Wmt=this.Mgt):(this.Umt=this.wgt,this.Wmt=this.Sgt)}const i=this.zmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof po.Zpt&&i[t+1].lmt();i[t].b1t(h)}this.Zmt&&this.Tgt(),this.Upt&&this.bgt().Ept().children.push(this.Upt)}Ept(){return this.Upt}bgt(){let t=this.A5();for(;t;){if(t.ndt())return t;t=t.A5()}return this.k7}Tgt(){const t=this.Zmt;t.$mt=this.Bmt.every(t=>t.Tmt()),t.tgt=this.Jht.every(t=>t.Tmt()),t.sgt=this.zmt.every(t=>t.Tmt()),t.igt=t.$mt&&t.tgt&&t.sgt}xgt(){let t=this;for(;t.Tgt(),t=t.A5(););}pgt(){if(this.ndt()){let t=this.A5();for(this.Rmt=!0;t;){if(!t.ndt()){this.Rmt=!1;break}t=t.A5()}}}vgt(){const t=this.gf.XV();if(this.Dmt===t)this.Nmt=t;else{this.Nmt=po.ho(this.Dmt);let t=this.A5();for(;t;){for(const i of t.Dmt)this.fgt(i);t=t.A5()}const s=this.o3();this.Dmt=s.L1t(this.Dmt),this.Nmt=s.L1t(this.Nmt)}}mgt(){if(this.Cgt()){this.jmt=[];let t=this.A5();for(;t;)this.jmt.push(t),t=t.A5();this.jmt.reverse()}}Igt(){this.Omt=!0,this.Emt&&this.Emt.Igt()}I0t(){return this.Omt}YU(){return this.Dmt}d3(){return this.Lmt||(this.Lmt=!0,this.vgt()),this.Nmt}Ggt(t){return this.Dmt.includes(t)}vmt(){return this.jmt}w9(){return this.k7}o3(){return this.k7.o3()}K4(){return this.gf}A5(){return this.Emt}_gt(t){this.Amt=t}W1t(){return this.Amt||this.Emt}Egt(){return this.qmt}Agt(){return this.Zmt&&this.Zmt.Kmt}Dgt(){return this.Agt()&&this.Zmt.Xmt}Ngt(t){this.Zmt.Xmt=!!t,this.xgt()}ndt(){return this.Qmt}Lgt(){return this.Rmt}lmt(){return this.Fmt}Ogt(){return this.Pmt}C1t(){return this.Vmt}xpt(){return this.Ymt}udt(){this.vpt(this.Jmt)}vpt(t){if(t=!!t,!this.Qmt)throw new Error("not a group");if(this.Ymt!==t){this.Ymt=t;for(const s of this.Hmt)s.Rgt();if(this.Hmt.length){const i=this.gf.E4(),e=i.w9();e&&e.V9()}}}nY(){return this._J}Vft(){return this.kmt}Kpt(){return this.Bmt.length&&this.Bmt[0].Kpt()}Pgt(){return this.Amt&&this.Amt instanceof po.Dpt}Cgt(){return this.Pgt()||this.Bmt.some(t=>t.Kpt())}Xpt(){return this.Bmt}G0t(){return this.Bmt.length}F1t(t){if((t=Math.floor(t))<0||t>=this.Bmt.length)throw new RangeError("invalid condition index");return this.Bmt[t]}kgt(t){return this.F1t(t)}Fgt(t){let s=t._O();if(0!==s){--s;const i=t.jgt()?t.Bgt():t.jF();for(;0<=s;--s){const e=this.Bmt[s];if(i===e.jF()||e.jgt()&&e.Bgt()===i)return!1}}return!0}zgt(){return this.Jht}Ugt(){return this.Jht.length}B1t(t){if((t=Math.floor(t))<0||t>=this.Jht.length)throw new RangeError("invalid action index");return this.Jht[t]}Wgt(s){s=Math.floor(s);const t=this.Jht.find(t=>t.Qgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Jgt(t){return 0<=(t=Math.floor(t))&&t<this.Jht.length}Vgt(){return this.zmt}Q1t(){return this.zmt.filter(t=>t instanceof po.imt)}Cmt(i){i.f0t(this);let e=this.Bmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.p0t(t),r.qB())throw new Error("trigger cannot be used as sub-event to a loop");if(r.RI())h=!0;else if(!this.kmt)return!1}return!this.kmt||h}Imt(t,s){t.f0t(this),t.p0t(s),this.Bmt[s].RI()&&(this.Umt(t,0)&&this.Ygt(t),t.y0t(!0))}*Gmt(i){i.f0t(this);let e=this.Bmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.p0t(t),r.qB())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Tmt()?r.RI():yield*r.Mdt())h=!0;else if(!this.kmt)return!1}return!this.kmt||h}*_mt(t,s){t.f0t(this),t.p0t(s);let i=this.Bmt[s];if(i.Tmt()?i.RI():yield*i.Mdt())(this.Hgt()?this.Umt(t,0):yield*this.Wmt(t,0))&&(this.qgt()?this.Ygt():yield*this.Zgt()),t.y0t(!0)}RI(t){t.f0t(this),this.Fmt||t.w0t(!1),this.kmt?this.Xgt(t):this.Kgt(t)}*Mdt(t){(this.Dgt()||this.gf.$gt())&&(yield this),t.f0t(this),this.Fmt||t.w0t(!1),this.kmt?yield*this.tyt(t):yield*this.syt(t)}Xgt(i){let e=this.Bmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.Kpt()){i.p0t(t);const n=r.RI();h=h||n}}i.y0t(h),h&&(this.Umt(i,0)&&this.Ygt(i),this.Pmt)&&i.w0t(!0)}*tyt(i){let e=this.Bmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.Kpt()){i.p0t(s);let t;t=r.Tmt()?r.RI():yield*r.Mdt(),h=h||t}}if(i.y0t(h),h)(this.Hgt()?this.Umt(i,0):yield*this.Wmt(i,0))&&(this.qgt()?this.Ygt():yield*this.Zgt()),this.Pmt&&i.w0t(!0)}Kgt(i){const e=this.Bmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.p0t(t),h.RI());if(!r)return void i.y0t(!1)}i.y0t(!0),this.Umt(i,0)&&this.Ygt(i),i.M0t()&&this.Pmt&&i.w0t(!0)}*syt(i){const e=this.Bmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.p0t(t);if(!(h.Tmt()?h.RI():yield*h.Mdt()))return void i.y0t(!1)}i.y0t(!0);(this.Hgt()?this.Umt(i,0):yield*this.Wmt(i,0))&&(this.qgt()?this.Ygt():yield*this.Zgt()),i.M0t()&&this.Pmt&&i.w0t(!0)}wgt(i,e){const h=this.Jht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.g0t(t),r.RI()}return!0}*Sgt(i,e){const h=this.Jht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.g0t(t),r.Tmt()?r.RI():yield*r.Mdt()}return!0}ygt(i,e){const h=this.o3(),r=this.Jht;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.g0t(t),n.RI());if(n.iyt()&&!0===o)return!1;n.eyt()&&o instanceof Promise&&h.Zdt(o)}return!0}*Mgt(i,e){const h=this.o3(),r=this.Jht;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.g0t(s);let t;if(t=n.Tmt()?n.RI():yield*n.Mdt(),n.iyt()&&!0===t)return!1;n.eyt()&&t instanceof Promise&&h.Zdt(t)}return!0}hyt(t){this.Umt(t,t.m0t())&&this.Ygt()}*ryt(t){(yield*this.Wmt(t,t.m0t()))&&(yield*this.Zgt())}Ygt(){if(this.zmt.length){const t=this.ndt()&&this.gf.ymt(),s=t?performance.now():0,i=this.Cft,e=i.qU(this);this.Omt?this.nyt(e):this.oyt(e),i.nW(),t&&(this.Upt.Wpt+=performance.now()-s)}}nyt(e){const h=this.Qmt,r=this.Rmt,n=this.o3(),o=this.zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.YU(),l=!r||!h&&t<i;l&&n.tW(u),a.RI(e),l?n.iW(u):n.Odt(u)}}oyt(i){const e=this.zmt;for(let t=0,s=e.length;t<s;++t)e[t].RI(i)}*Zgt(){if(this.zmt.length){const t=this.Cft,s=t.qU(this);this.Omt?yield*this.ayt(s):yield*this.uyt(s),t.nW()}}*ayt(e){const h=this.Qmt,r=this.Rmt,n=this.o3(),o=this.zmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.YU(),l=!r||!h&&t<i;l&&n.tW(u),yield*a.Mdt(e),l?n.iW(u):n.Odt(u)}}*uyt(i){const e=this.zmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].Mdt(i)}sW(i,e){e.c0t();const h=this.Bmt;if(!this.Vft())for(let t=i.d0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.p0t(t),r.RI());if(!n)return!1}return this.Umt(e,0)&&this.Ygt(e),!0}*lyt(i,e){e.c0t();const h=this.Bmt;if(!this.Vft())for(let t=i.d0t()+1,s=h.length;t<s;++t){const r=h[t];e.p0t(t);if(!(r.Tmt()?r.RI():yield*r.Mdt()))return!1}return(this.Hgt()?this.Umt(e,0):yield*this.Wmt(e,0))&&(this.qgt()?this.Ygt():yield*this.Zgt()),!0}Tmt(){return!this.Dgt()&&!this.gf.$gt()&&this.Zmt.igt}Hgt(){return!this.gf.$gt()&&this.Zmt.tgt}qgt(){return!this.gf.$gt()&&this.Zmt.sgt}cyt(i){if(this.A5()){const e=this.vmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Cmt(i))return!1}return!0}*fyt(i){if(this.A5()){const e=this.vmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Gmt(i)))return!1}return!0}dyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.si(0));t.z1t().qU(),this.Amt.pyt(e)}else this.Amt.myt(s);else i&&t.z1t().qU()}gyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.gf,u=this.Cft,l=a.o3(),c=this.Amt,f=c.eyt(),d=l.Ddt(),p=1<d;if(this.dyt(l,s,p),n&&(i?l.tW(t):l.Pdt(t)),null!==e){if(e.yyt){const g=i?e.yyt.JP():e.yyt.Rdt().Tft(),y=e.Myt.JP();y.Bft(g.QP()),y.Qft(),i||e.Myt.wyt()}else if(e.Syt){const M=e.Syt.JP();M.Bft(e.Tyt),M.Qft()}e.byt&&(o=l.kdt(t))}const m=u.qU(this);return i&&m._0t(t),this.cyt(m)&&(m.f0t(this),f&&([r,h]=c.xyt()),this.Kgt(m),f)&&c.vyt(r),u.nW(),p&&l.z1t().nW(),null!==o&&l.iW(o),n&&l.iW(t),l.Ndt(),f||l.$dt(),h}*Cyt(t,s,i,e){let h,r,n=((this.Dgt()||this.gf.$gt())&&(yield this),0<t.length),o=null,a=this.gf,u=this.Cft,l=a.o3(),c=this.Amt,f=c.eyt(),d=l.Ddt(),p=1<d;if(this.dyt(l,s,p),n&&(i?l.tW(t):l.Pdt(t)),null!==e){if(e.yyt){const g=i?e.yyt.JP():e.yyt.Rdt().Tft(),y=e.Myt.JP();y.Bft(g.QP()),y.Qft(),i||e.Myt.wyt()}else if(e.Syt){const M=e.Syt.JP();M.Bft(e.Tyt),M.Qft()}e.byt&&(o=l.kdt(t))}const m=u.qU(this);return i&&m._0t(t),(yield*this.fyt(m))&&(m.f0t(this),f&&([r,h]=c.xyt()),yield*this.syt(m),f)&&c.vyt(r),u.nW(),p&&l.z1t().nW(),null!==o&&l.iW(o),n&&l.iW(t),l.Ndt(),f||l.$dt(),h}Iyt(t,s){const i=this.d3(),e=0<i.length,h=this.gf,r=this.Cft,n=h.o3(),o=n.Ddt(),a=1<o,u=(a&&n.z1t().qU(),this.Amt.pyt(t),e&&(s?n.tW(i):n.Pdt(i)),r.qU(this));this.cyt(u)&&(u.f0t(this),this.Kgt(u)),r.nW(),a&&n.z1t().nW(),e&&n.iW(i),n.Ndt(),n.$dt()}*Gyt(t,s){(this.Dgt()||this.gf.$gt())&&(yield this);const i=this.d3(),e=0<i.length,h=this.gf,r=this.Cft,n=h.o3(),o=n.Ddt(),a=1<o,u=(a&&n.z1t().qU(),this.Amt.pyt(t),e&&(s?n.tW(i):n.Pdt(i)),r.qU(this));(yield*this.fyt(u))&&(u.f0t(this),yield*this.syt(u)),r.nW(),a&&n.z1t().nW(),e&&n.iW(i),n.Ndt(),n.$dt()}y3(t,s,i,e,...h){let r,n,o=0<t.length,a=this.gf,u=this.Cft,l=a.o3(),c=this.Amt,f=c.eyt(),d=l.Ddt(),p=1<d,m=(p&&l.z1t().qU(),0<h.length&&this.Amt.pyt(h),o&&(s?l.tW(t):l.Pdt(t)),u.qU(this));return m.x0t(i,e),u.$ft(m),a.KU(!1),this.cyt(m)&&(m.f0t(this),f&&([n,r]=c.xyt()),this.Kgt(m),f)&&c.vyt(n),a.KU(!0),u.nW(),u.t0t(),p&&l.z1t().nW(),o&&l.iW(t),l.Ndt(),f||l.$dt(),r||m.v0t()}}}{let e=self.ks,t=[],s=!1;e.hmt=class extends e.lr{constructor(t,s,i){super();const e=t.K4(),h=t.o3(),r=(this.k7=t,this.Hft=h,this.gf=t.K4(),this.Emt=s,e._yt(i[1]));this.Eyt=r,this.qmt=i[2],this.k7.mmt(this,this.qmt),this.Zmt=e.Rj()?{Xmt:i[3][0],Kmt:i[3][1]}:null}static ux(t,s,i){return e.pr(e.hmt,t,s,i)}b1t(){const t=this.Eyt,s=this.gf.o3().J1t(this);this.Eyt=t.bind(null,this.gf.nP(),s)}A5(){return this.Emt}W1t(){return this.Emt}w9(){return this.k7}Egt(){return this.qmt}Agt(){return this.Zmt&&this.Zmt.Kmt}Dgt(){return this.Agt()&&this.Zmt.Xmt}Ngt(t){this.Zmt.Xmt=!!t}lmt(){return!1}YU(){return t}d3(){return this.Emt?this.Emt.d3():t}RI(t){t.f0t(this),this.Hft.Zdt(this.Ayt())}async Ayt(){try{await this.Eyt()}catch(t){console.error(`Unhandled exception running script %c${this.w9().nf()}, event ${this.Egt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*Mdt(t){t.f0t(this),(this.Dgt()||this.gf.$gt())&&(yield this),this.RI(t)}Tmt(){return!this.Dgt()&&!this.gf.$gt()}static Dyt(){return s}static Nyt(){s=!0}}}{const go=self.ks;go.Dpt=class extends go.lr{constructor(t,s,i){super(),this.k7=t,this.gf=t.K4(),this.Emt=s,this.Lyt=0,this.Oyt="",this.Ryt=0,this.Pyt=[],this.kyt=!0,this.Fyt="",this.yft=null,this.jyt=!1,this.Byt=[],this.zyt=!1,this.Uyt=!1,this.Wyt=0,this.Qyt=-1,this.Jyt=new Map,this.Vyt=go.Zpt.ux(t,s,i),this.Vyt._gt(this)}Yyt(t){this.Lyt=0,this.Oyt=t[0],this.Ryt=t[1],this.Pyt=t[2].map(t=>go.imt.ux(this.k7,this,t)),this.kyt=t[3],this.Uyt=t[4],this.zyt=t[5]}Hyt(t){this.Lyt=1,this.Fyt=t[1],this.yft=this.gf._V(t[2]),this.Vyt.rgt(this.yft),this.Oyt=this.yft.nf()+"."+this.Fyt,this.Ryt=t[3],this.Pyt=t[4].map(t=>go.imt.ux(this.k7,this,t)),this.kyt=t[5],this.Uyt=t[6],this.zyt=t[7],this.yft.qyt(this)}static tmt(t,s,i){const e=go.pr(go.Dpt,t,s,i),h=i[1];return e.Yyt(h),e}static smt(t,s,i){const e=go.pr(go.Dpt,t,s,i),h=i[1];return e.Hyt(h),e}x1t(){if(this.yft&&this.yft.KV())for(const t of this.yft.cgt())if(t.Zyt(this.Fyt)){this.jyt=!0;break}}b1t(){for(const t of this.Pyt)t.b1t();this.Vyt.b1t(!1)}A1t(){return this.Lyt}Q1t(){return this.Pyt}Npt(){return this.Pyt}l3(){return this.Pyt.length}Xyt(t){this.Byt.push(t)}Kyt(){return this.Byt}myt(i){const e=this.Pyt;for(let t=0,s=e.length;t<s;++t)e[t].cht(i[t].si(0))}pyt(i){const e=this.Pyt;for(let t=0,s=e.length;t<s;++t)e[t].cht(i[t])}$yt(){return this.Pyt.map(t=>t.Eet())}A5(){return this.Emt}W1t(){return this.Emt}D1t(){return this.Oyt}tMt(){return this.Fyt}sMt(){return this.jyt}w3(){return this.Ryt}jF(){return this.yft}hc(){return this.kyt}u3(){switch(this.Ryt){case 0:return null;case 2:return"";default:return 0}}f3(){return this.Vyt}M3(){return this.zyt}eyt(){return this.Uyt}xyt(){const t=this.Wyt++;this.Qyt=t;let s,i=new Promise(t=>s=t);return this.Jyt.set(t,{resolve:s,iMt:0}),[t,i]}vyt(t){const s=this.Jyt.get(t);0===s.iMt&&(s.resolve(),this.Jyt.delete(t)),this.Qyt=-1}eMt(){const t=this.Jyt.get(this.Qyt);return t.iMt++,this.Qyt}hMt(t){this.Qyt=t;const s=this.Jyt.get(t);s.iMt--}rMt(t,s){const i=new Map,e=[];for(const h of this.yft.JP().QP()){const r=h.jF();if(r.Zyt(this.Fyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.Vyt.gyt(t,s,this.zyt,{Syt:this.yft,Tyt:e}),0<i.size)for(const[o,a]of i){const u=o.nMt(this.Fyt).f3(),l=[...new Set([...t,...u.YU()])];u.gyt(l,s,this.zyt,{Syt:o,Tyt:a})}}*oMt(t,s){const i=new Map,e=[];for(const h of this.yft.JP().QP()){const r=h.jF();if(r.Zyt(this.Fyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.Vyt.Cyt(t,s,this.zyt,{Syt:this.yft,Tyt:e})),0<i.size)for(const[o,a]of i){const u=o.nMt(this.Fyt).f3(),l=[...new Set([...t,...u.YU()])];yield*u.Cyt(l,s,this.zyt,{Syt:o,Tyt:a})}}}}{const yo=self.ks,Mo=[];yo.imt=class extends yo.lr{constructor(t,s,i){super();const e=t.o3();this.k7=t,this.Hft=e,this.gf=t.K4(),this.Emt=s,this.o1t=e.z1t(),this.Mr=i[1],this.vf=i[2],this.aMt=i[3],this.A2=!!i[4],this.uMt=!!i[5],this.lMt=s instanceof yo.Dpt,this._J=i[6],this.cMt=this.gf.V1t(i[8]),this.fMt=t=>this.cht(t),this.dMt=()=>this.Eet(),this.pMt=!this.Emt||this.A2||this.uMt,this.zht=this.aMt,this.mMt=-1,this.gMt()&&(this.zht=this.zht?1:0),!this.yMt()||this.nb()||this.Cpt()||(this.mMt=e.O1t(this)),e.N1t(this)}static ux(t,s,i){return yo.pr(yo.imt,t,s,i)}b1t(){if(this.yMt()&&!this.nb()&&!this.Cpt()&&!this.MMt()){const t=this.Hft.Apt(this);t&&t.Xyt(this)}}nf(){return this.Mr}V1t(){return this.cMt}A5(){return this.Emt}W1t(){return this.A5()}FV(){return!this.A5()}yMt(){return!this.FV()}MMt(){return this.lMt}nb(){return this.A2}Cpt(){return this.uMt}de(){return 0===this.vf}ve(){return 1===this.vf}gMt(){return 2===this.vf}lmt(){return!1}nY(){return this._J}R1t(){return this.aMt}YU(){return Mo}RI(t){!this.yMt()||this.nb()||this.Cpt()||this.cht(this.R1t())}Tmt(){return!0}*Mdt(t){this.RI(t)}cht(t){this.de()?"number"!=typeof t&&(t=parseFloat(t)):this.ve()?"string"!=typeof t&&(t=t.toString()):this.gMt()&&(t=t?1:0),this.pMt?this.zht=t:this.o1t.L0t()[this.mMt]=t}Eet(){return this.pMt?this.zht:this.o1t.L0t()[this.mMt]}wMt(){let t=this.Eet();return this.gMt()?!!t:t}edt(){this.zht=this.aMt}Y1t(){return{configurable:!1,enumerable:!0,get:this.dMt,set:this.fMt}}}}{const wo=self.ks,So=[];wo.emt=class extends wo.lr{constructor(t,s,i){super();const e=t.o3();this.k7=t,this.Hft=e,this.gf=t.K4(),this.Emt=s,this.SMt=null,this.TMt=i[1],this.m0=!0}static ux(t,s,i){return wo.pr(wo.emt,t,s,i)}b1t(){this.SMt=this.Hft.J9(this.TMt),this.k7.cmt(this);let t=this.A5();for(;t;)t instanceof wo.Zpt&&t.ndt()&&t.agt(this),t=t.A5();this.Rgt(),this.gf.Rj()&&this.k7.Ept().children.push(this.SMt.Ept())}A5(){return this.Emt}YU(){return So}dmt(){return this.SMt}RI(t){const s=!!this.A5(),i=this.gf.XV();s&&this.Hft.Pdt(i),this.SMt.RI(),s&&this.Hft.iW(i)}*Mdt(t){const s=!!this.A5(),i=this.gf.XV();s&&this.Hft.Pdt(i),yield*this.SMt.Mdt(),s&&this.Hft.iW(i)}Tmt(){return!1}pmt(){return this.m0}Rgt(){let t=this.A5();for(;t;){if(t instanceof wo.Zpt&&t.ndt()&&!t.xpt())return void(this.m0=!1);t=t.A5()}this.m0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const To=self.ks;To.bMt=class extends To.lr{constructor(t){super(),this.BT=t,this.gf=t.K4()}b1t(){}static xMt(t,s){const i=s[0],e=[Io,vo,Co,Go,bo,xo];return To.pr(e[i],t,s)}};class bo extends To.bMt{constructor(t,s){super(t),this.vMt=this.gf.p8(),this.Eyt=this.gf._yt(s[1]),this.Eyt!==To.gq.mq.hrt.random&&this.Eyt!==To.gq.mq.hrt.CMt||this.BT.IMt()}GMt(){return this.vMt._Mt(this.Eyt,this.vMt)}}class xo extends To.bMt{constructor(t,s){super(t),this.EMt=null,this.Oyt=s[1],this.BT.IMt()}b1t(){const t=this.gf.o3(),s=(this.EMt=t.a3(this.Oyt),this.Oyt=null,this.BT.f3()),i=this.EMt.f3();this.AMt=[...new Set([...s.d3(),...i.d3()])],this.AMt=t.L1t(this.AMt)}GMt(){const t=this.EMt;if(t.hc()){const s=t.f3();return To.Zpt.prototype.y3.bind(s,this.AMt,t.M3(),t.w3(),t.u3())}{const i=t.u3();return()=>i}}}class vo extends To.bMt{constructor(t,s){super(t),this.yft=this.gf._V(s[1]),this.Eyt=this.gf._yt(s[2]),this.DMt=!!s[3],this.Cft=this.gf.o3().b3(),this.BT.NMt(this.yft)}GMt(){return this.yft.OP()._Mt(this.Eyt,this.yft.DP().CB())}LMt(...t){const s=this.yft,i=s.JP().Lft(),e=i.length;if(0===e)return this.DMt?"":0;const h=a(this.BT.OMt(),e);return this.Cft.HU().T0t(s),this.Eyt.apply(i[h].CB(),t)}RMt(t,...s){const i=this.yft,e=i.QP(),h=e.length;if(0===h||"number"!=typeof t)return this.DMt?"":0;const r=a(t,h);return this.Cft.HU().T0t(i),this.Eyt.apply(e[r].CB(),s)}}class Co extends To.bMt{constructor(t,s){super(t),this.yft=this.gf._V(s[1]),this.PMt=s[3],this.DMt=!!s[2],this.BT.NMt(this.yft)}kMt(){const t=this.yft.JP().Lft(),s=t.length;if(0===s)return this.DMt?"":0;const i=a(this.BT.OMt(),s);return t[i].FMt(this.PMt)}jMt(){const t=this.yft,s=t.JP().Lft(),i=s.length;if(0===i)return this.DMt?"":0;const e=a(this.BT.OMt(),i),h=s[e],r=h.jF().BMt(t.zMt());return h.FMt(this.PMt+r)}UMt(t){const s=this.yft,i=s.QP(),e=i.length;if(0===e||"number"!=typeof t)return this.DMt?"":0;let h=a(t,e),r=i[h],n=0;return s.KV()&&(n=r.jF().BMt(s.zMt())),r.FMt(this.PMt+n)}}class Io extends To.bMt{constructor(t,s){super(t),this.yft=this.gf._V(s[1]),this.WMt=this.yft.Rht(s[2]),this.QMt=this.yft.lit(s[2]),this.Eyt=this.gf._yt(s[3]),this.DMt=!!s[4],this.Cft=this.gf.o3().b3(),this.BT.NMt(this.yft)}JMt(...t){const s=this.yft,i=s.JP().Lft(),e=i.length;if(0===e)return this.DMt?"":0;let h=a(this.BT.OMt(),e),r=(this.Cft.HU().T0t(s),i[h]),n=0;return s.KV()&&(n=r.jF().VMt(s.zMt())),this.Eyt.apply(r.Oht()[this.QMt+n].CB(),t)}YMt(t,...s){const i=this.yft,e=i.QP(),h=e.length;if(0===h||"number"!=typeof t)return this.DMt?"":0;let r=a(t,h),n=(this.Cft.HU().T0t(i),e[r]),o=0;return i.KV()&&(o=n.jF().VMt(i.zMt())),this.Eyt.apply(n.Oht()[this.QMt+o].CB(),s)}}class Go extends To.bMt{constructor(t,s){super(t),this.HMt=null,this.qMt=s[1]}b1t(){this.HMt=this.gf.o3().H1t(this.qMt)}ZMt(){return this.HMt}}}{let r=function(t){const s=self.XMt[t];if(s)return s;throw new Error("invalid expression number")};r;const _o=self.ks;_o.KMt=class extends _o.lr{constructor(t,s,i){super(),this.BT=t,this.iy=i,this.vf=s,this.si=null,this.$Mt=!1,this.uMt=!1}static ux(t,s,i){const e=s[0],h=[Eo,Ao,ko,No,Oo,Do,Ro,Eo,No,No,Fo,jo,ko,zo,Ao,Po,Lo,Bo,Uo,Wo,Qo,Jo];return _o.pr(h[e],t,e,i,s)}b1t(){}IMt(){this.$Mt=!0}NMt(t){this.$Mt||!t||t.OP().aP()||(this.$Mt=!0)}twt(){return this.$Mt}_O(){return this.iy}K4(){return this.BT.K4()}f3(){return this.BT.f3()}Cpt(){return this.uMt}swt(){return 4===this.vf}};class Eo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.iwt=0;const h=e[1];this.ewt=h[0],this.hwt=[],this.rwt=null;for(let t=1,s=h.length;t<s;++t)this.hwt.push(_o.bMt.xMt(this,h[t]));this.hwt.length?this.si=this.nwt:(this.si=r(this.ewt),this.uMt=!0)}owt(t){if(t<0||t>=this.hwt.length)throw new RangeError("invalid numbered node");return this.hwt[t]}b1t(){for(const s of this.hwt)s.b1t();const t=r(this.ewt);this.hwt.length?this.rwt=t(this):this.rwt=t}OMt(){return this.iwt}nwt(t){return this.iwt=t,this.rwt()}}class Ao extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.si=this.awt,14===s&&(this.f3().dgt(),this.BT instanceof _o.ngt)&&this.f3().Igt()}awt(t){this.iwt=t;const s=this.rwt();return"string"==typeof s?s:""}uwt(){return r(this.ewt)()}}class Do extends Eo{constructor(t,s,i,e){super(t,s,i,e),2<=t.lwt()?this.si=this.wk:this.si=this.N4,this.uMt=!1}N4(t){this.iwt=t;const s=this.rwt(),i=this.K4().E4();return i.N4(s)}wk(t){const s=this.N4(t);return s?s.wk():null}}class No extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.cwt=e[1],this.si=this.fwt,this.uMt=!0}fwt(){return this.cwt}}class Lo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.dwt=e[1],this.si=this.pwt,this.uMt=!0}pwt(){return this.dwt}}class Oo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.yft=this.K4()._V(e[1]),2<=t.lwt()?this.si=this._P:this.si=this.jF;const h=this.f3();h.rgt(this.yft),this.BT instanceof _o.ngt?h.Igt():h.A5()&&h.A5().Igt(),this.uMt=!0}jF(){return this.yft}_P(){return this.yft?this.yft._P():null}}class Ro extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.vJ=this.K4().c4().rZ(e[1]),2<=t.lwt()?this.si=this.u4:this.si=this.f4,this.uMt=!0}f4(){return this.vJ}u4(){return this.vJ?this.vJ.u4():null}}class Po extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.aK=this.K4().ftt().gX(e[1]),2<=t.lwt()?this.si=this.Gst:this.si=this.qst,this.uMt=!0}qst(){return this.aK}Gst(){return this.aK?this.aK.Gst():null}}class ko extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.mwt=e[1],this.si=this.gwt,this.uMt=!0}gwt(){return this.mwt}}class Fo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.ywt=e[1];const h=this.BT.jF();this.BT instanceof _o.hgt&&this.BT.nb()||!h||!h.KV()?(this.si=this.Mwt,this.uMt=!0):(this.si=this.wwt,this.IMt())}Mwt(){return this.ywt}wwt(t){t=t||0;let s=this.BT.jF(),i=s.JP(),e=i.QP(),h=null;if(e.length)h=e[t%e.length].jF();else if(i.Dft()){const r=i.Nft();h=r[t%r.length].jF()}else{if(!(0<s.YP()))return 0;{const n=s.QP();h=n[t%n.length].jF()}}return this.ywt+h.BMt(s.zMt())}}class jo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.qMt=e[1],this.HMt=null,2<=t.lwt()?this.si=this.Swt:this.si=this.Twt,this.uMt=!0}b1t(){this.HMt=this.K4().o3().H1t(this.qMt)}Twt(){return this.HMt}Swt(){return null}}class Bo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.bwt=e[1],this.EMt=null,2<=t.lwt()?this.si=this.xwt:this.si=this.vwt,this.uMt=!0}b1t(){this.EMt=this.K4().o3().a3(this.bwt),this.bwt=null}vwt(){return this.EMt}xwt(){return null}}class zo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.Cwt=[],this.Iwt=[],this.uMt=!0;for(let t=1,s=e.length;t<s;++t){const h=_o.KMt.ux(this.BT,e[t],0);this.Cwt.push(h),this.Iwt.push(0),h.Cpt()||(this.uMt=!1)}this.si=this.Gwt}b1t(){for(const t of this.Cwt)t.b1t()}Gwt(){const i=this.Cwt,e=this.Iwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].si(0);return e}}class Uo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this._wt=e[1],this.si=this.lht,this.uMt=!0}lht(){return this._wt}}class Wo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.Ewt=e[1],this.si=this.Awt,this.uMt=!0}Awt(){return this.Ewt}}class Qo extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.si=this.ej,this.uMt=!1}ej(){return this.rwt()}}class Jo extends _o.KMt{constructor(t,s,i,e){super(t,s,i),this.Kut=this.K4().ylt().Vut(e[1]),this.si=this.Dwt,this.uMt=!0}Dwt(){return this.Kut.nf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].si(0)};e;const Vo=self.ks,Yo=[],Ho=function(){};Vo.hgt=class extends Vo.lr{constructor(t,i,s){if(super(),this.Vyt=t,this.gf=t.K4(),this.iy=s,this.Eyt=this.gf._yt(i[1]),this.Nwt=0<i[3],this.Lwt=2===i[3],this.Owt=!!i[4],this.Rwt=!!i[5],this.A2=!!i[6],this._J=i[7],this.Pwt=this.Vyt.Vft(),this.yft=null,this.WMt=null,this.QMt=-1,this.vMt=null,this.RI=Ho,this.Mdt=Ho,this.Zs=[],this.kwt=[],this.Fwt=!1,this.jwt=null,this.Bwt=null,this.Zmt=this.gf.Rj()?{Xmt:i[8][0],zwt:i[8][1]}:null,-1===i[0]?this.vMt=this.gf.p8():(this.yft=this.gf._V(i[0]),i[2]&&(this.WMt=this.yft.Rht(i[2]),this.QMt=this.yft.lit(i[2])),this.Vyt.A5()&&this.Vyt.A5().Igt()),10===i.length){let s=i[9];for(let t of s)this.Zs.push(Vo.KMt.ux(this,t,this.Zs.length)),this.kwt.push(0)}0===this.Zs.length&&(this.Zs=Yo,this.kwt=Yo),this.Vyt.o3().G1t(this)}static ux(t,s,i){return Vo.pr(Vo.hgt,t,s,i)}b1t(){for(const t of this.Zs)t.b1t(),t.twt()&&(this.Fwt=!0);this.Lwt?(this.RI=this.Uwt,this.Mdt=this.Wwt):this.vMt?(this.Qwt(),this.Mdt=this.Jwt):this.yft.OP().aP()?(this.Vwt(),this.Mdt=this.Ywt):this.A2?(this.RI=this.Hwt,this.Mdt=this.qwt):(this.RI=this.Zwt,this.Mdt=this.Xwt)}Qwt(){const t=this.vMt,s=this.vMt;this.Kwt(t,s,this.$wt)}Vwt(){const t=this.yft.OP(),s=this.yft.DP().CB();this.Kwt(t,s,this.tSt)}Kwt(t,s,i){const e=this.Eyt,h=this.Rwt,r=this.Zs;if(0===r.length){const n=t._Mt(e,s);h?this.RI=function(){return Vo.xor(n(),h)}:this.RI=n}else if(1===r.length){const o=r[0];if(!h&&o.Cpt())this.RI=t.sSt(e,s,o.si(0));else{const a=t._Mt(e,s);this.RI=function(){return Vo.xor(a(o.si(0)),h)}}}else if(2===r.length){const u=r[0],l=r[1];if(!h&&u.Cpt()&&l.Cpt())this.RI=t.iSt(e,s,u.si(0),l.si(0));else{const c=t._Mt(e,s);this.RI=function(){return Vo.xor(c(u.si(0),l.si(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Cpt()&&d.Cpt()&&p.Cpt())this.RI=t.eSt(e,s,f.si(0),d.si(0),p.si(0));else{const m=t._Mt(e,s);this.RI=function(){return Vo.xor(m(f.si(0),d.si(0),p.si(0)),h)}}}else this.RI=i}nY(){return this._J}rmt(){return this.Eyt}jF(){return this.yft}RB(){return this.WMt}hSt(){return this.WMt?this.WMt.NB():this.yft?this.yft.OP():null}lwt(){const t=this.hSt();return t?t.rSt():1}f3(){return this.Vyt}K4(){return this.gf}_O(){return this.iy}Qgt(){return this._O()}Kpt(){return this.Nwt}nmt(){return this.Lwt}nSt(){return this.Rwt}qB(){return this.Owt}nb(){return this.A2}oSt(){return this.Zmt.Xmt}aSt(){return!!this.vMt}jgt(){return this.aSt()||this.yft.OP().aP()}Bgt(){for(const t of this.Zs)if(t.swt())return t.jF();return null}uSt(t){this.Zmt.Xmt=!!t,this.Vyt.xgt()}lSt(){return this.Zmt.zwt}Tmt(){return!this.oSt()&&!this.gf.$gt()&&!this.lSt()}cSt(){return this.jwt||(this.jwt=new Map),this.jwt}fSt(){return this.Bwt||(this.Bwt=new Map),this.Bwt}$wt(){const t=this.kwt;return e(this.Zs,t),Vo.xor(this.Eyt.apply(this.vMt,t),this.Rwt)}*Jwt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const s=this.kwt;e(this.Zs,s);let t=this.Eyt.apply(this.vMt,s);return Vo.Yo(t)&&(t=yield*t),Vo.xor(t,this.Rwt)}return this.RI()}tSt(){const t=this.kwt,s=(e(this.Zs,t),this.yft.DP().CB());return Vo.xor(this.Eyt.apply(s,t),this.Rwt)}*Ywt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){let t=this.kwt,s=(e(this.Zs,t),this.yft.DP().CB()),i=this.Eyt.apply(s,t);return Vo.Yo(i)&&(i=yield*i),Vo.xor(i,this.Rwt)}return this.RI()}Uwt(){return!0}*Wwt(){return(this.oSt()||this.gf.$gt())&&(yield this),!0}dSt(){return this.WMt?2<=this.WMt.NB().rSt()?this.WMt.OB():this.WMt:2<=this.yft.OP().rSt()?this.yft._P():this.yft}Hwt(){const t=this.kwt,s=(e(this.Zs,t),this.Eyt.apply(this.dSt(),t));return this.yft.wyt(),s}*qwt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const s=this.kwt;e(this.Zs,s);let t=this.Eyt.apply(this.dSt(),s);return Vo.Yo(t)&&(t=yield*t),this.yft.wyt(),t}return this.RI()}Zwt(){const i=this.Zs,e=this.kwt,t=this.yft.JP();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.twt()||(e[t]=h.si(0))}return t.Eft()?this.pSt(t):this.mSt(t)}*Xwt(){return(this.oSt()||this.gf.$gt())&&(yield this),this.Zwt()}gSt(i){const e=this.Zs,h=this.kwt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.twt()&&(h[t]=r.si(i))}}pSt(i){const t=this.yft,e=t.KV(),h=t.zMt(),r=this.QMt,n=0<=r,o=t.QP(),a=this.Fwt,u=this.kwt,l=this.Eyt,c=this.Rwt,f=this.Pwt&&!this.Nwt;i._ft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.gSt(s);let t;if(n){const p=e?d.jF().VMt(h):0;t=l.apply(d.Oht()[r+p].CB(),u)}else t=l.apply(d.CB(),u);Vo.xor(t,c)?i.Oft(d):f&&i.Rft(d)}return t.ySt(!0),i.Pft(!1),t.wyt(),i.Aft()}mSt(t){let s=this.yft,i=s.KV(),e=s.zMt(),h=s.XF(),r=this.QMt,n=0<=r,o=this.Fwt,a=this.kwt,u=this.Eyt,l=this.Rwt,c=this.Pwt&&!this.Nwt,f=t.kft(),d=t.Fft(),p=c&&!this.Vyt.Fgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.gSt(s);let t;if(n){const S=i?w.jF().VMt(e):0;t=u.apply(w.Oht()[r+S].CB(),a)}else t=u.apply(w.CB(),a);Vo.xor(t,l)?(y=!0,p?(f.push(w),h&&w.MSt()):(m[g]=w,h&&w.wSt(g),++g)):p?(m[g]=w,h&&w.SSt(g),++g):c&&(d.push(w),h)&&w.TSt()}Vo.Wn(m,g),h&&s.bSt(p,g);const M=y;return p&&!y&&(y=this.xSt(f)),s.ySt(M||c),c?y:t.Aft()}xSt(i){const t=this.yft,e=t.KV(),h=t.zMt(),r=this.Fwt,n=this.QMt,o=0<=n,a=this.kwt,u=this.Eyt,l=this.Rwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.gSt(s);let t;if(o){const f=e?c.jF().VMt(h):0;t=u.apply(c.Oht()[n+f].CB(),a)}else t=u.apply(c.CB(),a);if(Vo.xor(t,l))return!0}return!1}vSt(t,s){return this.Zs[t].si(s)}omt(){const t=this.Zs;if(t.length)return t[0].uwt();throw new Error("no parameters")}x7(){if(!this.jwt||!this.jwt.size)return null;const s={};for(const[i,e]of this.jwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].$F(),t[1].$F(),t[2]])),s[i]=t}return{ex:s}}v7(t){if(this.jwt&&(this.jwt.clear(),this.jwt=null),t){const s=this.gf,i=t.ex;if(i){const e=this.cSt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Vo.pr(Vo.rc,r.map(t=>[s.I4(t[0]),s.I4(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].si(0)};h;const qo=self.ks,Zo=[],Xo=function(){},Ko=function*(){};qo.ngt=class extends qo.lr{constructor(t,s,i){super();const e=(this.Vyt=t).K4(),h=(this.gf=e,this.iy=i,this._J=4<=s.length?s[3]:-1,this.CSt=5<=s.length?255&s[4]:0,this.ISt=5<=s.length?s[4]>>8:0,this.Eyt=null,this.yft=null,this.WMt=null,this.QMt=-1,this.vMt=null,this.GSt="",this._St=null,this.ESt=null,this.RI=Xo,this.Mdt=Xo,this.Zs=[],this.kwt=[],this.Fwt=!1,this.jwt=null,this.Bwt=null,-3===s[0]),r=h?s[2]:s[5];if(this.Zmt=e.Rj()||h?{Xmt:r[0],zwt:r[1],index:r[2]}:null,-1===s[0])this.vMt=e.p8(),this.Eyt=e._yt(s[1]);else if(-2===s[0])this.GSt=s[1];else if(h){const n=e._yt(s[1]);this.Eyt=n,this.RI=this.ASt,this.Mdt=this.DSt,this.ISt|=8}else this.yft=e._V(s[0]),4&this.ISt?(this.GSt=s[1],this._St=e._V(s[2])):(s[2]&&(this.WMt=this.yft.Rht(s[2]),this.QMt=this.yft.lit(s[2])),this.Eyt=e._yt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Zs.push(qo.KMt.ux(this,a,this.Zs.length)),this.kwt.push(0)}0===this.Zs.length&&(this.Zs=Zo,this.kwt=Zo),this.NSt()&&(this.Vyt.dgt(),this.Vyt.Igt()),this.Vyt.o3()._1t(this)}static ux(t,s,i){return qo.pr(qo.ngt,t,s,i)}b1t(){for(const t of this.Zs)t.b1t(),t.twt()&&(this.Fwt=!0);if(this.vMt)this.Qwt(),this.Mdt=this.Jwt;else if(this.GSt)4&this.ISt?this.LSt():this.OSt(),this.GSt="",this._St=null;else if(this.RI===this.ASt){const s=this.Eyt,i=this.gf.o3().J1t(this.Vyt);this.Eyt=s.bind(null,this.gf.nP(),i)}else this.WMt?this.eyt()?(this.RI=this.RSt,this.Mdt=this.PSt):(this.RI=this.kSt,this.Mdt=this.FSt):this.yft.OP().aP()?(this.Vwt(),this.Mdt=this.Ywt):this.nb()?(this.RI=this.jSt,this.Mdt=this.BSt):this.eyt()?(this.RI=this.zSt,this.Mdt=this.USt):this.WSt()?(this.RI=this.QSt,this.Mdt=this.JSt):this.Zs.length?this.Zs.every(t=>t.twt())?(this.RI=this.VSt,this.Mdt=this.YSt):this.Fwt?(this.RI=this.HSt,this.Mdt=this.qSt):this.Zs.every(t=>t.Cpt())?(h(this.Zs,this.kwt),this.RI=this.ZSt,this.Mdt=this.XSt):(this.RI=this.KSt,this.Mdt=this.$St):(this.RI=this.ZSt,this.Mdt=this.XSt)}Qwt(){const t=this.vMt,s=this.vMt;this.Kwt(t,s,this.$wt)}Vwt(){const t=this.yft.OP(),s=this.yft.DP().CB();this.Kwt(t,s,this.tSt)}OSt(){const t=this.Vyt.o3(),i=t.a3(this.GSt);if(i.hc()){const e=0!=(2&this.ISt);this.ESt=i.f3();let s=[...new Set([...this.Vyt.d3(),...this.ESt.d3()])];s=t.L1t(s);const h=!i.M3()&&this.tTt()?{byt:!0}:null;if(this.RI=qo.Zpt.prototype.gyt.bind(this.ESt,s,this.Zs,e,h),this.gf.Rj()){const r=this;this.Mdt=function*(){(r.oSt()||r.gf.$gt())&&(yield r);const t=yield*r.ESt.Cyt(s,r.Zs,e,h);return t}}else this.Mdt=Ko}else this.RI=Xo,this.Mdt=Ko}LSt(){const r=this.Vyt.o3(),n=r.K1t(this._St,this.GSt);if(n.hc()){const o=0!=(2&this.ISt);this.ESt=n.f3();let s=[...new Set([...this.Vyt.d3(),...this.ESt.d3(),this.yft,n.jF()])],t=(s=r.L1t(s),!this.yft.KV()&&!n.jF().KV()),i=!this.yft.KV()&&n.jF().KV(),e=this.yft.KV(),h=null;if(!n.M3()&&this.tTt()&&((h=h||{}).byt=!0),!i&&o||((h=h||{}).yyt=this.yft,h.Myt=n.jF()),t||i||e&&!n.sMt()?this.RI=qo.Zpt.prototype.gyt.bind(this.ESt,s,this.Zs,o,h):e&&(this.RI=qo.Dpt.prototype.rMt.bind(n,s,this.Zs)),this.gf.Rj()){const a=this;t||i||e&&!n.sMt()?this.Mdt=function*(){(a.oSt()||a.gf.$gt())&&(yield a);const t=yield*a.ESt.Cyt(s,a.Zs,o,h);return t}:e&&(this.Mdt=function*(){(a.oSt()||a.gf.$gt())&&(yield a);const t=yield*n.oMt(s,a.Zs);return t})}else this.Mdt=Ko}else this.RI=Xo,this.Mdt=Ko}Kwt(t,s,i){const e=this.Eyt,h=this.Zs;if(0===h.length)this.RI=t._Mt(e,s);else if(1===h.length){const r=h[0];if(r.Cpt())this.RI=t.sSt(e,s,r.si(0));else{const n=t._Mt(e,s);this.RI=function(){return n(r.si(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Cpt()&&a.Cpt())this.RI=t.iSt(e,s,o.si(0),a.si(0));else{const u=t._Mt(e,s);this.RI=function(){return u(o.si(0),a.si(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l.Cpt()&&c.Cpt()&&f.Cpt())this.RI=t.eSt(e,s,l.si(0),c.si(0),f.si(0));else{const d=t._Mt(e,s);this.RI=function(){return d(l.si(0),c.si(0),f.si(0))}}}else this.RI=i}nY(){return this._J}eyt(){return 0!=(8&this.ISt)}iyt(){return 0!=(16&this.ISt)}WSt(){return 1===this.CSt}nb(){return 2===this.CSt}NSt(){return 0!=(1&this.ISt)}ggt(){return this.eyt()||this.iyt()}jF(){return this.yft}hSt(){return this.WMt?this.WMt.NB():this.yft?this.yft.OP():null}lwt(){const t=this.hSt();return t?t.rSt():1}f3(){return this.Vyt}tTt(){let t=this.Vyt;do{if(t instanceof qo.Dpt&&t.M3())return!0}while(t=t.W1t());return!1}K4(){return this.gf}_O(){return this.iy}Qgt(){return this.Zmt.index}oSt(){return this.Zmt.Xmt}uSt(t){this.Zmt.Xmt=!!t,this.Vyt.xgt()}lSt(){return this.Zmt.zwt}Tmt(){return!this.oSt()&&!this.gf.$gt()&&!this.lSt()}cSt(){return this.jwt||(this.jwt=new Map),this.jwt}fSt(){return this.Bwt||(this.Bwt=new Map),this.Bwt}$wt(){const t=this.kwt;return h(this.Zs,t),this.Eyt.apply(this.vMt,t)}*Jwt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const t=this.kwt,s=(h(this.Zs,t),yield*this.Eyt.apply(this.vMt,t));return s}return this.RI()}tSt(){const t=this.kwt;return h(this.Zs,t),this.Eyt.apply(this.yft.DP().CB(),t)}*Ywt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const t=this.kwt,s=(h(this.Zs,t),yield*this.Eyt.apply(this.yft.DP().CB(),t));return s}return this.RI()}ZSt(){const i=this.kwt,e=this.yft.JP().QP();for(let t=0,s=e.length;t<s;++t)this.Eyt.apply(e[t].CB(),i)}*XSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const i=this.kwt,e=this.yft.JP().QP();for(let t=0,s=e.length;t<s;++t)yield*this.Eyt.apply(e[t].CB(),i)}else this.ZSt()}KSt(){const i=this.kwt,e=(h(this.Zs,i),this.yft.JP().QP());for(let t=0,s=e.length;t<s;++t)this.Eyt.apply(e[t].CB(),i)}*$St(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const i=this.kwt,e=(h(this.Zs,i),this.yft.JP().QP());for(let t=0,s=e.length;t<s;++t)yield*this.Eyt.apply(e[t].CB(),i)}else this.KSt()}VSt(){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);s.apply(n.CB(),h)}}*YSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);yield*s.apply(n.CB(),h)}}else this.VSt()}HSt(){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.twt()||(h[t]=i.si(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.twt()&&(h[t]=o.si(i))}s.apply(n.CB(),h)}}*qSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.twt()||(h[t]=i.si(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.twt()&&(h[t]=o.si(i))}yield*s.apply(n.CB(),h)}}else this.HSt()}QSt(){const e=this.Zs,h=this.kwt,s=this.Eyt,t=this.yft,i=t.sTt(),r=t.JP().QP();i.iTt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);s.apply(n.CB(),h)}i.eTt(s)}*JSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const e=this.Zs,h=this.kwt,s=this.Eyt,t=this.yft,i=t.sTt(),r=t.JP().QP();i.iTt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);yield*s.apply(n.CB(),h)}i.eTt(s)}else this.QSt()}hTt(){return this.WMt?2<=this.WMt.NB().rSt()?this.WMt.OB():this.WMt:2<=this.yft.OP().rSt()?this.yft._P():this.yft}jSt(){const t=this.kwt;return h(this.Zs,t),this.Eyt.apply(this.hTt(),t)}*BSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const s=this.kwt;h(this.Zs,s);let t=this.Eyt.apply(this.hTt(),s);return qo.Yo(t)?yield*t:t}return this.jSt()}kSt(){const t=this.yft,s=t.KV(),e=t.zMt(),h=this.Zs,r=this.Fwt,n=this.kwt,o=this.Eyt,a=this.QMt,u=t.JP().QP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.twt()||(n[t]=i.si(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.twt()&&(n[t]=f.si(i))}const c=s?l.jF().VMt(e):0;o.apply(l.Oht()[a+c].CB(),n)}}*FSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const t=this.yft,s=t.KV(),e=t.zMt(),h=this.Zs,r=this.Fwt,n=this.kwt,o=this.Eyt,a=this.QMt,u=t.JP().QP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.twt()||(n[t]=i.si(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.twt()&&(n[t]=f.si(i))}const c=s?l.jF().VMt(e):0;yield*o.apply(l.Oht()[a+c].CB(),n)}}else this.kSt()}zSt(){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);n.push(s.apply(o.CB(),h))}return Promise.all(n)}*USt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const e=this.Zs,h=this.kwt,s=this.Eyt,r=this.yft.JP().QP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].si(i);n.push(yield*s.apply(o.CB(),h))}return Promise.all(n)}return this.zSt()}RSt(){const t=this.yft,s=t.KV(),e=t.zMt(),h=this.Zs,r=this.kwt,n=this.Eyt,o=this.QMt,a=t.JP().QP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].si(i);const c=s?l.jF().VMt(e):0;u.push(n.apply(l.Oht()[o+c].CB(),r))}return Promise.all(u)}*PSt(){if((this.oSt()||this.gf.$gt())&&(yield this),this.lSt()){const t=this.yft,s=t.KV(),e=t.zMt(),h=this.Zs,r=this.kwt,n=this.Eyt,o=this.QMt,a=t.JP().QP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].si(i);const c=s?l.jF().VMt(e):0;u.push(yield*n.apply(l.Oht()[o+c].CB(),r))}return Promise.all(u)}return this.RSt()}async ASt(){try{await this.Eyt()}catch(t){console.error(`Unhandled exception running script %c${this.Vyt.w9().nf()}, event ${this.Vyt.Egt()}, action ${this.Qgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),qo.hmt.Dyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),qo.hmt.Nyt())}}*DSt(){return(this.oSt()||this.gf.$gt())&&(yield this),this.ASt()}x7(){return this.jwt&&this.jwt.size?{ex:qo.Qo(this.jwt)}:null}v7(t){if(this.jwt&&(this.jwt.clear(),this.jwt=null),t){const s=t.ex;s&&(this.jwt=qo.Jo(s))}}}}{let d=function(t){return t instanceof o?M.Ck(t):t.s6()},l=function(t){return d(t).D4()},h=function(t){return M.Ck(t)},m=function(t){return t instanceof a?M.Ck(t):t},s=function(t){return t instanceof c?M.Ck(t):t},_=function(t,s,i,e){const h=s.$F(),r=i.$F();h<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.$F(),h=i.$F();e<h?t.uc(s,i):t.uc(i,s)},A=function(t,s){t.lc(s)},D=function(t,s,i){const e=s.$F(),h=i.$F();return e<h?t.si(s,i):t.si(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.D4(),n=M.RO(),o=M.k1t(),a=o.f3().Vft(),u=o.jF(),l=o.nSt(),c=s.JP(),f=u!==s;I=s,C=f&&!l;let d,p=0,m=0,g=G=!1;c.Eft()?(w.I(r.l5()),w.offset(i,e),n.rTt(r.N4(),s,w,S),d=S):!a||M.nTt()&&!c.Fft().length&&c.kft().length?d=c.kft():(d=c.Fft(),G=!0),h&&(p=r.wT(),m=r.bT(),r.n5(i,e),r.i5());for(const y of d)if(n.SR(t,y)){if(g=!0,l)break;f&&O.add(y)}return h&&(r.e5(p,m),r.i5()),N.Qn(S),g},i=function(t){const s=M.m3().Vft(),i=I.JP(),e=i.kft(),h=i.Fft();i.Eft()?(i.zft(O),s&&(N.Qn(h),i.Uft(O,I.QP()))):s?G?i.Wft(O):(i.Uft(O,e),i.zft(O)):i.zft(O),I.wyt()},T=function(t,s){C&&(s&&i(),O.clear(),I=null,C=!1)},r=function(t,s){const i=M.I4(s);if(i){const e=t.JP();if(e.Eft()||e.kft().includes(i))if(t.KV()){if(i.jF().oTt(t))return e.Jft(i),t.wyt(),!0}else if(i.jF()===t)return e.Jft(i),t.wyt(),!0}return!1},n=function(t,h){const r=t.JP();if(r.Eft()){r.Pft(!1),r._ft();const i=t.QP();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.$F()===h?r.Rft(e):r.Oft(e)}return t.wyt(),!!r.kft().length}{let i=r.kft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).$F()===h?r.Rft(n):++e}return N.Wn(i,e),t.wyt(),!!i.length}},N=(d,l,h,m,s,_,E,A,D,e,i,T,r,n,self.ks),u=new N.qo,b={},x={},v={},M=null,o=(N.aTt=function(t){M=t},self.kF),a=self.NP,c=self.vk,w=(x.uTt=function(t,s){return N.compare(this.D4().wT(),t,s)},v.uTt=function(t,s){return N.compare(this.x,t,s)},x.lTt=function(t,s){return N.compare(this.D4().bT(),t,s)},v.lTt=function(t,s){return N.compare(this.y,t,s)},x.cTt=function(){return this.D4().p5()},v.cTt=function(){return this.d5()},b.fTt=function(){const t=l(this),s=t.f4(),i=t.l5();return i.Nu()<0||i.Lu()<0||i.Au()>s.Mm()||i.Du()>s.Em()},b.dTt=function(i,e,h){const t=m(this),s=t.JP(),r=s.QP();if(!r.length)return!1;let n=r[0],o=n.D4(),a=n,u=N.Er(o.wT(),o.bT(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.D4();const l=N.Er(o.wT(),o.bT(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=n)}return s.Jft(a),!0},x.ST=function(t){const s=this.D4();s.wT()!==t&&(s.ST(t),s.i5())},v.ST=function(t){this.x=+t},x.xT=function(t){const s=this.D4();s.bT()!==t&&(s.xT(t),s.i5())},v.xT=function(t){this.y=+t},x.pTt=function(t,s){const i=this.D4();i.mTt(t,s)||(i.e5(t,s),i.i5())},v.pTt=function(t,s){this.setPosition(t,s)},b.gTt=function(t,s){if(t=m(t)){const i=d(this),e=t.UP(i);if(e){const[h,r]=e.yTt(s),n=i.D4();n.wT()===h&&n.bT()===r||(n.e5(h,r),n.i5())}}},b.MTt=function(t){if(0!==t){const s=l(this);s.n5(s.wTt()*t,s.STt()*t),s.i5()}},x.TTt=function(t,s){if(0!==s){const i=this.D4();t=N.vr(t),i.n5(Math.cos(t)*s,Math.sin(t)*s),i.i5()}},v.TTt=function(t,s){0!==s&&(t=N.vr(t),this.r5(Math.cos(t)*s,Math.sin(t)*s))},x.wT=function(){return this.D4().wT()},v.wT=function(){return this.x},x.bT=function(){return this.D4().bT()},v.bT=function(){return this.y},b.D3=function(){return M.D3(d(this))},x.bTt=function(t,s){return N.compare(this.D4().Mm(),t,s)},v.bTt=function(t,s){return N.compare(this.width,t,s)},x.xTt=function(t,s){return N.compare(this.D4().Em(),t,s)},v.xTt=function(t,s){return N.compare(this.height,t,s)},x.Im=function(t){const s=this.D4();s.Mm()!==t&&(s.Im(t),s.i5())},v.Im=function(t){this.width=t},x.wm=function(t){const s=this.D4();s.Em()!==t&&(s.wm(t),s.i5())},v.wm=function(t){this.height=t},x.n_=function(t,s){const i=l(this);i.Mm()===t&&i.Em()===s||(i.n_(t,s),i.i5())},v.n_=function(t,s){this.ak(t,s)},x.Mm=function(){return this.D4().Mm()},v.Mm=function(){return this.width},x.Em=function(){return this.D4().Em()},v.Em=function(){return this.height},b.vTt=function(){return l(this).l5().Au()},b.CTt=function(){return l(this).l5().Du()},b.ITt=function(){return l(this).l5().Nu()},b.GTt=function(){return l(this).l5().Lu()},b._Tt=function(){const t=l(this).l5();return(t.Au()+t.Nu())/2},b.ETt=function(){const t=l(this).l5();return(t.Du()+t.Lu())/2},b.ATt=function(t,s){return N.Dr(l(this).fk(),N.vr(s))<=N.vr(t)},b.DTt=function(t){return N.Lr(l(this).fk(),N.vr(t))},b.NTt=function(t,s){const i=N.vr(t),e=N.vr(s),h=l(this).fk(),r=!N.Lr(e,i);return r?!(!N.Lr(h,i)&&N.Lr(h,e)):N.Lr(h,i)&&!N.Lr(h,e)},x.ck=function(t){const s=this.D4(),i=N.br(N.vr(t));isNaN(i)||s.fk()===i||(s.ck(i),s.i5())},v.ck=function(t){this.u5=t},b.LTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.ck(s.fk()+N.vr(t)),s.i5()}},b.OTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.ck(s.fk()-N.vr(t)),s.i5()}},b.RTt=function(t,s){const i=l(this),e=i.fk(),h=N.Nr(e,N.vr(s),N.vr(t));isNaN(h)||e===h||(i.ck(h),i.i5())},b.PTt=function(t,s,i){const e=l(this),h=e.fk(),r=s-e.wT(),n=i-e.bT(),o=Math.atan2(n,r),a=N.Nr(h,o,N.vr(t));isNaN(a)||h===a||(e.ck(a),e.i5())},b.kTt=function(t,s){const i=l(this),e=i.fk(),h=t-i.wT(),r=s-i.bT(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.ck(n),i.i5())},x.fk=function(){return N.Cr(this.D4().fk())},v.fk=function(){return this.u5},b.FTt=function(t,s){return N.compare(N.Yr(100*l(this).PA(),6),t,s)},x.Zk=function(){return this.D4().Zk()},v.Zk=function(){return this.isVisible},b.Hk=function(t){const s=l(this);t=2===t?!s.Zk():0!==t,s.Zk()!==t&&(s.Hk(t),M.j4())},b.FA=function(t){const s=N.Tr(t/100,0,1),i=l(this);if(i.rB()){if(i.ont().jTt()===s)return}else if(i.PA()===s)return;i.FA(s),M.j4()},b.BTt=function(t){u.Aa(t);const s=l(this);s.g5().Ta(u)||(s.y5(u),M.j4())},b.BA=function(){const t=l(this).g5();return N.Zr(t.fa(),t.ma(),t.ga(),t.ya())},b.PA=function(){return N.Yr(100*l(this).PA(),6)},b.zTt=function(t){return!!(t=s(t))&&l(this).N4()===t},b.UTt=function(i){const t=m(this),s=t.JP(),e=s.QP();if(!e.length)return!1;let h=e[0],r=h;for(let t=1,s=e.length;t<s;++t){const n=e[t],o=n.D4(),a=r.D4(),u=o.N4()._O(),l=a.N4()._O();0===i?(l<u||u===l&&o.L4()>a.L4())&&(r=n):(u<l||u===l&&o.L4()<a.L4())&&(r=n)}return s.Jft(r),!0},x.WTt=function(t,s,i){const e=this.D4(),h=0===t?e.vT():e.a5();return N.compare(h,s,i)},v.WTt=function(t,s,i){const e=0===t?this.dF:this.o5;return N.compare(e,s,i)},x.QTt=function(){this.D4().w5()},v.QTt=function(){this.M5()},x.JTt=function(){this.D4().T5()},v.JTt=function(){this.S5()},b.VTt=function(t){(t=s(t))&&l(this).x5(t)},b.YTt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.HTt(e);h&&e.D4().C5(h,i)}},x.CT=function(t){const s=this.D4();s.vT()!==t&&(s.CT(t),M.j4())},v.CT=function(t){this.dF=t},b.qTt=function(){return l(this).N4()._O()},b.ZTt=function(){return l(this).N4().nf()},x.XTt=function(){return this.D4().L4()},v.XTt=function(){return this.zIndex},x.KTt=function(){return this.D4().vT()},v.KTt=function(){return this.dF},x.$Tt=function(){return this.D4().a5()},v.$Tt=function(){return this.o5},b.t2t=function(t){const s=d(this),i=s.jF().hk().kht(t);if(i){const e=i._O(),h=s.D4().t5();return h.UB(e)}},b.s2t=function(t,s){const i=d(this),e=i.jF().hk().kht(s);if(e){const h=e._O(),r=1===t,n=i.D4().t5();n.UB(h)!==r&&(n.WB(h,r),n.QB(),M.j4())}},b.i2t=function(t,s,i){const e=d(this),h=e.jF().hk().kht(t);if(h){s=Math.floor(s);const r=h.gv().Mv(s);if(r){"color"===r?(u.Aa(i),i=u):"percent"===r&&(i/=100);const n=h._O(),o=e.D4().t5(),a=o.VB(n,s,i);a&&o.UB(n)&&M.j4()}}},N.pr(N.Rect)),L=[],S=[],C=!1,I=null,G=!1,O=new Set;b.e2t=function(y){const t=m(this),M=(y=m(y),t.K4());if(M.h2t())return function*(M){if(M){let t=this.K4(),s=t.RO(),e=t.o3(),i=e.b3(),h=e.k1t(),r=h.jF(),n=h.cSt(),o=h.fSt(),a=i.HU(),u=t.Ott(),l=u-1,c=a.m3(),f=i.qU(c),d=n.get("collmemory"),p=(d||(d=N.pr(N.rc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.qf().addEventListener("instancedestroy",t=>A(d,t.PB))),r.JP()),m=M.JP(),g=p.QP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Eft()?(s.rTt(w.D4().N4(),M,w.D4().l5(),L),y=L,s.r2t(w,M,y)):y=m.QP();for(let t=0;t<y.length;++t){const S=y[t];if(s.SR(w,S)||s.n2t(w,S)){let t=D(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(_(d,w,S,u),T){const b=c.YU(),x=(e.tW(b),r.JP()),v=M.JP();if(x.Pft(!1),v.Pft(!1),r===M){const C=x.kft();N.Qn(C),C.push(w),C.push(S),r.wyt()}else{const I=x.kft(),G=v.kft();N.Qn(I),N.Qn(G),I.push(w),G.push(S),r.wyt(),M.wyt()}yield*c.lyt(a,f),e.iW(b)}}else E(d,w,S)}N.Qn(L)}i.nW()}return!1}.call(t,y);if(y){let s=M.RO(),e=M.o3(),t=e.b3(),i=e.k1t(),h=i.jF(),r=i.cSt(),n=i.fSt(),o=t.HU(),a=M.Ott(),u=a-1,l=o.m3(),c=t.qU(l),f=r.get("collmemory"),d=(f||(f=N.pr(N.rc),r.set("collmemory",f)),n.get("collisionCreatedDestroyCallback")||(n.set("collisionCreatedDestroyCallback",!0),M.qf().addEventListener("instancedestroy",t=>A(f,t.PB))),h.JP()),p=y.JP(),m=d.QP(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.Eft()?(s.rTt(w.D4().N4(),y,w.D4().l5(),L),g=L,s.r2t(w,y,g)):g=p.QP();for(let t=0;t<g.length;++t){const S=g[t];if(s.SR(w,S)||s.n2t(w,S)){let t=D(f,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<u;if(_(f,w,S,a),T){const b=l.YU(),x=(e.tW(b),h.JP()),v=y.JP();if(x.Pft(!1),v.Pft(!1),h===y){const C=x.kft();N.Qn(C),C.push(w),C.push(S),h.wyt()}else{const I=x.kft(),G=v.kft();N.Qn(I),N.Qn(G),I.push(w),G.push(S),h.wyt(),y.wyt()}l.sW(o,c),e.iW(b)}}else E(f,w,S)}N.Qn(L)}t.nW()}return!1},b.o2t=function(t){return t=m(t),e(d(this),t,0,0)},b.a2t=function(t,s,i){return t=m(t),e(d(this),t,s,i)},b.u2t=function(){return!0},b.W5=function(){return l(this).W5()},b.G7=function(){return l(this).G7()},b.l2t=function(i,e){const t=m(this),s=(i=m(i),t.K4()),h=this.JP(),r=h.QP();if(0===r.length)return!1;let n=i.JP(),o=n.QP();if(n.Eft()){const l=[...s.c2t(i)];0<l.length&&(o=o.concat(l))}if(0===o.length)return!1;const a=n.Eft()?null:new Set(o),u=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.L5())f.f2t(i)&&(null===a||a.has(f))&&u.add(f);else{let t;if(0===e){if(null===(t=c.A5()))continue}else t=c.N5();t.f2t(i)&&(null===a||a.has(t))&&u.add(t)}}return 0!==u.size&&(n.zft(u),i.wyt(),!0)},b.d2t=function(i,e){const t=m(this),s=(i=m(i),t.K4()),h=t.JP(),r=h.QP();if(0===r.length)return!1;let n=i.JP(),o=n.QP();if(n.Eft()){const l=[...s.c2t(i)];0<l.length&&(o=o.concat(l))}if(0===o.length)return!1;const a=n.Eft()?null:new Set(o),u=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.G7()||!c.f2t(i)||null!==a&&!a.has(c)||u.add(c);for(const f of 0===e?c.children():c.F5())2===e&&f.G7()||f.f2t(i)&&(null===a||a.has(f))&&u.add(f)}return 0!==u.size&&(n.zft(u),i.wyt(),!0)},b.p2t=function(i,e,h){const t=m(this),s=(i=m(i),t.K4()),r=t.JP(),n=r.QP();if(0===n.length)return!1;let o=i.JP(),a=o.QP();if(o.Eft()){const c=[...s.c2t(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const u=o.Eft()?null:new Set(a),l=[];for(let t=0,s=n.length;t<s;++t){const f=n[t];if(0===e){const d=f.k5(h);null!==d&&d.f2t(i)&&(null===u||u.has(d))&&l.push(d)}else if(1===e)for(const p of f.children())if(p.f2t(i)){if(0===h){null!==u&&!u.has(p)||l.push(p);break}--h}}return 0!==l.length&&(o.Bft(l),i.wyt(),!0)},b.m2t=function(t,s,i){const e=d(this);switch(t){case 0:default:return N.compare(e.R5(),s,i);case 1:return N.compare(e.g2t(),s,i)}},b.B5=function(t,s,i,e,h,r,n,o,a,u){t=m(t);const l=d(this),c=M.j1t().jF();for(const f of t.y2t(l,c)){if(!f.OP().SP())return;l.B5(f,{J5:s,Y5:i,q5:e,X5:h,tB:r,hB:n,iB:o,nB:a,aB:u})}},b.z5=function(t){t=m(t);const s=d(this),i=M.j1t().jF();for(const e of t.y2t(s,i))s.z5(e)},b.M2t=function(){const t=d(this);if(t.W5()){const s=t.A5();s.z5(t)}},b.w2t=function(){const t=d(this).A5();return t?t.$F():-1},b.S2t=function(){return d(this).R5()},b.T2t=function(){return d(this).g2t()},b.b2t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.dB(),i.i5()):i.cB(t,s)},b.mB=function(t,s,i,e,h,r,n,o){const a=l(this),u=a.mB(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,dF:r,u:n,v:o});u&&a.i5()},b.x2t=function(){const t=l(this);return t.yB()?t.MB().HT():0},b.v2t=function(){const t=l(this);return t.yB()?t.MB().qT():0},b.C2t=function(t){const s=l(this);t=2===t?!s.Zk():0!==t,s.Zk()!==t&&s.Hk(t)},b.EB=function(t,s){this instanceof self.kF?this.cU(t,s):this.EB(t,s)},b.I2t=function(t,s){this instanceof self.kF?this.fU(t,""+s):this.I2t(t,""+s)},b.G2t=function(t){this instanceof self.kF?this.dU(t):this.G2t(t)},b._2t=function(){this instanceof self.kF?this.aU():this.IB()},b.E2t=function(){this instanceof self.kF?this.uU():this.GB()},b.A2t=function(){return this instanceof self.kF?this.lU():this.A2t()},b.D2t=function(t){this instanceof self.kF?this._setEnabled(0!==t):this.N2t(0!==t)},b.L2t=function(){return this instanceof self.kF?this.kyt():this.O2t()},x.R2t=function(t,s,i){return N.compare(this.s6().Zrt(t),s,i)},v.R2t=function(t,s,i){return N.compare(h(this).Zrt(t),s,i)},x.P2t=function(t){return!!this.s6().Zrt(t)},v.P2t=function(t){return!!h(this).Zrt(t)},b.k2t=function(i,e){const h=m(this),t=h.JP(),r=t.QP();if(!r.length)return!1;let n=h.KV(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t],l=n?u.jF().BMt(h.zMt()):0,c=u.Zrt(l+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=u)}return t.Jft(o),!0},b.F2t=function(t){const s=m(this);return(s.K4().k1t().nSt()?n:r)(s,t)},b.Rz=function(t){const s=new Set(N.ao(t)),i=d(this).aj();return s.isSubsetOf(i)},b.j2t=function(){return d(this).B2t()},b.z2t=function(){return d(this).aj().size},b.U2t=function(t){return d(this).W2t(t)},b.Q2t=function(t,s){const i=N.ao(s);if(0!==i.length){const e=d(this),h=new Set(e.aj());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.lj(h)}},b.J2t=function(){M.VF(d(this))},b.V2t=function(){return!0},b.Y2t=function(){return!0},x.H2t=function(t,s){this.s6().Xrt(t,s)},v.H2t=function(t,s){h(this).Xrt(t,s)},x.q2t=function(t,s){const i=this.s6(),e=i.Zrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Xrt(t,e+s)},v.q2t=function(t,s){const i=h(this),e=i.Zrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Xrt(t,e+s)},x.Z2t=function(t,s){const i=this.s6(),e=i.Zrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Xrt(t,e-s))},v.Z2t=function(t,s){const i=h(this),e=i.Zrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Xrt(t,e-s))},x.X2t=function(t,s){this.s6().Xrt(t,s?1:0)},v.X2t=function(t,s){h(this).Xrt(t,s?1:0)},x.K2t=function(t){const s=this.s6();s.Xrt(t,0===s.Zrt(t)?1:0)},v.K2t=function(t){const s=h(this);s.Xrt(t,0===s.Zrt(t)?1:0)},b.$2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.tbt(),i.BZ("state"),i.LT(s,"state"),M.sbt("state",{ibt:!0})},b.ebt=function(){return JSON.stringify(d(this).NT("state"))},b.hbt=function(){return d(this).jF().nf()},b.rbt=function(){let t=M.P1t().b0t(),s=t.YP();for(const i of M.c2t(t))++s;return s},b.nbt=function(){return M.P1t().b0t().JP().QP().length},x.sj=function(){return this.s6().sj()},v.sj=function(){return h(this).sj()},x.$F=function(){return this.s6().$F()},v.$F=function(){return h(this).$F()},b.apt=function(t){const s=d(this);return t.toLowerCase()===M.o3().fpt(s)},b.fj=function(t){const s=d(this);M.o3().fj(s,t)},b.obt=function(t){const s=m(this);return M.o3().Fdt().abt(s.JP().QP(),t),!0},b.ubt=function(){return d(this).ej()},N.lbt=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.pq,M=s.ert,w=s.hrt,S=Object.assign({},b,2<=i?v:x);h&&(y.uTt=S.uTt,y.lTt=S.lTt,y.cTt=S.cTt,y.fTt=S.fTt,y.dTt=S.dTt,M.ST=S.ST,M.xT=S.xT,M.pTt=S.pTt,M.gTt=S.gTt,M.MTt=S.MTt,M.TTt=S.TTt,w.cbt=S.wT,w.fbt=S.bT,w.A3=S.D3),r&&(y.bTt=S.bTt,y.xTt=S.xTt,M.Im=S.Im,M.wm=S.wm,M.n_=S.n_,w.dbt=S.Mm,w.pbt=S.Em,w.mbt=S.vTt,w.gbt=S.CTt,w.ybt=S.ITt,w.Mbt=S.GTt,w.wbt=S._Tt,w.Sbt=S.ETt),n&&(y.Tbt=S.ATt,y.bbt=S.DTt,y.NTt=S.NTt,M.ck=S.ck,M.LTt=S.LTt,M.OTt=S.OTt,M.RTt=S.RTt,M.PTt=S.PTt,M.kTt=S.kTt,w.xbt=S.fk),o&&(y.Zk=S.Zk,y.FTt=S.FTt,M.Hk=S.Hk,M.FA=S.FA,M.BTt=S.BTt,w.Opacity=S.PA,w.vbt=S.BA),a&&(y.zTt=S.zTt,y.UTt=S.UTt,y.WTt=S.WTt,M.QTt=S.QTt,M.JTt=S.JTt,M.VTt=S.VTt,M.YTt=S.YTt,M.CT=S.CT,w.qTt=S.qTt,w.ZTt=S.ZTt,w.XTt=S.XTt,w.KTt=S.KTt,w.$Tt=S.$Tt),u&&(y.t2t=S.t2t,M.s2t=S.s2t,M.i2t=S.i2t),d&&(y.u2t=S.u2t,y.W5=S.W5,y.G7=S.G7,y.l2t=S.l2t,y.d2t=S.d2t,y.p2t=S.p2t,y.m2t=S.m2t,M.B5=S.B5,M.z5=S.z5,M.M2t=S.M2t,w.w2t=S.w2t,w.S2t=S.S2t,w.T2t=S.T2t),p&&(M.b2t=S.b2t,M.mB=S.mB,w.x2t=S.x2t,w.v2t=S.v2t),l&&(y.Zk=S.Zk,M.Hk=S.C2t,M.Cbt=S.EB,M.Ibt=S.I2t,M.Gbt=S.G2t),c&&(y._bt=S.A2t,M.Ebt=S._2t,M.Abt=S.E2t),f&&(y.hc=S.L2t,M.Dbt=S.D2t),m&&(y.e2t=S.e2t,y.o2t=S.o2t,y.a2t=S.a2t,s.Nbt=T),e||(y.R2t=S.R2t,y.P2t=S.P2t,y.k2t=S.k2t,y.F2t=S.F2t,y.Rz=S.Rz,M.H2t=S.H2t,M.q2t=S.q2t,M.Z2t=S.Z2t,M.X2t=S.X2t,M.K2t=S.K2t,M.Q2t=S.Q2t,y.V2t=S.V2t,y.Y2t=S.Y2t,M.J2t=S.J2t,M.$2t||(M.$2t=S.$2t),w.ebt||(w.ebt=S.ebt),w.rbt=S.rbt,w.nbt=S.nbt,w.Lbt=S.sj,w.Obt=S.$F,w.hbt=S.hbt,w.j2t=S.j2t,w.z2t=S.z2t,w.U2t=S.U2t,y.apt=S.apt,M.fj=S.fj,M.obt=S.obt),g&&(w.ubt=S.ubt)}}{const $o=self.ks;$o.jdt=class extends $o.lr{constructor(t){super(),this.Hft=t,this.vf="",this.oL=-1,this.Rbt="",this.Pbt=!1,this.kbt=null,this.e0t=0,this.Dmt=[],this.u0t=null,this.Fbt=new Map,this.jbt=null,this.Bbt=null,this.zbt=-1,this.Pyt=null,this.Ubt=null,this.Wbt=!1}mr(){this.vf="",this.oL=-1,this.Rbt="",this.kbt=null,this.Bbt=null,this.Pyt=null,this.Ubt=null,this.zbt=-1,$o.Qn(this.Dmt),this.u0t&&(this.u0t.clear(),this.u0t=null);for(const t of this.Fbt.values())t.mr();this.Fbt.clear(),this.jbt=null}MT(){const t=this.Hft,s=t.K4().XV(),i=t.P1t(),e=(this.kbt=i.m3(),this.e0t=i.m0t()+1,t.Apt(this.kbt));e&&(this.Bbt=e,this.Pyt=e.$yt(),this.Ubt=e.Kyt().map(t=>t.Eet()),e.eyt())&&(this.zbt=e.eMt());for(const r of s){const n=r.JP();n.Eft()&&!this.kbt.Ggt(r)||(this.Dmt.push(r),this.Fbt.set(r,$o.pr($o.Qbt,n)))}const h=t.g3();this.u0t=0<h.size?h:null}Jbt(t){this.vf="timer",this.MT(),this.oL=this.Hft.K4().O3()+t}Vbt(t){this.vf="walltimer",this.MT(),this.oL=this.Hft.K4().P3()+t}Ybt(t){this.vf="signal",this.MT(),this.Rbt=t.toLowerCase()}abt(t,s){this.vf="instance-signals",this.MT(),this.Rbt=s.toLowerCase(),this.jbt=new Set(t)}Hbt(t){this.vf="promise",this.MT(),t.then(()=>this.hpt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.hpt()})}qbt(){return"timer"===this.vf}Zbt(){return"walltimer"===this.vf}ipt(){return"signal"===this.vf}lpt(){return"instance-signals"===this.vf}Ipt(){return"promise"===this.vf}ept(){return this.Rbt}Xbt(){return this.Pbt}hpt(){this.Pbt=!0}cpt(t){this.jbt.delete(t),0===this.jbt.size&&this.hpt()}Udt(){return this.qbt()?this.oL<=this.Hft.K4().O3():this.Zbt()?this.oL<=this.Hft.K4().P3():this.Xbt()}Kbt(t){t.l0t(this.kbt,this.e0t);for(const[i,e]of this.Fbt.entries()){const h=i.JP();e.l0t(h)}this.u0t&&t._0t([...this.u0t]);const s=this.Bbt;s&&(s.pyt(this.Pyt),s.Kyt().map((t,s)=>t.cht(this.Ubt[s])),s.eyt())&&s.hMt(this.zbt)}Wdt(t){this.Kbt(t),this.kbt.hyt(t),this.Bbt&&this.Bbt.eyt()&&this.Bbt.vyt(this.zbt),this.Hft.Odt(this.Dmt),this.Wbt=!0}async Ydt(t){this.Kbt(t);for(const s of this.kbt.ryt(t))await this.Hft.K4().ydt(s);this.Bbt&&this.Bbt.eyt()&&this.Bbt.vyt(this.zbt),this.Hft.Odt(this.Dmt),this.Wbt=!0}Qdt(){return this.Wbt}vft(t){for(const s of this.Fbt.values())s.vft(t);if("instance-signals"===this.vf){for(const i of t)this.jbt.delete(i);0===this.jbt.size&&this.hpt()}}x7(){const t={},s={wt:this.vf,t:this.oL,st:this.Rbt,s:this.Pbt,ev:this.kbt.nY(),sm:this.Dmt.map(t=>t.nY()),dsm:this.u0t?[...this.u0t].map(t=>t.nY()):null,sols:t};this.kbt.Jgt(this.e0t)&&(s.act=this.kbt.B1t(this.e0t).nY());for(const[i,e]of this.Fbt)t[i.nY().toString()]=e.x7();return"instance-signals"===this.vf&&(s.pi=[...this.jbt].map(t=>t.$F())),s}static Gpt(t,s){const i=t.K4(),e=t.q1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.X1t(s.act);if(!n)return null;h=n._O()}const r=$o.pr($o.jdt,t);r.oL=s.t,s.hasOwnProperty("wt")?r.vf=s.wt:r.vf=-1===r.oL?"signal":"timer",r.Rbt=s.st,r.Pbt=s.s,r.kbt=e,r.e0t=h;for(const o of s.sm){const a=i.BU(o);a&&r.Dmt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.BU(u);l&&(r.u0t||(r.u0t=new Set),r.u0t.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.BU(d);if(p){const m=$o.pr($o.Qbt,null);m.v7(t,f),r.Fbt.set(p,m)}}if("instance-signals"===r.vf){r.jbt=new Set;for(const g of s.pi){const y=i.I4(g);y&&r.jbt.add(y)}}return r}}}{const ta=self.ks;ta.Qbt=class extends ta.lr{constructor(t){super(),this.yft=null,this.$bt=!0,this.q8=[],t&&(this.yft=t.jF(),this.$bt=t.Eft(),ta.Hn(this.q8,t.kft()))}mr(){this.yft=null,ta.Qn(this.q8)}l0t(t){t.Pft(this.$bt),ta.Hn(t.kft(),this.q8)}vft(t){ta.$n(this.q8,t)}x7(){return{sa:this.$bt,insts:this.q8.map(t=>t.$F())}}v7(t,s){const i=t.K4();this.$bt=!!s.sa,ta.Qn(this.q8);for(const e of s.insts){const h=i.I4(e);h&&this.q8.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const sa=self.ks;sa.txt=class extends sa.lr{constructor(t){super(),this.gf=t.runtime,this.Mr=t.name??"",this.sxt=!!t.oP,this.ixt=!!t.hxt,this.rxt=!!t.dP,this.nxt=!!t.oxt,this.axt=!!t.mP,this.uxt=!!t.lxt,this.cxt=!!t.TP,this.fxt=!!t.cP,this.dxt=!!t.yP,this.pxt=t.mxt,this.gxt=null,this.yxt=new Map,this.Mxt=new Map,this.wxt=new Map,this.Sxt=new Map,this.Txt=t.bxt,this.xxt=null}mr(){this.gf=null}K4(){return this.gf}nf(){return this.Mr}vxt(){}upt(){return(2<=this.rSt()?this.xxt:this).constructor}rSt(){return this.pxt}Cxt(t=!1){let s=this.Txt;return t&&"function"!=typeof s&&2<=this.rSt()?globalThis.a6:s}aP(){return this.sxt}lP(){return this.ixt}fP(){return this.fxt}MP(){return this.dxt}pP(){return this.rxt}YS(){return this.nxt}gP(){return this.axt}SP(){return this.uxt}bP(){return this.cxt}_Mt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.yxt.get(t);return i||(i=t.bind(s),this.yxt.set(t,i)),i}sSt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.Mxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}iSt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.wxt,t),r=u(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}eSt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=u(this.Sxt,t),n=u(r,i),o=u(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Ixt(t){if(!this.aP())throw new Error("must be single-global plugin");this.gxt=t}EP(){if(this.aP())return this.gxt;throw new Error("must be single-global plugin")}DP(){if(this.aP())return this.gxt.DP();throw new Error("must be single-global plugin")}Gxt(){const t=this.rSt(),s=(sa.rP._xt(this,t),this.Cxt(!0));if(s){if(this.xxt=new s,!(this.xxt instanceof self.iP))throw new TypeError("plugin class must derive from IPlugin")}else this.xxt=new self.iP;sa.rP.Ext(t)}IP(){return this.xxt}}}{const ia=self.ks;ia.Axt=class extends ia.txt{constructor(t,s){super(t),this.Dxt=s,this.Nxt=0,this.Lxt=new Map,this.Oxt("elem-focused",t=>t.Rxt()),this.Oxt("elem-blurred",t=>{t&&t.Pxt()})}mr(){super.mr()}kxt(t){const s=this.Nxt++;return this.Lxt.set(s,t),s}Fxt(t){this.Lxt.delete(t)}Oxt(t,i){this.gf.Aj(this.Dxt,t,t=>{const s=this.Lxt.get(t.elementId);i(s,t)})}}}{const ea=self.ks;ea.jxt=class extends ea.lr{constructor(t){super(),this.yft=t,this.gf=t.K4(),this.Bxt=t.OP()}mr(){this.yft=null,this.gf=null,this.Bxt=null}jF(){return this.yft}K4(){return this.gf}OP(){return this.Bxt}lz(){return this.yft.lz()}vxt(){}ySt(t){}iTt(t){}eTt(t){}R9(t){}z9(){}F9(){}uq(t){}zxt(){}Cxt(){return null}Uxt(t,s,i){const e=ea.pr(ea.Event,t,s);e.Wxt=this,i&&Object.assign(e,i),this.jF().Jq(e)}}}{const ha=self.ks;ha.Qxt=class extends ha.lr{constructor(t,s){super(),this.vi=t,this.Dxt=s,this.Jxt=null,this.gf=t.K4(),this.yft=this.vi.jF(),this.Vxt=this.yft.sTt(),this.EZ=null,this.DZ=null,this.kj=!1,this.jj=!1,this.G0=null,this.AG=!1}mr(){this.AG=!0,this.Yxt(),this.Hxt(),this.EZ=null,this.DZ=null,this.G0&&(this.G0.mr(),this.G0=null),this.vi=null,this.gf=null,this.yft=null,this.Vxt=null}gr(){return this.AG}s6(){return this.vi}K4(){return this.gf}jF(){return this.yft}OP(){return this.Vxt.OP()}sTt(){return this.Vxt}qxt(){return this.vi.G4()}Ij(t){return this.gf.Ij(t,this.vi,null)}Zxt(t){return this.gf.Zxt(t,this.vi,null)}_j(t){return this.gf._j(t,this.vi,null)}Xxt(t,s){return this.gf.Xxt(t,this.vi,s)}Kxt(t,s){return this.gf.Kxt(t,this.vi,s)}$xt(t){return this.gf.$xt(t)}tvt(t,s){this.gf.Aj(this.Dxt,t,s)}svt(t){for(const[s,i]of t)this.tvt(s,i)}ivt(t,s){this.gf.wf(this.Dxt,t,s)}evt(t,s){return this.gf.z4(this.Dxt,t,s)}hvt(t,s){if(!this.gf.JO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Dxt,handler:t,data:s,responseId:null});this.ivt(t,s)}rvt(t){if(!t)throw new Error("cannot set empty component id");this.Jxt=t}nvt(){if(this.Jxt)return this.gf.Qj(this.Jxt);throw new Error("wrapper extension component id not set")}Vj(t,s){if(!this.Jxt)throw new Error("wrapper extension component id not set");this.gf.Vj(this.Jxt,t,s)}ovt(t){for(const[s,i]of t)this.Vj(s,i)}AU(t,s){if(!this.Jxt)throw new Error("wrapper extension component id not set");this.gf.AU(this.Jxt,t,s)}DU(t,s){if(this.Jxt)return this.gf.DU(this.Jxt,t,s);throw new Error("wrapper extension component id not set")}jX(){}avt(){}uvt(){if(!this.kj){if(!this.EZ)if(this.gf.Rj()){const s=globalThis.C3Debugger,i=this.OP();this.EZ=()=>{const t=performance.now();this.jX(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.EZ=()=>this.jX();this.gf.qf().addEventListener("tick",this.EZ),this.kj=!0}}Yxt(){this.kj&&(this.gf.qf().removeEventListener("tick",this.EZ),this.kj=!1)}lvt(){return this.kj}cvt(){if(!this.jj){if(!this.DZ)if(this.gf.Rj()){const s=globalThis.C3Debugger,i=this.OP();this.DZ=()=>{const t=performance.now();this.avt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.DZ=()=>this.avt();this.gf.qf().addEventListener("tick2",this.DZ),this.jj=!0}}Hxt(){this.jj&&(this.gf.qf().removeEventListener("tick2",this.DZ),this.jj=!1)}fvt(){return this.jj}dvt(){return[]}NT(){return null}LT(t){}zrt(t){}Yrt(t,s){}znt(t,s,i){if(0!==s){const e=this.zrt(t);if("number"!=typeof e)throw new Error("expected number");this.Yrt(t,e+s,i)}}pvt(t,s,i,e){}mvt(t,...s){t.call(this,...s)}gvt(t,...s){return t.call(this,...s)}Cxt(){return null}Uxt(t,s,i){if(this.vi.yvt()){const e=this.qxt(),h=ha.pr(ha.Event,t,s);h.PB=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}YS(){return!1}}}{const ra=self.ks;ra.Mvt=class extends ra.Qxt{constructor(t,s){super(t,s),this.Lst=t.D4(),this.wvt=null,this.Svt=null}mr(){if(this.wvt){const t=this.gf.qf();t.removeEventListener("renderercontextlost",this.wvt),t.removeEventListener("renderercontextrestored",this.Svt),this.wvt=null,this.Svt=null}this.Lst=null,super.mr()}Tvt(){this.bvt()}xvt(){}vvt(){}bvt(){if(!this.wvt){this.wvt=()=>this.z8(),this.Svt=()=>this.Cvt();const t=this.gf.qf();t.addEventListener("renderercontextlost",this.wvt),t.addEventListener("renderercontextrestored",this.Svt)}}z8(){this.xvt()}Cvt(){this.vvt()}D4(){return this.Lst}vit(){return!1}xit(){if(!this.vit())throw new Error("original size not known");const t=this.Ivt();if(t)return t.Mm()}Iit(){if(!this.vit())throw new Error("original size not known");const t=this.Ivt();if(t)return t.Em()}Ivt(){return null}Gvt(){const t=this.Ivt();if(t){const s=t.Fb();if(s)return[s.Mm(),s.Em()]}return[100,100]}_vt(){const t=this.Ivt();return t?t.k_():null}Evt(){const t=this.Ivt();return t?t.Avt():null}Dvt(){const t=this.Ivt();return!!t&&t.Nvt()}yTt(t){const s=this.vi.D4();return[s.wT(),s.bT(),s.a5()]}zxt(t,s,i){}Lvt(t,s){}s7(){return!0}}}{const na=self.ks,oa=na.pr(na.Rect);na.Ovt=class extends na.Mvt{constructor(t,s){super(t,s),this.Rvt=this.OP().kxt(this),this.Pvt=!0,this.kvt=!1,this.Fvt=!1,this.jvt=-.2,this.Bvt=na.pr(na.Rect,0,0,-1,-1);const i=this.gf.zR();this.zvt=i.J6(),this.Uvt=i.V6(),this.Wvt=-1,this.Qvt=-1,this.Jvt=!1,this.uvt()}mr(){this.OP().Fxt(this.Rvt),this.Vvt("destroy"),this.Rvt=-1,super.mr()}vB(){if(this.gf.JO())throw new Error("not valid in worker mode");return this.Yvt("get-element")}Vvt(t,s){(s=s||{}).elementId=this.Rvt,this.ivt(t,s)}Yvt(t,s){return(s=s||{}).elementId=this.Rvt,this.hvt(t,s)}Hvt(t,s){return(s=s||{}).elementId=this.Rvt,this.evt(t,s)}qvt(t){t=t||{};const s=this.D4();t.elementId=this.Rvt,t.isVisible=s.Zk(),t.htmlIndex=s.N4().K6(),t.htmlZIndex=s.tU(),Object.assign(t,this.Zvt()),this.Pvt=!!t.isVisible,this.hvt("create",t),this.Xvt(!0)}C2t(t){this.Pvt!==(t=!!t)&&(this.Pvt=t,this.Vvt("set-visible",{isVisible:t}))}jX(){this.Xvt(!1)}Kvt(){const t=this.gf.zR().rU();return"Android"===na.ai.li&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}Xvt(l){if(!this.s6().nU()){let t=this.D4(),s=t.N4(),i=t.l5(),[e,h]=s.AF(i.Au(),i.Du()),[r,n]=s.AF(i.Nu(),i.Lu()),o=this.gf.zR(),a=o.JR(),u=o.YR();if(t.Zk()&&s.Zk())if(!this.Kvt()&&(r<=0||n<=0||a<=e||u<=h))this.C2t(!1);else{oa.set(e,h,r,n);const c=o.J6(),f=o.V6(),d=s.K6(),p=t.tU();if(!l&&oa.equals(this.Bvt)&&this.zvt===c&&this.Uvt===f&&this.Wvt===d&&this.Qvt===p)this.C2t(!0);else{this.Bvt.I(oa),this.zvt=c,this.Uvt=f,this.Wvt=d,this.Qvt=p,this.C2t(!0);let t=null;this.Fvt&&(t=s.oU()+this.jvt),this.Vvt("update-position",{left:Math.round(this.Bvt.Au()),top:Math.round(this.Bvt.Du()),width:Math.round(this.Bvt.width()),height:Math.round(this.Bvt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.C2t(!1)}}IB(){this.Yvt("focus",{focus:!0})}GB(){this.Yvt("focus",{focus:!1})}Rxt(){this.kvt=!0}Pxt(){this.kvt=!1}A2t(){return this.kvt}EB(t,s){this.Vvt("set-css-style",{prop:na.Vo(t),val:s})}I2t(t,s){this.Vvt("set-attribute",{name:t,val:s})}G2t(t){this.Vvt("remove-attribute",{name:t})}$vt(){this.Jvt||(this.Jvt=!0,Promise.resolve().then(()=>{this.Jvt=!1,this.Vvt("update-state",this.Zvt())}))}Zvt(){}tCt(){return this.Rvt}}}{const aa=self.ks,ua=self.BB;aa.sCt=class extends aa.lr{constructor(t){super(),this.gf=t.runtime,this.Mr=t.name??"",this.iCt=aa.pr(aa.mc),this.eCt=aa.pr(aa.mc),this.pxt=t.mxt,this.Txt=t.bxt,this.hCt=null}mr(){this.eCt.mr(),this.iCt.mr(),this.gf=null}K4(){return this.gf}nf(){return this.Mr}vxt(){}rSt(){return this.pxt}Cxt(t=!1){let s=this.Txt;return t&&"function"!=typeof s&&2<=this.rSt()?globalThis.gU:s}rCt(t){this.iCt.Sc(t)}fX(){return this.iCt.Tc()}jV(t){this.eCt.Sc(t)}UV(t){this.eCt.uc(t)}QP(){return this.eCt.Tc()}Gxt(){const t=this.rSt(),s=(aa.rP._xt(this,t),this.Cxt(!0));if(s){if(this.hCt=new s,!(this.hCt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.hCt=new ua;aa.rP.Ext(t)}DB(){return this.hCt}}}{const la=self.ks;la.nCt=class extends la.lr{constructor(t){super(),this.gf=t.K4(),this.WMt=t,this.yft=t.jF(),this.oCt=t.NB(),this.oCt.rCt(this.yft)}mr(){this.gf=null,this.WMt=null,this.yft=null,this.oCt=null}vxt(){}RB(){return this.WMt}jF(){return this.yft}K4(){return this.gf}NB(){return this.oCt}}}{const ca=self.ks;ca.aCt=class extends ca.lr{constructor(t,s){super(),this.uCt=t,this.Dxt=s,this.vi=t.kB(),this.gf=t.K4(),this.WMt=t.RB(),this.Vxt=this.WMt.sTt(),this.kj=!1,this.jj=!1,this._U=!1,this.G0=null}mr(){this.Yxt(),this.Hxt(),this.lCt(),this.G0&&(this.G0.mr(),this.G0=null),this.uCt=null,this.vi=null,this.gf=null,this.WMt=null,this.Vxt=null}NB(){return this.WMt.NB()}cCt(){return this.uCt}kB(){return this.vi}jF(){return this.vi.jF()}D4(){return this.vi.D4()}K4(){return this.gf}RB(){return this.WMt}sTt(){return this.Vxt}qxt(){return this.uCt.qxt()}Ij(t){return this.gf.Ij(t,this.vi,this.WMt)}Zxt(t){return this.gf.Zxt(t,this.vi,this.WMt)}_j(t){return this.gf._j(t,this.vi,this.WMt)}fCt(){}jX(){}avt(){}dCt(){}uvt(){this.kj||(this.gf.bU(this),this.kj=!0)}Yxt(){this.kj&&(this.gf.xU(this),this.kj=!1)}lvt(){return this.kj}cvt(){this.jj||(this.gf.vU(this),this.jj=!0)}Hxt(){this.jj&&(this.gf.CU(this),this.jj=!1)}fvt(){return this.jj}pCt(){this._U||(this.gf.IU(this),this._U=!0)}lCt(){this._U&&(this.gf.GU(this),this._U=!1)}mCt(){return this._U}dvt(){return[]}tvt(t,s){this.gf.Aj(this.Dxt,t,s)}gCt(t,s){}NT(){return null}LT(t){}zrt(t){}Yrt(t,s){}znt(t,s){if(0!==s){const i=this.zrt(t);if("number"!=typeof i)throw new Error("expected number");this.Yrt(t,i+s)}}pvt(t,s,i,e){}mvt(t,...s){t.call(this,...s)}gvt(t,...s){return t.call(this,...s)}Cxt(){return null}Uxt(t,s,i){if(this.uCt.yvt()){const e=this.qxt(),h=ca.pr(ca.Event,t,s);h.yCt=e,h.PB=e.PB,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.ks),i=(r.gq={},r.Zat={},r.Fs()),e=[],h=[],n=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.rP=class extends r.lr{constructor(t,s){super(),this.gf=t,this.MCt=[],this.vMt=null,this.wCt=[],this.SCt=new Map,this.TCt=null,this.bCt=null,this.xCt=new Set(s)}vCt(t){const s=t[19],i=this.gf._yt(t[0]);if(!i)throw new Error("missing plugin");r.lbt(t,i,s);const e=2<=s?r.txt:i,h=r.pr(e,{runtime:this.gf,oP:t[1],hxt:t[2],dP:t[5],mP:t[8],oxt:t[9],lxt:t[13],TP:t[14],cP:t[17],yP:t[18],mxt:s,name:t[20],bxt:2<=s?i:null});h.vxt(),this.MCt.push(h),l.set(i,h)}CCt(){this.vMt=r.pr(r.gq.mq,{runtime:this.gf,oP:!0}),this.vMt.vxt()}ICt(t){const i=t[1],e=t[2],h=this.gf._yt(t[0]);if(!h)throw new Error("missing behavior");this.SCt.set(h,()=>{const t=2<=i?r.sCt:h,s=r.pr(t,{runtime:this.gf,name:e,mxt:i,bxt:2<=i?h:null});s.vxt(),this.wCt.push(s),c.set(h,s),!this.TCt&&r.Zat.GCt&&s instanceof r.Zat.GCt?this.TCt=s:!this.bCt&&r.Zat.jumpthru&&s instanceof r.Zat.jumpthru&&(this.bCt=s),s.Gxt()})}_Ct(t){const s=this.SCt.get(t);s&&(s(),this.SCt.delete(t))}static _xt(t,s=1){if(r.rP._xt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Ext(t=1){if(r.rP.Ext!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static WF(){if(r.rP.WF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static hP(t){if(r.rP.hP!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static ECt(t){n.push(t)}static ACt(){n.pop()}static vj(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}DCt(){for(const t of this.MCt)t.Gxt()}static CP(t){return l.get(t)||null}static zB(t){return c.get(t)||null}p8(){return this.vMt}NCt(){return this.TCt}LCt(){return this.bCt}Qj(t){return this.xCt.has(t)}},o=r.rP._xt,a=r.rP.Ext,t=r.rP.WF,u=r.rP.hP}{const fa=self.ks,da=new Set;fa.OCt=class extends fa.lr{constructor(){super(),this.RCt=0,this.E8="",this.A8=0,this.PCt=0,this.kCt=0,this.sg=0,this.ig=0,this.FCt=!1,this.jCt=!1,this.BCt=null,this.zCt="",this.vG=fa.pr(fa.Rect),this.UCt=fa.pr(fa.nl),this.WCt="",this.QCt=new self.Z4(this),da.add(this)}mr(){this.GG(),this.BCt&&0===this.BCt.Q8()&&this.BCt.mr(),this.BCt=null,da.delete(this),this.JCt()}static z8(){for(const t of da)t.zCt="",t.vG.set(0,0,0,0),t.UCt.Gl(t.vG)}VCt(t){this.E8=t[0],this.A8=t[1],this.PCt=t[2],this.kCt=t[3],this.sg=t[4],this.ig=t[5],this.FCt=t[6],this.jCt=!0}YCt(t,s){if(this.BCt)throw new Error("already loaded asset");this.E8=s;const i={};return fa.vo(s)&&(i.h8="remote"),this.X4(t,i),this.BCt.o8()}HCt(t,s){if(this.BCt)throw new Error("already loaded asset");this.E8="",this.A8=s.size,this.BCt=fa.pr(fa.r8,t.NO(),{blob:s,size:this.A8,h8:"local"})}qCt(t){if(t===this)throw new Error("cannot replace with self");this.RCt++,this.GG(),this.E8=t.E8,this.A8=t.A8,this.PCt=t.PCt,this.kCt=t.kCt,this.sg=t.sg,this.ig=t.ig,this.FCt=t.FCt,this.jCt=t.jCt,this.BCt=t.BCt,this.zCt=t.zCt,this.vG=t.vG,this.UCt=t.UCt,this.JCt()}n8(){return this.E8}cc(){return this.A8}ZCt(){return this.PCt}XCt(){return this.kCt}Nvt(){return this.FCt}Mm(){return this.sg}Em(){return this.ig}KCt(){return this.BCt.Mm()}$Ct(){return this.BCt.Em()}X4(t,s){if(this.BCt)throw new Error("already got asset");s=Object.assign({},s,{url:this.n8(),size:this.cc()}),this.BCt=t.e8(s)}O8(){return this.BCt&&this.BCt.O8()}async jW(t,s){if(!this.BCt)throw new Error("no asset");if(this.zCt)throw new Error("already loaded texture");const i=this.RCt,e=(this.zCt="loading",await this.BCt.jW(t,s));if(this.RCt!==i)return null;if(!e)return this.zCt="",null;this.zCt="loaded",this.jCt||(this.sg=e.Mm(),this.ig=e.Em(),this.jCt=!0);const h=this.FCt?this.ig:this.sg,r=this.FCt?this.sg:this.ig;return this.vG.set(this.PCt,this.kCt,this.PCt+h,this.kCt+r),this.vG.It(e.Mm(),e.Em()),this.UCt.Gl(this.vG),this.FCt&&this.UCt.Ll(),e}GG(){this.zCt&&(this.BCt&&this.BCt.GG(),this.zCt="",this.vG.set(0,0,0,0),this.UCt.Gl(this.vG))}Fb(){return this.BCt&&"loaded"===this.zCt?this.BCt.Fb():null}k_(){return this.vG}Avt(){return this.UCt}T6(){return this.QCt}tIt(){return this.BCt}async sIt(t){t=t||await this.BCt.J8();const s=fa.ko(this.sg,this.ig),i=s.getContext("2d");return this.FCt?(i.rotate(Math.PI/-2),i.translate(-this.ig,0),i.drawImage(t,this.PCt,this.kCt,this.ig,this.sg,0,0,this.ig,this.sg)):i.drawImage(t,this.PCt,this.kCt,this.sg,this.ig,0,0,this.sg,this.ig),s}async iIt(t){if(!this.WCt){const s=await this.sIt(t),i=await fa.Fo(s);this.WCt=URL.createObjectURL(i)}return this.WCt}JCt(){this.WCt&&(URL.revokeObjectURL(this.WCt),this.WCt="")}}}{const pa=self.ks;pa.eIt=class extends pa.lr{constructor(t){super(),this.Mr=t[0],this.hIt=t[1],this.Owt=!!t[2],this.Mot=t[3],this.rIt=t[4],this.nIt=!!t[5],this._J=t[6],this.oIt=t[7].map(t=>pa.pr(pa.aIt,t)),this.uIt=new self.YB(this)}static lIt(t,s){const i=pa.pr(pa.eIt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.oIt.push(pa.aIt.lIt(t)),i}mr(){for(const t of this.oIt)t.mr();pa.Qn(this.oIt)}cIt(t){for(const s of this.oIt)s.lz().X4(t)}fIt(s,i){return Promise.all(this.oIt.map(t=>t.lz().jW(s,i)))}dIt(){for(const t of this.oIt)t.lz().GG()}nf(){return this.Mr}nY(){return this._J}iz(){return this.oIt.length}hz(){return this.oIt}pIt(t){if((t=Math.floor(t))<0||t>=this.oIt.length)throw new RangeError("invalid frame");return this.oIt[t]}mIt(t,s){(s=Math.floor(s))<0?this.oIt.unshift(t):s>=this.oIt.length?this.oIt.push(t):this.oIt.splice(s,0,t)}gIt(t){if((t=Math.floor(t))<0||t>=this.oIt.length)throw new RangeError("invalid frame");this.oIt[t].mr(),this.oIt.splice(t,1)}yIt(i){for(let t=0,s=this.oIt.length;t<s;++t)if(pa.Mh(this.oIt[t].Az(),i))return t;return-1}MIt(t){if("string"!=typeof t)return t;{const s=this.yIt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}HB(){return this.hIt}qB(){return this.Owt}ZB(){return this.Mot}KB(){return this.rIt}sz(){return this.nIt}wIt(){return this.uIt}}}{const ma=self.ks,ga=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ma.aIt=class extends ma.lr{constructor(t){super(),this.SIt=ma.pr(ma.OCt),this.SIt.VCt(t),this.TIt=t[7],this.bIt=ma.pr(ma.nu,t[8],t[9]),this.xIt=t[10].map(t=>ma.pr(ma.vIt,this,t)),this.CIt=new Map;for(const i of this.xIt)this.CIt.set(i.nf().toLowerCase(),i);this.IIt=null;const s=t[11];6<=s.length&&(this.IIt=ma.pr(ma.Bl,s)),this.ey=t[12]||"",this.GIt=new self.uz(this)}static lIt(t){const s=ma.pr(ma.aIt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.SIt.HCt(t,ga),s}mr(){this.IIt&&(this.IIt.mr(),this.IIt=null),this.SIt.mr(),this.SIt=null}lz(){return this.SIt}cz(){return this.TIt}pz(){return this.bIt.cu()}gz(){return this.bIt.du()}Iz(){return this.IIt}vz(t){return this.CIt.get(t.toLowerCase())||null}xz(t){return(t=Math.floor(t))<0||t>=this.xIt.length?null:this.xIt[t]}wz(){return this.xIt.length}Az(){return this.ey}rz(){return this.GIt}}}{const ya=self.ks;ya.vIt=class extends ya.lr{constructor(t,s){super(),this._It=t,this.Mr=s[0],this.EIt=ya.pr(ya.nu,s[1],s[2])}mr(){}nf(){return this.Mr}wT(){return this.EIt.cu()}bT(){return this.EIt.du()}AIt(){return this.EIt}}}{const T=self.ks,Ma=self.C3Debugger,wa=self.NP;T.But=class extends T.lr{constructor(s,t,i){super();const e=s._yt(i[1]),[h,r]=(this.gf=s,this.Bxt=T.rP.CP(e),this.Vxt=null,this.DIt=e.Instance,this.iy=t,this._J=i[11],this.Mr=i[0],this.cMt=this.gf.V1t(i[14]),this.NIt=!!i[9],this.LIt=!!i[2],this.OIt=!!i[10],this.RIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],PIt:s.V1t(t[3])})),this.kIt=i[4],this.FIt=i[5],this.ixt=this.Bxt.lP(),this.jIt=T.pr(T.Event.qf),this.uV=null,s.RO().GR());if(this.BIt=T.pr(T.zIt,h,r),this.UIt=!0,this.WIt=null,this.QIt=null,this.JIt=-1,this.VIt=null,this.YIt=null,this.HIt=null,this.qIt=null,this.ZIt=null,this.XIt=!1,this.KIt=null,this.$It=i[8].map(t=>T.tGt.ux(this,t)),this.sGt=[],this.iGt=new Map,this.eGt=new Map,this.hGt=new Set,this.rGt=new Map,this.nGt=T.pr(T.gft,this),this.oGt=null,this.aGt=0,this.uGt=!1,this.KIt=null,this.SIt=null,this.lGt=null,this.cGt=null,this.fGt=null,this.dGt=0,this.jwt=new Map,this.Bwt=new Map,this.q8=[],this.pGt=new Map,this.mGt=!0,this.Bxt.gP()&&(this.uV=T.pr(T.lV,this,i[12])),i[6]&&(this.SIt=T.pr(T.OCt),this.SIt.VCt(i[6])),i[7]){this.lGt=i[7].map(t=>T.pr(T.eIt,t)),this.cGt=new Map,this.fGt=new Map;for(const a of this.lGt)this.cGt.set(a.nf().toLowerCase(),a),this.fGt.set(a.nY(),a)}this.LIt?(this.WIt=[],this.QIt=new Set,this.JIt=this.gf.gGt()):(this.VIt=[],this.YIt=new Set,this.HIt=[],this.qIt=[],this.ZIt=[]);const n=this.Bxt.rSt();if(n<2&&(this.Vxt=T.pr(e.yGt,this,i[15]),!(this.Vxt instanceof T.jxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.MGt=null,this.wGt=null,this.o9=T.pr(T.Event.qf),T.rP._xt(this,n);let o;if(o=2<=n?(o=e.yGt)||globalThis.M6:this.Vxt.Cxt()){if(this.MGt=new o(n<2?this:null),n<2&&!(this.MGt instanceof wa))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.MGt instanceof globalThis.M6))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.MGt=new wa;if(T.rP.Ext(n),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.Vxt.zxt(l,c,f)}}this.gf.SGt()&&!this.LIt&&!this.OIt&&this.ixt||this.vxt(),this.Bxt.aP()&&(this.Bxt.Ixt(this),this.TGt(i)),this.bGt=null}static ux(t,s,i){return T.pr(T.But,t,s,i)}mr(){if(this.jIt.mr(),this.jIt=null,this.SIt&&(this.SIt.mr(),this.SIt=null),this.lGt){for(const t of this.lGt)t.mr();T.Qn(this.lGt),this.cGt.clear(),this.fGt.clear()}this.bGt=null,this.nGt.mr(),this.nGt=null,this.jwt.clear(),this.Bwt.clear(),this.KIt=null,this.gf=null}xGt(i){for(let t=1,s=i.length;t<s;++t){const e=this.gf._V(i[t]);this.WIt.push(e),this.QIt.add(e),e.VIt.push(this),e.YIt.add(this)}}vGt(t){this.XIt=!0,this.KIt=t}XF(){return this.XIt}N9(){return this.KIt}CGt(){let t=0;if(!this.LIt)for(const s of this.VIt)for(const i of s.IGt()){const e=i.nf().toLowerCase();this.iGt.set(e,i),this.eGt.set(e,t),this.sGt.push(i),++t}for(const h of this.IGt()){const r=h.nf().toLowerCase();this.iGt.set(r,h),this.eGt.set(r,t),this.sGt.push(h),++t}for(const n of this.sGt)this.hGt.add(n.NB().constructor);if(!this.LIt&&this.VIt.length){let t=this.gf.GGt(),s=(T.Vn(this.HIt,t,0),T.Vn(this.qIt,t,0),T.Vn(this.ZIt,t,0),[]),i=0,e=0,h=0;for(const o of this.VIt){const a=o.zMt(),u=(this.HIt[a]=i,i+=o._Gt(),this.qIt[a]=e,e+=o.EGt(),this.ZIt[a]=h,h+=o.AGt(),o.hk());if(u&&this.uV)for(const l of u.rk())s.push(l.DGt(this.uV))}this.uV&&this.uV.NGt(s)}}TGt(t){const s=this.gf.LGt(),i=T.pr(T.Instance,{runtime:this.gf,FF:this,uid:s});i.OGt(t[16],[]),this.gf.RGt(s,i),this.q8.push(i)}sTt(){return this.Vxt}PGt(){return this.OIt}qf(){return this.jIt}vxt(){this.LIt||(this.Vxt?this.Vxt.vxt():this.MGt.w6())}kGt(){return 0<this.dGt}async R9(t){this.LIt||(this.dGt++,1===this.dGt&&(this.Vxt?await this.Vxt.R9(t):await this.MGt.b6(this.gf.zR().FGt())))}z9(){if(!this.LIt){if(this.dGt--,this.dGt<0)throw new Error("released textures too many times");0===this.dGt&&(this.Vxt?this.Vxt.z9():this.MGt.x6(this.gf.zR().FGt()))}}F9(){if(this.LIt)throw new Error("not applicable to family");this.Vxt?this.Vxt.F9():this.MGt.v6()}async uq(t){this.LIt||(this.Vxt?await this.Vxt.uq(t):await this.MGt.C6(this.gf.zR().FGt()))}K4(){return this.gf}OP(){return this.Bxt}jGt(){return this.DIt}nf(){return this.Mr}V1t(){return this.cMt}_O(){return this.iy}nY(){return this._J}KV(){return this.LIt}FV(){return this.NIt}lP(){return this.ixt}zMt(){return this.JIt}IGt(){return this.$It}EGt(){return this.kIt}BGt(t){return t&&this.hGt.has(t)}_Gt(){return this.RIt.length}zGt(){return this.RIt.map(t=>t.sid)}UGt(s){return this.RIt.findIndex(t=>t.sid===s)}nit(s){return this.RIt.findIndex(t=>t.name===s)}WGt(){return this.RIt.map(t=>t.name)}QGt(){return this.RIt.map(t=>t.PIt)}ait(t){if((t=Math.floor(t))<0||t>=this.RIt.length)throw new RangeError("invalid instance variable index");return this.RIt[t].type}oit(t){if((t=Math.floor(t))<0||t>=this.RIt.length)throw new RangeError("invalid instance variable index");return this.RIt[t].name}AGt(){return this.FIt}JGt(){return this.sGt}Rht(t){return this.iGt.get(t.toLowerCase())||null}lit(t){const s=this.eGt.get(t.toLowerCase());return void 0===s?-1:s}hk(){return this.uV}gP(){return this.Bxt.gP()}VGt(){return this.uV&&this.uV.YGt()}Rdt(){return this.nGt}JP(){return this.nGt.JP()}lz(){return this.SIt}DV(t){this.oGt=t}AV(){return this.oGt}NV(t){this.aGt=t}HGt(){return this.aGt}qGt(){return this.lGt}ZGt(){return this.lGt.length}$1t(){return this.VIt}oTt(t){return this.YIt.has(t)}cgt(){return this.WIt}$V(t){return this.QIt.has(t)}VMt(t){return this.qIt[t]}BMt(t){return this.HIt[t]}qyt(t){this.rGt.set(t.tMt().toLowerCase(),t)}Zyt(t){return!!this.nMt(t)}nMt(t){const s=this.rGt.get(t.toLowerCase());return s&&s.hc()?s:null}XGt(){return this.lGt}KGt(t){if(this.lGt)return this.cGt.get(t.toLowerCase())||null;throw new Error("no animations")}$Gt(t){if(this.lGt)return this.fGt.get(t)||null;throw new Error("no animations")}t_t(t){if(this.KGt(t))throw new Error(`animation name '${t}' already exists`);const s=T.eIt.lIt(this.K4(),t);return this.lGt.push(s),this.cGt.set(s.nf().toLowerCase(),s),this.fGt.set(s.nY(),s),s}s_t(t){const s=this.KGt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.lGt.length)throw new Error("cannot remove last animation");const i=this.lGt.indexOf(s);this.lGt.splice(i,1),this.cGt.delete(s.nf().toLowerCase()),this.fGt.delete(s.nY()),s.mr()}i_t(){if(this.lGt)return this.lGt[0];throw new Error("no animations")}e_t(){return this.i_t().pIt(0)}h_t(){if(this.lGt){const t=this.e_t().lz();return[t.Mm(),t.Em()]}return this.SIt?[this.SIt.Mm(),this.SIt.Em()]:[100,100]}DP(){if(this.Bxt.aP())return this.q8[0];throw new Error("not a single-global plugin")}QP(){return this.q8}*instances(){yield*this.q8}*WP(){yield*this.q8,yield*this.gf.c2t(this)}YP(){return this.q8.length}jV(t){this.q8.push(t)}r_t(){this.mGt=!0}Tq(){if(this.mGt&&!this.LIt){let s=this.q8,i=0;for(let t=s.length;i<t;++i)s[i].n_t(i);const t=this.gf.o_t();for(const e of t)e.jF()===this&&e.n_t(i++);this.mGt=!1}}a_t(t){const s=this.q8;if(t<s.length)return s[t];t-=s.length;const i=this.gf.o_t();for(const e of i)if(e.jF()===this){if(0===t)return e;--t}return null}HTt(t){if(t&&t.XF()&&t.jF()!==this)for(const i of t.KF())if(i.jF()===this)return i;const s=this.JP().QP();return s.length?s[0]:null}UP(t){const s=this.JP().QP();return 0<s.length?s[t.sj()%s.length]:null}*y2t(t,s){let i=this.JP().QP(),e=i.length,h=s.JP(),r=s.JP().QP(),n=r.length,o=t.sj(),a=(!s.KV()&&h.Eft()||(o=r.indexOf(t)),Math.ceil(e/n)),u=e%n,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}ySt(t){this.Vxt?.ySt(t)}wyt(){if(this.XIt&&!this.LIt){this.Tq();const t=this.JP(),s=t.kft(),i=t.Eft(),e=this.gf.P1t(),h=e&&e.m3()&&e.m3().Vft();for(const r of this.KIt.wq())if(r!==this){r.Tq();const n=r.JP();if(n.Pft(i),!i){const o=n.kft();T.Qn(o);for(const a of s)o.push(r.a_t(a.sj()));if(h){const u=t.Fft(),l=n.Fft();T.Qn(l);for(const c of u)l.push(r.a_t(c.sj()))}}}}}bSt(t,s){for(const i of this.N9().wq()){const e=i.JP();t?T.Wn(e.Fft(),s):T.Wn(e.kft(),s)}}u_t(){return this.BIt}l_t(t){this.UIt=!!t}c_t(){if(this.UIt&&this.ixt){for(const t of this.q8)t.D4().f_t();for(const s of this.gf.o_t())s.jF()===this&&s.D4().f_t();this.UIt=!1}}d_t(s,t,i){if(t){const e=this.pGt.get(t);e&&(e.delete(s),0===e.size)&&this.pGt.delete(t)}if(i){let t=this.pGt.get(i);t||(t=new Set,this.pGt.set(i,t)),t.add(s)}}p_t(){if(this.KV()){const t=new Set;for(const s of this.WIt)for(const i of s.p_t())t.add(i);return t.values()}return this.pGt.keys()}cSt(){return this.jwt||(this.jwt=new Map),this.jwt}fSt(){return this.Bwt||(this.Bwt=new Map),this.Bwt}m_t(){return this.BGt(T.Zat.GCt)}g_t(){return this.BGt(T.Zat.jumpthru)}y_t(){return this.BGt(T.Zat.NoSave)}PV(){return this.BGt(T.Zat.Persist)}x7(){const t={instances:this.q8.map(t=>t.NT())};return this.jwt&&this.jwt.size&&(t.ex=T.Qo(this.jwt)),t}v7(t,e){this.jwt&&(this.jwt.clear(),this.jwt=null);const s=t.ex,h=(s&&(this.jwt=T.Jo(s)),this.q8),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].LT(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.gf.VF(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.lP()||(s=this.gf.a4().b9(t.w.l))){const n=this.gf.kV(this.oGt||this,s,!1,0,0,!0);n.LT(t),e&&e.add(n)}}this.bGt=r,this.r_t()}M_t(){return this.bGt}w_t(){this.bGt=null}S_t(){for(let t=0,s=this.q8;t<s;++t)this.q8[t].S_t()}_P(){return this.MGt}e3(){return this.o9}T_t(){return this.wGt}HP(t){this.wGt=t}Jq(t){const s=this.gf,i=s.Rj()&&!s.o3().$P();i&&Ma.StartMeasuringScriptTime(),this.o9.dispatchEvent(t),i&&Ma.AddScriptTime()}}}{const Sa=self.ks;Sa.b_t=class extends Sa.lr{constructor(t,s){super(),this.gf=t,this.x_t=s;for(const i of this.x_t)i.vGt(this)}mr(){this.gf=null}K4(){return this.gf}D9(){return this.x_t}wq(){return this.x_t}xq(){return this.x_t.some(t=>t.lP())}}}{let w=self.ks,h=self.C3Debugger,n=w.rP,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.lr{constructor(t){if(w.rP!==n)throw new Error("invalid addon manager");super(),this.gf=t.runtime,this.v_t=t.FF,this.Lst=null,this.C_t=null,this.I_t=null,this.G_t=0,this.__t=t.uid,this.E_t=a++,this.ISt=0,this.A_t=null;const s=w.ao(t.tags),i=(0<s.length&&(this.A_t=new Set(s)),this.D_t=o,this.N_t=o,this.v_t.JGt()),e=(0<i.length&&(this.N_t=i.map((t,s)=>w.pr(w.L_t,{runtime:this.gf,LB:t,PB:this,index:s}))),this.O_t=this.v_t.XF()?[]:null,this.R_t=-1,this.jIt=null,this.OP());if(e.YS()&&(this.ISt|=4),e.lP())if(this.Lst=w.pr(w.P_t,this,t.s5),t.k_t)this.Lst.F_t(t.k_t);else{this.Lst.j_t();const[h,r]=this.v_t.h_t();this.Lst.n_(h,r),this.jF().VGt()&&this.Lst.t5().B_t()}t.z_t?this.U_t(t.z_t):this.W_t()}mr(){if(this.I_t&&(this.I_t.QF(),this.I_t=null),0<this.N_t.length){for(const i of this.N_t)i.mr();w.Qn(this.N_t)}this.C_t&&(this.C_t.mr(),this.C_t=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.O_t&&w.Qn(this.O_t),this.jIt&&(this.jIt.mr(),this.jIt=null),this.A_t&&this.A_t.clear(),this.A_t=null,this.gf=null,this.v_t=null,0<this.D_t.length&&w.Qn(this.D_t),this.Lst&&(this.Lst.mr(),this.Lst=null)}U_t(t){0<t.length&&(this.D_t=[],w.Hn(this.D_t,t))}W_t(){const s=this.v_t._Gt();if(0!==s){this.D_t=[];const i=[0,0,""];for(let t=0;t<s;++t)this.D_t.push(i[this.v_t.ait(t)])}}OGt(t,i){if(this.C_t)throw new Error("already got sdk instance");for(let t=0,s=this.N_t.length;t<s;++t){const e=this.N_t[t];e.OGt(i?i[t]:null)}const s=this.OP().rSt();if(s<2){if(this.C_t=w.pr(this.v_t.jGt(),this,t),!(this.C_t instanceof w.Qxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.OP().lP()&&this.v_t.T_t()&&this.G4()}else{const h=this.OP().Cxt();this.Q_t(h.Instance,t)}}CB(){return this.C_t??this.I_t}D4(){return this.Lst}K4(){return this.gf}F3(){return this.R_t}hj(){const t=this.R_t;return-1===t?this.K4().F3():t}j3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.R_t=t,this.jF().VGt()&&this.gf.J_t(this,!0)}nj(){this.R_t=-1,this.jF().VGt()&&this.gf.J_t(this,!1)}f7(){return this.gf.V_t(this)}qf(){return this.jIt||(this.jIt=w.pr(w.Event.qf)),this.jIt}a2(t){this.C_t?this.C_t.a2(t):this.I_t.N6(this.gf.zR().FGt())}vxt(t){this.C_t.vxt(t)}Y_t(){this.ISt|=2}H_t(){return 0!=(2&this.ISt)}q_t(){this.ISt|=1}nU(){return 0!=(1&this.ISt)}YS(){return 0!=(4&this.ISt)||this.C_t.YS()}Z_t(){this.ISt|=32}e7(){return 0!=(32&this.ISt)}X_t(){return 0!=(8&this.ISt)}K_t(t){t?this.ISt|=8:this.ISt&=-9}$_t(){return 0!=(16&this.ISt)}tEt(t){t?this.ISt|=16:this.ISt&=-17}sEt(){return 0!=(64&this.ISt)}iEt(t){t?this.ISt|=64:this.ISt&=-65}eEt(t,s){t<<=16,s?this.ISt|=t:this.ISt&=~t}hEt(t){return 0!=(this.ISt&t<<16)}Ivt(){return this.C_t.Ivt()}Gvt(){return this.C_t.Gvt()}_vt(){return this.C_t._vt()}Evt(){return this.C_t.Evt()}Dvt(){return this.C_t.Dvt()}yTt(t){return this.C_t.yTt(t)}jF(){return this.v_t}s7(){return this.C_t.s7()}f2t(t){return t.KV()?t.$V(this.jF()):this.jF()===t}rEt(h,t,s){const i=(t,s)=>{const i=s||t.jF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.XF())for(const e of this.KF())i(e);if(s)for(const r of this.F5())i(r)}nEt(){if(!this.OP().SP())throw new Error("object does not support scene graph")}W5(){return null!==this.A5()}A5(){const t=this.D4();if(!t)return null;const s=t.A5();return s?s.s6():null}N5(){const t=this.D4();if(!t)return null;const s=t.N5();return s?s.s6():null}*L5(){const t=this.D4();if(t)for(const s of t.L5())yield s.s6()}oEt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}G7(){const t=this.D4();return!!t&&t.G7()}aEt(t){const s=this.D4();if(!s)return[];const i=t.nf();return s.Dq().map(t=>t.s6()).filter(t=>t.jF().nf()===i)}Dq(){const t=this.D4();return t?t.Dq().map(t=>t.s6()):[]}*children(){const t=this.D4();if(t)for(const s of t.children())yield s.s6()}*F5(){const t=this.D4();if(t)for(const s of t.F5())yield s.s6()}R5(){const t=this.D4();return t?t.R5():0}uEt(){return[...this.L5()].length}g2t(){const t=this.D4();return t?t.g2t():0}k5(t){const s=this.D4();if(!s)return null;const i=s.k5(t);return i?i.s6():null}lEt(){const t=this.D4();if(!t)return NaN;const s=t.A5();return s?s.cEt(t):NaN}fEt(t){for(const s of this.D4().Dq())if(s.s6().$F()===t)return!0;return!1}B5(t,s){this.nEt(),t.nEt(),this.D4().B5(t.D4(),s||{})}z5(t){const s=this.D4();s&&s.z5(t.D4())}uB(){const t=this.D4();return!!t&&t.uB()}rq(){const t=this.D4();if(t){const s=t.dEt();if(s)for(const i of s){const e=this.gf.I4(i[2]);if(e){const h=i[3];this.B5(e,{J5:!!(h>>0&1),Y5:!!(h>>1&1),q5:!!(h>>2&1),X5:!!(h>>3&1),tB:!!(h>>4&1),aB:!!(h>>5&1),iB:!!(h>>6&1),hB:!!(h>>7&1),nB:!!(h>>8&1)})}}}}nq(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.B5(h,{J5:!!(r>>0&1),Y5:!!(r>>1&1),q5:!!(r>>2&1),X5:!!(r>>3&1),tB:!!(r>>4&1),aB:!!(r>>5&1),iB:!!(r>>6&1),hB:!!(r>>7&1),nB:!!(r>>8&1)})}}}ej(){const t=this.gf.pEt();return t?t.Uut(this):""}XF(){return null!==this.O_t}Sq(t){this.O_t.push(t)}qF(){return this.O_t}mEt(t){return!!this.gEt(t)}gEt(t){const s=this.KF();if(null===s||0===s.length)return!1;for(const i of s)if(i.jF()===t)return i;return null}KF(){return this.O_t}xmt(){for(const t of this.KF())t.jF().JP().jft(t)}MSt(){for(const t of this.KF())t.jF().JP().Oft(t)}wSt(t){for(const s of this.KF())s.jF().JP().kft()[t]=s}TSt(){for(const t of this.KF())t.jF().JP().Rft(t)}SSt(t){for(const s of this.KF())s.jF().JP().Fft()[t]=s}OP(){return this.v_t.OP()}n_t(t){this.G_t=t}sj(){return this.v_t.Tq(),this.G_t}$F(){return this.__t}yEt(){return this.E_t}MEt(t){t?this.lj(new Set(t)):this.A_t=null}lj(t){if(0===t.size)this.A_t=null;else{this.A_t?this.A_t.clear():this.A_t=new Set;for(const s of t)this.A_t.add(s)}}aj(){return this.A_t??new Set}B2t(){return Array.from(this.aj()).join(" ")}W2t(t){t=Math.floor(t);for(const s of this.aj()){if(0===t)return s;--t}return""}Oht(){return this.N_t}wEt(t){if(t)for(const s of this.N_t)if(s.NB()instanceof t)return s;return null}Xat(t){if(!t)return null;const s=this.wEt(t);return s?s.CB():null}Lht(i){const e=this.N_t;for(let t=0,s=e.length;t<s;++t)if(e[t].RB().nY()===i)return t;return-1}SEt(){return this.D_t}WGt(){return this.v_t.WGt()}TEt(){return this.D_t.length}Zrt(t){const s=this.D_t;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}FMt(t){return this.D_t[t]}bEt(t){const s=this.D_t[t];return 0===this.v_t.ait(t)?!!s:s}Xrt(t,s){const i=this.D_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.v_t.ait(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Unt(t,s){if(0!==s){const i=this.D_t;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}cSt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}fSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}xEt(t){const s=this.jF();if(s.e3().t0(t))return!0;for(const i of s.$1t())if(i.e3().t0(t))return!0;return!!this.gf.e3().t0(t)}KP(){const t=new Set,s=(t.add(this),this.D4());if(s&&s.G7())for(const i of this.F5())if(t.add(i),i.XF())for(const e of i.KF())t.add(e);if(this.XF())for(const h of this.KF())t.add(h);for(const r of t.values())r.oq();this.aq()}vEt(){this.v_t.T_t()&&this.G4();for(const t of this.N_t)t.fCt()}CEt(){this.vEt()}oq(){if(this.vEt(),this.xEt("instancecreate")){const t=this.jF(),s=new w.Event("instancecreate");s.PB=this.G4(),t.Jq(s);for(const i of t.$1t())i.Jq(s);this.gf.Jq(s)}this.gf.Ij(this.OP().upt().pq.V2t,this,null)}aq(){if(this.OP().SP()){if(this.Jq(new w.Event("hierarchyready")),this.xEt("hierarchyready")){const t=this.jF(),s=new w.Event("hierarchyready");s.PB=this.G4(),t.Jq(s);for(const i of t.$1t())i.Jq(s);this.gf.Jq(s)}this.gf.Ij(this.OP().upt().pq.u2t,this,null)}}IEt(){this.gf.Ij(this.OP().upt().pq.Y2t,this,null)}GEt(t){if(this.I_t){const s=new w.Event("destroy");s._Et=t,this.Jq(s)}if(this.xEt("instancedestroy")){const i=this.jF(),e=new w.Event("instancedestroy");e.PB=this.G4(),e._Et=t,i.Jq(e);for(const h of i.$1t())h.Jq(e);this.gf.Jq(e)}}EEt(){return this.C_t?this.C_t.dvt():this.I_t.Bj()}NT(t="full",s=null){const i={},e=("full"===t?i.uid=this.$F():i.c3=!0,this.aj());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=S.get(this);if(r&&r.size&&(i.ex=w.Qo(r)),-1!==this.F3()&&(i.mts=this.F3()),0<this.v_t._Gt()){const n={},o=this.v_t.zGt();for(let t=0,s=this.D_t.length;t<s;++t)n[o[t].toString()]=this.D_t[t];i.ivs=n}if(this.N_t.length){const a={};for(const u of this.N_t){const l=u.NT(t);l&&(a[u.RB().nY().toString()]=l)}i.behs=a}}this.Lst&&(i.w=this.Lst.x7(t,s));const h=this.C_t?this.C_t.NT():this.I_t.zj();return h&&(i.data=h),i}BZ(t="full",s){this.Lst&&this.Lst.BZ(t)}UZ(t,s="full",i=null){this.Lst&&this.Lst.UZ(t,s,i)}AEt(t,s="full",i=null){this.Lst&&this.Lst.AEt(t,s,i)}S_t(){this.OP().lP()&&this.Lst.S_t()}LT(s,t="full",i){if("full"===t)this.__t=s.uid;else if(!s.c3)return;if(this.MEt(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,r=(h&&(t=w.Jo(h),S.set(this,t)),this.R_t=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),u=this.v_t.UGt(a);if(!(u<0||u>=this.D_t.length)){let t=o;null===t&&(t=NaN),this.D_t[u]=t}}}if(this.OP().lP()){const l=s.w;if(l){const c=l.l;if(this.Lst.N4().nY()!==c){const f=this.Lst.N4(),d=f.f4().b9(c);d?(this.Lst.P4(d),f.UV(this,!0),d.jV(this,!0),d.F4(this),this.Lst.i5()):"full"===t&&this.gf.VF(this)}this.Lst.v7(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.Lht(y);M<0||M>=this.N_t.length||this.N_t[M].LT(g,t)}}const e=s.data;e&&(this.C_t?this.C_t.LT(e,t):this.I_t.Uj(e))}G4(){return this.I_t||this.Q_t()}yvt(){return!!this.I_t}Q_t(t,s){const i=this.Lst?t?self.I6:self.SB:t?self.pj:self.kF,e=t||this.C_t.Cxt(),h=this.v_t.T_t(),r=h||e||i,n=this.OP().rSt();if(w.rP._xt(this,n),w.rP.ECt(s),this.I_t=new r,w.rP.ACt(),w.rP.Ext(n),e&&!(this.I_t instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.I_t instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.I_t}BF(t){if(0!==this.D_t.length){const i={},e=this.v_t.QGt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.bEt.bind(this,t),set:w.Instance.prototype.Xrt.bind(this,t)};const s=Object.create(Object.prototype,i);t.DEt={value:s,writable:!1}}}zF(t){const s=this.N_t;if(0!==s.length){const i={};for(const h of s)i[h.RB().V1t()]={value:h.qxt(),writable:!1};const e=Object.create(Object.prototype,i);t.umt={value:e,writable:!1}}}Jq(t){if(this.yvt()){const s=this.G4(),i=(t.PB=s,this.gf),e=i.Rj()&&!i.o3().$P();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ta=self.ks;Ta.Lq=class extends Ta.lr{constructor(e){super(),this.BT=e,this.Emt=null,this.NEt=[],this.LEt=e.Mm(),this.OEt=e.Em(),this.REt=1,this.PEt=1,this.kEt=0,this.FEt=1,this.jEt=e.PA(),this.BEt=null,this.zEt=null,this.UEt=NaN,this.WEt=!1,this.A7=NaN,this.D7=NaN,this.QEt=t=>{if(t.PB===this.Emt.s6()){const s=e.K4(),i=(s.qf().removeEventListener("instancecreate",this.QEt),this.Emt.s6().CB());this.WEt=!!i.vit(),this.A7=this.WEt?i.xit():NaN,this.D7=this.WEt?i.Iit():NaN}}}mr(){this.Emt=null,this.BEt=null,this.zEt=null,this.UEt=NaN,this.WEt=!1,this.A7=NaN,this.D7=NaN,Ta.Qn(this.NEt)}JEt(t){if(this.FEt=this.BT.PA(),this.jEt=this.FEt,this.Emt=t,this.kEt=t?t.fk():0,this.Emt){const s=this.BT,i=s.K4(),e=this.Emt.s6().OP().rSt();if(e<2){const h=this.Emt.s6().CB();h?(this.WEt=!!h.vit(),this.A7=this.WEt?h.xit():NaN,this.D7=this.WEt?h.Iit():NaN):this.Emt.s6().nU()||i.qf().addEventListener("instancecreate",this.QEt)}else this.WEt=!1,this.A7=NaN,this.D7=NaN}else this.WEt=!1,this.A7=NaN,this.D7=NaN}A5(){return this.Emt}G7(){return 0<this.NEt.length}Dq(){return this.NEt}VEt(){this.G7()&&1!==this.NEt.length&&(this.zEt?this.NEt.sort((t,s)=>{const i=this.zEt.get(t.s6()),e=this.zEt.get(s.s6());return Ta.pe(i)&&Ta.pe(e)?i-e:0}):this.NEt.sort((t,s)=>{const i=t.ont().YEt(),e=s.ont().YEt();return Ta.pe(i)&&Ta.pe(e)?i-e:0}))}YEt(){return this.UEt}ant(){return this.REt}HEt(t){this.REt=t}lnt(){return this.PEt}qEt(t){this.PEt=t}Mnt(){return this.jEt}jTt(){return this.FEt}ZEt(t){this.FEt=t}nnt(){return 0===this.LEt?Number.EPSILON:this.LEt}unt(){return 0===this.OEt?Number.EPSILON:this.OEt}XEt(){if(this.BT.Z5()){let t=this.Emt,s=t.Mm(),i=t.ont().nnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.WEt?1+s/this.A7:s/i}return 1}KEt(){if(this.BT.K5()){let t=this.Emt,s=t.Em(),i=t.ont().unt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.WEt?1+s/this.D7:s/i}return 1}$Et(){return 0}tAt(){return{sw:this.LEt,sh:this.OEt,sx:this.REt,sy:this.PEt,psa:this.kEt,oo:this.FEt,so:this.jEt,pi:this.BT.s6().lEt()}}x7(t,s=null){const i=this.tAt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.sAt(t),c:this.iAt(t)})}eAt(t){let s="";return t.V5()&&(s+="x"),t.H5()&&(s+="y"),t.Z5()&&(s+="w"),t.K5()&&(s+="h"),t.sB()&&(s+="a"),t.eB()&&(s+="z"),t.uB()&&(s+="d"),t.rB()&&(s+="o"),t.oB()&&(s+="v"),s}sAt(t){return this.Emt&&this.Emt.s6()&&!this.Emt.s6().nU()?this.hAt(this.Emt,this.BT,t):null}iAt(s){return this.NEt.map(t=>this.hAt(t,t,s)).filter(t=>t)}hAt(t,s,i){const e=t.s6();if(e&&e.nU())return null;const h={};return h.uid=e.$F(),h.f=this.eAt(s),h.offsets=s.rAt(),h.data=Ta.Lq.nAt(e),h.oci=e.jF()._O(),"state"===i?(h.inst=e.NT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.jF().QP().indexOf(e),h.inst=null),h}v7(t){this.LEt=t.sw,this.OEt=t.sh,this.REt=t.sx,this.PEt=t.sy,this.kEt=t.psa,this.FEt=t.oo,this.jEt=t.so,this.UEt=Ta.pe(t.pi)?t.pi:NaN}oAt(t,s){if(!t&&!s&&this.BEt)for(const i of this.BEt)i.nU()||i.W5()||i.K4().VF(i);this.BEt=t,this.zEt=s}UZ(t,s){const i=this.BT,e=i.K4(),h=new Set;if(t.p&&!this.Emt){const o=t.p.uid,a=e.I4(o);if(s?.ibt,a){const u=a.D4();if(a.oEt(i.s6()))this.Emt=u;else{a.fEt(i.s6().$F())?e.VF(i.s6()):a.B5(i.s6(),this.aAt(t.p.f)),h.has(i)||(i.uAt(t.p.offsets),this.lAt(a,t.p,s)),h.add(i);const l=a.D4();l.ont().VEt()}}else if(Ta.pe(t.p.oci)){const c=e._V(t.p.oci),f=(e.p8(),e.qP(c,i.N4(),0,0,!0));if(s?.ibt,f){const d=this.cAt(t.p,e),p=(d&&f.LT(d),f.D4()),m=(p.N4().ZP(f),f.B5(i.s6(),this.aAt(t.p.f)),f.D4());m.ont().VEt()}}}const r=[];for(const g of t.c){const y=g.uid,M=e.I4(y);M&&r.push(M)}let n=0;for(const w of t.c){const S=w.uid,T=e.I4(S);if(s?.ibt,T){if(this.BEt){if(this.BEt.includes(T)){const C=T;if(C.jF()!==T.jF()){n++;continue}if(C.nU()){n++;continue}const I=t.c[n];if(!s?.ibt&&this.fAt(C,r,i)){this.dAt(n,I,i,h,s),n++;continue}if(C.W5()&&C.A5()!==i.s6()){const G=this.pAt(I,s);this.mAt(G,I,h,s),n++;continue}this.mAt(C.D4(),I,h,s,!0),n++;continue}if(this.BEt[n]){const _=this.BEt[n];if(_.jF()!==T.jF()){n++;continue}if(_.nU()){n++;continue}const E=t.c[n];if(!s?.ibt&&this.fAt(_,r,i)){this.dAt(n,E,i,h,s),n++;continue}if(_.W5()&&_.A5()!==i.s6()){const A=this.pAt(E,s);this.mAt(A,E,h,s),n++;continue}this.mAt(_.D4(),E,h,s,!0),n++;continue}}const b=T.jF(),x=this.gAt(r,b),v=i.s6().aEt(b).length;if(x===v){const D=i.s6().k5(n);if(D){const N=D.D4();N&&(h.has(N)||(N.uAt(w.offsets),this.lAt(D,w,s)),h.add(N))}n++;continue}if(T.W5()&&T.A5()!==i.s6()){const L=this.pAt(w,s);this.mAt(L,w,h,s),n++;continue}this.mAt(T.D4(),w,h,s)}else if(this.BEt&&this.BEt[n]){const O=this.BEt[n],P=e._V(this.yAt(w));if(O.jF()!==P){n++;continue}if(O.nU()){n++;continue}const R=t.c[n];if(!s?.ibt&&this.fAt(O,r,i)){this.dAt(n,R,i,h,s),n++;continue}if(O.W5()&&O.A5()!==i.s6()){const k=this.pAt(R,s);this.mAt(k,R,h,s),n++;continue}this.mAt(O.D4(),R,h,s)}else{const F=this.pAt(w,s);this.mAt(F,w,h,s)}n++}}fAt(t,s,i){const e=t.jF(),h=this.gAt(s,e),r=i.s6().aEt(e).length;return h===r}dAt(t,s,i,e,h){const r=i.s6().k5(t,s);if(r){const n=r.D4();n&&(e.has(n)||(n.uAt(s.offsets),this.lAt(r,s,h)),e.add(n))}}aAt(t){const s={};return s.J5=t.includes("x"),s.Y5=t.includes("y"),s.q5=t.includes("w"),s.X5=t.includes("h"),s.tB=t.includes("a"),s.iB=t.includes("z"),s.aB=t.includes("d"),s.hB=t.includes("o"),s.nB=t.includes("v"),s}yAt(t){return Ta.pe(t.oci)?t.oci:t[1]}pAt(e,h){if(Ta.pe(e.oci)){let t=this.BT,s=t.K4(),i;if(e.data)i=s.kV(e.data,t.N4(),!1,0,0,!1,!0);else{const r=s._V(e.oci);i=s.qP(r,t.N4(),0,0,!0)}if(h?.ibt,i){const n=this.cAt(e,s),o=(n&&i.LT(n),i.D4());return o.N4().ZP(i,!0),o}}}mAt(t,s,i,e,h=!0){const r=this.BT,n=r.B5(t,this.aAt(s.f));n&&h&&(i.has(t)||(t.uAt(s.offsets),this.lAt(t.s6(),s,e)),i.add(t)),this.VEt()}lAt(t,s,i){let e=this.cAt(s,this.BT.K4());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.LT(e))}gAt(t,s){return t.filter(t=>t.jF().nf()===s.nf()).length}cAt(t,s){if(Ta.pe(t.instIndex)){const i=s._V(t.oci),e=i.M_t();return e?e[t.instIndex]:null}return Ta.ve(t.inst)?JSON.parse(t.inst):t.inst||void 0}static nAt(t){let s=t.D4().N4().LV(t.$F());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.Dq()]){const h=e.D4();i.push([h.f4().nY(),h.N4()._O(),e.$F(),Ta.Lq.Nq(h),e.jF().XF()?1:0,h.L4(),Ta.Lq.nAt(e)])}return Ta.je(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ta.Lq.MAt(),s[0][14][1]=i,s[0][14][2]=t.D4().L4()),s}static Nq(t){let s=0;return(s|=Number(t.oB())<<8)|Number(t.rB())<<7|Number(t.eB())<<6|Number(t.uB())<<5|Number(t.sB())<<4|Number(t.K5())<<3|Number(t.Z5())<<2|Number(t.H5())<<1|Number(t.V5())<<0}static MAt(t){let s=0;return s,511}}}{let d=self.ks,t=self.Ss,r=(t._s,d.pr(d.Rect)),n=d.pr(d.nl),s=d.pr(d.Event,"bboxchange",!1),f=d.pr(d.qo,0,0,0,0),l=d.pr(d.Bl),i=d.pr(d.qo,1,1,1,1),o=d.pr(d.Rect,0,0,-1,-1),h=d.pr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.P_t=class extends d.lr{constructor(t,s){super(),this.vi=t,this.yft=t.jF(),this.gf=t.K4(),this.wAt=s,this.yft.d_t(this,null,s),this.SAt=-1,this.TAt=-1,this.ISt=196635,this.yft.OP().pP()&&(this.ISt|=128),this.ou=NaN,this.au=NaN,this.nT=NaN,this.bAt=NaN,this.xAt=NaN,this.wb=NaN,this.$o=NaN,this.vAt=NaN,this.CAt=NaN,this.IAt=NaN,this.GAt=NaN,this._At=d.pr(d.Rect),this.EAt=d.pr(d.nl),this.AAt=h,this.DAt=o,this.NAt=null,this.LAt=null,this.OAt=null,this.rT=i,this.RAt=i,this.PAt=null,this.kAt=null,this.vi.jF().VGt()&&(this.kAt=d.pr(d.FAt,this.vi,this)),this.jAt=null,this.BEt=null,this.zEt=null,this.BAt=-1,this.zAt=null}q_t(){this.ISt|=256}mr(){if(this.yft.d_t(this,this.wAt,null),this.PAt&&(this.gf.US().fw(this.PAt),this.PAt=null),this.NAt=null,this.LAt&&(this.LAt.UAt.mr(),this.LAt=null),this.OAt&&(this.OAt.clear(),this.OAt=null),this.dB(),this.kAt&&this.kAt.mr(),this.W5()&&this.A5().z5(this),this.G7()){const t=[...this.Dq()];for(const s of t)this.z5(s)}this.WAt(),this.QAt(),g.delete(this),a.delete(this),this.vi=null,this.yft=null,this.gf=null,this.wAt=null}F_t(t){if(m=!1,this.e5(t[0],t[1]),this.CT(t[2]),this.n_(t[3],t[4]),this.wb=0,this.pP()?this.ck(t[6]):this.$o=0,f.qa(t[7]),this.JAt(f),this.Snt(t[8]),this.bnt(t[9]),this.aT(t[10]),this.kAt&&this.kAt.VAt(t[12]),t[14]&&g.set(this,{YAt:t[14][1],HAt:t[14][2]}),t[15]){const s=t[15],e=(this.cB(s[0],s[1]),this.MB()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.n2(t,i);o.ST(n[0]),o.xT(n[1]),o.CT(n[2]),o.GT(n[3]),o.ET(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.gf.pEt();u&&c&&c.zut(this.s6(),a),l&&c&&c.zut(this.s6(),i)}m=!0,this.qAt()}j_t(){this.ou=0,this.au=0,this.nT=0,this.bAt=0,this.xAt=0,this.wb=0,this.$o=0,this.vAt=0,this.CAt=1,this.IAt=0,this.GAt=0,this.qAt()}K4(){return this.gf}jF(){return this.yft}s6(){return this.vi}ZAt(){return this.sB()?this.XAt(this.A5().KAt()-this.jAt.$Et()):0}ST(t){if(t=+t,this.V5()){const s=this.jAt,i=t-this.wT(),e=-this.ZAt();0==e?this.ou+=i/s.XEt():(this.ou+=Math.cos(e)*i/s.XEt(),this.H5()&&(this.au+=Math.sin(e)*i/s.KEt()))}else this.ou=t}int(t,s=!1){t=+t,!s&&this.V5()?this.ST(this.wT()+t):this.ou+=t}wT(){if(this.V5()){let t=this.ou,s=this.jAt,i=this.A5(),e=this.ZAt();return 0===e?t*=s.XEt():(t=t*s.XEt()*Math.cos(e),this.H5()&&(t-=this.au*s.KEt()*Math.sin(e))),i.wT()+t}return this.ou}xT(t){if(t=+t,this.H5()){const s=this.jAt,i=t-this.bT(),e=-this.ZAt();0==e?this.au+=i/s.KEt():(this.V5()&&(this.ou-=Math.sin(e)*i/s.XEt()),this.au+=Math.cos(e)*i/s.KEt())}else this.au=t}ent(t,s=!1){t=+t,!s&&this.H5()?this.xT(this.bT()+t):this.au+=t}bT(){if(this.H5()){let t=this.au,s=this.jAt,i=this.A5(),e=this.ZAt();return 0===e?t*=s.KEt():(t=t*s.KEt()*Math.cos(e),this.V5()&&(t+=this.ou*s.XEt()*Math.sin(e))),i.bT()+t}return this.au}e5(t,s){if(t=+t,s=+s,this.$At()){const i=this.V5(),e=this.H5(),h=this.jAt,r=t-this.wT(),n=s-this.bT(),o=-this.ZAt();if(0==o)i?this.ou+=r/h.XEt():this.ou=t,e?this.au+=n/h.KEt():this.au=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.ou+=e?(u*r-a*n)/h.XEt():u*r/h.XEt():this.ou=t,e?this.au+=i?(a*r+u*n)/h.KEt():u*n/h.KEt():this.au=s}}else this.ou=t,this.au=s}tDt(){return[this.wT(),this.bT()]}n5(t,s){t=+t,s=+s,this.$At()?this.e5(this.wT()+t,this.bT()+s):(this.ou+=t,this.au+=s)}mTt(t,s){return this.wT()===t&&this.bT()===s}CT(t){if(t=+t,this.eB()&&(t-=this.A5().vT()),this.nT!==t){this.nT=t,this.sDt();const s=this.N4();0!==this.nT&&s.JV(),s.F4(this)}}sDt(){if(this.qAt(),this.G7()){const i=this.Dq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.eB()&&e.sDt()}}}xnt(t){this.CT(this.vT()+t)}vT(){return this.eB()?this.A5().vT()+this.nT:this.nT}a5(){return this.N4().vT()+this.vT()}vit(){const t=this.s6().OP().rSt();return t<2&&this.s6().CB().vit()}Im(t){if(t=+t,this.Z5()){const s=this.Mm();0===s?this.bAt=Number.EPSILON:this.bAt*=t/s}else this.bAt=t;this.iDt()}Xm(t,s){t=+t,!s&&this.Z5()?this.Im(this.Mm()+t):this.bAt+=t,this.iDt()}Mm(){if(this.Z5()){const t=this.A5(),s=t.Mm(),i=t.ont().nnt();return i===Number.EPSILON?(this.ont().nnt()+s)*this.bAt:s*this.bAt}return this.bAt}wm(t){if(t=+t,this.K5()){const s=this.Em();0===s?this.xAt=Number.EPSILON:this.xAt*=t/s}else this.xAt=t;this.iDt()}cnt(t,s){t=+t,!s&&this.K5()?this.wm(this.Em()+t):this.xAt+=t,this.iDt()}Em(){if(this.K5()){const t=this.A5(),s=t.Em(),i=t.ont().unt();return i===Number.EPSILON?(this.ont().unt()+s)*this.xAt:s*this.xAt}return this.xAt}n_(t,s){if(t=+t,s=+s,this.Z5()){const i=this.Mm();0===i?this.bAt=Number.EPSILON:this.bAt*=t/i}else this.bAt=t;if(this.K5()){const e=this.Em();0===e?this.xAt=Number.EPSILON:this.xAt*=s/e}else this.xAt=s;this.iDt()}cc(){return[this.Mm(),this.Em()]}i7(){return this.wb}eDt(t){if(t<0)throw new RangeError("invalid depth");this.wb=t}hDt(){if(this.W5()){const t=this.jAt;return Math.min(t.XEt(),t.KEt())}return 1}pP(){return 0!=(128&this.ISt)}ck(t){t=+t,this.pP()&&(this.sB()&&(t-=this.A5().fk()),t=d.br(t),this.$o!==t)&&(this.$o=t,this.iDt())}fnt(t){0!=(t=+t)&&this.pP()&&(this.$o=d.br(this.$o+t),this.iDt())}iDt(){if(this.ISt|=1<<18,this.G7()){const i=this.Dq();for(let t=0,s=i.length;t<s;t++)i[t].iDt()}}fk(){return this.sB()&&this.pP()?this.XAt(d.br(this.A5().KAt()+this.$o)):this.$o}KAt(){return this.sB()&&this.pP()?d.br(this.A5().KAt()+this.$o):this.$o}XAt(t){return this.Z5()&&this.N5().Mm()<0&&(t=d.br(d.kr(t,this.N5().fk()+Math.PI))),this.K5()&&this.N5().Em()<0?d.kr(t,this.N5().fk()):t}rDt(){const t=this.A5();return!!(this.Z5()&&t.Mm()<0)||!!(this.K5()&&t.Em()<0)}nDt(){const t=this.A5();return!!(this.Z5()&&t.Mm()<0&&this.K5()&&t.Em()<0)}oDt(){const t=this.ISt;if(0!=(t&1<<18)){const s=this.fk();this.vAt=Math.sin(s),this.CAt=Math.cos(s),this.ISt=-262145&t}}STt(){return this.oDt(),this.vAt}wTt(){return this.oDt(),this.CAt}Snt(t){this.IAt=+t}wnt(t){this.IAt+=+t}pz(){return this.IAt}bnt(t){this.GAt=+t}Tnt(t){this.GAt+=+t}gz(){return this.GAt}JAt(t){this.rT.equals(t)||(this.rT===i?(this.rT=d.pr(d.qo,t),this.RAt=d.pr(d.qo,t),this.RAt._a()):t.xa(1,1,1,1)?(this.rT=i,this.RAt=i):(this.rT.set(t),this.RAt.set(t),this.RAt._a()),this.qAt())}FA(t){if(t=d.Tr(+t,0,1),this.rB()){if(this.ont().jTt()===t)return;this.ont().ZEt(t),t=this.PA()}else if(this.rT.a===t)return;this.aDt(t)}uDt(){if(this.G7()){const i=this.Dq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.aDt(e.PA())}}}aDt(t){f.ca(this.rT),f.a=t,this.JAt(f),this.uDt()}mnt(t){this.rB()?this.FA(this.ont().jTt()+t):this.FA(this.PA()+t)}PA(){return this.rB()?this.A5().PA()*this.ont().jTt():this.rT.a}y5(t){this.rT.Ta(t)||(f.ca(t),f.a=this.PA(),this.JAt(f))}Hrt(t,s,i){f.ia(t,s,i),this.y5(f)}lDt(t,s,i){0===t&&0===s&&0===i||(f.ca(this.rT),f.r+=t,f.Za+=s,f.b+=i,this.y5(f))}g5(){return this.rT}fV(){return this.RAt}uB(){return 0!=(512&this.ISt)}cDt(t){this.fDt(512,t)}V5(){return 0!=(1024&this.ISt)}dDt(t){this.fDt(1024,t)}H5(){return 0!=(2048&this.ISt)}$At(){return 0!=(3072&this.ISt)}pDt(t){this.fDt(2048,t)}Z5(){return 0!=(4096&this.ISt)}mDt(t){this.fDt(4096,t)}K5(){return 0!=(8192&this.ISt)}gDt(t){this.fDt(8192,t)}sB(){return 0!=(16384&this.ISt)}yDt(t){this.fDt(16384,t)}eB(){return 0!=(32768&this.ISt)}MDt(t){this.fDt(32768,t)}rB(){return 0!=(this.ISt&1<<22)}wDt(t){this.fDt(1<<22,t)}oB(){return 0!=(this.ISt&1<<23)}SDt(t){this.fDt(1<<23,t)}TDt(){this.ISt&=-12647937}B5(t,s){if(t===this)return!1;if(t.W5())return!1;if(this.bDt(t))return!1;if(this.xDt(t))return!1;const i=t.wT(),e=t.bT(),h=t.Mm(),r=t.Em(),n=t.fk(),o=t.vT(),a=t.PA(),u=(t.vDt(this),t.dDt(s.J5),t.pDt(s.Y5),t.mDt(s.q5),t.gDt(s.X5),t.yDt(s.tB),t.MDt(s.iB),t.wDt(s.hB),t.SDt(s.nB),t.cDt(s.aB),i-this.wT()),l=e-this.bT(),c=-this.fk(),f=Math.cos(c),d=Math.sin(c);if(s.J5&&(s.tB?t.ou=u*f-l*d:t.ou=u,s.q5)){const p=this.Mm()/this.jAt.nnt();0!=p&&(t.ou/=p)}if(s.Y5&&(s.tB?t.au=u*d+l*f:t.au=l,s.X5)){const m=this.Em()/this.jAt.unt();0!=m&&(t.au/=m)}if(s.q5){const g=this.Mm();0===g||g===Number.EPSILON?(t.bAt=1,t.jAt.HEt(1)):(t.bAt=h/this.Mm(),t.jAt.HEt(t.bAt))}if(s.X5){const y=this.Em();0===y||y===Number.EPSILON?(t.xAt=1,t.jAt.qEt(1)):(t.xAt=r/this.Em(),t.jAt.qEt(t.xAt))}return s.tB&&(t.$o=n-this.fk()),s.iB&&(t.nT=o-this.vT()),s.hB&&t.jAt.ZEt(a),s.nB&&t.Hk(this.Zk()),this.CDt(t),this.i5(),this.uDt(),!0}z5(t){if(t.A5()===this){const s=t.wT(),i=t.bT(),e=t.Mm(),h=t.Em(),r=t.fk(),n=t.vT(),o=t.PA();t.vDt(null),t.TDt(),t.e5(s,i),t.n_(e,h),t.ck(r),t.CT(n),t.FA(o),this.IDt(t),this.i5()}}GDt(){return this.BAt}_Dt(){this.EDt();const t=[...this.children()];for(const i of t)this.z5(i);const s=this.A5();s&&s.z5(this),this.TDt()}EDt(){if(this.ADt(),!this.BEt){const s=[...this.children()];s.length&&(this.BEt=[],this.zEt=new WeakMap);let t=0;for(const i of s){const e=i.s6();this.BEt.push(e),this.zEt.set(e,t),t++}}const t=this.A5();t&&t.EDt()}ADt(){if(-1===this.BAt){const t=[...this.L5()];this.BAt=t.length;for(const i of t)i.ADt();const s=[...this.children()];for(const e of s)e.ADt()}}QAt(){this.BEt&&(this.BEt.length=0),this.BEt=null,this.zEt=null;const t=this.A5();t&&t.QAt(),this.BAt=-1}W5(){return null!==this.A5()}A5(){const t=this.jAt;return null!==t?t.A5():null}N5(){let t=this;for(;t.W5();)t=t.A5();return t}*L5(){let t=this.A5();for(;t;)yield t,t=t.A5()}oEt(t){return this.Dq().includes(t)}G7(){const t=this.jAt;return null!==t&&t.G7()}Dq(){const t=this.jAt;return null!==t?t.Dq():e}children(){return this.Dq()}*F5(){for(const t of this.children())yield t,yield*t.F5()}R5(){return this.Dq().length}g2t(){return[...this.F5()].length}k5(t){const s=this.Dq();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}cEt(s){if(s){const i=this.Dq();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}DDt(t){this.jAt||(this.jAt=d.pr(d.Lq,this)),t&&this.jAt.JEt(t)}ont(){return this.jAt}WAt(){this.jAt&&(this.jAt.mr(),this.jAt=null)}vDt(t){t?(t.DDt(null),this.DDt(t)):(this.jAt&&this.jAt.JEt(null),this.G7()||this.WAt())}xDt(t){if(!this.W5())return!1;const s=this.A5();return s===t||s.xDt(t)}bDt(t){if(this.oEt(t))return!0;for(const s of this.Dq())if(s.bDt(t))return!0;return!1}CDt(t){this.jAt.Dq().push(t)}IDt(t){const s=this.jAt.Dq(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.W5()||this.WAt(),t.G7()||t.WAt()}dEt(){const t=g.get(this);return t?t.YAt:null}NDt(){const t=g.get(this);return t?t.HAt:NaN}I7(){const t=a.get(this);return d.pe(t)?t:NaN}LDt(t){a.set(this,t)}ODt(){this.fDt(1<<19,!0),this.qAt()}qAt(){if(m){const s=this.gf.US();this.PAt&&s.fw(this.PAt);let t;t=0!=(this.ISt&1<<19)?s.JM()||"<point>":s.UM()||"<default>",this.PAt=s.aw(t,this.SF(),this.RAt,this.vT())}}u7(){return this.PAt}cY(){return this.rT===i}aT(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.SF()!==t&&(this.ISt=this.ISt&~(31<<26)|t<<26,this.qAt())}SF(){return(this.ISt&31<<26)>>26}P4(t,s){const i=s&&this.wAt!==t;i&&this.WV(),this.yft.d_t(this,this.wAt,t),this.wAt=t,i&&this.RDt(),0!==this.vT()&&this.wAt.JV()}N4(){return this.wAt}f4(){return this.N4().f4()}YV(t){this.SAt=0|t}L4(){return this.wAt.eH(),this.SAt}oH(t){this.TAt=0|t}tU(){return this.wAt.rH(),this.TAt}V8(){return this.SAt}fDt(t,s){s?this.ISt|=t:this.ISt&=~t}Zk(){return 0!=(1&this.ISt)}Hk(t){if(this.fDt(1,t),this.G7())for(const s of this.Dq())s.oB()&&s.Hk(t)}G5(){return 0!=(8&this.ISt)}_5(t){t=!!t,this.G5()!==t&&(this.fDt(8,t),t?this.i5():this.PDt())}kDt(t,s){if(this.fDt(32,t),this.OAt&&this.OAt.clear(),s.trim()){this.OAt||(this.OAt=new Set);for(const i of s.split(" "))i&&this.OAt.add(i.toLowerCase())}else this.OAt=null}FDt(t){const s=0!=(32&this.ISt),i=this.OAt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}i5(){if(this.ISt|=65554,this.yft.l_t(!0),this.gf.j4(),this.wAt.vV()&&(this.jDt(this._At,this.EAt,!0),this.ISt&=-3,this.RDt()),0!=(4&this.ISt)&&this.vi.qf().dispatchEvent(s),null!==this.jAt){const i=this.jAt.Dq();for(let t=0,s=i.length;t<s;++t)i[t].i5()}}jDt(t,s,i){const e=this.wT(),h=this.bT(),r=this.Mm(),n=this.Em(),o=this.fk();t.bu(e-this.IAt*r,h-this.GAt*n,r,n),i&&this.yB()&&this.BDt(t),0===o?s.Gl(t):(t.offset(-e,-h),s.El(t,this.STt(),this.wTt()),s.offset(e,h),s.Al(t)),t.normalize()}zDt(){const t=this.ISt;0!=(2&t)&&(this.jDt(this._At,this.EAt,!0),this.ISt=-3&t)}l5(){return this.zDt(),this._At}f5(){return this.zDt(),this.EAt}UDt(t){const s=this.wT(),i=this.bT(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}WDt(t){this._At.I(t),this.EAt.Gl(this._At),this.ISt&=-3,this.f_t(),this.RDt()}QDt(t){this.fDt(4,t)}JDt(){return 0!=(4&this.ISt)}XH(t,s,i){return s&&0!==this.i7()?this.t7(this.N4().$H()):0===this.vT()||i?t.tl(this.l5()):this.VDt()}VDt(){const t=this.N4(),s=this.a5();return!(s>=t.EY())&&(t.GY(s,r),r.tl(this.l5()))}t7(t){const s=this.l5(),i=s.Au(),e=s.Nu(),h=s.Du(),r=s.Lu(),n=this.a5(),o=n+this.i7();return t.Ey(i,h,n,e,r,o)}p5(){const t=this.N4();if(t.zY())return this.t7(t.$H());{const s=t.f4();return this.XH(t.vF(),s.ZH(),s.jk())}}n7(t){this.fDt(1<<20,t)}r7(t){this.fDt(1<<21,t)}YDt(){return 0!=(this.ISt&1<<20)}HDt(){return 0!=(this.ISt&1<<21)}qDt(t){this.NAt=t,this.ZDt(),this.yB()&&(this.zAt.XDt=null)}KDt(){return this.NAt}$Dt(){return null!==this.NAt||this.yB()}tNt(){return this.sNt(this.Mm(),this.Em(),this.fk(),this.STt(),this.wTt())}iNt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.sNt(t,s,i,e,h)}sNt(h,r,t,n,o){let s=this.LAt;null===s&&(s={UAt:d.pr(d.Bl),width:NaN,height:NaN,angle:NaN},this.LAt=s);const a=s.UAt;if(s.width!==h||s.height!==r||s.angle!==t){const u=this.NAt;if(this.yB()){let t=this.pz(),s=this.gz(),i=this.MB(),e=this.zAt.XDt;e||(u?(l.I(u),l.offset(t,s)):l.Hl(),e=i.l2(l),this.zAt.XDt=e),i.c2(e,a),a.offset(-t,-s),a.Kl(h,r,n,o)}else u?(a.I(u),a.Kl(h,r,n,o)):a.Xl(this.f5(),-this.wT(),-this.bT());s.width=h,s.height=r,s.angle=t}return a}ZDt(){this.eNt(!0);const t=this.LAt;null!==t&&(t.width=NaN)}cB(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.s6().OP().bP())throw new Error("object does not support mesh");this.dB(),this.zAt={hNt:d.pr(d.yy.kT,t,s),rNt:d.pr(d.yy.kT,t,s),XDt:null}}yB(){return null!==this.zAt}MB(){if(this.yB())return this.zAt.hNt;throw new Error("no mesh")}nNt(){if(this.yB())return this.zAt.rNt;throw new Error("no mesh")}oNt(t){this.fDt(65536,t)}aNt(){return 0!=(65536&this.ISt)}eNt(t){this.fDt(1<<17,t)}uNt(){return 0!=(this.ISt&1<<17)}BDt(t){const s=this.zAt.hNt,i=Math.min(s.$T(),0),e=Math.min(s.t2(),0),h=Math.max(s.s2(),1),r=Math.max(s.i2(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Bu((h-1)*n),t.zu((r-1)*o),this.wb=s.e2()}dB(){this.zAt&&(this.zAt.hNt.mr(),this.zAt.rNt.mr(),this.zAt=null,this.ZDt())}mB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.dF,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.yB())return!1;const l=this.MB(),c=l.n2(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.vT()!==o&&(c.CT(o),f=!0),h&&(r+=t/(l.HT()-1),n+=s/(l.qT()-1)),a=-1!==a||h?(h&&(a+=t/(l.HT()-1)),d.Tr(a,0,1)):c.IT(),u=-1!==u||h?(h&&(u+=s/(l.qT()-1)),d.Tr(u,0,1)):c._T(),c.wT()===r&&c.bT()===n&&c.IT()===a&&c._T()===u?f:(c.ST(r),c.xT(n),c.GT(a),c.ET(u),this.ZDt(),!0)}H_t(){return this.vi.H_t()}E5(t,s){return!!this.l5().il(t,s)&&!!this.f5().il(t,s)&&(this.H_t()?this.vi.CB().Lvt(t,s):!this.$Dt()||this.tNt().il(t-this.wT(),s-this.bT()))}lNt(){return 0!=(16&this.ISt)}f_t(){if(this.lNt()&&this.G5()&&0==(256&this.ISt)){const t=this.l5(),s=this.yft.u_t(),i=this.AAt;if(r.set(s.lJ(t.Au()),s.cJ(t.Du()),s.lJ(t.Nu()),s.cJ(t.Lu())),!i.equals(r)){const e=this.vi;i===h?(s.fJ(e,null,r),this.AAt=d.pr(d.Rect,r)):(s.fJ(e,i,r),i.I(r)),this.ISt&=-17}}}cNt(){this.ISt|=16}PDt(){const t=this.AAt;t!==h&&(this.yft.u_t().fJ(this.vi,t,null),this.AAt=h)}RDt(){const t=this.N4();if(t.vV()&&0==(256&this.ISt)){const s=t.dY(),i=this.l5(),e=this.DAt;if(r.set(s.lJ(i.Au()),s.cJ(i.Du()),s.lJ(i.Nu()),s.cJ(i.Lu())),!e.equals(r)){const h=this.vi;e===o?(s.fJ(h,null,r),this.DAt=d.pr(d.Rect,r)):(s.fJ(h,e,r),e.I(r)),t.pY()}}}WV(){const t=this.DAt;t!==o&&(this.N4().dY().fJ(this.vi,t,null),this.DAt=o)}hH(){return this.DAt}w5(){const t=this.vi,s=this.wAt,i=s.R4();i.length&&i.at(-1)===t||(s.UV(t,!1),s.jV(t,!1),this.gf.j4())}T5(){const t=this.vi,s=this.wAt,i=s.R4();i.length&&i[0]===t||(s.UV(t,!1),s.zV(t,!1),this.gf.j4())}x5(t){const s=this.vi,i=this.wAt;if(i.f4()!==t.f4())throw new Error("layer from different layout");t!==i&&(i.UV(s,!0),this.P4(t),t.jV(s,!0),this.gf.j4())}C5(t,s){let i=this.vi,e=!1,h=this.wAt;if(t.$F()!==i.$F()){const r=t.D4();if(!r)throw new Error("expected world instance");const n=r.N4(),o=(h._O()!==n._O()&&(h.UV(i,!0),this.P4(n),n.jV(i,!0),e=!0),n.lH(i,t,!!s));(e||o)&&this.gf.j4()}}t5(){return this.kAt}fNt(t){this.fDt(64,t)}yH(){return 0!=(64&this.ISt)}x7(t,s=null){const i={x:this.wT(),y:this.bT(),w:this.Mm(),h:this.Em(),l:this.N4().nY(),zi:this.L4()},e=(0!==this.vT()&&(i.ze=this.vT()),0!==this.fk()&&(i.a=this.KAt()),this.cY()||(i.c=this.rT.toJSON()),.5!==this.pz()&&(i.oX=this.pz()),.5!==this.gz()&&(i.oY=this.gz()),0!==this.SF()&&(i.bm=this.SF()),this.Zk()||(i.v=this.Zk()),this.G5()||(i.ce=this.G5()),this.JDt()&&(i.be=this.JDt()),this.kAt&&(i.fx=this.kAt.x7()),0!=(32&this.ISt));return e&&(i.sfi=e),this.OAt&&(i.sft=[...this.OAt].join(" ")),this.jAt&&"visual-state"!==t&&(i.sgi=this.jAt.x7(t,s),g.has(this))&&(i.sgcd=g.get(this).YAt,i.sgzid=g.get(this).HAt),this.yB()&&(i.mesh=this.MB().NT()),i}rAt(){return{x:this.ou,y:this.au,z:this.nT,w:this.bAt,h:this.xAt,a:this.$o,sgi:this.ont()?this.ont().tAt():null}}uAt(t){t&&(this.ou=t.x,this.au=t.y,this.nT=t.z,this.bAt=t.w,this.xAt=t.h,this.$o=t.a,t.sgi&&this.ont()&&this.ont().v7(t.sgi),this.iDt(),this.i5())}S_t(){this.QAt(),this._Dt(),this.DDt(null),this.jAt&&this.jAt.oAt(this.BEt,this.zEt)}BZ(t){"visual-state"!==t&&this._Dt()}UZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ISt)&&this.jAt.UZ(t.sgi,i)}AEt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ISt)&&(this.jAt.oAt(null,null),this.QAt(),this.i5())}v7(t,s){if(m=!1,this.ST(t.x),this.xT(t.y),this.Im(t.w),this.wm(t.h),this.YV(t.zi),this.CT(t.hasOwnProperty("ze")?t.ze:0),this.ck(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.qa(t.c):t.hasOwnProperty("o")?(f.ca(this.rT),f.a=t.o):f.ta(1,1,1,1),this.JAt(f),this.Snt(t.hasOwnProperty("oX")?t.oX:.5),this.bnt(t.hasOwnProperty("oY")?t.oY:.5),this.aT(t.hasOwnProperty("bm")?t.bm:0),this.Hk(!t.hasOwnProperty("v")||t.v),this._5(!t.hasOwnProperty("ce")||t.ce),this.QDt(!!t.hasOwnProperty("be")&&t.be),this.kDt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.kAt&&t.hasOwnProperty("fx")&&this.kAt.v7(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.BEt)for(const i of this.BEt)i.nU()||this.gf.VF(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.DDt(null);const e=this.jAt,h=t.sgi;e.v7(h),e.oAt(this.BEt,this.zEt),t.sgcd&&d.pe(t.sgzid)&&g.set(this,{YAt:t.sgcd,HAt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.cB(r.cols,r.rows),this.MB().LT(r)}else this.dB();this.i5(),m=!0,this.qAt(),"visual-state"!==s&&this.gf.dNt(this.s6(),t)}}}{const ba=self.ks;ba.tGt=class extends ba.lr{constructor(t,s){super();const i=t.K4(),e=i._yt(s[1]),h=(i.pNt()._Ct(e),this.gf=i,this.yft=t,this.oCt=ba.rP.zB(e),this.Vxt=null,this.mNt=null,this.DIt=e.Instance,this._J=s[2],this.Mr=s[0],this.cMt=this.gf.V1t(s[3]),this.oCt.rSt());if(h<2&&(this.Vxt=ba.pr(e.yGt,this),!(this.Vxt instanceof ba.nCt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(ba.rP._xt(this,h),2<=h){const r=e.yGt??globalThis.yU;if(this.mNt=new r,!(this.mNt instanceof globalThis.yU))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.mNt=new globalThis.jB;ba.rP.Ext(h),this.vxt()}static ux(t,s){return ba.pr(ba.tGt,t,s)}mr(){this.gf=null,this.oCt=null,this.Vxt&&(this.Vxt.mr(),this.Vxt=null),this.DIt=null}sTt(){return this.Vxt}vxt(){this.Vxt?this.Vxt.vxt():this.mNt&&this.mNt.w6()}K4(){return this.gf}jF(){return this.yft}NB(){return this.oCt}jGt(){return this.DIt}nf(){return this.Mr}nY(){return this._J}OB(){return this.mNt}V1t(){return this.cMt}}}{const xa=self.ks,va=self.AB;xa.L_t=class extends xa.lr{constructor(t){super(),this.gf=t.runtime,this.WMt=t.LB,this.oCt=this.WMt.NB(),this.vi=t.PB,this.iy=t.index,this.C_t=null,this.I_t=null,this.oCt.jV(this.vi)}mr(){this.I_t&&(this.I_t.QF(),this.I_t=null),this.oCt.UV(this.vi),this.C_t&&(this.C_t.mr(),this.C_t=null),this.gf=null,this.WMt=null,this.oCt=null,this.vi=null}OGt(t){if(this.C_t)throw new Error("already got sdk instance");const s=this.NB().rSt();if(s<2){if(this.C_t=xa.pr(this.WMt.jGt(),this,t),!(this.C_t instanceof xa.aCt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.NB().Cxt();this.Gxt(i.Instance,t)}}CB(){return this.C_t??this.I_t}kB(){return this.vi}K4(){return this.gf}RB(){return this.WMt}NB(){return this.oCt}Ort(){return this.iy}fCt(){this.C_t?this.C_t.fCt():this.I_t.TU()}gCt(t,s){this.C_t&&this.C_t.gCt(t,s)}EEt(){return this.C_t?this.C_t.dvt():this.I_t.Bj()}NT(t="full"){return this.C_t?this.C_t.NT(t):this.I_t.zj(t)}LT(t,s="full"){if(this.C_t)return this.C_t.LT(t,s);this.I_t.Uj(t,s)}static gNt(t,s,i){let e=globalThis.MU,h,r;h=s instanceof e?t.Ck(s):s.cCt(),r=i instanceof e?t.Ck(i):i.cCt();const n=h.kB(),o=r.kB(),a=n.jF()._O(),u=o.jF()._O();if(a!==u)return a-u;const l=n.yEt(),c=o.yEt();return l!==c?l-c:h.Ort()-r.Ort()}Gxt(t,s){const i=va,e=t??this.C_t.Cxt(),h=e||i,r=this.NB().rSt();if(xa.rP._xt(this,r),xa.rP.ECt(s),this.I_t=new h,xa.rP.ACt(),xa.rP.Ext(r),!e||this.I_t instanceof i)return this.I_t;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}qxt(){return this.I_t||this.Gxt()}yvt(){return!!this.I_t}}}{const Ca=self.ks;Ca.lV=class extends Ca.lr{constructor(t,s){super(),this.BT=t,this.yNt=[],this.MNt=[],this.wNt=new Map,this.SNt=[],this.TNt=[],this.bNt=new Set,this.RS=!0;for(const i of s){const e=Ca.pr(Ca.xNt,this,i,this.yNt.length);this.yNt.push(e),this.wNt.set(e.nf().toLowerCase(),e),3<=i.length&&this.SNt.push(this.vNt(e,i[2]))}this.K4().CNt(this)}mr(){this.K4().INt(this);for(const t of this.TNt)t.mr();Ca.Qn(this.TNt),Ca.Qn(this.yNt),Ca.Qn(this.MNt),this.wNt.clear(),Ca.Qn(this.SNt),this.BT=null}GNt(t){this.bNt.add(t)}_Nt(t){this.bNt.delete(t)}ENt(t){t.RM()&&(this.TNt=this.yNt.map(t=>{const s=t.gv();return 0<s.GetCustomParametersByteSize()?Ca.pr(Ca.yy.WebGPUEffectCustomParamsBuffer,s):null}),this.ANt());for(const s of this.bNt)s.ENt(t)}NGt(t){if(t.length){this.yNt=t.concat(this.yNt);for(const s of t)this.wNt.set(s.nf().toLowerCase(),s);for(let t=0,s=this.yNt.length;t<s;++t)this.yNt[t].sY(t)}}vNt(t,s){t.DNt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.pr(Ca.qo);h.qa(e),i[t]=h}}return i}ZT(){return this.BT}K4(){return this.BT.K4()}QB(){Ca.Qn(this.MNt);let t=!0;for(const s of this.yNt)s.pmt()&&(this.MNt.push(s),s.gv().HS()||(t=!1));this.RS=t}rk(){return this.yNt}YGt(){return 0<this.yNt.length}kht(t){return this.wNt.get(t.toLowerCase())||null}NNt(t){if((t=Math.floor(+t))<0||t>=this.yNt.length)throw new RangeError("invalid effect type index");return this.yNt[t]}UB(t){return this.NNt(t).pmt()}WB(t,s){this.NNt(t).DNt(s)}fY(){return this.MNt}yH(){return 0<this.MNt.length}HS(){return this.RS}Pht(t){return this.SNt[t]}pV(t){return(t<this.TNt.length?this.TNt:this.SNt)[t]}JB(t,s){if(t<0||t>=this.SNt.length)return null;const i=this.SNt[t];return s<0||s>=i.length?null:i[s]}VB(t,s,i){if(t<0||t>=this.SNt.length)return!1;const e=this.SNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.qo){if(h.Ta(i))return!1;h.ca(i)}else{if(h===i)return!1;e[s]=i}return t<this.TNt.length&&this.TNt[t].SetParameterValue(s,i),!0}ANt(){const i=this.SNt,e=this.TNt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static LNt(t){return t&&t instanceof Ca.qo?{t:"color",v:t.toJSON()}:t}static ONt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ca.pr(Ca.qo);return i.qa(t.v),i}}}static RNt(t){return t.map(Ca.lV.LNt)}static PNt(t){return t.map(Ca.lV.ONt)}NT(){return this.yNt.map(t=>({name:t.nf(),active:t.pmt(),params:Ca.lV.RNt(this.SNt[t._O()])}))}LT(t){for(const s of t){const i=this.kht(s.name);i&&(i.DNt(s.active),this.SNt[i._O()]=Ca.lV.PNt(s.params))}this.QB(),this.ANt()}}}{const Ia=self.ks;Ia.xNt=class extends Ia.lr{constructor(t,s,i){super(),this.uV=t,this.Mf=s[0],this.Mr=s[1],this.iy=i,this.iT=null,this.m0=!0}mr(){this.uV=null,this.iT=null}DGt(t){const s=Ia.pr(Ia.xNt,t,[this.Mf,this.Mr],-1);return s.iT=this.iT,s.m0=this.m0,s}ENt(t){const s=t.zM(this.Mf);if(!s)throw new Error("failed to find shader program '"+this.Mf+"'");this.iT=s}hk(){return this.uV}nf(){return this.Mr}sY(t){this.iy=t}_O(){return this.iy}ZT(){return this.uV.ZT()}K4(){return this.uV.K4()}DNt(t){this.m0=!!t}pmt(){return this.m0}gv(){return this.iT}kNt(){const i=[];for(let t=0,s=this.iT.yv();t<s;++t){const e=this.iT.Mv(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.pr(Ia.qo,1,1,1,1))}}return i}}}{const Ga=self.ks;Ga.FAt=class extends Ga.lr{constructor(t,s){super(),this.vi=t,this.FNt=s,this.uV=t.jF().hk(),this.jNt=!0,this.gV=!0,this.BNt=!1,this.zNt=!1,this.UNt=!1,this.WNt=!1,this.vO=Ga.pr(Ga.yy.vN,t.K4().zR().cV(),{dN:(t,s)=>{const i=s.gO(),e=i.D4();t.uT(e.fV()),t._w(e.a5()),i.a2(t),t._w(0)},pN:t=>{const s=t._vt(),[i,e]=t.Gvt();return{uO:s,lO:i,cO:e}},mN:t=>this.pV(t)}),this.QNt=[],this.MNt=[],this.RS=!0,this.SNt=[],this.TNt=[],this.ENt(t.K4().US());for(let t=0,s=this.uV.rk().length;t<s;++t)this.QNt.push(!0);this.QB(),this.uV.GNt(this)}mr(){this.uV._Nt(this);for(const t of this.TNt)t&&t.mr();Ga.Qn(this.TNt),this.vO.mr(),this.vO=null,Ga.Qn(this.QNt),Ga.Qn(this.MNt),Ga.Qn(this.SNt),this.vi=null,this.uV=null}ENt(t){t.RM()&&(this.TNt=this.uV.rk().map(t=>{const s=t.gv();return 0<s.GetCustomParametersByteSize()?Ga.pr(Ga.yy.WebGPUEffectCustomParamsBuffer,s):null}))}VAt(t){let s=0;for(const i of t)this.SNt.push(this.vNt(s,i)),++s;this.ANt(),this.QB()}vNt(t,s){this.QNt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ga.pr(Ga.qo);h.qa(e),i[t]=h}}return i}B_t(){for(const t of this.uV.rk())this.SNt.push(t.kNt());this.ANt()}ZT(){return this.BT}hk(){return this.uV}GO(){return this.lY(),this.vO}K4(){return this.vi.K4()}QB(){Ga.Qn(this.MNt);let t=this.FNt,i=this.uV.rk(),e=this.MNt,h=this.QNt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.gv().HS()||(r=!1)}this.RS=r,t.fNt(!!e.length),this.jNt=!0}lY(){const t=this.vi,s=this.FNt,i=s.cY(),e=t.OP().MP(),h=0!==s.fk()||0!==s.N4().fk()||s.Mm()<0||s.Em()<0,r=t.Dvt(),n=t.YS();(this.jNt||i!==this.gV||e!==this.BNt||h!==this.zNt||r!==this.UNt||n!==this.WNt||this.vO.pL())&&(this.vO.mL(this.MNt.map(t=>t.gv()),{yN:this.MNt.map(t=>t._O()),MN:!i||n,SN:e,TN:r,bN:h}),this.jNt=!1,this.gV=i,this.BNt=e,this.zNt=h,this.UNt=r,this.WNt=n)}fY(){return this.MNt}Pht(t){return this.SNt[t]}pV(t){return(t<this.TNt.length?this.TNt:this.SNt)[t]}JB(t,s){if(t<0||t>=this.SNt.length)return null;const i=this.SNt[t];return s<0||s>=i.length?null:i[s]}VB(t,s,i){if(t<0||t>=this.SNt.length)return!1;const e=this.SNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ga.qo){if(h.Ta(i))return!1;h.ca(i)}else{if(h===i)return!1;e[s]=i}return t<this.TNt.length&&this.TNt[t].SetParameterValue(s,i),!0}ANt(){const i=this.SNt,e=this.TNt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}HS(){return this.RS}JNt(){return this.MNt.some(t=>t.gv().XS())}UB(t){return this.QNt[t]}WB(t,s){this.QNt[t]=!!s}rk(){return this.uV.rk()}x7(){return this.uV.rk().map(t=>({name:t.nf(),active:this.QNt[t._O()],params:Ga.lV.RNt(this.SNt[t._O()])}))}v7(t){for(const s of t){const i=this.uV.kht(s.name);i&&(this.QNt[i._O()]=s.active,this.SNt[i._O()]=Ga.lV.PNt(s.params))}this.QB(),this.ANt()}}}{let I=self.ks,r=[],S=[],n=[],T=I.pr(I.Bl),M=I.pr(I.Bl),b=I.pr(I.nl),d=I.pr(I.Rect),p=I.pr(I.Rect),m=null,g=null,y=null;I.VNt=class extends I.lr{constructor(t){super(),this.gf=t,this.YNt=0,this.HNt=0,this.qNt=[],this.ZNt=0,this.XNt=0,this.KNt=0,this.$Nt=0,this.tLt=new self.MR(this)}mr(){this.gf=null}K4(){return this.gf}OO(){return this.tLt}sLt(){this.XNt=this.ZNt,this.ZNt=0,this.$Nt=this.KNt,this.KNt=0}iLt(){return this.XNt}eLt(){return this.$Nt}hLt(t,s){const i=t.D4(),e=s.D4();i&&e&&i.G5()&&e.G5()&&this.qNt.push([t,s])}r2t(s,i,e){for(const[h,r]of this.qNt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.f2t(i)&&!e.includes(t)&&e.push(t)}}n2t(t,s){if(this.qNt.length)for(const[i,e]of this.qNt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}rLt(){I.Qn(this.qNt)}SR(t,s){if(!t||!s||t===s)return!1;const i=t.D4(),e=s.D4();if(!i.G5()||!e.G5())return!1;this.ZNt++;const h=i.N4(),r=e.N4(),n=h.$Y(r);return n?this.nLt(i,e):this.oLt(i,e)}nLt(t,s){if(!t.l5().tl(s.l5()))return!1;if(this.KNt++,!t.f5().Nl(s.f5()))return!1;if(t.H_t()&&s.H_t())return!1;if(t.H_t())return this.aLt(t,s);if(s.H_t())return this.aLt(s,t);if(!t.$Dt()&&!s.$Dt())return!0;const i=t.tNt(),e=s.tNt();return i.$l(e,s.wT()-t.wT(),s.bT()-t.bT())}oLt(i,e){const t=i.H_t(),s=e.H_t();if(t&&!s)return this.uLt(i,e);if(s&&!t)return this.uLt(e,i);if(s||t)return!1;{const h=i.N4(),r=e.N4(),n=(T.I(i.tNt()),M.I(e.tNt()),T.Jl());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,u=n[t],l=n[a],[c,f]=h.AF(u+i.wT(),l+i.bT());n[t]=c,n[a]=f}const o=M.Jl();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.AF(p+e.wT(),m+e.bT());o[t]=g,o[d]=y}return T.ql(),M.ql(),this.KNt++,T.$l(M,0,0)}}uLt(t,s){const i=t.N4(),e=s.N4(),h=(m=m||I.pr(I.Bl),g=g||I.pr(I.Rect),y=y||I.pr(I.nl),s.wT()),r=s.bT(),[n,o]=e.AF(h,r),[a,u]=i.IF(n,o),l=a-h,c=u-r;if(g.I(s.l5()),g.offset(l,c),!t.l5().tl(g))return!1;if(y.I(s.f5()),y.offset(l,c),this.KNt++,!t.f5().Nl(y))return!1;m.I(s.tNt());const f=m.Jl();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.ql(),this.aLt(t,s,a,u,m,g,y)}aLt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.l5(),a=t.wT(),u=t.bT(),l=t.s6().CB(),c=void 0!==s?s:e.wT(),f=void 0!==i?i:e.bT(),d=e.$Dt(),p=void 0!==n?n:e.f5(),m=S;l.lLt(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.cLt();if(this.ZNt++,o.sl(y,a,u)&&(b.Gl(y),b.offset(a,u),b.Nl(p)))if(d){let t=void 0!==h?h:e.tNt(),s=c,i=f;void 0!==h&&(s=e.wT(),i=e.bT());const M=g.fLt();if(M){if(this.KNt++,M.$l(t,s-(a+y.Au()),i-(u+y.Du())))return I.Qn(m),!0}else if(T.Xl(b,0,0),T.$l(t,s,i))return I.Qn(m),!0}else{const w=g.fLt();if(!w)return I.Qn(m),!0;if(T.Xl(p,0,0),w.$l(T,-(a+y.Au()),-(u+y.Du())))return I.Qn(m),!0}}return I.Qn(m),!1}dLt(t,o,a){const u=t.JP(),s=this.gf.m3();if(!s)throw new Error("cannot call outside event");const l=s.Vft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.eF(),i.set(t,s)),s};if(u.Eft()){a||(u.Pft(!1),I.Qn(u.kft())),l&&I.Qn(u.Fft());for(const e of t.QP()){let h=e.D4(),r=h.N4();if(!(!c(r)||!h.p5())&&o.some(([t,s])=>{const[i,e]=r.IF(t,s,h.a5());return h.E5(i,e)})){if(a)return!1;u.Oft(e)}else l&&u.Rft(e)}}else{let i,e=!1,n=(!l||s.Fgt(this.gf.k1t())||this.gf.nTt()&&!u.Fft().length&&u.kft().length?i=u.kft():(i=u.Fft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.D4(),r=h.N4();if(!(!c(r)||!h.p5())&&o.some(([t,s])=>{const[i,e]=r.IF(t,s,h.a5());return h.E5(i,e)})){if(a)return!1;e?u.Oft(t):i[n++]=t}else e?i[n++]=t:l&&u.Rft(t)}a||(i.length=n)}return t.wyt(),i.clear(),!!a||u.Aft()}pLt(t,s){if(t)for(const i of s.p_t())if(!t.$Y(i))return!1;return!0}rTt(t,s,i,e){if(s.KV())for(const h of s.cgt())this.pLt(t,h)?(h.c_t(),h.u_t().dJ(i,e)):I.Kh(e,h.QP());else this.pLt(t,s)?(s.c_t(),s.u_t().dJ(i,e)):I.Kh(e,s.QP())}AR(t,s,i,e){for(const h of s)this.rTt(t,h,i,e)}mLt(t,s,i){const e=this.gf.NCt();e&&this.AR(t,e.fX(),s,i)}gLt(t,s,i){const e=this.gf.LCt();e&&this.AR(t,e.fX(),s,i)}FDt(t,s){return t.X_t()&&(!s||s.D4().FDt(t.cSt().get("solidTags")))}xR(t){const s=t.D4();this.mLt(s.N4(),s.l5(),r);for(const i of r)if(this.FDt(i,t)&&this.SR(t,i))return I.Qn(r),i;return I.Qn(r),null}yLt(t,s){this.mLt(null,t,r);for(const i of r)if(this.FDt(i,s)&&this.MLt(t,i))return I.Qn(r),i;return I.Qn(r),null}wLt(t,s){let i=null;s&&(i=n,I.Qn(i));const e=t.D4();this.gLt(e.N4(),e.l5(),r);for(const h of r)if(h.$_t()&&this.SR(t,h)){if(!s)return I.Qn(r),h;i.push(h)}return I.Qn(r),i}SLt(s,i,e,h,r){h=h||50;const n=s.D4(),o=n.wT(),a=n.bT();for(let t=0;t<h;++t)if(n.e5(o+i*t,a+e*t),n.i5(),!this.SR(s,r))return!0;return n.e5(o,a),n.i5(),!1}TLt(s,i,e,h,r,n){h=h||50;let o=s.D4(),a=o.wT(),u=o.bT(),l=null,c=null;for(let t=0;t<h;++t)if(o.e5(a+i*t,u+e*t),o.i5(),!this.SR(s,l))if(l=this.xR(s))c=l;else if(r&&(l=n?this.SR(s,n)?n:null:this.wLt(s))&&(c=l),!l)return c&&this.bLt(s,i,e,c,16,!0),!0;return o.e5(a,u),o.i5(),!1}xLt(i,e,h,t){t=t||50;let r=i.D4(),n=r.wT(),o=r.bT(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.e5(n+e*s*l,o+h*s*l),r.i5(),!this.SR(i,a)){if(!(a=this.xR(i)))return u&&this.bLt(i,e*l,h*l,u,16,!0),!0;u=a}}return r.e5(n,o),r.i5(),!1}bLt(t,s,i,e,h,r){let n=2,o=!1,a=!1,u=t.D4(),l=u.wT(),c=u.bT();for(;n<=h;){const f=1/n;n*=2,u.n5(s*f*(o?1:-1),i*f*(o?1:-1)),u.i5(),this.SR(t,e)||r&&this.xR(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.wT(),c=u.bT())}a&&(u.e5(l,c),u.i5())}vLt(i,t=100){let e=0,h=i.D4(),r=h.wT(),n=h.bT(),o=0,a=this.xR(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.e5(Math.floor(r+t*e),Math.floor(n+s*e)),h.i5(),!this.SR(i,a)&&!(a=this.xR(i)))return!0}return h.e5(r,n),h.i5(),!1}CLt(t,s,i,e){const h=t.D4(),r=h.wT(),n=h.bT(),o=Math.max(10,I._r(s,i,r,n)),a=I.Ar(s,i,r,n),u=e||this.xR(t);if(!u)return I.br(a+Math.PI);let l=u,c=0,f=0,d=I.vr(5),p;for(p=1;p<36;++p){const v=a-p*d;if(h.e5(s+Math.cos(v)*o,i+Math.sin(v)*o),h.i5(),!this.SR(t,l)&&!(l=e?null:this.xR(t))){c=v;break}}for(36===p&&(c=I.br(a+Math.PI)),l=u,p=1;p<36;++p){const C=a+p*d;if(h.e5(s+Math.cos(C)*o,i+Math.sin(C)*o),h.i5(),!this.SR(t,l)&&!(l=e?null:this.xR(t))){f=C;break}}if(36===p&&(f=I.br(a+Math.PI)),h.e5(r,n),h.i5(),f===c)return f;let m=I.Dr(f,c)/2,g;g=I.Lr(f,c)?I.br(c+m+Math.PI):I.br(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return I.Ar(0,0,b,x)}ILt(t,s,i,e,h){if(!h)return!1;const r=h.D4();if(!r.G5())return!1;if(this.ZNt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.l5().tl(d))return!1;if(h.H_t())return this.GLt(t,s,i,e,h,r);if(this.KNt++,!r.f5().Dl(t,s,i,e))return!1;if(!r.$Dt())return!0;const n=r.tNt();return n.Dl(r.wT(),r.bT(),t,s,i,e)}GLt(i,e,h,r,t,s){const n=s.wT(),o=s.bT(),a=t.CB(),u=S;p.set(i,e,h,r),p.normalize(),a.lLt(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.cLt();if(this.ZNt++,d.sl(c,n,o)&&(b.Gl(c),b.offset(n,o),b.Dl(i,e,h,r))){const f=l.fLt();if(!f)return I.Qn(u),!0;if(this.KNt++,f.Dl(n+c.Au(),o+c.Du(),i,e,h,r))return I.Qn(u),!0}}return I.Qn(u),!1}MLt(t,s){if(!s)return!1;const i=s.D4();if(!i.G5())return!1;if(this.ZNt++,!i.l5().tl(t))return!1;if(s.H_t())return this._Lt(t,s,i);if(this.KNt++,b.Gl(t),!i.f5().Nl(b))return!1;if(!i.$Dt())return!0;const e=T,h=(e.Gl(t,i.wT(),i.bT()),i.tNt());return e.$l(h,0,0)}_Lt(i,t,s){const e=s.wT(),h=s.bT(),r=t.CB(),n=S;r.lLt(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.cLt();if(this.ZNt++,i.sl(a,e,h)){const u=o.fLt();if(!u)return I.Qn(n),!0;if(this.KNt++,T.Gl(i,0,0),u.$l(T,-(e+a.Au()),-(h+a.Du())))return I.Qn(n),!0}}return I.Qn(n),!1}ELt(t,s){if(t){const i=t.D4();i.G5()&&(this.ZNt++,i.l5().tl(s.rect))&&(t.H_t()?this.ALt(t,i,s):(this.KNt++,i.$Dt()?s.DLt(t,i.wT(),i.bT(),i.tNt()):s.NLt(t,i.f5())))}}ALt(i,e,h){const r=e.wT(),n=e.bT(),o=S;i.CB().lLt(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.cLt();if(this.ZNt++,h.rect.sl(u,r,n)){const l=a.fLt();this.KNt++,l?h.DLt(i,r+u.Au(),n+u.Du(),l):h.LLt(i,e.wT(),e.bT(),u)}}I.Qn(o)}CR(t,s){if(t!==this.YNt||s!==this.HNt){this.YNt=t,this.HNt=s;const i=this.gf.XV();for(const e of i)if(e.lP()){for(const h of e.WP())h.D4().PDt();e.u_t().OLt(t,s),e.l_t();for(const r of e.WP()){const n=r.D4();n.cNt(),n.f_t()}}}}GR(){return[this.YNt,this.HNt]}RLt(t,s){this.YNt=t,this.HNt=s}}}{const _a=self.ks;_a.zIt=class extends _a.lr{constructor(t,s){super(),this.nJ=t,this.oJ=s,this.aJ=_a.pr(_a.rc)}mr(){this.aJ.mr(),this.aJ=null}OLt(t,s){if(!this.aJ.ac())throw new Error("grid not empty");this.nJ=t,this.oJ=s}uJ(t,s,i){let e=this.aJ.si(t,s);return e||(i?(e=_a.pr(_a.PLt,this,t,s),this.aJ.Set(t,s,e),e):null)}lJ(t){const s=Math.floor(t/this.nJ);return isFinite(s)?s:0}cJ(t){const s=Math.floor(t/this.oJ);return isFinite(s)?s:0}fJ(e,h,r){if(h)for(let i=h.Au(),t=h.Nu();i<=t;++i)for(let t=h.Du(),s=h.Lu();t<=s;++t)if(!r||!r.il(i,t)){const n=this.uJ(i,t,!1);n&&(n._0(e),n.ac())&&this.aJ.uc(i,t)}if(r)for(let i=r.Au(),t=r.Nu();i<=t;++i)for(let t=r.Du(),s=r.Lu();t<=s;++t)h&&h.il(i,t)||this.uJ(i,t,!0).iJ(e)}dJ(t,s){let i=this.lJ(t.Au()),e=this.cJ(t.Du()),h=this.lJ(t.Nu()),r=this.cJ(t.Lu());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.uJ(i,t,!1);n&&n.hJ(s)}}}}{const Ea=self.ks;Ea.PLt=class extends Ea.lr{constructor(t,s,i){super(),this.H8=t,this.ou=s,this.au=i,this.q8=Ea.pr(Ea.mc)}mr(){this.q8.mr(),this.q8=null,this.H8=null}ac(){return this.q8.ac()}iJ(t){this.q8.Sc(t)}_0(t){this.q8.uc(t)}hJ(t){Ea.Kh(t,this.q8.Tc())}}}{const Aa=self.ks;Aa.kLt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Aa.Rect,this.FLt=2,this.jLt=null,this.BLt=0,this.zLt=0,this.ULt=0,this.WLt=0,this.QLt=0,this._t=0,this.JLt=1,this.VLt=0,this.YLt=1,this.HLt=0}qLt(){return this.FLt<1+1e-6}g0(){this.FLt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.FLt=2,this.jLt=null,this.BLt=0,this.zLt=0,this.ULt=0,this.WLt=0,this.QLt=0,this._t=0,this.JLt=1,this.VLt=0,this.YLt=1,this.HLt=0,this}ZLt(){if(!1!==this.qLt()){const t=this.dx*this.FLt,s=this.dy*this.FLt,i=Aa.Ir(t,s),e=t/i,h=s/i,r=(this._t=i-1e-6,this.WLt=this.x1+e*this._t,this.QLt=this.y1+h*this._t,this.BLt=Math.atan2(this.ULt,this.zLt)+Math.PI/2,this.JLt=Math.cos(this.BLt),this.VLt=Math.sin(this.BLt),e*this.JLt+h*this.VLt);if(this.YLt=e-2*this.JLt*r,this.HLt=h-2*this.VLt*r,0<r){const n=Math.PI;this.BLt=Aa.br(this.BLt+n),this.JLt=-this.JLt,this.VLt=-this.VLt}}}XLt(t,s,i,e,h){const r=Aa.Sn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.FLt&&(this.FLt=r,this.jLt=t.$F(),this.zLt=s-e,this.ULt=i-h)}LLt(t,s,i,e){const h=s+e.Au(),r=s+e.Nu(),n=i+e.Du(),o=i+e.Lu();this.XLt(t,h,n,r,n),this.XLt(t,r,n,r,o),this.XLt(t,r,o,h,o),this.XLt(t,h,o,h,n)}NLt(t,s){const i=s.ln(),e=s.cn(),h=s.dn(),r=s.pn(),n=s.mn(),o=s.gn(),a=s.yn(),u=s.Mn();this.XLt(t,i,e,h,r),this.XLt(t,h,r,n,o),this.XLt(t,n,o,a,u),this.XLt(t,a,u,i,e)}DLt(i,e,h,t){const r=t.Jl();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,u=r[n]+e,l=r[1+n]+h;this.XLt(i,o,a,u,l)}}}}{const b=self.ks,Da=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Na=new Set(["high","low"]),La=self.Ss,xh=La.vs,vh=La._s,Oa=xh.create(),Ra=b.pr(b.nl),x=b.pr(b.Rect);b.KLt=class extends b.lr{constructor(t){super(),this.gf=t,this.$Lt=[],this.tOt=!1,this.sOt=null,this.iOt=null,this.eOt=null,this.hOt="high-performance",this.rOt=!1,this.nOt="auto",this.oOt=0,this.aOt=0,this.uOt="",this.lOt=0,this.cOt=0,this.fOt=0,this.dOt=0,this.pOt=0,this.mOt=0,this.Fy="normalized",this.gOt=0,this.yOt=1,this.MOt=1e4,this.pM=!0,this.wOt=0,this.qN=0,this.ZN=0,this.SOt="letterbox-scale",this.TOt="letterbox-scale",this.bOt=0,this.xOt=0,this.vOt=xh.create(),this.COt="high",this.IOt=this.COt,this.GOt=!1,this._Ot=[],this.EOt=new Set,this.AOt=self.C3_Shaders,this.DOt=b.pr(b.yy.$D,{qD:()=>[this.LH(),this.OH()],ZD:()=>this.NOt(),XD:t=>this.LOt(t),getTime:()=>this.K4().O3(),KD:()=>this.K4().j4()}),this.OOt=0,this.ROt=0,this.POt=NaN,this.kOt=null,this.FOt=new Map,this.jOt=NaN,this.BOt=new Map,this.zOt="",this.UOt=1,this.WOt=b.pr(b.Rect),this.QOt="",this.JOt=null,this.VOt=null,this.YOt=0,this.HOt=0,this.qOt=-1,this.ZOt=0,this.XOt=t=>this.ZOt=t.progress,this.KOt=null,this.$Ot={t3t:null,s3t:null,i3t:null},this.e3t=0,this.h3t=0,this.r3t=0,this.n3t="fade-in",this.o3t=null,this.a3t=new Promise(t=>this.o3t=t)}u3t(t){this.hOt=t}l3t(t){this.tOt=!!t}c3t(t){this.Fy=t}f3t(){return this.Fy}d3t(t){this.gOt=t}p3t(t,s){this.yOt=t,this.MOt=s}m3t(t){this.rOt=!!t}g3t(t){this.nOt=t}async ko(t){let s=t.canvas,i=(this.$Lt.push({canvas:s,y3t:null}),this.gf.Aj("runtime","window-resize",t=>this.M3t(t)),this.gf.Aj("runtime","fullscreenchange",t=>this.w3t(t)),this.gf.Aj("runtime","fullscreenerror",t=>this.S3t(t)),s.addEventListener("webglcontextlost",t=>this.T3t(t)),s.addEventListener("webglcontextrestored",t=>this.b3t(t)),this.GOt=!!t.isFullscreen,this.uOt=t.cssDisplayMode,navigator.gpu&&this.tOt),e=!1;if(i)try{await this.x3t(!0)}catch(t){this.v3t("WebGPU",t),this.iOt=null}if(!this.US())try{await this.C3t(!0)}catch(t){this.v3t("WebGL",t),this.sOt=null}if(this.US()||(e=!0),!this.US()&&i)try{await this.x3t(!1)}catch(t){this.v3t("WebGPU",t),this.iOt=null}if(!this.US())try{await this.C3t(!1)}catch(t){this.v3t("WebGL",t),this.sOt=null}const h=this.US();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.SS(e),this.iOt&&(this.iOt.I3t=()=>this.G3t(),this.iOt._3t=()=>this.E3t()),"normalized"===this.Fy?h.DM():(h.NM(),h.EM(this.gOt)),this.n_(t.windowInnerWidth,t.windowInnerHeight,!0),await this.ENt()}v3t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async x3t(t){let s={Dy:this.yOt,Ny:this.MOt},i=!0;"no"===this.nOt?i=!1:"auto"===this.nOt&&(i=b.ai.Mi);const e={powerPreference:this.hOt,depth:this.gf.BY(),failIfMajorPerformanceCaveat:t,A3t:this.gf.UH(),D3t:this.gf.N3t(),gE:this.gf.L3t(),O3t:i};this.iOt=b.pr(b.yy.WebGPURenderer,s),await this.iOt.ux(this.$Lt[0].canvas,e)}async C3t(t){const s={alpha:!0,powerPreference:this.hOt,mE:"xbox-uwp-webview2"!==this.gf.kR(),depth:this.gf.BY(),gE:this.gf.L3t(),failIfMajorPerformanceCaveat:t,Dy:this.yOt,Ny:this.MOt};this.rOt&&(s.yE=1),this.sOt=b.pr(b.yy.SE,this.$Lt[0].canvas,s),await this.sOt.wM()}async R3t(){if(this.AOt){const t=[];for(const[s,i]of Object.entries(this.AOt)){i.src=i.wgsl;const e=b.yy.WebGPUShaderProgram.Pv();t.push(this.iOt.bA(Object.assign({ix:e,name:s},i)))}await Promise.all(t)}}async P3t(){if(this.AOt){const s=[];for(const[i,e]of Object.entries(this.AOt)){let t;if(e.glslWebGL2&&2<=this.sOt.U2())e.src=e.glslWebGL2,t=b.yy.$b.kv();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=b.yy.$b.Pv()}s.push(this.sOt.bA(Object.assign({ix:t,name:i},e)))}await Promise.all(s),this.sOt.xA(),this.sOt.WM()}this.sOt.PD()&&(this.kOt=b.pr(b.yy.rE,this.sOt))}async ENt(){this.iOt?await this.R3t():this.sOt&&await this.P3t();const t=this.US();t.MS(this.pM),t.PD()&&(this.POt=0);for(const s of this.gf.k3t()){for(const i of s.rk())i.ENt(t);s.ENt(t),s.QB()}this.eOt=new self.oW(this.gf,t)}mr(){this.gf=null,this.sOt=null,this.$Lt.length=0}JO(){return this.gf.JO()}M3t(t){const s=this.gf;if(!s.F3t()){const i=t.devicePixelRatio,e=(this.JO()&&(self.devicePixelRatio=i),s.j3t(i),this.GOt=!!t.isFullscreen,this.uOt=t.cssDisplayMode,this.n_(t.innerWidth,t.innerHeight),s.j4(),new b.Event("window-resize")),h=(e.data=t,s.qf().r0(e),new b.Event("resize"));h.B3t=this.JR(),h.z3t=this.YR(),h.U3t=this.qR(),h.W3t=this.KR(),s.Jq(h),s.Rj()&&(s.Cdt()||self.C3Debugger.IsDebuggerPaused())&&s.CL()}}w3t(t){this.GOt=!!t.isFullscreen,this.n_(t.innerWidth,t.innerHeight,!0),this.gf.j4()}S3t(t){this.GOt=!!t.isFullscreen,this.n_(t.innerWidth,t.innerHeight,!0),this.gf.j4()}n_(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.oOt!==t||this.aOt!==s||i){this.oOt=t,this.aOt=s;const e=this.Q3t();"letterbox-scale"===e?this.J3t(t,s):"letterbox-integer-scale"===e?this.V3t(t,s):"off"===e?this.Y3t(t,s):this.H3t(t,s),this.q3t(e);for(const{canvas:n}of this.$Lt)n.width=this.fOt,n.height=this.dOt;this.gf.wf("canvas","update-size",{marginLeft:this.pOt,marginTop:this.mOt,styleWidth:this.lOt,styleHeight:this.cOt,displayScale:this.oU()});const h=this.US();h.n_(this.fOt,this.dOt,!0);for(const o of this._Ot)h.AD(o);b.Qn(this._Ot),this.Z3t();const r=this.gf.c4();r.dZ(),r.pZ()}}Z3t(){this.US().OM(this.vOt,this.LH()/this.OH())}RH(){return this.vOt}J3t(t,s){const i=this.gf.$R(),e=this.gf.YO(),h=this.gf.qO(),r=e/h,n=t/s;if(r<n){const o=s*r;this.lOt=Math.round(o),this.cOt=s,this.pOt=Math.floor((t-this.lOt)/2),this.mOt=0}else{const a=t/r;this.lOt=t,this.cOt=Math.round(a),this.pOt=0,this.mOt=Math.floor((s-this.cOt)/2)}this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.gf.X3t(e,h)}V3t(t,s){let i=this.gf.$R(),e=(1!==i&&(t+=1,s+=1),this.gf.YO()),h=this.gf.qO(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.fOt=Math.round(e*o),this.dOt=Math.round(h*o),this.lOt=this.fOt/i,this.cOt=this.dOt/i,this.pOt=Math.max(Math.floor((t-this.lOt)/2),0),this.mOt=Math.max(Math.floor((s-this.cOt)/2),0),this.gf.X3t(e,h)}H3t(t,s){const i=this.gf.$R(),e=(this.lOt=t,this.cOt=s,this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.pOt=0,this.mOt=0,this.oU());this.gf.X3t(this.lOt/e,this.cOt/e)}Y3t(t,s){const i=this.gf.$R();this.lOt=this.gf.AY(),this.cOt=this.gf.DY(),this.fOt=Math.round(this.lOt*i),this.dOt=Math.round(this.cOt*i),this.K3t()?(this.pOt=Math.floor((t-this.lOt)/2),this.mOt=Math.floor((s-this.cOt)/2)):(this.pOt=0,this.mOt=0),this.gf.X3t(this.gf.AY(),this.gf.DY())}q3t(i){if("high"===this.COt)this.qN=this.fOt,this.ZN=this.dOt,this.IOt="high";else{let t,s;if(s="off"===this.Q3t()?(t=this.gf.AY(),this.gf.DY()):(t=this.gf.YO(),this.gf.qO()),this.fOt<t||this.dOt<s)this.qN=this.fOt,this.ZN=this.dOt,this.IOt="high";else if(this.qN=t,this.ZN=s,this.IOt="low","scale-inner"===i){const e=t/s,h=this.oOt/this.aOt;h<e?this.qN=this.ZN*h:e<h&&(this.ZN=this.qN/h)}else if("scale-outer"===i){const r=t/s,n=this.oOt/this.aOt;r<n?this.qN=this.ZN*n:n<r&&(this.ZN=this.qN/n)}}}K4(){return this.gf}$3t(){return this.$Lt[0].canvas}cV(){return this.DOt}K3t(){return this.GOt}t4t(){return this.uOt}s4t(t){if(!Da.has(t))throw new Error("invalid fullscreen mode");this.SOt=t;const s=this.gf.c4();s.dZ(),s.pZ()}rU(){return this.SOt}i4t(t){if(!Da.has(t))throw new Error("invalid fullscreen mode");this.TOt=t;const s=this.gf.c4();s.dZ(),s.pZ()}e4t(){return this.TOt}Q3t(){return this.K3t()?this.e4t():this.rU()}h4t(t){if(!Na.has(t))throw new Error("invalid fullscreen scaling quality");this.COt=t,this.gf.c4().dZ()}r4t(){return this.COt}WH(){return this.IOt}static n4t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}J6(){return this.oOt}V6(){return this.aOt}LH(){return this.qN}OH(){return this.ZN}MS(t){this.pM=!!t}o4t(t){this.wOt=t}U8(){return this.wOt}a4t(){return this.US().R_()}T3t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this._Ot=[],this.EOt.clear(),this.DOt.lT(),this.sOt.lT(),this.gf.W9()}G3t(){console.log("[Construct] WebGPU device lost"),this._Ot=[],this.EOt.clear(),this.DOt.lT(),this.gf.W9()}async b3t(t){await this.sOt.cT(),await this.ENt(),await this.gf.u4t(),console.log("[Construct] WebGL context restored")}async E3t(){await this.ENt(),await this.gf.u4t(),console.log("[Construct] WebGPU device restored")}l4t(){return this.sOt}c4t(){return this.iOt}US(){return this.iOt||this.sOt}FGt(){return this.eOt}BR(){let t="";return t=this.gf.c4t()?"webgpu":"webgl"+this.gf.l4t().U2(),this.gf.US().TS()&&(t+="-software"),t}WR(){return this.gf.c4t()?this.gf.c4t().GetAdapterInfoString():this.gf.l4t().JD()}PF(){return"low"===this.IOt?1/this.gf.$R():this.oU()}oU(){const t=this.Q3t();if("off"===t||"crop"===t)return 1;const s=this.gf.YO(),i=this.gf.qO(),e=s/i,h=this.fOt/this.dOt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.cOt/i:this.lOt/s}d7(){return"low"===this.WH()?1:this.oU()}c7(){return"low"===this.WH()?1:this.gf.$R()}f4t(t,s){this.bOt=t,this.xOt=s}YW(s,i,e,t=!0){i=i||this.qN,e=e||this.ZN;const h=i/2+this.bOt,r=e/2+this.xOt;if(t){let t=this.RH();i===this.qN&&e===this.ZN||(s.OM(Oa,i/e),t=Oa),s.CA(t)}const n=s.FM(h,r,s.TM(e),h,r,0,e);s.DA(n)}d4t(t,s=!0){const i=this.JR(),e=this.YR(),h=i/2,r=e/2,n=(s&&t.CA(this.RH()),t.FM(h,r,t.TM(e),h,r,0,e));t.DA(n)}qR(){return this.fOt}KR(){return this.dOt}JR(){return this.lOt}YR(){return this.cOt}GF(){return this.pOt}_F(){return this.mOt}I9(){return this.$Lt.length}p4t(){return"undefined"!=typeof OffscreenCanvas&&this.$3t()instanceof OffscreenCanvas&&("Chromium"!==b.ai.gi||124<=b.ai.mi)}async H9(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.$Lt.length!==e){let t=this.gf.c4().a4(),s={count:e,layersDomState:t.rY().filter(t=>t.tF()).map(t=>t.uH()),immediate:h,marginLeft:this.pOt,marginTop:this.mOt,styleWidth:this.lOt,styleHeight:this.cOt},i;if(i=this.JO()?await this.gf.z4("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.$Lt.length)this.$Lt.length=e;else for(const r of i.addedCanvases){r.width=this.fOt,r.height=this.dOt;const n=this.p4t()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.$Lt.push({canvas:r,y3t:o})}this.gf.j4()}}Uq(t){if(!(t>=this.$Lt.length)){const s=this.$3t(),i=this.$Lt[t].y3t;this.p4t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}QH(s){s.depth=this.gf.BY();let t=this._Ot,i=t.findIndex(t=>t.Yb(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.US().CD(s),this.EOt.add(e),e}dV(t){if(!this.EOt.has(t))throw new Error("render target not in use");this.EOt.delete(t),this._Ot.push(t)}NOt(){const t={T2:this.gf.ZO()};return"low"===this.WH()&&(t.width=this.LH(),t.height=this.OH()),this.QH(t)}LOt(t){this.dV(t)}*m4t(){for(const t of this.gf.c4().lZ())for(const s of t.Tk()){const i=this.FOt.get(s);i&&(yield i)}}jH(t){if(!this.US().PD())return null;let s=this.FOt.get(t);return s||(s={s5:t,name:t.nf(),g4t:b.pr(b.yy.rE,this.sOt),y4t:0,M4t:0,w4t:0},this.FOt.set(t,s)),s.g4t}S4t(){const t=this.US();if(t.PD()&&0===this.ROt){this.ROt=t.gS(),this.jOt=NaN;for(const s of this.m4t())s.y4t=NaN}}T4t(){this.sOt&&this.sOt.PD()&&this.b4t(),this.iOt&&this.iOt.PD()&&this.x4t()}b4t(){if(isNaN(this.jOt)&&(this.jOt=this.kOt.fE(this.OOt,this.ROt),!isNaN(this.jOt))){if(this.gf.Rj())for(const t of this.m4t())if(t.y4t=t.g4t.fE(this.OOt,this.ROt),isNaN(t.y4t))return;if(this.kOt.dE(this.ROt),this.POt=Math.min(this.jOt,1),this.gf.Rj()){const i=new Map;for(const h of this.m4t())h.g4t.dE(this.ROt),h.M4t=Math.min(h.y4t,1),i.set(h.s5,h.M4t);for(const r of this.m4t()){const n=r.s5,o=i.get(n)||0,a=o-n.Qk().reduce((t,s)=>t+(i.get(s)||0),0);r.w4t=b.Tr(a,0,1)}const s=this.gf.a4(),e=this.POt-s.rY().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(b.Tr(e,0,1),this.POt,[...this.m4t()])}this.OOt=this.ROt,this.ROt=0}}v4t(){return this.kOt}x4t(){if(0!==this.ROt){for(let t=this.OOt;t<this.ROt;++t){const i=this.BOt.get(t);if(i&&!i.Y_())return}let t=this.gf.a4(),n=b.Ho(t.S9()+1,0),s=0;for(let t=this.OOt;t<this.ROt;++t){const o=this.BOt.get(t);if(o){let i=o.H_(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;n[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.POt=b.Tr(s,0,1),this.gf.Rj()){const e=t.Tk(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,M]of h){const w=[...y.Vk()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.nf(),w4t:b.Tr(M,0,1),M4t:b.Tr(w,0,1)})}const m=this.POt-t.rY().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(b.Tr(m,0,1),this.POt,r)}for(let t=this.OOt;t<this.ROt;++t)this.BOt.delete(t);this.OOt=this.ROt,this.ROt=0}}C4t(t){this.BOt.set(this.iOt.gS(),t)}V3(){return this.POt}I4t(t,s,i,e,h,r){return this.zOt=t,this.UOt=s,this.WOt.bu(i,e,h,r),this.JOt||(this.JOt=new Promise(t=>{this.VOt=t})),this.JOt}G4t(){if(this.zOt){let t=this.$3t(),s=this.WOt,i=b.Tr(Math.floor(s.Au()),0,t.width),e=b.Tr(Math.floor(s.Du()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:b.Tr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:b.Tr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=b.ko(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}b.Fo(t,this.zOt,this.UOt).then(t=>{this.QOt&&URL.revokeObjectURL(this.QOt),this.QOt=URL.createObjectURL(t),this.JOt=null,this.VOt(this.QOt)}),this.zOt="",this.UOt=1}}_4t(){return this.QOt}E4t(t){t?this.YOt++:this.YOt--}A4t(){return 0<this.YOt}D4t(t){const s=this.US();if(2===t)this.KOt=b.pr(b.yy._S,this.US()),this.KOt.PG("Arial"),this.KOt.kG(16),this.KOt.XG("center"),this.KOt.$G("center"),this.KOt.n_(300,200);else if(0===t){const i=this.gf.N4t();i&&i.jW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.L4t("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.n3t?s.Nb(t):this.$Ot.t3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.O4t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.n3t?s.Nb(t):this.$Ot.s3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.O4t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.n3t?s.Nb(t):this.$Ot.i3t=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async L4t(t){t=new URL(t,this.gf.R4t()).toString();const s=await b.Ao(t),i=await this.gf.P4t(s,2048,2048);return this.US().vD(i,{I2:"high"})}async O4t(t){t=new URL(t,this.gf.R4t()).toString();const s=await b.Ao(t);return this.US().vD(s,{I2:"high"})}k4t(){this.gf.wf("runtime","hide-cordova-splash")}F4t(){this.HOt=Date.now(),this.gf.qf().addEventListener("loadingprogress",this.XOt),this.qOt=requestAnimationFrame(()=>this.j4t());const t=this.gf.B4t();3!==t&&this.k4t()}async z4t(){const t=this.US(),s=(this.ZOt=1,this.gf.B4t());4===s&&await this.a3t,this.o3t=null,this.a3t=null,-1!==this.qOt&&(cancelAnimationFrame(this.qOt),this.qOt=-1),this.gf.qf().removeEventListener("loadingprogress",this.XOt),this.XOt=null,this.KOt&&(this.KOt.mr(),this.KOt=null),this.gf.U4t(),t.pD(),this.$Ot.t3t&&(t.Nb(this.$Ot.t3t),this.$Ot.t3t=null),this.$Ot.s3t&&(t.Nb(this.$Ot.s3t),this.$Ot.s3t=null),this.$Ot.i3t&&(t.Nb(this.$Ot.i3t),this.$Ot.i3t=null),t.dD(0,0,0,0),t.pS(),this.n3t="done",this.OOt=t.gS(),3===s&&this.k4t()}j4t(){if(-1!==this.qOt){const t=this.US(),s=(t.pD(),this.qOt=-1,this.gf.NO().f8()),i=this.gf.B4t();if(3!==i&&(this.d4t(t),t.dD(0,0,0,0),t.jA(),t.WM(),t.zA(null)),0===i)this.W4t(s);else if(1===i)this.Q4t(s,120,0);else if(2===i)this.J4t(s);else if(3===i)b.Bn();else{if(4!==i)throw new Error("invalid loader style");this.V4t(s)}t.pS(),this.qOt=requestAnimationFrame(()=>this.j4t())}}J4t(t){t?this.KOt.ZG(1,0,0):this.KOt.ZG(.6,.6,.6),this.KOt.Sf(Math.round(100*this.ZOt)+"%");const s=this.lOt/2,i=this.cOt/2,e=(Ra.ml(s-150,i-100,150+s,100+i),this.US());e.zA(this.KOt.Fb()),e.jw(Ra,this.KOt.k_())}Q4t(t,s,i){const e=this.US(),h=(e.qM(),t?e.kA(1,0,0,1):e.kA(.118,.565,1,1),this.lOt/2),r=this.cOt/2,n=s/2;x.bu(h-n,r-4+i,Math.floor(s*this.ZOt),8),e.Rect(x),x.bu(h-n,r-4+i,s,8),x.offset(-.5,-.5),x.Wu(.5,.5),e.kA(0,0,0,1),e.Qw(x),x.Wu(1,1),e.kA(1,1,1,1),e.Qw(x)}W4t(t){const s=this.US(),i=this.gf.N4t();if(i){const e=i.Fb();if(e){const h=e.Mm(),r=e.Em(),n=this.lOt/2,o=this.cOt/2,a=h/2,u=r/2;Ra.ml(n-a,o-u,n+a,o+u),s.zA(e),s.nl(Ra),this.Q4t(t,h,16+u)}else this.Q4t(t,120,0)}else this.Q4t(t,120,0)}V4t(t){let s=this.US(),i=this.$Ot.t3t,e=this.$Ot.s3t,h=this.$Ot.i3t,r=Date.now(),n=(0===this.e3t&&(this.HOt=r),this.gf.Y4t()||this.gf.H4t()&&!this.gf.q4t()),o=n?0:200,a=n?0:3e3,u=1,l=("fade-in"===this.n3t?u=Math.min((r-this.HOt)/300,1):"fade-out"===this.n3t&&(u=Math.max(1-(r-this.r3t)/300,0)),s.qM(),s.kA(.231*u,.251*u,.271*u,u),x.set(0,0,this.lOt,this.cOt),s.Rect(x),Math.ceil(this.lOt)),c=Math.ceil(this.cOt),f,d;256<this.cOt?(s.kA(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),x.bu(0,.8*c-d/2,f,d),s.Rect(x),t?s.kA(u,0,0,u):s.kA(.161*u,.953*u,.816*u,u),f=l*this.ZOt,x.bu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(x),s.kA(u,u,u,u),s.WM(),e&&(f=1.5*b.Tr(.22*c,105,.6*l),d=f/8,x.bu(.5*l-f/2,.2*c-d/2,f,d),s.zA(e),s.Rect(x)),i&&(f=Math.min(.395*c,.95*l),d=f,x.bu(.5*l-f/2,.485*c-d/2,f,d),s.zA(i),s.Rect(x)),h&&(f=1.5*b.Tr(.22*c,105,.6*l),d=f/8,x.bu(.5*l-f/2,.868*c-d/2,f,d),s.zA(h),s.Rect(x))):(s.kA(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),x.bu(0,.85*c-d/2,f,d),s.Rect(x),t?s.kA(u,0,0,u):s.kA(.161*u,.953*u,.816*u,u),f=l*this.ZOt,x.bu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(x),s.kA(u,u,u,u),s.WM(),i&&(f=.55*c,d=f,x.bu(.5*l-f/2,.45*c-d/2,f,d),s.zA(i),s.Rect(x))),this.e3t++,"fade-in"===this.n3t&&300<=r-this.HOt&&2<=this.e3t&&(this.n3t="wait",this.h3t=r),"wait"===this.n3t&&r-this.h3t>=a&&1<=this.ZOt&&(this.n3t="fade-out",this.r3t=r),("fade-out"===this.n3t&&r-this.r3t>=300+o||n&&1<=this.ZOt&&r-this.HOt<500)&&this.o3t()}}}{let U=self.ks,W=self.C3Debugger,h=self.MU,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;U.Z4t=class extends U.lr{constructor(t){t=Object.assign({},i,t),super(),this.X4t=t.messagePort,this.K4t=t.runtimeBaseUrl,this.$4t=t.previewUrl,this.tRt=!!t.headless,this.sRt=!!t.hasDom,this.iRt=!!t.isInWorker,n=t.ife,this.eRt=!!t.useAudio,this.hRt=t.exportType,this.rRt=t.isNWjs,this.mQ=!!t.isiOSCordova,this.nRt=!!t.isiOSWebView,this.oRt=!!t.isWindowsWebView2,this.aRt=!!t.isAnyWebView2Wrapper,this.uRt=!!t.isFBInstantAvailable,this.lRt=!("preview"!==this.hRt||!t.isDebug),this.cRt=this.lRt,this.fRt=this.lRt,this.dRt=0,this.pRt=[],this.mRt=[],this.gRt=!1,this.yRt="",this.MRt="",this.wRt="",this.SRt="",this.TRt=0,this.bRt=0,this.xRt=0,this.hL=self.devicePixelRatio,this.vRt=0,this.CRt=0,this.IRt=0,this.GRt=0,this._Rt=0,this.ERt=!1,this.Qg=!0,this.ARt=!1,this.DRt=!1,this.NRt=!1,this.LRt=null,this._8=U.pr(U.cQ,this,t),this.E7=U.pr(U.Hq,this),this.Hft=U.pr(U.J0t,this),this.ORt=U.pr(U.rP,this,t.wrapperComponentIds),this.RRt=U.pr(U.VNt,this),this.G$=U.pr(U.mZ,this),this.PRt=U.pr(U.Lut,this),this.kRt=U.pr(U.Rut,this),this.qut=U.pr(U.Wut,this),this.jg=U.pr(U.Gg,{Ag:t=>this.FRt(t),Ng:t=>this.jRt(t)}),this.BRt=new Map,this.zRt=[],this.URt=new Map,this.WRt=new Map,this.QRt=0,this.JRt=[],this.VRt=new Set,this.YRt=[],this.HRt=[],this.qRt=new Map,this.ZRt=!1,this.XRt=!1,this.KRt=0,this.$Rt=0,this.tPt=new Map,this.sPt=new Set,this.iPt=new Set,this.ePt=[],this.hPt=[],this.rPt=null,this.nPt=!1,this.oPt="vsync",this.L2="trilinear",this.aPt=!1,this.uPt=!0,this.lPt=!1,this.cPt=!1,this.fPt=null,this.dPt={pPt:t=>{this.qOt=-1,this.mPt=-1,this.jX(t)},gPt:t=>{this.mPt=-1,this.jX(t,!1,"skip-render")},yPt:()=>{this.qOt=-1,this.CL()}},this.qOt=-1,this.mPt=-1,this.MPt=0,this.wPt=0,this.SPt=!1,this.TPt=!1,this.bPt=!1,this.xPt=!0,this.vPt=!0,this.CPt=!1,this.IPt=0,this.GPt=new U.T1(1),this._Pt=()=>Math.random(),this.EPt=0,this.APt=0,this.DPt=0,this.NPt=0,this.LPt=0,this.R_t=1,this.OPt=1/30,this.RPt=0,this.PPt=U.pr(U.A0),this.kPt=U.pr(U.A0),this.FPt=U.pr(U.A0),this.jPt=new Map,this.BPt=-1,this.zPt=0,this.UPt=0,this.WPt=-1,this.QPt=0,this.JPt=0,this.VPt=0,this.YPt=!1,this.HPt="",this.qPt=!1,this.ZPt="",this.Uj=null,this.XPt="",this.KPt=null,this.$Pt=null,this.jIt=U.pr(U.Event.qf),this.tkt=new Map,this.skt=new Map,this.ikt=0,this.ekt=!1,this.hkt=!1,this.rkt=!1,this.nkt=[],this.okt={pretick:U.pr(U.Event,"pretick",!1),tick:U.pr(U.Event,"tick",!1),tick2:U.pr(U.Event,"tick2",!1),instancecreate:U.pr(U.Event,"instancecreate",!1),instancedestroy:U.pr(U.Event,"instancedestroy",!1),beforelayoutchange:U.pr(U.Event,"beforelayoutchange",!1),layoutchange:U.pr(U.Event,"layoutchange",!1)},this.okt.instancecreate.PB=null,this.okt.instancedestroy.PB=null,this.o9=U.pr(U.Event.qf),this.akt=null;const s=(t,s)=>U.L_t.gNt(this,t,s);this.ukt=U.pr(U.j0,s),this.lkt=U.pr(U.j0,s),this.ckt=U.pr(U.j0,s),this.fkt=U.pr(U.dkt,this,t.jobScheduler),t.canvas&&(this.rPt=U.pr(U.KLt,this)),this.X4t.onmessage=t=>this._OnMessageFromDOM(t.data),this.Aj("runtime","visibilitychange",t=>this.pkt(t)),this.Aj("runtime","wrapper-extension-message",t=>this.mkt(t)),this.Aj("runtime","get-remote-preview-status-info",()=>this.gkt()),this.Aj("runtime","js-invoke-function",t=>this.w1t(t)),this.Aj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.Aj("runtime","offline-audio-render-completed",t=>this.ykt(t)),this.jIt.addEventListener("window-blur",t=>this.Mkt(t)),this.jIt.addEventListener("window-focus",()=>this.wkt()),this.G$.HZ(),this.kRt.HZ(),this.Skt=null,this.Tkt=new WeakMap,this.bkt={keyboard:null,S4:null,T4:null,b4:null},this.xkt=new WeakMap,this.vkt=[]}static ux(t){return U.pr(U.Z4t,t)}mr(){U.Qn(this.zRt),this.URt.clear(),this.WRt.clear(),this.E7.mr(),this.E7=null,this.Hft.mr(),this.Hft=null,this.ORt.mr(),this.ORt=null,this._8.mr(),this._8=null,this.RRt.mr(),this.RRt=null,this.G$.mr(),this.G$=null,this.PRt.mr(),this.PRt=null,this.kRt.mr(),this.kRt=null,this.qut.mr(),this.qut=null,this.jg.mr(),this.jg=null,this.rPt&&(this.rPt.mr(),this.rPt=null),this.jIt.mr(),this.jIt=null,this.Ckt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Ikt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Gkt(t)}}Ikt(t){if(this.rkt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new U.Event(i);u.data=e,this.jIt.r0(u)}if(n){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.Jq(l)}}const a=this.tkt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this._kt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this._kt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this._kt(o,!1,""+t)}):this._kt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.nkt.push(t)}_kt(t,s,i){this.X4t.postMessage({type:"result",responseId:t,isOk:s,result:i})}Gkt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.skt.get(s);i?h.resolve(e):h.reject(e),this.skt.delete(s)}Aj(t,s,i){let e=this.tkt.get(t);if(e||(e=new Map,this.tkt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}wf(t,s,i,e){this.X4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}z4(t,s,i,e){const h=this.ikt++,r=new Promise((t,s)=>{this.skt.set(h,{resolve:t,reject:s})});return this.X4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}AU(t,s,i,e=-1){this.wf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}DU(t,s,i){const e=this.ikt++,h=new Promise((t,s)=>{this.skt.set(e,{resolve:t,reject:s})});return this.AU(t,s,i,e),h}mkt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.skt.get(s);i.resolve(t.params),this.skt.delete(s)}else this.Ikt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Vj(t,s,i){this.Aj("wrapper-extension:"+t,s,i)}Qj(t){return this.ORt.Qj(t)}Ekt(t){if(!this.Rj())throw new Error("not in debug mode");this.wf("runtime","post-to-debugger",t)}async F_t(t){U.aTt(this),this.Rj()?await W.F_t(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this._8.Eo("data.json");if(await this.Akt(s),await this.Dkt(t),this.Y4t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.l4t()){const i=this.l4t();console.info(`[C3 runtime] Hosted in ${this.JO()?"worker":"DOM"}, rendering with WebGL ${i.U2()} [${i.JD()}]`)}else this.c4t()&&console.info(`[C3 runtime] Hosted in ${this.JO()?"worker":"DOM"}, rendering with WebGPU [${this.c4t().GetAdapterInfoString()}]`);this.US().TS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.rkt=!0;for(const e of this.nkt)this.Ikt(e);U.Qn(this.nkt),this.rPt&&this.rPt.F4t();for(const h of t.runOnStartupFunctions)this.pRt.push(this.Nkt(h));if(await Promise.all([this._8.l8(),...this.pRt]),U.Qn(this.pRt),!this._8.f8())return this.rPt&&await this.rPt.z4t(),await this.jIt.e0(new U.Event("beforeruntimestart")),await this.pD(),this.X4t.postMessage({type:"runtime-ready"}),this;this.rPt&&this.rPt.k4t()}async Nkt(t){try{await t(this.Skt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Akt(t){const s=t.project,i=(this.yRt=s[0],this.MRt=s[16],this.wRt=s[31],this.SRt=s[38],this.TRt=s[36],s[39]||"loading-logo.png"),e=(this.aPt=!!s[9],this.bRt=this.IRt=s[10],this.xRt=this.GRt=s[11],this.RRt.RLt(this.bRt,this.xRt),this.vRt=this.bRt/2,this.CRt=this.xRt/2,this.oPt=s[37],this.nPt=!!s[40],this.L2=s[14],this.ARt=s[15],this.DRt=s[42],this.NRt=s[17],this.ERt=!!s[18],this._Rt=s[19],this.$Rt=s[21],this.lPt=s[22],this._8);if(e.zQ(s[45]),e.w8(s[7],s[25]),e.WQ(s[8]),e.QQ(s[32]),e.VQ(s[28]),e.m8(s[29]),0===this._Rt){let t;(t="flat"===e.oR()?e.YQ()+i:i)&&(this.LRt=e.e8({url:t}))}this.rPt&&(this.rPt.s4t(U.KLt.n4t(s[12])),this.rPt.h4t(s[23]?"high":"low"),this.rPt.MS(0!==s[24]),this.rPt.u3t(s[34]),this.rPt.o4t(s[41]),this.rPt.l3t(s[13]),this.rPt.c3t(s[30]),this.rPt.p3t(s[46],s[47]),this.rPt.d3t(s[26]),this.rPt.m3t(s[48]),this.rPt.g3t(s[50]));const h=s[43],r=(h&&await this.Lkt(h),this.Okt(),this.ORt.CCt(),this.ePt=self.Rkt(),s[2]);for(const u of r[1])this.ORt.ICt(u);for(const l of r[0])this.ORt.vCt(l);this.ePt=self.Rkt(),this.Pkt(),this.ORt.DCt();for(const c of s[3]){const f=U.But.ux(this,this.zRt.length,c);this.zRt.push(f),this.URt.set(f.nf().toLowerCase(),f),this.WRt.set(f.nY(),f)}for(const d of s[4]){const p=this.zRt[d[0]];p.xGt(d)}for(const m of s[27]){const g=m.map(t=>this.zRt[t]);this.JRt.push(U.pr(U.b_t,this,g))}this.kkt();for(const y of this.zRt)y.CGt();for(const M of s[5])this.E7.ux(M);const n=s[1];if(n){const w=this.E7.rZ(n);w&&this.E7.eZ(w)}for(const S of s[35])this.PRt.ux(S);for(const T of s[33])this.G$.ux(T);for(const b of s[44])this.kRt.ux(b);this.kRt.Fut()||(this.kRt.mr(),this.kRt=null);for(const x of s[49])this.qut.ux(x);this.qut.Yut()||(this.qut.mr(),this.qut=null);for(const v of s[6])this.Hft.ux(v);this.Hft.b1t(),this.Fkt(),U.Qn(this.ePt),this.ik();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.wf("runtime","set-target-orientation",{targetOrientation:o})}async Lkt(t){const s=t.format;"image-sequence"===s?this.fPt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.fPt=new self.C3ExportToGIF(this,t):"webm"===s?this.fPt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.fPt=new self.C3ExportToMP4Video(this,t)),this.oPt="unlimited-frame",this.rPt.s4t("off"),this.hL=1,self.devicePixelRatio=1,await this.z4("runtime","set-exporting-to-video",{message:this.fPt.GetExportingMessageForPercent(0),duration:this.fPt.cz()})}B4t(){return this._Rt}F3t(){return null!==this.fPt}jkt(){return this.fPt.cz()}Bkt(){return this.fPt.GetFramerate()}zkt(){return this.fPt.F_t({width:this.rPt.qR(),height:this.rPt.KR()})}Ukt(){const t=this.MPt/this.Bkt();return this.fPt.AddFrame(this.rPt.$3t(),t)}Wkt(){this.fPt&&this.fPt.kit()}ykt(t){this.fPt.OnOfflineAudioRenderCompleted(t)}Qkt(){return this.fPt.pS()}H4t(){return this.uRt}qg(){return this.Qg}J4(t){this.pRt.push(t)}Z9(t){this.gRt=!!t}Jkt(t){this.gRt&&this.mRt.push(t)}eq(){return this.mRt}gGt(){return this.QRt++}GGt(){return this.QRt}CNt(t){this.VRt.add(t)}INt(t){this.VRt.delete(t)}k3t(){return this.VRt}async Dkt(t){this.rPt&&(await this.rPt.ko(t),this.rPt.D4t(this._Rt))}async pD(){this.SPt=!0,this.EPt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.ERt){for(const h of this.zRt)h.KV()||h.PGt()||!h.lP()||h.vxt();(async()=>{await this._8.l8(),await t,this.Qg=!1,this.Vkt()})()}else this.Qg=!1;this._8.c8(),this.Rj()&&W.RuntimeInit(n);for(const r of this.E7.m4())r.bq();this.F3t()&&await this.zkt();const i=this.E7.hZ(),e=(await i.O9(null,this.US()),await i.Q9(!0),this.zPt=performance.now(),s(),this.ERt||this.Vkt(),await this.z4("runtime","before-start-ticking"));e.isSuspended&&!this.F3t()?(this.IPt++,this.CPt=!0):this.jX()}Vkt(){this.Ij(U.gq.mq.pq.Ykt,null,null),this.wf("runtime","register-sw")}_yt(t){t=Math.floor(t);const s=this.ePt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}Pkt(){for(const t of self.Hkt){const s=U.first(Object.keys(t));this.hPt.push(s)}}V1t(t){t=Math.floor(t);const s=this.hPt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}qkt(){return this.sRt}Zkt(){return this.tRt}JO(){return this.iRt}R4t(){return this.K4t}Xkt(){return this.$4t}o3(){return this.Hft}b3(){return this.Hft.b3()}P1t(){return this.Hft.P1t()}m3(){return this.Hft.m3()}k1t(){return this.Hft.k1t()}nTt(){return 0===this.P1t().d0t()}j1t(){return this.Hft.j1t()}pNt(){return this.ORt}p8(){return this.ORt.p8()}_V(t){if((t=Math.floor(t))<0||t>=this.zRt.length)throw new RangeError("invalid index");return this.zRt[t]}Kkt(t){return this.URt.get(t.toLowerCase())||null}BU(t){return this.WRt.get(t)||null}irt(t){const s=U.rP.CP(t);return s?s.EP():null}XV(){return this.zRt}*$kt(){for(const t of this.zRt)t.KV()||(yield*t.instances())}qf(){return this.jIt}e3(){return this.o9}Jq(t){t.runtime=this.nP();const s=this.Rj()&&!this.Hft.$P();s&&W.StartMeasuringScriptTime(),this.o9.dispatchEvent(t),s&&W.AddScriptTime()}lq(t){return t.runtime=this.nP(),this.o9.e0(t)}YO(){return this.bRt}qO(){return this.xRt}tFt(t,s){if(this.bRt!==t||this.xRt!==s){this.bRt=t,this.xRt=s;const i=this.c4();i.dZ(),i.pZ()}}AY(){return this.IRt}DY(){return this.GRt}X3t(t,s){if(this.IRt!==t||this.GRt!==s){this.IRt=t,this.GRt=s;const i=this.c4();i.dZ(),i.pZ()}}j3t(t){this.F3t()||(this.hL=t)}$R(){return this.hL}IH(){return this.vRt}GH(){return this.CRt}zR(){return this.rPt}LH(){return this.rPt?this.rPt.LH():this.IRt}OH(){return this.rPt?this.rPt.OH():this.GRt}PF(){return this.rPt?this.rPt.PF():1}oU(){return this.rPt?this.rPt.oU():1}d7(){return this.rPt?this.rPt.d7():1}c7(){return this.rPt?this.rPt.c7():1}GF(){return this.rPt?this.rPt.GF():0}_F(){return this.rPt?this.rPt._F():0}sFt(){return this.rPt?this.rPt.JR():0}iFt(){return this.rPt?this.rPt.YR():0}rU(){return this.rPt?this.rPt.rU():"off"}QH(t){return this.rPt?this.rPt.QH(t):null}dV(t){this.rPt&&this.rPt.dV(t)}UH(){return this.ARt}N3t(){return this.DRt}L3t(){return this.NRt}V3(){return this.rPt?this.rPt.V3():NaN}Bb(){return"nearest"!==this.ZO()}H3(){return this.oPt}q3(t){this.oPt!==t&&(this.oPt=t,-1!==this.qOt||-1!==this.mPt)&&(this.eFt(),this.hFt())}ZO(){return this.L2}SGt(){return this.ERt}N4t(){return this.LRt}U4t(){this.LRt&&(this.LRt.GG(),this.LRt.mr(),this.LRt=null)}c4(){return this.E7}a4(){return this.E7.a4()}ftt(){return this.G$}rFt(){return this.PRt}pEt(){return this.kRt}ylt(){return this.qut}NO(){return this._8}e8(t){return this._8.e8(t)}qP(t,s,i,e,h,r){if(r&&this.kRt){if(t instanceof U.But&&t.KV()){const o=t.cgt(),a=Math.floor(this.o4()*o.length);return this.qP(o[a],s,i,e,h,r)}const n=this.kRt.jut(t,r);if(n){const u=this.kV(n,s,!1,i,e,!1,h,void 0,h);return this.kRt.zut(u,r),u}}return this.kV(t,s,!1,i,e,!1,h,void 0,h)}kV(t,s,i,e,h,r,n,o,a){let u=null,l=null;if(t instanceof U.But){if((l=t).KV()){const S=l.cgt(),T=Math.floor(this.o4()*S.length);l=S[T]}u=l.AV()}else u=t,l=this._V(u[1]);const c=l.OP().lP();if(this.Qg&&c&&!l.PGt())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.tPt.has(u[2])?u[2]:this.$Rt++;const p=u?u[0]:null,m=U.pr(U.Instance,{runtime:this,FF:l,s5:s,k_t:p,z_t:u?u[3]:null,uid:d,tags:u?u[6]:null});this.tPt.set(d,m);let g=null,y=(c&&(g=m.D4(),void 0!==e&&void 0!==h&&(g.ST(e),g.xT(h)),l.l_t(!0)),s&&(a||s.jV(m,!0),s.f4().P9(l)),this.KRt++,!0);if(o){const b=o.jF();if(b.XF()&&l.XF()){const x=l.N9(),v=b.N9();x===v&&(y=!1)}}if(l.XF()&&!i&&!r&&y){const C=new Set;for(const I of l.N9().wq())if(I!==l){const G=this.nFt(I,g,C);if(G){const _=this.kV(G,f,!1,g?g.wT():e,g?g.bT():h,!0,!1,void 0,a);m.Sq(_)}else{const F=this.kV(I,f,!1,g?g.wT():e,g?g.bT():h,!0,!1,void 0,a);m.Sq(F)}}for(const E of m.KF()){E.Sq(m);for(const A of m.KF())E!==A&&E.Sq(A)}}if(c&&!i&&n&&this.oFt(m,p,g,s,e,h,a),l.XF()&&!i&&!r&&n)for(const D of m.KF()){const N=D.D4();if(N){const j=D.OP(),L=D.jF().AV()[0];j.lP()?this.oFt(D,L,N,s,N.wT(),N.bT(),a):this.oFt(D,L,N,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.N5(),B=e-g.wT()+O.wT(),z=h-g.bT()+O.bT();O.e5(B,z)}l.r_t();const P=u?U.ho(u[5]):null,k=u?u[4].map(t=>U.ho(t)):null,M=c&&p&&p[13];if(M&&m.Y_t(),m.OGt(P,k),M){const R=p[13];m.CB().zxt(R[2],R[0],R[1])}this.HRt.push(m),this.ZRt=!0,this.Rj()&&W.InstanceCreated(m);const w=this.okt.instancecreate;return w.PB=m,this.jIt.dispatchEvent(w),m}cAt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.E7.nZ(s),n=r.N4(i);return n.LV(e)}nFt(t,s,i){const e=s?.dEt()??[];for(const h of e){const r=this.cAt(h),n=!!h[4],o=this._V(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}oFt(a,t,s,u,l,c,f){const i=s.NDt(),e=s.dEt();if(a.D4().LDt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const S=this.E7.nZ(t),T=S.N4(s);o=T.LV(i)}const y=this._V(o[1]),M=a.mEt(y),w=d.has(y);if(M&&!w&&h){const b=a.gEt(y),x=(b.D4().F_t(o[0]),l+o[0][0]-p),v=c+o[0][1]-m;b.D4().e5(x,v),b.D4().LDt(r),a.B5(b,{J5:!!(e>>0&1),Y5:!!(e>>1&1),q5:!!(e>>2&1),X5:!!(e>>3&1),tB:!!(e>>4&1),aB:!!(e>>5&1),iB:!!(e>>6&1),hB:!!(e>>7&1),nB:!!(e>>8&1)}),d.add(y)}else{const C=l+o[0][0]-p,I=c+o[0][1]-m,G=this.kV(o,u,!1,C,I,!1,!0,a,f);G.D4().LDt(r),a.B5(G,{J5:!!(e>>0&1),Y5:!!(e>>1&1),q5:!!(e>>2&1),X5:!!(e>>3&1),tB:!!(e>>4&1),aB:!!(e>>5&1),iB:!!(e>>6&1),hB:!!(e>>7&1),nB:!!(e>>8&1)})}}}}VF(i){if(!this.sPt.has(i)){let t=i.jF(),s=this.qRt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.qRt.set(t,s);if(this.Rj()&&W.InstanceDestroyed(i),i.q_t(),this.ZRt=!0,i.XF())for(const e of i.KF())this.VF(e);for(const h of i.children())h.uB()&&this.VF(h);if(!this.E7.sk()&&!this.YPt){const r=this.o3();r.XP(!0),i.IEt(),r.XP(!1)}i.GEt(this.E7.sk())}}ik(){this.ZRt&&(this.XRt=!0,this.aFt(),this.uFt(),this.XRt=!1,this.ZRt=!1,this.j4())}aFt(){for(const t of this.HRt){const s=t.jF();s.jV(t);for(const i of s.$1t())i.jV(t),i.r_t()}U.Qn(this.HRt)}uFt(){this.jIt.Uf(!0);for(const[t,s]of this.qRt.entries())this.lFt(t,s),s.clear();this.qRt.clear(),this.jIt.Uf(!1)}lFt(t,s){for(const i of s){const e=this.okt.instancedestroy,h=(e.PB=i,this.jIt.dispatchEvent(e),this.tPt.delete(i.$F()),this.jPt.delete(i),i.D4());h&&(h.PDt(),h.WV(),h.q_t()),this.sPt.add(i),this.KRt--}U.$n(t.QP(),s),t.r_t(),this.iPt.add(t);for(const r of t.$1t())U.$n(r.QP(),s),r.r_t(),this.iPt.add(r);if(t.OP().lP()){const n=new Set([...s].map(t=>t.D4().N4()));for(const o of n)o.iH(s)}}o_t(){return this.HRt}*c2t(t){for(const s of this.o_t())t.KV()?s.jF().oTt(t)&&(yield s):s.jF()===t&&(yield s)}LGt(){return this.$Rt++}RGt(t,s){this.tPt.set(t,s)}RU(t){this.vPt!==(t=!!t)&&(this.vPt=!!t,this.vPt)&&this.CPt&&(this.FU(!1),this.CPt=!1)}PU(){return this.vPt}W9(){this.jIt.dispatchEvent(U.pr(U.Event,"renderercontextlost")),this.FU(!0);for(const s of this.zRt)!s.KV()&&s.kGt()&&s.z9();const t=this.a4();t&&t.W9(),U.OCt.z8(),U.r8.z8()}async u4t(){await this.a4().O9(null,this.US()),this.jIt.dispatchEvent(U.pr(U.Event,"renderercontextrestored")),this.FU(!1),this.j4()}pkt(t){if(this.vPt){const s=t.hidden;this.FU(s),(this.CPt=s)||this.j4()}}Mkt(t){this.Y4t()&&this.lPt&&!U.ai.wi&&!t.data.parentHasFocus&&(this.FU(!0),this.cPt=!0)}wkt(){this.cPt&&(this.FU(!1),this.cPt=!1)}hFt(){const t=this.dPt;"vsync"===this.oPt?-1===this.qOt&&(this.qOt=self.requestAnimationFrame(t.pPt)):"unlimited-tick"===this.oPt?(-1===this.mPt&&(this.mPt=U.Mo(t.gPt)),-1===this.qOt&&(this.qOt=self.requestAnimationFrame(t.yPt))):-1===this.mPt&&(this.mPt=U.Mo(t.pPt))}eFt(){-1!==this.qOt&&(self.cancelAnimationFrame(this.qOt),this.qOt=-1),-1!==this.mPt&&(U.wo(this.mPt),this.mPt=-1)}E3(){return 0<this.IPt}FU(t){if(!this.F3t()){const s=this.E3(),i=(this.IPt+=t?1:-1,this.IPt<0&&(this.IPt=0),this.E3());if(!s&&i)console.log("[Construct] Suspending"),this.eFt(),this.jIt.dispatchEvent(U.pr(U.Event,"suspend")),this.Ij(U.gq.mq.pq.cFt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.APt=e,this.zPt=e,this.BPt=0,this.UPt=0,this.WPt=0,this.QPt=0,this.VPt=0,this.JPt=0,this.jIt.dispatchEvent(U.pr(U.Event,"resume")),this.Ij(U.gq.mq.pq.fFt,null,null),this.Cdt()||this.jX(e)}}}bU(t){this.ukt.Sc(t)}IU(t){this.lkt.Sc(t)}vU(t){this.ckt.Sc(t)}xU(t){this.ukt._0(t)}GU(t){this.lkt._0(t)}CU(t){this.ckt._0(t)}dFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Pj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.jX(),s&&W.AddIndividualBehaviorTickTime(t.NB(),performance.now()-i)),e}pFt(){const t=this.Rj();this.ukt.w1(!0);for(const s of this.ukt)this.dFt(s,t);this.ukt.w1(!1)}mFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.EU(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.dCt(),s&&W.AddIndividualBehaviorTickTime(t.NB(),performance.now()-i)),e}gFt(){const t=this.Rj();this.lkt.w1(!0);for(const s of this.lkt)this.mFt(s,t);this.lkt.w1(!1)}yFt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.Fj(),s&&W.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.avt(),s&&W.AddIndividualBehaviorTickTime(t.NB(),performance.now()-i)),e}MFt(){const t=this.Rj();this.ckt.w1(!0);for(const s of this.ckt)this.yFt(s,t);this.ckt.w1(!1)}*wFt(){const t=this.Rj();this.ukt.w1(!0);for(const s of this.ukt){const i=this.dFt(s,t);U.Yo(i)&&(yield*i)}this.ukt.w1(!1)}*SFt(){const t=this.Rj();this.lkt.w1(!0);for(const s of this.lkt){const i=this.mFt(s,t);U.Yo(i)&&(yield*i)}this.lkt.w1(!1)}*TFt(){const t=this.Rj();this.ckt.w1(!0);for(const s of this.ckt){const i=this.yFt(s,t);U.Yo(i)&&(yield*i)}this.ckt.w1(!1)}async jX(a,t,s){this.bPt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.c4(),f=this.zR();if(this.SPt&&(!this.E3()||t||u)){let t=performance.now(),s=(this.TPt=!0,this.bFt(a||0),this.WPt++,this.xFt(),this.vFt()),i=(this.h2t()&&await s,this.jIt.h0(this.okt.pretick)),e=(i instanceof Promise&&await i,this.Jq(this.akt.pretick),this.CFt()),h=(this.h2t()&&await e,this.IFt()&&await this.GFt(),c.y4()&&await this._Ft(),this.EFt()),r=(this.h2t()&&await h,c.a4()),n=r.G9(),o=!1;if(-1!==n&&(r._9(),f.I9()!==n)){const d=this.zR().H9(n);this.JO()&&(o=!0,await d)}this.wf("canvas","update-html-layer-dom-state",{layersDomState:r.rY().filter(t=>t.tF()).map(t=>t.uH())}),l&&this.CL(),o&&this.wf("canvas","cleanup-html-layers"),this.F3t()&&(await this.Ukt(),this.O3()>=this.jkt())?this.Qkt():(this.E3()||u||this.hFt(),this.MPt++,this.wPt++,this.TPt=!1,this.JPt+=performance.now()-t)}}async vFt(){const t=this.Hft,s=this.Rj();this.ik(),t.XP(!0),this.ddt(this.a4()),s&&W.StartMeasuringTime(),this.h2t()?await t.Vdt():t.zdt(),s&&W.AddEventsTime(),this.pdt(),t.XP(!1),this.ik(),t.XP(!0)}async CFt(){const t=this.Hft,s=this.Rj(),i=this.h2t(),e=this.jIt,h=this.okt,r=this.akt;s&&W.StartMeasuringTime(),i?await this.AFt(this.wFt()):this.pFt(),i?await this.AFt(this.SFt()):this.gFt(),s&&W.AddBehaviorTotalTickTime(),s&&W.StartMeasuringTime(),i?await this.DFt(h.tick):e.dispatchEvent(h.tick),s&&W.AddPluginTotalTickTime(),t.XP(!1),this.Jq(r.tick)}async EFt(){const t=this.Hft,s=this.jIt,i=this.okt,e=this.akt,h=this.Rj(),r=this.h2t();h&&W.StartMeasuringTime(),r?await t.mdt(this.E7):t.fdt(this.E7),h&&W.AddEventsTime(),this.RRt.rLt(),this.xFt(),this.xPt=!1,t.XP(!0),h&&W.StartMeasuringTime(),r?await this.AFt(this.TFt()):this.MFt(),h&&W.AddBehaviorTotalTickTime(),h&&W.StartMeasuringTime(),r?await this.DFt(i.tick2):s.dispatchEvent(i.tick2),h&&W.AddPluginTotalTickTime(),t.XP(!1),this.Jq(e.tick2),r&&await t.Idt()}xFt(){if(0!==this.sPt.size){const t=this.jIt;t.Uf(!0);for(const s of this.iPt)s.Rdt().vft(this.sPt);this.iPt.clear(),this.Hft.Hdt(this.sPt);for(const i of this.sPt)i.mr();this.sPt.clear(),t.Uf(!1)}}async _Ft(){let t=this.c4(),s=0;for(;t.y4()&&s++<10;)await this.NFt(t.fZ())}bFt(t){let s=0;if(this.F3t())s=1/this.Bkt(),this.DPt=s,this.NPt=s;else if(0!==this.APt){const i=Math.max(t-this.APt,0);.5<(s=i/1e3)&&(s=0),this.DPt=s,this.NPt=U.Tr(s,this.RPt,this.OPt)}this.APt=t,this.LPt=this.NPt*this.R_t,this.PPt.Sc(this.LPt),this.kPt.Sc(s*this.R_t),this.FPt.Sc(this.NPt);for(const[e,h]of this.jPt)h.Sc(this.NPt*e.F3());this.rPt&&this.rPt.T4t(),1e3<=t-this.zPt&&(this.zPt+=1e3,1e3<=t-this.zPt&&(this.zPt=t),this.UPt=this.BPt,this.BPt=0,this.QPt=this.WPt,this.WPt=0,this.VPt=Math.min(this.JPt/1e3,1),this.JPt=0,this.rPt&&this.rPt.S4t(),this.RRt.sLt(),this.Rj())&&W.Update1sPerfStats()}J_t(t,s){if(s){if(!this.jPt.has(t)){const i=U.pr(U.A0);i.R0(this.PPt),this.jPt.set(t,i)}}else this.jPt.delete(t)}V_t(t){const s=this.jPt.get(t);return s?s.si():this.O3()}async NFt(t){const s=this.jIt,i=this.c4(),e=i.a4();await e.vq(),e.U9(t,this.US()),e===t&&this.Hft.Gq(),this.RRt.rLt(),this.xFt(),s.dispatchEvent(this.okt.beforelayoutchange),U.Qf.o0(!0),await t.O9(e,this.US()),U.Qf.o0(!1),await t.Q9(!1),s.dispatchEvent(this.okt.layoutchange),this.j4(),this.xPt=!0,this.ik(),this.Wkt()}j4(){this.uPt=!0}l4t(){return this.rPt?this.rPt.l4t():null}c4t(){return this.rPt?this.rPt.c4t():null}US(){return this.rPt?this.rPt.US():null}CL(){const i=this.rPt;if(i&&!i.a4t()){const e=this.US(),t=e.PD(),h=t&&e.bS(),r=t&&e.RM();if(h&&e.bD(),this.uPt||this.F3t()){const n=this.E7.a4(),o=(this.BPt++,e.pD(),this.Rj());o&&W.StartMeasuringTime(),this.uPt=!1;let t=null,s=(h&&(t=i.v4t().lE(),e.RD(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.S9())),e.StartMeasuringRenderPassTime(0,1)),this.BY()&&"low"===i.WH()?e.GA(i.LH(),i.OH()):e._A(),this.LFt(this.US(),n),t&&e.kD(t),r&&(e.StopMeasuringRenderPassTime(),this.rPt.C4t(s)),e.pS(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.G4t()}else e.yS()}}kq(t){return"low"===this.zR().WH()||t.bS()&&(this.UH()||this.BY())}LFt(s,i){s.WM(),s.JA(),s.kA(1,1,1,1),s.ID(null),s.zA(null),s.gD(this.BY()),this.kq(s)&&i.Rq(s);const e=i.I9();for(let t=1;t<e;++t)i.zq(s,t),s.RM()&&s.Restart();this.kq(s)||i.Rq(s),i.Bq(s)}Ij(t,s,i){if(!this.SPt)return!1;let e=!this.TPt&&!this.Hft.Adt(),h=0;e&&(h=performance.now());const r=this.Rj(),n=(r&&this.KU(!1),this.Hft.wdt(this.E7,t,s,i));if(e){const o=performance.now()-h;this.JPt+=o,r&&W.AddTriggersTime(o)}return r&&this.KU(!0),n}Zxt(t,s,i){if(!this.h2t())return this.Ij(t,s,i);if(this.Cdt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.TPt||this.Hft.Adt())return this.Hft.bdt(this.E7,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async _j(t,s,i){if(!this.h2t())return this.Ij(t,s,i);if(!this.SPt)return!1;if(this.Cdt())return this.Hft.xdt(t,s,i);if(!this.a4())return this.Hft.Sdt(t,s,i);let e=performance.now(),h=this.Hft.bdt(this.E7,t,s,i),r=h.next();for(;!r.done;)await this.ydt(r.value),r=h.next();return this.E3()||this.Hft.Adt()||(await this.Hft.Idt(),this.bPt&&!this.TPt&&this.hFt()),this.JPt+=performance.now()-e,r.value}Xxt(t,s,i){const e=this.Rj(),h=(e&&this.KU(!1),this.Hft.Gdt(this.E7,t,s,i));return e&&this.KU(!0),h}Kxt(t,s,i){return this.Hft._dt(this.E7,t,s,i)}$xt(t){return this.GPt.Sc(t)}ddt(t){this.YRt.push(t)}pdt(){if(!this.YRt.length)throw new Error("layout stack empty");this.YRt.pop()}E4(){return this.YRt.length?this.YRt.at(-1):this.a4()}D3(t){return t&&-1!==t.F3()?this.NPt*t.F3():this.LPt}kX(){return this.LPt}FX(){return this.NPt}L3(){return this.DPt}F3(){return this.R_t}j3(t){(isNaN(t)||t<0)&&(t=0),this.R_t=t}K3(t){this.RPt=Math.max(t,0)}X3(){return this.RPt}i4(t){this.OPt=Math.max(t,0)}s4(){return this.OPt}B3(){return this.UPt}U3(){return this.QPt}Q3(){return this.VPt}OFt(){return this.EPt}O3(){return this.PPt.si()}RFt(){return this.kPt.si()}P3(){return this.FPt.si()}Ott(){return this.MPt}PFt(){return this.wPt}kFt(){return this.KRt}jO(){return this.yRt}zO(){return this.MRt}FFt(){return this.wRt}jFt(){return this.SRt}WO(){return this.TRt}I4(t){if(this.YPt)throw new Error("cannot call while loading state - wait until afterload event");return this.tPt.get(t)||null}Mq(){this.tPt.clear();for(const t of this.zRt)if(!t.KV())for(const s of t.QP())this.tPt.set(s.$F(),s)}Y4t(){return"preview"===this.hRt}Rj(){return this.lRt}kR(){return this.hRt}FR(){return"nwjs"===this.kR()||this.rRt}q4t(){return"cordova"===this.hRt}BFt(){return"Android"===U.ai.li&&("cordova"===this.hRt||"playable-ad-single-file"===this.hRt||"playable-ad-zip"===this.hRt||"instant-games"===this.hRt)}zFt(){return this.mQ}UFt(){return this.nRt}jR(){return this.oRt}WFt(){return this.aRt}RO(){return this.RRt}NCt(){return this.ORt.NCt()}LCt(){return this.ORt.LCt()}BY(){return this.nPt}QFt(){return this.US().vM(this.DY())}TM(t){return this.US().TM(t||this.DY())}JFt(){return this.xPt}VFt(t){this.aPt!==(t=!!t)&&(this.aPt=t,this.c4().pZ(),this.j4())}KO(){return this.aPt}YFt(t){if(!this.BRt.has(t)){const i=()=>this.HFt(t);this.BRt.set(t,i),t.qf().addEventListener("animationframeimagechange",i)}const s=this.jg.Lg(t);return s.Hg()||s.Zg().then(()=>this.j4()),s}HFt(t){this.jg.kg(t)}FRt(t){const s=[];for(const i of t.qGt())for(const e of i.hz()){const h=e.lz();s.push({source:e,width:h.Mm(),height:h.Em(),tag:e.Az()})}return{Vg:s}}async jRt(t){const s=U.pr(U.T1),i=[],h=new Map;for(const n of t.qGt())for(const o of n.hz()){const a=o.lz().tIt();h.has(a)||(h.set(a,null),i.push(s.Sc(async()=>{const t=await a.J8();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.qGt())for(const l of u.hz())e.push(s.Sc(async()=>{const t=l.lz(),s=h.get(t.tIt()),i=await t.sIt(s),e=await createImageBitmap(i);return{Kg:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Vg:r}}qFt(t){this.HPt=t,this.qPt=!1}ZFt(){this.HPt="",this.qPt=!0}XFt(t){this.ZPt=t}$2t(t){this.Uj=t}KFt(){return this.XPt}IFt(){return!!(this.HPt||this.qPt||this.ZPt||null!==this.Uj)}async GFt(){if(this.HPt&&(this.ik(),await this.$Ft(this.HPt),this.tjt()),this.ZPt&&(await this.sjt(this.ZPt),this.tjt(),this.Rj())&&W.StepIfPausedInDebugger(),this.qPt){const t=await this.ijt();this.XPt=t,await this._j(U.gq.mq.pq.ejt,null),this.XPt="",this.tjt()}if(null!==this.Uj){this.ik();try{await this.hjt(this.Uj),this.XPt=this.Uj,await this._j(U.gq.mq.pq.rjt,null),this.XPt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this._j(U.gq.mq.pq.njt,null)}this.tjt()}}tjt(){this.HPt="",this.qPt=!1,this.ZPt="",this.Uj=null}sP(){return this.KPt||(this.KPt=localforage.Pi({name:"c3-localstorage-"+this.FFt(),description:this.jO()})),this.KPt}ojt(){return this.$Pt||(this.$Pt=localforage.Pi({name:"c3-savegames-"+this.FFt(),description:this.jO()})),this.$Pt}async $Ft(t){const s=await this.ijt();try{await this.ojt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.XPt=s,await this._j(U.gq.mq.pq.ejt,null),this.XPt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this._j(U.gq.mq.pq.ajt,null)}}async sjt(t){try{const s=await this.ojt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.hjt(s),this.XPt=s,await this._j(U.gq.mq.pq.rjt,null),this.XPt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this._j(U.gq.mq.pq.njt,null)}}async ijt(){const t={c3save:!0,version:1,rt:{time:this.O3(),timeRaw:this.RFt(),walltime:this.P3(),timescale:this.F3(),tickcount:this.Ott(),next_uid:this.$Rt,running_layout:this.a4().nY(),start_time_offset:Date.now()-this.EPt},types:{},layouts:{},events:this.Hft.x7(),timelines:this.G$.x7(),user_script_data:null};for(const i of this.zRt)i.KV()||i.y_t()||(t.types[i.nY().toString()]=i.x7());for(const e of this.E7.m4())t.layouts[e.nY().toString()]=e.x7();const s=this.ujt("save");return s.saveData=null,await this.lq(s),t.user_script_data=s.saveData,JSON.stringify(t)}hq(){return this.YPt}async hjt(t){const s=this.c4(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.tbt(),this.jIt.dispatchEvent(U.pr(U.Event,"beforeload"));for(const a of this.$kt()){const u=a.jF();u.y_t()||a.BZ()}let e=i.rt,h=(this.PPt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.kPt.Set(e.timeRaw),this.FPt.Set(e.walltime),this.R_t=e.timescale,this.MPt=e.tickcount,this.EPt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.YPt=!0);if(h!==this.a4().nY()){const l=s.nZ(h);if(!l)return;await this.NFt(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.nZ(d);p&&p.v7(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.BU(y);!M||M.KV()||M.y_t()||M.v7(g,n)}for(const w of this.E7.m4())for(const S of w.bk())S.C7();if(this.ik(),this.Mq(),this.YPt=!1,r){for(const T of this.$kt())T.rq();for(const[b,x]of Object.entries(i.types)){const v=parseInt(b,10),C=this.BU(v);!C||C.KV()||C.y_t()||C.S_t(x)}}this.$Rt=e.next_uid,this.Hft.v7(i.events);for(const I of this.zRt)if(!I.KV()&&I.XF())for(const G of I.QP()){const _=G.sj();for(const E of I.N9().wq())if(E!==I){const A=E.QP();if(_<0||_>=A.length)throw new Error("missing sibling instance");G.Sq(A[_])}}this.G$.v7(i.timelines),s.dZ(),s.pZ();for(const D of n)D.CEt();this.sbt(),this.jIt.dispatchEvent(U.pr(U.Event,"afterload")),this.Jq(this.ujt("afterload"));for(const[N,L]of Object.entries(i.types)){const O=parseInt(N,10),R=this.BU(O);R&&R.w_t()}const o=this.ujt("load");o.saveData=i.user_script_data,await this.lq(o),this.j4()}ljt(t,s){return t.D4().GDt()-s.D4().GDt()}dNt(t,s){t.D4()&&!this.xkt.has(t)&&(this.xkt.set(t,s),this.vkt.push(t))}tbt(){this.xkt=new WeakMap,U.Qn(this.vkt)}sbt(t="full",s=null){this.vkt.sort(this.ljt);for(const i of this.vkt)i.UZ(this.xkt.get(i),t,s);for(const e of this.vkt)e.AEt(this.xkt.get(e),t,s);this.tbt()}async cjt(t){const s=await Promise.all(t.map(async t=>{const s=this.q4t()&&this._8.HQ();if(s||"playable-ad-single-file"===this.kR()){const i=await this._8.Ao(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.fkt.fjt(s)}djt(t,s){this.fkt.pjt(t,s)}mjt(t,s){this.fkt.gjt(t,s)}yjt(t,s,i,e){return this.fkt.yjt(t,s,i,null,null,e)}Mjt(t,s,i,e){return this.fkt.Mjt(t,s,i,e)}wjt(){return this.fkt.Sjt()}v4(t,s){this.wf("runtime","invoke-download",{url:t,filename:s})}async P4t(t,s,i,e,h,r){if(e=e||s,h=h||i,this.JO()){const n=await this.z4("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async Tjt(t){return this.JO()?this.z4("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}bjt(){this.ekt||(this.ekt=!0,this.wf("runtime","enable-device-orientation"))}xjt(){this.hkt||(this.hkt=!0,this.wf("runtime","enable-device-motion"))}o4(){return this._Pt()}vjt(t){this._Pt=t}gkt(){const t=this.US();return{fps:this.B3(),tps:this.U3(),cpu:this.Q3(),gpu:this.V3(),layout:this.a4()?this.a4().nf():"",renderer:t.bS()?t.JD():t.GetAdapterInfoString()}}Cdt(){return!!this.Rj()&&W.Cdt()}ydt(t){return this.h2t()?W.ydt(t):Promise.resolve()}$gt(){return!!this.h2t()&&W.BreakNext()}Cjt(t){this.cRt=!!t,this.Ijt()}Gjt(){return this.cRt}h2t(){return this.fRt}KU(t){t?this.dRt--:this.dRt++,this.Ijt()}Ijt(){this.fRt=this.Rj()&&this.cRt&&0===this.dRt}ymt(){return this.Rj()&&W.ymt()}FH(){return this.Rj()&&this.US().PD()&&W.FH()}async AFt(t){if(t)for(const s of t)await this.ydt(s)}DFt(t){return this.AFt(this.jIt.n0(t))}w1t(t){return this.Hft.w1t(t.name,t.params)}W4(t){if(this.JO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}nP(){return this.Skt}ujt(t){const s=U.pr(U.Event,t,!1);return s.runtime=this.Skt,s}Okt(){this.Skt=new self.EO(this),this.akt={pretick:this.ujt("pretick"),tick:this.ujt("tick"),tick2:this.ujt("tick2")}}kkt(){const t={};for(const s of this.zRt)t[s.V1t()]={value:s._P(),enumerable:!0,writable:!1};this.Skt.h3(t)}Fkt(){const t={};for(const s of this.o3().tdt())t[s.V1t()]=s.Y1t();this.Skt.r3(t)}w4(){return this.bkt}xP(t,s){this.Tkt.set(t,s)}Ck(t){return this.Tkt.get(t)}ER(t){if(!(t instanceof self.NP))throw new TypeError("expected IObjectClass");const s=this.Ck(t);if(s&&s instanceof U.But)return s;throw new Error("invalid IObjectClass")}zP(t){if(!(t instanceof self.kF))throw new TypeError("expected IInstance");const s=this.Ck(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}A4(t){if(!(t instanceof self.SB))throw new TypeError("expected IWorldInstance");const s=this.Ck(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.Z4t.ux,self.C3_InitRuntime=(t,s)=>t.F_t(s)}{const Pa=self.ks;Pa.dkt=class extends Pa.lr{constructor(t,s){super(),this.gf=t,this._jt=new Map,this.Ejt=0,this.Ajt=s.inputPort,s.outputPort.onmessage=t=>this.Djt(t),this.Njt=s.maxNumWorkers,this.Ljt=1,this.Ojt=!1,this.Rjt=!1}Sjt(){return this.Njt}fjt(t){this.Ajt.postMessage({type:"_import_scripts",scripts:t})}pjt(t,s){this.Ajt.postMessage({type:"_send_blob",blob:t,id:s})}gjt(t,s){this.Ajt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}yjt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.Ejt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this._jt.set(n,{resolve:t,progress:e,reject:s,Pjt:!1,maxWorkerNum:r})});return h&&h.I0(()=>this.kjt(n)),this.Ajt.postMessage(o,i),this.Fjt(),a}Mjt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.Ejt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.Ajt.postMessage(r,i)}kjt(t){const s=this._jt.get(t);s&&(s.Pjt=!0,s.resolve=null,s.progress=null,s.reject=null,this.Ajt.postMessage({type:"_cancel",jobId:t}))}Djt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.jjt(e,s.result);break;case"progress":this.Bjt(e,s.progress);break;case"error":this.zjt(e,s.error);break;case"ready":this.Ujt();break;default:throw new Error(`unknown message from worker '${i}'`)}}jjt(t,s){const i=this._jt.get(t);if(!i)throw new Error("invalid job ID");i.Pjt||i.resolve(s),this._jt.delete(t)}Bjt(t,s){const i=this._jt.get(t);if(!i)throw new Error("invalid job ID");!i.Pjt&&i.progress&&i.progress(s)}zjt(t,s){const i=this._jt.get(t);if(!i)throw new Error("invalid job ID");i.Pjt||i.reject(s),this._jt.delete(t)}Ujt(){this.Ojt&&(this.Ojt=!1,this.Ljt++,this.Ljt<this.Njt?this.Fjt():this.Ajt.postMessage({type:"_no_more_workers"}))}Wjt(){let t=0,s=[...this._jt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async Fjt(){if(!(this.Ljt>=this.Njt||this.Ojt||this.Rjt||this.Wjt()<=this.Ljt))try{this.Ojt=!0;const t=await this.gf.z4("runtime","create-job-worker");t.outputPort.onmessage=t=>this.Djt(t)}catch(t){this.Rjt=!0,this.Ojt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.Ljt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},S=(w,self.ks),i=null,e="",h="",r=[],n="",o="",a="",T=S.pr(S.Q0t);S.gq.mq=class extends S.txt{constructor(t){super(t),this.j0t=this.gf.o3().ZU(),this.Cft=this.gf.o3().b3(),this.Qjt=0,this.Jjt=0,this.Vjt=new Map}mr(){super.mr()}j4(){this.gf.j4()}Ij(t){this.gf.Ij(t,null,null)}Yjt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}Hjt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.Yjt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async qjt(t,s){if(s.length){this.Qjt+=s.length;const i=[];for(const e of s)i.push(t.P9(e));await S.do(i,()=>{this.Jjt++}),this.Jjt++,this.Jjt===this.Qjt&&(this.Jjt=0,this.Qjt=0,this.gf.Ij(S.gq.mq.pq.Zjt,null,null))}}d8(){return 0===this.Qjt?1:this.Jjt/this.Qjt}Xjt(t,s){for(const i of s)0===i.YP()&&t.B9(i)}Kjt(){return T}$jt(s){const i=this.gf.o3(),t=i.b3(),e=t.HU(),h=e.m3(),r=h.YU(),n=e.C0t(),o=t.qU(h),a=i.ZU(),u=a.qU();if(u.U0t(s),n)for(let t=0;t<s&&!u.rW();++t)i.tW(r),u.eW(t),h.sW(e,o),i.iW(r);else for(let t=0;t<s&&!u.rW();++t)u.eW(t),h.sW(e,o);return t.nW(),a.nW(),!1}*t5t(s){const i=this.gf.o3(),t=i.b3(),e=t.HU(),h=e.m3(),r=h.YU(),n=e.C0t(),o=t.qU(h),a=i.ZU(),u=a.qU();if(u.U0t(s),n)for(let t=0;t<s&&!u.rW();++t)i.tW(r),u.eW(t),yield*h.lyt(e,o),i.iW(r);else for(let t=0;t<s&&!u.rW();++t)u.eW(t),yield*h.lyt(e,o);return t.nW(),a.nW(),!1}s5t(){const s=this.gf.o3(),t=s.b3(),i=t.HU(),e=i.m3(),h=e.YU(),r=i.C0t(),n=t.qU(e),o=s.ZU(),a=o.qU();if(r)for(let t=0;!a.rW();++t)s.tW(h),a.eW(t),e.sW(i,n)||a.Lz(),s.iW(h);else for(let t=0;!a.rW();++t)a.eW(t),e.sW(i,n)||a.Lz();return t.nW(),o.nW(),!1}*i5t(){const s=this.gf.o3(),t=s.b3(),i=t.HU(),e=i.m3(),h=e.YU(),r=i.C0t(),n=t.qU(e),o=s.ZU(),a=o.qU();if(r)for(let t=0;!a.rW();++t){s.tW(h),a.eW(t);const u=yield*e.lyt(i,n);u||a.Lz(),s.iW(h)}else for(let t=0;!a.rW();++t){a.eW(t);const l=yield*e.lyt(i,n);l||a.Lz()}return t.nW(),o.nW(),!1}e5t(t,s,i){const e=this.gf.o3(),h=e.b3(),r=h.HU(),n=r.m3(),o=n.YU(),a=r.C0t(),u=h.qU(n),l=e.ZU(),c=l.qU();if(c.XU(t),c.U0t(i),i<s)if(a)for(let t=s;t>=i&&!c.rW();--t)e.tW(o),c.eW(t),n.sW(r,u),e.iW(o);else for(let t=s;t>=i&&!c.rW();--t)c.eW(t),n.sW(r,u);else if(a)for(let t=s;t<=i&&!c.rW();++t)e.tW(o),c.eW(t),n.sW(r,u),e.iW(o);else for(let t=s;t<=i&&!c.rW();++t)c.eW(t),n.sW(r,u);return h.nW(),l.nW(),!1}*h5t(t,s,i){const e=this.gf.o3(),h=e.b3(),r=h.HU(),n=r.m3(),o=n.YU(),a=r.C0t(),u=h.qU(n),l=e.ZU(),c=l.qU();if(c.XU(t),c.U0t(i),i<s)if(a)for(let t=s;t>=i&&!c.rW();--t)e.tW(o),c.eW(t),yield*n.lyt(r,u),e.iW(o);else for(let t=s;t>=i&&!c.rW();--t)c.eW(t),yield*n.lyt(r,u);else if(a)for(let t=s;t<=i&&!c.rW();++t)e.tW(o),c.eW(t),yield*n.lyt(r,u),e.iW(o);else for(let t=s;t<=i&&!c.rW();++t)c.eW(t),yield*n.lyt(r,u);return h.nW(),l.nW(),!1}r5t(i){const t=i.JP(),s=t.QP();if(0!==s.length){const e=this.gf.o3(),h=e.b3(),r=h.HU(),n=r.m3(),o=n.YU(),a=r.C0t(),u=h.qU(n),l=e.ZU(),c=l.qU(),f=i.XF(),d=T.qU();if(S.Hn(d,s),c.U0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.rW();++t){e.tW(o);const p=d[t];i.JP().jft(p),f&&p.xmt(),c.eW(t),n.sW(r,u),e.iW(o)}else{t.Pft(!1);const m=t.kft();S.Qn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.rW();++t){const g=d[t];m[0]=g,f&&g.xmt(),c.eW(t),n.sW(r,u)}}h.nW(),l.nW(),S.Qn(d),T.nW()}return!1}*n5t(i){const t=i.JP(),s=t.QP();if(0!==s.length){const e=this.gf.o3(),h=e.b3(),r=h.HU(),n=r.m3(),o=n.YU(),a=r.C0t(),u=h.qU(n),l=e.ZU(),c=l.qU(),f=i.XF(),d=T.qU();if(S.Hn(d,s),c.U0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.rW();++t){e.tW(o);const p=d[t];i.JP().jft(p),f&&p.xmt(),c.eW(t),yield*n.lyt(r,u),e.iW(o)}else{t.Pft(!1);const m=t.kft();S.Qn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.rW();++t){const g=d[t];m[0]=g,f&&g.xmt(),c.eW(t),yield*n.lyt(r,u)}}h.nW(),l.nW(),S.Qn(d),T.nW()}return!1}o5t(i,t){const s=i.JP(),e=s.QP();if(0!==e.length){const h=this.gf.o3(),r=h.b3(),n=h.k1t(),o=r.HU(),a=o.m3(),u=a.YU(),l=o.C0t(),c=r.qU(a),f=h.ZU(),d=f.qU(),p=i.XF(),m=T.qU();S.Qn(m),d.U0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.vSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.rW();++t){h.tW(u);const g=m[t][0];i.JP().jft(g),p&&g.xmt(),d.eW(t),a.sW(o,c),h.iW(u)}else{s.Pft(!1);const y=s.kft();S.Qn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.rW();++t){const M=m[t][0];y[0]=M,p&&M.xmt(),d.eW(t),a.sW(o,c)}}r.nW(),f.nW(),S.Qn(m),T.nW()}return!1}*a5t(i,t){const s=i.JP(),e=s.QP();if(0!==e.length){const h=this.gf.o3(),r=h.b3(),n=h.k1t(),o=r.HU(),a=o.m3(),u=a.YU(),l=o.C0t(),c=r.qU(a),f=h.ZU(),d=f.qU(),p=i.XF(),m=T.qU();S.Qn(m),d.U0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.vSt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.rW();++t){h.tW(u);const g=m[t][0];i.JP().jft(g),p&&g.xmt(),d.eW(t),yield*a.lyt(o,c),h.iW(u)}else{s.Pft(!1);const y=s.kft();S.Qn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.rW();++t){const M=m[t][0];y[0]=M,p&&M.xmt(),d.eW(t),yield*a.lyt(o,c)}}r.nW(),f.nW(),S.Qn(m),T.nW()}return!1}u5t(t,s){let i=this.Vjt.get(t);if(!i){if(!s)return null;i={l5t:null,c5t:new Map},this.Vjt.set(t,i)}return i}f5t(t,s,i,e,h){s.f3().Iyt(i,s.M3()),e&&t.iW(h)}*d5t(t,s,i,e,h){yield*s.f3().Gyt(i,s.M3()),e&&t.iW(h)}}}{const ka=self.ks;ka.gq.mq.yGt=class extends ka.lr{constructor(t){super(),this.yft=t,this.gf=t.K4(),this.Bxt=t.OP()}vxt(){}mr(){this.yft=null,this.gf=null,this.Bxt=null}}}{const Fa=self.ks;Fa.gq.mq.Instance=class extends Fa.lr{constructor(t,s){super(),this.vi=t,this.yft=this.vi.jF(),this.Vxt=this.yft.sTt(),this.gf=this.vi.K4()}mr(){this.vi=null,this.yft=null,this.Vxt=null,this.gf=null}}}{const v=self.ks,ja=[];v.gq.mq.pq={p5t(){return!0},fq(){return!0},Cq(){return!0},cFt(){return!0},fFt(){return!0},E3(){return this.gf.E3()},ogt(){const t=this.gf.P1t();return!t.S0t()&&!t.M0t()},m5t(){let t=this.gf.k1t(),s=t.cSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.gf.Ott();return s.set("TriggerOnce_lastTick",e),this.gf.JFt()||i!==e-1},g5t(t){const s=this.gf.k1t(),i=s.cSt(),e=i.get("Every_lastTime")||0,h=this.gf.O3(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},xpt(t){const s=this.gf.o3().hdt(t);return s&&s.xpt()},Y4t(){return this.gf.Y4t()},wi(){return v.ai.wi},Ykt(){return!0},y5t(){return!0},M5t(){return!0},ejt(){return!0},ajt(){return!0},rjt(){return!0},njt(){return!0},w5t(t){return!!this.gf.I4(t)},S5t(t){switch(t){case 0:return"browser"===v.ai.yi;case 1:return"iOS"===v.ai.li;case 2:return"Android"===v.ai.li;case 8:return"cordova"===v.ai.yi;case 9:return"scirra-arcade"===this.gf.kR();case 10:return"nwjs"===v.ai.yi;case 13:return"windows-uwp"===this.gf.kR();default:return!1}},T5t(t,s,i){const e=this.Yjt(s,i);return e.test(t)},b5t(t,s,i){return v.compare(t,s,i)},x5t(t,s,i){return s<=t&&t<=i},v5t(t,s,i){return v.compare(t.Eet(),s,i)},C5t(t){return!!t.Eet()},I5t(t,s){const i=this.gf.O3();if(0!==t)return v.compare(i,t,s);{const e=this.gf.k1t(),h=e.cSt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},G5t(t){return isNaN(t)},Tbt(t,s,i){return v.Dr(v.vr(t),v.vr(i))<=v.vr(s)},bbt(t,s){return v.Lr(v.vr(t),v.vr(s))},NTt(t,s,i){let e=v.vr(t),h=v.vr(s),r=v.vr(i),n=!v.Lr(r,h);return n?!(!v.Lr(e,h)&&v.Lr(e,r)):v.Lr(e,h)&&!v.Lr(e,r)},_5t(t,s){return"number"==typeof t?0===s:1===s},E5t(t){return!!t},spt(t){return t.toLowerCase()===this.gf.o3().rpt()},A5t(t,i,e,h){if(!t)return!1;let s=this.Kjt(),r=s.qU(),n=t.JP(),o=(v.Hn(r,n.QP()),n.Eft()&&v.Qn(n.Fft()),this.gf.k1t()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.vSt(1,t),h=o.vSt(3,t),v.compare(i,e,h)?++a:n.Rft(l)}v.Wn(r,a),n.Bft(r);const u=!!r.length;return v.Qn(r),s.nW(),t.wyt(),u},D5t(t,s){if(!t)return!1;let i=this.Kjt(),e=i.qU(),h=t.JP(),r=(v.Hn(e,h.QP()),h.Eft()&&v.Qn(h.Fft()),this.gf.k1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.vSt(1,t)?++n:h.Rft(a)}v.Wn(e,n),h.Bft(e);const o=!!e.length;return v.Qn(e),i.nW(),t.wyt(),o},N5t(t,i,e){if(!t)return!1;const s=t.JP(),h=s.QP();if(0===h.length)return!1;let r=this.gf.k1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.vSt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.Jft(n),t.wyt(),!0},L5t(t,s){if(!t)return!1;const i=t.JP(),e=i.QP();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Jft(h),t.wyt(),!0},O5t(t){if(!t)return!1;const s=t.JP(),i=s.QP(),e=Math.floor(this.gf.o4()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Jft(h),t.wyt(),!0},R5t(t){if(!t)return!1;if(!t.YP())return!1;const s=t.JP();return s.Pft(!0),t.wyt(),!0},P5t(t,i,e){if(!t)return!1;const h=t.JP(),s=h.QP(),r=this.gf.m3(),n=r.Vft(),o=this.gf.k1t().nSt();h.Eft()?(v.Hn(ja,s),h._ft(),h.Pft(!1)):n?(v.Hn(ja,h.Fft()),v.Qn(h.Fft())):(v.Hn(ja,h.kft()),v.Qn(h.kft()));for(let t=0,s=ja.length;t<s;++t){const a=ja[t];v.xor(a.D4().E5(i,e),o)?h.Oft(a):h.Rft(a)}return t.wyt(),v.xor(!!h.kft().length,o)},k5t(s){if(!s)return!1;let i=s.KV(),e=null,h=this.gf.o_t();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.jF().oTt(s)){e=r;break}}else if(r.jF()===s){e=r;break}}if(!e){const n=s.QP();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.JP();return t.Jft(e),s.wyt(),!0},F5t(t){return this.gf.h2t()?this.t5t(t):this.$jt(t)},j5t(){return this.gf.h2t()?this.i5t():this.s5t()},B5t(t,s,i){return this.gf.h2t()?this.h5t(t,s,i):this.e5t(t,s,i)},S1(t){return this.gf.h2t()?this.n5t(t):this.r5t(t)},z5t(t,s,i){return this.gf.h2t()?this.a5t(t,i):this.o5t(t,i)},U5t(t){return!!t&&t.Zk()},W5t(t){return!!t&&t.eF()},Q5t(t){return!!t&&t.tF()},J5t(t){return!!t&&!t.YP()},V5t(t,s,i){return!!t&&v.compare(100*t.PA(),s,i)},Y5t(t){const s=this.gf.a4();return!!s&&s.T9(t)},Zjt(){return!0},H5t(){return 0<this.Qjt},q5t(t,s){const i=this.gf.pEt();return!!i&&!!s&&!!i.jut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const Ba=self.ks,za=[],Ua=[],Wa=Ba.pr(Ba.Rect),Qa=Ba.pr(Ba.qo),Ja=[];Ba.gq.mq.ert={Z5t(t,s){t.cht(s)},X5t(t,s){t.de()&&"number"!=typeof s&&(s=parseFloat(s)),t.cht(t.Eet()+s)},K5t(t,s){t.de()&&t.cht(t.Eet()-s)},$5t(t,s){t.cht(!!s)},tBt(t){t.cht(!t.Eet())},sBt(t){t.cht(t.R1t())},iBt(t){this.gf.o3().idt(t)},eBt(t,s,i,e,h,r){if(t&&s){const n=this.gf.qP(t,s,i,e,h,r);if(n){h&&s.ZP(n);const o=this.gf.o3(),a=(o.XP(!0),n.KP(),o.XP(!1),new Map);n.rEt(a,t,h);for(const[u,l]of a)u.JP().zft(l)}}},hBt(t,s,i,e,h,r){if(t&&s){const n=this.gf.Kkt(t);n&&Ba.gq.mq.ert.eBt.call(this,n,s,i,e,h,r)}},ZV(h,r,n,o,a,t,u,l,c,f,d){if(h){let s=this.gf.E4(),i=s;if(t){const p=this.gf.c4().rZ(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.N4(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.N4(l))){Wa.set(r,n,o,a);const m=i.ZV(h,Wa,e,t,c,f,d);h.JP().Bft(m),h.wyt()}}}},rBt(){const t=this.j0t;t.R0t()&&t.L0t().Lz()},vpt(t,s){const i=this.gf.o3().hdt(t);i&&(0===s?i.vpt(!1):1===s?i.vpt(!0):i.vpt(!i.xpt()))},nBt(t){this.gf.j3(t)},oBt(t,s){if(s<0&&(s=0),t){const i=t.JP(),e=i.QP();for(const h of e)h.j3(s)}},aBt(t){if(t){const s=t.JP(),i=s.QP();for(const e of i)e.nj()}},Fn(t,s){if(!(t<0)){const i=this.gf.o3().Fdt();return s?i.Jbt(t):i.Vbt(t),!0}},G3(t){return this.gf.o3().Fdt().Ybt(t),!0},uBt(){const t=this.gf.o3();return t.Fdt().Hbt(t.tpt()),!0},C3(t){this.gf.o3().C3(t)},async I4t(t,s,i,e,h,r){const n=this.gf.zR();n&&(this.j4(),await n.I4t(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.gf._j(Ba.gq.mq.pq.y5t,null))},lBt(t,s){if(!(t<=0||s<=0)){this.gf.X3t(t,s),this.gf.E4().m7();const i=this.gf.zR();i&&("off"!==i.Q3t()&&this.gf.tFt(t,s),i.n_(i.J6(),i.V6(),!0),this.gf.j4())}},cBt(t){const s=this.gf.zR();s&&"off"!==s.Q3t()&&(s.h4t(0!==t?"high":"low"),s.n_(s.J6(),s.V6(),!0))},Qit(t){this.gf.qFt(t)},fBt(){this.gf.ZFt()},dBt(t){this.gf.XFt(t)},pBt(t){this.gf.$2t(t)},mBt(t){},gBt(){for(const t of this.gf.c4().m4())t.Oq()},yBt(t){this.gf.VFt(0!==t)},MBt(t,s){this.gf.i4(1/t),this.gf.K3(1/s)},wBt(t,s){this.gf.K3(t),this.gf.i4(s)},SBt(t){this.gf.q3(["vsync","unlimited-tick","unlimited-frame"][t])},TBt(t,i){if(t){const s=t.JP(),e=s.QP(),h=za,r=Ua,n=this.gf.E4(),o=t.KV(),a=t.zMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.D4();if(l){let t;t=o?u.Zrt(i+u.jF().BMt(a)):u.Zrt(i),h.push([l.N4()._O(),l.L4()]),r.push([u,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.O4(h[t][0]),d=h[t][1],p=f.R4();p[d]!==c&&((p[d]=c).D4().P4(f,!0),f.F4(c),i=!0)}i&&this.gf.j4(),Ba.Qn(za),Ba.Qn(Ua)}}},CR(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.gf.RO().CR(t,s)},bBt(t){if(!this.gf.qg()){const s=this.gf.c4();s.y4()||s.M4(t)}},xBt(t){if(!this.gf.qg()){const s=this.gf.c4();if(!s.y4()){const i=s.rZ(t);i&&s.M4(i)}}},vBt(t){if(!this.gf.qg()){const s=this.gf.c4();if(!s.y4()){const i=s.m4(),e=i.indexOf(s.a4());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.M4(h)}}}},CBt(){if(!this.gf.qg()){const t=this.gf.c4();t.y4()||(t.M4(t.a4()),this.gf.o3().adt())}},IBt(t,s){t&&t.Hk(s)},GBt(t,s){t&&t.Kk(s)},_Bt(t,s){t&&t.sF(s)},EBt(t,s){t&&t.FA(s/100)},ABt(t,s){t&&t.hF(s)},DBt(t,s){t&&t.nF(s)},NBt(t,s){t&&t.ck(Ba.vr(+s))},LBt(t,s,i){t&&(t.bF(!0),t.dk(s),t.mk(i))},OBt(t){t&&t.bF(!1)},RBt(t,s,i){t&&t.NY(s/100,i/100)},PBt(t,s){t&&t.CT(+s)},kBt(t,s){if(t){Qa.Aa(s),Qa.Tr();const i=t.TF();i.Ta(Qa)||(i.ca(Qa),this.j4())}},FBt(t,s){t&&t.mF(s)},jBt(t,s){t&&t.aT(s)},BBt(t,s,i){if(t){const e=t.hk(),h=e.kht(i);if(h){const r=1===s;h.pmt()!==r&&(h.DNt(r),t.QB(),this.gf.j4())}}},zBt(t,s,i,e){if(t){const h=t.hk(),r=h.kht(s);if(r){i=Math.floor(i);const n=r.gv().Mv(i);if(n){"color"===n?(Qa.Aa(e),e=Qa):"percent"===n&&(e/=100);const o=h.VB(r._O(),i,e);o&&r.pmt()&&this.gf.j4()}}}},UBt(t,s){t&&t.MF(s)},WBt(t){this.gf.E4().uk(+t)},QBt(t){this.gf.E4().ck(Ba.vr(+t))},JBt(t,s){const i=this.gf.E4(),e=i.hk(),h=e.kht(s);if(h){const r=1===t;h.pmt()!==r&&(h.DNt(r),i.QB(),this.gf.j4())}},VBt(t,s,i){const e=this.gf.E4(),h=e.hk(),r=h.kht(t);if(r){s=Math.floor(s);const n=r.gv().Mv(s);if(n){"color"===n?(Qa.Aa(i),i=Qa):"percent"===n&&(i/=100);const o=h.VB(r._O(),s,i);o&&r.pmt()&&this.gf.j4()}}},YBt(t,s){const i=this.gf.E4();i.Ok(t/100,s/100)},HBt(t){const s=this.gf.E4();0===t?s.kk():s.Fk()},qBt(t){const s=this.gf.E4();s.dk(t)},ZBt(t){const s=this.gf.E4();s.mk(t)},XBt(t,s){const i=this.gf.E4();i.dk(t),i.mk(s)},KBt(t){if(t){const s=t.HTt();if(s){const i=s.D4();if(i){const e=this.gf.E4();e.dk(i.wT()),e.mk(i.bT())}}}},Ik(t,s,i){const e=this.gf.E4();try{e.Ik(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},_k(t,s,i){if(t){const e=this.gf.E4();try{e._k(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},Ak(t){if(t){const s=this.gf.E4();s.Ak(t)}},Nk(){this.gf.E4().Nk()},async $Bt(t){const s=this.gf.a4();if(s&&t&&!this.gf.qg()){const i=t.KV()?t.cgt():[t];await this.qjt(s,i)}},async tzt(t){await Ba.gq.mq.ert.$Bt.call(this,this.gf.Kkt(t))},szt(t){const s=this.gf.a4();if(s&&t){const i=t.KV()?t.cgt():[t];this.Xjt(s,i)}},izt(t){Ba.gq.mq.ert.szt.call(this,this.gf.Kkt(t))},ezt(){const t=this.gf.a4();if(t){const s=t.L9();this.Xjt(t,s)}},async hzt(t){const s=this.gf.a4();t&&s&&!this.gf.qg()&&await this.qjt(s,t.A9())},async rzt(t){const s=this.gf.a4(),i=this.gf.c4().rZ(t);i&&s&&!this.gf.qg()&&await this.qjt(s,i.A9())},v3(t){const s=this.Cft.T3();if(s)switch(s.x3()){case 1:"number"==typeof t&&s.v3(t);break;case 2:"string"==typeof t&&s.v3(t);break;case 3:s.v3(t)}},nzt(t,s,i){const e=this.u5t(t.toLowerCase(),!0),h=e.c5t,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Ba.first(h.values())||e.l5t);if(n){const o=0!==n.w3(),a=0!==i.w3();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},ozt(t,s){const i=this.u5t(t.toLowerCase(),!0),e=(i.l5t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Ba.first(i.c5t.values())||i.l5t);if(e){const h=0!==e.w3(),r=0!==s.w3();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.l5t=s},azt(t,s,i){const e=this.gf,h=e.h2t()?Ja:null,r=(i=Math.floor(i),this.u5t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.c5t.get(s.toLowerCase());if(!n){if(!r.l5t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.l5t,i=0}if(!n.hc())return h;if(0!==n.w3())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.o3(),a=o.m3(),u=a.d3(),l=0<u.length,c=(l&&(n.M3()?o.tW(u):o.Pdt(u)),[]),f=o.Apt(a);if(f){const p=f.Npt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Eet())}const d=n.Npt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].R1t());return e.h2t()?this.d5t(o,n,c,l,u):this.f5t(o,n,c,l,u)}}}{const C=self.ks;C.gq.mq.hrt={uzt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},R(t){return t.toString()},Qt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.gf.o4()*t:this.gf.o4()*(s-t)+t},CMt(...t){const s=Math.floor(this.gf.o4()*t.length);return t[s]},lzt(t,...s){return"number"!=typeof t&&(t=0),s[t=C.Tr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},czt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},fzt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(C.vr(t))},cos(t){return Math.cos(C.vr(t))},tan(t){return Math.tan(C.vr(t))},asin(t){return C.Cr(Math.asin(t))},acos(t){return C.Cr(Math.acos(t))},atan(t){return C.Cr(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Tr(t,s,i){return C.Tr(t,s,i)},_t(t,s,i,e){return C._r(t,s,i,e)},angle(t,s,i,e){return C.Cr(C.Ar(t,s,i,e))},Ot(t,s,i){return C.Ot(t,s,i)},Fr(t,s,i){return C.Fr(t,s,i)},Br(t,s,i,e){return C.Br(t,s,i,e)},zr(t,s,i,e,h){return C.zr(t,s,i,e,h)},Ur(t,s,i){return C.Ur(t,s,i)},dzt(t,s){return C.Cr(C.Dr(C.vr(t),C.vr(s)))},pzt(t,s,i){return C.Cr(C.Or(C.vr(t),C.vr(s),i))},mzt(t,s,i){return C.Cr(C.Nr(C.vr(t),C.vr(s),C.vr(i)))},gzt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},yzt(t,s){return(t|=0)^1<<(0|s)},Mzt(t,s){return(t|=0)&1<<(0|s)?1:0},wzt(){return"\n"},Szt(t){return"string"==typeof t?t.toUpperCase():""},Tzt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},bzt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},xzt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(C.le(s),"i")):-1},vzt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(C.le(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(C.le(s),"gi"),i):"string"==typeof t?t:""},Czt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},Izt(t,s,i){const e=this.Yjt(s,i);return t?t.search(e):-1},Gzt(t,s,i,e){const h=this.Yjt(s,i);return t?t.replace(h,e):""},_zt(t,s,i){const e=this.Hjt(t.toString(),s,i);return e?e.length:0},Ezt(t,s,i,e){e=Math.floor(e);const h=this.Hjt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},Azt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},Dzt(t){return encodeURIComponent(t)},Nzt(t){return decodeURIComponent(t)},A3(){return this.gf.kX()},Lzt(){return this.gf.FX()},timescale(){return this.gf.F3()},Ozt(){return(Date.now()-this.gf.OFt())/1e3},Rzt(){return Date.now()},time(){return this.gf.O3()},tickcount(){return this.gf.Ott()},Pzt(){return this.gf.kFt()},fps(){return this.gf.B3()},kzt(){return this.gf.Q3()},Fzt(){return this.gf.V3()},jzt(){return this.gf.zR().qR()},Bzt(){return this.gf.zR().KR()},zzt(){return this.gf.YO()},Uzt(){return this.gf.qO()},Wzt(){return this.gf.YO()},Qzt(){return this.gf.qO()},Jzt(){return this.gf.E4().pk()},Vzt(){return this.gf.E4().gk()},Yzt(){return this.gf.E4().nf()},Hzt(){return this.gf.E4().lk()},qzt(){return C.Cr(this.gf.E4().fk())},Zzt(){return this.gf.E4().Mm()},Xzt(){return this.gf.E4().Em()},Kzt(){return 100*this.gf.E4().CY()},$zt(){return 100*this.gf.E4().IY()},t6t(t){const s=this.gf.E4().N4(t);return s?s.vY().Au():0},s6t(t){const s=this.gf.E4().N4(t);return s?s.vY().Du():0},i6t(t){const s=this.gf.E4().N4(t);return s?s.vY().Nu():0},e6t(t){const s=this.gf.E4().N4(t);return s?s.vY().Lu():0},h6t(t){const s=this.gf.E4().N4(t);return s?s.vY().width():0},r6t(t){const s=this.gf.E4().N4(t);return s?s.vY().height():0},n6t(t){const s=this.gf.E4().N4(t);if(s){const i=s.vY();return(i.Au()+i.Nu())/2}return 0},o6t(t){const s=this.gf.E4().N4(t);if(s){const i=s.vY();return(i.Du()+i.Lu())/2}return 0},a6t(t,s,i){const e=this.gf.E4().N4(t);return e?e.IF(s,i)[0]:0},u6t(t,s,i){const e=this.gf.E4().N4(t);return e?e.IF(s,i)[1]:0},l6t(t,s,i){const e=this.gf.E4().N4(t);return e?e.AF(s,i)[0]:0},c6t(t,s,i){const e=this.gf.E4().N4(t);return e?e.AF(s,i)[1]:0},f6t(t,s,i,e){const h=this.gf.E4(),r=h.N4(t),n=h.N4(s);if(!r||!n||r===n)return i;const[o,a]=r.AF(i,e);return n.IF(o,a)[0]},d6t(t,s,i,e){const h=this.gf.E4(),r=h.N4(t),n=h.N4(s);if(!r||!n||r===n)return e;const[o,a]=r.AF(i,e);return n.IF(o,a)[1]},p6t(t){const s=this.gf.E4().N4(t);return s?s.rF():0},m6t(t){const s=this.gf.E4().N4(t);return s?C.Cr(s.aF()):0},g6t(t){const s=this.gf.E4().N4(t);return s?100*s.PA():0},y6t(t){const s=this.gf.E4().N4(t);return s?s.oF():0},M6t(t){const s=this.gf.E4().N4(t);return s?s.pk():0},w6t(t){const s=this.gf.E4().N4(t);return s?s.gk():0},S6t(t){const s=this.gf.E4().N4(t);return s?100*s.lF():0},T6t(t){const s=this.gf.E4().N4(t);return s?100*s.fF():0},b6t(t){const s=this.gf.E4().N4(t);return s?s.vT():0},x6t(t){const s=this.gf.E4().N4(t);return s?s._O():-1},v6t(){const t=this.gf.zR();return t?t._4t():""},C6t(t){const s=this.j0t;if(!s.R0t())return 0;if(t){const i=s.k0t(t);return i?i._O():0}return s.L0t()._O()},I6t(){return this.gf.KFt()},G6t(t,s,...i){const e=this.u5t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.c5t.get(s.toLowerCase());if(!h){if(!e.l5t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.l5t}const r=h.w3(),n=h.u3();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.hc())return n;const o=this.gf,a=o.o3(),u=a.m3(),l=u.d3(),c=0<l.length,f=(c&&(h.M3()?a.tW(l):a.Pdt(l)),h.Npt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].R1t());const d=h.f3(),p=d.y3(d.d3(),h.M3(),r,n,...i);return c&&a.iW(l),p},_6t(){return this.gf.NO().h4()},E6t(){return this.d8()},renderer(){return this.gf.c4t()?"webgpu":"webgl"},A6t(){return this.gf.c4t()?this.gf.c4t().GetAdapterInfoString():this.gf.l4t().JD()},D6t(){let t=this.gf.US().CS();return Math.round(100*t/1048576)/100},N6t(t,s,i){return C.qr(t,s,i)},L6t(t,s,i){return C.Xr(t/100,s/100,i/100)},O6t(t,s,i,e){return C.Zr(t/100,s/100,i/100,e/100)},R6t(t,s,i){return C.Xr(t/255,s/255,i/255)},P6t(t,s,i,e){return C.Zr(t/255,s/255,i/255,e/255)},k6t(){return this.gf.jO()},F6t(){return this.gf.zO()},j6t(){return this.gf.m3().w9().nf()},B6t(){return this.gf.m3().Egt()}}}{const Va=self.ks;Va.gq.Bht=class extends Va.txt{constructor(t){super(t)}mr(){super.mr()}}}{const Ya=self.ks,Ha=self.Ys,qa=[],Za=(Ya.gq.Bht.yGt=class extends Ya.jxt{constructor(t){super(t),this.lGt=t.qGt()}mr(){Ya.Qn(this.lGt),super.mr()}vxt(){for(const t of this.lGt)t.cIt(this.gf)}R9(s){const i={T2:this.gf.ZO()};return Promise.all(this.lGt.map(t=>t.fIt(s,i)))}z9(){for(const t of this.lGt)t.dIt()}F9(){this.z6t()}z6t(){for(const t of this.yft.WP())t.CB().U6t()}ySt(t){Ya.gq.Bht.Nbt(this,t)}iTt(t){qa.push({Wxt:null,W6t:!1,instances:[]})}Q6t(t,s,i){const e=qa.at(-1);e.Wxt=t,e.W6t=i,e.instances.push(s)}eTt(t){const s=qa.pop(),i=s.Wxt,e=s.W6t;if(i){const h=new Map;for(const r of s.instances)r.rEt(h,i,e);for(const[n,o]of h)n.JP().zft(o)}}J6t(t){const s=this.jF().t_t(t),i=this.K4(),e=s.pIt(0);return e.lz().jW(i.US(),{T2:i.ZO()}).then(()=>this.z6t()),s}V6t(t){for(const s of this.yft.WP())s.CB().Y6t(t);this.jF().s_t(t)}H6t(t,s){const i=this.yft.KGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.MIt(s);e<0&&(e+=i.iz()+1);const h=Ya.aIt.lIt(this.K4()),r=(i.mIt(h,e),this.K4());h.lz().jW(r.US(),{T2:r.ZO()}).then(()=>this.z6t());for(const n of this.yft.WP())n.CB().q6t();return h}Z6t(t,s){const i=this.yft.KGt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.iz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.MIt(s);e<0&&(e+=i.iz()),i.gIt(e);for(const h of this.yft.WP())h.CB().q6t()}Cxt(){return self.X6t}},new WeakMap);self.X6t=class extends self.NP{constructor(t){super(t),Za.set(this,t.sTt())}K6t(t){Ha.Ce(t);const s=Za.get(this).jF().KGt(t);return s?s.wIt():null}$6t(){return Za.get(this).jF().XGt().map(t=>t.wIt())}tUt(t){return Ha.Ce(t),Za.get(this).J6t(t).wIt()}sUt(t){Ha.Ce(t),Za.get(this).V6t(t)}iUt(t,s){if(Ha.Ce(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Za.get(this).H6t(t,s).rz()}eUt(t,s){if(Ha.Ce(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Za.get(this).Z6t(t,s)}}}{const G=self.ks,Xa=self.Ys,Ka=G.pr(G.Rect),$a=G.pr(G.nl),tu=G.pr(G.nu),_=(G.gq.Bht.Instance=class extends G.Mvt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.hUt=this.yft.KGt(e)||this.yft.qGt()[0],this.rUt=G.Tr(h,0,this.hUt.iz()-1),this.nUt=this.hUt.pIt(this.rUt);const n=this.nUt.lz(),o=(this.oUt=n.Fb(),this.aUt=n.k_(),this.uUt=n.Avt(),this.bvt(),t.eEt(2,!0),t.eEt(1,0<=this.hUt.HB()),this.lUt=Math.abs(this.hUt.HB()),this.cUt=this.hUt.KB(),this.fUt=G.pr(G.A0),this.dUt=0,this.pUt=0,this.mUt="",this.gUt=-1,this.yUt="",this.MUt=0,this.D4());this.wUt=o.f5(),o.Hk(i),o._5(r),o.Snt(this.nUt.pz()),o.bnt(this.nUt.gz()),o.qDt(this.nUt.Iz()),o.i5(),1===this.yft.ZGt()&&1===this.yft.qGt()[0].iz()||0===this.lUt||this.uvt()}mr(){this.hUt=null,this.nUt=null,this.oUt=null,this.fUt=null,super.mr()}Ivt(){return this.nUt.lz()}vit(){return!0}z8(){this.oUt=null}Cvt(){this.U6t()}a2(t){const s=this.oUt;if(null!==s){t.zA(s);const i=this.D4();i.yB()?this.SUt(i,t):this.TUt(i,t)}}TUt(t,s){let i=this.wUt;this.gf.KO()&&(i=t.UDt(i)),s.XA(i,this.uUt)}SUt(s,t){const i=s.nNt();if(s.aNt()){s.jDt(Ka,$a,!1);let t=$a;this.gf.KO()&&(t=s.UDt(t)),i.o2(s.MB(),t,this.uUt),s.oNt(!1)}i.a2(t)}bUt(){return this.fUt.si()}xUt(){return this.vi.hEt(2)}vUt(t){this.vi.eEt(2,t)}CUt(){return this.vi.hEt(1)}IUt(t){this.vi.eEt(1,t)}GUt(){return this.vi.hEt(4)}_Ut(t){this.vi.eEt(4,t)}jX(){this.yUt&&this.EUt(),0<=this.gUt&&this.AUt();const t=this.lUt;if(this.xUt()&&0!==t){const s=this.gf.D3(this.vi),i=(this.fUt.Sc(s),this.bUt()),e=this.nUt,h=e.cz()/t;if(!(i<this.dUt+h)){const r=this.hUt,n=this.cUt,o=r.iz(),a=r.ZB(),u=r.qB(),l=r.sz(),c=(this.CUt()?this.rUt++:this.rUt--,this.dUt+=h,this.rUt>=o&&(l?(this.IUt(!1),this.rUt=o-2):!u&&(this.pUt++,this.pUt>=a)?this.DUt(!1):this.rUt=n),this.rUt<0&&(l?(this.rUt=1,this.IUt(!0),u||(this.pUt++,this.pUt>=a&&this.DUt(!0))):!u&&(this.pUt++,this.pUt>=a)?this.DUt(!0):this.rUt=n),this.rUt=G.Tr(this.rUt,0,o-1),r.pIt(this.rUt));i>this.dUt+c.cz()/t&&(this.dUt=i),this.NUt(e,c)}}else this.Yxt()}DUt(t){this.rUt=t?0:this.hUt.iz()-1,this.vUt(!1),this.mUt=this.hUt.nf(),this._Ut(!0),this.Uxt("animationend",!1,{animationName:this.mUt}),this.Ij(G.gq.Bht.pq.LUt),this.Ij(G.gq.Bht.pq.OUt),this._Ut(!1),this.pUt=0}NUt(i,e,t){if(i!==e){const s=this.D4(),h=i.lz(),r=e.lz(),n=h.Mm(),o=h.Em(),a=r.Mm(),u=r.Em(),l=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,u):(n!==a&&s.Im(s.Mm()*(a/n)),o!==u&&s.wm(s.Em()*(u/o))),s.Snt(e.pz()),s.bnt(e.gz()),s.qDt(e.Iz()),s.i5(),this.nUt=e,this.oUt=r.Fb(),this.aUt=r.k_(),this.uUt=r.Avt(),this.s6().Oht());for(let t=0,s=l.length;t<s;++t)l[t].gCt(i,e);this.Uxt("framechange",!1,{animationName:this.hUt.nf(),RUt:this.rUt}),this.Ij(G.gq.Bht.pq.PUt),this.gf.j4()}}kUt(t){this.vUt(!0),this.dUt=this.bUt(),1===t&&0!==this.rUt&&(this.gUt=0,this.GUt()||this.AUt()),this.uvt()}FUt(t,s,i){this.yUt=t,this.MUt=s,this.uvt(),!i&&this.GUt()||this.EUt()}jUt(){return this.hUt}BUt(){return this.yUt||this.hUt.nf()}Y6t(t){G.Mh(t,this.BUt())&&this.FUt(this.yft.i_t().nf(),1,!0)}zUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.yft.KGt(this.BUt());if(!s)return;if(-1===(t=s.yIt(t)))return}isFinite(t)&&(this.gUt=t,this.GUt()||this.AUt())}q6t(){if(!this.yUt&&-1===this.gUt){const t=this.nUt,s=this.hUt.pIt(G.Tr(this.rUt,0,this.hUt.iz()-1));t!==s&&this.NUt(t,s),1<this.hUt.iz()&&0<this.lUt&&this.uvt()}}UUt(){return this.rUt}WUt(){return this.nUt.Az()}QUt(t){this.lUt=Math.abs(t),this.IUt(0<=t),0<this.lUt&&this.uvt()}JUt(){return this.CUt()?this.lUt:-this.lUt}VUt(t){"string"==typeof t&&-1===(t=this.hUt.yIt(t))||(t=G.Tr(Math.floor(t),0,this.hUt.iz()-1),this.cUt=t)}YUt(){return this.cUt}EUt(t){const s=this.nUt,i=this.yft.KGt(this.yUt);if(this.yUt="",i&&(i!==this.hUt||!this.xUt())){this.hUt=i,this.IUt(0<=i.HB()),this.lUt=Math.abs(i.HB()),this.cUt=i.KB(),this.rUt=G.Tr(this.rUt,0,this.hUt.iz()-1),1===this.MUt&&(this.rUt=0),this.vUt(!0),this.dUt=this.bUt();const e=this.hUt.pIt(this.rUt);this.NUt(s,e,t)}}AUt(t){const s=this.nUt,i=this.rUt;if(this.rUt=G.Tr(Math.floor(this.gUt),0,this.hUt.iz()-1),this.gUt=-1,t||i!==this.rUt){const e=this.hUt.pIt(this.rUt);this.NUt(s,e),this.dUt=this.bUt()}}U6t(){const t=this.nUt.lz();this.oUt=t.Fb(),this.aUt=t.k_(),this.uUt=t.Avt(),this.D4().oNt(!0)}Fb(){return this.oUt}k_(){return this.aUt}Avt(){return this.uUt}wz(){return this.nUt.wz()}yTt(t){let s=this.nUt,i=this.D4(),e=null;if("string"==typeof t)e=s.vz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.xz(t-1)}let h=i.a5();if(!e)return[i.wT(),i.bT(),h];if(tu.I(e.AIt()),i.yB()){const[r,n,o]=i.MB().m2(tu.cu(),tu.du());tu.set(r,n),h+=o}return tu.offset(-s.pz(),-s.gz()),tu.scale(i.Mm(),i.Em()),tu.rotate(i.fk()),tu.offset(i.wT(),i.bT()),[tu.cu(),tu.du(),h]}HUt(){return this.D4().tNt().Vl()}qUt(t){t=Math.floor(t);const s=this.D4(),i=s.tNt(),e=i.Vl();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Jl();return[h[2*t+0]+s.wT(),h[2*t+1]+s.bT()]}dvt(){const s=G.gq.Bht.ert,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.hUt.nf(),ZUt:t=>this.mvt(s.XUt,t,0)},{name:t+".current-frame",value:this.rUt,ZUt:t=>this.mvt(s.KUt,t)},{name:t+".is-playing",value:this.xUt(),ZUt:t=>t?this.mvt(s.$Ut,0):this.mvt(s.tWt)},{name:t+".speed",value:this.lUt,ZUt:t=>this.mvt(s.sWt,t)},{name:t+".repeats",value:this.pUt,ZUt:t=>this.pUt=t}]}]}NT(){const t={a:this.hUt.nY()},s=(0!==this.dUt&&(t.fs=this.dUt),this.bUt()),i=(0!==s&&(t.at=s),0!==this.rUt&&(t.f=this.rUt),0!==this.lUt&&(t.cas=this.lUt),1!==this.pUt&&(t.ar=this.pUt),0!==this.cUt&&(t.rt=this.cUt),this.xUt()||(t.ap=this.xUt()),this.CUt()||(t.af=this.CUt()),this.D4());return i.G5()&&(t.ce=i.G5()),t}LT(t){const s=this.jF().$Gt(t.a),i=(s&&(this.hUt=s),this.dUt=t.hasOwnProperty("fs")?t.fs:0,this.fUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.rUt=G.Tr(i,0,this.hUt.iz()-1),this.lUt=t.hasOwnProperty("cas")?t.cas:0,this.pUt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.cUt=G.Tr(e,0,this.hUt.iz()-1),this.vUt(!t.hasOwnProperty("ap")||!!t.ap),this.IUt(!t.hasOwnProperty("af")||!!t.af),this.hUt.pIt(this.rUt)),r=(this.nUt=h,this.U6t(),this.D4());r.Snt(h.pz()),r.bnt(h.gz()),r.qDt(h.Iz()),r._5(!!t.ce),this.xUt()&&this.uvt()}zrt(t){const s=this.D4();switch(t){case 3:return s.G5();case 2:return G.Tr(this.rUt,0,this.hUt.iz()-1);case 1:return this.hUt.nf()}}Yrt(t,s,i){const e=this.D4();switch(t){case 3:e._5(!!s);break;case 2:{this.vUt(!1);const h=this.hUt.iz()-1,r=s=G.Tr(s,0,h),n=this.hUt.pIt(this.rUt),o=this.hUt.pIt(r);this.NUt(n,o,i),this.rUt=G.Tr(r,0,h);break}case 1:{this.yUt=s,this.EUt(i);const a=this.hUt.iz();1<a&&0<this.hUt.HB()?this.uvt():this.Yxt();break}}}Cxt(){return self.iWt}},new WeakMap),su=new Map([["current-frame",0],["beginning",1]]);self.iWt=class extends self.SB{constructor(){super(),_.set(this,self.kF.UF().CB())}Mz(){return _.get(this).wz()}Sz(t){return this.Tz(t)[0]}bz(t){return this.Tz(t)[1]}eWt(t){return this.Tz(t)[2]}Tz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return _.get(this).yTt(t)}Cz(){return _.get(this).HUt()}Gz(t){return Xa.Se(t),_.get(this).qUt(t)[0]}Ez(t){return Xa.Se(t),_.get(this).qUt(t)[1]}_z(t){return Xa.Se(t),_.get(this).qUt(t)}hWt(){_.get(this).vUt(!1)}rWt(t="current-frame"){Xa.Ce(t);const s=su.get(t);if(void 0===s)throw new Error("invalid mode");_.get(this).kUt(s)}nWt(t,s="beginning"){Xa.Ce(t),Xa.Ce(s);const i=su.get(s);if(void 0===i)throw new Error("invalid mode");const e=_.get(this);if(!e.jF().KGt(t))throw new Error(`animation name "${t}" does not exist`);e.FUt(t,i)}K6t(t){Xa.Ce(t);const s=_.get(this).jF().KGt(t);return s?s.wIt():null}get animation(){return _.get(this).jUt().wIt()}get animationName(){return _.get(this).BUt()}set RUt(t){Xa.Se(t),_.get(this).zUt(t)}get RUt(){return _.get(this).UUt()}set oWt(t){Xa.Ce(t),_.get(this).zUt(t)}get oWt(){return _.get(this).WUt()}set aWt(t){Xa.Se(t),_.get(this).QUt(t)}get aWt(){return _.get(this).JUt()}set uWt(t){Xa.Se(t),_.get(this).VUt(t)}get uWt(){return _.get(this).YUt()}get imageWidth(){return _.get(this).Ivt().Mm()}get imageHeight(){return _.get(this).Ivt().Em()}lWt(){const t=_.get(this).Ivt();return[t.Mm(),t.Em()]}async cWt(t){Xa.eh(t,Blob);const s=_.get(this),i=s.K4(),e=s.Ivt(),h=G.pr(G.OCt);if(h.HCt(i,t),await h.jW(i.US(),{T2:i.ZO()}),s.gr())h.mr();else{e.qCt(h);const r=s.sTt();r.z6t(),r.jF().qf().dispatchEvent(new G.Event("animationframeimagechange")),i.j4()}}fWt(t,s){Xa.Ce(s),_.get(this).D4().kDt(!!t,s)}}}{const iu=self.ks;iu.gq.Bht.pq={dWt(t){return iu.Mh(this.BUt(),t)},pWt(t,s){return iu.compare(this.rUt,t,s)},mWt(t,s){if("string"!=typeof s)return!1;const i=this.nUt.Az();return iu.compare(i.toLowerCase(),t,s.toLowerCase())},gWt(t,s){return iu.compare(this.JUt(),t,s)},OUt(t){return iu.Mh(this.mUt,t)},LUt(){return!0},PUt(){return!0},yWt(){return this.D4().Mm()<0},MWt(){return this.D4().Em()<0},wWt(){return!0},SWt(){return!0},G5(){return this.D4().G5()}}}{const eu=self.ks;eu.gq.Bht.ert={TWt(t,s,i,e,h){if(t&&s){const[r,n]=this.yTt(i),o=this.gf.qP(t,s,r,n,e,h);if(o){if(e&&s.ZP(o),t.OP().pP()){const u=o.D4();u.ck(this.D4().fk()),u.i5()}const a=this.gf.o3();a.XP(!0),o.KP(),a.XP(!1),t!==this.gf.j1t().jF()&&this.Vxt.Q6t(t,o,e)}}},tWt(){this.vUt(!1)},$Ut(t){this.kUt(t)},XUt(t,s){this.FUt(t,s)},KUt(t){this.zUt(t)},sWt(t){this.QUt(t)},bWt(t){this.VUt(t)},xWt(s,t){try{0===s?this.sTt().J6t(t):this.sTt().V6t(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},vWt(s,t,i){try{0===s?this.sTt().H6t(t,i):this.sTt().Z6t(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},CWt(t){const s=this.D4(),i=s.Mm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Im(e),s.i5())},IWt(t){const s=this.D4(),i=s.Em(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.wm(e),s.i5())},uk(t){const s=this.nUt,i=s.lz(),e=this.D4(),h=e.Mm()<0?-1:1,r=e.Em()<0?-1:1,n=i.Mm()*t*h,o=i.Em()*t*r;e.Mm()===n&&e.Em()===o||(e.n_(n,o),e.i5())},async GWt(t,s,i){const e=this.nUt,h=e.lz(),r=this.D4(),n=this.gf,o=this.Vxt;if(h.n8()===t)0===s&&(r.n_(h.Mm(),h.Em()),r.i5()),this.Ij(eu.gq.Bht.pq.wWt);else{const a=eu.pr(eu.OCt);try{if(await a.YCt(n,t),!a.O8())throw new Error("image failed to load");if(this.gr())return void a.mr();await a.jW(n.US(),{T2:n.ZO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.gr()||this.Ij(eu.gq.Bht.pq.SWt))}this.gr()?a.mr():(h.qCt(a),o.z6t(),o.jF().qf().dispatchEvent(new eu.Event("animationframeimagechange")),n.j4(),0===s&&(r.n_(h.Mm(),h.Em()),r.i5()),await this._j(eu.gq.Bht.pq.wWt))}},_Wt(t){this.D4()._5(t)},kDt(t,s){this.D4().kDt(0===t,s)},EWt(t){this.D4().aT(t),this.gf.j4()}}}{const hu=self.ks;hu.gq.Bht.hrt={AWt(){return this.UUt()},DWt(){return this.WUt()},NWt(){return this.hUt.iz()},LWt(){return this.hUt.nf()},OWt(){return this.JUt()},RWt(){return this.hUt.HB()},PWt(t){return this.yTt(t)[0]},kWt(t){return this.yTt(t)[1]},FWt(t){return this.yTt(t)[2]},jWt(){return this.wz()},BWt(){return this.Ivt().Mm()},zWt(){return this.Ivt().Em()},UWt(t){return this.qUt(t)[0]},WWt(t){return this.qUt(t)[1]},QWt(){return this.HUt()}}}{const ru=self.ks;ru.gq.JWt=class extends ru.txt{constructor(t){super(t)}mr(){super.mr()}},ru.gq.JWt.VWt=-2147483648,ru.gq.JWt.YWt=1073741824,ru.gq.JWt.HWt=536870912,ru.gq.JWt.qWt=3758096384,ru.gq.JWt.ZWt=536870911}{const nu=self.ks,ou=nu.gq.JWt.VWt,au=nu.gq.JWt.YWt,uu=nu.gq.JWt.HWt,lu=nu.gq.JWt.ZWt;nu.gq.JWt.yGt=class extends nu.jxt{constructor(t){super(t),this.XWt=[],this.KWt=!1,this.$Wt=0,this.tQt=[],this.sQt=null}mr(){this.sQt.clear(),this.sQt=null,super.mr()}vxt(){this.lz().X4(this.gf)}R9(t){return this.lz().jW(t,{T2:this.gf.ZO()})}z9(){this.lz().GG()}F9(){for(const t of this.jF().WP())t.CB().iQt()}zxt(t,s,i){this.$Wt=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.XWt.push({UAt:h,use:r,eQt:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.XWt.push(null);for(const n of i){const o=n[0],a=n[1],u=n[2];this.tQt.push({name:o,type:a,hQt:u})}}rQt(t,s){this.KWt=!1,this.nQt(t,s)}nQt(i,e){if(!this.KWt){this.KWt=!0;for(let t=0,s=this.XWt.length;t<s;++t)this.XWt[t]&&(this.oQt(t,i,e,!1,!1,!1),this.oQt(t,i,e,!1,!1,!0),this.oQt(t,i,e,!1,!0,!1),this.oQt(t,i,e,!1,!0,!0),this.oQt(t,i,e,!0,!1,!1),this.oQt(t,i,e,!0,!1,!0),this.oQt(t,i,e,!0,!0,!1),this.oQt(t,i,e,!0,!0,!0))}}oQt(t,s,i,e,h,r){if(!(t<0||t>=this.XWt.length)){const n=this.XWt[t];if(n){const o=nu.pr(nu.Bl,n.UAt,n.use);o.transform(s,i,0),r&&o.kl(),e&&o.Ol(s/2),h&&o.Pl(i/2),n.eQt[e?1:0][h?1:0][r?1:0]=null,n.eQt[e?1:0][h?1:0][r?1:0]=o}}}aQt(t){if(-1===t)return null;const s=t&lu;if(s<0||s>=this.XWt.length)return null;const i=this.XWt[s];if(!i)return null;const e=t&ou?1:0,h=t&au?1:0,r=t&uu?1:0;return i.eQt[e][h][r]}uQt(t){return!t||t.hc()}lQt(){return this.$Wt}cQt(s){this.sQt||(this.sQt=new Map);const t=this.sQt.get(s);if("number"==typeof t&&0<=t)return this.tQt[t];for(let t=0;t<this.tQt.length;t++)if(this.tQt[t].name===s)return this.sQt.set(s,t),this.tQt[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=du),s.includes("v")&&(i|=pu),s.includes("d")&&(i|=mu);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=du),h.includes("v")&&(t|=pu),h.includes("d")&&(t|=mu),e.push(t)}}return e};s;const cu=self.ks,fu=self.Ys,du=cu.gq.JWt.VWt,pu=cu.gq.JWt.YWt,mu=cu.gq.JWt.HWt,gu=cu.gq.JWt.qWt,yu=cu.gq.JWt.ZWt,Mu=cu.pr(cu.Rect),wu=cu.pr(cu.Rect),Su=cu.pr(cu.Rect),Tu=(cu.gq.JWt.Instance=class extends cu.Mvt{constructor(t,s){super(t);const i=this.D4();this.fQt=32,this.dQt=32,this.pQt=0,this.mQt=0,this.gQt=0,this.yQt=0,this.MQt=0,this.wQt=0,this.SQt=i.Mm(),this.TQt=i.Em(),this.nJ=0,this.oJ=0,this.bQt=[],this.xQt=new Map,this.vQt=!0,this.CQt=null,s&&(i.Hk(s[0]),this.fQt=Math.max(s[1],1),this.dQt=Math.max(s[2],1),this.pQt=s[3],this.mQt=s[4],this.gQt=s[5],this.yQt=s[6]),this.nJ=Math.ceil(this.gf.YO()/this.fQt),this.oJ=Math.ceil(this.gf.qO()/this.dQt),this.Vxt.nQt(this.fQt,this.dQt),this.IQt=null}mr(){this.GQt(),cu.Qn(this.bQt),this.bQt=null,this.xQt.clear(),this.xQt=null,super.mr()}GQt(){this.CQt&&(this.CQt.mr(),this.CQt=null)}zxt(t,s,i){this.MQt=s,this.wQt=i,this._Qt(!0),this.EQt(t),this.AQt()}_Qt(t){const[s,h]=this.DQt();if(!(s<=this.MQt&&h<=this.wQt)||t){let i=0,e=0;t?(i=Math.ceil(this.wQt/this.oJ),e=Math.ceil(this.MQt/this.nJ)):(i=this.bQt.length,e=Math.ceil(this.MQt/this.nJ),h>this.wQt&&(this.wQt=h,i=Math.ceil(this.wQt/this.oJ)),s>this.MQt&&(this.MQt=s,e=Math.ceil(this.MQt/this.nJ)),this.NQt(),this.LQt(),this.gf.j4());const r=this.bQt;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(cu.pr(cu.gq.JWt.OQt,this,t,s))}}}EQt(t){let i=s(t),e=0,h=this.MQt,r=this.nJ,n=this.oJ;for(let s=0,t=this.wQt;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.RQt(t,s);a&&a.PQt(t%r,s%n,o)}}kQt(){let u="";if(!(this.MQt<=0||this.wQt<=0)){let i=1,e=this.FQt(0,0),[h,t]=this.DQt(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const l=this.FQt(t,s);l===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&yu,n=0!=(e&du),o=0!=(e&pu),0!=(e&mu)),1===i?u+=""+r:u+=i+"x"+r,n&&(u+="h"),o&&(u+="v"),a&&(u+="d"),u+=",",i=1,e=l)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&yu,n=0!=(e&du),o=0!=(e&pu),0!=(e&mu)),1===i?u+=""+r:u+=i+"x"+r,n&&(u+="h"),o&&(u+="v"),a&&(u+="d")}return u}NQt(){const i=this.bQt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].jQt()}this.vQt=!0}AQt(){if(this.vQt){this.vQt=!1;const i=this.bQt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].BQt()}}}zQt(){this.vQt=!0,this.LQt(),this.gf.j4()}LQt(){this.D4().eNt(!0)}RQt(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.oJ);if(i>=this.bQt.length)return null;const e=this.bQt[i],h=Math.floor(t/this.nJ);return h>=e.length?null:e[h]}UQt(t,s){if(t<0||s<0||s>=this.bQt.length)return null;const i=this.bQt[s];return t>=i.length?null:i[t]}FQt(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.MQt||s>=this.wQt)return-1;const i=this.RQt(t,s);return i?i.WQt()[s%this.oJ][t%this.nJ]:-1}PQt(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.MQt||s>=this.wQt||-1!==i&&(i&yu)>this.lQt())){const e=this.RQt(t,s);e&&e.PQt(t%this.nJ,s%this.oJ,i)}}lQt(){return this.Vxt.lQt()}QQt(t){return Math.floor((t-this.D4().wT())/(this.nJ*this.fQt))}JQt(t){return Math.floor((t-this.D4().bT())/(this.oJ*this.dQt))}VQt(t){return Math.floor((t-this.D4().wT())/this.fQt)}YQt(t){return Math.floor((t-this.D4().bT())/this.dQt)}HQt(){return this.MQt}qQt(){return this.wQt}ZQt(){return Math.floor(this.D4().Mm()/this.XQt())}KQt(){return Math.floor(this.D4().Em()/this.$Qt())}DQt(){const t=this.D4();return[Math.floor(t.Mm()/this.XQt()),Math.floor(t.Em()/this.$Qt())]}XQt(){return this.fQt}$Qt(){return this.dQt}t8t(){return this.nJ}s8t(){return this.oJ}lLt(t,i){const e=this.QQt(t.Au()),h=this.JQt(t.Du()),r=this.QQt(t.Nu()),n=this.JQt(t.Lu());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.UQt(s,t);o&&(o.BQt(),cu.Kh(i,o.i8t()))}}Lvt(t,s){const i=this.VQt(t),e=this.YQt(s),h=this.FQt(i,e);if(-1===h)return!1;const r=this.Vxt.aQt(h);if(!r)return!0;if(!this.Vxt.uQt(r))return!1;const n=this.D4(),o=Math.floor((t-n.wT())/this.fQt)*this.fQt+n.wT(),a=Math.floor((s-n.bT())/this.dQt)*this.dQt+n.bT();return t-=o,s-=a,r.il(t,s)}e8t(i){const e=this.bQt;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.BQt(),cu.Kh(i,r.i8t())}}}Ivt(){return this.CQt||this.yft.lz()}h8t(t){const s=this.xQt,i=s.get(t);if(i)return i;const e=t&yu,h=0!=(t&du),r=0!=(t&pu),n=0!=(t&mu),o=this.Ivt(),a=o.Mm(),u=this.fQt,l=this.pQt,c=this.gQt,f=Math.floor((a-l)/(u+c)*u)+c,d=Math.floor(f/u),p=e%d,m=Math.floor(e/d),g=o.ZCt()+this.pQt+(this.fQt+this.gQt)*p,y=o.XCt()+this.mQt+(this.dQt+this.yQt)*m,M=(Mu.bu(g,y,this.fQt,this.dQt),Mu.It(o.KCt(),o.$Ct()),cu.pr(cu.nl));return M.Gl(Mu),n&&M.kl(),h&&M.Ol(),r&&M.Pl(),M.offset(p,m),s.set(t,M),M}iQt(){this.xQt.clear(),this.NQt()}a2(h){const t=this.Ivt(),s=t.Fb();if(s){Mu.I(t.k_()),Mu.offsetLeft(this.pQt/s.Mm()),Mu.offsetTop(this.mQt/s.Em()),h.YM(),h.uD(Mu,s.Mm(),s.Em(),this.fQt,this.dQt,this.gQt,this.yQt),h.zA(s);const r=this.D4(),n=r.N4();r.Mm()===this.SQt&&r.Em()===this.TQt||(this.LQt(),this.NQt(),this.SQt=r.Mm(),this.TQt=r.Em());let i=r.wT(),e=r.bT();this.gf.KO()&&(i=Math.round(i),e=Math.round(e));const o=this.nJ*this.fQt,a=this.oJ*this.dQt,u=r.a5(),l=wu;if(n.zY()){l.set(-1/0,-1/0,1/0,1/0);const c=Su,f=n.$H();for(const d of this.bQt)for(const p of d)p.r8t(c),f.Ey(c.Au(),c.Du(),u,c.Nu(),c.Lu(),u)&&(p.BQt(),p.a2(h,l,i,e))}else{n.GY(u,l);const m=Math.floor((l.Au()-i)/o),g=Math.floor((l.Nu()-i)/o),y=Math.floor((l.Du()-e)/a),M=Math.floor((l.Lu()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=M;++t){const w=this.UQt(s,t);w&&(w.BQt(),w.a2(h,l,i,e))}}}}NT(){this._Qt();const[t,s]=this.DQt();return{tw:this.fQt,th:this.dQt,tox:this.pQt,toy:this.mQt,tsx:this.gQt,tsy:this.yQt,w:t,h:s,d:this.kQt()}}LT(t){this.fQt=t.tw,this.dQt=t.th,this.pQt=t.tox,this.mQt=t.toy,this.gQt=t.tsx,this.yQt=t.tsy,this.MQt=t.w,this.wQt=t.h,this._Qt(!0),this.EQt(t.d),this.LQt(),this.NQt()}n8t(){this._Qt();const[t,s]=this.DQt();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.kQt()})}o8t(t){switch(t){case 0:return 0;case 1:return du;case 2:return pu;case 3:return du|mu;case 4:return du|pu;case 5:return pu|mu;case 6:return du|pu|mu;case 7:return mu;default:return 0}}zrt(t){switch(t){case 1:return this.fQt;case 2:return this.dQt;case 3:return this.pQt;case 4:return this.mQt;case 5:return this.gQt;case 6:return this.yQt}}Yrt(t,s){switch(t){case 1:this.fQt!==s&&(this.fQt=Math.max(s,1),this.nJ=Math.ceil(this.gf.YO()/this.fQt),this.Vxt.rQt(),this.a8t());break;case 2:this.dQt!==s&&(this.dQt=Math.max(s,1),this.oJ=Math.ceil(this.gf.qO()/this.dQt),this.Vxt.rQt(),this.a8t());break;case 3:this.pQt!==s&&(this.pQt=s,this.a8t());break;case 4:this.mQt!==s&&(this.mQt=s,this.a8t());break;case 5:this.gQt!==s&&(this.gQt=s,this.a8t());break;case 6:this.yQt!==s&&(this.yQt=s,this.a8t())}}a8t(){this.xQt.clear(),this.NQt(),this.AQt()}Cxt(){return bu}},new WeakMap),bu=self.u8t=class extends self.SB{constructor(){super(),Tu.set(this,self.kF.UF().CB())}get l8t(){return Tu.get(this).HQt()}get c8t(){return Tu.get(this).qQt()}f8t(){const t=Tu.get(this);return[t.HQt(),t.qQt()]}get d8t(){return Tu.get(this).ZQt()}get p8t(){return Tu.get(this).KQt()}m8t(){const t=Tu.get(this);return[t.ZQt(),t.KQt()]}get g8t(){return Tu.get(this).XQt()}get y8t(){return Tu.get(this).$Qt()}M8t(){const t=Tu.get(this);return[t.XQt(),t.$Qt()]}w8t(t,s){return fu.Se(t),fu.Se(s),Tu.get(this).FQt(t,s)}S8t(t,s,i){fu.Se(t),fu.Se(s),fu.Se(i);const e=Tu.get(this);e._Qt(),e.PQt(t,s,i)}async T8t(t){fu.eh(t,Blob);const s=Tu.get(this),i=s.K4(),e=cu.pr(cu.OCt);e.HCt(i,t),await e.jW(i.US(),{T2:i.ZO()}),s.gr()?e.mr():(s.GQt(),s.CQt=e,s.xQt.clear(),s.NQt(),i.j4())}};bu.VWt=du,bu.YWt=pu,bu.HWt=mu,bu.qWt=gu,bu.ZWt=yu}{const xu=self.ks,vu=xu.gq.JWt.qWt,Cu=xu.gq.JWt.ZWt;xu.gq.JWt.pq={b8t(t,s,i,e){let h=this.FQt(t,s);return-1!==h&&(h&=Cu),xu.compare(h,i,e)},x8t(t,s,i){let e=this.FQt(t,s);return(-1!==e?e&vu:0)===this.o8t(i)},wWt(){return!0},SWt(){return!0},v8t(t){return this.IQt||(this.IQt=new xu.gq.JWt.C8t(this,this.Vxt)),this.IQt.v8t(t)}}}{const Iu=self.ks,Gu=Iu.gq.JWt.ZWt;Iu.gq.JWt.ert={I8t(t,s){this._Qt(),this.PQt(t,s,-1)},G8t(t,s,i,e){this._Qt(),this.PQt(t,s,i&Gu|this.o8t(e))},_8t(t,s,i){const e=this.FQt(t,s);-1!==e&&(this._Qt(),this.PQt(t,s,e&Gu|this.o8t(i)))},E8t(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.MQt)),o=Math.floor(Math.min(s+e,this.wQt));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.PQt(t,s,-1)},A8t(t,s,i,e,h,r){this._Qt();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.MQt)),u=Math.floor(Math.min(s+e,this.wQt)),l=h&Gu|this.o8t(r);for(let s=o;s<u;++s)for(let t=n;t<a;++t)this.PQt(t,s,l)},D8t(t,s,i,e,h){this._Qt();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.MQt)),a=Math.floor(Math.min(s+e,this.wQt)),u=this.o8t(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const l=this.FQt(t,s);-1!==l&&this.PQt(t,s,l&Gu|u)}},N8t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.MQt=s.width,this.wQt=s.height,this._Qt(!0),this.EQt(s.data),this.NQt(),this.LQt()):console.error("[Construct] Unrecognized JSON data format")},L8t(t){const s=URL.createObjectURL(new Blob([this.n8t()],{type:"application/json"}));this.gf.v4(s,t)},async GWt(t,s){if(!this.CQt||this.CQt.n8()!==t){const i=this.gf,e=Iu.pr(Iu.OCt);try{if(await e.YCt(i,t),!e.O8())throw new Error("image failed to load");if(this.gr())return e.mr(),null;const h=await e.jW(i.US(),{T2:i.ZO()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.gr()||this.Ij(Iu.gq.JWt.pq.SWt))}this.gr()?e.mr():(this.GQt(),this.CQt=e,i.j4(),this.xQt.clear(),this.NQt(),await this._j(Iu.gq.JWt.pq.wWt))}},EWt(t){2<=t&&t++,this.D4().aT(t),this.gf.j4()},O8t(t,s,i){this._Qt(),this.IQt||(this.IQt=new Iu.gq.JWt.C8t(this,this.Vxt)),this.IQt.R8t(t,s,i)},P8t(t,s,i){this._Qt(),this.IQt||(this.IQt=new Iu.gq.JWt.C8t(this,this.Vxt)),this.IQt.k8t(t,s,i)},F8t(t,s,i){Iu.gq.JWt.ert.O8t.call(this,t,s,i)},j8t(t,s,i){Iu.gq.JWt.ert.P8t.call(this,t,s,i)}}}{const _u=self.ks,Eu=_u.gq.JWt.ZWt;_u.gq.JWt.hrt={B8t(t,s){const i=this.FQt(t,s);return-1===i?-1:i&Eu},z8t(t){return this.VQt(t)},U8t(t){return this.YQt(t)},W8t(t){return t*this.fQt+this.D4().wT()+this.fQt/2},Q8t(t){return t*this.dQt+this.D4().bT()+this.dQt/2},J8t(t){const s=this.D4().wT();return Math.floor((t-s)/this.fQt)*this.fQt+s+this.fQt/2},V8t(t){const s=this.D4().bT();return Math.floor((t-s)/this.dQt)*this.dQt+s+this.dQt/2},Y8t(){return this.n8t()},H8t(){return this.XQt()},q8t(){return this.$Qt()},Z8t(){return this.ZQt()},X8t(){return this.KQt()}}}{const Au=self.ks,Du=Au.gq.JWt.VWt,Nu=Au.gq.JWt.YWt,Lu=Au.gq.JWt.HWt,Ou=Au.gq.JWt.ZWt,Ru=Au.pr(Au.Rect),Pu=Au.pr(Au.nl);Au.gq.JWt.K8t=class extends Au.lr{constructor(){super(),this.Mf=-1,this.$8t=-1,this.tJt=!1,this.sJt=!1,this.iJt=!1,this.eJt=Au.pr(Au.Rect),this.hJt=null}fJ(t,s,i,e,h,r,n,o){this.Mf=t,this.$8t=t&Ou,this.tJt=0!=(t&Du),this.sJt=0!=(t&Nu),this.iJt=0!=(t&Lu),this.eJt.bu(e*s+r,h*i+n,s,i),this.hJt=o.h8t(this.Mf)}a2(t,s,i,e,h){Ru.I(this.eJt),Ru.offset(i,e),Ru.tl(s)&&(Pu.Gl(Ru),t.XA(Pu,this.hJt))}}}{const ku=self.ks;ku.gq.JWt.rJt=class extends ku.lr{constructor(){super(),this.Mf=-1,this.nJt=null,this.eJt=ku.pr(ku.Rect)}fJ(t,s,i,e,h,r,n,o){this.Mf=t,this.nJt=s,this.eJt.bu(h*i+n,r*e+o,i,e)}oJt(t){this.eJt.Iu(this.eJt.Nu()+t)}aJt(){return this.Mf}uJt(){return!!this.nJt}fLt(){return this.nJt}cLt(){return this.eJt}}}{const Fu=self.ks,ju=Fu.gq.JWt.ZWt;Fu.gq.JWt.OQt=class extends Fu.lr{constructor(t,s,i){super();const e=t.t8t(),h=t.s8t();this.C_t=t,this.ou=s,this.au=i,this.Mu=this.ou*e*t.XQt(),this.wu=this.au*h*t.$Qt(),this.lJt=[],this.cJt=[],this.fJt=[],this.dJt=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.lJt.push(r)}}oc(){const i=this.C_t.t8t(),s=this.C_t.s8t(),e=this.lJt;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&Fu.Wn(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}r8t(t){const s=this.C_t,i=s.D4(),e=s.t8t()*s.XQt(),h=s.s8t()*s.$Qt(),r=i.wT()+this.Mu,n=i.bT()+this.wu;t.set(r,n,r+e,n+h)}jQt(){this.dJt=!1}BQt(){if(!this.dJt){const l=this.C_t,c=l.sTt(),s=l.D4(),f=l.XQt(),d=l.$Qt(),p=l.t8t(),m=l.s8t(),g=this.Mu,y=this.wu;if(!(f<=0||d<=0)){let e=Math.min(l.HQt(),Math.floor(s.Mm()/f)),t=Math.min(l.qQt(),Math.floor(s.Em()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.lJt),r=this.cJt,n=0;for(let i=0;i<t;++i){const M=h[i];for(let s=0;s<e;++s){const w=M[s];if(-1!==w){let t=null;n<r.length?t=r[n]:(t=Fu.pr(Fu.gq.JWt.K8t),r.push(t)),t.fJ(w,f,d,s,i,g,y,l),++n}}}n<r.length&&Fu.Wn(r,n);let i=null,o=!1,a=this.fJt;Fu.Qn(a);for(let s=0;s<t;++s){const S=h[s];for(let t=0;t<e;++t){const T=S[t],b=(ju,c.aQt(T)),x=c.uQt(b);-1!==T&&x?!i||b||o?(i&&a.push(i),(i=Fu.pr(Fu.gq.JWt.rJt)).fJ(T,b,f,d,t,s,g,y),o=!!b):i.oJt(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let u=a.length;for(let s=0;s<u;++s){const v=a[s];if(!v.uJt()){const C=v.cLt();for(let t=s+1;t<u;++t){const I=a[t],G=I.cLt();G.Du()<C.Lu()||G.Du()>C.Lu()||G.Nu()>C.Nu()||G.Au()>C.Au()||I.uJt()||G.Au()===C.Au()&&G.Nu()===C.Nu()&&(a.splice(t,1),--u,C.Gu(C.Lu()+d),--t)}}}this.dJt=!0}}}PQt(t,s,i){this.lJt[s][t]!==i&&(this.lJt[s][t]=i,this.dJt=!1,this.C_t.zQt())}WQt(){return this.lJt}i8t(){return this.fJt}a2(i,e,h,r){const n=this.C_t,o=this.cJt;for(let t=0,s=o.length;t<s;++t)o[t].a2(i,e,h,r,n)}}}{const Bu=self.ks,zu=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);Bu.gq.JWt.C8t=class{constructor(t,s){this.C_t=t,this.Vxt=s,this.pJt=[null,null],this.mJt=[Bu.gq.JWt.gJt,Bu.gq.JWt.yJt],this.MJt=new Bu.ef}get wJt(){return zu}get SJt(){return-999}get TJt(){return-998}get bJt(){return-1}get xJt(){return 0}get vJt(){return 1}CJt(){return this.C_t}sTt(){return this.Vxt}R8t(t,s,i){this.v8t(i)&&(this.IJt(i,0),this.GJt(t,s,this._Jt(t,s,i)))}k8t(t,s,i){this.v8t(i)&&(this.IJt(i,1),this.EJt(t,s),this.GJt(t,s,this._Jt(t,s,i)))}v8t(t){return!!this.sTt().cQt(t)}AJt(t,s){return this.CJt().FQt(t,s)}DJt(t,s,i){const e=this.AJt(t,s);return!!this.NJt(e,!0,e,i)}NJt(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.LJt(i,e)?0:1}OJt(t,s,i,e){const h=e.hQt[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.AJt(s,i);if(this.NJt(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.MJt.oc();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.MJt.cf(s,t);return this.MJt.lf()}RJt(t,s,i){-1!==t&&this.CJt().PQt(t,s,i)}EJt(t,s){this.CJt().PQt(t,s,-1)}LJt(t,s){for(const i of s.hQt)for(const[e]of i)if(e===t)return!0;return!1}GJt(t,s,i){i&&(this.RJt(t-1,s-1,i[0][0]),this.RJt(t,s-1,i[1][0]),this.RJt(t+1,s-1,i[2][0]),this.RJt(t-1,s,i[0][1]),this.RJt(t,s,i[1][1]),this.RJt(t+1,s,i[2][1]),this.RJt(t-1,s+1,i[0][2]),this.RJt(t,s+1,i[1][2]),this.RJt(t+1,s+1,i[2][2]))}PJt(t){const s=this.sTt().cQt(t);return s.type}kJt(t){const s=this.PJt(t);this.pJt[s]||(this.pJt[s]=new this.mJt[s](this))}IJt(t,s){this.kJt(t);const i=this.PJt(t);this.pJt[i]&&this.pJt[i].FJt(s)}_Jt(t,s,i){this.kJt(i);const e=this.sTt().cQt(i);if(this.pJt[e.type])return this.pJt[e.type].jJt(t,s,e)}}}{const Uu=self.ks;Uu.gq.JWt.gJt=class{constructor(t){this.BJt=t,this.zJt=t.xJt}FJt(t){this.zJt=t}jJt(t,s,i){return this.UJt(t,s,i)}UJt(t,s,i){const e=this.zJt===this.BJt.xJt?this.WJt(t,s,void 0,i):this.BJt.bJt,h=this.QJt(t,s-1,"s",i),r=this.QJt(t-1,s,"e",i),n=this.QJt(t+1,s,"w",i),o=this.QJt(t,s+1,"n",i),a=this.BJt.wJt;return a[0][0]=this.BJt.SJt,a[1][0]=this.JJt(h,t,s-1,i),a[2][0]=this.BJt.SJt,a[0][1]=this.JJt(r,t-1,s,i),a[1][1]=this.JJt(e,t,s,i),a[2][1]=this.JJt(n,t+1,s,i),a[0][2]=this.BJt.SJt,a[1][2]=this.JJt(o,t,s+1,i),a[2][2]=this.BJt.SJt,a}QJt(t,s,i,e){return this.BJt.DJt(t,s,e)?this.WJt(t,s,i,e):this.BJt.SJt}WJt(t,s,i,e){this.zJt===this.BJt.vJt&&(i=void 0);const h=this.BJt.AJt(t,s-1),r=this.BJt.AJt(t-1,s),n=this.BJt.AJt(t+1,s),o=this.BJt.AJt(t,s+1),a="n"===i?this.BJt.TJt:h,u="w"===i?this.BJt.TJt:r,l="e"===i?this.BJt.TJt:n,c="s"===i?this.BJt.TJt:o,f=this.BJt.NJt(a,!0,h,e),d=this.BJt.NJt(u,!0,r,e),p=this.BJt.NJt(l,!0,n,e),m=this.BJt.NJt(c,!0,o,e);return+f+2*d+4*p+8*m}JJt(t,s,i,e){return t===this.BJt.SJt||t===this.BJt.bJt?t:this.BJt.OJt(t,s,i,e)}}}{const Wu=self.ks,Qu=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);Wu.gq.JWt.yJt=class{constructor(t){this.BJt=t,this.zJt=t.xJt}FJt(t){this.zJt=t}jJt(t,s,i){return this.VJt(t,s,i)}VJt(t,s,i){const e=this.zJt===this.BJt.xJt?this.YJt(t,s,void 0,i):this.BJt.bJt,h=this.HJt(t-1,s-1,"se",i),r=this.HJt(t,s-1,"s",i),n=this.HJt(t+1,s-1,"sw",i),o=this.HJt(t-1,s,"e",i),a=this.HJt(t+1,s,"w",i),u=this.HJt(t-1,s+1,"ne",i),l=this.HJt(t,s+1,"n",i),c=this.HJt(t+1,s+1,"nw",i),f=this.BJt.wJt;return f[0][0]=this.qJt(h,t-1,s-1,i),f[1][0]=this.qJt(r,t,s-1,i),f[2][0]=this.qJt(n,t+1,s-1,i),f[0][1]=this.qJt(o,t-1,s,i),f[1][1]=this.qJt(e,t,s,i),f[2][1]=this.qJt(a,t+1,s,i),f[0][2]=this.qJt(u,t-1,s+1,i),f[1][2]=this.qJt(l,t,s+1,i),f[2][2]=this.qJt(c,t+1,s+1,i),f}HJt(t,s,i,e){return this.BJt.DJt(t,s,e)?this.YJt(t,s,i,e):this.BJt.SJt}YJt(t,s,i,e){this.zJt===this.BJt.vJt&&(i=void 0);const h=this.BJt.AJt(t,s-1),r=this.BJt.AJt(t-1,s),n=this.BJt.AJt(t+1,s),o=this.BJt.AJt(t,s+1),a=this.BJt.AJt(t-1,s-1),u=this.BJt.AJt(t+1,s-1),l=this.BJt.AJt(t-1,s+1),c=this.BJt.AJt(t+1,s+1),f="n"===i?this.BJt.TJt:h,d="w"===i?this.BJt.TJt:r,p="e"===i?this.BJt.TJt:n,m="s"===i?this.BJt.TJt:o,g="nw"===i?this.BJt.TJt:a,y="ne"===i?this.BJt.TJt:u,M="sw"===i?this.BJt.TJt:l,w="se"===i?this.BJt.TJt:c,S=this.BJt.NJt(f,!0,h,e),T=this.BJt.NJt(d,!0,r,e),b=this.BJt.NJt(p,!0,n,e),x=this.BJt.NJt(m,!0,o,e),v=S&&T?this.BJt.NJt(g,!0,a,e):0,C=S&&b?this.BJt.NJt(y,!0,u,e):0,I=x&&T?this.BJt.NJt(M,!0,l,e):0,G=x&&b?this.BJt.NJt(w,!0,c,e):0;return+v+2*S+4*C+8*T+16*b+32*I+64*x+128*G}qJt(t,s,i,e){return t===this.BJt.SJt||t===this.BJt.bJt?t:this.BJt.OJt(Qu.get(t),s,i,e)}}}{const Ju=self.ks;Ju.gq.Keyboard=class extends Ju.txt{constructor(t){super(t)}mr(){super.mr()}}}{let i=function(){return s.DP().CB()};i;const Vu=self.ks;Vu.gq.Keyboard.yGt=class extends Vu.jxt{constructor(t){super(t)}mr(){super.mr()}vxt(){}Cxt(){return self.ZJt}};let s=null;self.ZJt=class extends self.NP{constructor(t){super(t),(s=t).K4().w4().keyboard=this}XJt(t){const s=i();if("string"==typeof t)return s.KJt(t);if("number"==typeof t)return s.$Jt(t);throw new TypeError("expected string or number")}}}{const Yu=self.ks;Yu.gq.Keyboard.Instance=class extends Yu.Qxt{constructor(t,s){super(t,"keyboard"),this.tVt=new Set,this.sVt=new Set,this.iVt=0,this.eVt="",this.hVt="",this.rVt=!1;const i=this.K4().qf();this.G0=new Yu.v0(Yu.M0.x0(i,"keydown",t=>this.nVt(t.data)),Yu.M0.x0(i,"keyup",t=>this.oVt(t.data)),Yu.M0.x0(i,"window-blur",()=>this.aVt()),Yu.M0.x0(i,"keyboard-blur",()=>this.aVt())),this.gf.J4(this.MT())}mr(){super.mr()}async MT(){const t=await this.evt("init");this.rVt=t.isKeyboardLockSupported}nVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.tVt.has(i)||(this.tVt.add(i),this.sVt.add(s),this.eVt=i,this.iVt=s,this.hVt=e,this.Ij(Yu.gq.Keyboard.pq.uVt),this.Ij(Yu.gq.Keyboard.pq.lVt),this.Ij(Yu.gq.Keyboard.pq.cVt),this.Ij(Yu.gq.Keyboard.pq.fVt))}oVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.tVt.delete(i),this.sVt.delete(s),this.eVt=i,this.iVt=s,this.hVt=e,this.Ij(Yu.gq.Keyboard.pq.dVt),this.Ij(Yu.gq.Keyboard.pq.pVt),this.Ij(Yu.gq.Keyboard.pq.mVt),this.Ij(Yu.gq.Keyboard.pq.gVt)}aVt(){for(const t of this.sVt)this.sVt.delete(t),this.iVt=t,this.Ij(Yu.gq.Keyboard.pq.dVt),this.Ij(Yu.gq.Keyboard.pq.pVt),this.Ij(Yu.gq.Keyboard.pq.gVt);this.tVt.clear()}KJt(t){return this.tVt.has(t)}$Jt(t){return this.sVt.has(t)}NT(){return{tk:this.iVt,tkk:this.hVt}}LT(t){this.iVt=t.tk,t.hasOwnProperty("tkk")&&(this.hVt=t.tkk)}dvt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.iVt},{name:t+".debugger.last-key-string",value:Yu.gq.Keyboard.hrt.yVt(this.iVt)},{name:t+".debugger.last-typed-key",value:this.hVt}]}]}}}{const Hu=self.ks,qu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Hu.gq.Keyboard.pq={KJt(t){return this.sVt.has(t)},lVt(t){return this.iVt===t},uVt(){return!0},dVt(){return!0},pVt(t){return this.iVt===t},$Jt(t){return t=Math.floor(t),this.sVt.has(t)},fVt(t){return this.iVt===t},gVt(t){return this.iVt===t},cVt(t){const s=qu[t];return this.eVt===s},mVt(t){const s=qu[t];return this.eVt===s},MVt(t){const s=qu[t];return this.tVt.has(s)},wVt(){return this.rVt},SVt(){return!0},TVt(){return!0}}}{const Zu=self.ks;Zu.gq.Keyboard.ert={async bVt(s){if(this.rVt){let t=[];s&&(t=s.split(","));const i=await this.evt("lock-keyboard",{keysArr:t});i.isOk?this.Ij(Zu.gq.Keyboard.pq.SVt):this.Ij(Zu.gq.Keyboard.pq.TVt)}},xVt(){this.rVt&&this.evt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Xu=self.ks;Xu.gq.Keyboard.hrt={vVt(){return this.iVt},yVt(t){return s(t)},CVt(){return this.hVt}}}{const Ku=self.ks,$u=[];Ku.gq.Audio=class extends Ku.txt{constructor(t){super(t)}IVt(t){$u.push(t)}static async GVt(){await Promise.all($u),Ku.Qn($u)}mr(){super.mr()}}}{let s=function(){return i.DP().CB()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const tl=self.ks,sl=self.Ys;tl.gq.Audio.yGt=class extends tl.jxt{constructor(t){super(t)}mr(){super.mr()}vxt(){}Cxt(){return self._Vt}};let i=null;self._Vt=class extends self.NP{constructor(t){super(t),i=t}get EVt(){return t().GetAudioContextExtern()}get AVt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().DVt()}set isSilent(t){s().NVt(t)}get masterVolume(){return s().LVt()}set masterVolume(t){sl.Se(t),s().OVt(t)}RVt(){s().PVt()}}}{const il=self.ks,el=["interactive","balanced","playback"];il.gq.Audio.Instance=class extends il.Qxt{constructor(t,s){super(t,"audio"),this.kVt=0,this.FVt=[],this.jVt=!0,this.BVt=0,this.zVt=0,this.UVt=!1,this.WVt=1,this.QVt=1,this.JVt=[this.gf.AY()/2,this.gf.DY()/2,600],this.VVt=[0,0,-1],this.YVt=[0,1,0],this.HVt=600,this.qVt=1e4,this.ZVt=1,this.XVt=null,this.KVt=-1,this.$Vt=1,this.tYt=!1,this.sYt=0,this.iYt="suspended",this.eYt=0,this.hYt=new Map,this.rYt=0,this.nYt=0,this.oYt=new Map,this.aYt=new Map;let i="interactive";s&&(this.BVt=s[0],this.zVt=s[1],this.UVt=s[2],i=el[s[3]],this.jVt=s[4],this.WVt=s[5],this.QVt=s[6],this.JVt[2]=s[7],this.HVt=s[8],this.qVt=s[9],this.ZVt=s[10]),this.uYt=[],this.lYt=[],this.cYt=[],this.svt([["state",t=>this.fYt(t)],["audiocontext-state",t=>this.dYt(t)],["fxstate",t=>this.pYt(t)],["trigger",t=>this.mYt(t)],["buffer-metadata",t=>this.gYt(t)]]);const e=this.K4().qf(),h=(this.G0=new il.v0(il.M0.x0(e,"instancedestroy",t=>this.yYt(t.PB)),il.M0.x0(e,"afterload",()=>this.UZ()),il.M0.x0(e,"suspend",()=>this.MYt()),il.M0.x0(e,"resume",()=>this.wYt())),this.gf.kR()),r="Safari"===il.ai.fi,n=this.gf.UFt()||"macos-wkwebview"===h,o=this.gf.NO().HQ(),a="playable-ad-single-file"===this.gf.kR(),u=r||n||o||a;this.gf.J4(this.evt("create-audio-context",{preloadList:this.gf.NO().C8().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.BVt,latencyHint:i,panningModel:this.WVt,distanceModel:this.QVt,refDistance:this.HVt,maxDistance:this.qVt,rolloffFactor:this.ZVt,listenerPos:this.JVt,usePlayMusicAsSoundWorkaround:u}).then(t=>{this.sYt=t.sampleRate,this.iYt=t.audioContextState,this.eYt=t.outputLatency})),this.uvt()}mr(){this.XVt=null,super.mr()}SYt(t){return this.jVt?t.split(" ").filter(t=>!!t):t?[t]:[]}TYt(s,t){for(const i of t){let t=!1;for(const e of s)if(il.Mh(e,i)){t=!0;break}if(!t)return!1}return!0}bYt(t,s){return this.TYt(t,this.SYt(s))}IVt(t){this.OP().IVt(t)}yYt(t){this.XVt===t&&(this.XVt=null)}xYt(t){return Math.pow(10,t/20)}vYt(t){const s=this.xYt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}CYt(t){return Math.log(t)/Math.log(10)*20}IYt(t){return this.CYt(Math.max(Math.min(t,1),0))}MYt(){this.UVt||this.ivt("set-suspended",{isSuspended:!0})}wYt(){this.UVt||this.ivt("set-suspended",{isSuspended:!1})}fYt(t){const s=t.tickCount,i=(this.eYt=t.outputLatency,this.uYt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.uYt=t.audioInstances,this.cYt=t.analysers,0<i.length&&il.Kh(this.uYt,i)}gYt(t){this.oYt.set(t.originalUrl,{duration:t.duration})}dYt(t){this.iYt=t.audioContextState}drt(){return this.gf.F3t()?"running":this.iYt}pYt(t){this.lYt=t.fxstate}GYt(t){const s=this.SYt(t);for(const i of this.uYt)if(this.TYt(i.tags,s))return i;return null}_Yt(t){const s=this.SYt(t);return this.uYt.some(t=>this.TYt(t.tags,s)&&t.isPlaying)}EYt(t,s,i,e,h){if(this._Yt(s))return null;const r=this.oYt.get(t),n={tags:this.SYt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.uYt.push(n),n}AYt(t){const s=this.SYt(t);for(const i of this.uYt)this.TYt(i.tags,s)&&(i.isPlaying=!1)}async mYt(t){const s=t.type,i=(this.FVt=t.tags,t.aiid);if("ended"===s){for(const e of this.uYt)if(e.aiid===i){e.isPlaying=!1;break}await this._j(il.gq.Audio.pq.DYt)}else"fade-ended"===s&&await this._j(il.gq.Audio.pq.NYt)}LYt(t){return this.bYt(this.FVt,t)}jX(){const t={timeScale:this.gf.F3(),gameTime:this.gf.RFt(),instPans:this.OYt(),tickCount:this.gf.PFt()};if(this.XVt){const s=this.XVt.D4();this.JVt[0]=s.wT(),this.JVt[1]=s.bT(),t.listenerPos=this.JVt,t.listenerOrientation=[...this.VVt,...this.YVt]}this.ivt("tick",t)}RYt(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,u=t*n,l=s*n;t=u-a,s=l+o,t+=e,s+=h}return[t,s]}OYt(){return this.uYt.filter(t=>-1!==t.uid).map(t=>this.gf.I4(t.uid)).filter(t=>t).map(t=>{const s=t.D4(),i=s.N4().fk(),[e,h]=this.RYt(s.wT(),s.bT(),-i,this.JVt[0],this.JVt[1]);return{uid:t.$F(),x:e,y:h,z:s.a5(),angle:s.fk()-i}})}PYt(t,s){for(const i of this.cYt)if(i.index===s&&il.Mh(i.tag,t))return i;return null}kYt(t){for(const s of this.SYt(t)){const i=s.toLowerCase();this.hYt.set(i,(this.hYt.get(i)||0)+1)}}DVt(){return this.tYt}NVt(t){this.tYt!==(t=!!t)&&(this.tYt=t,this.ivt("set-silent",{isSilent:t}))}LVt(){return this.$Vt}OVt(t){this.$Vt!==t&&(this.$Vt=t,this.ivt("set-master-volume",{vol:t}))}PVt(){this.ivt("stop-all");for(const t of this.uYt)t.isPlaying=!1}FYt(t){return!t.hasOwnProperty("placeholder")&&3!==this.zVt&&!(t.isMusic&&1===this.zVt||!t.isMusic&&2===this.zVt)}NT(){return{isSilent:this.tYt,masterVolume:this.$Vt,listenerZ:this.JVt[2],listenerForwardVec:this.VVt,listenerUpVec:this.YVt,listenerUid:this.XVt?this.XVt.$F():-1,remoteUrls:[...this.aYt.entries()],playing:this.uYt.filter(t=>this.FYt(t)),effects:this.lYt,analysers:this.cYt}}LT(t){if(this.tYt=t.isSilent,this.$Vt=t.masterVolume,this.JVt[2]=t.listenerZ,this.XVt=null,this.KVt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.VVt=t.listenerForwardVec:this.VVt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.YVt=t.listenerUpVec:this.YVt=[0,1,0],this.aYt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.aYt.set(s,i);this.uYt=t.playing;for(const e of this.uYt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.lYt=t.effects,this.cYt=t.analysers}UZ(){if(-1!==this.KVt&&(this.XVt=this.gf.I4(this.KVt),this.KVt=-1,this.XVt)){const t=this.XVt.D4();this.JVt[0]=t.wT(),this.JVt[1]=t.bT()}for(const s of this.uYt){const i=this.gf.NO().v8(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.lYt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.gf.NO().v8(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.ivt("load-state",{saveLoadMode:this.zVt,timeScale:this.gf.F3(),gameTime:this.gf.RFt(),listenerPos:this.JVt,listenerOrientation:[...this.VVt,...this.YVt],isSilent:this.tYt,masterVolume:this.$Vt,playing:this.uYt.filter(t=>null!==t.bufferUrl),effects:this.lYt})}dvt(){const t=[];for(const[i,e]of Object.entries(this.lYt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.uYt.length},...this.uYt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const hl=self.ks;hl.gq.Audio.pq={DYt(t){return this.LYt(t)},NYt(t){return this.LYt(t)},jYt(){return this.nYt===this.rYt},BYt(){return!0},zYt(){return this.DVt()},UYt(){for(const t of this.uYt)if(t.isPlaying)return!0;return!1},WYt(t){return this._Yt(t)}}}{const E=self.ks,rl=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];E.gq.Audio.ert={Play(t,s,i,e,h){const r=E.gq.Audio.ert.QYt.call(this,t,s,i,e,h);return this.IVt(r),r},prt(t,s,i,e){E.gq.Audio.ert.QYt.call(this,t,0,s,0,i,e)},async QYt(t,s,i,e,h,r){if(!this.tYt){const n=t[1],o=this.gf.NO().v8(t[0]);if(o){const a=this.kVt,u=(this.kVt=0,this.EYt(t[0],h,n,0!==s,this.vYt(i)));try{await this.evt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.SYt(h),isLooping:0!==s,vol:this.vYt(i),stereoPan:E.Tr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{u&&(u.placeholder=this.gf.PFt())}}}},async JYt(t,s,i,e,h,r,n,o,a,u,l){if(!this.tYt){const c=t[1],f=this.gf.NO().v8(t[0]);if(f){const d=this.kVt,p=(this.kVt=0,this.EYt(t[0],l,c,0!==s,this.vYt(i)));try{await this.evt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.SYt(l),isLooping:0!==s,vol:this.vYt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:E.vr(n),innerAngle:E.vr(o),outerAngle:E.vr(a),outerGain:this.vYt(u)}})}finally{p&&(p.placeholder=this.gf.PFt())}}}},async VYt(t,s,i,e,h,r,n,o){if(!this.tYt&&e){const a=e.HTt();if(a&&a.D4()){const u=a.D4(),l=u.N4().fk(),[c,f]=this.RYt(u.wT(),u.bT(),-l,this.JVt[0],this.JVt[1]),d=t[1],p=this.gf.NO().v8(t[0]);if(p){const m=this.kVt,g=(this.kVt=0,this.EYt(t[0],o,d,0!==s,this.vYt(i)));try{await this.evt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.SYt(o),isLooping:0!==s,vol:this.vYt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:u.a5(),angle:u.fk()-l,innerAngle:E.vr(h),outerAngle:E.vr(r),outerGain:this.vYt(n),uid:a.$F()}})}finally{g&&(g.placeholder=this.gf.PFt())}}}}},async YYt(t,s,i,e,h,r){if(!this.tYt){const n=1===t,o=this.gf.NO().v8(s)||this.aYt.get(s.toLowerCase());if(o){const a=this.kVt,u=(this.kVt=0,this.EYt(s,r,n,0!==i,this.vYt(e)));try{await this.evt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.SYt(r),isLooping:0!==i,vol:this.vYt(e),stereoPan:E.Tr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{u&&(u.placeholder=this.gf.PFt())}}}},async HYt(t,s,i,e,h,r,n,o,a,u,l,c){if(!this.tYt){const f=1===t,d=this.gf.NO().v8(s)||this.aYt.get(s.toLowerCase());if(d){const p=this.kVt,m=(this.kVt=0,this.EYt(s,c,f,0!==i,this.vYt(e)));try{await this.evt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.SYt(c),isLooping:0!==i,vol:this.vYt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:E.vr(o),innerAngle:E.vr(a),outerAngle:E.vr(u),outerGain:this.vYt(l)}})}finally{m&&(m.placeholder=this.gf.PFt())}}}},async qYt(t,s,i,e,h,r,n,o,a){if(!this.tYt&&!this.tYt&&h){const u=h.HTt();if(u&&u.D4()){const l=u.D4(),c=l.N4().fk(),[f,d]=this.RYt(l.wT(),l.bT(),-c,this.JVt[0],this.JVt[1]),p=1===t,m=this.gf.NO().v8(s)||this.aYt.get(s.toLowerCase());if(m){const g=this.kVt,y=(this.kVt=0,this.EYt(s,a,p,0!==i,this.vYt(e)));try{await this.evt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.SYt(a),isLooping:0!==i,vol:this.vYt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:l.a5(),angle:l.fk()-c,innerAngle:E.vr(r),outerAngle:E.vr(n),outerGain:this.vYt(o),uid:u.$F()}})}finally{y&&(y.placeholder=this.gf.PFt())}}}}},ZYt(t,s){this.ivt("set-looping",{tags:this.SYt(t),isLooping:0===s})},XYt(t,s){this.ivt("set-muted",{tags:this.SYt(t),isMuted:0===s})},crt(t,s){this.ivt("set-volume",{tags:this.SYt(t),vol:this.vYt(s)})},KYt(t,s,i,e){this.ivt("fade-volume",{tags:this.SYt(t),vol:this.vYt(s),duration:i,stopOnEnd:0===e})},$Yt(t,s){this.ivt("set-stereo-pan",{tags:this.SYt(t),p:E.Tr(s/100,-1,1)})},async tHt(t){const s=t[1],i=this.gf.NO().v8(t[0]);i&&(this.rYt++,await this.evt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.nYt++)},async sHt(t,s){const i=1===t,e=this.gf.NO().v8(s)||this.aYt.get(s.toLowerCase());e&&(this.rYt++,await this.evt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.nYt++)},Wz(t,s){this.ivt("set-playback-rate",{tags:this.SYt(t),rate:Math.max(s,0)})},Lz(t){this.AYt(t),this.ivt("stop",{tags:this.SYt(t)})},iHt(){this.PVt()},eHt(t,s){this.ivt("set-paused",{tags:this.SYt(t),paused:0===s})},hHt(t,s){this.ivt("seek",{tags:this.SYt(t),pos:s})},rHt(t){2===t&&(t=this.DVt()?1:0),this.NVt(0===t)},nHt(t){const s=this.vYt(t);this.OVt(s)},oHt(t,s,i,e,h,r,n){const o=rl[s];this.kYt(t),this.ivt("add-effect",{type:"filter",tags:this.SYt(t),params:[o,i,e,h,r,E.Tr(n/100,0,1)]})},aHt(t,s,i,e){this.kYt(t),this.ivt("add-effect",{type:"delay",tags:this.SYt(t),params:[s,this.vYt(i),E.Tr(e/100,0,1)]})},uHt(t,s,i,e,h,r){this.kYt(t),this.ivt("add-effect",{type:"flanger",tags:this.SYt(t),params:[s/1e3,i/1e3,e,h/100,E.Tr(r/100,0,1)]})},lHt(t,s,i,e,h,r,n){this.kYt(t),this.ivt("add-effect",{type:"phaser",tags:this.SYt(t),params:[s,i,e,h,r,E.Tr(n/100,0,1)]})},cHt(t,s,i,e){const h=this.gf.NO().v8(s[0]);h&&(this.kYt(t),this.ivt("add-effect",{type:"convolution",tags:this.SYt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,E.Tr(e/100,0,1)]}))},fHt(t,s){this.kYt(t),this.ivt("add-effect",{type:"gain",tags:this.SYt(t),params:[this.vYt(s)]})},dHt(t,s){this.kYt(t),this.ivt("add-effect",{type:"stereopan",tags:this.SYt(t),params:[E.Tr(s/100,-1,1)]})},pHt(t){this.kYt(t),this.ivt("add-effect",{type:"gain",tags:this.SYt(t),params:[0]})},mHt(t,s,i){this.kYt(t),this.ivt("add-effect",{type:"tremolo",tags:this.SYt(t),params:[s,E.Tr(i/100,0,1)]})},gHt(t,s,i){this.kYt(t),this.ivt("add-effect",{type:"ringmod",tags:this.SYt(t),params:[s,E.Tr(i/100,0,1)]})},yHt(t,s,i,e,h,r){this.kYt(t),this.ivt("add-effect",{type:"distortion",tags:this.SYt(t),params:[this.xYt(s),this.xYt(i),e,this.xYt(h),E.Tr(r/100,0,1)]})},MHt(t,s,i,e,h,r){this.kYt(t),this.ivt("add-effect",{type:"compressor",tags:this.SYt(t),params:[s,i,e,h/1e3,r/1e3]})},wHt(t,s,i){this.kYt(t),this.ivt("add-effect",{type:"analyser",tags:this.SYt(t),params:[s,i]})},SHt(t){const s=this.SYt(t);for(const i of s)this.hYt.set(i.toLowerCase(),0);this.ivt("remove-effects",{tags:s}),this.lYt={}},VB(t,s,i,e,h,r){this.ivt("set-effect-param",{tags:this.SYt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},THt(t){if(t){const s=t.HTt();s&&s.D4()&&(this.XVt=s)}},bHt(t){this.JVt[2]=t},xHt(t,s,i,e,h,r){this.VVt[0]=t,this.VVt[1]=s,this.VVt[2]=-i,this.YVt[0]=e,this.YVt[1]=h,this.YVt[2]=-r},vHt(t){this.kVt=Math.max(t,0)},CHt(t){const s=t[1],i=this.gf.NO().v8(t[0]);i&&this.ivt("unload",{url:i.url,type:i.type,isMusic:s})},IHt(t,s){const i=1===t,e=this.gf.NO().v8(s)||this.aYt.get(s.toLowerCase());e&&this.ivt("unload",{url:e.url,type:e.type,isMusic:i})},GHt(){this.ivt("unload-all")},_Ht(t,s,i){this.aYt.set(i.toLowerCase(),{url:t,type:s})}}}{const nl=self.ks;nl.gq.Audio.hrt={EHt(t){const s=this.GYt(t);return s?s.duration:0},ort(t){const s=this.GYt(t);return s?s.playbackTime:0},frt(t){const s=this.GYt(t);return s?s.playbackRate:0},art(t){const s=this.GYt(t);return s?this.IYt(s.volume):0},AHt(){return this.IYt(this.LVt())},DHt(t){return this.hYt.get(t.toLowerCase())||0},NHt(t,s){const i=this.PYt(t,Math.floor(s));return i?i.binCount:0},LHt(t,s,i){const e=this.PYt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},OHt(t,s){const i=this.PYt(t,Math.floor(s));return i?i.peak:0},RHt(t,s){const i=this.PYt(t,Math.floor(s));return i?i.rms:0},PHt(){return this.sYt},kHt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},FHt(){return this.eYt},jHt(t,s){return 0==(t=nl.Tr(+t,0,100)/100)?-1/0:t<.1?this.IYt(nl.Ot(0,this.vYt(s),10*t)):nl.Ot(s,0,(t-.1)/.9)}}}{const ol=self.ks;ol.gq.Text=class extends ol.txt{constructor(t){super(t)}mr(){super.mr()}}}{const al=self.ks;al.gq.Text.yGt=class extends al.jxt{constructor(t){super(t)}mr(){super.mr()}vxt(){}R9(t){}z9(){}}}{const ul=self.ks,ll=self.Ys,cl=[0,0,0],fl=["left","center","right"],dl=["top","center","bottom"],pl=["ltr","rtl"],ml=["word","cjk","character"],gl=new ul.Rect,yl=new ul.nl,Ml=new ul.qo,wl=ul.pr(ul.nu),Sl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),A=(ul.gq.Text.Instance=class extends ul.Mvt{constructor(t,s){if(super(t),this.yf="",this.BHt=!0,this.zHt="Arial",this.UHt=12,this.WHt=0,this.QI=!1,this.JI=!1,this.rT=ul.pr(ul.qo),this.XI=0,this.KI=0,this.sG="word",this.iG=0,this.QHt="auto",this.JHt=1,this.VHt=null,this.YHt="",this.HHt=!1,this.qHt=!1,this.ZHt=null,this.XHt=-1,this.KHt=-1,this.$Ht=0,this.t7t=ul.pr(ul.yy._S,this.gf.US(),{timeout:5}),this.t7t.EG=()=>this.gf.j4(),this.s7t=()=>this.i7t(),this.e7t=!1,s){this.yf=s[0],this.BHt=!!s[1],this.zHt=s[2],this.UHt=s[3],this.WHt=s[4],this.QI=!!s[5],this.JI=!!s[6],this.XI=s[8],this.KI=s[9],this.sG=ml[s[10]],this.iG=s[11],this.h7t(this.gf.BU(s[12]));const i=s[7];this.rT.ia(i[0],i[1],i[2]),this.D4().Hk(s[13]),this.qHt=!!s[15]}this.r7t(),this.n7t()}mr(){this.h7t(null),this.o7t(),this.ZHt&&(this.ZHt.mr(),this.ZHt=null),this.t7t.mr(),this.t7t=null,super.mr()}r7t(){const t=this.t7t;t.Sf(this.yf),t.LG(this.BHt),this.t7t.kI()&&this.VHt?this.t7t.gm(this.K4().YFt(this.VHt)):this.t7t.gm(null),t.OG("nearest"!==this.gf.ZO()),t.PG(this.zHt),t.BG(this.WHt),t.UG(this.QI),t.QG(this.JI),t.uT(this.rT),t.XG(fl[this.XI]),t.$G(dl[this.KI]),t.s_(this.sG),t.e_(pl[this.iG])}a7t(){let t=this.D4(),s=(this.t7t.kG(this.UHt),this.t7t.jG(t.hDt()),t.N4()),i;"auto"===this.QHt?i=s.SH(t.a5()):"fixed"===this.QHt&&(i=this.JHt),t.yB()&&i!==this.t7t.o_()&&t.oNt(!0),this.t7t.n_(t.Mm(),t.Em(),i)}h7t(t){t&&(t.KV()||t.OP().constructor!==ul.gq.Bht)||t!==this.VHt&&(this.VHt&&this.VHt.qf().removeEventListener("animationframeimagechange",this.s7t),this.VHt=t,this.VHt&&this.VHt.qf().addEventListener("animationframeimagechange",this.s7t),this.r7t(),this.HHt=!1,this.gf.j4())}i7t(){this.gf.HFt(this.VHt),this.gf.j4(),this.e7t=!0}n7t(){if(this.qHt){let t=this.yf;this.BHt&&(t=ul.Nh.am(t)),this.ZHt?this.ZHt.Sf(t):this.ZHt=ul.pr(ul.mf,this.gf,t)}else this.ZHt&&(this.ZHt.mr(),this.ZHt=null)}a2(t){const s=this.D4(),i=(this.a7t(),this.e7t&&(this.e7t=!1,this.t7t.kI())&&this.VHt&&this.t7t.gm(this.K4().YFt(this.VHt)),this.t7t.Fb());if(i){const e=s.N4();if(0===s.fk()&&0===e.fk()&&0===s.a5()&&!s.yB()&&e.jY()){const h=s.f5(),[r,n]=e.OF(h.ln(),h.cn()),[o,a]=e.OF(h.mn(),h.gn()),u=r-Math.round(r),l=n-Math.round(n),[c,f]=(gl.set(r,n,o,a),gl.offset(-u,-l),yl.Gl(gl),t.sD(t.SD()));this.gf.zR().YW(t,c,f),t.zA(i),t.jw(yl,this.t7t.k_()),e.qW(t)}else t.zA(i),s.yB()?this.SUt(s,t):this.TUt(s,t)}}TUt(t,s){let i=t.f5();this.gf.KO()&&(i=this.u7t(i)),s.jw(i,this.t7t.k_())}SUt(s,t){const i=s.nNt();if(s.aNt()){s.jDt(gl,yl,!1);let t=yl;this.gf.KO()&&(t=this.u7t(t)),i.o2(s.MB(),t,this.t7t.k_()),s.oNt(!1)}i.a2(t)}u7t(t){const s=t.ln()-Math.round(t.ln()),i=t.cn()-Math.round(t.cn());return 0==s&&0==i?t:(yl.I(t),yl.offset(-s,-i),yl)}Gvt(){const t=this.t7t.Fb();return t?[t.Mm(),t.Em()]:[100,100]}_vt(){return this.t7t.k_()}Dvt(){return!1}NT(){const t={t:this.yf,c:this.rT.toJSON(),fn:this.zHt,ps:this.UHt};return this.BHt&&(t.bbc=this.BHt),0!==this.XI&&(t.ha=this.XI),0!==this.KI&&(t.va=this.KI),"word"!==this.sG&&(t.wr=this.sG),0!==this.WHt&&(t.lho=this.WHt),this.QI&&(t.b=this.QI),this.JI&&(t.i=this.JI),-1!==this.KHt&&(t.tw={st:this.XHt,en:this.KHt,l:this.$Ht}),this.VHt&&(t.ioc=this.VHt.nY()),"fixed"===this.QHt&&(t.fs=this.JHt),t}LT(t){if(this.o7t(),this.yf=t.t,this.rT.qa(t.c),this.zHt=t.fn,this.UHt=t.ps,this.BHt=!!t.hasOwnProperty("bbc")&&t.bbc,this.XI=t.hasOwnProperty("ha")?t.ha:0,this.KI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.sG="boolean"==typeof s?s?"word":"character":s}else this.sG="word";if(this.WHt=t.hasOwnProperty("lho")?t.lho:0,this.QI=!!t.hasOwnProperty("b")&&t.b,this.JI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.XHt=i.st,this.KHt=i.en,this.$Ht=i.l}if(t.hasOwnProperty("ioc")){const e=this.K4().BU(t.ioc);e&&this.h7t(e)}else this.h7t(null);t.hasOwnProperty("fs")?(this.QHt="fixed",this.JHt=t.fs):this.QHt="auto",this.r7t(),this.n7t(),this.HHt=!1,-1!==this.KHt&&this.uvt()}zrt(t){switch(t){case 0:return this.r_();case 1:return this.BHt;case 2:return this.l7t();case 3:return this.c7t();case 4:return this.f7t();case 5:return this.d7t();case 6:return this.p7t();case 7:return cl[0]=this.rT.fa(),cl[1]=this.rT.ma(),cl[2]=this.rT.ga(),cl;case 8:return this.m7t();case 9:return this.g7t();case 10:return this.y7t();case 15:return this.M7t()}}Yrt(t,s){switch(t){case 0:this.w7t(s);break;case 1:this.BHt!==!!s&&(this.BHt=!!s,this.r7t());break;case 2:this.S7t(s);break;case 3:this.T7t(s);break;case 4:this.b7t(s);break;case 5:this.x7t(s);break;case 6:this.v7t(s);break;case 7:const i=this.rT,e=s;i.fa()===e[0]&&i.ma()===e[1]&&i.ga()===e[2]||(this.rT.ia(e[0],e[1],e[2]),this.r7t());break;case 8:this.C7t(s);break;case 9:this.I7t(s);break;case 10:this.G7t(s)}}pvt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.rT.ea(s,i,e),this.r7t())}w7t(t){this.yf!==t&&(this.yf=t,this.t7t.Sf(t),this.n7t(),this.HHt=!1,this.gf.j4())}r_(){return this.yf}_7t(t,s){this.a7t(),this.w7t(t),this.XHt=this.gf.P3(),this.KHt=this.XHt+s/this.s6().hj(),this.$Ht=this.t7t.c_(),this.t7t.VG(0),this.uvt()}o7t(){this.XHt=-1,this.KHt=-1,this.$Ht=0,this.t7t.VG(-1),this.Yxt()}E7t(){-1!==this.KHt&&(this.o7t(),this.Ij(ul.gq.Text.pq.A7t),this.gf.j4())}S7t(t){this.zHt!==t&&(this.zHt=t,this.t7t.PG(t),this.gf.j4())}l7t(){return this.zHt}x7t(t){this.QI!==(t=!!t)&&(this.QI=t,this.t7t.UG(t),this.gf.j4())}d7t(){return this.QI}v7t(t){this.JI!==(t=!!t)&&(this.JI=t,this.t7t.QG(t),this.gf.j4())}p7t(){return this.JI}T7t(t){this.UHt!==t&&(this.UHt=t,this.gf.j4())}c7t(){return this.UHt}D7t(t){this.rT.Ta(t)||(this.rT.ca(t),this.t7t.uT(this.rT),this.gf.j4())}N7t(){return this.rT}b7t(t){this.WHt!==t&&(this.WHt=t,this.r7t(),this.gf.j4())}f7t(){return this.WHt}C7t(t){this.XI!==t&&(this.XI=t,this.r7t(),this.gf.j4())}m7t(){return this.XI}I7t(t){this.KI!==t&&(this.KI=t,this.r7t(),this.gf.j4())}g7t(){return this.KI}L7t(t){this.G7t(ml[t])}G7t(t){this.sG!==t&&(this.sG=t,this.r7t(),this.gf.j4())}y7t(){return this.sG}O7t(t){this.iG!==t&&(this.iG=t,this.r7t(),this.gf.j4())}R7t(){return this.iG}P7t(t){this.qHt=!!t,this.n7t()}M7t(){return this.qHt}k7t(t){this.QHt!==t&&(this.QHt=t,this.gf.j4())}F7t(){return this.QHt}j7t(t){this.JHt!==t&&(this.JHt=t,"fixed"===this.QHt)&&this.gf.j4()}B7t(){return this.JHt}z7t(){return this.a7t(),this.t7t.a_()}U7t(){return this.a7t(),this.t7t.l_()}W7t(t,s){this.a7t();const i=this.D4(),e=(wl.set(t-i.wT(),s-i.bT()),wl.rotate(-i.fk()),wl.offset(i.Mm()*i.pz(),i.Em()*i.gz()),wl.It(i.Mm(),i.Em()),wl.scale(this.t7t.Mm(),this.t7t.Em()),this.t7t.d_(wl.cu(),wl.du()));if(e){const h=e.yg("tag");if(h)return h.param}return""}Q7t(t,s,i){const e=this.W7t(s,i);return e&&ul.Mh(t,e)}J7t(t,s){this.a7t(),s=Math.floor(s);const i=this.t7t.m_(t,s);if(!i)return null;const e=this.D4(),h=this.t7t.qG(),r=i.fg(),n=i.pg()-(i.Em()-i.Dm())*h,o=i.Mm()*h/this.t7t.Mm()*e.Mm(),a=i.Em()*h/this.t7t.Em()*e.Em();return wl.set(r,n),wl.It(this.t7t.Mm(),this.t7t.Em()),wl.scale(e.Mm(),e.Em()),wl.offset(-e.Mm()*e.pz(),-e.Em()*e.gz()),wl.rotate(e.fk()),wl.offset(e.wT(),e.bT()),{x:wl.cu(),y:wl.du(),width:o,height:a}}V7t(t){return this.a7t(),this.t7t.g_(t)}Y7t(t){let s=Sl.get(t);return null===s?"":`</${s||"span"||"span"}>`}H7t(t,s){let i=Sl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async q7t(){if(!this.HHt){let t=new ul.Nh(this.yf,{zp:!0}).Kp(),s=new Map,h='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.l7t()}';`),this.d7t()&&i.push("font-weight: bold;"),this.p7t()&&i.push("font-style: italic;"),"character"===this.y7t()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.VHt?this.K4().YFt(this.VHt):null);if(this.VHt){const o=ul.pr(ul.T1),a=[],u=new Map;for(const c of t)if(c.Gm()){const f=c.xg(r);if(f){const d=f.ny(),p=d.lz().tIt();u.has(p)||(u.set(p,null),a.push(o.Sc(async()=>{const t=await p.J8();u.set(p,t)})))}}await Promise.all(a);const l=[];for(const m of t)if(m.Gm()){const g=m.xg(r);if(g){const y=g.ny(),M=y.lz().tIt();l.push(o.Sc(async()=>{const t=await y.lz().iIt(u.get(M));s.set(g,t)}))}}await Promise.all(l);for(const w of u.values())w instanceof ImageBitmap&&w.close&&w.close()}const n=new Map;for(const S of t){let e=S.wg(),t=[...n.keys()];t.reverse();for(const T of t)e.has(T)&&e.get(T)===n.get(T)||(n.delete(T),h+=this.Y7t(T));for(const[b,x]of e)n.has(b)||(n.set(b,x),h+=this.H7t(b,x));if(S.Cm()&&(h+=ul.op(ul.rp(S.Wm().join("")),"\n","<br>")),S.Gm()&&r){const v=S.xg(r);if(v){const C=s.get(v);if(C){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.gf.ZO()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${S.bg()}" width="${v.Mm()}" height="${v.Em()}" style="${t.join(";")}" src="${C}">`}}}}const e=[...n.keys()];e.reverse();for(const I of e)h+=this.Y7t(I);h+="</span>",this.YHt=h,this.HHt=!0}return this.YHt}jX(){const s=this.gf.P3();if(s>=this.KHt)this.o7t(),this.Ij(ul.gq.Text.pq.A7t),this.gf.j4();else{let t=ul.jr(this.XHt,this.KHt,s,0,this.$Ht);(t=Math.floor(t))!==this.t7t.YG()&&(this.t7t.VG(t),this.gf.j4())}}dvt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.r_(),ZUt:t=>this.w7t(t)},{name:t+".properties.font.name",value:this.l7t(),ZUt:t=>this.S7t(t)},{name:t+".properties.size.name",value:this.c7t(),ZUt:t=>this.T7t(t)},{name:t+".properties.line-height.name",value:this.f7t(),ZUt:t=>this.b7t(t)},{name:t+".properties.bold.name",value:this.d7t(),ZUt:t=>this.x7t(t)},{name:t+".properties.italic.name",value:this.p7t(),ZUt:t=>this.v7t(t)}]}]}Cxt(){return self.Z7t}},new WeakMap),Tl=new Map([["left",0],["center",1],["right",2]]),bl=new Map([["top",0],["center",1],["bottom",2]]),xl=["ltr","rtl"];new Set(["auto","fixed"]);self.Z7t=class extends self.SB{constructor(){super(),A.set(this,self.kF.UF().CB())}get text(){return A.get(this).r_()}set text(t){ll.Ce(t);const s=A.get(this);s.o7t(),s.w7t(t)}X7t(t,s){ll.Ce(t),ll.Se(s);const i=A.get(this);i.o7t(),i._7t(t,s)}K7t(){A.get(this).E7t()}set KW(t){ll.Ce(t),A.get(this).S7t(t)}get KW(){return A.get(this).l7t()}set tQ(t){A.get(this).x7t(t)}get tQ(){return A.get(this).d7t()}set sQ(t){A.get(this).v7t(t)}get sQ(){return A.get(this).p7t()}set $W(t){ll.Se(t),A.get(this).T7t(t)}get $W(){return A.get(this).c7t()}set $7t(t){if(ll.Be(t),t.length<3)throw new Error("expected 3 elements");Ml.ia(t[0],t[1],t[2]),A.get(this).D7t(Ml)}get $7t(){const t=A.get(this).N7t();return[t.fa(),t.ma(),t.ga()]}set lineHeight(t){ll.Se(t),A.get(this).b7t(t)}get lineHeight(){return A.get(this).f7t()}set hQ(t){ll.Ce(t);const s=Tl.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).C7t(s)}get hQ(){return fl[A.get(this).m7t()]}set verticalAlign(t){ll.Ce(t);const s=bl.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).I7t(s)}get verticalAlign(){return dl[A.get(this).g7t()]}set rQ(t){if(!ml.includes(t))throw new Error("invalid mode");A.get(this).G7t(t)}get rQ(){return A.get(this).y7t()}set nQ(t){ll.Ce(t);const s=xl.indexOf(t);if(-1===s)throw new Error("invalid text direction");A.get(this).O7t(s)}get nQ(){return xl[A.get(this).R7t()]}set t9t(t){A.get(this).P7t(!!t)}get t9t(){return A.get(this).M7t()}s9t(t){ll.Se(t);const s=A.get(this);s.k7t("fixed"),s.j7t(t)}i9t(){A.get(this).k7t("auto")}get uQ(){return A.get(this).z7t()}get lQ(){return A.get(this).U7t()}e9t(){const t=A.get(this);return[t.z7t(),t.U7t()]}h9t(t,s,i){return ll.Ce(t),ll.Se(s),ll.Se(i),A.get(this).Q7t(t,s,i)}r9t(t,s){return ll.Se(t),ll.Se(s),A.get(this).W7t(t,s)}n9t(t,s=0){return ll.Ce(t),ll.Se(s),A.get(this).J7t(t,s)}o9t(t){return ll.Ce(t),A.get(this).V7t(t)}a9t(t){const s=A.get(this),i=s.K4().ER(t);s.h7t(i)}u9t(){return A.get(this).q7t()}}}{const vl=self.ks;vl.gq.Text.pq={l9t(t,s){return s?this.yf===t:vl.Mh(this.yf,t)},c9t(){return-1!==this.KHt},A7t(){return!0},f9t(t,s,i){return this.Q7t(t,s,i)}}}{const Cl=self.ks,Il=Cl.pr(Cl.qo);Cl.gq.Text.ert={Sf(t){this.o7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.w7t(t.toString())},d9t(t){this.o7t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.w7t(this.yf+t)},p9t(t,s){this.o7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this._7t(t.toString(),s)},m9t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.zHt&&i===this.QI&&e===this.JI||(this.S7t(t),this.x7t(i),this.v7t(e))},kG(t){this.T7t(t)},g9t(t){Il.Aa(t),Il.Tr(),this.D7t(Il)},y9t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},EWt(t){this.D4().aT(t),this.gf.j4()},M9t(){this.E7t()},BG(t){this.b7t(t)},w9t(t){this.C7t(t)},S9t(t){this.I7t(t)},T9t(t){this.L7t(t)},e_(t){this.O7t(t)},b9t(t){this.h7t(t)},x9t(){return this.q7t()},v9t(t){this.P7t(t)},C9t(t,s){this.k7t(["auto","fixed"][t]),this.j7t(s)}}}{const Gl=self.ks;Gl.gq.Text.hrt={Text(){return this.yf},I9t(){return this.BHt?Gl.Nh.am(this.yf):this.yf},G9t(){return this.zHt},_9t(){return this.UHt},E9t(){return this.z7t()},A9t(){return this.U7t()},D9t(){return this.WHt},N9t(t,s){return this.W7t(t,s)},L9t(t){return this.V7t(t)},O9t(t,s){const i=this.J7t(t,s);return i?i.x:0},R9t(t,s){const i=this.J7t(t,s);return i?i.y:0},P9t(t,s){const i=this.J7t(t,s);return i?i.width:0},k9t(t,s){const i=this.J7t(t,s);return i?i.height:0},F9t(){return this.YHt}}}{const _l=self.ks;_l.Zat.j9t=class extends _l.sCt{constructor(t){super(t),this.B9t=0,this.z9t=0,this.U9t=0,this.W9t=0}mr(){super.mr()}Q9t(t){this.B9t=t}J9t(){return this.B9t}V9t(t){this.z9t=t}Y9t(){return this.z9t}H9t(t){this.U9t=t}q9t(){return this.U9t}Z9t(t){this.W9t=t}X9t(){return this.W9t}}}{const El=self.ks;El.Zat.j9t.yGt=class extends El.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const Al=self.ks;Al.Zat.j9t.Instance=class extends Al.aCt{constructor(t,s){super(t),this.kyt=!0,s&&(this.kyt=s[0]),this.kyt&&this.cvt()}mr(){super.mr()}NT(){const t=this.NB();return{e:this.kyt,smg:t.J9t(),ss:t.Y9t(),se:t.q9t(),smd:t.X9t()}}LT(t){const s=this.NB();s.Q9t(t.smg),s.V9t(t.ss),s.H9t(t.se),s.Z9t(t.smd),this.kyt=t.e,this.kyt?this.cvt():this.Hxt()}N2t(t){this.kyt=!!t,this.kyt?this.cvt():this.Hxt()}hc(){return this.kyt}avt(){if(this.hc()){this.gf.D3(this.vi);let s=this.NB(),t=s.QP(),i=0,e=0,h=0;for(const u of t){const l=u.wEt(Al.Zat.j9t);if(l&&l.CB().hc()){const c=u.D4();i+=c.wT(),e+=c.bT(),++h}}let r=this.vi.D4().f4(),n=this.gf.O3(),o=0,a=0;if(n>=s.Y9t()&&n<s.q9t()){let t=s.J9t()*Math.min(this.gf.F3(),1);0===s.X9t()&&(t*=1-(n-s.Y9t())/(s.q9t()-s.Y9t()));const f=this.gf.o4()*Math.PI*2,d=this.gf.o4()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.dk(i/h+o),r.mk(e/h+a)}}zrt(t){if(0===t)return this.kyt}Yrt(t,s){0===t&&(this.kyt=!!s,this.kyt?this.cvt():this.Hxt())}dvt(){return[{title:"$"+this.RB().nf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.hc(),ZUt:t=>this.N2t(t)}]}]}}}{const Dl=self.ks;Dl.Zat.j9t.pq={hc(){return this.hc()}}}{const Nl=self.ks;Nl.Zat.j9t.ert={K9t(t,s,i){const e=this.NB();e.Q9t(t),e.V9t(this.gf.O3()),e.H9t(this.gf.O3()+s),e.Z9t(i)},Dbt(t){this.N2t(0!==t)}}}{const Ll=self.ks;Ll.Zat.j9t.hrt={}}{const Ol=self.ks;Ol.Zat.$9t=class extends Ol.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const Rl=self.ks;Rl.Zat.$9t.yGt=class extends Rl.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const D=self.ks,Pl=self.Ys,kl=self.AB,i=(D.Zat.$9t.Instance=class extends D.aCt{constructor(t,s){super(t);const i=this.D4(),e=(this.tqt=!1,this.sqt=!1,this.iqt=!1,this.eqt=!1,this.hqt=!1,this.rqt=!1,this.nqt=!1,this.oqt=!1,this.aqt=!1,i.fk());this.uqt=0,this.$o=e,this.lqt=e,this.cqt=i.wT(),this.fqt=i.bT(),this.dqt=e,this.pqt=300,this.mqt=200,this.gqt=300,this.yqt=D.vr(225),this.Mqt=D.vr(185),this.wqt=.4,this.Sqt=!1,this.Tqt=!0,this.bqt=!0,this.kyt=!0,s&&(this.pqt=s[0],this.mqt=s[1],this.gqt=s[2],this.yqt=D.vr(s[3]),this.Mqt=D.vr(s[4]),this.wqt=s[5],this.Sqt=s[6],this.Tqt=!!s[7],this.bqt=!!s[8],this.kyt=!!s[9]),this.kyt&&this.uvt(),this.bqt&&this.xqt()}xqt(){if(!this.G0){const t=this.gf.qf();this.G0=new D.v0(D.M0.x0(t,"keydown",t=>this.nVt(t.data)),D.M0.x0(t,"keyup",t=>this.oVt(t.data)),D.M0.x0(t,"window-blur",()=>this.aVt()),D.M0.x0(t,"keyboard-blur",()=>this.aVt()))}}vqt(){this.G0&&(this.G0.mr(),this.G0=null)}mr(){super.mr()}nVt(t){switch(t.key){case"ArrowLeft":this.iqt=!0;break;case"ArrowUp":this.tqt=!0;break;case"ArrowRight":this.eqt=!0;break;case"ArrowDown":this.sqt=!0}}oVt(t){switch(t.key){case"ArrowLeft":this.iqt=!1;break;case"ArrowUp":this.tqt=!1;break;case"ArrowRight":this.eqt=!1;break;case"ArrowDown":this.sqt=!1}}aVt(){this.tqt=!1,this.sqt=!1,this.iqt=!1,this.eqt=!1}NT(){return{ii:this.hqt,e:this.kyt,s:this.uqt,a:this.$o,m:this.lqt,ms:this.pqt,acc:this.mqt,dec:this.gqt,ss:this.yqt,dr:this.Mqt,f:this.wqt,sa:this.Tqt,dc:this.bqt,lx:this.cqt,ly:this.fqt,la:this.dqt}}LT(t){this.hqt=t.ii,this.N2t(t.e),this.uqt=t.s,this.$o=t.a,this.lqt=t.m,this.pqt=t.ms,this.mqt=t.acc,this.gqt=t.dec,this.yqt=t.ss,this.Mqt=t.dr,this.wqt=t.f,this.Tqt=t.sa,this.bqt=t.dc,this.cqt=t.lx,this.fqt=t.ly,this.dqt=t.la,this.tqt=!1,this.sqt=!1,this.iqt=!1,this.eqt=!1,this.rqt=!1,this.nqt=!1,this.oqt=!1,this.aqt=!1,this.bqt?this.xqt():this.vqt()}jX(){let e=this.gf.D3(this.vi),h=this.D4(),r=this.gf.RO(),n=this.iqt||this.oqt,o=this.eqt||this.aqt,a=this.tqt||this.rqt,u=this.sqt||this.nqt;if(this.oqt=!1,this.aqt=!1,this.rqt=!1,this.nqt=!1,this.kyt){const t=h.fk(),s=(this.Tqt&&t!==this.dqt&&(this.$o=t,this.lqt=t,this.dqt=t),r.xR(this.vi));if(!s||(r.hLt(this.vi,s),r.vLt(this.vi))){if(this.hqt&&(n=!1,o=!1,a=!1,u=!1),a&&!u&&(this.uqt+=this.mqt*e,this.uqt>this.pqt)&&(this.uqt=this.pqt),u&&!a&&(this.uqt-=this.gqt*e,this.uqt<-this.pqt)&&(this.uqt=-this.pqt),u===a&&(0<this.uqt?(this.uqt-=this.gqt*e*.1,this.uqt<0&&(this.uqt=0)):this.uqt<0&&(this.uqt+=this.gqt*e*.1,0<this.uqt)&&(this.uqt=0)),this.uqt<0&&!this.Sqt){const l=n;n=o,o=l}let t=1,s=(this.Sqt||(t=Math.abs(this.uqt)/this.pqt,Number.isFinite(t))||(t=0),n&&!o&&(this.$o=D.br(this.$o-this.yqt*e*t)),o&&!n&&(this.$o=D.br(this.$o+this.yqt*e*t)),this.Mqt*e),i=D.Dr(this.$o,this.lqt);if(i>D.vr(90)&&(s+=i-D.vr(90)),i<=s?this.lqt=D.br(this.$o):D.Lr(this.$o,this.lqt)?this.lqt=D.br(this.lqt+s):this.lqt=D.br(this.lqt-s),this.cqt=h.wT(),this.fqt=h.bT(),0!==this.uqt&&0!==e){h.n5(Math.cos(this.lqt)*this.uqt*e,Math.sin(this.lqt)*this.uqt*e),this.Tqt&&(h.ck(this.$o),this.dqt=this.$o),h.i5();let t=r.xR(this.vi);if(t){r.hLt(this.vi,t),this.uqt=Math.abs(this.uqt),this.lqt=r.CLt(this.vi,this.cqt,this.fqt,null),h.n5(Math.cos(this.lqt)*this.uqt*e,Math.sin(this.lqt)*this.uqt*e),h.i5(),this.uqt*=1-this.wqt,r.TLt(this.vi,Math.cos(this.lqt),Math.sin(this.lqt),Math.max(2.5*this.uqt*e,30))||r.vLt(this.vi,100);const c=h.wT(),f=h.bT(),d=this.pqt*e,p=D._r(this.cqt,this.fqt,c,f);if(1.01*d<p){const m=d/p,g=D.Ot(this.cqt,c,m),y=D.Ot(this.fqt,f,m);h.e5(g,y),h.i5(),r.xR(this.vi)&&!r.vLt(this.vi,2)&&(h.e5(this.cqt,this.fqt),h.i5())}}}else this.Tqt&&h.fk()!==this.$o&&(h.ck(this.$o),this.dqt=this.$o,h.i5(),r.xR(this.vi))&&r.vLt(this.vi,100)}}}zrt(t){switch(t){case 0:return this.Cqt();case 1:return this.Iqt();case 2:return this.Gqt();case 3:return D.Cr(this._qt());case 4:return D.Cr(this.Eqt());case 5:return this.Aqt();case 6:return this.Dqt();case 7:return this.Tqt;case 8:return this.Nqt();case 9:return this.O2t()}}Yrt(t,s){switch(t){case 0:this.Lqt(s);break;case 1:this.Oqt(s);break;case 2:this.Rqt(s);break;case 3:this.Pqt(D.vr(s));break;case 4:this.kqt(D.vr(s));break;case 5:this.Fqt(s);break;case 6:this.jqt(s);break;case 7:this.Tqt=!!s;break;case 8:this.Bqt(!!s);break;case 9:this.N2t(!!s)}}zqt(){this.uqt=0}Uqt(t){this.uqt=D.Tr(t,-this.pqt,this.pqt)}Wqt(){return this.uqt}Lqt(t){this.pqt=Math.max(t,0)}Cqt(){return this.pqt}Oqt(t){this.mqt=Math.max(t,0)}Iqt(){return this.mqt}Rqt(t){this.gqt=Math.max(t,0)}Gqt(){return this.gqt}Qqt(){return this.lqt}Jqt(){return Math.cos(this.lqt)*this.uqt}Vqt(){return Math.sin(this.lqt)*this.uqt}Pqt(t){this.yqt=t}_qt(){return this.yqt}kqt(t){this.Mqt=t}Eqt(){return this.Mqt}Fqt(t){this.wqt=t}Aqt(){return this.wqt}jqt(t){this.Sqt=!!t}Dqt(){return this.Sqt}Yqt(t){if(this.kyt)switch(t){case 0:this.oqt=!0;break;case 1:this.aqt=!0;break;case 2:this.rqt=!0;break;case 3:this.nqt=!0}}Hqt(t){this.hqt=!!t}qqt(){return this.hqt}Bqt(t){this.bqt!==(t=!!t)&&(this.bqt=t,this.bqt?this.xqt():(this.vqt(),this.aVt()))}Nqt(){return this.bqt}N2t(t){this.kyt=!!t,this.kyt?this.uvt():(this.oqt=!1,this.aqt=!1,this.rqt=!1,this.nqt=!1,this.Yxt())}O2t(){return this.kyt}dvt(){const t="behaviors.car";return[{title:"$"+this.RB().nf(),properties:[{name:t+".debugger.speed",value:this.Wqt(),ZUt:t=>this.Uqt(t)},{name:t+".debugger.angle-of-motion",value:D.Cr(this.Qqt()),ZUt:t=>this.lqt=D.vr(t)},{name:t+".debugger.vector-x",value:this.Jqt()},{name:t+".debugger.vector-y",value:this.Vqt()},{name:t+".properties.max-speed.name",value:this.Cqt(),ZUt:t=>this.Lqt(t)},{name:t+".properties.acceleration.name",value:this.Iqt(),ZUt:t=>this.Oqt(t)},{name:t+".properties.deceleration.name",value:this.Gqt(),ZUt:t=>this.Rqt(t)},{name:t+".properties.steer-speed.name",value:D.Cr(this._qt()),ZUt:t=>this.Pqt(D.vr(t))},{name:t+".properties.drift-recover.name",value:D.Cr(this.Eqt()),ZUt:t=>this.kqt(D.vr(t))},{name:t+".properties.friction.name",value:this.Aqt(),ZUt:t=>this.Fqt(t)},{name:t+".properties.turn-while-stopped.name",value:this.Dqt(),ZUt:t=>this.jqt(t)},{name:t+".properties.enabled.name",value:this.O2t(),ZUt:t=>this.N2t(t)}]}]}Cxt(){return self.Zqt}},new WeakMap),Fl=new Map([["left",0],["right",1],["up",2],["down",3]]);self.Zqt=class extends kl{constructor(){super(),i.set(this,kl.UF().CB())}stop(){i.get(this).zqt()}Xqt(t){Pl.Ce(t);const s=Fl.get(t);if("number"!=typeof s)throw new Error("invalid control");i.get(this).Yqt(s)}get speed(){return i.get(this).Wqt()}set speed(t){Pl.Se(t),i.get(this).Uqt(t)}get Kqt(){return i.get(this).Cqt()}set Kqt(t){Pl.Se(t),i.get(this).Lqt(t)}get acceleration(){return i.get(this).Iqt()}set acceleration(t){Pl.Se(t),i.get(this).Oqt(t)}get $qt(){return i.get(this).Gqt()}set $qt(t){Pl.Se(t),i.get(this).Rqt(t)}get tZt(){return i.get(this).Jqt()}get sZt(){return i.get(this).Vqt()}iZt(){const t=i.get(this);return[t.Jqt(),t.Vqt()]}get eZt(){return i.get(this).Qqt()}set hZt(t){Pl.Se(t),i.get(this).Pqt(t)}get hZt(){return i.get(this)._qt()}set rZt(t){Pl.Se(t),i.get(this).kqt(t)}get rZt(){return i.get(this).Eqt()}set nZt(t){Pl.Se(t),i.get(this).Fqt(t)}get nZt(){return i.get(this).Aqt()}get oZt(){return i.get(this).Dqt()}set oZt(t){i.get(this).jqt(t)}get aZt(){return i.get(this).Nqt()}set aZt(t){i.get(this).Bqt(!!t)}get uZt(){return i.get(this).qqt()}set uZt(t){i.get(this).Hqt(!!t)}get isEnabled(){return i.get(this).O2t()}set isEnabled(t){i.get(this).N2t(!!t)}}}{const jl=self.ks;jl.Zat.$9t.pq={lZt(){return 0!==this.Wqt()},cZt(t,s){return jl.compare(this.Wqt(),t,s)},hc(){return this.O2t()}}}{const Bl=self.ks;Bl.Zat.$9t.ert={Lz(){this.zqt()},fZt(t){this.Hqt(0!==t)},dZt(t){this.Uqt(t)},pZt(t){this.Lqt(t)},mZt(t){this.Oqt(t)},gZt(t){this.Rqt(t)},yZt(t){this.Yqt(t)},Dbt(t){this.N2t(0!==t)},MZt(t){this.Pqt(Bl.vr(t))},wZt(t){this.kqt(Bl.vr(t))},SZt(t){this.Fqt(t)},TZt(t){this.jqt(t)},bZt(t){this.Bqt(t)}}}{const zl=self.ks;zl.Zat.$9t.hrt={xZt(){return this.Wqt()},vZt(){return this.Cqt()},CZt(){return this.Iqt()},IZt(){return this.Gqt()},GZt(){return zl.Cr(this.Qqt())},_Zt(){return this.Jqt()},EZt(){return this.Vqt()},AZt(){return zl.Cr(this._qt())},DZt(){return zl.Cr(this.Eqt())},NZt(){return this.Aqt()}}}{const Ul=self.ks;Ul.Zat.bound=class extends Ul.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const Wl=self.ks;Wl.Zat.bound.yGt=class extends Wl.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const Ql=self.ks;Ql.Zat.bound.Instance=class extends Ql.aCt{constructor(t,s){super(t),this.zJt=0,s&&(this.zJt=s[0]),this.cvt()}mr(){super.mr()}NT(){return{m:this.zJt}}LT(t){this.zJt=t.m}avt(){let t=this.vi.D4(),s=t.l5(),i=t.f4(),e=!1;0===this.zJt?(t.wT()<0&&(t.ST(0),e=!0),t.bT()<0&&(t.xT(0),e=!0),t.wT()>i.Mm()&&(t.ST(i.Mm()),e=!0),t.bT()>i.Em()&&(t.xT(i.Em()),e=!0)):(s.Au()<0&&(t.int(-s.Au()),e=!0),s.Du()<0&&(t.ent(-s.Du()),e=!0),s.Nu()>i.Mm()&&(t.int(-(s.Nu()-i.Mm())),e=!0),s.Lu()>i.Em()&&(t.ent(-(s.Lu()-i.Em())),e=!0)),e&&t.i5()}zrt(t){if(0===t)return this.zJt}Yrt(t,s){0===t&&(this.zJt=s)}}}{const Jl=self.ks;Jl.Zat.bound.pq={}}{const Vl=self.ks;Vl.Zat.bound.ert={}}{const Yl=self.ks;Yl.Zat.bound.hrt={}}{const Hl=self.ks;Hl.Zat.GCt=class extends Hl.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const ql=self.ks;ql.Zat.GCt.yGt=class extends ql.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const Zl=self.ks,Xl=self.Ys,Kl=self.AB,$l=new Set,tc=(Zl.Zat.GCt.Instance=class extends Zl.aCt{constructor(t,s){super(t),this.Dbt(!0),s&&(this.Dbt(s[0]),this._tt(s[1]))}mr(){super.mr()}Dbt(t){this.vi.K_t(!!t)}hc(){return this.vi.X_t()}_tt(s){const i=this.vi.cSt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}Jz(){return this.vi.cSt().get("solidTags")||$l}LZt(){return[...this.Jz()].join(" ")}NT(){return{e:this.hc()}}LT(t){this.Dbt(t.e)}zrt(t){if(0===t)return this.hc()}Yrt(t,s){0===t&&this.Dbt(s)}dvt(){return[{title:"$"+this.RB().nf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.hc(),ZUt:t=>this.Dbt(t)},{name:"behaviors.solid.properties.tags.name",value:this.LZt(),ZUt:t=>this._tt(t)}]}]}Cxt(){return self.OZt}},new WeakMap);self.OZt=class extends Kl{constructor(){super(),tc.set(this,Kl.UF().CB())}set isEnabled(t){tc.get(this).Dbt(!!t)}get isEnabled(){return tc.get(this).hc()}set tags(t){Xl.Ce(t),tc.get(this)._tt(t)}get tags(){return tc.get(this).LZt()}}}{const sc=self.ks;sc.Zat.GCt.pq={hc(){return this.hc()}}}{const ic=self.ks;ic.Zat.GCt.ert={Dbt(t){this.Dbt(t)},_tt(t){this._tt(t)}}}{const ec=self.ks;ec.Zat.GCt.hrt={}}{const hc=self.ks;hc.Zat.RZt=class extends hc.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const rc=self.ks;rc.Zat.RZt.yGt=class extends rc.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const nc=self.ks,oc=self.Ys,ac=self.AB,uc=(nc.Zat.RZt.Instance=class extends nc.aCt{constructor(t,s){super(t),this.PZt=0,this.kZt=0,this.FZt=0,this.jZt=!0,this.BZt=!0,this.zZt=!1,this.UZt=0,this.WZt=nc.pr(nc.A0),this.QZt=this.vi.D4().PA()||1,s&&(this.PZt=s[0],this.kZt=s[1],this.FZt=s[2],this.jZt=!!s[3],this.BZt=!!s[4],this.UZt=this.BZt?0:3),this.BZt&&(0===this.PZt?(this.UZt=1,0===this.kZt&&(this.UZt=2)):(this.vi.D4().FA(0),this.gf.j4())),this.uvt()}mr(){super.mr()}NT(){return{fit:this.PZt,wt:this.kZt,fot:this.FZt,d:this.jZt,s:this.UZt,st:this.WZt.si(),mo:this.QZt}}LT(t){this.PZt=t.fit,this.kZt=t.wt,this.FZt=t.fot,this.jZt=t.d,this.UZt=t.s,this.WZt.Set(t.st),this.QZt=t.mo,3===this.UZt?this.Yxt():this.uvt()}jX(){const t=this.gf.D3(this.vi),s=(this.WZt.Sc(t),this.vi.D4());0===this.UZt&&(s.FA(this.WZt.si()/this.PZt*this.QZt),this.gf.j4(),s.PA()>=this.QZt)&&(s.FA(this.QZt),this.UZt=1,this.WZt.g0(),this.Uxt("fadeinend"),this.Ij(nc.Zat.RZt.pq.JZt)),1===this.UZt&&this.WZt.si()>=this.kZt&&(this.UZt=2,this.WZt.g0(),this.Uxt("waitend"),this.Ij(nc.Zat.RZt.pq.VZt)),2===this.UZt&&(0!==this.FZt?(s.FA(this.QZt-this.WZt.si()/this.FZt*this.QZt),this.gf.j4(),s.PA()<=0&&(this.UZt=3,this.WZt.g0(),this.Uxt("fadeoutend"),this.Ij(nc.Zat.RZt.pq.YZt),this.jZt)&&this.gf.VF(this.vi)):(this.UZt=3,this.WZt.g0())),3===this.UZt&&this.Yxt()}HZt(){this.BZt||this.zZt||(this.QZt=this.vi.D4().PA()||1,this.zZt=!0),3===this.UZt&&this.pD()}qZt(){this.pD()}pD(){this.UZt=0,this.WZt.g0(),0===this.PZt?(this.UZt=1,0===this.kZt&&(this.UZt=2)):(this.vi.D4().FA(0),this.gf.j4()),this.uvt()}ZZt(t){this.PZt=Math.max(t,0)}XZt(){return this.PZt}KZt(t){this.kZt=Math.max(t,0)}$Zt(){return this.kZt}tXt(t){this.FZt=Math.max(t,0)}sXt(){return this.FZt}zrt(t){switch(t){case 0:return this.XZt();case 1:return this.$Zt();case 2:return this.sXt();case 3:return this.jZt}}Yrt(t,s){switch(t){case 0:this.ZZt(s);break;case 1:this.KZt(s);break;case 2:this.tXt(s);break;case 3:this.jZt=!!s}}dvt(){const t="behaviors.fade";return[{title:"$"+this.RB().nf(),properties:[{name:t+".properties.fade-in-time.name",value:this.XZt(),ZUt:t=>this.ZZt(t)},{name:t+".properties.wait-time.name",value:this.$Zt(),ZUt:t=>this.KZt(t)},{name:t+".properties.fade-out-time.name",value:this.sXt(),ZUt:t=>this.tXt(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.UZt]]}]}]}Cxt(){return self.iXt}},new WeakMap);self.iXt=class extends ac{constructor(){super(),uc.set(this,ac.UF().CB())}eXt(){uc.get(this).HZt()}hXt(){uc.get(this).qZt()}set rXt(t){oc.Se(t),uc.get(this).ZZt(t)}get rXt(){return uc.get(this).XZt()}set nXt(t){oc.Se(t),uc.get(this).KZt(t)}get nXt(){return uc.get(this).$Zt()}set oXt(t){oc.Se(t),uc.get(this).tXt(t)}get oXt(){return uc.get(this).sXt()}}}{const lc=self.ks;lc.Zat.RZt.pq={YZt(){return!0},JZt(){return!0},VZt(){return!0}}}{const cc=self.ks;cc.Zat.RZt.ert={aXt(){this.HZt()},uXt(){this.qZt()},lXt(t){this.ZZt(t)},cXt(t){this.KZt(t)},fXt(t){this.tXt(t)}}}{const fc=self.ks;fc.Zat.RZt.hrt={dXt(){return this.XZt()},pXt(){return this.$Zt()},mXt(){return this.sXt()}}}{const dc=self.ks;dc.Zat.gXt=class extends dc.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const pc=self.ks;pc.Zat.gXt.yGt=class extends pc.nCt{constructor(t){super(t),this.yXt=[]}mr(){pc.Qn(this.yXt),super.mr()}vxt(){}MXt(){return this.yXt}}}{const N=self.ks,mc=self.Ys,gc=self.AB,yc=N.pr(N.Rect),Mc=[],wc=(N.Zat.gXt.Instance=class extends N.aCt{constructor(t,s){super(t),this.wXt=300,this.SXt=1,this.TXt=!0,this.bXt=N.vr(180),this.xXt=0,this.vXt=!1,this.CXt=500,this.IXt=!0,this.kyt=!0,this.GXt=0,this._Xt=0,this.EXt=null,this.AXt=-1,this.DXt=0,this.NXt=0,s&&(this.wXt=s[0],this.SXt=s[1],this.TXt=!!s[2],this.bXt=N.vr(s[3]),this.xXt=s[4],this.vXt=!!s[5],this.CXt=s[6],this.IXt=!!s[7],this.kyt=!!s[8]),this._Xt=this.SXt;const i=this.gf.qf();this.G0=new N.v0(N.M0.x0(i,"instancedestroy",t=>this.yYt(t.PB)),N.M0.x0(i,"afterload",t=>this.UZ())),this.kyt&&this.uvt()}mr(){this.EXt=null,super.mr()}UZ(){-1===this.AXt?this.EXt=null:this.EXt=this.gf.I4(this.AXt)}yYt(t){this.EXt===t&&(this.EXt=null)}LXt(t){return!(this.EXt===t||this.vi===t||!this.OXt(t)||(this.EXt=t,this.RXt(),0))}PXt(){this.EXt=null}kXt(t){this.wXt=t}FXt(){return this.wXt}jXt(t){this.SXt=t}BXt(){return this.SXt}zXt(t){this.TXt=!!t}UXt(){return this.TXt}WXt(t){this.bXt=t}QXt(){return this.bXt}JXt(t){this.xXt=t}VXt(){return this.xXt}YXt(t){this.vXt=!!t}HXt(){return this.vXt}qXt(t){this.CXt=t}ZXt(){return this.CXt}N2t(t){this.kyt=!!t,this.kyt?this.uvt():this.Yxt()}O2t(){return this.kyt}NT(){return{r:this.wXt,rof:this.SXt,re:this.TXt,rs:this.bXt,tm:this.xXt,pa:this.vXt,ps:this.CXt,ucc:this.IXt,e:this.kyt,ftc:this._Xt,t:this.EXt?this.EXt.$F():-1,ox:this.DXt,oy:this.NXt,targs:this.sTt().MXt().map(t=>t.nY())}}LT(t){this.wXt=t.r,this.SXt=t.rof,this.TXt=t.re,this.bXt=t.rs,this.xXt=t.tm,this.vXt=t.pa,this.CXt=t.ps,this.IXt=t.ucc,this.N2t(t.e),this._Xt=t.ftc,this.AXt=t.t,this.DXt=t.ox,this.NXt=t.oy,this.GXt=0;const s=this.sTt().MXt();N.Qn(s);for(const i of t.targs){const e=this.gf.BU(i);e&&s.push(e)}}OXt(t){const s=this.D4(),i=t.D4(),e=i.wT()-s.wT(),h=i.bT()-s.bT();return e*e+h*h<=this.wXt*this.wXt}XXt(){const t=this.D4(),s=this.sTt().MXt(),i=this.gf.RO();if(this.IXt)yc.set(t.wT()-this.wXt,t.bT()-this.wXt,t.wT()+this.wXt,t.bT()+this.wXt),i.AR(t.N4(),s,yc,Mc);else for(const e of s)N.Kh(Mc,e.QP());for(const h of Mc)if(h!==this.vi&&this.OXt(h))return this.EXt=h,void N.Qn(Mc);N.Qn(Mc)}KXt(){let t=this.D4(),s=this.sTt().MXt(),i=this.gf.RO(),e=t.wT(),h=t.bT(),r=this.wXt*this.wXt;if(this.EXt=null,this.IXt)yc.set(e-this.wXt,h-this.wXt,e+this.wXt,h+this.wXt),i.AR(t.N4(),s,yc,Mc);else for(const n of s)N.Kh(Mc,n.QP());for(const o of Mc)if(o!==this.vi){const a=o.D4(),u=e-a.wT(),l=h-a.bT(),c=u*u+l*l;c<r&&(this.EXt=o,r=c)}N.Qn(Mc)}RXt(){const t=this.EXt.D4();this.DXt=t.wT(),this.NXt=t.bT(),this.Uxt("targetacquired",!1,{$Xt:this.EXt.G4()}),this.Ij(N.Zat.gXt.pq.tKt)}jX(){if(this.kyt){const o=this.gf.D3(this.vi),t=this.gf.O3(),a=this.D4();if(this.EXt&&!this.OXt(this.EXt)&&(this.EXt=null),t>=this.GXt+.1)if(this.GXt=t,0!==this.xXt||this.EXt){if(1===this.xXt){const s=this.EXt;this.KXt(),this.EXt&&this.EXt!==s&&this.RXt()}}else this.XXt(),this.EXt&&this.RXt();if(this._Xt+=o,this.EXt){let t=this.EXt.D4(),s=a.wT(),i=a.bT(),e=t.wT(),h=t.bT(),r=N.Ar(s,i,t.wT(),t.bT()),n=0;if(this.vXt){const u=e-s,l=h-i,c=(e-this.DXt)/o,f=(h-this.NXt)/o,d=u*f-l*c,p=Math.asin(N.Tr(d/(this.CXt*N.Ir(u,l)),-1,1))+r;n=0<(Math.cos(p)*f-Math.sin(p)*c)*d?p:r}else n=r;this.TXt&&(a.ck(N.Nr(a.fk(),n,this.bXt*o)),a.i5()),this._Xt>=this.SXt&&(!this.TXt||N.Cr(N.Dr(a.fk(),n))<=.1)&&(this._Xt-=this.SXt,this._Xt>=this.SXt&&(this._Xt=0),this.Uxt("shoot",!1,{$Xt:this.EXt.G4()}),this.Ij(N.Zat.gXt.pq.sKt)),this.EXt&&(t=this.EXt.D4(),this.DXt=t.wT(),this.NXt=t.bT())}this._Xt>this.SXt&&(this._Xt=this.SXt)}}zrt(t){switch(t){case 0:return this.FXt();case 1:return this.BXt();case 2:return this.UXt();case 3:return N.Cr(this.QXt());case 4:return this.VXt();case 5:return this.HXt();case 6:return this.ZXt();case 7:return this.IXt;case 8:return this.O2t()}}Yrt(t,s){switch(t){case 0:this.kXt(s);break;case 1:this.jXt(s);break;case 2:this.zXt(!!s);break;case 3:this.UXt()&&this.WXt(N.vr(s));break;case 4:this.JXt(s);break;case 5:this.YXt(!!s);break;case 6:this.HXt()&&this.qXt(s);break;case 7:this.IXt=!!s;break;case 8:this.N2t(s)}}dvt(){const t="behaviors.turret";return[{title:"$"+this.RB().nf(),properties:[{name:t+".properties.range.name",value:this.FXt(),ZUt:t=>this.kXt(t)},{name:t+".properties.rate-of-fire.name",value:this.BXt(),ZUt:t=>this.jXt(t)},{name:t+".properties.rotate-speed.name",value:N.Cr(this.QXt()),ZUt:t=>this.WXt(N.vr(t))},{name:t+".properties.predictive-aim.name",value:this.HXt(),ZUt:t=>this.YXt(t)},{name:t+".properties.projectile-speed.name",value:this.ZXt(),ZUt:t=>this.qXt(t)},{name:t+".debugger.has-target",value:!!this.EXt},{name:t+".debugger.target-uid",value:this.EXt?this.EXt.$F():0},{name:t+".properties.enabled.name",value:this.O2t(),ZUt:t=>this.N2t(t)}]}]}Cxt(){return self.iKt}},new WeakMap),Sc=["first","nearest"];self.iKt=class extends gc{constructor(){super(),wc.set(this,gc.UF().CB())}get currentTarget(){const t=wc.get(this).EXt;return t?t.G4():null}set currentTarget(t){const s=wc.get(this);t?s.LXt(s.K4().A4(t)):s.PXt()}get range(){return wc.get(this).FXt()}set range(t){mc.Se(t),wc.get(this).kXt(t)}get eKt(){return wc.get(this).BXt()}set eKt(t){mc.Se(t),wc.get(this).jXt(t)}get hKt(){return wc.get(this).UXt()}set hKt(t){wc.get(this).zXt(!!t)}get rKt(){return wc.get(this).QXt()}set rKt(t){mc.Se(t),wc.get(this).WXt(t)}get nKt(){return Sc[wc.get(this).VXt()]}set nKt(t){const s=Sc.indexOf(t);if(-1===s)throw new Error("invalid targetMode");wc.get(this).JXt(s)}get oKt(){return wc.get(this).HXt()}set oKt(t){wc.get(this).YXt(!!t)}get aKt(){return wc.get(this).ZXt()}set aKt(t){mc.Se(t),wc.get(this).qXt(t)}get isEnabled(){return wc.get(this).O2t()}set isEnabled(t){wc.get(this).N2t(t)}}}{const Tc=self.ks;Tc.Zat.gXt.pq={uKt(){return!!this.EXt},sKt(){return!0},tKt(){return!0},hc(){return this.O2t()}}}{const bc=self.ks;bc.Zat.gXt.ert={lKt(t){if(t){const s=t.JP().QP();for(const i of s)if(this.LXt(i))break}},cKt(t){const s=this.sTt().MXt();if(!s.includes(t)){for(const i of s)if(i.KV()&&i.$V(t))return;s.push(t)}},fKt(){bc.Qn(this.sTt().MXt())},dKt(){this.PXt()},Dbt(t){this.N2t(0!==t)},pKt(t){this.kXt(t)},mKt(t){this.jXt(t)},gKt(t){this.zXt(0!==t)},yKt(t){this.WXt(bc.vr(t))},MKt(t){this.JXt(t)},wKt(t){this.YXt(0!==t)},SKt(t){this.qXt(t)}}}{const xc=self.ks;xc.Zat.gXt.hrt={TKt(){return this.EXt?this.EXt.$F():0},Range(){return this.FXt()},bKt(){return this.BXt()},xKt(){return xc.Cr(this.QXt())}}}{const vc=self.ks;vc.Zat.vKt=class extends vc.sCt{constructor(t){super(t)}mr(){super.mr()}}}{const Cc=self.ks;Cc.Zat.vKt.yGt=class extends Cc.nCt{constructor(t){super(t)}mr(){super.mr()}vxt(){}}}{const Ic=self.ks;Ic.Zat.vKt.Instance=class extends Ic.aCt{constructor(t,s){super(t),this.CKt=null,this.IKt=-1,this.zJt="",this.GKt=new Set,this._Kt=0,this.EKt=0,this.AKt=0,this.DKt=0,this.NKt=0,this.LKt=0,this.OKt=0,this.RKt=0,this.PKt=0,this.kKt=0,this.jZt=!1,s&&(this.jZt=s[0]);const i=this.gf.qf();this.G0=new Ic.v0(Ic.M0.x0(i,"instancedestroy",t=>this.yYt(t.PB)),Ic.M0.x0(i,"afterload",t=>this.UZ()))}mr(){this.CKt=null,super.mr()}FKt(t){t?(this.CKt=t,this.cvt()):(this.CKt=null,this.Hxt())}jKt(t,s,i){if(t){const e=t.HTt(this.vi);if(e){this.zJt=s,this.FKt(e);const h=this.vi.D4(),r=e.D4();if("properties"===this.zJt){const n=this.GKt;n.clear();for(const o of i)n.add(o);this.DKt=h.wT()-r.wT(),this.NKt=h.bT()-r.bT(),this.RKt=h.fk()-r.fk(),this.kKt=h.fk(),this.PKt=h.vT()-r.vT(),n.has("x")&&n.has("y")&&(this.EKt=Ic.Ar(r.wT(),r.bT(),h.wT(),h.bT())-r.fk(),this._Kt=Ic._r(r.wT(),r.bT(),h.wT(),h.bT())),n.has("width-abs")?this.LKt=h.Mm()-r.Mm():n.has("width-scale")&&(this.LKt=h.Mm()/r.Mm()),n.has("height-abs")?this.OKt=h.Em()-r.Em():n.has("height-scale")&&(this.OKt=h.Em()/r.Em())}else this._Kt=Ic._r(r.wT(),r.bT(),h.wT(),h.bT())}}}NT(){const t=this.GKt,s=this.zJt,i={uid:this.CKt&&!this.CKt.nU()?this.CKt.$F():-1,m:s,d:this.jZt};return"rope"===s||"bar"===s?i.pd=this._Kt:"properties"===s&&(i.ps=[...this.GKt],t.has("imagepoint")?i.ip=this.AKt:t.has("x")&&t.has("y")?(i.pa=this.EKt,i.pd=this._Kt):(t.has("x")&&(i.dx=this.DKt),t.has("y")&&(i.dy=this.NKt)),t.has("angle")&&(i.da=this.RKt,i.lka=this.kKt),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.LKt),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.OKt),t.has("z"))&&(i.dz=this.PKt),i}LT(t){const s=t.m,i=this.GKt;if(i.clear(),this.IKt=t.uid,"number"==typeof s)this.BKt(t);else if(this.zJt=s,t.hasOwnProperty("d")&&(this.jZt=!!t.d),"rope"===s||"bar"===s)this._Kt=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.AKt=t.ip:i.has("x")&&i.has("y")?(this.EKt=t.pa,this._Kt=t.pd):(i.has("x")&&(this.DKt=t.dx),i.has("y")&&(this.NKt=t.dy)),i.has("angle")&&(this.RKt=t.da,this.kKt=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.LKt=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.OKt=t.dh),i.has("z")&&(this.PKt=t.dz)}}BKt(t){const s=this.GKt,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.zJt="properties",s.add("x").add("y").add("angle"),this.EKt=h,this._Kt=r,this.RKt=i-e,this.kKt=t.lka;break;case 1:this.zJt="properties",s.add("x").add("y"),this.EKt=h,this._Kt=r;break;case 2:this.zJt="properties",s.add("angle"),this.RKt=i-e,this.kKt=t.lka;break;case 3:this.zJt="rope",this._Kt=t.pd;break;case 4:this.zJt="bar",this._Kt=t.pd}}UZ(){-1===this.IKt?this.FKt(null):(this.FKt(this.gf.I4(this.IKt)),this.IKt=-1)}yYt(t){this.CKt===t&&(this.FKt(null),this.jZt)&&this.gf.VF(this.vi)}avt(){const r=this.CKt;if(r&&!r.nU()){let i=r.D4(),t=this.vi,e=t.D4(),s=this.zJt,h=!1;if("rope"===s||"bar"===s){const n=Ic._r(e.wT(),e.bT(),i.wT(),i.bT());if(n>this._Kt||"bar"===s&&n<this._Kt){const o=Ic.Ar(i.wT(),i.bT(),e.wT(),e.bT());e.e5(i.wT()+Math.cos(o)*this._Kt,i.bT()+Math.sin(o)*this._Kt),h=!0}}else{let t=this.GKt,s=0;if(t.has("imagepoint")){const[a,u]=r.yTt(this.AKt);e.mTt(a,u)||(e.e5(a,u),h=!0)}else if(t.has("x")&&t.has("y")){const l=i.wT()+Math.cos(i.fk()+this.EKt)*this._Kt,c=i.bT()+Math.sin(i.fk()+this.EKt)*this._Kt;e.mTt(l,c)||(e.e5(l,c),h=!0)}else s=i.wT()+this.DKt,t.has("x")&&s!==e.wT()&&(e.ST(s),h=!0),s=i.bT()+this.NKt,t.has("y")&&s!==e.bT()&&(e.xT(s),h=!0);t.has("angle")&&(this.kKt!==e.fk()&&(this.RKt=Ic.br(this.RKt+(e.fk()-this.kKt))),(s=Ic.br(i.fk()+this.RKt))!==e.fk()&&(e.ck(s),h=!0),this.kKt=e.fk()),t.has("width-abs")&&(s=i.Mm()+this.LKt)!==e.Mm()&&(e.Im(s),h=!0),t.has("width-scale")&&(s=i.Mm()*this.LKt)!==e.Mm()&&(e.Im(s),h=!0),t.has("height-abs")&&(s=i.Em()+this.OKt)!==e.Em()&&(e.wm(s),h=!0),t.has("height-scale")&&(s=i.Em()*this.OKt)!==e.Em()&&(e.wm(s),h=!0),t.has("z")&&(s=i.vT()+this.PKt)!==e.vT()&&(e.CT(s),this.gf.j4())}h&&e.i5()}}dvt(){const t="behaviors.pin.debugger";return[{title:"$"+this.RB().nf(),properties:[{name:t+".is-pinned",value:!!this.CKt},{name:t+".pinned-uid",value:this.CKt?this.CKt.$F():0}]}]}}}{const Gc=self.ks;Gc.Zat.vKt.pq={zKt(){return!!this.CKt},UKt(){return this.jZt}}}{const _c=self.ks;_c.Zat.vKt.ert={WKt(t,s){this.jKt(t,0===s?"rope":"bar")},QKt(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.jKt(t,"properties",o)},JKt(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.AKt=s,this.jKt(t,"properties",n)},VKt(t){"rope"!==this.zJt&&"bar"!==this.zJt||(this._Kt=Math.max(t,0))},YKt(t){this.jZt=t},HKt(){this.FKt(null),this.zJt="",this.GKt.clear(),this.AKt=""},vKt(t,s){switch(s){case 0:this.jKt(t,"properties",["x","y","angle"]);break;case 1:this.jKt(t,"properties",["x","y"]);break;case 2:this.jKt(t,"properties",["angle"]);break;case 3:this.jKt(t,"rope");break;case 4:this.jKt(t,"bar")}}}}{const Ec=self.ks;Ec.Zat.vKt.hrt={qKt(){return this.CKt?this.CKt.$F():-1}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;self.XMt=[()=>"Movement",()=>"engine",()=>0,()=>-5,t=>{const s=t.owt(0);return()=>s.JMt()},()=>100,()=>400,()=>"screech",()=>600,()=>1,()=>"",()=>2,()=>"Crash",()=>300,()=>20,()=>.4,t=>{const s=t.owt(0);return()=>s.LMt()+1},()=>80,()=>"UI",t=>{const s=t.owt(0);return()=>i("Speed: ",s.JMt())},t=>{const s=t.owt(0).ZMt();return()=>i("Time: ",s.Eet())},t=>{const s=t.owt(0).ZMt();return()=>i("Remaining Checkpoints: ",s.Eet())},()=>"Checkpoints",t=>{const s=t.owt(0).GMt();return()=>Math.floor(s(1,5))},()=>7,()=>1120,()=>736,()=>6,()=>3328,()=>224,()=>3696,()=>3,()=>2560,()=>1408,()=>90,()=>4,()=>5,()=>6656,()=>4992,()=>1760,()=>3392,()=>2016,()=>8432,()=>1776,()=>44.8,()=>1536,()=>2912,()=>6704,()=>3808,()=>5072,()=>2464,()=>48.4,()=>5360,()=>4576,()=>4960,()=>6144,()=>2784,()=>3936,()=>"End Game"]}var t=self.ks;self.Rkt=function(){return[t.gq.Bht,t.gq.JWt,t.Zat.j9t,t.Zat.$9t,t.Zat.bound,t.Zat.GCt,t.gq.Keyboard,t.gq.Audio,t.Zat.RZt,t.gq.Text,t.Zat.gXt,t.Zat.vKt,t.gq.mq.pq.xpt,t.gq.Keyboard.pq.KJt,t.Zat.$9t.ert.yZt,t.Zat.$9t.pq.lZt,t.gq.mq.pq.m5t,t.gq.Audio.ert.Lz,t.gq.Audio.ert.Play,t.gq.mq.pq.x5t,t.Zat.$9t.hrt.xZt,t.Zat.$9t.pq.cZt,t.gq.Keyboard.pq.lVt,t.gq.Keyboard.pq.pVt,t.gq.Audio.ert.ZYt,t.gq.Bht.ert.TWt,t.gq.Bht.ert.YTt,t.gq.Bht.pq.e2t,t.Zat.j9t.ert.K9t,t.gq.Bht.ert.KUt,t.gq.Bht.hrt.AWt,t.gq.mq.pq.p5t,t.gq.Text.ert.Sf,t.gq.mq.pq.g5t,t.gq.mq.ert.X5t,t.gq.mq.pq.fq,t.gq.mq.ert.Z5t,t.gq.mq.hrt.random,t.Zat.vKt.ert.vKt,t.gq.mq.pq.S1,t.gq.Bht.ert.J2t,t.gq.mq.ert.K5t,t.gq.mq.pq.v5t,t.gq.mq.ert.eBt,t.Zat.gXt.ert.cKt,t.gq.Bht.ert.ck,t.gq.Bht.pq.pWt,t.gq.mq.ert.$5t,t.gq.mq.pq.C5t,t.Zat.$9t.ert.Dbt,t.gq.Bht.ert.Hk,t.gq.mq.ert.Fn,t.gq.mq.ert.CBt,t.gq.mq.ert.iBt,t.gq.Text.ert.Hk]},self.Hkt=[{ZKt:0},{XKt:0},{JWt:0},{KKt:0},{$9t:0},{$Kt:0},{t$t:0},{s$t:0},{i$t:0},{Keyboard:0},{e$t:0},{Audio:0},{RZt:0},{h$t:0},{r$t:0},{n$t:0},{speed:0},{o$t:0},{a$t:0},{u$t:0},{gXt:0},{vKt:0},{l$t:0},{c$t:0},{f$t:0},{d$t:0},{p$t:0},{m$t:0},{g$t:0},{y$t:0},{M$t:0}],self.w$t={ZKt:class extends self.iWt{},XKt:class extends self.iWt{},JWt:class extends self.u8t{},$9t:class extends self.iWt{},s$t:class extends self.iWt{},i$t:class extends self.iWt{},Keyboard:class extends self.kF{},e$t:class extends self.iWt{},Audio:class extends self.kF{},h$t:class extends self.iWt{},r$t:class extends self.iWt{},n$t:class extends self.iWt{},speed:class extends self.Z7t{},o$t:class extends self.Z7t{},a$t:class extends self.iWt{},u$t:class extends self.Z7t{},l$t:class extends self.iWt{},c$t:class extends self.iWt{},f$t:class extends self.Z7t{},d$t:class extends self.iWt{}};